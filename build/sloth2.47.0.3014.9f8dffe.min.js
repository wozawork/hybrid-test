/*! For license information please see main.bundle.js.LICENSE.txt */
var cdwpb;!function(){var t={512:function(t){"use strict";t.exports=function(t,e,n,r){var o=self||window;try{try{var i;try{i=new o.Blob([t])}catch(e){(i=new(o.BlobBuilder||o.WebKitBlobBuilder||o.MozBlobBuilder||o.MSBlobBuilder)).append(t),i=i.getBlob()}var a=o.URL||o.webkitURL,u=a.createObjectURL(i),s=new o[e](u,n);return a.revokeObjectURL(u),s}catch(r){return new o[e]("data:application/javascript,".concat(encodeURIComponent(t)),n)}}catch(t){if(!r)throw Error("Inline worker is not supported");return new o[e](r,n)}}},542:function(t){"use strict";t.exports=JSON.parse('{"username":"0001","user name":"0001","user-name":"0001","user_id":"0001","userid":"0001","user-id":"0001","login name":"0001","loginname":"0001","login_id":"0001","loginid":"0001","login-user":"0001","login_user":"0001","account name":"0001","accountname":"0001","account_name":"0001","account id":"0006","accountid":"0006","account_id":"0001","uname":"0001","member id":"0120","password":"0002","pass word":"0002","pass-word":"0002","passwd":"0002","pwd":"0002","p/w":"0002","pword":"0002","pass_code":"0002","passcode":"0002","password_input":"0002","pass input":"0002","password field":"0002","passwordfield":"0002","user password":"0002","userpassword":"0002","account password":"0002","accountpassword":"0002","login password":"0002","loginpassword":"0002","secret password":"0002","otp":"0003","one time password":"0003","one-time password":"0003","onetime password":"0003","one time pin":"0003","one-time pin":"0003","otp code":"0003","otpcode":"0003","verification code":"0128","verify code":"0003","verificationcode":"0003","auth code":"0003","authcode":"0003","authentication code":"0003","2fa code":"0003","two factor code":"0003","two-factor code":"0003","2fa":"0003","security code":"0128","pin code":"0003","amount":"0004","payment amount":"0004","transfer amount":"0004","total amount":"0004","money":"0004","value":"0004","sum":"0004","price":"0004","fee":"0004","charge":"0004","cost":"0004","amount due":"0004","balance":"0004","payable amount":"0004","bill amount":"0004","transaction amount":"0004","withdrawal amount":"0004","deposit amount":"0004","loan amount":"0004","subtotal":"0004","new payee":"0005","add payee":"0005","payee name":"0005","payee":"0005","recipient name":"0005","recipient":"0005","beneficiary":"0005","beneficiary name":"0005","payee account":"0005","payee_account":"0005","recipient account":"0005","recipient_account":"0005","payee id":"0005","payeeid":"0005","beneficiary id":"0005","beneficiaryid":"0005","new recipient":"0005","add beneficiary":"0005","payee details":"0005","recipient details":"0005","account number":"0006","acc number":"0006","acct number":"0006","account no":"0006","account #":"0006","account#":"0006","accountnum":"0006","accountnum#":"0006","bank account":"0006","bankaccount":"0006","bank account number":"0006","bankaccountnumber":"0006","accountnumbr":"0006","acct no":"0006","acct#":"0006","acctno":"0006","account identifier":"0006","account code":"0006","change password":"0007","update password":"0007","reset password":"0007","new password":"0007","set password":"0007","create password":"0007","re-enter password":"0007","confirm password":"0007","modify password":"0007","password change":"0007","password reset":"0007","password update":"0007","change passcode":"0007","update passcode":"0007","reset passcode":"0007","change pwd":"0007","update pwd":"0007","reset pwd":"0007","change secret":"0007","update secret":"0007","change phone":"0008","update phone":"0008","new phone":"0008","phone update":"0008","change number":"0008","phone number change":"0008","update number":"0008","modify phone":"0008","modify number":"0008","phone change":"0008","phone edit":"0008","edit phone":"0008","replace phone":"0008","replace number":"0008","new phone number":"0008","add phone number":"0008","set phone number":"0008","set phone":"0008","phone update request":"0008","update mobile":"0008","change email":"0009","update email":"0009","new email":"0009","email update":"0009","change e-mail":"0009","e-mail update":"0009","email address change":"0009","update email address":"0009","change email address":"0009","modify email":"0009","modify e-mail":"0009","edit email":"0009","email change":"0009","replace email":"0009","new email address":"0009","set email":"0009","update mail":"0009","change mail":"0009","mail update":"0009","email modifications":"0009","change address":"0010","update address":"0010","new address":"0010","address update":"0010","edit address":"0010","modify address":"0010","replace address":"0010","address change":"0010","address edit":"0010","address modification":"0010","set address":"0010","update location":"0010","change location":"0010","new location":"0010","location update":"0010","shipping address change":"0010","billing address change":"0010","change street":"0010","update street":"0010","change home address":"0010","login":"0011","sign in":"0011","sign-in":"0011","signin":"0011","submit login":"0011","login button":"0011","log in":"0011","log-in":"0011","login submit":"0011","submit credentials":"0011","sign in button":"0011","sign in submit":"0011","connect":"0011","access account":"0011","enter":"0011","enter site":"0011","authenticate":"0011","proceed login":"0011","start session":"0011","begin session":"0011","first name":"0100","firstname":"0100","given name":"0100","your first name":"0100","first-name":"0100","forename":"0100","christian name":"0100","personal name":"0100","first":"0100","initial name":"0100","givenname":"0100","firstn":"0100","fname":"0100","first name field":"0100","customer first name":"0100","applicant first name":"0100","user first name":"0100","first name input":"0100","first name enter":"0100","first-name-entry":"0100","last name":"0101","lastname":"0101","surname":"0101","family name":"0101","last-name":"0101","l-name":"0101","lname":"0101","second name":"0102","lastn":"0101","last name field":"0101","customer last name":"0101","applicant last name":"0101","user last name":"0101","surname field":"0101","familyname":"0101","last name input":"0101","last name enter":"0101","surname input":"0101","surname enter":"0101","surname entry":"0101","middle name":"0102","middlename":"0102","middle-name":"0102","middle initial":"0102","middleinitial":"0102","m name":"0102","mname":"0102","middle":"0102","middle n.":"0102","middle name field":"0102","middle name input":"0102","middle name enter":"0102","middle name entry":"0102","mi":"0102","middle initial field":"0102","middleinitial field":"0102","middle initial input":"0102","middle initial entry":"0102","m.i.":"0102","email":"0103","email address":"0103","e-mail":"0103","mail address":"0103","your email":"0103","your e-mail":"0103","email id":"0103","emailid":"0103","email_id":"0103","mail id":"0103","mailid":"0103","mail_id":"0103","emailaddress":"0103","email addr":"0103","email field":"0103","email input":"0103","email enter":"0103","email entry":"0103","emailaccount":"0103","email account":"0103","ssn":"0104","social security number":"0104","social security #":"0104","ssn number":"0104","soc sec number":"0104","social-sec-number":"0104","social security no":"0104","ss no":"0104","ss#":"0104","ss number":"0104","socsec":"0104","social security id":"0104","social security identifier":"0104","social security code":"0104","ssnid":"0104","ssn id":"0104","ssn field":"0104","ssn input":"0104","ssn enter":"0104","ssn entry":"0104","phone number":"0105","phone":"0105","mobile number":"0105","mobile":"0105","telephone":"0105","cell number":"0105","cellphone":"0105","your phone":"0105","contact number":"0105","contact #":"0105","phone no":"0105","phone#":"0105","tel":"0105","tel number":"0105","telephone number":"0105","mobile phone":"0105","cell":"0105","cell phone":"0105","phone field":"0105","phone input":"0105","street address":"0106","address":"0106","home address":"0106","residential address":"0106","mailing address":"0106","your address":"0106","street":"0106","street address line":"0106","streetaddr":"0106","address line":"0106","street address field":"0106","street address input":"0106","address field":"0106","address input":"0106","address enter":"0106","address entry":"0106","house address":"0106","road address":"0106","streetname":"0106","street line":"0106","dob":"0107","date of birth":"0107","birth date":"0107","full dob":"0107","your birthdate":"0107","birthdate":"0107","birth date full":"0107","full date of birth":"0107","dob full":"0107","dob field":"0107","dob input":"0107","dob enter":"0107","birthdate field":"0107","birthday":"0107","birthday full":"0107","birthday date":"0107","date-of-birth":"0107","birth date input":"0107","birth date entry":"0107","dob complete":"0107","dob day":"0108","birth day":"0108","day of birth":"0108","birth day of month":"0108","day of month":"0108","dob-day":"0108","birth day field":"0108","birth day input":"0108","day field":"0108","day input":"0108","dob day field":"0108","birth day entry":"0108","day birth":"0108","day dob":"0108","birth-day":"0108","dayofbirth":"0108","day-of-birth":"0108","date day":"0108","day value":"0108","dob d":"0108","dob month":"0109","birth month":"0109","month of birth":"0109","month born":"0109","dob-month":"0109","birth month field":"0109","month field":"0109","month input":"0109","month entry":"0109","dob mth":"0109","dob m":"0109","month dob":"0109","birth-month":"0109","monthofbirth":"0109","month-of-birth":"0109","month value":"0109","month dob field":"0109","month dob input":"0109","birth mth":"0109","dob month value":"0109","dob year":"0110","birth year":"0110","year of birth":"0110","year born":"0110","dob-year":"0110","birth year field":"0110","year field":"0110","year input":"0110","year entry":"0110","dob yr":"0110","birth-year":"0110","yearofbirth":"0110","year-of-birth":"0110","yr of birth":"0110","dob y":"0110","birthyear":"0110","year value":"0110","dob year field":"0110","year dob":"0110","dob yyyy":"0110","annual income":"0111","income":"0111","yearly income":"0111","salary":"0111","earnings":"0111","yearly salary":"0111","annual salary":"0111","monthly income":"0111","income per year":"0111","yearly earnings":"0111","income yearly":"0111","total income":"0111","gross income":"0111","net income":"0111","income amount":"0111","income field":"0111","income input":"0111","salary amount":"0111","salary field":"0111","salary input":"0111","zip code":"0112","postal code":"0112","zipcode":"0112","zip":"0112","post code":"0112","zip-code":"0112","zip number":"0112","zip no":"0112","postal":"0112","postal no":"0112","postal number":"0112","postalcode":"0112","post code number":"0112","zip field":"0112","zip input":"0112","zip entry":"0112","postcode field":"0112","postal code field":"0112","zip_digit":"0112","zipcode field":"0112","city":"0113","town":"0113","city name":"0113","town name":"0113","your city":"0113","municipality":"0113","city/town":"0113","citytown":"0113","city or town":"0113","locality":"0113","village":"0113","hometown":"0113","city field":"0113","city input":"0113","city entry":"0113","city value":"0113","town field":"0113","town input":"0113","cityname":"0113","city location":"0113","state":"0114","province":"0114","territory":"0114","region":"0114","your state":"0114","state/region":"0114","state name":"0114","province name":"0114","province/state":"0114","county":"0114","state field":"0114","state input":"0114","state entry":"0114","region field":"0114","region input":"0114","regional":"0114","state value":"0114","state id":"0114","statecode":"0114","statecode field":"0114","country":"0115","nation":"0115","country name":"0115","your country":"0115","country/region":"0115","nationality":"0115","nation name":"0115","country field":"0115","country input":"0115","country entry":"0115","country code":"0115","countrycode":"0115","country id":"0115","country identifier":"0115","country of residence":"0115","residing country":"0115","country value":"0115","countryname":"0115","home country":"0115","birth country":"0115","address line 1":"0116","street line 1":"0116","address1":"0116","street address 1":"0116","address first line":"0116","addr line 1":"0116","address line1":"0116","streetline1":"0116","addressl1":"0116","street addr 1":"0116","line1 address":"0116","address primary":"0116","primary address":"0116","address_part1":"0116","address part 1":"0116","house number":"0116","house no":"0116","block":"0116","building number":"0116","building no":"0116","address line 2":"0117","street line 2":"0117","address2":"0117","street address 2":"0117","address second line":"0117","addr line 2":"0117","address line2":"0117","streetline2":"0117","addressl2":"0117","street addr 2":"0117","line2 address":"0117","secondary address":"0117","secondary addr":"0117","address_part2":"0117","address part 2":"0117","apartment":"0117","apt number":"0117","suite":"0117","unit":"0117","floor":"0117","submit application":"0118","application submit":"0118","apply button":"0118","submit form":"0118","send application":"0118","apply now":"0118","application button":"0118","submit app":"0118","apply":"0118","submit application button":"0118","application submit button":"0118","send form":"0118","submit request":"0118","send request":"0118","proceed":"0118","continue application":"0118","submit":"0118","continue":"0118","next":"0118","finish application":"0118","iban":"0119","international bank account number":"0119","iban number":"0119","iban no":"0119","bank iban":"0119","iban code":"0119","iban field":"0119","iban input":"0119","iban entry":"0119","iban#":"0119","account iban":"0119","account_iban":"0119","iban id":"0119","iban identifier":"0119","iban value":"0119","iban digits":"0119","iban account":"0119","iban acct":"0119","acct iban":"0119","iban code number":"0119","membership id":"0120","membership number":"0120","member number":"0120","membership no":"0120","member no":"0120","membership#":"0120","member#":"0120","membershipid":"0120","memberid":"0120","member identifier":"0120","membership identifier":"0120","membership code":"0120","membership code number":"0120","membership account":"0120","account membership":"0120","membership field":"0120","member field":"0120","membership input":"0120","member input":"0120","mother name":"0121","mother\'s name":"0121","mom name":"0121","mom\'s name":"0121","maternal name":"0121","mothername":"0121","momname":"0121","mother full name":"0121","mother fullname":"0121","mums name":"0121","mother field":"0121","mother input":"0121","mother entry":"0121","mom field":"0121","mom input":"0121","mother\'s full name":"0121","maternal fullname":"0121","mothername field":"0121","mother first name":"0121","mother last name":"0121","routing number":"0122","bank routing number":"0122","routing no":"0122","routing #":"0122","routing code":"0122","bank routing code":"0122","routingnum":"0122","routingnum#":"0122","routing number field":"0122","routing field":"0122","routing input":"0122","routing entry":"0122","aba number":"0122","aba routing":"0122","aba code":"0122","aba routing number":"0122","aba routing no":"0122","transit number":"0122","bank transit number":"0122","transit code":"0122","sort code":"0123","bank sort code":"0123","sortcode":"0123","sort-code":"0123","sort code number":"0123","bank sort code number":"0123","sort code field":"0123","sort code input":"0123","sort code entry":"0123","sort no":"0123","sort#":"0123","bank sort#":"0123","bank sort no":"0123","sort identifier":"0123","bank code":"0123","bank sort identifier":"0123","bank code number":"0123","bank sort":"0123","clearing code":"0123","sort digits":"0123","passport number":"0124","passport no":"0124","passport id":"0124","passport #":"0124","passportnum":"0124","passport#":"0124","passport identifier":"0124","passport code":"0124","passport field":"0124","passport input":"0124","passport entry":"0124","passport document number":"0124","passportdocument":"0124","passport doc no":"0124","passport doc#":"0124","passport serial":"0124","passport serial number":"0124","passport num field":"0124","travel document number":"0124","passport digits":"0124","driving licence number":"0125","driver\'s license number":"0125","driver licence number":"0125","dl number":"0125","drivers license":"0125","driving license":"0125","licence number":"0125","driver license no":"0125","driver license #":"0125","driverlicense":"0125","driving licence no":"0125","dl no":"0125","license number":"0125","driving licence id":"0125","driver id":"0125","driver\'s licence id":"0125","driving permit number":"0125","driving licence field":"0125","dl field":"0125","dl input":"0125","business name":"0126","company name":"0126","organization name":"0126","business":"0126","company":"0126","organization":"0126","enterprise name":"0126","enterprise":"0126","corporate name":"0126","corporate":"0126","businessname":"0126","companyname":"0126","company title":"0126","firm name":"0126","firm":"0126","business title":"0126","business field":"0126","company field":"0126","organization field":"0126","company input":"0126","card number":"0127","credit card number":"0127","debit card number":"0127","card no":"0127","card #":"0127","cardnum":"0127","card#":"0127","card digits":"0127","card id":"0127","card identifier":"0127","cc number":"0127","cc#":"0127","creditcard":"0127","debitcard":"0127","card number field":"0127","card input":"0127","card entry":"0127","payment card number":"0127","card account number":"0127","card acct number":"0127","cvv":"0128","cvc":"0128","card security code":"0128","card cvv":"0128","card cvc":"0128","cvv2":"0128","cvv code":"0128","cvc code":"0128","card code":"0128","card verification value":"0128","card verification code":"0128","card verification":"0128","security number":"0128","card security number":"0128","cvv field":"0128","cvv input":"0128","cvv entry":"0128","cvc2":"0128","card expiration":"0129","expiry date":"0129","expiration date":"0129","card expiry":"0129","expiration":"0129","exp date":"0129","exp":"0129","card exp":"0129","card expiration date":"0129","card expiry date":"0129","expiry":"0129","cardexp":"0129","card exp date":"0129","expdate":"0129","expiration field":"0129","expiry field":"0129","expiration input":"0129","expiry input":"0129","expiration entry":"0129","exp date field":"0129","employer name":"0130","company you work for":"0130","workplace":"0130","work name":"0130","employer":"0130","employername":"0130","company employer":"0130","work employer":"0130","organization employer":"0130","employer field":"0130","employer input":"0130","employer entry":"0130","job employer":"0130","employer company":"0130","employer organization":"0130","employer details":"0130","employer info":"0130","employer id":"0130","employer title":"0130","employer company name":"0130","security question 1":"0131","security q1":"0131","security question one":"0131","security question first":"0131","first security question":"0131","securityquestion1":"0131","securityquestionone":"0131","sec q1":"0131","sec question 1":"0131","sq1":"0131","security qn1":"0131","sec ques 1":"0131","security question field 1":"0131","security question input 1":"0131","security question 1 field":"0131","question 1":"0131","security quest 1":"0131","personal question 1":"0131","secret question 1":"0131","challenge question 1":"0131","security question 2":"0132","security q2":"0132","security question two":"0132","security question second":"0132","second security question":"0132","securityquestion2":"0132","securityquestiontwo":"0132","sec q2":"0132","sec question 2":"0132","sq2":"0132","security qn2":"0132","sec ques 2":"0132","security question field 2":"0132","security question input 2":"0132","security question 2 field":"0132","question 2":"0132","security quest 2":"0132","personal question 2":"0132","secret question 2":"0132","challenge question 2":"0132"}')},592:function(t){t.exports={"sans-serif":["Abel","Aboriginal Sans","Acumin","Adobe Gothic Std","Adobe Gothic Std B","Adobe Heiti Std R","Agency FB","Aharoni","Apple SD Gothic Neo","AppleGothic","Arial","Arial AMU","Arial Baltic","Arial Black","Arial CE","Arial CYR","Arial Cyr","Arial Greek","Arial Hebrew","Arial MT","Arial Narrow","Arial TUR","Arial Unicode MS","BankGothic Lt BT","BankGothic Md BT","Bell Gothic Std Black","Bell Gothic Std Light","Berlin Sans FB","Berlin Sans FB Demi","Calibri","Calibri Light","Candara","Century Gothic","Charcoal CY","Clear Sans","Comic Sans MS","Corbel","CordiaUPC","DejaVu Sans","DejaVu Sans Condensed","DejaVu Sans Light","Dotum","DotumChe","Droid Robot Regular","Droid Sans","Droid Sans Fallback","Droid Sans Hebrew","Droid Sans Japanese","Droid Sans Thai","DroidSansFallback","Ebrima","Eras Bold ITC","Eras Demi ITC","Eras Light ITC","Eras Medium ITC","Euphemia UCAS","Eurostile","Fira Sans","Franklin Gothic Book","Franklin Gothic Demi","Franklin Gothic Demi Cond","Franklin Gothic Heavy","Franklin Gothic Medium","Franklin Gothic Medium Cond","Futura Md BT","Gadugi","Geneva","Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Gisha","GothicE","GothicG","GothicI","Haettenschweiler","Heiti SC","Heiti TC","Helvetica","Helvetica Neue","Hiragino Kaku Gothic Pro","Hiragino Kaku Gothic ProN","ISOCPEUR","Impact","Kokila","Kozuka Gothic Pr6N B","Kozuka Gothic Pr6N EL","Kozuka Gothic Pr6N H","Kozuka Gothic Pr6N L","Kozuka Gothic Pr6N M","Kozuka Gothic Pr6N R","Kozuka Gothic Pro B","Kozuka Gothic Pro EL","Kozuka Gothic Pro H","Kozuka Gothic Pro L","Kozuka Gothic Pro M","Kozuka Gothic Pro R","LUCIDA GRANDE","Latha","Levenim MT","Liberation Sans","Liberation Sans Narrow","Lucida Grande","Lucida Sans","Lucida Sans Unicode","MS Gothic","MS Reference Sans Serif","MS Sans Serif","MYRIAD","MYRIAD PRO","Maiandra GD","Malgun Gothic","Meiryo","Microsoft PhagsPa","Microsoft Sans Serif","Mukti Narrow","Myriad Pro","Myriad Pro Cond","Myriad Pro Light","Myriad Web Pro","NanumGothic","Narkisim","Noto Sans","Noto Sans CJK JP","Noto Sans CJK KR","Noto Sans CJK SC","Noto Sans CJK TC","Noto Sans JP","Noto Sans KR","Noto Sans Lao ","Noto Sans SC","Noto Sans TC","PingFang SC","PingFang TC","Roboto","SansSerif","Square721 BT","Swis721 BT","Swis721 BdCnOul BT","Swis721 BdOul BT","Swis721 Blk BT","Swis721 BlkCn BT","Swis721 BlkEx BT","Swis721 BlkOul BT","Swis721 Cn BT","Swis721 Ex BT","Swis721 Hv BT","Swis721 Lt BT","Swis721 LtCn BT","Swis721 LtEx BT","Tahoma","Technic","TechnicBold","Tempus Sans ITC","Thonburi","Trebuchet MS","Tw Cen MT","Tw Cen MT Condensed","Tw Cen MT Condensed Extra Bold","Ubuntu","Ubuntu Light","Ubuntu Bold","VL Gothic","VL PGothic","Verdana","WP Greek Helve","WP MultinationalA Helve","WP MultinationalB Helve","Yu Gothic","sans-serif",".VnArial",".VnArial Narrow",".VnArial NarrowH",".VnArialH",".VnAvant",".VnAvantH",".VnGothic",".VnGothicH",".VnHelvetIns",".VnHelvetInsH",".VnLucida sans",".VnUniverseH","AR BERKLEY","Abadi MT Condensed Extra Bold","Abadi MT Condensed Light","Abscissa","Abscissa Bold","Abscissa Bold Italic","Adobe Heiti Std","Agency FB Bold","AirCut Light","Amerika Sans","Antique Olive","Apple LiGothic","Apple LiGothic Medium","Architext Regular","Arial Bold","Arial Bold Italic","Arial Hebrew Bold","Arial Italic","Arial Narrow Bold","Arial Narrow Bold Italic","Arial Narrow Italic","Asenine Super Thin","Asenine Thin","AvantGarde Bk BT","AvantGarde Md BT","AvenirBlk_PFL","AvenirLt_PFL","AvenirMd_PFL","Bank Gothic","Bell Gothic Std Bold","Bitstream Vera Sans","BlairMdITC TT-Medium","Droid Sans Arabic","FreeSans","HelveticaNeueVN-Black","HelveticaNeueVN-BlackItalic","HelveticaNeueVN-Bold","HelveticaNeueVN-BoldCond","HelveticaNeueVN-BoldCondObl","HelveticaNeueVN-BoldItalic","HelveticaNeueVN-Condensed","HelveticaNeueVN-CondensedObl","HelveticaNeueVN-ExtBlackCond","HelveticaNeueVN-ExtBlackCondOb","HelveticaNeueVN-Heavy","HelveticaNeueVN-HeavyCond","HelveticaNeueVN-HeavyCondObl","HelveticaNeueVN-HeavyItalic","HelveticaNeueVN-Italic","HelveticaNeueVN-Light","HelveticaNeueVN-LightItalic","HelveticaNeueVN-Medium","HelveticaNeueVN-MediumCond","HelveticaNeueVN-MediumCondObl","HelveticaNeueVN-MediumItalic","HelveticaNeueVN-Roman","HelveticaNeueVN-Thin","HelveticaNeueVN-ThinItalic","HelveticaNeueVN-UltraLight","HelveticaNeueVN-UltraLightItal","Loma","Myriad Pro Cond It","Myriad Pro It","Myriad Pro Light Cond","Myriad Pro Semibold","Myriad Pro Semibold It","Myriad Web Pro Condensed","News Gothic MT","News GothicMT","NewsGoth BT","Nimbus Sans L","Optima","Optima ExtraBlack","Purisa","Sans","Skia","Stone Sans ITC TT","Stone Sans ITC TT-Bold","Stone Sans ITC TT-Semi","Stone Sans ITC TT-SemiIta","Stone Sans OS ITC TT-Bold","Stone Sans OS ITC TT-Semi","Stone Sans OS ITCTT-SemiIta","Stone Sans Sem ITC TT","Swiss911 XCm BT","Tahoma Bold","TakaoPGothic","Thonburi Bold","Trebuchet MS Bold","Trebuchet MS Bold Italic","Trebuchet MS Italic","Trebuchet_PFL","Tw Cen MT Bold","Tw Cen MT Bold Italic","URW Gothic L","URW Grotesk T","Ubuntu Condensed","Ume Gothic","Ume Gothic C4","Ume Gothic C5","Ume Gothic O5","Ume Gothic S4","Ume Gothic S5","Ume P Gothic","Ume P Gothic C4","Ume P Gothic C5","Ume P Gothic O5","Ume P Gothic S4","Ume P Gothic S5","UnDotum","Univers","Univers Condensed","VNI-Helve","VNI-Helve-Condense","VNI-Swiss-Condense","Verdana Bold","Verdana Bold Italic","Verdana Italic","WenQuanYi Micro Hei","Yu Gothic Light","ZapfHumnst BT","ZapfHumnst Dm BT","Zurich BlkEx BT","Zurich Ex BT","bankgothic lt bt","swis721 blkoul bt","swis721 bt","3M Circular TT Bold","3M Circular TT Book","3M Circular TT Light","ABeeZee","AR Sans Serif","Accent SF","Accord Heavy SF","Accord Light SF","Accord SF","Aileron","Aileron Black","Aileron Bold","Aileron Heavy","Aileron Light","Aileron SemiBold","Aileron Thin","Aileron UltraLight","Alegreya Sans SC","AlekyaExtraBold","AlekyaMedium","AlekyaThin","Alternate Gothic No2 D","AlternateGothic2 BT","Andale Sans for VST","Antonio","Apple SD Gothic Neo Bold","Apple SD Gothic Neo Heavy","Apple SD Gothic Neo Light","Apple SD Gothic Neo Medium","Apple SD Gothic Neo Regular","Apple SD Gothic Neo Thin","Apple SD Gothic Neo UltraLight","Apple SD GothicNeo ExtraBold","AppleGothic Regular","Arial (Arabic)","Arial Hebrew Light","Arial Hebrew Scholar","Arial Hebrew Scholar Bold","Arial Hebrew Scholar Light","Arial Nova","Arial Nova Cond","Arial Nova Cond Light","Arial Nova Light","Arial Symbol","Arimo","Arimo Bold","Arimo Bold Italic","Arimo Bold Italic for Powerline","Arimo Bold for Powerline","Arimo Italic","Arimo Italic for Powerline","Arimo for Powerline","Avenir","Avenir Black","Avenir Black Oblique","Avenir Book","Avenir Book Oblique","Avenir Heavy","Avenir Heavy Oblique","Avenir Light","Avenir Light Oblique","Avenir Medium","Avenir Medium Oblique","Avenir Next","Avenir Next Bold","Avenir Next Bold Italic","Avenir Next Condensed","Avenir Next Condensed Bold","Avenir Next Condensed Bold Italic","Avenir Next Condensed Demi Bold","Avenir Next Condensed Demi Bold Italic","Avenir Next Condensed Heavy","Avenir Next Condensed Heavy Italic","Avenir Next Condensed Italic","Avenir Next Condensed Medium","Avenir Next Condensed Medium Italic","Avenir Next Condensed Regular","Avenir Next Condensed Ultra Light","Avenir Next Condensed Ultra Light Italic","Avenir Next Demi Bold","Avenir Next Demi Bold Italic","Avenir Next Heavy","Avenir Next Heavy Italic","Avenir Next Italic","Avenir Next Medium","Avenir Next Medium Italic","Avenir Next Regular","Avenir Next Ultra Light","Avenir Next Ultra Light Italic","Avenir Next W1G Bold","Avenir Next W1G Bold Italic","Avenir Next W1G Demi","Avenir Next W1G Demi Italic","Avenir Next W1G Heavy","Avenir Next W1G Heavy Italic","Avenir Next W1G Italic","Avenir Next W1G Light","Avenir Next W1G Light Italic","Avenir Next W1G Medium","Avenir Next W1G Medium Italic","Avenir Next W1G Regular","Avenir Next W1G Thin","Avenir Next W1G Thin Italic","Avenir Next W1G Ultra Light","Avenir Next W1G Ultra Light Italic","Avenir Oblique","Avenir Roman","Averia","Averia Sans","Avinor","Bank Gothic Light","Bank Gothic Medium","Bariol Regular","Bariol Regular Italic","Baron Neue","Baron Neue Black","Baron Neue Bold","Bebas Neue Bold","Bebas Neue Book","Bebas Neue Light","Bebas Neue Regular","Bebas Neue Thin","Belfast Light SF","Belfast SF","Biko","BlairMdITC TT Medium","Bowlby One SC","Brandon Grotesque Black","Brandon Grotesque Bold","Brandon Grotesque Light","Brandon Grotesque Medium","Cabin","Cairo SF","Calibri Bold","Calibri Bold Italic","Calibri Italic","Candara Bold","Candara Bold Italic","Candara Italic","Cantarell Bold","Cantarell Bold Oblique","Cantarell Oblique","Cantarell Regular","Carlito","Carrois Gothic SC","Caviar Dreams","Caviar Dreams Bold","Caviar Dreams Bold Italic","Caviar Dreams Italic","Century Gothic Bold","Century Gothic Bold Italic","Century Gothic Italic","Cir Arial","Circular Std Black","Circular Std Black Italic","Circular Std Bold","Circular Std Bold Italic","Circular Std Book","Circular Std Book Italic","Circular Std Medium","Circular Std Medium Italic","Coda","Comfortaa","Comic Sans MS Bold","Commons","Coolvetica","Corbel Bold","Corbel Bold Italic","Corbel Italic","Corporate","Cronos Pro","DFKGothic-Md","DIN 1451 Mittelschrift","DIN Alternate","DIN Alternate Bold","DIN Condensed","DIN Condensed Bold","DIN-BlackAlternate","DIN-Bold","DIN-Light","DIN-LightAlternate","DIN-Medium","DIN-MediumAlternate","DIN-Regular","DIN-RegularAlternate","DINPro-Black","DINPro-Bold","DINPro-Light","DINPro-Medium","DINPro-Regular","Damascus Bold","Damascus Light","Damascus Medium","Damascus Semi Bold","Days Regular","Dayton","DengXian","DengXian Light","Dosis","Dosis Bold","Dosis ExtraBold","Dosis ExtraLight","Dosis Light","Dosis Medium","Dosis SemiBold","Droid Sans Armenian","Droid Sans Ethiopic","Droid Sans Georgian","Ela Sans Light Caps","Euclid","Euclid Bold","Euclid Extra Bold","Euphemia UCAS Bold","Eurostile Bold","Existence Light","Fabrica","Folio XBd BT","Formata Light Condensed","Formata Medium Condensed","Francois One","Franklin Gothic","Franklin Gothic Book Italic","Franklin Gothic Medium Italic","Futura","Futura Bold","Futura Bold Oblique","Futura Book","Futura Book BT","Futura Book Italic BT","Futura Book Oblique","Futura Condensed ExtraBold","Futura Condensed Medium","Futura Extra Bold","Futura Extra Bold Oblique","Futura Heavy","Futura Heavy Oblique","Futura LT Bold","Futura LT Bold Oblique","Futura LT Book","Futura LT Book Oblique","Futura LT Condensed Bold","Futura LT Condensed Bold Oblique","Futura LT Condensed Extra Bold","Futura LT Condensed Extra Bold Oblique","Futura LT Condensed Light","Futura LT Condensed Light Oblique","Futura LT Condensed Medium","Futura LT Condensed Medium Oblique","Futura LT Extra Bold","Futura LT Extra Bold Oblique","Futura LT Heavy","Futura LT Heavy Oblique","Futura LT Light","Futura LT Light Oblique","Futura LT Medium","Futura LT Medium Oblique","Futura Light","Futura Light BT","Futura Light Condensed BT","Futura Light Italic BT","Futura Light Oblique","Futura Medium","Futura Medium BT","Futura Medium Italic","Futura Medium Oblique","Futura Std Bold","Futura Std Bold Condensed","Futura Std Book","Futura Std Heavy","Futura Std Light","Futura Std Medium","Futura Std Medium Condensed","Gen W01 Light","Geotype TT","Gidole","Gill Sans","Gill Sans Bold","Gill Sans Bold Italic","Gill Sans Italic","Gill Sans Light","Gill Sans Light Italic","Gill Sans MT Bold","Gill Sans MT Bold Italic","Gill Sans MT Italic","Gill Sans Nova","Gill Sans Nova Cond","Gill Sans Nova Cond Lt","Gill Sans Nova Cond Ultra Bold","Gill Sans Nova Cond XBd","Gill Sans Nova Light","Gill Sans Nova Ultra Bold","Gill Sans SemiBold","Gill Sans SemiBold Italic","Gill Sans UltraBold","GillSans-Bold","Gillius ADF","Gillius ADF Cd","Gillius ADF No2","Gillius ADF No2 Cd","Gotham","Gotham Black","Gotham Black Italic","Gotham Bold","Gotham Bold Italic","Gotham Book","Gotham Book Italic","Gotham Extra Light","Gotham Extra Light Italic","Gotham Light","Gotham Medium","Gotham Medium Italic","Gotham Narrow Black Italic","Gotham Narrow Bold Italic","Gotham Narrow Book","Gotham Narrow Book Italic","Gotham Narrow Extra Light","Gotham Narrow Extra Light Italic","Gotham Narrow Light","Gotham Narrow Light Italic","Gotham Narrow Medium Italic","Gotham Narrow Thin","Gotham Narrow Thin Italic","Gotham Narrow Ultra","Gotham Narrow Ultra Italic","Gotham Thin","Gotham Thin Italic","Gotham Ultra","Gotham Ultra Italic","Gothic720 BT","Gothic720 Lt BT","GothicNo13 BT","HGHeiseiKakugothictaiW3","HGHeiseiKakugothictaiW5","HGP-AGothic2-Latin1K","HGPHeiseiKakugothictaiW3","HGPHeiseiKakugothictaiW5","HP Simplified","HP Simplified Light","Hannotate TC Bold","Hebar","Hei Medium","HeiT","Heiti SC Medium","Heiti TC Medium","HelvLight","Helvetica Bold","Helvetica Bold Oblique","Helvetica Light","Helvetica Light Oblique","Helvetica Neue Bold","Helvetica Neue Bold Italic","Helvetica Neue Condensed Black","Helvetica Neue Condensed Bold","Helvetica Neue Italic","Helvetica Neue Light","Helvetica Neue Light Italic","Helvetica Neue Medium","Helvetica Neue Medium Italic","Helvetica Neue Thin","Helvetica Neue Thin Italic","Helvetica Neue UltraLight","Helvetica Neue UltraLight Italic","Helvetica Oblique","HelveticaNeue","HelveticaNeue BlackCond","HelveticaNeue MediumCond","HelveticaNeueLT Pro 107 XBlkCn","HelveticaNeueLT Pro 23 UltLtEx","HelveticaNeueLT Pro 25 UltLt","HelveticaNeueLT Pro 27 UltLtCn","HelveticaNeueLT Pro 33 ThEx","HelveticaNeueLT Pro 35 Th","HelveticaNeueLT Pro 37 ThCn","HelveticaNeueLT Pro 43 LtEx","HelveticaNeueLT Pro 45 Lt","HelveticaNeueLT Pro 47 LtCn","HelveticaNeueLT Pro 53 Ex","HelveticaNeueLT Pro 55 Roman","HelveticaNeueLT Pro 57 Cn","HelveticaNeueLT Pro 63 MdEx","HelveticaNeueLT Pro 65 Md","HelveticaNeueLT Pro 67 MdCn","HelveticaNeueLT Pro 75 BdOu","HelveticaNeueLT Pro 93 BlkEx","HelveticaNeueLT Pro 95 Blk","HelveticaNeueLT Pro 97 BlkCn","HelveticaNeueLT Std","HelveticaNeueLT Std Blk","HelveticaNeueLT Std Blk Cn","HelveticaNeueLT Std Blk Ext","HelveticaNeueLT Std Bold Outln","HelveticaNeueLT Std Cn","HelveticaNeueLT Std Ext","HelveticaNeueLT Std ExtBlk Cn","HelveticaNeueLT Std Extended","HelveticaNeueLT Std Lt","HelveticaNeueLT Std Lt Cn","HelveticaNeueLT Std Lt Ext","HelveticaNeueLT Std Med","HelveticaNeueLT Std Med Cn","HelveticaNeueLT Std Med Ext","HelveticaNeueLT Std Thin","HelveticaNeueLT Std Thin Cn","HelveticaNeueLT Std Thin Ext","HelveticaNeueLT Std UltLt","HelveticaNeueLT Std UltLt Cn","HelveticaNeueLT Std UltLt Ext","Hiragino Kaku Gothic Pro W3","Hiragino Kaku Gothic Pro W6","Hiragino Kaku Gothic ProN W3","Hiragino Kaku Gothic ProN W6","Hiragino Kaku Gothic Std","Hiragino Kaku Gothic Std W8","Hiragino Kaku Gothic StdN","Hiragino Kaku Gothic StdN W8","Hiragino Maru Gothic Pro","Hiragino Maru Gothic Pro W4","Hiragino Maru Gothic ProN","Hiragino Maru Gothic ProN W4","Hiragino Sans","Hiragino Sans GB","Hiragino Sans GB W3","Hiragino Sans GB W6","Hiragino Sans W0","Hiragino Sans W1","Hiragino Sans W2","Hiragino Sans W3","Hiragino Sans W4","Hiragino Sans W5","Hiragino Sans W6","Hiragino Sans W7","Hiragino Sans W8","Hiragino Sans W9","Humanist","Hypatia Sans Pro","Hypatia Sans Pro Black","Hypatia Sans Pro ExtraLight","Hypatia Sans Pro Light","Hypatia Sans Pro Semibold","IPAGothic","IPAPGothic","IPAexGothic","Ideal Sans Book","Inder","Interstate-Black","Interstate-Bold","Interstate-Light","Interstate-Regular","JLS Data GothicC  NC","JLS Data GothicR  NC","Julius Sans One","Klee Demibold","Kozuka Gothic Pr6N","Kozuka Gothic Pro","Laila Medium","Lantinghei SC Demibold","Lantinghei SC Extralight","Latin Modern Sans","Latin Modern Sans Demi Cond","Latin Modern Sans Quotation","Lato","Lato Black","Lato Black Italic","Lato Bold","Lato Bold Italic","Lato Hairline","Lato Hairline Italic","Lato Heavy","Lato Heavy Italic","Lato Italic","Lato Light","Lato Light Italic","Lato Medium","Lato Medium Italic","Lato Regular","Lato Semibold","Lato Semibold Italic","Lato Thin","Lato Thin Italic","Linux Biolinum G","Linux Biolinum Keyboard O","Linux Biolinum O","Lucida Sans Demibold Italic","Lucida Sans Demibold Roman","Lucida Sans Italic","Lucida Sans Regular","LuzSans-Book","LuzSans-Light","MMCenturyNew Bold","MMVariable Bold","MMVariableD Bold","MMVariableF Bold","MMa Variable Bold","Marquisette BTN Light","Meiryo Bold","Meiryo Italic","Microsoft NeoGothic","Montserrat","Montserrat Black","Montserrat Bold","Montserrat Extra Bold","Montserrat Hairline","Montserrat Light","Montserrat Semi Bold","Montserrat Ultra Light","Muli","Muli Italic","Muli Light","Muli Light Italic","Muna Bold","Museo 100 Regular","Museo 300 Regular","Museo 500 Regular","Museo Sans 100","Museo Sans 300","Museo Sans 500","Museo Sans 500 Italic","Museo Sans 700","Myriad Arabic Bold","Myriad Arabic Bold Italic","Myriad CAD","Myriad Pro Black","Myriad Pro Black Cond","Myriad Pro Black Condensed","Myriad Pro Black Condensed Italic","Myriad Pro Black Italic","Myriad Pro Black SemiCond","Myriad Pro Black SemiCondensed","Myriad Pro Black SemiCondensed Italic","Myriad Pro Black SemiExt","Myriad Pro Black SemiExtended","Myriad Pro Black SemiExtended Italic","Myriad Pro Bold","Myriad Pro Bold Condensed","Myriad Pro Bold Condensed Italic","Myriad Pro Bold Italic","Myriad Pro Bold SemiCondensed","Myriad Pro Bold SemiCondensed Italic","Myriad Pro Bold SemiExtended","Myriad Pro Bold SemiExtended Italic","Myriad Pro Condensed","Myriad Pro Condensed Italic","Myriad Pro Italic","Myriad Pro Light Condensed","Myriad Pro Light Condensed Italic","Myriad Pro Light Italic","Myriad Pro Light Sans Hebrew","Myriad Pro Light SemiCond","Myriad Pro Light SemiCondensed","Myriad Pro Light SemiCondensed Italic","Myriad Pro Light SemiExt","Myriad Pro Light SemiExtended","Myriad Pro Light SemiExtended Italic","Myriad Pro Regular","Myriad Pro Semi bold","Myriad Pro SemiCond","Myriad Pro SemiCondensed","Myriad Pro SemiCondensed Italic","Myriad Pro SemiExt","Myriad Pro SemiExtended","Myriad Pro SemiExtended Italic","Myriad Pro Semibold Condensed","Myriad Pro Semibold Condensed Italic","Myriad Pro Semibold Italic","Myriad Pro Semibold SemiCondensed","Myriad Pro Semibold SemiCondensed Italic","Myriad Pro Semibold SemiExtended","Myriad Pro Semibold SemiExtended Italic","MyriadPro-Semibold","NEOLITH","Nanum Gothic","NanumBarunGothic","NanumGothic Bold","NanumGothic ExtraBold","Napa SF","Neo Sans Pro Light","NeueHaasGroteskText Pro","New Gulim","News Cycle","News Gothic MT Alt 1","News Gothic MT Alt 2","News Gothic MT Alt 3","News Gothic MT Alt 4","News Gothic MT Alt 5","News Gothic MT Alt 6","News Gothic MT Bold","News Gothic MT Italic","Nexa Black","Nexa Black Italic","Nexa Bold","Nexa Bold Italic","Nexa Book","Nexa Book Italic","Nexa Heavy","Nexa Heavy Italic","Nexa Light","Nexa Light Italic","Nexa Regular","Nexa Regular Italic","Nexa Thin","Nexa Thin Italic","Nexa XBold","Nexa XBold Italic","Nobile","Noto Sans Armenian","Noto Sans Avestan","Noto Sans Bamum","Noto Sans Batak","Noto Sans Brahmi","Noto Sans Buhid","Noto Sans Carian","Noto Sans Coptic","Noto Sans Cypriot","Noto Sans Devanagari","Noto Sans Ethiopic","Noto Sans Georgian","Noto Sans Glagolitic","Noto Sans Gothic","Noto Sans Gujarati","Noto Sans Gurmukhi","Noto Sans Hanunoo","Noto Sans Hebrew","Noto Sans Imperial Aramaic","Noto Sans Kayah Li","Noto Sans Kharoshthi","Noto Sans Lao","Noto Sans Limbu","Noto Sans Linear B","Noto Sans Lisu","Noto Sans Lycian","Noto Sans Lydian","Noto Sans Malayalam","Noto Sans Mandaic","Noto Sans Mongolian","Noto Sans NKo","Noto Sans New Tai Lue","Noto Sans Ogham","Noto Sans Ol Chiki","Noto Sans Old Italic","Noto Sans Old Persian","Noto Sans Old South Arabian","Noto Sans Old Turkic","Noto Sans Osmanya","Noto Sans Phags Pa","Noto Sans Phoenician","Noto Sans Rejang","Noto Sans Runic","Noto Sans Samaritan","Noto Sans Saurashtra","Noto Sans Shavian","Noto Sans Syloti Nagri","Noto Sans Syriac Eastern","Noto Sans Tagalog","Noto Sans Tagbanwa","Noto Sans Tai Le","Noto Sans Tai Viet","Noto Sans Tamil","Noto Sans Thai","Noto Sans Tifinagh","Noto Sans Ugaritic","Noto Sans Vai","Noto Sans Yi","Nova Flat","Nova Oval","Nova Slim","Nova Square","Nueva Std Bold Condensed","Nunito","Nunito Light","OLF SimpleSansOC","Open Sans","Open Sans Bold","Open Sans Bold Italic","Open Sans Condensed","Open Sans Extrabold","Open Sans Extrabold Italic","Open Sans Italic","Open Sans Light","Open Sans Light Italic","Open Sans Semibold","Open Sans Semibold Italic","Optima Bold","Optima Bold Italic","Optima Italic","Optima LT Std","Optima Regular","Opus Chords Sans","Opus Chords Sans Condensed","Ostrich Sans","Ostrich Sans Dashed","Ostrich Sans Rounded","Oswald","Oswald Regular","Oswald Stencil","Oswald Stencil Bold","Oxygen","PT Bold Heading","PT Sans","PT Sans Bold","PT Sans Bold Italic","PT Sans Caption","PT Sans Caption Bold","PT Sans Italic","PT Sans Narrow","PT Sans Narrow Bold","Padauk","Padauk Book","Paralucent Demi Bold","Paralucent Demi Bold Italic","Paralucent Extra Light","Paralucent ExtraLight Italic","Paralucent Medium","Paralucent Thin","Paralucent Thin Italic","PingFang SC Medium","Placard MT Condensed","PoetsenOne","Poiret One","Praxis","PrimaSans BT","Proxima Nova","Proxima Nova Black","Proxima Nova Bold","Proxima Nova Bold Italic","Proxima Nova Condensed","Proxima Nova Condensed Light","Proxima Nova Condensed Light Italic","Proxima Nova Condensed Regular Italic","Proxima Nova Condensed Semibold","Proxima Nova Condensed Semibold Italic","Proxima Nova Extrabold","Proxima Nova Light","Proxima Nova Light Italic","Proxima Nova Lt","Proxima Nova Regular Italic","Proxima Nova Rg","Proxima Nova Semibold","Proxima Nova Semibold Italic","Proxima Nova Soft Bold","Proxima Nova Soft Medium","Proxima Nova Soft Regular","Proxima Nova Soft Semibold","QTOptimum Bold","QuickType II Condensed","Quicksand","Quicksand Bold","Quicksand Book Oblique Regular","Quicksand Dash","Quicksand Italic","Quicksand Light","Quicksand Light Regular","Raanana Bold","Racing Sans One","Rakesly Lt","Raleway","Raleway Black","Raleway Black Italic","Raleway Bold","Raleway Bold Italic","Raleway ExtraBold","Raleway ExtraBold Italic","Raleway ExtraLight","Raleway ExtraLight Italic","Raleway Italic","Raleway Light","Raleway Light Italic","Raleway Medium","Raleway Medium Italic","Raleway SemiBold","Raleway SemiBold Italic","Raleway Thin","Raleway Thin Italic","Roboto Black","Roboto Black Italic","Roboto Bold","Roboto Bold Italic","Roboto Condensed","Roboto Condensed Bold","Roboto Condensed Bold Italic","Roboto Condensed Italic","Roboto Condensed Light","Roboto Condensed Light Italic","Roboto Condensed Regular","Roboto Italic","Roboto Light","Roboto Light Italic","Roboto Medium","Roboto Medium Italic","Roboto Regular","Roboto Thin","Roboto Thin Italic","Rondalo","Rotis Sans Serif Std 45 Light","Rotis Sans Serif Std 55 Regular","Rotis Sans Serif Std 56 Italic","Rotis Sans Serif Std 65 Bold","Rotis Sans Serif Std 75 Extra Bold","SF Compact Text","SFNS Display","STXihei","SWGothg","SWGothi","SamsungImaginationBold","Seravek","Seravek Bold","Seravek Bold Italic","Seravek ExtraLight","Seravek ExtraLight Italic","Seravek Italic","Seravek Light","Seravek Light Italic","Seravek Medium","Seravek Medium Italic","Skia Black","Skia Black Condensed","Skia Black Extended","Skia Bold","Skia Condensed","Skia Extended","Skia Light","Skia Light Condensed","Skia Light Extended","Skia Regular","Sofia","Soho Gothic Pro Bold","Soho Gothic Pro Bold Italic","Soho Gothic Pro ExtraBold","Soho Gothic Pro ExtraBold It","Soho Gothic Pro Italic","Soho Gothic Pro Light","Soho Gothic Pro Light Italic","Soho Gothic Pro Medium","Soho Gothic Pro Medium Italic","Soho Gothic Pro Regular","Soho Gothic Pro Thin","Soho Gothic Pro Thin Italic","Soho Gothic Pro Ultra","Soho Gothic Pro Ultra Italic","Source Sans Pro","Source Sans Pro Black","Source Sans Pro Black Italic","Source Sans Pro Bold","Source Sans Pro Bold Italic","Source Sans Pro ExtraLight","Source Sans Pro ExtraLight Italic","Source Sans Pro Italic","Source Sans Pro Light","Source Sans Pro Light Italic","Source Sans Pro Semibold","Source Sans Pro Semibold Italic","Stez Sans","Stone Sans ITC TT Bold","Stone Sans OS ITC TT Bold","Stone Sans Sem ITC TT Semi","Stone Sans Sem ITC TT SemiIta","Stone Sans Sem OS ITC TT Semi","Stone Sans Sem OS ITCTT SemiIta","Sukhumvit Set","Sukhumvit Set Bold","Sukhumvit Set Light","Sukhumvit Set Medium","Sukhumvit Set Semi Bold","Sukhumvit Set Text","Sukhumvit Set Thin","Swiss 721","Swiss 721 Bold BT","Swiss 721 Condensed","Swiss 721 Extended","Swiss 721 Roman","Swiss921 BT","Tahoma Negreta","TeX Gyre Heros","TeX Gyre Heros Cn","Thonburi Light","Titillium","Titillium Black","Titillium Bold","Titillium Bold Italic","Titillium Bold Upright","Titillium Light","Titillium Light Italic","Titillium Light Upright","Titillium Regular Italic","Titillium Regular Upright","Titillium Semibold","Titillium Semibold Italic","Titillium Semibold Upright","Titillium Thin","Titillium Thin Italic","Titillium Thin Upright","TitilliumText22L-Bold","TitilliumText22L-Light","TitilliumText22L-Medium","TitilliumText22L-Regular","TitilliumText22L-Thin","TitilliumText22L-XBold","Trade Gothic LT Std","Trade Gothic LT Std Bold","Trade Gothic LT Std Bold Condensed No. 20","Trade Gothic LT Std Bold Condensed No. 20 Oblique","Trade Gothic LT Std Bold Extended","Trade Gothic LT Std Bold No. 2","Trade Gothic LT Std Bold No. 2 Oblique","Trade Gothic LT Std Bold Oblique","Trade Gothic LT Std Condensed No. 18","Trade Gothic LT Std Condensed No. 18 Oblique","Trade Gothic LT Std Extended","Trade Gothic LT Std Light","Trade Gothic LT Std Light Oblique","Trade Gothic LT Std Oblique","Tsukushi A Round Gothic","Tsukushi A Round Gothic Bold","Tsukushi A Round Gothic Regular","Tsukushi B Round Gothic","Tsukushi B Round Gothic Bold","VNI Helve","VNI Helve Condense","VNI-Bauhaus","Verdana Pro","Verdana Pro Black","Verdana Pro Cond","Verdana Pro Cond Black","Verdana Pro Cond Light","Verdana Pro Cond SemiBold","Verdana Pro Light","Verdana Pro SemiBold","Verlag Book","Vodafone Rg","Vogue-ExtraBold","YuCiril Helvetica","YuGothic","YuGothic Bold","YuGothic Medium","ZapfHumnst Ult BT","Zolano Sans BTN","letter gothic","cmss10","cmss12","cmss17","cmss8","cmss9","cmssbx10","cmssdc10","cmssq8","future","lcmssb8","dubai","bahnschrift","chicago","hei"],serif:["Aboriginal Serif","Abyssinica SIL","Adobe Caslon","Adobe Caslon Pro","Adobe Caslon Pro Bold","Adobe Garamond","Adobe Garamond Pro","Adobe Garamond Pro Bold","Adobe Hebrew","Adobe Jenson","Adobe Ming Std L","Adobe Myungjo Std M","Adobe Naskh Medium","Amadeus","Andalus","Angsana New","Aparajita","AppleMyungjo","Ariston","Arno Pro","Arno Pro Caption","Arno Pro Display","Arno Pro Light Display","Arno Pro SmText","Arno Pro Smbd","Arno Pro Smbd Caption","Arno Pro Smbd Display","Arno Pro Smbd SmText","Arno Pro Smbd Subhead","Arno Pro Subhead","Baskerville Old Face","Batang","Bell MT","Bernard MT Condensed","Birch Std","Bodoni MT","Bodoni MT Black","Bodoni MT Condensed","Bodoni MT Poster Compressed","Book Antiqua","Bookman Old Style","Browallia New","Californian FB","Calisto MT","Cambria","Castellar","Centaur","Century","Century Schoolbook","Chaparral Pro","Chaparral Pro Light","Charis SIL Compact","Charlemagne Std","Clarendon BT","Clarendon Blk BT","Clarendon Lt BT","Colonna MT","Constantia","Copperplate Gothic Bold","Copperplate Gothic Light","Cordia New","DejaVu Serif","DejaVu Serif Condensed","Droid Serif","Dutch801 Rm BT","Dutch801 XBd BT","Engravers MT","Euphemia","EuroRoman","Felix Titling","Footlight MT Light","FrankRuehl","Gabriola","Garamond","Garamond Premr Pro","Garamond Premr Pro Smbd","Geeza Pro","Gentium Basic","Gentium Book Basic","Georgia","Gloucester MT Extra Condensed","Goudy Old Style","Gujarati MT","HYSerif","High Tower Text","Hiragino Mincho Pro","Hiragino Mincho ProN","Hoefler Text","Jomolhari","Kalinga","Kartika","Kozuka Mincho Pr6N B","Kozuka Mincho Pr6N EL","Kozuka Mincho Pr6N H","Kozuka Mincho Pr6N L","Kozuka Mincho Pr6N M","Kozuka Mincho Pr6N R","Kozuka Mincho Pro B","Kozuka Mincho Pro EL","Kozuka Mincho Pro H","Kozuka Mincho Pro L","Kozuka Mincho Pro M","Kozuka Mincho Pro R","Liberation Serfi","Lucida Bright","Lucida Fax","MS Mincho","MS PMincho","MS Serif","MingLiU","Minion Pro","Minion Pro Cond","Minion Pro Med","Minion Pro SmBd","Modern No. 20","Noto Naskh Arabic","Noto Serif","Noto Serif CJK JP","Noto Serif CJK KR","Noto Serif CJK SC","Noto Serif CJK TC","Noto Serif Ahom","Nueva Std","Nueva Std Cond","Nyala","Orator Std","Oriya Sangam MN","Palatino","Palatino Linotype","PanRoman","Perpetua","Perpetua Titling MT","Plantagenet Cherokee","Poor Richard","Poplar Std","Roboto Slab","Rockwell","Rockwell Condensed","Rockwell Extra Bold","Roman","SimSun","Sinhala MN","Songti SC","Songti TC","Sylfaen","TeX Gyre Schola","Times","Times New Roman","Times New Roman Baltic","Times New Roman CE","Times New Roman CYR","Times New Roman Cyr","Times New Roman Greek","Times New Roman PS","Times New Roman TUR","Trajan Pro","Vijaya","WP Greek Century","WP MultinationalA Roman","WP MultinationalB Roman","Yu Mincho","serif",".VnAristote",".VnBodoni",".VnBodoniH",".VnBook-Antiqua",".VnBook-AntiquaH",".VnCentury Schoolbook",".VnCentury SchoolbookH",".VnClarendon",".VnClarendonH","AR HERMANN","Adler","Adobe Caslon Pro Bold Italic","Adobe Caslon Pro Italic","Adobe Caslon Pro SmBd","Adobe Caslon Pro SmBd Italic","Adobe Garamond Pro Bold Italic","Adobe Garamond Pro Italic","Adobe Hebrew Italic","Adobe Myungjo Std","Albertus Extra Bold","Albertus Medium","Amazone BT","Ambages","American Typewriter","American Typewriter Condensed","American Typewriter Condensed Light","American Typewriter Light","Angleterre Book - DGL","Angostura","Arno Pro Bold","Arno Pro Bold Caption","Arno Pro Bold Display","Arno Pro Bold Italic","Arno Pro Bold Italic Caption","Arno Pro Bold Italic Display","Arno Pro Bold Italic SmText","Arno Pro Bold Italic Subhead","Arno Pro Bold SmText","Arno Pro Bold Subhead","Arno Pro Italic","Arno Pro Italic Caption","Arno Pro Italic Display","Arno Pro Italic SmText","Arno Pro Italic Subhead","Arno Pro Light Italic Display","Arno Pro Smbd Italic","Arno Pro Smbd Italic Caption","Arno Pro Smbd Italic Display","Arno Pro Smbd Italic SmText","Arno Pro Smbd Italic Subhead","Baskerville","Baskerville Semibold","Benguiat Bk BT","BernhardFashion BT","BernhardMod BT","Big Caslon","Bitstream Charter","Bitstream Vera Serif","Bodoni MT Poste...d","Century Schoolbook L","FreeSerif","Javanese Text","Liberation Serif","NanumMyeongjo","New Peninim MT","New Peninim MT Bold","New Peninim MT Bold Inclined","New Peninim MT Inclined","Nimbus Roman No 9 L","Nimbus Roman No9 L","Nonfiction","Norasi","Nueva Std Bold Cond","Nueva Std Bold Cond Italic","Nueva Std Cond Italic","Odessa LET","Old Century","PCMyungjo","PTBarnum BT","Perpetua Bold","Perpetua Bold Italic","Perpetua Italic","PosterBodoni BT","Princetown LET","Serif","Serifa BT","Serifa Th BT","Sitka Banner","Sitka Display","Sitka Heading","Sitka Small","Sitka Subheading","Sitka Text","Souvenir Lt BT","Times CE","Times CY","Times New Roman Bold","Times New Roman Bold Italic","Times New Roman Italic","TimesTen","Tiranti Solid LET","Tlwg Typo","Trajan Pro Bold","Tw Cen MT Italic","URW Antiqua T","URW Bookman L","URW Palladio L","Ume Mincho","Ume Mincho S3","Ume P Mincho","Ume P Mincho S3","UnBatang","University Roman LET","Utopia","VNI-Bodon","VNI-Bodon-Poster","VNI-Cooper","VNI-Couri","VNI-Garam","VNI-Goudy","VNI-Palatin","VNI-Times","Verona","Warnock Pro","Warnock Pro Caption","Warnock Pro Display","Warnock Pro Light","Warnock Pro Light Caption","Warnock Pro Light Display","Warnock Pro Light Subhead","Warnock Pro SmBd","Warnock Pro SmBd Caption","Warnock Pro SmBd Display","Warnock Pro SmBd Subhead","Warnock Pro Subhead","Westminster","Yu Mincho Demibold","Yu Mincho Light","academy engraved let","new york","palatino","palatino linotype","18thCentury","Abril Fatface","Abril Fatface Regular","Academy Engraved LET","Academy Engraved LET Plain:1.0","Accanthis ADF Std","Accanthis ADF Std No2","Accanthis ADF Std No3","Adobe Caslon Pro Semibold","Adobe Caslon Pro Semibold Italic","Adobe Naskh","Akhbar MT","Albany AMT","Aleo","American Typewriter Bold","American Typewriter Condensed Bold","American Typewriter Semibold","Amiri","Amiri Quran","AppleMyungjo Regular","Arvo","Athelas","Athelas Bold","Athelas Bold Italic","Athelas Italic","Athelas Regular","Augusta","Autour One","Averia Serif","BacktalkSerif BTN","Banmai Times","Baron Neue Italic","Baskerville Bold","Baskerville Bold Italic","Baskerville Italic","Baskerville SemiBold","Baskerville SemiBold Italic","Bauer Bodoni Std 1 Bold","Bauer Bodoni Std 1 Bold Italic","Bauer Bodoni Std 1 Italic","Bauer Bodoni Std 1 Roman","BauerBodni BT","Bell MT Bold","Bell MT Italic","Bellota","Belwe Bd BT","Belwe Lt BT","Bentham","Berling","BerlingRoman","Bevan","Big Caslon Medium","Bodoni 72","Bodoni 72 Bold","Bodoni 72 Book","Bodoni 72 Book Italic","Bodoni 72 Oldstyle","Bodoni 72 Oldstyle Bold","Bodoni 72 Oldstyle Book","Bodoni 72 Oldstyle Book Italic","Bodoni 72 Smallcaps","Bodoni 72 Smallcaps Book","Book Antiqua Bold","Book Antiqua Bold Italic","Book Antiqua Italic","Bookman Old Style Bold","Bookman Old Style Bold Italic","Bookman Old Style Italic","Bordeaux Roman Bold LET","Bordeaux Roman Bold LET Plain","Bordeaux Roman Bold LET Plain:1.0","Bree Serif","Caladea","Calisto MT Bold","Calisto MT Bold Italic","Calisto MT Italic","Cambria Bold","Cambria Bold Italic","Cambria Italic","Canterbury Regular","Catull","CentSchbook BT","Century Schoolbook Bold","Century Schoolbook Bold Italic","Century Schoolbook Italic","Chandas","Chaparral Pro Bold","Chaparral Pro Bold Italic","Chaparral Pro Italic","Chaparral Pro Light Italic","Charlemagne Std Bold","Charter","Charter Black","Charter Black Italic","Charter Bold","Charter Bold Italic","Charter Italic","Charter Roman","ChunkFive Roman","Cinzel","Clarendon","Clarendon Cn BT","Clarendon Hv BT","CloisterBlack BT","Cochin","Cochin Bold","Cochin Bold Italic","Cochin Italic","Constantia Bold","Constantia Bold Italic","Constantia Italic","Cooper Std","Copperplate","Copperplate Bold","Copperplate Light","Cordia New Bold","Cumberland AMT","Day Roman","Diavlo Book","Didot","Didot Bold","Didot Italic","Dominican","Doulos SIL","Dutch 801 Roman","Egyptian710 BT","English157 BT","EngraverFontSet","EngraverTextH","EngraverTextNCS","EngraverTextT","EngraverTime","Engravers MT Bold","Euclid Fraktur","Euclid Fraktur Bold","Ezra SIL","Ezra SIL SR","Fanwood","Finale Copyist Text","Finale Copyist Text Ext","Firenze SF","Formal436 BT","Frankfurter Venetian TT","GFS Artemisia","GFS Baskerville","GFS BodoniClassic","GFS Complutum","GFS Didot","GFS Didot Classic","GFS Gazis","GFS Neohellenic","GFS Olga","GFS Porson","GFS Solomos","GFS Theokritos","Galatia SIL","Garamond Bold","Garamond Italic","Garamond Premier Pro","Garamond Premier Pro Semibold","Geeza Pro Bold","Geeza Pro Regular","Gentium","GentiumAlt","Georgia Bold","Georgia Bold Italic","Georgia Italic","Georgia Pro","Georgia Pro Black","Georgia Pro Cond","Georgia Pro Cond Black","Georgia Pro Cond Light","Georgia Pro Cond SemiBold","Georgia Pro Light","Georgia Pro SemiBold","Germanica","GiovanniITCTT","Glegoo","Goudy Old Style Bold","Goudy Old Style Italic","GoudyHandtooled BT","Granjon Bold","Granjon Italic","Granjon Roman","Gravur Condensed Light","HGMinchoL","HGPMinchoL","HGSMinchoL","Hiragino Mincho Pro W3","Hiragino Mincho Pro W6","Hiragino Mincho ProN W3","Hiragino Mincho ProN W6","Hoefler Text Black","Hoefler Text Black Italic","Hoefler Text Italic","Hoefler Text Ornaments","Humanst521 BT","Humanst521 XBd BT","Huxley Titling","IM FELL DW Pica","IPAMincho","IPAPMincho","IPAexMincho","Iowan Old Style","Iowan Old Style Black","Iowan Old Style Black Italic","Iowan Old Style Bold","Iowan Old Style Bold Italic","Iowan Old Style Italic","Iowan Old Style Roman","Iowan Old Style Titling","Italianate","JF Armenian Serif","JF Georgian Contrast","Joan","Josefin Slab","Judson","Junicode","Kalyani","Kievit Offc Pro","Kino MT","Kohinoor Bangla","Kohinoor Devanagari Book","Kozuka Mincho Pr6N","Kozuka Mincho Pro","Langdon","Latienne Pro","Latienne Pro Bold","Latienne Pro Bold Italic","Latienne Pro Italic","Latin Modern Roman","Latin Modern Roman Caps","Latin Modern Roman Demi","Latin Modern Roman Dunhill","Latin Modern Roman Slanted","Latin Modern Roman Unslanted","Leitura Display Italic","Leitura Display Roman","Lexia","Linden Hill","Linux Libertine Display G","Linux Libertine Display O","Linux Libertine G","Linux Libertine Initials O","Linux Libertine O","Lucida Bright Demibold","Lucida Bright Demibold Italic","Lucida Bright Italic","Lucida Fax Demibold","Lucida Fax Demibold Italic","Lucida Fax Italic","Lucida Fax Regular","MAC C Times","MMCenturyNew Bold Italic","MMCenturyNew Italic","MMCenturyOld Bold","MMCenturyOld Bold Italic","MMCenturyOld Italic","MMCenturyOldGreek","MMCenturyOldGreek Bold","MMCenturyOldGreek Bold Italic","MMCenturyOldGreek Italic","MMTextBook Italic","MMTextBookB Italic","MMTimes","MMTimes Bold","MMTimes Bold Italic","MMTimes Italic","MMa Century","MMa Century Bold","MMa Century Bold Italic","MMa Century Italic","MMa CenturyK","MMa CenturyK Bold","MMa CenturyK Bold Italic","MMa CenturyK Italic","MMa CenturyKS Bold","MMa CenturyKS Bold Italic","MMa CenturyKS Italic","MMa CenturyKSS Bold","MMa CenturyKSS Bold Italic","MMa CenturyKSS Italic","MMa CenturyS","MMa CenturyS Bold","MMa CenturyS Bold Italic","MMa CenturyS Italic","MMa CenturySS","MMa CenturySS Bold","MMa CenturySS Bold Italic","MMa CenturySS Italic","MMa Fraktur","MMa Fraktur Bold","MMa Pascal Bold","MMa TextBook Bold","MMa TextBook Bold Italic","MMa TextBook Italic","MS Reference Serif","MaestroTimes","Manorama","Marion Bold","Marion Italic","Marion Regular","Martina","Merriweather Bold","Merriweather Bold Italic","Merriweather Italic","Merriweather Light","Merriweather Light Italic","Merriweather Regular","Merriweather UltraBold","Merriweather UltraBold Italic","Minerva","Minion Pro Bold","Minion Pro Bold Cond","Minion Pro Bold Cond Italic","Minion Pro Bold Italic","Minion Pro Italic","Minion Pro Medium","Minion Pro Medium Italic","Minion Pro Semibold","Minion Pro Semibold Italic","Modern Antiqua","MrsEavesRoman","Mudir MT","Museo 700 Regular","Museo 900 Regular","Myanmar Sangam MN","Nafees Web Naskh","Nanum Myeongjo","NanumMyeongjo Bold","NanumMyeongjo ExtraBold","New Athena Unicode","Noto Serif Armenian","Noto Serif Georgian","Noto Serif Lao","Noto Serif Thai","Nueva Std Bold","Nueva Std Condensed","Nueva Std Condensed Italic","Nueva Std Italic","Opus Text","PT Serif","PT Serif Bold","PT Serif Bold Italic","PT Serif Caption","PT Serif Caption Italic","PT Serif Italic","Palatino Bold","Palatino Bold Italic","Palatino Italic","Palatino Linotype Bold","Palatino Linotype Bold Italic","Palatino Linotype Italic","Perpetua Titling MT Bold","Perpetua Titling MT Light","Persia BT","Petrucci","Piranesi It BT","Playfair Display","Playfair Display SC","Playfair Display SC Black","Playfair Display SC Black Italic","Playfair Display SC Bold","Playfair Display SC Bold Italic","Playfair Display SC Italic","Priori Serif OT","Roboto Slab Bold","Roboto Slab Light","Roboto Slab Regular","Roboto Slab Thin","Rockwell Bold","Rockwell Bold Italic","Rockwell Italic","Rockwell Nova","Rockwell Nova Cond","Rockwell Nova Cond Light","Rockwell Nova Extra Bold","Rockwell Nova Light","STLiti","SWRomns","Serifa Bold","Seville","Songti SC Black","Songti SC Bold","Songti SC Light","Songti SC Regular","Songti TC Bold","Songti TC Light","Songti TC Regular","Sorts Mill Goudy","Sorts Mill Goudy Italic","Source Serif Pro","Source Serif Pro Semibold","Superclarendon","Superclarendon Black","Superclarendon Black Italic","Superclarendon Bold","Superclarendon Bold Italic","Superclarendon Italic","Superclarendon Light","Superclarendon Light Italic","Superclarendon Regular","TeX Gyre Adventor","TeX Gyre Bonum","TeX Gyre Chorus","TeX Gyre Pagella","TeX Gyre Termes","Theatre Antoine","Thorndale AMT","Thorndale for VST","Times Bold","Times Bold Italic","Times Italic","Times New Roman (Arabic)","Times New Roman Symbol","Times New Roman Uni","Times Roman","Tinos Bold Italic for Powerline","Tinos Bold for Powerline","Tinos Italic for Powerline","Tinos for Powerline","Trajan Pro 3","Trajan Pro 3 Bold","Trocchi","Trocchi Bold","Uncial Antiqua","University Roman Alts LET","VNI Times","VNI-Chaucer","VNtimes new roman","VnTimes","VnTimes2","Vogue","Vollkorn Bold","Vollkorn Bold Italic","Vollkorn Italic","Vollkorn Regular","Waverly","YuMincho","YuMincho ","YuMincho  36p Kana","YuMincho  36p Kana Demibold","YuMincho  36p Kana Medium","YuMincho Demibold","YuMincho Medium","Zolano Serif BTN","bodoni","ceriph 05","ceriph 07","cmb10","cmbx10","cmbx12","cmbx5","cmbx6","cmbx7","cmbx8","cmbx9","cmbxsl10","cmbxti10","cmcsc10","cmcsc8","cmcsc9","cmr10","cmr12","cmr17","cmr5","cmr6","cmr7","cmr8","cmr9","cmti10","cmti12","cmti8","cmti9","cmu10","eurm10","stmary10","new century schoolbook","albertus","bodoni","copperplate Gothic","Menlo"],fangsong:["Adobe Fangsong Std","Adobe Fangsong Std R","Adobe Kaiti Std R","Adobe Song Std L","BatangChe","DFKai-SB","FangSong","KaiTi","KaiTi_GB2312","Kaiti SC","Kaiti TC","LiSong Pro","MS Song","Ming(for ISO10646)","MingLiU-ExtB","MingLiU_HKSCS","MingLiu_HKSCS","NSimSun","PMingLiu","STSong","SimSun-ExtB","Adobe Ming Std","Adobe Song Std","Apple LiSung","Apple LiSung Light","BiauKai","STFangsong","STKaiti","CSongGB18030C-Light","HGSHeiseiMinchotaiW3","HYSWLongFangSong","Kaiti SC Black","Kaiti SC Bold","Kaiti SC Regular","Kaiti TC Bold","Kaiti TC Regular","PCMyungjo Regular","STXingkai","STZhongsong","Weibei SC","Xingkai SC Bold","Xingkai SC Light"],cursive:["Alexandra Script","AnastasiaScript","Annabelle","Apple Casual","Apple Chancery","Bickham Script One","Bickham Script Pro Regular","Bickham Script Pro Semibold","Bickham Script Two","Blackadder ITC","Bradley Hand ITC","Brush Script MT","Brush Script Std","Calligraph","Ceremonious Two","CommercialScript BT","DaunPenh","Edwardian Script ITC","Freehand521 BT","Freestyle Script","French Script MT","Giddyup Std","Gigi","Harlow Solid Italic","Heather Script One","Informal Roman","JasmineUPC","Kristen ITC","Kunstler Script","Lucida Calligraphy","Lucida Handwriting","Matura MT Script Capitals","Mistral","Monotype Corsiva","Ouverture script","Palace Script MT","Parchment","Pristina","Romantic","Script","Script MT Bold","ScriptC","ScriptS","Segoe Print","Segoe Script","Stylus BT","Viner Hand ITC","Vivaldi","Vladimir Script","cursive",".VnCommercial Script",".VnCommercial ScriptH",".VnMonotype corsiva",".VnMonotype corsivaH","ALS Script","AR BONNIE","AR CHRISTY","AR DARLING","AR DELANEY","AdineKirnberg Regular","Alfredo's Dance","Amethyst Zucchini","Angelica","Aquaduct Italic","Bickham Script Pro Bold","Blackmoor LET","Buxton Sketch","One Stroke Script LET","OzHandicraft BT","Quixley LET","Rage Italic LET","Ruach LET","Santa Fe LET","Savoye LET","Sawasdee","SchoolHouse Cursive B","ShelleyVolante BT","SketchFlow Print","Smudger LET","Snell Roundhand","Snell Roundhand Black","Snell Roundhand Bold","URW Chancery L","VNI-Brush","VNI-Matisse","VNI-Script","Zapfino","orange let","scripts","scruff let","short hand","stylus bt","superfrench","victorian let","westwood let","AL Cinderella","AdineKirnberg","AdineKirnberg-Script","Alex Brush","Allura","Amatic","Amatic SC","Annie BTN","Architects Daughter","Baby Kruffy","BaluBrush","BaluScript","Becky","Berkshire Swash","Bickham Script Pro 3","Bickham Script Pro 3 Bold","Bickham Script Pro 3 Semibold","BlackJackRegular","Blackmoor LET Plain:2.0","Bradley Hand","Bradley Hand Bold","Brush Script","Brush Script MT Italic","Brush Script Std Medium","CAC Champagne","CabinSketch","Caflisch Script Pro","Calligraffitti","Calligraph421 BT","Calligraphic","Candles","Castro Script PERSONAL USE ONLY","Casual","Cataneo BT","Chalkboard SE Regular","Chancery Cursive","Complete in Him","Cookie","Corsiva Hebrew","Corsiva Hebrew Bold","Dancing Script","Dancing Script OT","Darlin BTN","Desdemona","Detente","Emily Austin","Emma Script Mvb","FFF Tusj","Farah","Flamenco","FlemishScript BT","Floraless","Fredericka the Great","Freebooter Script","Freehand","Freehand575 BT","Grafolita Script Medium","Grand Hotel","Great Vibes","Hand Me Down S (BRK)","Handwriting - Dakota","HanziPen SC","HanziPen SC Regular","HanziPen TC","Holiday Springs BTN Quill","IMG Love","Indie Flower","JACKIE","JaneAusten","Jazz LET","Jazz LET Plain:1.0","John Handy LET","JuneBug","Just Another Hand","KG Corner of the Sky","KG Fall For You","KG Neatly Printed","KG Part of Me","KG Primary Penmanship","KG Shake it Off Chunky","Kaushan Script","Kristi","LaurenScript","Lavanderia","LeviBrush","LittleLordFontleroy","Lobster","Lobster Two","Lucida Calligraphy Italic","Lucida Handwriting Italic","Madre Script","Marker Felt","Marker Felt Thin","Matisse ITC","Milano LET","MisterEarl BT","Monika Italic","Moon Flower","Moonbeam","Nanum Brush Script","Nanum Pen Script","Normande Italic","Noteworthy","Nova Script","Orange LET","PFDaVinciScriptPro-Inked","PFDaVinciScriptPro-Regular","Pacifico","Pamela want a Bike to Ride","Pamela wants to Ride","Patrick Hand SC","Permanent Marker","Pleasantly Plump","PujeetaItalic","Qaskin White Personal Use","Quickpen","Quincho Script PERSONAL USE","RamuBrush","RamuScript","RamuScriptMedium","Redressed","Reklame Script Black","Reklame Script Bold","Reklame Script Medium","Reklame Script Regular","Remachine Script Personal Use","Rock Salt","Rouge Script","Rundkursiv","Russel Write TT","SWScrps","Santa Fe LET Plain:1.0","Savoye LET Plain","Savoye LET Plain CC","Savoye LET Plain CC.:1.0","Savoye LET Plain:1.0","ScriptKleio","Scriptina","Scruff LET","Shorelines Script Bold","SignPainter","SignPainter-HouseScript","SignPainter-HouseScript Semibold","Smudger Alts LET","Spicy Rice","Spirituality","Sue Ellen Francisco","Sugarskin BTN","Tangerine","Trattatello","VNI-Scribble","Valerie Hand","Vanilla","Ventilla Script","Violetta","Yellowtail","Zapfino Extra LT Four","Zapfino Extra LT Ligatures","Zapfino Extra LT One","Zapfino Extra LT Two","croissant sandwich"],fantasy:["Algerian","Bauhaus 93","Blackoak Std","Broadway","Chiller","Comic Sans","Curlz MT","Elephant","Forte","Goudy Stout","Harrington","Hobo Std","Imprint MT Shadow","Jokerman","MV Boli","Magneto","Old English Text MT","Playbill","Rage Italic","Ravie","Rosewood Std Regular","Showcard Gothic","Snap ITC","SuperFrench","Vineta BT","Wide Latin","fantasy",".VnMystical",".VnMysticalH","28 Days Later","AajaxSurrealFreak","Action Jackson","African","Air Conditioner","Airstream NF","Alpha CLOWN","AntFarm GoneCamping","Aquaduct Warp","Blockbuster","Party LET","Poster","Rosewood Std","Space Age","Type Embellishments One LET","Unicorn","VNI-Disney","algerian","playbill","simpson","surfer","vineta bt","wide latin","Airstream","Alice and the Wicked Monster","Alien Encounters","Apple Boy BTN","Army","BadaBoom BB","Benguiat","Blackout","Blade Runner Movie Font","Boogaloo","Braggadocio","Broadway BT","Broadway Copyist","Broadway Copyist Perc","Broadway Copyist Text","Broadway Copyist Text Ext","Broken Planewing","Bubblegum Sans","Burst My Bubble","Candy Round BTN","Candy Round BTN Cond","Candy Round BTN Cond Lt","Candy Round BTN Lt","Canter Bold 3D","Canter Bold Shadow","Chalkduster","Chewy","Cinema Gothic BTN Shadow","Coaster Shadow","ColdSpaghetti BTN","Comic Relief","Coolsville","Cracked","Cracked Johnnie","Creepygirl","Cut Me Out","Cut Me Out 2","Cut Me Out 3","Dirty Headline","Distant Galaxy","Dot-Matrix","Drivebye 3","Drivebye 4","Dynalight","Ethnocentric","Fascinate","Finger Paint","Fingerpop","Flubber","Fluffy Slacks BTN","Galeforce BTN","Gelfling SF","Good Times","Greek Diner Inline TT","GrilledCheese BTN","GrilledCheese BTN Cn","GrilledCheese BTN Toasted","Gunplay","HELTERSKELTER","Harrington Bold","Harry P","Henny Penny","Holiday Springs BTN","HolidayPi BT","Hollywood Hills","Hot Mustard BTN","Hot Mustard BTN Poster","IMG Baby","Ice kingdom","IguanaLover BTN","Italic Outline Art","Jazz","JazzText","JazzTextExtended","Jokerman Alts LET","Jokerman LET","Kingthings Versalis","LA Headlights BTN","La Bamba LET","Lucida Blackletter","Luminari","Magic School One","Magic School Two","Marker Felt Wide","Master Of Break","Mekanik LET","Metamorphous","Monoton","Neon Lights","NewRocker","Nightclub BTN","Nightclub BTN Cn","Nightclub BTN UltraCn","Old Antic Decorative","Old Antic Outline","Old Antic Outline Shaded","Old English","PAINTSTROKE","PT Bold Stars","PUPPYLIKE","Parry Hotter","Party LET Plain:1.0","Phosphate Inline","Pirate","Pointedly Mad","Press Start 2P","Pricedown","Pricedown Bl","Razer Text Regular","SF Distant Galaxy","SF Distant Galaxy AltOutline","SF Distant Galaxy Alternate","SF Distant Galaxy Outline","SF Slapstick Comic","SF Slapstick Comic Bold","SF Slapstick Comic Bold Oblique","SF Slapstick Comic Oblique","SF Slapstick Comic Shaded","SF Slapstick Comic Shaded Oblique","Sacred Geometry","Sigmar","Simple Indust Shaded","Sneakerhead BTN","Sneakerhead BTN Condensed","Sneakerhead BTN Outline","Sneakerhead BTN Shadow","Sonic XBd BT","SonicCutThru Hv BT","Starliner BTN","Supernatural Knight","Tall Boy 3D","TanglewoodTales","Tarzan","Terminator Two","Titan One","True Lies","VNI-Shadow","Victorian LET","Virtual DJ","Western Bang Bang","Whimsy TT","Wolf in the City","Woodcut","X-Files","Year supply of fairy cakes","harlow solid","balonez fantasia","balonez fantasia br"],monospace:["Andale Mono","Bitstream Vera Sans Mono","Code2000","Consolas","Courier","Courier New","Courier New Baltic","Courier New CE","Courier New CYR","Courier New Cyr","Courier New Greek","Courier New TUR","DejaVu Sans Mono","Droid Sans Mono","Fira Code","Fira Mono","Fixed Miriam Transparent","Fixedsys","Letter Gothic Std","Liberation Mono","Lucida Console","Lucida Sans Typewriter","Miriam Fixed","Mitra Mono","Monaco","Monospac821 BT","Monotxt","Noto Mono","Noto Sans Mono CJK JP","Noto Sans Mono CJK KR","Noto Sans Mono CJK SC","Noto Sans Mono CJK TC","OCR A Extended","OCR A Std","OCR-A BT","OCR-B 10 BT","Osaka-Mono","Prestige Elite Std","Prestige Elite Std Bd","Roboto Mono","Terminal","Ubuntu Mono","WP Greek Courier","WP MultinationalA Courier","WP MultinationalB Courier","monospace",".VnCourier",".VnCourier New",".VnCourier NewH","Courier 10 Pitch","FreeMono","Monospace","Nimbus Mono L","Prestige Elite Std Bold","Teletype","Tlwg Typist","TlwgMono","TlwgTypewriter","WenQuanYi Micro Hei Mono","12x10","Andale Mono IPA","Anonymice Powerline","Anonymice Powerline Bold","Anonymice Powerline Bold Italic","Anonymice Powerline Italic","Arial monospaced for SAP","Consolas Bold","Consolas Bold Italic","Consolas Italic","Courier Bold","Courier Bold Oblique","Courier MM Screenwriter","Courier MM Screenwriter Bold","Courier MM Screenwriter BoldIt","Courier MM Screenwriter Italic","Courier New (Arabic)","Courier New Bold","Courier New Bold Italic","Courier New Italic","Courier Oblique","Courier Std","Courier10 BT","Cousine Bold Italic for Powerline","Cousine Bold for Powerline","Cousine Italic for Powerline","Cousine for Powerline","DV1-TTYogesh","DejaVu Sans Mono Bold Oblique for Powerline","DejaVu Sans Mono Bold for Powerline","DejaVu Sans Mono Oblique for Powerline","DejaVu Sans Mono for Powerline","Droid Sans Mono Dotted for Powerline","Droid Sans Mono Slashed for Powerline","Droid Sans Mono for Powerline","Fira Mono Bold for Powerline","Fira Mono Medium for Powerline","Hack Bold","Hack Bold Italic","Hack Italic","Hack Regular","IBM3270","Inconsolata","Inconsolata for Powerline","Inconsolata-dz for Powerline","Inconsolata-g for Powerline","Latin Modern Mono","Latin Modern Mono Caps","Latin Modern Mono Light","Latin Modern Mono Light Cond","Latin Modern Mono Prop","Latin Modern Mono Prop Light","Latin Modern Mono Slanted","Letter Gothic Std Bold","Letter Gothic Std Bold Slanted","Letter Gothic Std Medium","Letter Gothic Std Slanted","Linux Libertine Mono O","Literation Mono Powerline","Literation Mono Powerline Bold","Literation Mono Powerline Bold Italic","Literation Mono Powerline Italic","Lucida Sans Typewriter Bold","Lucida Sans Typewriter Bold Oblique","Lucida Sans Typewriter Oblique","Lucida Sans Typewriter Regular","Math1Mono","Math2Mono","Math3Mono","Math4Mono","Math5Mono","Menlo Bold","Menlo Bold Italic","Menlo Italic","Menlo Regular","Meslo LG L DZ Regular for Powerline","Meslo LG L Regular for Powerline","Meslo LG M DZ Regular for Powerline","Meslo LG M Regular for Powerline","Meslo LG S DZ Regular for Powerline","Meslo LG S Regular for Powerline","New Renex Terminal","OCR B MT","OCR-A II","OCRA","PT Mono","PT Mono Bold","QuickType II Mono","Roboto Mono Bold Italic for Powerline","Roboto Mono Bold for Powerline","Roboto Mono Italic for Powerline","Roboto Mono Light Italic for Powerline","Roboto Mono Light for Powerline","Roboto Mono Medium Italic for Powerline","Roboto Mono Medium for Powerline","Roboto Mono Thin Italic for Powerline","Roboto Mono Thin for Powerline","Roboto Mono for Powerline","Rocket Arabic Fixed","Roman Mono","SAS Monospace","SAS Monospace Bold","SWMono","Sauce Code Powerline","Sauce Code Powerline Black","Sauce Code Powerline Bold","Sauce Code Powerline ExtraLight","Sauce Code Powerline Light","Sauce Code Powerline Semibold","Source Code Pro","Source Code Pro Black","Source Code Pro Bold","Source Code Pro ExtraLight","Source Code Pro Light","Source Code Pro Medium","Source Code Pro Semibold","Special Elite","SymbolMono BT","TeX Gyre Cursor","Terminal Greek 737 (437G)","Terminal Greek 869","Tlwg Mono","Tlwg Typewriter","Typewriter","Typewriter Bold","Ubuntu Mono derivative Powerline","Ubuntu Mono derivative Powerline Bold","Ubuntu Mono derivative Powerline Bold Italic","Ubuntu Mono derivative Powerline Italic","WP BoxDrawing","courierps","cmtt10","cmtt12","cmtt8","cmtt9","cmvtt10","mono 07","mono 08","monoeger 05","monofur bold for Powerline","monofur for Powerline","monofur italic for Powerline","monooge 05","saxMono"],emoji:["Apple Color Emoji","Noto Color Emoji","Noto Emoji","Segoe UI Emoji","Twemoji Mozilla"],"ui-rounded":["Arial Rounded MT Bold","Nova Round","SF Compact Rounded","SF Compact Rounded Black","SF Compact Rounded Bold","SF Compact Rounded Heavy","SF Compact Rounded Light","SF Compact Rounded Medium","SF Compact Rounded Regular","SF Compact Rounded Semibold","SF Compact Rounded Thin","SF Compact Rounded Ultralight","Tsukushi B Round Gothic Regular","VAGRounded BT","VNI-Arial Rounded"],math:["Asana Math","Cambria Math","DejaVu Math TeX Gyre","Latin Modern Math","Libertinus Math","STIX Math","STIX Two Math","STIXGeneral","Symath","TeX Gyre Bonum Math","TeX Gyre Pagella Math","TeX Gyre Termes Math","UniversalMath1 BT","XITS Math","Euclid Math One","Euclid Math One Bold","Euclid Math Two","Euclid Math Two Bold","Math1","Math2","Math3","Math4","Math5","STIX","STIXGeneral-Bold","STIXGeneral-BoldItalic","STIXGeneral-Italic","STIXGeneral-Regular","STIXIntegralsD","STIXIntegralsD-Bold","STIXIntegralsD-Regular","STIXIntegralsSm","STIXIntegralsSm-Bold","STIXIntegralsSm-Regular","STIXIntegralsUp","STIXIntegralsUp-Bold","STIXIntegralsUp-Regular","STIXIntegralsUpD","STIXIntegralsUpD-Bold","STIXIntegralsUpD-Regular","STIXIntegralsUpSm","STIXIntegralsUpSm-Bold","STIXIntegralsUpSm-Regular","STIXNonUnicode","STIXNonUnicode-Bold","STIXNonUnicode-BoldItalic","STIXNonUnicode-Italic","STIXNonUnicode-Regular","STIXSizeFiveSym","STIXSizeFiveSym-Regular","STIXSizeFourSym","STIXSizeFourSym-Bold","STIXSizeFourSym-Regular","STIXSizeOneSym","STIXSizeOneSym-Bold","STIXSizeOneSym-Regular","STIXSizeThreeSym","STIXSizeThreeSym-Bold","STIXSizeThreeSym-Regular","STIXSizeTwoSym","STIXSizeTwoSym-Bold","STIXSizeTwoSym-Regular","STIXVariants","STIXVariants-Bold","STIXVariants-Regular","SWMath","TG Pagella Math","TG Termes Math","WP MathA","WP MathB","WP MathExtendedA","WP MathExtendedB","cmex10","cmex7","cmex8","cmex9","cmmi10","cmmi12","cmmi5","cmmi6","cmmi7","cmmi8","cmmi9","cmmib10","cmmib6","cmmib7","cmmib8","cmmib9","cmsy10","cmsy10orig","cmsy5","cmsy6","cmsy7","cmsy8","cmsy9","msam10","msam5","msam6","msam7","msam8","msam9","msbm10","msbm5","msbm6","msbm7","msbm8","msbm9"],"system-ui":["Droid Naskh System UI","Khmer OS System","San Francisco","System","MS Dialog","MS SystemEx","Segoe MDL2 Assets","System Font","System Font Black","System Font Bold","System Font Bold G1","System Font Bold G2","System Font Bold G3","System Font Bold Italic","System Font Bold Italic G1","System Font Bold Italic G2","System Font Bold Italic G3","System Font Heavy","System Font Heavy Italic","System Font Italic","System Font Italic G1","System Font Italic G2","System Font Italic G3","System Font Light","System Font Light Italic","System Font Medium","System Font Medium Italic","System Font Medium Italic P4","System Font Medium P4","System Font Regular","System Font Regular G1","System Font Regular G2","System Font Regular G3","System Font Semibold","System Font Semibold Italic","System Font Thin","System Font UltraLight","System Font Ultralight"],"ui-serif":["Droid Naskh UI"],"ui-sans-serif":["Khmer UI","Lao UI","MS PGothic","MS UI Gothic","Meiryo UI","Microsoft JhengHei","Microsoft JhengHei UI","Microsoft YaHei","Microsoft YaHei UI","Nirmala UI","STHeiti","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Semilight","Segoe UI Symbol","Skype UI Symbol","Leelawadee UI","Leelawadee UI Semilight","Lucida Grande Bold","Microsoft JhengHei Light","Microsoft JhengHei UI Light","Microsoft YaHei Light","Microsoft YaHei UI Light","Nirmala UI Semilight","Segoe Condensed","Segoe UI Black","Ume UI Gothic","Ume UI Gothic O5","Apple SD Gothic Neo SemiBold","Heiti SC Light","Heiti TC Light","MS Dialog Light","Malgun Gothic Semilight","Meiryo Bold Italic","Microsoft MHei","Noto Sans Devanagari UI","Noto Sans Lao UI","Noto Sans Tamil UI","Noto Sans Thai UI","Noto Sans UI","PingFang HK","PingFang HK Light","PingFang HK Medium","PingFang HK Regular","PingFang HK Semibold","PingFang HK Thin","PingFang HK Ultralight","PingFang SC Light","PingFang SC Regular","PingFang SC Semibold","PingFang SC Thin","PingFang SC Ultralight","PingFang TC Light","PingFang TC Medium","PingFang TC Regular","PingFang TC Semibold","PingFang TC Thin","PingFang TC Ultralight","Segoe UI Historic","Segoe WP","Segoe WP Black","Segoe WP Light","Segoe WP SemiLight","Segoe WP Semibold","Yu Gothic Medium","Yu Gothic UI","Yu Gothic UI Light","Yu Gothic UI Semibold","Yu Gothic UI Semilight","Yuanti SC Bold","Yuanti SC Light","Yuanti SC Regular","Yuanti TC Light"],unknown:["TeamViewer10","TeamViewer11","TeamViewer12","TeamViewer13","TeamViewer7","TeamViewer8","TeamViewer9",".Mondulkiri U GR 1.5","AIGDT","AMGDT","AcadEref","Adobe Arabic","Adobe Devanagari","Adobe Fan Heiti Std B","Akaash","Akshar Unicode","AksharUnicode","Al Bayan","AmdtSymbols","AngsanaUPC","AnjaliOldLipi","Arabic Transparent","Arabic Typesetting","Ayuthaya","BJCree Uni","BPG Classic 99U","BPG Paata Khutsuri U","Bangla MN","Bangla Sangam MN","Bernard Condensed","Bookshelf Symbol 7","Britannic Bold","BrowalliaUPC","CDT Khmer","Carolina","CityBlueprint","CommercialPi BT","Complex","Cooper Black","Cooper Std Black","Copyist","CountryBlueprint","David","DecoType Naskh","Decor","Devanagari MT","Devanagari Sangam MN","DilleniaUPC","DokChampa","Droid Naskh Shift","Droid Naskh Shift Alt","Eccentric Std","Ekushey Punarbhaba","Estrangelo Edessa","Ethiopia Jiret","EucrosiaUPC","FTEasci1","FTEasci1-f","FTEasci2","FTEasci2-f","FTEbaudo","FTEbaudo-f","FTEebcd1","FTEebcd1-f","FTEebcd2","FTEebcd2-f","FTEspec","FTEspec-f","FreesiaUPC","GDT","GENISO","GF Zemen Unicode","Gautami","GreekC","GreekS","Gujarati Sangam MN","Gulim","GulimChe","Gungsuh","GungsuhChe","Gurmukhi MT","Guttman Yad","ISOCP","ISOCP2","ISOCP3","ISOCT","ISOCT2","ISOCT3","ISOCTEUR","InaiMathi","IrisUPC","Iskoola Pota","Italic","ItalicC","ItalicT","Juice ITC","Kailasa","Kannada MN","Kannada Sangam MN","Kedage","Kefa","Kh-SrokKhleang","Khmer MN","Khmer OS","Khmer OS Fasthand","Khmer OS Freehand","Khmer OS Metal Chrieng","Khmer OS Muol","Khmer Sangam MN","KodchiangUPC","Ktav","KufiStandardGK","Leelawadee","LiHei Pro","Likhan","LilyUPC","Lithos Pro Regular","MS Outlook","MS Reference Specialty","fakefont2","MT Extra","Malayalam MN","Malayalam Sangam MN","Mangal","Marlett","Mesquite Std","Microsoft Himalaya","Microsoft New Tai Lue","Microsoft Tai Le","Microsoft Uighur","Microsoft Yi Baiti","MingLiU_HKSCS-ExtB","Miriam","Modern","Mongolian Baiti","MoolBoran","MotoyaLCedar","MotoyaLMaru","Mshtakan","Myriad Arabic","Myriad Hebrew","Niagara Engraved","Niagara Solid","Noto Kufi Arabic ","Onyx","OpenSymbol","Orator Std Slanted","Oriya MN","OskiDakelh","PMingLiU","PMingLiU-ExtB","Papyrus","PhnomPenh OT","Pigiarniq","Pothana","Power Clear","Power Green","Power Green Narrow","Power Green Small","Power Red and Blue","Power Red and Blue Intl","Power Red and Green","Proxy 1","Proxy 2","Proxy 3","Proxy 4","Proxy 5","Proxy 6","Proxy 7","Proxy 8","Proxy 9","Raavi","Rachana_w01","Raghindi","Rod","RomanC","RomanD","RomanS","RomanT","Saab","Sakkal Majalla","Shonar Bangla","Shruti","SimHei","Simplex","Simplified Arabic","Simplified Arabic Fixed","Sinhala Sangam MN","Small Fonts","SmartGothic","Stencil","Stencil Std","Sun-ExtA","Syastro","Symap","Symbol","Symeteo","Symusic","TITUS Cyberbit Basic","TechnicLite","Tekton Pro","Tekton Pro Cond","Tekton Pro Ext","Telugu MN","Telugu Sangam MN","ThoolikaUnicode","Tibetan Machine Uni","Traditional Arabic","Tunga","Txt","Uqammaq","Utsaah","Vani","Visual Geez Unicode","Visual Geez Unicode Agazian","Visual Geez Unicode Title","Vrinda","WP Arabic Sihafa","WP ArabicScript Sihafa","WP CyrillicA","WP CyrillicB","WP Hebrew David","WST_Czec","WST_Engl","WST_Fren","WST_Germ","WST_Ital","WST_Span","WST_Swed","Webdings","Wingdings","Wingdings 2","Wingdings 3","ZWAdobeF","Zuzumbo","ori1Uni",".Vn3DH",".VnArabia",".VnArabiaH",".VnAristoteH",".VnBahamasB",".VnBahamasBH",".VnBlack",".VnBlackH",".VnCooper",".VnCooperH",".VnExotic",".VnExoticH",".VnFree",".VnFreeH",".VnKoala",".VnKoalaH",".VnLincoln",".VnLincolnH",".VnLinus",".VnLinusH",".VnMemorandum",".VnMemorandumH",".VnPark",".VnParkH",".VnPresent",".VnPresentH",".VnRevue",".VnRevueH",".VnShelley Allegro",".VnSouthern",".VnSouthernH",".VnStamp",".VnTeknical",".VnTeknicalH",".VnTifani Heavy",".VnTifani HeavyH",".VnTime",".VnTimeH",".VnUniverse",".VnVogue",".VnVogueH","1942 report","36 days ago BRK","36 days ago Thick BRK","A bite","A.Lewis","AR BLANCA","AR CARTER","AR CENA","AR DECODE","AR DESTINE","AR ESSENCE","AR JULIAN","AT*Fujiyama","AT*Fujiyama Black","AT*Fujiyama Extra Bold","AT*Fujiyama Light","AT*Fujiyama2","Aarcover Regular","Aardvark Cafe","AardvarkBold","Abduction2002","Aberration","Abscissa Italic","Abstrakt","AddJazz","Adobe Arabic Bold","Adobe Arabic Bold Italic","Adobe Arabic Italic","Adobe Fan Heiti Std","Adobe Hebrew Bold","Adobe Hebrew Bold Italic","Adobe Kaiti Std","Aerovias Brasil NF","Aftermath","Aftershock Debris","Aftershock Debris CondSolid","Aftershock Debris CondSolid Italic","Aftershock Debris Condensed","Aftershock Debris Condensed Italic","Aftershock Debris Italic","Aftershock Debris Solid","Aftershock Debris Solid Italic","Ahnberg","Al Bayan Bold","Al Bayan Plain","Aldhabi","Alison Regular","All Caps","Allegro","Alligator Puree","Almonte Snow","AmerType Md BT","Amerika","Amerika Alternates","Analgesics","Angioma AOE","Angstrom","Ann Regular","Apple Braille","Apple Symbols","Aquaduct Plain","Aquaduct Reverse Italic","Aramis Italic","Arctic","Argos MF","Arrobatherapy","Arrus BT","Asenine","Asenine Wide","Atlas","Aurora Cn BT","Baghdad","Bazooka","BinnerD","Blackletter686 BT","BlairMdITC TT","Dingbats","Garuda","KacstArt","KacstBook","KacstDecorative","KacstDigital","KacstFarsi","KacstLetter","KacstNaskh","KacstOffice","KacstOne","KacstPen","KacstPoster","KacstQurn","KacstScreen","KacstTitle","KacstTitleL","Kinnari","Lohit Bengali","Lohit Gujarati","Lohit Hindi","Lohit Punjabi","Lohit Tamil","Mallige","Meera","Myanmar Text","Nadeem","Nina","Onyx BT","Osaka","Papyrus Condensed","ParkAvenue BT","Pegasus","Phetsarath OT","Pickwick","PilGi","PortagoITC TT","Pothana2000","Pythagoras","Raanana","Rachana","Rekha","Ribbon131 Bd BT","SWGamekeys MT","SWMacro","Sanpya","Sathu","Sceptre","SchoolHouse Printed A","Segoe Marker","Sherwood","Signboard","Silom","Socket","Staccato222 BT","Standard Symbols L","Steamer","Storybook","Subway","Synchro LET","TeX","Technical","Tekton Pro Bold","Tekton Pro BoldCond","Tekton Pro BoldExt","Tekton Pro BoldObl","TimeA1","Tristan","Tubular","TypoUpright BT","Umpush","UnDinaru","UnGraphic","UnGungseo","UnPilgi","Untitled1","Urdu Typesetting","VNI Cambodia","VNI Greece","VNI Laos","VNI Russia","VNI-Allegie","VNI-Aptima","VNI-Ariston","VNI-Auchon","VNI-Avo","VNI-Awchon","VNI-Aztek","VNI-Bandit","VNI-Baybuom","VNI-Book","VNI-Briquet","VNI-Broad","VNI-Butlong","VNI-Centur","VNI-Commerce","VNI-Coronet","VNI-DOS Sample Font ","VNI-Diudang","VNI-Dom","VNI-Duff","VNI-Dur","VNI-Fato","VNI-Franko","VNI-Free","VNI-HLThuphap","VNI-Hobo","VNI-Internet Mail","VNI-Jamai","VNI-Juni","VNI-Korin","VNI-Kun","VNI-Linus","VNI-Lithos","VNI-Maria","VNI-Meli","VNI-Murray","VNI-Netbut","VNI-Nhatban","VNI-OngDoHL","VNI-Park","VNI-Present","VNI-Revue","VNI-Souvir","VNI-Tekon","VNI-Thanhcao","VNI-Thufap1","VNI-Thufap2","VNI-Thufap3","VNI-Thufapfan","VNI-Top","VNI-Truck","VNI-Tubes","VNI-Univer","VNI-Vari","VNI-Viettay","VNI-Vivi","VNI-WIN Sample Font","VNI-Whimsy","VNI-Yahoo","VNI-Zap","VTC Tribal Regular","Vagabond","Vemana2000","Vinhan","Waree","Xerox Malfunction BRK","Zapf Dingbats","ZapfEllipt BT","akaDora","amaze","balthazar","bart","bimini","gargi","mry_KacstQurn","olddreadfulno7 bt","pump demi bold let","puppylike","roland","signs normal","simplex","symap","symbol","technic","terk","trendy","txt","vivian","webdings","western","wingdings"," 20","(AH) Manal Black","0","01 Digit","04b","1","18030","19","3 of 9 Barcode","36p Kana Demibold","36p Kana Medium","3ds Light","51","52","53","54","55","56","57","58","63","64","65","66","67","68","8514oem","8Pin Matrix","A Sensible Armadillo","ABIGAIL","ABSALOM","ADMUI2Lg","ADMUI2Sm","ADMUI3Lg","ADMUI3Sm","AG","AGA Arabesque","AGA Arabesque Desktop","ANDROID ROBOT","ARDS1","AS-TTDurga","AV-Font-Ben1","AV-Font-Guj1","AV-Font-Hin1","AV-Font-Kan1","AV-Font-Mal1","AV-Font-Sin","AV-Font-Sin1","AV-Font-Symbol","AV-Font-Tam1","AV-Web-Hin1","AV-Web-Tam1","AV-Web-Tel1","AVGmdBU","AcmeFont","Adamsky SF","Admisi Display SSi","Adobe Arabic Regular","Adobe Devanagari Bold","Adobe Devanagari Bold Italic","Adobe Devanagari Italic","Adobe Gurmukhi","Adobe Gurmukhi Bold","Adobe Hebrew Regular","Adobe Pi Std","Al Nile","Al Nile Bold","Al Tarikh","Al Tarikh Regular","AlekyaBold","Alfredo","Alibi","Amethyst","Amudham","AnandapatraCMJ","Ancuu","Andong","Angiang","AnticFont","Apple Braille Outline 6 Dot","Apple Braille Outline 8 Dot","Apple Braille Pinpoint 6 Dot","Apple Braille Pinpoint 8 Dot","Archicoco","Archive","ArhialkhanMJ","ArhialkhanOMJ","Arkhip","Ashwariya","Asimov","AtraiMJ","AtraiOMJ","Atzur","Autumn","Avanti","B095","BATAVIA","BN Jinx","BN Machine","BN-TTDurga","BOUTON International Symbols","BRADDON","Baamini","Baclieu","Baghdad Regular","Bahiana","Baiduan Number","Balthazar","BaluBold","Bamini","Bangkok Cirilica","Bangla MN Bold","Bangla Sangam MN Bold","Baoli SC","Baoli SC Regular","Baron Neue Black Italic","Baron Neue Bold Italic","Barrio","Bastion","Beatnik SF","Beirut","Beirut Regular","Belfast Heavy SF","Belwe Cn BT","BhagirathiMJ","BhagirathiOMJ","BhairabMJ","BhairabOMJ","Bhuma","Bienhoa","Bifurk","Binhdinh","Binhlong","Bobcat","Bodoni Ornaments","Bold Italic Art","BolsterBold","BongshaiMJ","BongshaiOMJ","Bookshelf Symbol 1","Bookshelf Symbol 2","Bookshelf Symbol 3","BorakMJ","BorakOMJ","Borealis","BorhalMJ","BrahmaputraMJ","Brandish","BriLliant","Brussels","BuiltTitlingRg-Bold","BuiltTitlingRg-BoldItalic","BuiltTitlingRg-Regular","BurigangaKamalaOMJ","BurigangaMJ","BurigangaOMJ","BurigangaSushreeMJ","BurigangaSushreeOMJ","C-Medium","C-MediumHWL","CAMPBELL","CASMIRA","CATIA Symbols","CHANL","CL","CLARENCE","CSD16","CSongGB18030C-LightHWL","CZEC","Calvin","Camau","Camranh","Canter Bold","Canter Bold Strips","Canter Light","Canter Outline","Cantho","Capitals","Carbon Block","Chalkboard","Chalkboard Bold","Chalkboard SE","Chalkboard SE Bold","Chalkboard SE Light","ChandrabatiMJ","ChandrabatiMatraMJ","ChandrabatiMatraOMJ","ChandrabatiOMJ","ChandrabatiSushreeMJ","Chess Alpha","Chess Berlin","Chess Marroquin","Chess Maya","Chess Merida","Chinyen","Chipotle","ChitraMJ","ChitraOMJ","ChitraSMJ","ChondanaMJ","ChondanaOMJ","Clubland","Code39AzaleaNarrow1","Code39AzaleaNarrow2","Code39AzaleaNarrow3","Code39AzaleaRegular1","Code39AzaleaRegular2","Code39AzaleaRegular3","Code39AzaleaWide1","Code39AzaleaWide2","Code39AzaleaWide3","Colbert","ConcursoItalian BTN","ConcursoItalian BTN Wide","Cooper Std Black Italic","CopprplGoth BT","Cortoba","Crystal","Cuulong","Czec","DFMaruGothic-Md","DS Crystal","DV-TTYogesh","DYMO Symbols","DYMObvba","Daclac","Damascus","Damascus Regular","David Transparent","DecoType Naskh Extensions","DecoType Naskh Regular","DecoType Naskh Special","DecoType Naskh Swashes","DecoType Naskh Variants","DecoType Thuluth","Deepa","Deepak","Deneane","Devanagari MT Bold","Devanagari Sangam MN Bold","DhakarchithiMJ","DhakarchithiOMJ","DhanshirhiMJ","DhanshirhiOMJ","DholeshwariMJ","DholeshwariOMJ","DhonooMJ","DhonooOMJ","DhorolaMJ","DhorolaOMJ","Diavlo Black","Diavlo Bold","Diavlo Light","Diavlo Medium","DigifaceWide","Digifit","Digital Readout Upright","Divya","Diwan Kufi","Diwan Kufi Regular","Diwan Thuluth","Diwan Thuluth Regular","Diwani Bent","Diwani Letter","Diwani Outline Shaded","Diwani Simple Outline","Diwani Simple Outline 2","Diwani Simple Striped","Dollar","Dot","Drivebye 1","Drivebye 2","Droid Arabic Naskh","Ducmy","DynameBlackSSK","Dyuthi","ELANGO-TML-Panchali-Normal","ELEGANCE","ELLIS","ENGL","EQUIS","ESTO","EXCESS","ElegantIcons","Embassy BT","Emmett","Engl","EngraverFontExtras","Enliven","Euclid Bold Italic","Euclid Extra","Euclid Italic","Euclid Symbol","Euclid Symbol Bold","Euclid Symbol Bold Italic","Euclid Symbol Italic","Euphemia UCAS Italic","Euro Sign","FELIZ","FML-Akhila","FML-Indulekha","FML-IndulekhaHeavy","FML-Karthika","FML-Leela","FML-LeelaHeavy","FML-Mohini","FML-Nanditha","FML-Padmanabha","FML-Revathi","FML-Sruthy","FML-TTAathira","FML-TTAmbili","FML-TTAnakha","FML-TTAnjali","FML-TTAparna","FML-TTAshtamudi","FML-TTAshtamudiExBold","FML-TTAswathi","FML-TTAtchu","FML-TTAyilyamBold","FML-TTBeckalBold","FML-TTBhavana","FML-TTChandrika","FML-TTChithira","FML-TTChithiraHeavy","FML-TTDevika","FML-TTGauri","FML-TTGauriHeavy","FML-TTGeethika","FML-TTGopika","FML-TTGuruvayur","FML-TTIndulekha","FML-TTIndulekhaHeavy","FML-TTJaya","FML-TTJyothy","FML-TTJyotsna","FML-TTKala","FML-TTKamini","FML-TTKanika","FML-TTKarthika","FML-TTKaumudi","FML-TTKeerthi","FML-TTLeela","FML-TTLeelaHeavy","FML-TTMadhaviExBold","FML-TTMalavika","FML-TTMangalaExBold","FML-TTMayoori","FML-TTNalini","FML-TTNandini","FML-TTNanditha","FML-TTNarmadaExBold","FML-TTNila","FML-TTOnam","FML-TTPeriyar","FML-TTPooram","FML-TTPoornima","FML-TTRavivarma","FML-TTRevathi","FML-TTRohini","FML-TTSabari","FML-TTSankara","FML-TTSarada","FML-TTSruthy","FML-TTSugatha","FML-TTSuparna","FML-TTSurya","FML-TTSwathyBold","FML-TTThakazhi","FML-TTTheyyam","FML-TTThiruvathira","FML-TTThunchan","FML-TTVaisali","FML-TTVarsha","FML-TTVeenaHeavy","FML-TTVinay","FML-TTVisakham","FML-TTVishu","FML-TTYashasri","FMLTTAathira","FREH","FZLanTingHeiS-UL-GB","Farah Regular","Farisi","Farisi Regular","Farsi Simple Bold","Farsi Simple Outline","Fences","Ferro Rosso","Finale AlphaNotes","Finale Mallets","Finale Numerics","Finale Percussion","FontAwesome","FordLineDraw","Fren","GB18030 Bitmap","GENUINE","GJ-TTAvantika","GLYPHICONS Halflings","GROBOLD","GaneshBlack","GaneshBold","GaneshExtraBold","GaneshMedium","GaneshNarrow","GaneshThin","GangaMJ","GangaOMJ","GangaSagarMJ","Gauge","Gauge Heavy","Gayathri","Gazzarelli","Gen W01","Germ","GhorautraMJ","GhorautraOMJ","Giadinh","Giolinh","Glockenspiel","Gocong","GoomtiMJ","GoraiMJ","GoraiOMJ","Gotham Light Italic","Gravity","Gridnik","GrilledCheese BTN Wide Blk","Gujarati MT Bold","Gujarati Sangam MN Bold","GungSeo","GungSeo Regular","Gurmukhi MN","Gurmukhi MN Bold","Gurmukhi Sangam MN","Gurmukhi Sangam MN Bold","HANA","HERMAN","HGHangle","HGHeiseiKakugothictaiW9","HGHeiseiMinchotaiW3","HGHeiseiMinchotaiW9","HGPHeiseiKakugothictaiW9","HGPHeiseiMinchotaiW3","HGPHeiseiMinchotaiW9","HGSHeiseiKakugothictaiW3","HGSHeiseiKakugothictaiW5","HGSHeiseiKakugothictaiW9","HGSHeiseiMinchotaiW9","HKSCS","HKSCS-ExtB","HP PSG","HUNTSON","Hadong","HaldaMJ","HaldaOMJ","Halong","Hannotate SC","Hannotate SC Bold","Hannotate SC Regular","Hannotate TC","Hannotate TC Regular","Hansen","HanziPen SC Bold","HanziPen TC Bold","HanziPen TC Regular","HariSree","Harvest","HarvestItal","Haxton Logos TT","HeadLineA","HeadLineA Regular","Heather BTN","Heavy","Heavy Heap","Herculanum","Highlight LET","Hobo Std Medium","Hoian","Hombre","HooglyMJ","HooglyOMJ","HucklebuckJF","Hue","IDAutomationPDF417n2","IDAutomationPDF417n3","IDAutomationPDF417n4","IDAutomationPDF417n5","IMG Extreme","IMG Seasons","IMG Symbols","IMG Travel","INSPECTIONXPERT GDT FRAMES","INSPECTIONXPERT GDT NOFRMS","IRIS","ISABELLE","ITAN","ITF Devanagari","ITF Devanagari Bold","ITF Devanagari Book","ITF Devanagari Demi","ITF Devanagari Light","ITF Devanagari Marathi","ITF Devanagari Marathi Bold","ITF Devanagari Marathi Book","ITF Devanagari Marathi Demi","ITF Devanagari Marathi Light","ITF Devanagari Marathi Medium","ITF Devanagari Medium","IchamotiMJ","IchamotiOMJ","Impregnable Personal Use Only","Incised901 BdCn BT","Incised901 Ct BT","Incised901 Nd BT","Incised901 NdIt BT","Induction","Industrial736 BT","Ital","JLS Space GothicC  NC","JLS Space GothicR NC","JUSTICE","JaJaDiMJ","JaJaDiOMJ","Jameel Noori Nastaleeq","Janaranjani","Jayanthi","JazzCord","JazzPerc","JomunaMJ","JugantorMJ","JumunaOMJ","Jwala","KB Vibrocentric","KN-TTUma","KabinLightDB Bold","Kailasa Bold","Kailasa Regular","Kalakaumudi","KalegongaMJ","KalegongaOMJ","KalindiMJ","KalindiOMJ","KalindiSMJ","Kalpurush","Kalpurush ANSI","Kanalisirung","KanchanMJ","KanchanOMJ","Kannada MN Bold","Kannada Sangam MN Bold","KarnaphuliMJ","KarnaphuliOMJ","KasseFLF","KasseFLF-Bold","Kefa Bold","Kefa Regular","Kerala","Khalid Art bold","Khanhoa","Khmer MN Bold","KievitPro-Regular","Kiran","Klee","Klee Medium","Kohinoor Bangla Bold","Kohinoor Bangla Light","Kohinoor Bangla Medium","Kohinoor Bangla Semibold","Kohinoor Devanagari","Kohinoor Devanagari Bold","Kohinoor Devanagari Demi","Kohinoor Devanagari Light","Kohinoor Devanagari Medium","Kohinoor Devanagari Regular","Kohinoor Devanagari Semibold","Kohinoor Telugu","Kohinoor Telugu Bold","Kohinoor Telugu Light","Kohinoor Telugu Medium","Kohinoor Telugu Semibold","Kokonor","Kokonor Regular","Krungthep","Kruti Astro","Kufi Extended Outline","Kufi Outline Shaded","KufiStandardGK Regular","Kumudam","Kundli","Kundli English","LCD","LETT","LIVINGWELL","LKLUG","LT-ET-Ramya","LT-TM-Barani","LT-TM-Lakshman","LTHYSZK","Laksaman","Lantinghei SC","Lantinghei SC Heavy","Lantinghei TC","Lantinghei TC Demibold","Lantinghei TC Extralight","Lantinghei TC Heavy","Lao MN","Lao MN Bold","Lao Sangam MN","Lapidary333 Blk BT","Latino Elongated LET Plain:1.0","Learning Curve Dashed Pro","Learning Curve Pro","Led Italic Font","Leitura Display Swashes","LetterOMatic!","Libel Suit","Libian SC","Libian SC Regular","Light","LightSC","Limousine","Lingoes Unicode","Linowrite","Lithos Pro","Lithos Pro Black","Logo3Mtt","Logo3Mv3tt","Lohit Devanagari","Luna Bar","MANDELA","MARKETPRO","MATTEROFFACT","MAXIMO","ML-IndulekhaHeavy","ML-NILA01","ML-NILA02","ML-NILA03","ML-NILA04","ML-NILA05","ML-NILA06","ML-NILA07","ML-TTAathira","ML-TTAmbili","ML-TTAnakha","ML-TTAnjali","ML-TTAparna","ML-TTAshtamudi","ML-TTAshtamudiExBold","ML-TTAswathi","ML-TTAtchu","ML-TTAyilyamBold","ML-TTBeckalBold","ML-TTBhavana","ML-TTChandrika","ML-TTChithira","ML-TTChithiraHeavy","ML-TTDevika","ML-TTGauri","ML-TTGauriHeavy","ML-TTGeethika","ML-TTGopika","ML-TTGuruvayur","ML-TTIndulekha","ML-TTIndulekhaHeavy","ML-TTJaya","ML-TTJyothy","ML-TTJyotsna","ML-TTKala","ML-TTKamini","ML-TTKanika","ML-TTKarthika","ML-TTKaumudi","ML-TTKeerthi","ML-TTLeela","ML-TTLeelaHeavy","ML-TTMadhaviExBold","ML-TTMalavika","ML-TTMangalaExBold","ML-TTMayoori","ML-TTNalini","ML-TTNandini","ML-TTNanditha","ML-TTNarmadaExBold","ML-TTNila","ML-TTOnam","ML-TTPeriyar","ML-TTPooram","ML-TTPoornima","ML-TTRavivarma","ML-TTRevathi","ML-TTRohini","ML-TTSabari","ML-TTSankara","ML-TTSarada","ML-TTSruthy","ML-TTSugatha","ML-TTSuparna","ML-TTSurya","ML-TTSwathyBold","ML-TTThakazhi","ML-TTTheyyam","ML-TTThiruvathira","ML-TTThunchan","ML-TTVaisali","ML-TTVarsha","ML-TTVeenaHeavy","ML-TTVinay","ML-TTVisakham","ML-TTVishu","ML-TTYashasri","ML1-TTAmbili","ML1-TTAswathi","ML1-TTIndulekha","MLB-TTAmbili","MLB-TTAswathi","MLB-TTIndulekha","MLU-Panini","MLW-TTKarthika","MMArrow","MMArrow Bold","MMArrow Bold Italic","MMArrow Italic","MMBinary","MMBinary Bold","MMBinary Bold Italic","MMBinary Italic","MMCenturyNew","MMCenturyNewRD","MMCenturyNewRD Bold","MMCenturyNewRD Bold Italic","MMCenturyNewRD Italic","MMCenturyOld","MMEtc","MMEtc Bold","MMEtc Bold Italic","MMEtc Italic","MMExtra","MMExtra Bold","MMExtra Bold Italic","MMExtra Italic","MMGreek","MMGreek Bold","MMGreek Bold Italic","MMGreek Italic","MMNegate","MMNegate Bold","MMNegate Bold Italic","MMNegate Italic","MMRelation","MMRelation Bold","MMRelation Bold Italic","MMRelation Italic","MMSchoolRD","MMSchoolRD Bold","MMSchoolRD Bold Italic","MMSchoolRD Italic","MMTextBook","MMTextBook Bold","MMTextBook Bold Italic","MMTextBookB","MMTextBookB Bold","MMTextBookB Bold Italic","MMVariable","MMVariable2","MMVariable2 Bold","MMVariableA","MMVariableA Bold","MMVariableB","MMVariableB Bold","MMVariableC","MMVariableC Bold","MMVariableD","MMVariableF","MMa Arrow","MMa Arrow Bold","MMa Arrow Bold Italic","MMa Arrow Italic","MMa Arrow S","MMa Arrow SS","MMa Binary","MMa Binary Bold","MMa Binary Bold Italic","MMa Binary Italic","MMa Binary S","MMa Binary SS","MMa CenturyKS","MMa CenturyKSS","MMa Etc","MMa Etc Bold","MMa Etc Bold Italic","MMa Etc Italic","MMa Etc S","MMa Etc SS","MMa Extra","MMa Extra Bold","MMa Extra Bold Italic","MMa Extra Italic","MMa Extra S","MMa Extra SS","MMa Fermat","MMa Fermat Bold","MMa Gauss","MMa Gauss Bold","MMa Greek","MMa Greek Bold","MMa Greek Bold Italic","MMa Greek Italic","MMa GreekS","MMa GreekS Italic","MMa GreekSS","MMa GreekSS Italic","MMa Negate","MMa Negate Bold","MMa Negate Bold Italic","MMa Negate Italic","MMa Negate S","MMa Negate SS","MMa Pascal","MMa Relation","MMa Relation Bold","MMa Relation Bold Italic","MMa Relation Italic","MMa Relation S","MMa Relation SS","MMa TextBook","MMa Variable","MMa Variable S","MMa Variable SS","MMa Variable2","MMa Variable2 Bold","MMa Variable2 S","MMa Variable2 SS","MMa VariableA","MMa VariableA Bold","MMa VariableA S","MMa VariableA SS","MMa VariableB","MMa VariableB Bold","MMa VariableB S","MMa VariableB SS","MMa VariableC","MMa VariableC Bold","MMa VariableC S","MMa VariableC SS","MMa VariableD","MMa VariableD Bold","MMa VariableD S","MMa VariableD SS","MMa VariableF","MMa VariableF Bold","MMa VariableF S","MS Reference 1","MS Reference 2","MT Extra Tiger","MYingHei","Mael","Maestro","Maestro Percussion","Maestro Wide","Maiden Orange","Malayalam MN Bold","Malayalam Sangam MN Bold","Manorly","Map Symbols","MapInfo Cartographic","Marion","Marquisette BTN","Marquisette BTN Lined","Mathilde","Mayence Premium","Medlin","MelodBold","Mesquite Std Medium","Miama","Microdot","Microsoft Tai Le Bold","Minisystem","Miriam Transparent","Mishafi","Mishafi Gold","Mishafi Gold Regular","Mishafi Regular","Ml","Modena printed","Modern No","Mona Lisa Solid ITC TT","Monotype Koufi","Monotype Sorts","Monotype Sorts 2","Monotype.com","Moon Flower Bold","Mshtakan Bold","Mshtakan BoldOblique","Mshtakan Oblique","Muna","Muna Black","Muna Regular","Myanmar MN","Myanmar MN Bold","Myanmar Sangam MN Bold","Mycalc","Myriad Arabic Italic","Myriad Hebrew Bold","Myriad Hebrew Bold Italic","Myriad Hebrew Italic","Mytho","NATURALBORN","NBP Informa FiveSix","NBP Informa FiveThree","NORMAL","Nadeem Regular","Nasalization","New Renex Special Graphics","Newton Phonetic ABBYY","Nixie One","NixieOneRegular","No Flash","Note this","Noteworthy Bold","Noteworthy Light","Noto Sans Cuneiform","Noto Sans Egyptian Hieroglyphs","Noto Sans Inscriptional Pahlavi","Noto Sans Inscriptional Parthian","Notram","Nova Cut","November","Nueva Std Bold Condensed Italic","OLIVEOIL","OPENCLASSIC","OR-TTSarala","Old Antic Bold","OldDreadfulNo7 BT","One Dance Bold","OpineHeavy","Opus","Opus Chords","Opus Figured Bass","Opus Figured Bass Extras","Opus Function Symbols","Opus Japanese Chords","Opus Metronome","Opus Note Names","Opus Ornaments","Opus Percussion","Opus PlainChords","Opus Roman Chords","Opus Special","Opus Special Extra","Orator Std Medium","Origin","Oriya MN Bold","Oriya Sangam MN Bold","PFFuelPro-Regular","PN-TTAmar","POLI","PR Celtic Narrow","PRETEXT","PT Bold Arch","PT Bold Broken","PT Bold Dusky","PT Bold Mirror","PT Separated Baloon","PT Simple Bold Ruled","Paralucent Bold","Paralucent Bold Italic","Paralucent Heavy","Paralucent Heavy Italic","Paralucent Light","Paralucent Light Italic","Paralucent Medium Italic","Parisian BT","ParvathiBold","ParvathiMedium","ParvathiThin","Pegypta","Penultimate","PenultimateLight","PenultimateLightItal","Phatdiem","Phosphate","Phosphate Solid","Photoshop Large","Photoshop Small","PhrasticMedium","PilGi Regular","PondAllRounder","PondFreeBoss","PondFreeMe","PondFreeZoo","Poplar Std Black","Praveen","Prema","Prisoner SF","Pujeeta","PujeetaNarrow","PujeetaSpecial","Pump Demi Bold LET","QTOptimum Regular","Qaskin Black Personal Use","Quangngai","QuickType II","QuickType II Pi","Quinhon","QuiverItal","QumpellkaNo12","RADAGUND","RUMA","Rachgia","Radha","RadhaBold","RaghuMalayalam","Raisin des Sables","Rakesly Bk","Rakesly El","Rakesly Rg","Rakesly Ul","Razer Header Light","Razer Header Regular","Razer Header Regular Oblique","Realvirtue","Reginet","Reswysokr","Rod Transparent","Roland","RowdyHeavy","Rumburak","Rupee Foradian","SAF","SAPDings","SAPGUI-Icons","SAPIcons","SC","SD-TTSurekh","SERB","SF Movie Poster","SHELMAN","SOLIDWORKS GDT","SPAN","STHupo","STXinwei","SWAstro","SWComp","SWED","SWGDT","SWGothe","SWGrekc","SWGreks","SWIsop1","SWIsop2","SWIsop3","SWIsot1","SWIsot2","SWIsot3","SWItal","SWItalc","SWItalt","SWLink","SWMap","SWMeteo","SWMusic","SWRomnc","SWRomnd","SWRomnt","SWScrpc","SWSimp","SWTOR Trajan","SWTxt","Sabrina","SaiEmbed","SaiIndira","SaiMeera","SaiSai","SaiVrishin","Saint Andrew des Kiwis","Salilam","Salina","Samathwa","SamsungImagination","Sana","Sana Regular","Sanskrit","Sanskrit New","Sasfont","Seagull APL","Selena","SemiBold","Shree Devanagari 714","Shree Devanagari 714 Bold","Shree Devanagari 714 Bold Italic","Shree Devanagari 714 Italic","Shree-Kan-0853","Shree-Mal-0502","Shree-Tel-0900","Silent Reaction","Simple Bold Jut Out","Simple Indust Outline","Simple Outline Pat","Sinhala MN Bold","Sinhala Sangam MN Bold","Six Caps","Siyam Rupali","Siyam Rupali ANSI","Sketch Block","Sketch Match","Sketch Rockwell","Skinny","Smarty Pants BTN","Smokum","Smooth","Sniglet","Snowdrift","Sosa Regular","Space Bd BT","Span","Splash","St Marie Thin","Stencil Std Bold","Stephen","Steppes TT","Suruma","SutonnyMJ","SutonnyOMJ","Swed","Symbol MT","Symbol Neu for Powerline","Symbol Tiger","Symbol Tiger Expert","SymbolProp BT","Symbola","TAB","TAC-Barathi","TAC-Kabilar","TAC-Kambar","TAC-Valluvar","TAM","TAM-Kavi","TAM-Shree800","TAMElango","TAMILFIX","TAMILNET","TAMLKamban","TAU-Barathi","TAU-Kabilar","TAU-Kambar","TAU-Kaveri","TAU-Valluvar","TL-TTHemalatha","TLArabic","TLPashto","TLUrdu","TM-TTValluvar","TMBW-TTValluvar","TRENDY","TRIAL","TSCu","TURK","Tall Boy West","Tamburo","Tamil MN","Tamil MN Bold","Tamil Sangam MN","Tamil Sangam MN Bold","Tamil-Aiswarya","Teen","Tekton Pro Bold Condensed","Tekton Pro Bold Extended","Tekton Pro Bold Oblique","Tele-Marines","Telugu MN Bold","Telugu Sangam MN Bold","Tera Special","Terminator Real NFI","TextilePiEF","Thanhoa","Throw My Hands Up in the Air","Tiger","Tiger Expert","Timeless","Toledo","TtsNote","Tuyenduc","Type Embellishments One LET Embellishments One LET Plain:1.0","Ultra","UnitedStates","Unknown Caller BTN SC","Urdu Naskh Asiatype","Urvasi","Uttara","VANAVIL-Avvaiyar","VISCII Sample Font","VN-NTime","VNI Aptima","VNI-Algerian","VNI-Bazooka","VNI-Boston Black","VNI-Bragga","VNI-Colonna","VNI-DOS Sample Font","VNI-DesdemonaU","VNI-Fillmore","VNI-GlabXb","VNI-Harrington","VNI-Heather","VNI-Lydi","VNI-ShellaL","VNI-Slogan","VNI-StageCoach","VNI-Standout","VNI-StencilU","VNI-Stylus","VNI-Wide Latin","Valken","Valluvan","Vikatan","Visitor TT1 BRK","Visitor TT2 BRK","Vivian","Vonique 64","Voyager NBP","WP IconicSymbolsA","WP IconicSymbolsB","WP Japanese","WP Phonetic","WP TypographicSymbols","WST","Walter","Warsaw","Waseem","Waseem Light","Waseem Regular","Wawati SC","Wawati SC Regular","Wawati TC","Wawati TC Regular","Web Serveroff","Webdunia","Weibei SC Bold","Weibei TC","Weibei TC Bold","Wellfleet","Westwood LET","Wolf in the City Light","Xingkai SC","Xirod","Xpress Heavy SF","Xpress SF","YD2002","Yeseva One","Yuanti SC","Yuanti TC","Yuanti TC Bold","Yuanti TC Regular","Yuppy SC","Yuppy SC Regular","Yuppy TC","Yuppy TC Regular","Z@R11F8.tmp","Z@R120A.tmp","Z@R123A.tmp","Z@R13D5.tmp","Z@R16EB.tmp","Z@R16FD.tmp","Z@R170E.tmp","Z@R1720.tmp","Z@R1751.tmp","Z@R1762.tmp","Z@R1774.tmp","Z@R1816.tmp","Z@R1828.tmp","Z@R183A.tmp","Z@R184B.tmp","Z@R185D.tmp","Z@R195D.tmp","Z@R277C.tmp","ZDingbats","Zirkon","symbolps","ae","at most sphere","athletic","boot","cafeta","chs","cht","classic 10","cmbsy10","cmbsy6","cmbsy7","cmbsy8","cmbsy9","cmdunh10","cmff10","cmfi10","cmfib8","cminch","cmitt10","cmsl10","cmsl12","cmsl8","cmsl9","cmsltt10","cmssi10","cmssi12","cmssi17","cmssi8","cmssi9","cmssqi8","cmtcsc10","cmtex10","cmtex8","cmtex9","cmti7","cnefont","cnefonts","copy 08","copy 09","copy 10","dbldwrsw","euex10","euex7","euex8","euex9","eufb10","eufb5","eufb6","eufb7","eufb8","eufb9","eufm10","eufm5","eufm6","eufm7","eufm8","eufm9","eurb10","eurb5","eurb6","eurb7","eurb8","eurb9","eurm5","eurm6","eurm7","eurm8","eurm9","eusb10","eusb5","eusb6","eusb7","eusb8","eusb9","eusm10","eusm5","eusm6","eusm7","eusm8","eusm9","fox in the snow","header 08","header 17","hooge 04","hooge 05","hooge 06","iso 08","italic 08","jpn","kawoszeh","kor","kroeger 04","kroeger 05","kroeger 06","kroeger 07","lcircle10","lcirclew10","lcmss8","lcmssi8","lettau 06","line10","linew10","mixtapeMike","modstmary10","mry","schoenecker 10","smart watch","spinwerad","standard 07","standard 09","type 07","uni 05","w01","wgl4"]}},727:function(t){"use strict";t.exports=JSON.parse('{"attributes":["name","id","placeholder","aria-label","data-label","aria-describedby","title","autocomplete","data-placeholder","data-hint","aria-placeholder","aria-labelledby","formcontrolname","role","data-type","data-field","data-name","inputmode","data-test-id","data-value","data-format"]}')},729:function(t){t.exports={serif:["adobe jenson","adobe text","albertus","aldus","alexandria","algerian","american typewriter","antiqua","arno","aster","aurora","baskerville","bell","bembo","bembo schoolbook","benguiat","berkeley old style","bernhard modern","bodoni","book antiqua","bookman","bordeaux roman","californian fb","calisto","capitals","cambria","cartier","caslon","caslon antique","catull","centaur","century old style","century schoolbook","new century schoolbook","chaparral","charis sil","cheltenham","clearface","cochin","colonna","computer modern","concrete roman","constantia","cooper black","corona","dejavu fonts","ecotype","elephant","espy serif","excelsior","fairfield","ff scala","footlight","freeserif","friz quadrata","garamond","gentium","georgia","gloucester","goudy old style","goudy schoolbook","goudy pro font","granjon","heather","hercules","high tower text","hiroshige","hoefler text","humana serif","imprint","ionic no. 5","janson","jenson","joanna","korinna","kursivschrift","legacy serif","lexicon","liberation fonts","linux libertine","literaturnaya","lucida","melior","memphis","miller","minion","didone","mona lisa","mrs eaves","ms serif","new york","nimbus roman","nps rawlinson roadway","ocr a extended","palatino","perpetua","plantin","plantin schoolbook","playbill","poor richard","rawlinson roadway","renault","requiem","roman","rotis serif","sabon","seagull","sistina","souvenir","stix","stone informal","stone serif","sylfaen","times new roman","times","trajan","trinité","trump mediaeval","utopia","vale type","bitstream vera","versailles","wanted","weiss","wide latin","windsor","xits","apex","archer","athens","city","cholla slab","clarendon","courier","egyptienne","guardian egyptian","lexia","museo slab","rockwell","nilland","skeleton antique","tower","allegro","amiri","athelas","belwe","bookerly","bulmer","caledonia","constructium","copperplate Gothic","dejaVu serif","didot","droid serif","emerson","galliard","iowan old style","itc lubalin graph","ibm plex","ibm plex serif","junicode","literata","lucida bright","rotis","serifa","source serif pro","theano","zilla slab","bitstream charter","roboto slab","university of california old style","berkeley old style","candida","doves","hightower","liberation sans","lucida grande","vera sans","vercetti regular","computer modern sans","rotis ii sans","sherbrooke","tilson","triplex"],"sans-serif":["abadi","agency fb","akzidenz grotesk","aptifer","arial","arial unicode ms","avant garde","avenir","bank gothic","barmeno","bauhaus","bell centennial","bell gothic","benguiat gothic","berlin sans","beteckna","brandon grotesque","cabin","cafeteria","calibri","century gothic","charcoal","chicago","clearface gothic","clearview","co headline","co text","compacta","corbel","ff dax","dotum","droid","dyslexie","ecofont","eras","espy sans","nu sans","eurocrat","eurostile","ff meta","flama","formata","freesans","franklin gothic","frutiger","futura","geneva","gill sans","gill sans schoolbook","gotham","handel gothic","denmark","haettenschweiler","hei","helvetica","helvetica neue","swiss 721","highway gothic","hiroshige sans","hobo","impact","industria","interstate","johnston","kabel","lato","legacy sans","lexia readable","meiryo","microgramma","motorway","ms sans serif","museo sans","myriad","neutraface","neuzeit s","news gothic","nimbus sans l","nina","optima","parisine","pricedown","prima sans","pt sans","rail alphabet","revue","roboto","rotis sans","ff scala sans","segoe","skia","souvenir gothic","stone sans","syntax","tahoma","template gothic","tiresias","trade gothic","transport alphabet","trebuchet ms","trump gothic","tw cen","twentieth century","ubuntu font family","univers","zurich","verdana","virtue","acumin","akzidenz-grotesk","amplitude","andalé sans","antique olive","archivo","austria","itc avant garde","itc avant garde gothic","averta","bahnschrift","barlow","bobcaygeon","breeze sans","cantarell","caractères","cera Pro","cisco sans","adobe clean","clear sans","comic neue","dejaVu sans","din 1451","dosis","drogowskaz","droid sans","dubai","e-ukraine","fira sans","folio","gerstner programm","grand slang","harmonyos sans","ibm plex sans","inter","ge inspira","karrik","klavika","libre franklin","linux biolinum","fs me","ff meta","montserrat","national trust","nokia pure","noto sans","nunito sans","open sans","overpass","oxygen","poppins","proxima nova","radis sans","raleway","Selawik","semplicità","seravek","oneplus","snv","source sans pro","sweden sans","thesis sans","transport","tratex","unica","universalis","vag rounded","whitney","aphont","ff clan","gilroy","greycliff","nobel"],monospace:["andale mono","anonymous","consolas","courierhp","courier new","courierps","fontcraft courier","everson mono","fedra mono","fixed","fixedsys","fixedsys excelsior","inconsolata","hyperfont","letter gothic","magnetic ink character recognition","menlo","miriam fixed","monaco","monofur","monospace","ms gothic","ms mincho","nimbus mono l","ocr-a","ocr-b","orator","ormaxx","pragmatapro","prestige elite","profont","proggy programming fonts","small fonts","sydnie","terminal","tex gyre cursor","um typewriter","william monospace","balloon","brush script","dragonwick","choc","dom casual","mistral","papyrus","tempus sans","amazone","ams euler","apple chancery","aristocrat","bickley script","civitype","codex","edwardian script","forte","french script","kuenstler script","monotype corsiva","old english text mt","palace script","park avenue","scriptina","shelley volante","vivaldi","vladimir script","zapf chancery","zapfino","andy","ashley script","chalkboard","comic sans","cezanne","fontoon","irregularis","jefferson","kristen","lucida handwriting","rage italic","rufscript","scribble","soupbone","tekton","alecko","cinderella","cupola","curlz","magnificat","script","american text","cloister black","fraktur","goudy text","old english text","wedding text","aegyptus","aharoni","aisha","amienne","batak script","chandas","hanacaraka","japanese gothic typeface","jomolhari","kochi font","lontara script","maiola","minchō","mona font","nassim","nastaliq navees","neacademia","perpetua greek","simsun","skolar","skolar devanagari","sundanese unicode","sutturah","tai le valentinium","tengwar","tibetan machine uni","tunga","wadalab","apple symbols","bookshelf symbol 7","braille","commercial pi","corel","erler dingbats","hm phonetic","mathematical pi","morse code","opensymbol","richstyle","symbol","symbolps","wingdings","wingdings 2","wingdings 3","webdings","zapf dingbats","abracadabra","ad lib","allegro","andreas","arnold böcklin","astur","balloon pop outlaw black","banco","beat","braggadocio","broadway","ellington","exablock","exocet","fig script","gigi","harlow solid","harrington","horizon","jim crow","jokerman","juice","lo-type","magneto","megadeth","neuland","peignot","ravie","san francisco","showcard gothic","snap","stencil","umbra","westminster","willow","bagel","lithos","aldhabi","andalus","angsana new","angsanaupc","aparajita","arabic typesetting","arial black","arial narrow","arial rounded mt bold","baskerville old face","batang","batangche","bauhaus 93","bell mt","berlin sans fb","berlin sans fb demi","bernard mt condensed","blackadder itc","bodoni mt","bodoni mt black","bodoni mt condensed","bodoni mt poster compressed","bookman old style","bradley hand itc","britannic bold","browallia new","browalliaupc","brush script mt","buxton sketch","calibri light","calisto mt","cambria math","candara","castellar","century","chiller","colonna mt","comic sans ms","copperplate gothic bold","copperplate gothic light","cordia new","cordiaupc","curlz mt","daunpenh","david","dfkai-sb","dilleniaupc","dokchampa","dotumche","ebrima","edwardian script itc","engravers mt","eras bold itc","eras demi itc","eras light itc","eras medium itc","estrangelo edessa","eucrosiaupc","euphemia","fangsong","felix titling","footlight mt light","franklin gothic book","franklin gothic demi","franklin gothic demi cond","franklin gothic heavy","franklin gothic medium","franklin gothic medium cond","frankruehl","freesiaupc","freestyle script","french script mt","gabriola","gadugi","gautami","gill sans mt","gill sans mt condensed","gill sans mt ext condensed bold","gill sans ultra bold","gill sans ultra bold condensed","gisha","gloucester mt extra condensed","goudy stout","gulim","gulimche","gungsuh","gungsuhche","harlow solid italic","imprint mt shadow","informal roman","irisupc","iskoola pota","jasmineupc","javanese text","juice itc","kaiti","kalinga","kartika","khmer ui","kodchiangupc","kokila","kristen itc","kunstler script","lao ui","latha","leelawadee","leelawadee ui","leelawadee ui semilight","levenim mt","lilyupc","lucida bright","lucida calligraphy","lucida console","lucida fax","lucida sans","lucida sans typewriter","lucida sans unicode","maiandra gd","malgun gothic","mangal","marlett","matura mt script capitals","meiryo ui","microsoft himalaya","microsoft jhenghei","microsoft jhenghei light","microsoft jhenghei ui","microsoft jhenghei ui light","microsoft new tai lue","microsoft phagspa","microsoft sans serif","microsoft tai le","microsoft uighur","microsoft yahei","microsoft yahei light","microsoft yahei ui","microsoft yahei ui light","microsoft yi baiti","mingliu","mingliu-extb","mingliu_hkscs","mingliu_hkscs-extb","miriam","modern","modern no. 20","mongolian baiti","moolboran","ms outlook","ms pgothic","ms pmincho","ms reference sans serif","ms reference specialty","ms ui gothic","mt extra","mv boli","myanmar text","narkisim","niagara engraved","niagara solid","nirmala ui","nirmala ui semilight","nsimsun","nyala","onyx","palace script mt","palatino linotype","parchment","perpetua titling mt","plantagenet cherokee","pmingliu","pmingliu-extb","pristina","raavi","rockwell condensed","rockwell extra bold","rod","sakkal majalla","script mt bold","segoe marker","segoe print","segoe script","segoe ui","segoe ui black","segoe ui emoji","segoe ui light","segoe ui semibold","segoe ui semilight","segoe ui symbol","shonar bangla","shruti","simhei","simplified arabic","simplified arabic fixed","simsun-extb","sitka banner","sitka display","sitka heading","sitka small","sitka subheading","sitka text","sketchflow print","snap itc","system","tempus sans itc","traditional arabic","tw cen mt","tw cen mt condensed","tw cen mt condensed extra bold","urdu typesetting","utsaah","vani","vijaya","viner hand itc","vrinda","yu gothic","yu gothic light","yu mincho","yu mincho demibold","yu mincho light","bitstream vera sans mono","cascadia code","century schoolbook monospace","comic mono","computer modern mono","typewriter","curier","cousine","dejavu sans mono","droid sans mono","envy code r","fantasque sans","fira code","fira mono","freemono","gnu freefont","go mono","hack","ibm monochrome display adapter","ibm mda","ibm plex mono","input","iosevka","jetbrains mono","juliamono","liberation mono","nk57 monospace","noto mono","operator mono","overpass mono","oxygen mono","pt mono","recursive mono","roboto mono","sf mono","source code pro","spleen","terminus","ubuntu mono","victor mono","wumpus mono"],rat_fonts:["Teamviewer11","Teamviewer12","Teamviewer13","Teamviewer14","Teamviewer15"]}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.amdO={},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};!function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,n||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}n.r(r),n.d(r,{BioCatchClient:function(){return m},initializeBioCatchClient:function(){return Zx}});var i=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},r=[{key:"isSupported",value:function(){return!("undefined"==typeof WeakMap||!window.Worker||!window.MutationObserver)}}],(n=null)&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function u(){if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}),!Object.defineProperty||!function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}()){var t=Object.defineProperty;Object.defineProperty=function(e,n,r){if(t)try{return t(e,n,r)}catch(t){}if(e!==Object(e))throw TypeError("Object.defineProperty called on non-object");return Object.prototype.__defineGetter__&&"get"in r&&Object.prototype.__defineGetter__.call(e,n,r.get),Object.prototype.__defineSetter__&&"set"in r&&Object.prototype.__defineSetter__.call(e,n,r.set),"value"in r&&(e[n]=r.value),e}}var e,n,r,o;"function"!=typeof Object.defineProperties&&(Object.defineProperties=function(t,e){if(t!==Object(t))throw TypeError("Object.defineProperties called on non-object");var n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&Object.defineProperty(t,n,e[n]);return t}),"function"!=typeof Object.create&&(Object.create=function(t,e){if("object"!==a(t))throw TypeError();function n(){}n.prototype=t;var r=new n;if(t&&(r.constructor=n),void 0!==e){if(e!==Object(e))throw TypeError();Object.defineProperties(r,e)}return r}),Object.keys||(Object.keys=function(t){if(t!==Object(t))throw TypeError("Object.keys called on non-object");var e,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return n}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,r;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),i=o.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(n=e),r=0;r<i;){var a;r in o&&(a=o[r],t.call(n,a,r,o)),r++}}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw TypeError("Bind must be called on a function");var e=[].slice,n=e.call(arguments,1),r=this,o=function(){return r.apply(this.prototype&&this instanceof i?this:t,n.concat(e.call(arguments)))};function i(){}return i.prototype=r.prototype,o.prototype=new i,o}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.from||(Array.from=(e=Object.prototype.toString,n=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},r=Math.pow(2,53)-1,o=function(t){var e=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e}(t);return Math.min(Math.max(e,0),r)},function(t){var e=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var r,i=arguments.length>1?arguments[1]:void 0;if(void 0!==i){if(!n(i))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(r=arguments[2])}for(var a,u=o(e.length),s=n(this)?Object(new this(u)):new Array(u),c=0;c<u;)a=e[c],s[c]=i?void 0===r?i(a,c):i.call(r,a,c):a,c+=1;return s.length=u,s})),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var r=arguments[1],o=0;o<n;){var i=e[o];if(t.call(r,i,o,e))return i;o++}},configurable:!0,writable:!0}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;var o,i,a=0|e,u=Math.max(a>=0?a:r-Math.abs(a),0);for(;u<r;){if((o=n[u])===(i=t)||"number"==typeof o&&"number"==typeof i&&isNaN(o)&&isNaN(i))return!0;u++}return!1},configurable:!0,writable:!0}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=e.length;--n>=0&&e.item(n)!==this;);return n>-1}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1;r<arguments.length;r++){var o=arguments[r];if(null!=o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])}return n},writable:!0,configurable:!0}),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(!e||e<0?0:+e,t.length)===t}),String.prototype.includes||(String.prototype.includes=function(t,e){if(t instanceof RegExp)throw TypeError("first argument must not be a RegExp");return void 0===e&&(e=0),-1!==this.indexOf(t,e)}),self.MutationObserver=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function c(t){if(!t.WeakMap){var e=Object.prototype.hasOwnProperty,n=function(t,e,n){Object.defineProperty?Object.defineProperty(t,e,{configurable:!0,writable:!0,value:n}):t[e]=n};t.WeakMap=function(){function t(t,n){if(!r(t)||!e.call(t,"_id"))throw new TypeError(n+" method called on incompatible receiver "+s(t))}function o(){return Math.random().toString().substring(2)}function i(){if(void 0===this)throw new TypeError("Constructor WeakMap requires 'new'");if(n(this,"_id","_WeakMap"+"_"+o()+"."+o()),arguments.length>0)throw new TypeError("WeakMap iterable is not supported")}return n(i.prototype,"delete",(function(e){if(t(this,"delete"),!r(e))return!1;var n=e[this._id];return!(!n||n[0]!==e)&&(delete e[this._id],!0)})),n(i.prototype,"get",(function(e){if(t(this,"get"),r(e)){var n=e[this._id];return n&&n[0]===e?n[1]:void 0}})),n(i.prototype,"has",(function(e){if(t(this,"has"),!r(e))return!1;var n=e[this._id];return!(!n||n[0]!==e)})),n(i.prototype,"set",(function(e,o){if(t(this,"set"),!r(e))throw new TypeError("Invalid value used as weak map key");var i=e[this._id];return i&&i[0]===e?(i[1]=o,this):(n(e,this._id,[e,o]),this)})),n(i,"_polyfill",!0),i}()}function r(t){return Object(t)===t}}function l(){!function(t){var e=Date.now?Date.now():+new Date,r=t.performance||{},o=[],i={},a=function(t,e){for(var n=0,r=o.length,i=[];n<r;n++)o[n][t]==e&&i.push(o[n]);return i},u=function(t,e){for(var n,r=o.length;r--;)(n=o[r]).entryType!=t||void 0!==e&&n.name!=e||o.splice(r,1)};r.now||(r.now=r.webkitNow||r.mozNow||r.msNow||function(){return(Date.now?Date.now():+new Date)-e}),r.mark||(r.mark=r.webkitMark||function(t){var e={name:t,entryType:"mark",startTime:r.now(),duration:0};o.push(e),i[t]=e}),r.measure||(r.measure=r.webkitMeasure||function(t,e,n){var a,u;if(void 0!==n&&void 0===i[n])throw new SyntaxError("Failed to execute 'measure' on 'Performance': The mark '"+n+"' does not exist.");if(void 0!==e&&void 0===i[e])throw new SyntaxError("Failed to execute 'measure' on 'Performance': The mark '"+e+"' does not exist.");a=i[e]?i[e].startTime:0,u=i[n]?i[n].startTime:r.now(),o.push({name:t,entryType:"measure",startTime:a,duration:u-a})}),r.getEntriesByType||(r.getEntriesByType=r.webkitGetEntriesByType||function(t){return a("entryType",t)}),r.getEntriesByName||(r.getEntriesByName=r.webkitGetEntriesByName||function(t){return a("name",t)}),r.clearMarks||(r.clearMarks=r.webkitClearMarks||function(t){u("mark",t)}),r.clearMeasures||(r.clearMeasures=r.webkitClearMeasures||function(t){u("measure",t)}),t.performance=r,"function"==typeof define&&n.amdO&&define("performance",[],(function(){return r}))}(self),u(),c("undefined"!=typeof self?self:"undefined"!=typeof window?window:this)}var f=3,d=4;function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,y(r.key),r)}}function y(t){var e=function(t,e){if("object"!=h(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==h(e)?e:e+""}var m=function(){return t=function t(e,n,r,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(),i.isSupported()&&("cdApi"in window?e.autoStart(a):window.bcClient=this._createProxyInterface(e,o,r,n,a))},e=[{key:"_createProxyInterface",value:function(t,e,n,r,o){return{start:function(i,a,u,s){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d,l=e.resolve(i,a,c),f=n.mapStartupConfigurations(l,s);r.attachCdApi(window,u),t.manualStart(f,l,o)},stop:function(){t.stop()},pause:function(){t.pause()},resume:function(){t.resume()},updateCustomerSessionID:function(e){t.updateCustomerSessionID(e)},changeContext:function(e){t.changeContext(e)},startNewSession:function(e){t.startNewSession(e)},setCoordinatesMasking:function(e){t.setCoordinatesMasking(e)}}}}],e&&p(t.prototype,e),n&&p(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g(r.key),r)}}function g(t){var e=function(t,e){if("object"!=v(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==v(e)?e:e+""}var _=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"attachCdApi",value:function(t,e){t.cdApi={_eventListeners:{},onMessage:function(t){var e=this._eventListeners[t.data.type];if(e)for(var n=0;n<e.length;n++)e[n](t.data.event)},listenToEvents:function(){t.addEventListener?t.addEventListener("message",this.onMessage.bind(this),!0):t.attachEvent("onmessage",this.onMessage.bind(this))},getCustomerSessionID:function(t){t(e||void 0)},registerSessionNumberChange:function(e){function n(t){var n=t.data;"SNumNotification"===n.type&&e(n.cdSNum)}t.addEventListener?t.addEventListener("message",n,!0):t.attachEvent("onmessage",n)},addEventListener:function(t,e){var n=this._eventListeners[t];n||(n=[],this._eventListeners[t]=n),n.push(e)},removeEventListener:function(t,e){var n=this._eventListeners[t];if(n)for(var r=0;r<n.length;r++)if(n[r]===e){n.splice(r,1);break}},changeContext:function(e){t.postMessage({type:"ContextChange",context:e},t.location.href)},startNewSession:function(e){t.postMessage({type:"ResetSession",resetReason:"customerApi",csid:e},t.location.href)},pauseCollection:function(){t.postMessage({type:"cdChangeState",toState:"pause"},t.location.href)},resumeCollection:function(){t.postMessage({type:"cdChangeState",toState:"run"},t.location.href)},sendMetadata:function(e){t.postMessage({type:"cdCustomerMetadata",data:e},t.location.href)},setCustomerSessionId:function(e){t.postMessage({type:"cdSetCsid",csid:e},t.location.href)},setCustomerBrand:function(e){t.postMessage({type:"cdSetCustomerBrand",brand:e},t.location.href)}},t.cdApi.listenToEvents()}}],e&&b(t.prototype,e),n&&b(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),S="resetSessionApiThreshold",w="dataWupDispatchRateSettings",E="logWupDispatchRateSettings",k="enableMinifiedLogUri",P="serverCommunicationSettings",T="collectKeyRegionValue",O="crossDomainsList",C="crossDomainsTimeout",M="isMutationObserver",B="isEnabled",j="collectCustomElementAttribute",R="customElementAttribute",A="enableFramesProcessing",I="enableSameSiteNoneAndSecureCookies",x="logAddress",N="isCaptureKeyEvents",L="locationEventsTimeoutMsec",D="heartBeatMessageInterval",F="isMotionAroundTouchEnabled",U="motionPaddingAroundTouchMSec",G="isMotionOnSessionStart",H="motionPaddingOnSessionStartMSec",W="isScrollCollect",V="gyroEventsSamplePeriod",Q="accelerometerEventsSamplePeriod",z="orientationEventsSamplePeriod",K="stateChangeEnabled",q="logLevel",X="enableCustomElementsProcessing",J="keyEventsMaskSpecialChars",Y="collectSelectElementBlurAndFocusEvents",Z="allowedUnmaskedValuesList",$="enableUnmaskedValues",tt="cdsNumExpirationTime",et="enableCoordinatesMasking",nt="maskElementsAttributes",rt="parentElementSelector",ot="childElementWithCustomAttribute",it="elementDataAttribute",at="customButtons",ut="enableAutoElementId",st="agentType",ct="collectionMode",lt="enableWupMessagesHashing",ft="enableStartupCustomerSessionId",dt="offloadFontsCollectionEnabled",ht="mutationMaxChunkSize",pt="mutationChunkDelayMs",yt="passwordIdMaskingList",mt="elementUniqueIDConfiguration",vt="fontCollection";function bt(t){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bt(t)}function gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_t(r.key),r)}}function _t(t){var e=function(t,e){if("object"!=bt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=bt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bt(e)?e:e+""}var St=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._customElementAttribute=e?e[R]:null,this._attributesToMask=e?e[nt]:null,this._keyEventsMaskSpecialChars=e?e[J]:null},(e=[{key:"getCustomElementAttribute",value:function(){return this._customElementAttribute}},{key:"getAttributesToMask",value:function(){return this._attributesToMask}},{key:"getKeyEventsMaskSpecialChars",value:function(){return this._keyEventsMaskSpecialChars}}])&&gt(t.prototype,e),n&&gt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function wt(t){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wt(t)}function Et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kt(r.key),r)}}function kt(t){var e=function(t,e){if("object"!=wt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=wt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wt(e)?e:e+""}var Pt=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._parentElementSelector=e?e[rt]:null,this._childElementWithCustomAttribute=e?e[ot]:null,this._elementDataAttribute=e?e[it]:null,this._customButtons=e?e[at]:null},(e=[{key:"getParentElementSelector",value:function(){return this._parentElementSelector}},{key:"getChildElementWithCustomAttribute",value:function(){return this._childElementWithCustomAttribute}},{key:"getElementDataAttribute",value:function(){return this._elementDataAttribute}},{key:"getCustomButtons",value:function(){return this._customButtons}}])&&Et(t.prototype,e),n&&Et(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),Tt="wupServerURL",Ot="logServerURL",Ct="enableMinifiedLogUri",Mt="enableFramesProcessing",Bt="enableCustomElementsProcessing",jt="enableSameSiteNoneAndSecureCookies",Rt="serverURL",At="customerID",It="useUrlWorker",xt="workerUrl",Nt="clientSettings",Lt="collectionSettings",Dt="elementSettings",Ft="isWupServerURLProxy",Ut="customInputElementSettings",Gt="mode",Ht="enableStartupCustomerSessionId",Wt="mutationMaxChunkSize",Vt="mutationChunkDelayMs",Qt="isFlutterApp",zt="enableMinifiedWupUri",Kt="maxShadowDepth",qt="elementCategories",Xt="elementAttributes",Jt={PRIMARY:"primary",SECONDARY:"secondary"};Object.freeze(Jt);var Yt={FULL:"full",LEAN:"lean"};Object.freeze(Yt);var Zt=10,$t=20,te=30,ee=40;function ne(t){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ne(t)}function re(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ae(r.key),r)}}function ie(t,e,n){return e&&oe(t.prototype,e),n&&oe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ae(t){var e=function(t,e){if("object"!=ne(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ne(e)?e:e+""}var ue=function(){return ie((function t(){re(this,t)}),null,[{key:"setLogger",value:function(t){this._logger=t}},{key:"attachSessionIdentifiers",value:function(t){if(this._logger)return this._logger.attachSessionIdentifiers(t)}},{key:"isDebug",value:function(){if(this._logger)return this._logger.isDebug()}},{key:"error",value:function(t,e){this._logger&&this._logger.error(t,e||null)}},{key:"warn",value:function(t,e){this._logger&&this._logger.warn(t,e||null)}},{key:"trace",value:function(t){this._logger&&this._logger.trace(t)}},{key:"debug",value:function(t){this._logger&&this._logger.debug(t)}},{key:"info",value:function(t){this._logger&&this._logger.info(t)}}])}(),se=function(){return ie((function t(e,n){re(this,t),this._logBridge=e,this._logLevel=n||$t,this._sessionIdentifiers={}}),[{key:"attachSessionIdentifiers",value:function(t){Object.assign(this._sessionIdentifiers,t)}},{key:"trace",value:function(t){this._sendToLogBridge(t,Zt)}},{key:"debug",value:function(t){this._sendToLogBridge(t,Zt)}},{key:"info",value:function(t){this._sendToLogBridge(t,$t)}},{key:"warn",value:function(t,e){this._sendToLogBridge(t,te,e)}},{key:"error",value:function(t,e){this._sendToLogBridge(t,ee,e)}},{key:"isDebug",value:function(){return this._logLevel===Zt}},{key:"updateLogConfig",value:function(t){this._logLevel=t.get(q)||this._logLevel,this._logBridge.setLogLevel(this._logLevel),this._logBridge.clearLogEntriesByLogLevel(this._logLevel)}},{key:"_sendToLogBridge",value:function(t,e,n){e>=this._logLevel&&(n&&n.stack&&(t+=" ;stack: ".concat(n.stack)),this._logBridge.log(t,e,this._sessionIdentifiers))}}])}();function ce(t){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ce(t)}function le(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fe(r.key),r)}}function fe(t){var e=function(t,e){if("object"!=ce(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ce(e)?e:e+""}var de=function(){return t=function t(e){var n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._elementSettings=new St(null==e?void 0:e[Dt]),this._customInputElementSettings=new Pt(null==e?void 0:e[Ut]),this._agentType=this._validateAgentType(null==e||null===(n=e[Gt])||void 0===n?void 0:n.agentType),this._collectionMode=this._setAgentCollectionMode(null==e||null===(r=e[Gt])||void 0===r?void 0:r.collectionMode)},(e=[{key:"getElementSettings",value:function(){return this._elementSettings}},{key:"getCustomInputElementSettings",value:function(){return this._customInputElementSettings}},{key:"getAgentType",value:function(){return this._agentType}},{key:"getAgentMode",value:function(){return this._collectionMode}},{key:"_setAgentCollectionMode",value:function(t){return this._agentType===Jt.PRIMARY?Yt.FULL:this._validateAgentMode(t)}},{key:"_validateAgentType",value:function(t){if(Object.values(Jt).includes(t))return t;var e=Jt.PRIMARY;return void 0!==t&&ue.warn("Invalid agent type: ".concat(t,". Defaulting to ").concat(e," agent type.")),e}},{key:"_validateAgentMode",value:function(t){if(Object.values(Yt).includes(t))return t;var e=Yt.LEAN;return void 0!==t&&ue.warn("Invalid collection mode: ".concat(t,". Defaulting to ").concat(e," collection mode.")),e}}])&&le(t.prototype,e),n&&le(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function he(t){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},he(t)}function pe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ye(r.key),r)}}function ye(t){var e=function(t,e){if("object"!=he(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=he(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==he(e)?e:e+""}var me=function(){return t=function t(e,n,r,o,i,a,u,s,c,l,f,d,h,p,y,m,v,b,g,_,S,w,E){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._wupServerURL=e,this._logServerURL=n,this._enableFramesProcessing=r,this._enableCustomElementsProcessing=o,this._enableSameSiteNoneAndSecureCookies=i,this._useUrlWorker=a,this._workerUrl=u,this._isWupServerURLProxy=s,this._clientSettings=c,this._collectionSettings=l||new de,this._enableStartupCustomerSessionId=f,this._mutationMaxChunkSize=d||0,this._mutationChunkDelayMs=h||100,this._passwordIdMaskingList=p,this._enableUnmaskedValues=y||!1,this._allowedUnmaskedValuesList=m||[],this._enableCoordinatesMasking=v||!1,this._isFlutterApp=b||!1,this._enableMinifiedWupUri=void 0===g||g,this._enableMinifiedLogUri=void 0!==_&&_,this._maxShadowDepth=S||0,this._elementCategories=w,this._elementAttributes=E},(e=[{key:"getWupServerURL",value:function(){return this._wupServerURL}},{key:"getLogServerURL",value:function(){return this._logServerURL}},{key:"isMinifiedLogUriEnabled",value:function(){return this._enableMinifiedLogUri}},{key:"getEnableFramesProcessing",value:function(){return this._enableFramesProcessing}},{key:"getEnableCustomElementsProcessing",value:function(){return this._enableCustomElementsProcessing}},{key:"getEnableSameSiteNoneAndSecureCookies",value:function(){return this._enableSameSiteNoneAndSecureCookies}},{key:"getUseUrlWorker",value:function(){return this._useUrlWorker}},{key:"getWorkerUrl",value:function(){return this._workerUrl}},{key:"getIsWupServerURLProxy",value:function(){return this._isWupServerURLProxy}},{key:"getClientSettings",value:function(){return this._clientSettings}},{key:"getCollectionSettings",value:function(){return this._collectionSettings}},{key:"getEnableStartupCustomerSessionId",value:function(){return this._enableStartupCustomerSessionId}},{key:"getMutationMaxChunkSize",value:function(){return this._mutationMaxChunkSize}},{key:"getMutationChunkDelayMs",value:function(){return this._mutationChunkDelayMs}},{key:"getPasswordIdMaskingList",value:function(){return this._passwordIdMaskingList}},{key:"isUnmaskedValuesEnabled",value:function(){return this._enableUnmaskedValues}},{key:"getAllowedUnmaskedValuesList",value:function(){return this._allowedUnmaskedValuesList}},{key:"isCoordinatesMaskingEnabled",value:function(){return this._enableCoordinatesMasking}},{key:"isFlutterApp",value:function(){return this._isFlutterApp}},{key:"isMinifiedWupUriEnabled",value:function(){return this._enableMinifiedWupUri}},{key:"getMaxShadowDepth",value:function(){return this._maxShadowDepth}},{key:"getElementCategories",value:function(){return this._elementCategories}},{key:"getElementAttributes",value:function(){return this._elementAttributes}}])&&pe(t.prototype,e),n&&pe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function ve(t){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ve(t)}function be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ge(r.key),r)}}function ge(t){var e=function(t,e){if("object"!=ve(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ve(e)?e:e+""}var _e=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"mapStartupConfigurations",value:function(t,e){return new me(t,e[Ot],e[Mt],e[Bt],e[jt],e[It]||!1,e[xt]||"",e[Ft]||!1,e[Nt],new de(e[Lt]),e[Ht],e[Wt]||0,e[Vt]||100,e[yt],e[$]||!1,e[Z]||[],e[et]||!1,e[Qt]||!1,void 0===e[zt]||e[zt],void 0!==e[Ct]&&e[Ct],e[Kt]||0,e[qt],e[Xt])}}])&&be(t.prototype,e),n&&be(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),Se="api/v4/wup",we="client/v3.1/web/wup";function Ee(t){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ee(t)}function ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pe(r.key),r)}}function Pe(t){var e=function(t,e){if("object"!=Ee(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ee(e)?e:e+""}var Te=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"resolve",value:function(t,e,n){var r=new URL(t),o="";return n===d?o="/".concat(Se):n===f&&(o="/".concat(we)),t.includes(we)||t.includes(Se)?n===d&&t.includes(we)&&(r.pathname=o):r.pathname=o,e?r.searchParams.set("cid",e):r.searchParams.has("cid"),r.toString()}}])&&ke(t.prototype,e),n&&ke(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function Oe(t){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oe(t)}function Ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Me(r.key),r)}}function Me(t){var e=function(t,e){if("object"!=Oe(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Oe(e)?e:e+""}var Be,je=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},n=[{key:"create",value:function(){if(self.XMLHttpRequest&&Object.prototype.hasOwnProperty.call(XMLHttpRequest.prototype,"withCredentials"))return new XMLHttpRequest;if(self.XDomainRequest)return new XDomainRequest;if(!self.XMLHttpRequest)throw new Error("There is no supported http request object");return new XMLHttpRequest}}],(e=null)&&Ce(t.prototype,e),n&&Ce(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),Re=60,Ae=1,Ie=44640,xe=1,Ne=0,Le=-1;function De(t){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},De(t)}function Fe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ge(r.key),r)}}function Ue(t,e,n){return(e=Ge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ge(t){var e=function(t,e){if("object"!=De(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=De(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==De(e)?e:e+""}var He,We,Ve,Qe=(He=null,function(t,e,n){var r=function(){return e};if(e.toString().indexOf("[native code]")>-1)n(r());else{var o=0,i=function(){if(He.contentWindow){for(var e=He.contentWindow,a=t.split("."),u=e,s=0;s<a.length;s++)u=u[a[s]];n(u)}else o<45?(setTimeout(i,o),o++):n(r())};He||((He=document.createElement("IFRAME")).setAttribute("sandbox","allow-same-origin"),He.style.display="none",document.documentElement.appendChild(He)),i()}}),ze=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return e=t,r=[{key:"isUndefinedNull",value:function(t){return null==t||void 0===t}},{key:"isBoolean",value:function(t){return"boolean"==typeof t}},{key:"isNumber",value:function(t){return"number"==typeof t}},{key:"addEventListener",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.isPassiveSupported?t.addEventListener(e,n,{capture:r,passive:o,once:i}):t.addEventListener?t.addEventListener(e,n,r):t.attachEvent("on"+e,n)}},{key:"removeEventListener",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.removeEventListener?t.removeEventListener(e,n,r):t.detachEvent("on"+e,n)}},{key:"hasProtocol",value:function(t){return t.toLowerCase().startsWith("http://")||t.toLowerCase().startsWith("https://")}},{key:"clearTextFromNumbers",value:function(t){return t?t.replace(/(\d)/g,"*"):""}},{key:"getDropDownListValues",value:function(t,e){for(var n=[],r=0;r<t.length;r++){var o=t.options[r].text||t.options[r].value||"";n.push(e.maskText(o,t.id))}return n}},{key:"getDocUrl",value:function(){var e=window.location;return e.protocol+"//"+e.hostname+(e.port?":"+e.port:"")+t.clearTextFromNumbers(e.pathname)}},{key:"getHash",value:function(t){for(var e=0,n=0,r=t.length;n<r;n++)e=(e<<5)-e+t.charCodeAt(n),e&=e;return e}},{key:"getTruncatedHash",value:function(t,e){return t?this.murmurhash3(t).toString().substring(e):""}},{key:"getDigestMethod",value:function(t){return"SHA-256"===t&&window.crypto.subtle&&window.crypto.subtle.digest?window.crypto.subtle.digest.bind(crypto.subtle):null}},{key:"digest_sha256",value:function(e){var n=t.getDigestMethod("SHA-256"),r=(new TextEncoder).encode(e);return n?n("SHA-256",r).then((function(t){return Array.from(new Uint8Array(t)).map((function(t){return t.toString(16).padStart(2,"0")})).join("")})).catch((function(){return""})):new Promise((function(t){t("")}))}},{key:"murmurhash3",value:function(t,e){var n,r,o,i,a=3&t.length,u=t.length-a;n=e;var s=3432918353,c=461845907;for(i=0;i<u;)o=255&t.charCodeAt(i)|(255&t.charCodeAt(++i))<<8|(255&t.charCodeAt(++i))<<16|(255&t.charCodeAt(++i))<<24,++i,n=27492+(65535&(r=5*(65535&(n=(n^=o=(65535&(o=(o=(65535&o)*s+(((o>>>16)*s&65535)<<16)&4294967295)<<15|o>>>17))*c+(((o>>>16)*c&65535)<<16)&4294967295)<<13|n>>>19))+((5*(n>>>16)&65535)<<16)&4294967295))+(((r>>>16)+58964&65535)<<16);switch(o=0,a){case 3:o^=(255&t.charCodeAt(i+2))<<16;break;case 2:o^=(255&t.charCodeAt(i+1))<<8;break;case 1:n^=o=(65535&(o=(o=(65535&(o^=255&t.charCodeAt(i)))*s+(((o>>>16)*s&65535)<<16)&4294967295)<<15|o>>>17))*c+(((o>>>16)*c&65535)<<16)&4294967295}return n^=t.length,n=2246822507*(65535&(n^=n>>>16))+((2246822507*(n>>>16)&65535)<<16)&4294967295,n=3266489909*(65535&(n^=n>>>13))+((3266489909*(n>>>16)&65535)<<16)&4294967295,(n^=n>>>16)>>>0}},{key:"generateUUID",value:function(){var e=t.dateNow();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))}},{key:"convertToArrayByMap",value:function(t,e){for(var n=[null],r=0,o=t.length;r<o;r++)n[r+1]=e[t[r]];return n}},{key:"getPostUrl",value:function(t,e,n,r,o,i,a){var u=je.create();u instanceof self.XMLHttpRequest?(u.open(e,t,!0),void 0!==a&&(u.timeout=a),u.withCredentials=!1!==i,"POST"===e&&u.setRequestHeader("Content-Type","application/json; charset=utf-8"),u.onreadystatechange=function(){if(4===u.readyState){if(204===u.status)return;200===u.status?r&&r(u.responseText):o&&o(u.responseText)}},u.ontimeout=function(){o&&o("timeout",n)},u.send(n)):(u.onload=function(){r&&r(u.responseText)},u.onerror=function(){o&&o()},u.onprogress=function(){},u.ontimeout=function(){},u.open(e,t,!0),setTimeout((function(){u.send(n)}),0))}},{key:"minutesToMilliseconds",value:function(t){return 60*t*1e3}},{key:"cutDecimalPointDigits",value:function(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}}],(n=null)&&Fe(e.prototype,n),r&&Fe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r}();Be=ze,Ue(ze,"scriptVersion","2.47.0.3014.9f8dffe"),Ue(ze,"isPassiveSupported",function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}()),Ue(ze,"dateNow",Date.now),Ue(ze,"setZeroTimeout",(We=[],Ve="Window_"+Be.generateUUID(),Be.addEventListener(window,"message",(function(t){t.data===Ve&&(t.stopPropagation&&t.stopPropagation(),t.returnValue&&(t.returnValue=!1),t.cancelBubble&&(t.cancelBubble=!0),We.shift()())}),!0),function(t){We.push(t),window.postMessage(Ve,self.location.href)})),Ue(ze,"asyncCall",(function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o=this;Be.setZeroTimeout((function(){o.apply(t||window,n)}))})),Ue(ze,"StorageUtils",{counter:0,getAndUpdateEventSequenceNumber:function(){return this.counter++},deserialize:function(t){if("string"!=typeof t)return null;try{return JSON.parse(t)}catch(e){return t||null}},getFromLocalStorage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;try{var n=this.deserialize(window.localStorage.getItem(t));return n?n.exp&&Be.dateNow()-n.time>n.exp?(this.removeFromLocalStorage(t),null):void 0===e||e?n.val:n:null}catch(t){return null}},saveToLocalStorage:function(t,e,n){var r={val:e};n&&(r.exp=n,r.time=Be.dateNow());try{window.localStorage.setItem(t,JSON.stringify(r))}catch(t){return null}return r},removeFromLocalStorage:function(t){try{window.localStorage.removeItem(t)}catch(t){return null}},setExpirationInLocalStorage:function(t,e){var n=this.getFromLocalStorage(t);return""===n||null===n?xe:this.saveToLocalStorage(t,n,e)?Ne:Le},getFromSessionStorage:function(t){try{var e=this.deserialize(window.sessionStorage.getItem(t));return e||null}catch(t){return null}},saveToSessionStorage:function(t,e){try{return e?(window.sessionStorage.setItem(t,JSON.stringify(e)),e):window.sessionStorage.removeItem(t)}catch(t){return null}},removeFromSessionStorage:function(t){try{window.sessionStorage.removeItem(t)}catch(t){return null}},getCookie:function(t){var e=new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(document.cookie);return e?decodeURIComponent(e[1]):""},setCookie:function(t,e,n,r){var o="";if(n){var i=new Date;i.setTime(i.getTime()+n),o="; expires="+i.toUTCString()}for(var a=0,u=location.hostname,s=u.split("."),c="",l=!1;a<=s.length-1&&!l;)"localhost"===(u=s.slice(-1-++a).join("."))?c="":""!==u&&(c="; domain=."+u),l=this.setCookieWithAttributes(t,e,o,c,r);return l||(c="",l=this.setCookieWithAttributes(t,e,o,c,r)),l},setCookieWithAttributes:function(t,e,n,r,o){var i=encodeURIComponent(t)+"="+encodeURIComponent(e)+n+r+"; path=/;";return document.cookie=o?i+" ".concat("SameSite=None;"," ").concat("Secure"):i,this.getCookie(t)===e},setExpirationInCookie:function(t,e){var n=this.getCookie(t);return""===n||null===n?xe:this.setCookie(t,n,e)?Ne:Le},removeCookie:function(t){try{document.cookie=t+"=; Max-Age=0"}catch(t){return null}},validateBcId:function(t){return/^([0-9]{13,}-)?[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t)?t:null}}),Ue(ze,"getNativeWindowFn",Qe),Ue(ze,"JQueryUtils",{isJQueryAvailable:function(){return void 0!==window.jQuery},addEventListener:function(t,e,n){jQuery(t).on(e,n)},removeEventListener:function(t,e,n){jQuery(t).off(e,n)}}),Date.now?Qe("Date.now",Date.now,(function(t){ze.dateNow=t})):ze.dateNow=function(){return(new Date).getTime()};var Ke="startNewSessionCommand",qe="resumeSessionCommand",Xe="changeContextCommand",Je="updateCsidCommand",Ye="updatePsidCommand",Ze="updateLogUrl",$e="sendDataCommand",tn="sendLogCommand",en="updateBrandCommand",nn="stateUpdateFromStorage",rn="setAgentTypeCommand",on="updateAgentIdCommand",an="enableWupMessagesHashingCommand",un="updateSDKState",sn={stopped:"stopped",starting:"starting",started:"started",paused:"paused",faulted:"faulted"},cn=n(512),ln=n.n(cn);function fn(){return ln()('/*! For license information please see worker.js.LICENSE.txt */\n!function(){var t={9:function(t,e,r){var n;t.exports=(n=r(21),function(t){var e=n,r=e.lib,i=r.WordArray,o=r.Hasher,s=e.algo,a=[],u=[];!function(){function e(e){for(var r=t.sqrt(e),n=2;n<=r;n++)if(!(e%n))return!1;return!0}function r(t){return 4294967296*(t-(0|t))|0}for(var n=2,i=0;i<64;)e(n)&&(i<8&&(a[i]=r(t.pow(n,.5))),u[i]=r(t.pow(n,1/3)),i++),n++}();var f=[],c=s.SHA256=o.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],c=r[5],l=r[6],h=r[7],d=0;d<64;d++){if(d<16)f[d]=0|t[e+d];else{var p=f[d-15],y=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,v=f[d-2],g=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;f[d]=y+f[d-7]+g+f[d-16]}var m=n&i^n&o^i&o,b=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),_=h+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&c^~a&l)+u[d]+f[d];h=l,l=c,c=a,a=s+_|0,s=o,o=i,i=n,n=_+(b+m)|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+a|0,r[5]=r[5]+c|0,r[6]=r[6]+l|0,r[7]=r[7]+h|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return r[i>>>5]|=128<<24-i%32,r[14+(i+64>>>9<<4)]=t.floor(n/4294967296),r[15+(i+64>>>9<<4)]=n,e.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=o._createHelper(c),e.HmacSHA256=o._createHmacHelper(c)}(Math),n.SHA256)},19:function(t,e,r){var n,i,o,s,a,u,f,c,l;t.exports=(l=r(21),r(9),r(25),i=(n=l).lib,o=i.Base,s=i.WordArray,a=n.algo,u=a.SHA256,f=a.HMAC,c=a.PBKDF2=o.extend({cfg:o.extend({keySize:4,hasher:u,iterations:25e4}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var r=this.cfg,n=f.create(r.hasher,t),i=s.create(),o=s.create([1]),a=i.words,u=o.words,c=r.keySize,l=r.iterations;a.length<c;){var h=n.update(e).finalize(o);n.reset();for(var d=h.words,p=d.length,y=h,v=1;v<l;v++){y=n.finalize(y),n.reset();for(var g=y.words,m=0;m<p;m++)d[m]^=g[m]}i.concat(h),u[0]++}return i.sigBytes=4*c,i}}),n.PBKDF2=function(t,e,r){return c.create(r).compute(t,e)},l.PBKDF2)},21:function(t,e,r){var n;t.exports=(n=n||function(t,e){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==r.g&&r.g.crypto&&(n=r.g.crypto),!n)try{n=r(477)}catch(t){}var i=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function t(){}return function(e){var r;return t.prototype=e,r=new t,t.prototype=null,r}}(),s={},a=s.lib={},u=a.Base={extend:function(t){var e=o(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},f=a.WordArray=u.extend({init:function(t,r){t=this.words=t||[],this.sigBytes=r!=e?r:4*t.length},toString:function(t){return(t||l).stringify(this)},concat:function(t){var e=this.words,r=t.words,n=this.sigBytes,i=t.sigBytes;if(this.clamp(),n%4)for(var o=0;o<i;o++){var s=r[o>>>2]>>>24-o%4*8&255;e[n+o>>>2]|=s<<24-(n+o)%4*8}else for(var a=0;a<i;a+=4)e[n+a>>>2]=r[a>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,r=this.sigBytes;e[r>>>2]&=4294967295<<32-r%4*8,e.length=t.ceil(r/4)},clone:function(){var t=u.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],r=0;r<t;r+=4)e.push(i());return new f.init(e,t)}}),c=s.enc={},l=c.Hex={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;i<r;i++){var o=e[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new f.init(r,e/2)}},h=c.Latin1={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;i<r;i++){var o=e[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new f.init(r,e)}},d=c.Utf8={stringify:function(t){try{return decodeURIComponent(escape(h.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return h.parse(unescape(encodeURIComponent(t)))}},p=a.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=d.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var r,n=this._data,i=n.words,o=n.sigBytes,s=this.blockSize,a=o/(4*s),u=(a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*s,c=t.min(4*u,o);if(u){for(var l=0;l<u;l+=s)this._doProcessBlock(i,l);r=i.splice(0,u),n.sigBytes-=c}return new f.init(r,c)},clone:function(){var t=u.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),y=(a.Hasher=p.extend({cfg:u.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,r){return new t.init(r).finalize(e)}},_createHmacHelper:function(t){return function(e,r){return new y.HMAC.init(t,r).finalize(e)}}}),s.algo={});return s}(Math),n)},25:function(t,e,r){var n,i,o,s;t.exports=(n=r(21),o=(i=n).lib.Base,s=i.enc.Utf8,void(i.algo.HMAC=o.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=s.parse(e));var r=t.blockSize,n=4*r;e.sigBytes>n&&(e=t.finalize(e)),e.clamp();for(var i=this._oKey=e.clone(),o=this._iKey=e.clone(),a=i.words,u=o.words,f=0;f<r;f++)a[f]^=1549556828,u[f]^=909522486;i.sigBytes=o.sigBytes=n,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,r=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(r))}})))},56:function(t,e,r){var n;t.exports=(n=r(21),function(){var t=n,e=t.lib,r=e.WordArray,i=e.Hasher,o=t.algo,s=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),a=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),c=r.create([0,1518500249,1859775393,2400959708,2840853838]),l=r.create([1352829926,1548603684,1836072691,2053994217,0]),h=o.RIPEMD160=i.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r=0;r<16;r++){var n=e+r,i=t[n];t[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o,h,b,_,w,S,k,E,x,B,C,R=this._hash.words,P=c.words,A=l.words,I=s.words,T=a.words,M=u.words,O=f.words;for(S=o=R[0],k=h=R[1],E=b=R[2],x=_=R[3],B=w=R[4],r=0;r<80;r+=1)C=o+t[e+I[r]]|0,C+=r<16?d(h,b,_)+P[0]:r<32?p(h,b,_)+P[1]:r<48?y(h,b,_)+P[2]:r<64?v(h,b,_)+P[3]:g(h,b,_)+P[4],C=(C=m(C|=0,M[r]))+w|0,o=w,w=_,_=m(b,10),b=h,h=C,C=S+t[e+T[r]]|0,C+=r<16?g(k,E,x)+A[0]:r<32?v(k,E,x)+A[1]:r<48?y(k,E,x)+A[2]:r<64?p(k,E,x)+A[3]:d(k,E,x)+A[4],C=(C=m(C|=0,O[r]))+B|0,S=B,B=x,x=m(E,10),E=k,k=C;C=R[1]+b+x|0,R[1]=R[2]+_+B|0,R[2]=R[3]+w+S|0,R[3]=R[4]+o+k|0,R[4]=R[0]+h+E|0,R[0]=C},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;e[n>>>5]|=128<<24-n%32,e[14+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(e.length+1),this._process();for(var i=this._hash,o=i.words,s=0;s<5;s++){var a=o[s];o[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return i},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});function d(t,e,r){return t^e^r}function p(t,e,r){return t&e|~t&r}function y(t,e,r){return(t|~e)^r}function v(t,e,r){return t&r|e&~r}function g(t,e,r){return t^(e|~r)}function m(t,e){return t<<e|t>>>32-e}t.RIPEMD160=i._createHelper(h),t.HmacRIPEMD160=i._createHmacHelper(h)}(Math),n.RIPEMD160)},73:function(t,e,r){var n;t.exports=(n=r(21),r(165),n.pad.AnsiX923={pad:function(t,e){var r=t.sigBytes,n=4*e,i=n-r%n,o=r+i-1;t.clamp(),t.words[o>>>2]|=i<<24-o%4*8,t.sigBytes+=i},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},n.pad.Ansix923)},124:function(t,e,r){var n;t.exports=(n=r(21),r(165),n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding)},128:function(t,e,r){var n;t.exports=(n=r(21),r(754),r(636),r(506),r(165),function(){var t=n,e=t.lib.BlockCipher,r=t.algo;const i=16,o=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],s=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var a={pbox:[],sbox:[]};function u(t,e){let r=e>>24&255,n=e>>16&255,i=e>>8&255,o=255&e,s=t.sbox[0][r]+t.sbox[1][n];return s^=t.sbox[2][i],s+=t.sbox[3][o],s}function f(t,e,r){let n,o=e,s=r;for(let e=0;e<i;++e)o^=t.pbox[e],s=u(t,o)^s,n=o,o=s,s=n;return n=o,o=s,s=n,s^=t.pbox[i],o^=t.pbox[i+1],{left:o,right:s}}function c(t,e,r){let n,o=e,s=r;for(let e=i+1;e>1;--e)o^=t.pbox[e],s=u(t,o)^s,n=o,o=s,s=n;return n=o,o=s,s=n,s^=t.pbox[1],o^=t.pbox[0],{left:o,right:s}}function l(t,e,r){for(let e=0;e<4;e++){t.sbox[e]=[];for(let r=0;r<256;r++)t.sbox[e][r]=s[e][r]}let n=0;for(let s=0;s<i+2;s++)t.pbox[s]=o[s]^e[n],n++,n>=r&&(n=0);let a=0,u=0,c=0;for(let e=0;e<i+2;e+=2)c=f(t,a,u),a=c.left,u=c.right,t.pbox[e]=a,t.pbox[e+1]=u;for(let e=0;e<4;e++)for(let r=0;r<256;r+=2)c=f(t,a,u),a=c.left,u=c.right,t.sbox[e][r]=a,t.sbox[e][r+1]=u;return!0}var h=r.Blowfish=e.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var t=this._keyPriorReset=this._key,e=t.words,r=t.sigBytes/4;l(a,e,r)}},encryptBlock:function(t,e){var r=f(a,t[e],t[e+1]);t[e]=r.left,t[e+1]=r.right},decryptBlock:function(t,e){var r=c(a,t[e],t[e+1]);t[e]=r.left,t[e+1]=r.right},blockSize:2,keySize:4,ivSize:2});t.Blowfish=e._createHelper(h)}(),n.Blowfish)},155:function(t,e,r){var n;t.exports=(n=r(21),r(165),n.pad.ZeroPadding={pad:function(t,e){var r=4*e;t.clamp(),t.sigBytes+=r-(t.sigBytes%r||r)},unpad:function(t){var e=t.words,r=t.sigBytes-1;for(r=t.sigBytes-1;r>=0;r--)if(e[r>>>2]>>>24-r%4*8&255){t.sigBytes=r+1;break}}},n.pad.ZeroPadding)},165:function(t,e,r){var n;t.exports=(n=r(21),r(506),void(n.lib.Cipher||function(t){var e=n,r=e.lib,i=r.Base,o=r.WordArray,s=r.BufferedBlockAlgorithm,a=e.enc,u=(a.Utf8,a.Base64),f=e.algo.EvpKDF,c=r.Cipher=s.extend({cfg:i.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,r){this.cfg=this.cfg.extend(r),this._xformMode=t,this._key=e,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?b:g}return function(e){return{encrypt:function(r,n,i){return t(n).encrypt(e,r,n,i)},decrypt:function(r,n,i){return t(n).decrypt(e,r,n,i)}}}}()}),l=(r.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),e.mode={}),h=r.BlockCipherMode=i.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),d=l.CBC=function(){var e=h.extend();function r(e,r,n){var i,o=this._iv;o?(i=o,this._iv=t):i=this._prevBlock;for(var s=0;s<n;s++)e[r+s]^=i[s]}return e.Encryptor=e.extend({processBlock:function(t,e){var n=this._cipher,i=n.blockSize;r.call(this,t,e,i),n.encryptBlock(t,e),this._prevBlock=t.slice(e,e+i)}}),e.Decryptor=e.extend({processBlock:function(t,e){var n=this._cipher,i=n.blockSize,o=t.slice(e,e+i);n.decryptBlock(t,e),r.call(this,t,e,i),this._prevBlock=o}}),e}(),p=(e.pad={}).Pkcs7={pad:function(t,e){for(var r=4*e,n=r-t.sigBytes%r,i=n<<24|n<<16|n<<8|n,s=[],a=0;a<n;a+=4)s.push(i);var u=o.create(s,n);t.concat(u)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},y=(r.BlockCipher=c.extend({cfg:c.cfg.extend({mode:d,padding:p}),reset:function(){var t;c.reset.call(this);var e=this.cfg,r=e.iv,n=e.mode;this._xformMode==this._ENC_XFORM_MODE?t=n.createEncryptor:(t=n.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==t?this._mode.init(this,r&&r.words):(this._mode=t.call(n,this,r&&r.words),this._mode.__creator=t)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t,e=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(e.pad(this._data,this.blockSize),t=this._process(!0)):(t=this._process(!0),e.unpad(t)),t},blockSize:4}),r.CipherParams=i.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}})),v=(e.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,r=t.salt;return(r?o.create([1398893684,1701076831]).concat(r).concat(e):e).toString(u)},parse:function(t){var e,r=u.parse(t),n=r.words;return 1398893684==n[0]&&1701076831==n[1]&&(e=o.create(n.slice(2,4)),n.splice(0,4),r.sigBytes-=16),y.create({ciphertext:r,salt:e})}},g=r.SerializableCipher=i.extend({cfg:i.extend({format:v}),encrypt:function(t,e,r,n){n=this.cfg.extend(n);var i=t.createEncryptor(r,n),o=i.finalize(e),s=i.cfg;return y.create({ciphertext:o,key:r,iv:s.iv,algorithm:t,mode:s.mode,padding:s.padding,blockSize:t.blockSize,formatter:n.format})},decrypt:function(t,e,r,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),t.createDecryptor(r,n).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),m=(e.kdf={}).OpenSSL={execute:function(t,e,r,n,i){if(n||(n=o.random(8)),i)s=f.create({keySize:e+r,hasher:i}).compute(t,n);else var s=f.create({keySize:e+r}).compute(t,n);var a=o.create(s.words.slice(e),4*r);return s.sigBytes=4*e,y.create({key:s,iv:a,salt:n})}},b=r.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:m}),encrypt:function(t,e,r,n){var i=(n=this.cfg.extend(n)).kdf.execute(r,t.keySize,t.ivSize,n.salt,n.hasher);n.iv=i.iv;var o=g.encrypt.call(this,t,e,i.key,n);return o.mixIn(i),o},decrypt:function(t,e,r,n){n=this.cfg.extend(n),e=this._parse(e,n.format);var i=n.kdf.execute(r,t.keySize,t.ivSize,e.salt,n.hasher);return n.iv=i.iv,g.decrypt.call(this,t,e,i.key,n)}})}()))},169:function(t,e,r){var n;t.exports=(n=r(21),r(165),n.mode.CFB=function(){var t=n.lib.BlockCipherMode.extend();function e(t,e,r,n){var i,o=this._iv;o?(i=o.slice(0),this._iv=void 0):i=this._prevBlock,n.encryptBlock(i,0);for(var s=0;s<r;s++)t[e+s]^=i[s]}return t.Encryptor=t.extend({processBlock:function(t,r){var n=this._cipher,i=n.blockSize;e.call(this,t,r,i,n),this._prevBlock=t.slice(r,r+i)}}),t.Decryptor=t.extend({processBlock:function(t,r){var n=this._cipher,i=n.blockSize,o=t.slice(r,r+i);e.call(this,t,r,i,n),this._prevBlock=o}}),t}(),n.mode.CFB)},193:function(t,e,r){var n;t.exports=(n=r(21),r(754),r(636),r(506),r(165),function(){var t=n,e=t.lib.StreamCipher,r=t.algo,i=r.RC4=e.extend({_doReset:function(){for(var t=this._key,e=t.words,r=t.sigBytes,n=this._S=[],i=0;i<256;i++)n[i]=i;i=0;for(var o=0;i<256;i++){var s=i%r,a=e[s>>>2]>>>24-s%4*8&255;o=(o+n[i]+a)%256;var u=n[i];n[i]=n[o],n[o]=u}this._i=this._j=0},_doProcessBlock:function(t,e){t[e]^=o.call(this)},keySize:8,ivSize:0});function o(){for(var t=this._S,e=this._i,r=this._j,n=0,i=0;i<4;i++){r=(r+t[e=(e+1)%256])%256;var o=t[e];t[e]=t[r],t[r]=o,n|=t[(t[e]+t[r])%256]<<24-8*i}return this._i=e,this._j=r,n}t.RC4=e._createHelper(i);var s=r.RC4Drop=i.extend({cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var t=this.cfg.drop;t>0;t--)o.call(this)}});t.RC4Drop=e._createHelper(s)}(),n.RC4)},240:function(t,e,r){var n;t.exports=(n=r(21),function(t){var e=n,r=e.lib,i=r.Base,o=r.WordArray,s=e.x64={};s.Word=i.extend({init:function(t,e){this.high=t,this.low=e}}),s.WordArray=i.extend({init:function(e,r){e=this.words=e||[],this.sigBytes=r!=t?r:8*e.length},toX32:function(){for(var t=this.words,e=t.length,r=[],n=0;n<e;n++){var i=t[n];r.push(i.high),r.push(i.low)}return o.create(r,this.sigBytes)},clone:function(){for(var t=i.clone.call(this),e=t.words=this.words.slice(0),r=e.length,n=0;n<r;n++)e[n]=e[n].clone();return t}})}(),n)},273:function(t,e,r){var n,i,o,s;function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}s=function(){return function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){if(o)return o(s,!0);var u=new Error("Cannot find module \'"+s+"\'");throw u.code="MODULE_NOT_FOUND",u}var f=r[s]={exports:{}};e[s][0].call(f.exports,(function(t){var r=e[s][1][t];return i(r||t)}),f,f.exports,t,e,r,n)}return r[s].exports}for(var o=void 0,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){r.encode=t("./encode").encode,r.decode=t("./decode").decode,r.Encoder=t("./encoder").Encoder,r.Decoder=t("./decoder").Decoder,r.createCodec=t("./ext").createCodec,r.codec=t("./codec").codec},{"./codec":10,"./decode":12,"./decoder":13,"./encode":15,"./encoder":16,"./ext":20}],2:[function(t,e,r){(function(t){function r(t){return t&&t.isBuffer&&t}e.exports=r(void 0!==t&&t)||r(this.Buffer)||r("undefined"!=typeof window&&window.Buffer)||this.Buffer}).call(this,t("buffer").Buffer)},{buffer:29}],3:[function(t,e,r){r.copy=function(t,e,r,n){var i;r||(r=0),n||0===n||(n=this.length),e||(e=0);var o=n-r;if(t===this&&r<e&&e<n)for(i=o-1;i>=0;i--)t[i+e]=this[i+r];else for(i=0;i<o;i++)t[i+e]=this[i+r];return o},r.toString=function(t,e,r){var n=this,i=0|e;r||(r=n.length);for(var o="",s=0;i<r;)(s=n[i++])<128?o+=String.fromCharCode(s):(192==(224&s)?s=(31&s)<<6|63&n[i++]:224==(240&s)?s=(15&s)<<12|(63&n[i++])<<6|63&n[i++]:240==(248&s)&&(s=(7&s)<<18|(63&n[i++])<<12|(63&n[i++])<<6|63&n[i++]),s>=65536?(s-=65536,o+=String.fromCharCode((s>>>10)+55296,56320+(1023&s))):o+=String.fromCharCode(s));return o},r.write=function(t,e){for(var r=this,n=e||(e|=0),i=t.length,o=0,s=0;s<i;)(o=t.charCodeAt(s++))<128?r[n++]=o:o<2048?(r[n++]=192|o>>>6,r[n++]=128|63&o):o<55296||o>57343?(r[n++]=224|o>>>12,r[n++]=128|o>>>6&63,r[n++]=128|63&o):(o=65536+(o-55296<<10|t.charCodeAt(s++)-56320),r[n++]=240|o>>>18,r[n++]=128|o>>>12&63,r[n++]=128|o>>>6&63,r[n++]=128|63&o);return n-e}},{}],4:[function(t,e,r){function n(t){return new Array(t)}var i=t("./bufferish");(r=e.exports=n(0)).alloc=n,r.concat=i.concat,r.from=function(t){if(!i.isBuffer(t)&&i.isView(t))t=i.Uint8Array.from(t);else if(i.isArrayBuffer(t))t=new Uint8Array(t);else{if("string"==typeof t)return i.from.call(r,t);if("number"==typeof t)throw new TypeError(\'"value" argument must not be a number\')}return Array.prototype.slice.call(t)}},{"./bufferish":8}],5:[function(t,e,r){function n(t){return new o(t)}var i=t("./bufferish"),o=i.global;(r=e.exports=i.hasBuffer?n(0):[]).alloc=i.hasBuffer&&o.alloc||n,r.concat=i.concat,r.from=function(t){if(!i.isBuffer(t)&&i.isView(t))t=i.Uint8Array.from(t);else if(i.isArrayBuffer(t))t=new Uint8Array(t);else{if("string"==typeof t)return i.from.call(r,t);if("number"==typeof t)throw new TypeError(\'"value" argument must not be a number\')}return o.from&&1!==o.from.length?o.from(t):new o(t)}},{"./bufferish":8}],6:[function(t,e,r){function n(t,e,r,n){var a=s.isBuffer(this),u=s.isBuffer(t);if(a&&u)return this.copy(t,e,r,n);if(f||a||u||!s.isView(this)||!s.isView(t))return o.copy.call(this,t,e,r,n);var c=r||null!=n?i.call(this,r,n):this;return t.set(c,e),c.length}function i(t,e){var r=this.slice||!f&&this.subarray;if(r)return r.call(this,t,e);var i=s.alloc.call(this,e-t);return n.call(this,i,0,t,e),i}var o=t("./buffer-lite");r.copy=n,r.slice=i,r.toString=function(t,e,r){return(!u&&s.isBuffer(this)?this.toString:o.toString).apply(this,arguments)},r.write=function(t){return function(){return(this[t]||o[t]).apply(this,arguments)}}("write");var s=t("./bufferish"),a=s.global,u=s.hasBuffer&&"TYPED_ARRAY_SUPPORT"in a,f=u&&!a.TYPED_ARRAY_SUPPORT},{"./buffer-lite":3,"./bufferish":8}],7:[function(t,e,r){function n(t){return new Uint8Array(t)}var i=t("./bufferish");(r=e.exports=i.hasArrayBuffer?n(0):[]).alloc=n,r.concat=i.concat,r.from=function(t){if(i.isView(t)){var e=t.byteOffset,n=t.byteLength;(t=t.buffer).byteLength!==n&&(t.slice?t=t.slice(e,e+n):(t=new Uint8Array(t)).byteLength!==n&&(t=Array.prototype.slice.call(t,e,e+n)))}else{if("string"==typeof t)return i.from.call(r,t);if("number"==typeof t)throw new TypeError(\'"value" argument must not be a number\')}return new Uint8Array(t)}},{"./bufferish":8}],8:[function(t,e,r){function n(t){return o(this).alloc(t)}function i(t){var e=3*t.length,r=n.call(this,e),i=g.write.call(r,t);return e!==i&&(r=g.slice.call(r,0,i)),r}function o(t){return h(t)?y:d(t)?v:l(t)?p:f?y:c?v:p}function s(){return!1}function a(t,e){return t="[object "+t+"]",function(r){return null!=r&&{}.toString.call(e?r[e]:r)===t}}var u=r.global=t("./buffer-global"),f=r.hasBuffer=u&&!!u.isBuffer,c=r.hasArrayBuffer="undefined"!=typeof ArrayBuffer,l=r.isArray=t("isarray");r.isArrayBuffer=c?function(t){return t instanceof ArrayBuffer||m(t)}:s;var h=r.isBuffer=f?u.isBuffer:s,d=r.isView=c?ArrayBuffer.isView||a("ArrayBuffer","buffer"):s;r.alloc=n,r.concat=function(t,e){e||(e=0,Array.prototype.forEach.call(t,(function(t){e+=t.length})));var i=this!==r&&this||t[0],o=n.call(i,e),s=0;return Array.prototype.forEach.call(t,(function(t){s+=g.copy.call(t,o,s)})),o},r.from=function(t){return"string"==typeof t?i.call(this,t):o(this).from(t)};var p=r.Array=t("./bufferish-array"),y=r.Buffer=t("./bufferish-buffer"),v=r.Uint8Array=t("./bufferish-uint8array"),g=r.prototype=t("./bufferish-proto"),m=a("ArrayBuffer")},{"./buffer-global":2,"./bufferish-array":4,"./bufferish-buffer":5,"./bufferish-proto":6,"./bufferish-uint8array":7,isarray:34}],9:[function(t,e,r){function n(t){return this instanceof n?(this.options=t,void this.init()):new n(t)}function i(t,e){return t&&e?function(){return t.apply(this,arguments),e.apply(this,arguments)}:t||e}function o(t){return new n(t)}var s=t("isarray");r.createCodec=o,r.install=function(t){for(var e in t)n.prototype[e]=i(n.prototype[e],t[e])},r.filter=function(t){return s(t)?function(t){function e(t,e){return e(t)}return t=t.slice(),function(r){return t.reduce(e,r)}}(t):t};var a=t("./bufferish");n.prototype.init=function(){var t=this.options;return t&&t.uint8array&&(this.bufferish=a.Uint8Array),this},r.preset=o({preset:!0})},{"./bufferish":8,isarray:34}],10:[function(t,e,r){t("./read-core"),t("./write-core"),r.codec={preset:t("./codec-base").preset}},{"./codec-base":9,"./read-core":22,"./write-core":25}],11:[function(t,e,r){function n(t){if(!(this instanceof n))return new n(t);if(t&&(this.options=t,t.codec)){var e=this.codec=t.codec;e.bufferish&&(this.bufferish=e.bufferish)}}r.DecodeBuffer=n;var i=t("./read-core").preset;t("./flex-buffer").FlexDecoder.mixin(n.prototype),n.prototype.codec=i,n.prototype.fetch=function(){return this.codec.decode(this)}},{"./flex-buffer":21,"./read-core":22}],12:[function(t,e,r){r.decode=function(t,e){var r=new n(e);return r.write(t),r.read()};var n=t("./decode-buffer").DecodeBuffer},{"./decode-buffer":11}],13:[function(t,e,r){function n(t){return this instanceof n?void o.call(this,t):new n(t)}r.Decoder=n;var i=t("event-lite"),o=t("./decode-buffer").DecodeBuffer;n.prototype=new o,i.mixin(n.prototype),n.prototype.decode=function(t){arguments.length&&this.write(t),this.flush()},n.prototype.push=function(t){this.emit("data",t)},n.prototype.end=function(t){this.decode(t),this.emit("end")}},{"./decode-buffer":11,"event-lite":31}],14:[function(t,e,r){function n(t){if(!(this instanceof n))return new n(t);if(t&&(this.options=t,t.codec)){var e=this.codec=t.codec;e.bufferish&&(this.bufferish=e.bufferish)}}r.EncodeBuffer=n;var i=t("./write-core").preset;t("./flex-buffer").FlexEncoder.mixin(n.prototype),n.prototype.codec=i,n.prototype.write=function(t){this.codec.encode(this,t)}},{"./flex-buffer":21,"./write-core":25}],15:[function(t,e,r){r.encode=function(t,e){var r=new n(e);return r.write(t),r.read()};var n=t("./encode-buffer").EncodeBuffer},{"./encode-buffer":14}],16:[function(t,e,r){function n(t){return this instanceof n?void o.call(this,t):new n(t)}r.Encoder=n;var i=t("event-lite"),o=t("./encode-buffer").EncodeBuffer;n.prototype=new o,i.mixin(n.prototype),n.prototype.encode=function(t){this.write(t),this.emit("data",this.read())},n.prototype.end=function(t){arguments.length&&this.encode(t),this.flush(),this.emit("end")}},{"./encode-buffer":14,"event-lite":31}],17:[function(t,e,r){r.ExtBuffer=function t(e,r){return this instanceof t?(this.buffer=n.from(e),void(this.type=r)):new t(e,r)};var n=t("./bufferish")},{"./bufferish":8}],18:[function(t,e,r){function n(e){return a||(a=t("./encode").encode),a(e)}function i(t){return t.valueOf()}function o(t){(t=RegExp.prototype.toString.call(t).split("/")).shift();var e=[t.pop()];return e.unshift(t.join("/")),e}function s(t){var e={};for(var r in l)e[r]=t[r];return e}r.setExtPackers=function(t){t.addExtPacker(14,Error,[s,n]),t.addExtPacker(1,EvalError,[s,n]),t.addExtPacker(2,RangeError,[s,n]),t.addExtPacker(3,ReferenceError,[s,n]),t.addExtPacker(4,SyntaxError,[s,n]),t.addExtPacker(5,TypeError,[s,n]),t.addExtPacker(6,URIError,[s,n]),t.addExtPacker(10,RegExp,[o,n]),t.addExtPacker(11,Boolean,[i,n]),t.addExtPacker(12,String,[i,n]),t.addExtPacker(13,Date,[Number,n]),t.addExtPacker(15,Number,[i,n]),"undefined"!=typeof Uint8Array&&(t.addExtPacker(17,Int8Array,c),t.addExtPacker(18,Uint8Array,c),t.addExtPacker(19,Int16Array,c),t.addExtPacker(20,Uint16Array,c),t.addExtPacker(21,Int32Array,c),t.addExtPacker(22,Uint32Array,c),t.addExtPacker(23,Float32Array,c),"undefined"!=typeof Float64Array&&t.addExtPacker(24,Float64Array,c),"undefined"!=typeof Uint8ClampedArray&&t.addExtPacker(25,Uint8ClampedArray,c),t.addExtPacker(26,ArrayBuffer,c),t.addExtPacker(29,DataView,c)),u.hasBuffer&&t.addExtPacker(27,f,u.from)};var a,u=t("./bufferish"),f=u.global,c=u.Uint8Array.from,l={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1}},{"./bufferish":8,"./encode":15}],19:[function(t,e,r){function n(e){return u||(u=t("./decode").decode),u(e)}function i(t){return RegExp.apply(null,t)}function o(t){return function(e){var r=new t;for(var n in l)r[n]=e[n];return r}}function s(t){return function(e){return new t(e)}}function a(t){return new Uint8Array(t).buffer}r.setExtUnpackers=function(t){t.addExtUnpacker(14,[n,o(Error)]),t.addExtUnpacker(1,[n,o(EvalError)]),t.addExtUnpacker(2,[n,o(RangeError)]),t.addExtUnpacker(3,[n,o(ReferenceError)]),t.addExtUnpacker(4,[n,o(SyntaxError)]),t.addExtUnpacker(5,[n,o(TypeError)]),t.addExtUnpacker(6,[n,o(URIError)]),t.addExtUnpacker(10,[n,i]),t.addExtUnpacker(11,[n,s(Boolean)]),t.addExtUnpacker(12,[n,s(String)]),t.addExtUnpacker(13,[n,s(Date)]),t.addExtUnpacker(15,[n,s(Number)]),"undefined"!=typeof Uint8Array&&(t.addExtUnpacker(17,s(Int8Array)),t.addExtUnpacker(18,s(Uint8Array)),t.addExtUnpacker(19,[a,s(Int16Array)]),t.addExtUnpacker(20,[a,s(Uint16Array)]),t.addExtUnpacker(21,[a,s(Int32Array)]),t.addExtUnpacker(22,[a,s(Uint32Array)]),t.addExtUnpacker(23,[a,s(Float32Array)]),"undefined"!=typeof Float64Array&&t.addExtUnpacker(24,[a,s(Float64Array)]),"undefined"!=typeof Uint8ClampedArray&&t.addExtUnpacker(25,s(Uint8ClampedArray)),t.addExtUnpacker(26,a),t.addExtUnpacker(29,[a,s(DataView)])),f.hasBuffer&&t.addExtUnpacker(27,s(c))};var u,f=t("./bufferish"),c=f.global,l={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1}},{"./bufferish":8,"./decode":12}],20:[function(t,e,r){t("./read-core"),t("./write-core"),r.createCodec=t("./codec-base").createCodec},{"./codec-base":9,"./read-core":22,"./write-core":25}],21:[function(t,e,r){function n(){if(!(this instanceof n))return new n}function i(){if(!(this instanceof i))return new i}function o(){throw new Error("method not implemented: write()")}function s(){throw new Error("method not implemented: fetch()")}function a(){return this.buffers&&this.buffers.length?(this.flush(),this.pull()):this.fetch()}function u(t){(this.buffers||(this.buffers=[])).push(t)}function f(){return(this.buffers||(this.buffers=[])).shift()}function c(t){return function(e){for(var r in t)e[r]=t[r];return e}}r.FlexDecoder=n,r.FlexEncoder=i;var l=t("./bufferish"),h=2048,d=65536,p="BUFFER_SHORTAGE";n.mixin=c({bufferish:l,write:function(t){var e=this.offset?l.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=e?t?this.bufferish.concat([e,t]):e:t,this.offset=0},fetch:s,flush:function(){for(;this.offset<this.buffer.length;){var t,e=this.offset;try{t=this.fetch()}catch(t){if(t&&t.message!=p)throw t;this.offset=e;break}this.push(t)}},push:u,pull:f,read:a,reserve:function(t){var e=this.offset,r=e+t;if(r>this.buffer.length)throw new Error(p);return this.offset=r,e},offset:0}),n.mixin(n.prototype),i.mixin=c({bufferish:l,write:o,fetch:function(){var t=this.start;if(t<this.offset){var e=this.start=this.offset;return l.prototype.slice.call(this.buffer,t,e)}},flush:function(){for(;this.start<this.offset;){var t=this.fetch();t&&this.push(t)}},push:u,pull:function(){var t=this.buffers||(this.buffers=[]),e=t.length>1?this.bufferish.concat(t):t[0];return t.length=0,e},read:a,reserve:function(t){var e=0|t;if(this.buffer){var r=this.buffer.length,n=0|this.offset,i=n+e;if(i<r)return this.offset=i,n;this.flush(),t=Math.max(t,Math.min(2*r,this.maxBufferSize))}return t=Math.max(t,this.minBufferSize),this.buffer=this.bufferish.alloc(t),this.start=0,this.offset=e,0},send:function(t){var e=t.length;if(e>this.minBufferSize)this.flush(),this.push(t);else{var r=this.reserve(e);l.prototype.copy.call(t,this.buffer,r)}},maxBufferSize:d,minBufferSize:h,offset:0,start:0}),i.mixin(i.prototype)},{"./bufferish":8}],22:[function(t,e,r){function n(){var t=this.options;return this.decode=function(t){var e=a.getReadToken(t);return function(t){var r=s(t),n=e[r];if(!n)throw new Error("Invalid type: "+(r?"0x"+r.toString(16):r));return n(t)}}(t),t&&t.preset&&o.setExtUnpackers(this),this}var i=t("./ext-buffer").ExtBuffer,o=t("./ext-unpacker"),s=t("./read-format").readUint8,a=t("./read-token"),u=t("./codec-base");u.install({addExtUnpacker:function(t,e){(this.extUnpackers||(this.extUnpackers=[]))[t]=u.filter(e)},getExtUnpacker:function(t){return(this.extUnpackers||(this.extUnpackers=[]))[t]||function(e){return new i(e,t)}},init:n}),r.preset=n.call(u.preset)},{"./codec-base":9,"./ext-buffer":17,"./ext-unpacker":19,"./read-format":23,"./read-token":24}],23:[function(t,e,r){function n(t,e){var r,n={},i=new Array(e),o=new Array(e),s=t.codec.decode;for(r=0;r<e;r++)i[r]=s(t),o[r]=s(t);for(r=0;r<e;r++)n[i[r]]=o[r];return n}function i(t,e){var r,n=new Map,i=new Array(e),o=new Array(e),s=t.codec.decode;for(r=0;r<e;r++)i[r]=s(t),o[r]=s(t);for(r=0;r<e;r++)n.set(i[r],o[r]);return n}function o(t,e){for(var r=new Array(e),n=t.codec.decode,i=0;i<e;i++)r[i]=n(t);return r}function s(t,e){var r=t.reserve(e),n=r+e;return R.toString.call(t.buffer,"utf-8",r,n)}function a(t,e){var r=t.reserve(e),n=r+e,i=R.slice.call(t.buffer,r,n);return C.from(i)}function u(t,e){var r=t.reserve(e),n=r+e,i=R.slice.call(t.buffer,r,n);return C.Uint8Array.from(i).buffer}function f(t,e){var r=t.reserve(e+1),n=t.buffer[r++],i=r+e,o=t.codec.getExtUnpacker(n);if(!o)throw new Error("Invalid ext type: "+(n?"0x"+n.toString(16):n));return o(R.slice.call(t.buffer,r,i))}function c(t){var e=t.reserve(1);return t.buffer[e]}function l(t){var e=t.reserve(1),r=t.buffer[e];return 128&r?r-256:r}function h(t){var e=t.reserve(2),r=t.buffer;return r[e++]<<8|r[e]}function d(t){var e=t.reserve(2),r=t.buffer,n=r[e++]<<8|r[e];return 32768&n?n-65536:n}function p(t){var e=t.reserve(4),r=t.buffer;return 16777216*r[e++]+(r[e++]<<16)+(r[e++]<<8)+r[e]}function y(t){var e=t.reserve(4),r=t.buffer;return r[e++]<<24|r[e++]<<16|r[e++]<<8|r[e]}function v(t,e){return function(r){var n=r.reserve(t);return e.call(r.buffer,n,A)}}function g(t){return new x(this,t).toNumber()}function m(t){return new B(this,t).toNumber()}function b(t){return new x(this,t)}function _(t){return new B(this,t)}function w(t){return k.read(this,t,!1,23,4)}function S(t){return k.read(this,t,!1,52,8)}var k=t("ieee754"),E=t("int64-buffer"),x=E.Uint64BE,B=E.Int64BE;r.getReadFormat=function(t){var e=C.hasArrayBuffer&&t&&t.binarraybuffer,r=t&&t.int64;return{map:P&&t&&t.usemap?i:n,array:o,str:s,bin:e?u:a,ext:f,uint8:c,uint16:h,uint32:p,uint64:v(8,r?b:g),int8:l,int16:d,int32:y,int64:v(8,r?_:m),float32:v(4,w),float64:v(8,S)}},r.readUint8=c;var C=t("./bufferish"),R=t("./bufferish-proto"),P="undefined"!=typeof Map,A=!0},{"./bufferish":8,"./bufferish-proto":6,ieee754:32,"int64-buffer":33}],24:[function(t,e,r){function n(t){var e,r=new Array(256);for(e=0;e<=127;e++)r[e]=i(e);for(e=128;e<=143;e++)r[e]=s(e-128,t.map);for(e=144;e<=159;e++)r[e]=s(e-144,t.array);for(e=160;e<=191;e++)r[e]=s(e-160,t.str);for(r[192]=i(null),r[193]=null,r[194]=i(!1),r[195]=i(!0),r[196]=o(t.uint8,t.bin),r[197]=o(t.uint16,t.bin),r[198]=o(t.uint32,t.bin),r[199]=o(t.uint8,t.ext),r[200]=o(t.uint16,t.ext),r[201]=o(t.uint32,t.ext),r[202]=t.float32,r[203]=t.float64,r[204]=t.uint8,r[205]=t.uint16,r[206]=t.uint32,r[207]=t.uint64,r[208]=t.int8,r[209]=t.int16,r[210]=t.int32,r[211]=t.int64,r[212]=s(1,t.ext),r[213]=s(2,t.ext),r[214]=s(4,t.ext),r[215]=s(8,t.ext),r[216]=s(16,t.ext),r[217]=o(t.uint8,t.str),r[218]=o(t.uint16,t.str),r[219]=o(t.uint32,t.str),r[220]=o(t.uint16,t.array),r[221]=o(t.uint32,t.array),r[222]=o(t.uint16,t.map),r[223]=o(t.uint32,t.map),e=224;e<=255;e++)r[e]=i(e-256);return r}function i(t){return function(){return t}}function o(t,e){return function(r){var n=t(r);return e(r,n)}}function s(t,e){return function(r){return e(r,t)}}var a=t("./read-format");r.getReadToken=function(t){var e=a.getReadFormat(t);return t&&t.useraw?function(t){var e,r=n(t).slice();for(r[217]=r[196],r[218]=r[197],r[219]=r[198],e=160;e<=191;e++)r[e]=s(e-160,t.bin);return r}(e):n(e)}},{"./read-format":23}],25:[function(t,e,r){function n(){var t=this.options;return this.encode=function(t){var e=s.getWriteType(t);return function(t,r){var n=e[a(r)];if(!n)throw new Error(\'Unsupported type "\'+a(r)+\'": \'+r);n(t,r)}}(t),t&&t.preset&&o.setExtPackers(this),this}var i=t("./ext-buffer").ExtBuffer,o=t("./ext-packer"),s=t("./write-type"),u=t("./codec-base");u.install({addExtPacker:function(t,e,r){function n(e){return r&&(e=r(e)),new i(e,t)}r=u.filter(r);var o=e.name;o&&"Object"!==o?(this.extPackers||(this.extPackers={}))[o]=n:(this.extEncoderList||(this.extEncoderList=[])).unshift([e,n])},getExtPacker:function(t){var e=this.extPackers||(this.extPackers={}),r=t.constructor,n=r&&r.name&&e[r.name];if(n)return n;for(var i=this.extEncoderList||(this.extEncoderList=[]),o=i.length,s=0;s<o;s++){var a=i[s];if(r===a[0])return a[1]}},init:n}),r.preset=n.call(u.preset)},{"./codec-base":9,"./ext-buffer":17,"./ext-packer":18,"./write-type":27}],26:[function(t,e,r){function n(){var t=v.slice();return t[196]=i(196),t[197]=o(197),t[198]=s(198),t[199]=i(199),t[200]=o(200),t[201]=s(201),t[202]=a(202,4,_.writeFloatBE||c,!0),t[203]=a(203,8,_.writeDoubleBE||l,!0),t[204]=i(204),t[205]=o(205),t[206]=s(206),t[207]=a(207,8,u),t[208]=i(208),t[209]=o(209),t[210]=s(210),t[211]=a(211,8,f),t[217]=i(217),t[218]=o(218),t[219]=s(219),t[220]=o(220),t[221]=s(221),t[222]=o(222),t[223]=s(223),t}function i(t){return function(e,r){var n=e.reserve(2),i=e.buffer;i[n++]=t,i[n]=r}}function o(t){return function(e,r){var n=e.reserve(3),i=e.buffer;i[n++]=t,i[n++]=r>>>8,i[n]=r}}function s(t){return function(e,r){var n=e.reserve(5),i=e.buffer;i[n++]=t,i[n++]=r>>>24,i[n++]=r>>>16,i[n++]=r>>>8,i[n]=r}}function a(t,e,r,n){return function(i,o){var s=i.reserve(e+1);i.buffer[s++]=t,r.call(i.buffer,o,s,n)}}function u(t,e){new p(this,e,t)}function f(t,e){new y(this,e,t)}function c(t,e){h.write(this,t,e,!1,23,4)}function l(t,e){h.write(this,t,e,!1,52,8)}var h=t("ieee754"),d=t("int64-buffer"),p=d.Uint64BE,y=d.Int64BE,v=t("./write-uint8").uint8,g=t("./bufferish"),m=g.global,b=g.hasBuffer&&"TYPED_ARRAY_SUPPORT"in m&&!m.TYPED_ARRAY_SUPPORT,_=g.hasBuffer&&m.prototype||{};r.getWriteToken=function(t){return t&&t.uint8array?function(){var t=n();return t[202]=a(202,4,c),t[203]=a(203,8,l),t}():b||g.hasBuffer&&t&&t.safe?function(){var t=v.slice();return t[196]=a(196,1,m.prototype.writeUInt8),t[197]=a(197,2,m.prototype.writeUInt16BE),t[198]=a(198,4,m.prototype.writeUInt32BE),t[199]=a(199,1,m.prototype.writeUInt8),t[200]=a(200,2,m.prototype.writeUInt16BE),t[201]=a(201,4,m.prototype.writeUInt32BE),t[202]=a(202,4,m.prototype.writeFloatBE),t[203]=a(203,8,m.prototype.writeDoubleBE),t[204]=a(204,1,m.prototype.writeUInt8),t[205]=a(205,2,m.prototype.writeUInt16BE),t[206]=a(206,4,m.prototype.writeUInt32BE),t[207]=a(207,8,u),t[208]=a(208,1,m.prototype.writeInt8),t[209]=a(209,2,m.prototype.writeInt16BE),t[210]=a(210,4,m.prototype.writeInt32BE),t[211]=a(211,8,f),t[217]=a(217,1,m.prototype.writeUInt8),t[218]=a(218,2,m.prototype.writeUInt16BE),t[219]=a(219,4,m.prototype.writeUInt32BE),t[220]=a(220,2,m.prototype.writeUInt16BE),t[221]=a(221,4,m.prototype.writeUInt32BE),t[222]=a(222,2,m.prototype.writeUInt16BE),t[223]=a(223,4,m.prototype.writeUInt32BE),t}():n()}},{"./bufferish":8,"./write-uint8":28,ieee754:32,"int64-buffer":33}],27:[function(t,e,r){var n=t("isarray"),i=t("int64-buffer"),o=i.Uint64BE,s=i.Int64BE,a=t("./bufferish"),u=t("./bufferish-proto"),f=t("./write-token"),c=t("./write-uint8").uint8,l=t("./ext-buffer").ExtBuffer,h="undefined"!=typeof Uint8Array,d="undefined"!=typeof Map,p=[];p[1]=212,p[2]=213,p[4]=214,p[8]=215,p[16]=216,r.getWriteType=function(t){function e(t,e){if(null===e)return r(t,e);if(b(e))return _(t,e);if(n(e))return function(t,e){var r=e.length,n=r<16?144+r:r<=65535?220:221;v[n](t,r);for(var i=t.codec.encode,o=0;o<r;o++)i(t,e[o])}(t,e);if(o.isUint64BE(e))return function(t,e){v[207](t,e.toArray())}(t,e);if(s.isInt64BE(e))return function(t,e){v[211](t,e.toArray())}(t,e);var i=t.codec.getExtPacker(e);return i&&(e=i(e)),e instanceof l?function(t,e){var r=e.buffer,n=r.length,i=p[n]||(n<255?199:n<=65535?200:201);v[i](t,n),c[e.type](t),t.send(r)}(t,e):void w(t,e)}function r(t,e){v[192](t,e)}function i(t,e){var r=e.length;v[r<255?196:r<=65535?197:198](t,r),t.send(e)}function y(t,e){var r=Object.keys(e),n=r.length;v[n<16?128+n:n<=65535?222:223](t,n);var i=t.codec.encode;r.forEach((function(r){i(t,r),i(t,e[r])}))}var v=f.getWriteToken(t),g=t&&t.useraw,m=h&&t&&t.binarraybuffer,b=m?a.isArrayBuffer:a.isBuffer,_=m?function(t,e){i(t,new Uint8Array(e))}:i,w=d&&t&&t.usemap?function(t,e){if(!(e instanceof Map))return y(t,e);var r=e.size;v[r<16?128+r:r<=65535?222:223](t,r);var n=t.codec.encode;e.forEach((function(e,r,i){n(t,r),n(t,e)}))}:y,S={boolean:function(t,e){v[e?195:194](t,e)},function:r,number:function(t,e){var r=0|e;return e!==r?void v[203](t,e):void v[-32<=r&&r<=127?255&r:0<=r?r<=255?204:r<=65535?205:206:-128<=r?208:-32768<=r?209:210](t,r)},object:g?function(t,r){return b(r)?function(t,e){var r=e.length,n=r<32?160+r:r<=65535?218:219;v[n](t,r),t.send(e)}(t,r):void e(t,r)}:e,string:function(t){return function(e,r){var n=r.length,i=5+3*n;e.offset=e.reserve(i);var o=e.buffer,s=t(n),a=e.offset+s;n=u.write.call(o,r,a);var f=t(n);if(s!==f){var c=a+f-s,l=a+n;u.copy.call(o,o,c,a,l)}v[1===f?160+n:f<=3?215+f:219](e,n),e.offset+=n}}(g?function(t){return t<32?1:t<=65535?3:5}:function(t){return t<32?1:t<=255?2:t<=65535?3:5}),symbol:r,undefined:r};return S}},{"./bufferish":8,"./bufferish-proto":6,"./ext-buffer":17,"./write-token":26,"./write-uint8":28,"int64-buffer":33,isarray:34}],28:[function(t,e,r){function n(t){return function(e){var r=e.reserve(1);e.buffer[r]=t}}for(var i=r.uint8=new Array(256),o=0;o<=255;o++)i[o]=n(o)},{}],29:[function(t,e,n){(function(e){"use strict";function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(t,e){if(r()<e)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=o.prototype:(null===t&&(t=new o(e)),t.length=e),t}function o(t,e,r){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(this,t)}return s(this,t,e,r)}function s(t,e,r,n){if("number"==typeof e)throw new TypeError(\'"value" argument must not be a number\');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("\'offset\' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("\'length\' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),o.TYPED_ARRAY_SUPPORT?(t=e).__proto__=o.prototype:t=f(t,e),t}(t,e,r,n):"string"==typeof e?function(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!o.isEncoding(r))throw new TypeError(\'"encoding" must be a valid string encoding\');var n=0|l(e,r),s=(t=i(t,n)).write(e,r);return s!==n&&(t=t.slice(0,s)),t}(t,e,r):function(t,e){if(o.isBuffer(e)){var r=0|c(e.length);return 0===(t=i(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?i(t,0):f(t,e);if("Buffer"===e.type&&F(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function a(t){if("number"!=typeof t)throw new TypeError(\'"size" argument must be a number\');if(t<0)throw new RangeError(\'"size" argument must not be negative\')}function u(t,e){if(a(e),t=i(t,e<0?0:0|c(e)),!o.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function f(t,e){var r=e.length<0?0:0|c(e.length);t=i(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function c(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function l(t,e){if(o.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return j(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return U(t).length;default:if(n)return j(t).length;e=(""+e).toLowerCase(),n=!0}}function h(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return B(this,e,r);case"utf8":case"utf-8":return k(this,e,r);case"ascii":return E(this,e,r);case"latin1":case"binary":return x(this,e,r);case"base64":return S(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function d(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function p(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=o.from(e,n)),o.isBuffer(e))return 0===e.length?-1:y(t,e,r,n,i);if("number"==typeof e)return e&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):y(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,r,n,i){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var s,a=1,u=t.length,f=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,u/=2,f/=2,r/=2}if(i){var c=-1;for(s=r;s<u;s++)if(o(t,s)===o(e,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===f)return c*a}else-1!==c&&(s-=s-c),c=-1}else for(r+f>u&&(r=u-f),s=r;s>=0;s--){for(var l=!0,h=0;h<f;h++)if(o(t,s+h)!==o(e,h)){l=!1;break}if(l)return s}return-1}function v(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[r+s]=a}return s}function g(t,e,r,n){return z(j(e,t.length-r),t,r,n)}function m(t,e,r,n){return z(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function b(t,e,r,n){return m(t,e,r,n)}function _(t,e,r,n){return z(U(e),t,r,n)}function w(t,e,r,n){return z(function(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function S(t,e,r){return 0===e&&r===t.length?N.fromByteArray(t):N.fromByteArray(t.slice(e,r))}function k(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,a,u,f=t[i],c=null,l=f>239?4:f>223?3:f>191?2:1;if(i+l<=r)switch(l){case 1:f<128&&(c=f);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&f)<<6|63&o)>127&&(c=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&f)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&f)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,l=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=l}return function(t){var e=t.length;if(e<=H)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=H));return r}(n)}function E(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function x(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function B(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=D(t[o]);return i}function C(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function R(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function P(t,e,r,n,i,s){if(!o.isBuffer(t))throw new TypeError(\'"buffer" argument must be a Buffer instance\');if(e>i||e<s)throw new RangeError(\'"value" argument is out of bounds\');if(r+n>t.length)throw new RangeError("Index out of range")}function A(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function I(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function T(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M(t,e,r,n,i){return i||T(t,0,r,4),L.write(t,e,r,n,23,4),r+4}function O(t,e,r,n,i){return i||T(t,0,r,8),L.write(t,e,r,n,52,8),r+8}function D(t){return t<16?"0"+t.toString(16):t.toString(16)}function j(t,e){e=e||1/0;for(var r,n=t.length,i=null,o=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function U(t){return N.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\\s+|\\s+$/g,"")}(t).replace(W,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}var N=t("base64-js"),L=t("ieee754"),F=t("isarray");n.Buffer=o,n.SlowBuffer=function(t){return+t!=t&&(t=0),o.alloc(+t)},n.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),n.kMaxLength=r(),o.poolSize=8192,o._augment=function(t){return t.__proto__=o.prototype,t},o.from=function(t,e,r){return s(null,t,e,r)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(t,e,r){return function(t,e,r,n){return a(e),e<=0?i(t,e):void 0!==r?"string"==typeof n?i(t,e).fill(r,n):i(t,e).fill(r):i(t,e)}(null,t,e,r)},o.allocUnsafe=function(t){return u(null,t)},o.allocUnsafeSlow=function(t){return u(null,t)},o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,s=Math.min(r,n);i<s;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!F(t))throw new TypeError(\'"list" argument must be an Array of Buffers\');if(0===t.length)return o.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=o.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var s=t[r];if(!o.isBuffer(s))throw new TypeError(\'"list" argument must be an Array of Buffers\');s.copy(n,i),i+=s.length}return n},o.byteLength=l,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},o.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?k(this,0,t):h.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t,e,r,n,i){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var s=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),u=Math.min(s,a),f=this.slice(n,i),c=t.slice(e,r),l=0;l<u;++l)if(f[l]!==c[l]){s=f[l],a=c[l];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},o.prototype.indexOf=function(t,e,r){return p(this,t,e,r,!0)},o.prototype.lastIndexOf=function(t,e,r){return p(this,t,e,r,!1)},o.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return v(this,t,e,r);case"utf8":case"utf-8":return g(this,t,e,r);case"ascii":return m(this,t,e,r);case"latin1":case"binary":return b(this,t,e,r);case"base64":return _(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var H=4096;o.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),o.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=o.prototype;else{var i=e-t;r=new o(i,void 0);for(var s=0;s<i;++s)r[s]=this[s+t]}return r},o.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},o.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},o.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},o.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),L.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),L.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),L.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),L.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||P(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},o.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||P(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},o.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,1,255,0),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},o.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):A(this,t,e,!1),e+2},o.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):I(this,t,e,!0),e+4},o.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},o.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);P(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s|0)-a&255;return e+r},o.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);P(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s|0)-a&255;return e+r},o.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,1,127,-128),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},o.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):A(this,t,e,!1),e+2},o.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):I(this,t,e,!0),e+4},o.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},o.prototype.writeFloatLE=function(t,e,r){return M(this,t,e,!0,r)},o.prototype.writeFloatBE=function(t,e,r){return M(this,t,e,!1,r)},o.prototype.writeDoubleLE=function(t,e,r){return O(this,t,e,!0,r)},o.prototype.writeDoubleBE=function(t,e,r){return O(this,t,e,!1,r)},o.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,s=n-r;if(this===t&&r<e&&e<n)for(i=s-1;i>=0;--i)t[i+e]=this[i+r];else if(s<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+s),e);return s},o.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var s;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(s=e;s<r;++s)this[s]=t;else{var a=o.isBuffer(t)?t:j(new o(t,n).toString()),u=a.length;for(s=0;s<r-e;++s)this[s+e]=a[s%u]}return this};var W=/[^+\\/0-9A-Za-z-_]/g}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":30,ieee754:32,isarray:34}],30:[function(t,e,r){"use strict";function n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function i(t){return s[t>>18&63]+s[t>>12&63]+s[t>>6&63]+s[63&t]}function o(t,e,r){for(var n,o=[],s=e;s<r;s+=3)n=(t[s]<<16)+(t[s+1]<<8)+t[s+2],o.push(i(n));return o.join("")}r.byteLength=function(t){return 3*t.length/4-n(t)},r.toByteArray=function(t){var e,r,i,o,s,f,c=t.length;s=n(t),f=new u(3*c/4-s),i=s>0?c-4:c;var l=0;for(e=0,r=0;e<i;e+=4,r+=3)o=a[t.charCodeAt(e)]<<18|a[t.charCodeAt(e+1)]<<12|a[t.charCodeAt(e+2)]<<6|a[t.charCodeAt(e+3)],f[l++]=o>>16&255,f[l++]=o>>8&255,f[l++]=255&o;return 2===s?(o=a[t.charCodeAt(e)]<<2|a[t.charCodeAt(e+1)]>>4,f[l++]=255&o):1===s&&(o=a[t.charCodeAt(e)]<<10|a[t.charCodeAt(e+1)]<<4|a[t.charCodeAt(e+2)]>>2,f[l++]=o>>8&255,f[l++]=255&o),f},r.fromByteArray=function(t){for(var e,r=t.length,n=r%3,i="",a=[],u=16383,f=0,c=r-n;f<c;f+=u)a.push(o(t,f,f+u>c?c:f+u));return 1===n?(e=t[r-1],i+=s[e>>2],i+=s[e<<4&63],i+="=="):2===n&&(e=(t[r-2]<<8)+t[r-1],i+=s[e>>10],i+=s[e>>4&63],i+=s[e<<2&63],i+="="),a.push(i),a.join("")};for(var s=[],a=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0;c<64;++c)s[c]=f[c],a[f.charCodeAt(c)]=c;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},{}],31:[function(t,e,r){!function(t){function r(t){for(var e in s)t[e]=s[e];return t}function n(t,e){var r,s=this;if(arguments.length){if(e){if(r=i(s,t,!0)){if(r=r.filter((function(t){return t!==e&&t.originalListener!==e})),!r.length)return n.call(s,t);s[o][t]=r}}else if((r=s[o])&&(delete r[t],!Object.keys(r).length))return n.call(s)}else delete s[o];return s}function i(t,e,r){if(!r||t[o]){var n=t[o]||(t[o]={});return n[e]||(n[e]=[])}}void 0!==e&&(e.exports=t);var o="listeners",s={on:function(t,e){return i(this,t).push(e),this},once:function(t,e){function r(){n.call(o,t,r),e.apply(this,arguments)}var o=this;return r.originalListener=e,i(o,t).push(r),o},off:n,emit:function(t,e){var r=this,n=i(r,t,!0);if(!n)return!1;var o=arguments.length;if(1===o)n.forEach((function(t){t.call(r)}));else if(2===o)n.forEach((function(t){t.call(r,e)}));else{var s=Array.prototype.slice.call(arguments,1);n.forEach((function(t){t.apply(r,s)}))}return!!n.length}};r(t.prototype),t.mixin=r}((function t(){if(!(this instanceof t))return new t}))},{}],32:[function(t,e,r){r.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,f=u>>1,c=-7,l=r?i-1:0,h=r?-1:1,d=t[e+l];for(l+=h,o=d&(1<<-c)-1,d>>=-c,c+=a;c>0;o=256*o+t[e+l],l+=h,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+t[e+l],l+=h,c-=8);if(0===o)o=1-f;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=f}return(d?-1:1)*s*Math.pow(2,o-n)},r.write=function(t,e,r,n,i,o){var s,a,u,f=8*o-i-1,c=(1<<f)-1,l=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+l>=1?h/u:h*Math.pow(2,1-l))*u>=2&&(s++,u/=2),s+l>=c?(a=0,s=c):s+l>=1?(a=(e*u-1)*Math.pow(2,i),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[r+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,f+=i;f>0;t[r+d]=255&s,d+=p,s/=256,f-=8);t[r+d-p]|=128*y}},{}],33:[function(t,e,r){(function(t){!function(e){function r(t,r,_){function k(t,e,r,n){return this instanceof k?function(t,e,r,n,i){g&&m&&(e instanceof m&&(e=new g(e)),n instanceof m&&(n=new g(n))),e||r||n||p?(s(e,r)||(i=r,n=e,r=0,e=new(p||Array)(8)),t.buffer=e,t.offset=r|=0,y!==a(n)&&("string"==typeof n?function(t,e,r,n){var i=0,o=r.length,s=0,a=0;"-"===r[0]&&i++;for(var u=i;i<o;){var f=parseInt(r[i++],n);if(!(f>=0))break;a=a*n+f,s=s*n+Math.floor(a/w),a%=w}u&&(s=~s,a?a=w-a:s++),x(t,e+C,s),x(t,e+R,a)}(e,r,n,i||10):s(n,i)?u(e,r,n,i):"number"==typeof i?(x(e,r+C,n),x(e,r+R,i)):n>0?M(e,r,n):n<0?O(e,r,n):u(e,r,b,0))):t.buffer=f(b,0)}(this,t,e,r,n):new k(t,e,r,n)}function E(){var t=this.buffer,e=this.offset,r=B(t,e+C),n=B(t,e+R);return _||(r|=0),r?r*w+n:n}function x(t,e,r){t[e+T]=255&r,r>>=8,t[e+I]=255&r,r>>=8,t[e+A]=255&r,r>>=8,t[e+P]=255&r}function B(t,e){return t[e+P]*S+(t[e+A]<<16)+(t[e+I]<<8)+t[e+T]}var C=r?0:4,R=r?4:0,P=r?0:3,A=r?1:2,I=r?2:1,T=r?3:0,M=r?c:h,O=r?l:d,D=k.prototype,j="is"+t,U="_"+j;return D.buffer=void 0,D.offset=0,D[U]=!0,D.toNumber=E,D.toString=function(t){var e=this.buffer,r=this.offset,n=B(e,r+C),i=B(e,r+R),o="",s=!_&&2147483648&n;for(s&&(n=~n,i=w-i),t=t||10;;){var a=n%t*w+i;if(n=Math.floor(n/t),i=Math.floor(a/t),o=(a%t).toString(t)+o,!n&&!i)break}return s&&(o="-"+o),o},D.toJSON=E,D.toArray=n,v&&(D.toBuffer=i),g&&(D.toArrayBuffer=o),k[j]=function(t){return!(!t||!t[U])},e[t]=k,k}function n(t){var e=this.buffer,r=this.offset;return p=null,!1!==t&&0===r&&8===e.length&&_(e)?e:f(e,r)}function i(e){var r=this.buffer,n=this.offset;if(p=v,!1!==e&&0===n&&8===r.length&&t.isBuffer(r))return r;var i=new v(8);return u(i,0,r,n),i}function o(t){var e=this.buffer,r=this.offset,n=e.buffer;if(p=g,!1!==t&&0===r&&n instanceof m&&8===n.byteLength)return n;var i=new g(8);return u(i,0,e,r),i.buffer}function s(t,e){var r=t&&t.length;return e|=0,r&&e+8<=r&&"string"!=typeof t[e]}function u(t,e,r,n){e|=0,n|=0;for(var i=0;i<8;i++)t[e++]=255&r[n++]}function f(t,e){return Array.prototype.slice.call(t,e,e+8)}function c(t,e,r){for(var n=e+8;n>e;)t[--n]=255&r,r/=256}function l(t,e,r){var n=e+8;for(r++;n>e;)t[--n]=255&-r^255,r/=256}function h(t,e,r){for(var n=e+8;e<n;)t[e++]=255&r,r/=256}function d(t,e,r){var n=e+8;for(r++;e<n;)t[e++]=255&-r^255,r/=256}var p,y="undefined",v=y!==a(t)&&t,g=y!==("undefined"==typeof Uint8Array?"undefined":a(Uint8Array))&&Uint8Array,m=y!==("undefined"==typeof ArrayBuffer?"undefined":a(ArrayBuffer))&&ArrayBuffer,b=[0,0,0,0,0,0,0,0],_=Array.isArray||function(t){return!!t&&"[object Array]"==Object.prototype.toString.call(t)},w=4294967296,S=16777216;r("Uint64BE",!0,!0),r("Int64BE",!0,!1),r("Uint64LE",!1,!0),r("Int64LE",!1,!1)}("object"==a(r)&&"string"!=typeof r.nodeName?r:this||{})}).call(this,t("buffer").Buffer)},{buffer:29}],34:[function(t,e,r){var n={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},{}]},{},[1])(1)},"object"==a(e)?t.exports=s():(i=[],void 0===(o="function"==typeof(n=s)?n.apply(e,i):n)||(t.exports=o))},298:function(t,e,r){var n;t.exports=(n=r(21),r(754),r(636),r(506),r(165),function(){var t=n,e=t.lib.StreamCipher,r=t.algo,i=[],o=[],s=[],a=r.Rabbit=e.extend({_doReset:function(){for(var t=this._key.words,e=this.cfg.iv,r=0;r<4;r++)t[r]=16711935&(t[r]<<8|t[r]>>>24)|4278255360&(t[r]<<24|t[r]>>>8);var n=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],i=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];for(this._b=0,r=0;r<4;r++)u.call(this);for(r=0;r<8;r++)i[r]^=n[r+4&7];if(e){var o=e.words,s=o[0],a=o[1],f=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=f>>>16|4294901760&c,h=c<<16|65535&f;for(i[0]^=f,i[1]^=l,i[2]^=c,i[3]^=h,i[4]^=f,i[5]^=l,i[6]^=c,i[7]^=h,r=0;r<4;r++)u.call(this)}},_doProcessBlock:function(t,e){var r=this._X;u.call(this),i[0]=r[0]^r[5]>>>16^r[3]<<16,i[1]=r[2]^r[7]>>>16^r[5]<<16,i[2]=r[4]^r[1]>>>16^r[7]<<16,i[3]=r[6]^r[3]>>>16^r[1]<<16;for(var n=0;n<4;n++)i[n]=16711935&(i[n]<<8|i[n]>>>24)|4278255360&(i[n]<<24|i[n]>>>8),t[e+n]^=i[n]},blockSize:4,ivSize:2});function u(){for(var t=this._X,e=this._C,r=0;r<8;r++)o[r]=e[r];for(e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<o[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<o[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<o[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<o[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<o[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<o[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<o[6]>>>0?1:0)|0,this._b=e[7]>>>0<o[7]>>>0?1:0,r=0;r<8;r++){var n=t[r]+e[r],i=65535&n,a=n>>>16,u=((i*i>>>17)+i*a>>>15)+a*a,f=((4294901760&n)*n|0)+((65535&n)*n|0);s[r]=u^f}t[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,t[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,t[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,t[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,t[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,t[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,t[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,t[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}t.Rabbit=e._createHelper(a)}(),n.Rabbit)},308:function(t,e,r){var n,i,o,s,a,u;t.exports=(u=r(21),r(9),i=(n=u).lib.WordArray,o=n.algo,s=o.SHA256,a=o.SHA224=s.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=s._doFinalize.call(this);return t.sigBytes-=4,t}}),n.SHA224=s._createHelper(a),n.HmacSHA224=s._createHmacHelper(a),u.SHA224)},372:function(t,e,r){var n;t.exports=(n=r(21),r(165),n.mode.CTRGladman=function(){var t=n.lib.BlockCipherMode.extend();function e(t){if(255&~(t>>24))t+=1<<24;else{var e=t>>16&255,r=t>>8&255,n=255&t;255===e?(e=0,255===r?(r=0,255===n?n=0:++n):++r):++e,t=0,t+=e<<16,t+=r<<8,t+=n}return t}function r(t){return 0===(t[0]=e(t[0]))&&(t[1]=e(t[1])),t}var i=t.Encryptor=t.extend({processBlock:function(t,e){var n=this._cipher,i=n.blockSize,o=this._iv,s=this._counter;o&&(s=this._counter=o.slice(0),this._iv=void 0),r(s);var a=s.slice(0);n.encryptBlock(a,0);for(var u=0;u<i;u++)t[e+u]^=a[u]}});return t.Decryptor=i,t}(),n.mode.CTRGladman)},380:function(t,e,r){var n;t.exports=(n=r(21),r(240),function(){var t=n,e=t.lib.Hasher,r=t.x64,i=r.Word,o=r.WordArray,s=t.algo;function a(){return i.create.apply(i,arguments)}var u=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],f=[];!function(){for(var t=0;t<80;t++)f[t]=a()}();var c=s.SHA512=e.extend({_doReset:function(){this._hash=new o.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],c=r[5],l=r[6],h=r[7],d=n.high,p=n.low,y=i.high,v=i.low,g=o.high,m=o.low,b=s.high,_=s.low,w=a.high,S=a.low,k=c.high,E=c.low,x=l.high,B=l.low,C=h.high,R=h.low,P=d,A=p,I=y,T=v,M=g,O=m,D=b,j=_,U=w,z=S,N=k,L=E,F=x,H=B,W=C,q=R,Y=0;Y<80;Y++){var Z,V,K=f[Y];if(Y<16)V=K.high=0|t[e+2*Y],Z=K.low=0|t[e+2*Y+1];else{var G=f[Y-15],X=G.high,Q=G.low,J=(X>>>1|Q<<31)^(X>>>8|Q<<24)^X>>>7,$=(Q>>>1|X<<31)^(Q>>>8|X<<24)^(Q>>>7|X<<25),tt=f[Y-2],et=tt.high,rt=tt.low,nt=(et>>>19|rt<<13)^(et<<3|rt>>>29)^et>>>6,it=(rt>>>19|et<<13)^(rt<<3|et>>>29)^(rt>>>6|et<<26),ot=f[Y-7],st=ot.high,at=ot.low,ut=f[Y-16],ft=ut.high,ct=ut.low;V=(V=(V=J+st+((Z=$+at)>>>0<$>>>0?1:0))+nt+((Z+=it)>>>0<it>>>0?1:0))+ft+((Z+=ct)>>>0<ct>>>0?1:0),K.high=V,K.low=Z}var lt,ht=U&N^~U&F,dt=z&L^~z&H,pt=P&I^P&M^I&M,yt=A&T^A&O^T&O,vt=(P>>>28|A<<4)^(P<<30|A>>>2)^(P<<25|A>>>7),gt=(A>>>28|P<<4)^(A<<30|P>>>2)^(A<<25|P>>>7),mt=(U>>>14|z<<18)^(U>>>18|z<<14)^(U<<23|z>>>9),bt=(z>>>14|U<<18)^(z>>>18|U<<14)^(z<<23|U>>>9),_t=u[Y],wt=_t.high,St=_t.low,kt=W+mt+((lt=q+bt)>>>0<q>>>0?1:0),Et=gt+yt;W=F,q=H,F=N,H=L,N=U,L=z,U=D+(kt=(kt=(kt=kt+ht+((lt+=dt)>>>0<dt>>>0?1:0))+wt+((lt+=St)>>>0<St>>>0?1:0))+V+((lt+=Z)>>>0<Z>>>0?1:0))+((z=j+lt|0)>>>0<j>>>0?1:0)|0,D=M,j=O,M=I,O=T,I=P,T=A,P=kt+(vt+pt+(Et>>>0<gt>>>0?1:0))+((A=lt+Et|0)>>>0<lt>>>0?1:0)|0}p=n.low=p+A,n.high=d+P+(p>>>0<A>>>0?1:0),v=i.low=v+T,i.high=y+I+(v>>>0<T>>>0?1:0),m=o.low=m+O,o.high=g+M+(m>>>0<O>>>0?1:0),_=s.low=_+j,s.high=b+D+(_>>>0<j>>>0?1:0),S=a.low=S+z,a.high=w+U+(S>>>0<z>>>0?1:0),E=c.low=E+L,c.high=k+N+(E>>>0<L>>>0?1:0),B=l.low=B+H,l.high=x+F+(B>>>0<H>>>0?1:0),R=h.low=R+q,h.high=C+W+(R>>>0<q>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[30+(n+128>>>10<<5)]=Math.floor(r/4294967296),e[31+(n+128>>>10<<5)]=r,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=e.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32});t.SHA512=e._createHelper(c),t.HmacSHA512=e._createHmacHelper(c)}(),n.SHA512)},396:function(t,e,r){var n;t.exports=(n=r(21),r(240),r(440),r(503),r(754),r(725),r(636),r(471),r(9),r(308),r(380),r(557),r(953),r(56),r(25),r(19),r(506),r(165),r(169),r(939),r(372),r(797),r(454),r(73),r(905),r(482),r(155),r(124),r(406),r(955),r(628),r(193),r(298),r(696),r(128),n)},406:function(t,e,r){var n,i,o,s;t.exports=(s=r(21),r(165),i=(n=s).lib.CipherParams,o=n.enc.Hex,n.format.Hex={stringify:function(t){return t.ciphertext.toString(o)},parse:function(t){var e=o.parse(t);return i.create({ciphertext:e})}},s.format.Hex)},440:function(t,e,r){var n;t.exports=(n=r(21),function(){if("function"==typeof ArrayBuffer){var t=n.lib.WordArray,e=t.init,r=t.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var r=t.byteLength,n=[],i=0;i<r;i++)n[i>>>2]|=t[i]<<24-i%4*8;e.call(this,n,r)}else e.apply(this,arguments)};r.prototype=t}}(),n.lib.WordArray)},454:function(t,e,r){var n,i;t.exports=(i=r(21),r(165),i.mode.ECB=((n=i.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),n.Decryptor=n.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),n),i.mode.ECB)},471:function(t,e,r){var n,i,o,s,a,u,f,c;t.exports=(c=r(21),i=(n=c).lib,o=i.WordArray,s=i.Hasher,a=n.algo,u=[],f=a.SHA1=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],f=0;f<80;f++){if(f<16)u[f]=0|t[e+f];else{var c=u[f-3]^u[f-8]^u[f-14]^u[f-16];u[f]=c<<1|c>>>31}var l=(n<<5|n>>>27)+a+u[f];l+=f<20?1518500249+(i&o|~i&s):f<40?1859775393+(i^o^s):f<60?(i&o|i&s|o&s)-1894007588:(i^o^s)-899497514,a=s,s=o,o=i<<30|i>>>2,i=n,n=l}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+a|0},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[14+(n+64>>>9<<4)]=Math.floor(r/4294967296),e[15+(n+64>>>9<<4)]=r,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=s.clone.call(this);return t._hash=this._hash.clone(),t}}),n.SHA1=s._createHelper(f),n.HmacSHA1=s._createHmacHelper(f),c.SHA1)},477:function(){},482:function(t,e,r){var n;t.exports=(n=r(21),r(165),n.pad.Iso97971={pad:function(t,e){t.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(t,e)},unpad:function(t){n.pad.ZeroPadding.unpad(t),t.sigBytes--}},n.pad.Iso97971)},503:function(t,e,r){var n;t.exports=(n=r(21),function(){var t=n,e=t.lib.WordArray,r=t.enc;function i(t){return t<<8&4278255360|t>>>8&16711935}r.Utf16=r.Utf16BE={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;i<r;i+=2){var o=e[i>>>2]>>>16-i%4*8&65535;n.push(String.fromCharCode(o))}return n.join("")},parse:function(t){for(var r=t.length,n=[],i=0;i<r;i++)n[i>>>1]|=t.charCodeAt(i)<<16-i%2*16;return e.create(n,2*r)}},r.Utf16LE={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],o=0;o<r;o+=2){var s=i(e[o>>>2]>>>16-o%4*8&65535);n.push(String.fromCharCode(s))}return n.join("")},parse:function(t){for(var r=t.length,n=[],o=0;o<r;o++)n[o>>>1]|=i(t.charCodeAt(o)<<16-o%2*16);return e.create(n,2*r)}}}(),n.enc.Utf16)},506:function(t,e,r){var n,i,o,s,a,u,f,c;t.exports=(c=r(21),r(471),r(25),i=(n=c).lib,o=i.Base,s=i.WordArray,a=n.algo,u=a.MD5,f=a.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:u,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var r,n=this.cfg,i=n.hasher.create(),o=s.create(),a=o.words,u=n.keySize,f=n.iterations;a.length<u;){r&&i.update(r),r=i.update(t).finalize(e),i.reset();for(var c=1;c<f;c++)r=i.finalize(r),i.reset();o.concat(r)}return o.sigBytes=4*u,o}}),n.EvpKDF=function(t,e,r){return f.create(r).compute(t,e)},c.EvpKDF)},557:function(t,e,r){var n,i,o,s,a,u,f,c;t.exports=(c=r(21),r(240),r(380),i=(n=c).x64,o=i.Word,s=i.WordArray,a=n.algo,u=a.SHA512,f=a.SHA384=u.extend({_doReset:function(){this._hash=new s.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var t=u._doFinalize.call(this);return t.sigBytes-=16,t}}),n.SHA384=u._createHelper(f),n.HmacSHA384=u._createHmacHelper(f),c.SHA384)},628:function(t,e,r){var n;t.exports=(n=r(21),r(754),r(636),r(506),r(165),function(){var t=n,e=t.lib,r=e.WordArray,i=e.BlockCipher,o=t.algo,s=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],c=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],l=o.DES=i.extend({_doReset:function(){for(var t=this._key.words,e=[],r=0;r<56;r++){var n=s[r]-1;e[r]=t[n>>>5]>>>31-n%32&1}for(var i=this._subKeys=[],o=0;o<16;o++){var f=i[o]=[],c=u[o];for(r=0;r<24;r++)f[r/6|0]|=e[(a[r]-1+c)%28]<<31-r%6,f[4+(r/6|0)]|=e[28+(a[r+24]-1+c)%28]<<31-r%6;for(f[0]=f[0]<<1|f[0]>>>31,r=1;r<7;r++)f[r]=f[r]>>>4*(r-1)+3;f[7]=f[7]<<5|f[7]>>>27}var l=this._invSubKeys=[];for(r=0;r<16;r++)l[r]=i[15-r]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(t,e,r){this._lBlock=t[e],this._rBlock=t[e+1],h.call(this,4,252645135),h.call(this,16,65535),d.call(this,2,858993459),d.call(this,8,16711935),h.call(this,1,1431655765);for(var n=0;n<16;n++){for(var i=r[n],o=this._lBlock,s=this._rBlock,a=0,u=0;u<8;u++)a|=f[u][((s^i[u])&c[u])>>>0];this._lBlock=s,this._rBlock=o^a}var l=this._lBlock;this._lBlock=this._rBlock,this._rBlock=l,h.call(this,1,1431655765),d.call(this,8,16711935),d.call(this,2,858993459),h.call(this,16,65535),h.call(this,4,252645135),t[e]=this._lBlock,t[e+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function h(t,e){var r=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=r,this._lBlock^=r<<t}function d(t,e){var r=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=r,this._rBlock^=r<<t}t.DES=i._createHelper(l);var p=o.TripleDES=i.extend({_doReset:function(){var t=this._key.words;if(2!==t.length&&4!==t.length&&t.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var e=t.slice(0,2),n=t.length<4?t.slice(0,2):t.slice(2,4),i=t.length<6?t.slice(0,2):t.slice(4,6);this._des1=l.createEncryptor(r.create(e)),this._des2=l.createEncryptor(r.create(n)),this._des3=l.createEncryptor(r.create(i))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=i._createHelper(p)}(),n.TripleDES)},636:function(t,e,r){var n;t.exports=(n=r(21),function(t){var e=n,r=e.lib,i=r.WordArray,o=r.Hasher,s=e.algo,a=[];!function(){for(var e=0;e<64;e++)a[e]=4294967296*t.abs(t.sin(e+1))|0}();var u=s.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var r=0;r<16;r++){var n=e+r,i=t[n];t[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,s=t[e+0],u=t[e+1],d=t[e+2],p=t[e+3],y=t[e+4],v=t[e+5],g=t[e+6],m=t[e+7],b=t[e+8],_=t[e+9],w=t[e+10],S=t[e+11],k=t[e+12],E=t[e+13],x=t[e+14],B=t[e+15],C=o[0],R=o[1],P=o[2],A=o[3];C=f(C,R,P,A,s,7,a[0]),A=f(A,C,R,P,u,12,a[1]),P=f(P,A,C,R,d,17,a[2]),R=f(R,P,A,C,p,22,a[3]),C=f(C,R,P,A,y,7,a[4]),A=f(A,C,R,P,v,12,a[5]),P=f(P,A,C,R,g,17,a[6]),R=f(R,P,A,C,m,22,a[7]),C=f(C,R,P,A,b,7,a[8]),A=f(A,C,R,P,_,12,a[9]),P=f(P,A,C,R,w,17,a[10]),R=f(R,P,A,C,S,22,a[11]),C=f(C,R,P,A,k,7,a[12]),A=f(A,C,R,P,E,12,a[13]),P=f(P,A,C,R,x,17,a[14]),C=c(C,R=f(R,P,A,C,B,22,a[15]),P,A,u,5,a[16]),A=c(A,C,R,P,g,9,a[17]),P=c(P,A,C,R,S,14,a[18]),R=c(R,P,A,C,s,20,a[19]),C=c(C,R,P,A,v,5,a[20]),A=c(A,C,R,P,w,9,a[21]),P=c(P,A,C,R,B,14,a[22]),R=c(R,P,A,C,y,20,a[23]),C=c(C,R,P,A,_,5,a[24]),A=c(A,C,R,P,x,9,a[25]),P=c(P,A,C,R,p,14,a[26]),R=c(R,P,A,C,b,20,a[27]),C=c(C,R,P,A,E,5,a[28]),A=c(A,C,R,P,d,9,a[29]),P=c(P,A,C,R,m,14,a[30]),C=l(C,R=c(R,P,A,C,k,20,a[31]),P,A,v,4,a[32]),A=l(A,C,R,P,b,11,a[33]),P=l(P,A,C,R,S,16,a[34]),R=l(R,P,A,C,x,23,a[35]),C=l(C,R,P,A,u,4,a[36]),A=l(A,C,R,P,y,11,a[37]),P=l(P,A,C,R,m,16,a[38]),R=l(R,P,A,C,w,23,a[39]),C=l(C,R,P,A,E,4,a[40]),A=l(A,C,R,P,s,11,a[41]),P=l(P,A,C,R,p,16,a[42]),R=l(R,P,A,C,g,23,a[43]),C=l(C,R,P,A,_,4,a[44]),A=l(A,C,R,P,k,11,a[45]),P=l(P,A,C,R,B,16,a[46]),C=h(C,R=l(R,P,A,C,d,23,a[47]),P,A,s,6,a[48]),A=h(A,C,R,P,m,10,a[49]),P=h(P,A,C,R,x,15,a[50]),R=h(R,P,A,C,v,21,a[51]),C=h(C,R,P,A,k,6,a[52]),A=h(A,C,R,P,p,10,a[53]),P=h(P,A,C,R,w,15,a[54]),R=h(R,P,A,C,u,21,a[55]),C=h(C,R,P,A,b,6,a[56]),A=h(A,C,R,P,B,10,a[57]),P=h(P,A,C,R,g,15,a[58]),R=h(R,P,A,C,E,21,a[59]),C=h(C,R,P,A,y,6,a[60]),A=h(A,C,R,P,S,10,a[61]),P=h(P,A,C,R,d,15,a[62]),R=h(R,P,A,C,_,21,a[63]),o[0]=o[0]+C|0,o[1]=o[1]+R|0,o[2]=o[2]+P|0,o[3]=o[3]+A|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;r[i>>>5]|=128<<24-i%32;var o=t.floor(n/4294967296),s=n;r[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r[14+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),e.sigBytes=4*(r.length+1),this._process();for(var a=this._hash,u=a.words,f=0;f<4;f++){var c=u[f];u[f]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return a},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});function f(t,e,r,n,i,o,s){var a=t+(e&r|~e&n)+i+s;return(a<<o|a>>>32-o)+e}function c(t,e,r,n,i,o,s){var a=t+(e&n|r&~n)+i+s;return(a<<o|a>>>32-o)+e}function l(t,e,r,n,i,o,s){var a=t+(e^r^n)+i+s;return(a<<o|a>>>32-o)+e}function h(t,e,r,n,i,o,s){var a=t+(r^(e|~n))+i+s;return(a<<o|a>>>32-o)+e}e.MD5=o._createHelper(u),e.HmacMD5=o._createHmacHelper(u)}(Math),n.MD5)},696:function(t,e,r){var n;t.exports=(n=r(21),r(754),r(636),r(506),r(165),function(){var t=n,e=t.lib.StreamCipher,r=t.algo,i=[],o=[],s=[],a=r.RabbitLegacy=e.extend({_doReset:function(){var t=this._key.words,e=this.cfg.iv,r=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],n=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(var i=0;i<4;i++)u.call(this);for(i=0;i<8;i++)n[i]^=r[i+4&7];if(e){var o=e.words,s=o[0],a=o[1],f=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=f>>>16|4294901760&c,h=c<<16|65535&f;for(n[0]^=f,n[1]^=l,n[2]^=c,n[3]^=h,n[4]^=f,n[5]^=l,n[6]^=c,n[7]^=h,i=0;i<4;i++)u.call(this)}},_doProcessBlock:function(t,e){var r=this._X;u.call(this),i[0]=r[0]^r[5]>>>16^r[3]<<16,i[1]=r[2]^r[7]>>>16^r[5]<<16,i[2]=r[4]^r[1]>>>16^r[7]<<16,i[3]=r[6]^r[3]>>>16^r[1]<<16;for(var n=0;n<4;n++)i[n]=16711935&(i[n]<<8|i[n]>>>24)|4278255360&(i[n]<<24|i[n]>>>8),t[e+n]^=i[n]},blockSize:4,ivSize:2});function u(){for(var t=this._X,e=this._C,r=0;r<8;r++)o[r]=e[r];for(e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<o[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<o[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<o[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<o[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<o[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<o[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<o[6]>>>0?1:0)|0,this._b=e[7]>>>0<o[7]>>>0?1:0,r=0;r<8;r++){var n=t[r]+e[r],i=65535&n,a=n>>>16,u=((i*i>>>17)+i*a>>>15)+a*a,f=((4294901760&n)*n|0)+((65535&n)*n|0);s[r]=u^f}t[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,t[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,t[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,t[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,t[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,t[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,t[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,t[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}t.RabbitLegacy=e._createHelper(a)}(),n.RabbitLegacy)},725:function(t,e,r){var n;t.exports=(n=r(21),function(){var t=n,e=t.lib.WordArray;function r(t,r,n){for(var i=[],o=0,s=0;s<r;s++)if(s%4){var a=n[t.charCodeAt(s-1)]<<s%4*2|n[t.charCodeAt(s)]>>>6-s%4*2;i[o>>>2]|=a<<24-o%4*8,o++}return e.create(i,o)}t.enc.Base64url={stringify:function(t,e){void 0===e&&(e=!0);var r=t.words,n=t.sigBytes,i=e?this._safe_map:this._map;t.clamp();for(var o=[],s=0;s<n;s+=3)for(var a=(r[s>>>2]>>>24-s%4*8&255)<<16|(r[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|r[s+2>>>2]>>>24-(s+2)%4*8&255,u=0;u<4&&s+.75*u<n;u++)o.push(i.charAt(a>>>6*(3-u)&63));var f=i.charAt(64);if(f)for(;o.length%4;)o.push(f);return o.join("")},parse:function(t,e){void 0===e&&(e=!0);var n=t.length,i=e?this._safe_map:this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var s=0;s<i.length;s++)o[i.charCodeAt(s)]=s}var a=i.charAt(64);if(a){var u=t.indexOf(a);-1!==u&&(n=u)}return r(t,n,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),n.enc.Base64url)},754:function(t,e,r){var n;t.exports=(n=r(21),function(){var t=n,e=t.lib.WordArray;function r(t,r,n){for(var i=[],o=0,s=0;s<r;s++)if(s%4){var a=n[t.charCodeAt(s-1)]<<s%4*2|n[t.charCodeAt(s)]>>>6-s%4*2;i[o>>>2]|=a<<24-o%4*8,o++}return e.create(i,o)}t.enc.Base64={stringify:function(t){var e=t.words,r=t.sigBytes,n=this._map;t.clamp();for(var i=[],o=0;o<r;o+=3)for(var s=(e[o>>>2]>>>24-o%4*8&255)<<16|(e[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|e[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<r;a++)i.push(n.charAt(s>>>6*(3-a)&63));var u=n.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(t){var e=t.length,n=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<n.length;o++)i[n.charCodeAt(o)]=o}var s=n.charAt(64);if(s){var a=t.indexOf(s);-1!==a&&(e=a)}return r(t,e,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.enc.Base64)},797:function(t,e,r){var n,i,o;t.exports=(o=r(21),r(165),o.mode.OFB=(n=o.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(t,e){var r=this._cipher,n=r.blockSize,i=this._iv,o=this._keystream;i&&(o=this._keystream=i.slice(0),this._iv=void 0),r.encryptBlock(o,0);for(var s=0;s<n;s++)t[e+s]^=o[s]}}),n.Decryptor=i,n),o.mode.OFB)},860:function(t,e){var r,n,i,o;function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}o=function(){return function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){if(o)return o(s,!0);var u=new Error("Cannot find module \'"+s+"\'");throw u.code="MODULE_NOT_FOUND",u}var f=r[s]={exports:{}};e[s][0].call(f.exports,(function(t){return i(e[s][1][t]||t)}),f,f.exports,t,e,r,n)}return r[s].exports}for(var o=void 0,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){"use strict";var n=t("./zlib/deflate"),i=t("./utils/common"),o=t("./utils/strings"),s=t("./zlib/messages"),a=t("./zlib/zstream"),u=Object.prototype.toString;function f(t){if(!(this instanceof f))return new f(t);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==r)throw new Error(s[r]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var c;if(c="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(r=n.deflateSetDictionary(this.strm,c)))throw new Error(s[r]);this._dict_set=!0}}function c(t,e){var r=new f(e);if(r.push(t,!0),r.err)throw r.msg||s[r.err];return r.result}f.prototype.push=function(t,e){var r,s,a=this.strm,f=this.options.chunkSize;if(this.ended)return!1;s=e===~~e?e:!0===e?4:0,"string"==typeof t?a.input=o.string2buf(t):"[object ArrayBuffer]"===u.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new i.Buf8(f),a.next_out=0,a.avail_out=f),1!==(r=n.deflate(a,s))&&0!==r)return this.onEnd(r),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(a.output,a.next_out))):this.onData(i.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==r);return 4===s?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==s||(this.onEnd(0),!(a.avail_out=0))},f.prototype.onData=function(t){this.chunks.push(t)},f.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Deflate=f,r.deflate=c,r.deflateRaw=function(t,e){return(e=e||{}).raw=!0,c(t,e)},r.gzip=function(t,e){return(e=e||{}).gzip=!0,c(t,e)}},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(t,e,r){"use strict";var n=t("./zlib/inflate"),i=t("./utils/common"),o=t("./utils/strings"),s=t("./zlib/constants"),a=t("./zlib/messages"),u=t("./zlib/zstream"),f=t("./zlib/gzheader"),c=Object.prototype.toString;function l(t){if(!(this instanceof l))return new l(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&!(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,e.windowBits);if(r!==s.Z_OK)throw new Error(a[r]);if(this.header=new f,n.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=o.string2buf(e.dictionary):"[object ArrayBuffer]"===c.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=n.inflateSetDictionary(this.strm,e.dictionary))!==s.Z_OK))throw new Error(a[r])}function h(t,e){var r=new l(e);if(r.push(t,!0),r.err)throw r.msg||a[r.err];return r.result}l.prototype.push=function(t,e){var r,a,u,f,l,h=this.strm,d=this.options.chunkSize,p=this.options.dictionary,y=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof t?h.input=o.binstring2buf(t):"[object ArrayBuffer]"===c.call(t)?h.input=new Uint8Array(t):h.input=t,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new i.Buf8(d),h.next_out=0,h.avail_out=d),(r=n.inflate(h,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&p&&(r=n.inflateSetDictionary(this.strm,p)),r===s.Z_BUF_ERROR&&!0===y&&(r=s.Z_OK,y=!1),r!==s.Z_STREAM_END&&r!==s.Z_OK)return this.onEnd(r),!(this.ended=!0);h.next_out&&(0!==h.avail_out&&r!==s.Z_STREAM_END&&(0!==h.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(u=o.utf8border(h.output,h.next_out),f=h.next_out-u,l=o.buf2string(h.output,u),h.next_out=f,h.avail_out=d-f,f&&i.arraySet(h.output,h.output,u,f,0),this.onData(l)):this.onData(i.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(y=!0)}while((0<h.avail_in||0===h.avail_out)&&r!==s.Z_STREAM_END);return r===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(h.avail_out=0))},l.prototype.onData=function(t){this.chunks.push(t)},l.prototype.onEnd=function(t){t===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Inflate=l,r.inflate=h,r.inflateRaw=function(t,e){return(e=e||{}).raw=!0,h(t,e)},r.ungzip=h},{"./utils/common":3,"./utils/strings":4,"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(t){for(var e,r,n=Array.prototype.slice.call(arguments,1);n.length;){var i=n.shift();if(i){if("object"!=s(i))throw new TypeError(i+"must be non-object");for(var o in i)e=i,r=o,Object.prototype.hasOwnProperty.call(e,r)&&(t[o]=i[o])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+n),i);else for(var o=0;o<n;o++)t[i+o]=e[r+o]},flattenChunks:function(t){var e,r,n,i,o,s;for(e=n=0,r=t.length;e<r;e++)n+=t[e].length;for(s=new Uint8Array(n),e=i=0,r=t.length;e<r;e++)o=t[e],s.set(o,i),i+=o.length;return s}},o={arraySet:function(t,e,r,n,i){for(var o=0;o<n;o++)t[i+o]=e[r+o]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(n)},{}],4:[function(t,e,r){"use strict";var n=t("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var s=new n.Buf8(256),a=0;a<256;a++)s[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function u(t,e){if(e<65534&&(t.subarray&&o||!t.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var r="",s=0;s<e;s++)r+=String.fromCharCode(t[s]);return r}s[254]=s[254]=1,r.string2buf=function(t){var e,r,i,o,s,a=t.length,u=0;for(o=0;o<a;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),u+=r<128?1:r<2048?2:r<65536?3:4;for(e=new n.Buf8(u),o=s=0;s<u;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),r<128?e[s++]=r:(r<2048?e[s++]=192|r>>>6:(r<65536?e[s++]=224|r>>>12:(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63),e[s++]=128|r>>>6&63),e[s++]=128|63&r);return e},r.buf2binstring=function(t){return u(t,t.length)},r.binstring2buf=function(t){for(var e=new n.Buf8(t.length),r=0,i=e.length;r<i;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){var r,n,i,o,a=e||t.length,f=new Array(2*a);for(r=n=0;r<a;)if((i=t[r++])<128)f[n++]=i;else if(4<(o=s[i]))f[n++]=65533,r+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&r<a;)i=i<<6|63&t[r++],o--;1<o?f[n++]=65533:i<65536?f[n++]=i:(i-=65536,f[n++]=55296|i>>10&1023,f[n++]=56320|1023&i)}return u(f,n)},r.utf8border=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;0<=r&&128==(192&t[r]);)r--;return r<0||0===r?e:r+s[t[r]]>e?r:e}},{"./common":3}],5:[function(t,e,r){"use strict";e.exports=function(t,e,r,n){for(var i=65535&t,o=t>>>16&65535,s=0;0!==r;){for(r-=s=2e3<r?2e3:r;o=o+(i=i+e[n++]|0)|0,--s;);i%=65521,o%=65521}return i|o<<16}},{}],6:[function(t,e,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(t,e,r){"use strict";var n=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e,r,i){var o=n,s=i+r;t^=-1;for(var a=i;a<s;a++)t=t>>>8^o[255&(t^e[a])];return-1^t}},{}],8:[function(t,e,r){"use strict";var n,i=t("../utils/common"),o=t("./trees"),s=t("./adler32"),a=t("./crc32"),u=t("./messages"),f=-2,c=258,l=262,h=113;function d(t,e){return t.msg=u[e],e}function p(t){return(t<<1)-(4<t?9:0)}function y(t){for(var e=t.length;0<=--e;)t[e]=0}function v(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(i.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function g(t,e){o._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,v(t.strm)}function m(t,e){t.pending_buf[t.pending++]=e}function b(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function _(t,e){var r,n,i=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,u=t.strstart>t.w_size-l?t.strstart-(t.w_size-l):0,f=t.window,h=t.w_mask,d=t.prev,p=t.strstart+c,y=f[o+s-1],v=f[o+s];t.prev_length>=t.good_match&&(i>>=2),a>t.lookahead&&(a=t.lookahead);do{if(f[(r=e)+s]===v&&f[r+s-1]===y&&f[r]===f[o]&&f[++r]===f[o+1]){o+=2,r++;do{}while(f[++o]===f[++r]&&f[++o]===f[++r]&&f[++o]===f[++r]&&f[++o]===f[++r]&&f[++o]===f[++r]&&f[++o]===f[++r]&&f[++o]===f[++r]&&f[++o]===f[++r]&&o<p);if(n=c-(p-o),o=p-c,s<n){if(t.match_start=e,a<=(s=n))break;y=f[o+s-1],v=f[o+s]}}}while((e=d[e&h])>u&&0!=--i);return s<=t.lookahead?s:t.lookahead}function w(t){var e,r,n,o,u,f,c,h,d,p,y=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=y+(y-l)){for(i.arraySet(t.window,t.window,y,y,0),t.match_start-=y,t.strstart-=y,t.block_start-=y,e=r=t.hash_size;n=t.head[--e],t.head[e]=y<=n?n-y:0,--r;);for(e=r=y;n=t.prev[--e],t.prev[e]=y<=n?n-y:0,--r;);o+=y}if(0===t.strm.avail_in)break;if(f=t.strm,c=t.window,h=t.strstart+t.lookahead,p=void 0,(d=o)<(p=f.avail_in)&&(p=d),r=0===p?0:(f.avail_in-=p,i.arraySet(c,f.input,f.next_in,p,h),1===f.state.wrap?f.adler=s(f.adler,c,p,h):2===f.state.wrap&&(f.adler=a(f.adler,c,p,h)),f.next_in+=p,f.total_in+=p,p),t.lookahead+=r,t.lookahead+t.insert>=3)for(u=t.strstart-t.insert,t.ins_h=t.window[u],t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+3-1])&t.hash_mask,t.prev[u&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=u,u++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<l&&0!==t.strm.avail_in)}function S(t,e){for(var r,n;;){if(t.lookahead<l){if(w(t),t.lookahead<l&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-l&&(t.match_length=_(t,r)),t.match_length>=3)if(n=o._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(g(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(g(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(g(t,!1),0===t.strm.avail_out)?1:2}function k(t,e){for(var r,n,i;;){if(t.lookahead<l){if(w(t),t.lookahead<l&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-l&&(t.match_length=_(t,r),t.match_length<=5&&(1===t.strategy||3===t.match_length&&4096<t.strstart-t.match_start)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){for(i=t.strstart+t.lookahead-3,n=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(g(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=o._tr_tally(t,0,t.window[t.strstart-1]))&&g(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(g(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(g(t,!1),0===t.strm.avail_out)?1:2}function E(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}function x(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),y(this.dyn_ltree),y(this.dyn_dtree),y(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),y(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),y(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function B(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:h,t.adler=2===e.wrap?0:1,e.last_flush=0,o._tr_init(e),0):d(t,f)}function C(t){var e,r=B(t);return 0===r&&((e=t.state).window_size=2*e.w_size,y(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),r}function R(t,e,r,n,o,s){if(!t)return f;var a=1;if(-1===e&&(e=6),n<0?(a=0,n=-n):15<n&&(a=2,n-=16),o<1||9<o||8!==r||n<8||15<n||e<0||9<e||s<0||4<s)return d(t,f);8===n&&(n=9);var u=new x;return(t.state=u).strm=t,u.wrap=a,u.gzhead=null,u.w_bits=n,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+3-1)/3),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=s,u.method=r,C(t)}n=[new E(0,0,0,0,(function(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(w(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,g(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-l&&(g(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(g(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(g(t,!1),t.strm.avail_out),1)})),new E(4,4,8,4,S),new E(4,5,16,8,S),new E(4,6,32,32,S),new E(4,4,16,16,k),new E(8,16,32,32,k),new E(8,16,128,128,k),new E(8,32,128,256,k),new E(32,128,258,1024,k),new E(32,258,258,4096,k)],r.deflateInit=function(t,e){return R(t,e,8,15,8,0)},r.deflateInit2=R,r.deflateReset=C,r.deflateResetKeep=B,r.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?f:(t.state.gzhead=e,0):f},r.deflate=function(t,e){var r,i,s,u;if(!t||!t.state||5<e||e<0)return t?d(t,f):f;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&4!==e)return d(t,0===t.avail_out?-5:f);if(i.strm=t,r=i.last_flush,i.last_flush=e,42===i.status)if(2===i.wrap)t.adler=0,m(i,31),m(i,139),m(i,8),i.gzhead?(m(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),m(i,255&i.gzhead.time),m(i,i.gzhead.time>>8&255),m(i,i.gzhead.time>>16&255),m(i,i.gzhead.time>>24&255),m(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),m(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(m(i,255&i.gzhead.extra.length),m(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=a(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(m(i,0),m(i,0),m(i,0),m(i,0),m(i,0),m(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),m(i,3),i.status=h);else{var l=8+(i.w_bits-8<<4)<<8;l|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(l|=32),l+=31-l%31,i.status=h,b(i,l),0!==i.strstart&&(b(i,t.adler>>>16),b(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(s=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),v(t),s=i.pending,i.pending!==i.pending_buf_size));)m(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),v(t),s=i.pending,i.pending===i.pending_buf_size)){u=1;break}m(i,u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0)}while(0!==u);i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),0===u&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),v(t),s=i.pending,i.pending===i.pending_buf_size)){u=1;break}m(i,u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0)}while(0!==u);i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),0===u&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&v(t),i.pending+2<=i.pending_buf_size&&(m(i,255&t.adler),m(i,t.adler>>8&255),t.adler=0,i.status=h)):i.status=h),0!==i.pending){if(v(t),0===t.avail_out)return i.last_flush=-1,0}else if(0===t.avail_in&&p(e)<=p(r)&&4!==e)return d(t,-5);if(666===i.status&&0!==t.avail_in)return d(t,-5);if(0!==t.avail_in||0!==i.lookahead||0!==e&&666!==i.status){var _=2===i.strategy?function(t,e){for(var r;;){if(0===t.lookahead&&(w(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(g(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(g(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(g(t,!1),0===t.strm.avail_out)?1:2}(i,e):3===i.strategy?function(t,e){for(var r,n,i,s,a=t.window;;){if(t.lookahead<=c){if(w(t),t.lookahead<=c&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&0<t.strstart&&(n=a[i=t.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i]){s=t.strstart+c;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<s);t.match_length=c-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=o._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(g(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(g(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(g(t,!1),0===t.strm.avail_out)?1:2}(i,e):n[i.level].func(i,e);if(3!==_&&4!==_||(i.status=666),1===_||3===_)return 0===t.avail_out&&(i.last_flush=-1),0;if(2===_&&(1===e?o._tr_align(i):5!==e&&(o._tr_stored_block(i,0,0,!1),3===e&&(y(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),v(t),0===t.avail_out))return i.last_flush=-1,0}return 4!==e?0:i.wrap<=0?1:(2===i.wrap?(m(i,255&t.adler),m(i,t.adler>>8&255),m(i,t.adler>>16&255),m(i,t.adler>>24&255),m(i,255&t.total_in),m(i,t.total_in>>8&255),m(i,t.total_in>>16&255),m(i,t.total_in>>24&255)):(b(i,t.adler>>>16),b(i,65535&t.adler)),v(t),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?0:1)},r.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&e!==h&&666!==e?d(t,f):(t.state=null,e===h?d(t,-3):0):f},r.deflateSetDictionary=function(t,e){var r,n,o,a,u,c,l,h,d=e.length;if(!t||!t.state)return f;if(2===(a=(r=t.state).wrap)||1===a&&42!==r.status||r.lookahead)return f;for(1===a&&(t.adler=s(t.adler,e,d,0)),r.wrap=0,d>=r.w_size&&(0===a&&(y(r.head),r.strstart=0,r.block_start=0,r.insert=0),h=new i.Buf8(r.w_size),i.arraySet(h,e,d-r.w_size,r.w_size,0),e=h,d=r.w_size),u=t.avail_in,c=t.next_in,l=t.input,t.avail_in=d,t.next_in=0,t.input=e,w(r);r.lookahead>=3;){for(n=r.strstart,o=r.lookahead-2;r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+3-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++,--o;);r.strstart=n,r.lookahead=2,w(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=c,t.input=l,t.avail_in=u,r.wrap=a,0},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./messages":13,"./trees":14}],9:[function(t,e,r){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],10:[function(t,e,r){"use strict";e.exports=function(t,e){var r,n,i,o,s,a,u,f,c,l,h,d,p,y,v,g,m,b,_,w,S,k,E,x,B;r=t.state,n=t.next_in,x=t.input,i=n+(t.avail_in-5),o=t.next_out,B=t.output,s=o-(e-t.avail_out),a=o+(t.avail_out-257),u=r.dmax,f=r.wsize,c=r.whave,l=r.wnext,h=r.window,d=r.hold,p=r.bits,y=r.lencode,v=r.distcode,g=(1<<r.lenbits)-1,m=(1<<r.distbits)-1;t:do{p<15&&(d+=x[n++]<<p,p+=8,d+=x[n++]<<p,p+=8),b=y[d&g];e:for(;;){if(d>>>=_=b>>>24,p-=_,0==(_=b>>>16&255))B[o++]=65535&b;else{if(!(16&_)){if(!(64&_)){b=y[(65535&b)+(d&(1<<_)-1)];continue e}if(32&_){r.mode=12;break t}t.msg="invalid literal/length code",r.mode=30;break t}w=65535&b,(_&=15)&&(p<_&&(d+=x[n++]<<p,p+=8),w+=d&(1<<_)-1,d>>>=_,p-=_),p<15&&(d+=x[n++]<<p,p+=8,d+=x[n++]<<p,p+=8),b=v[d&m];r:for(;;){if(d>>>=_=b>>>24,p-=_,!(16&(_=b>>>16&255))){if(!(64&_)){b=v[(65535&b)+(d&(1<<_)-1)];continue r}t.msg="invalid distance code",r.mode=30;break t}if(S=65535&b,p<(_&=15)&&(d+=x[n++]<<p,(p+=8)<_&&(d+=x[n++]<<p,p+=8)),u<(S+=d&(1<<_)-1)){t.msg="invalid distance too far back",r.mode=30;break t}if(d>>>=_,p-=_,(_=o-s)<S){if(c<(_=S-_)&&r.sane){t.msg="invalid distance too far back",r.mode=30;break t}if(E=h,(k=0)===l){if(k+=f-_,_<w){for(w-=_;B[o++]=h[k++],--_;);k=o-S,E=B}}else if(l<_){if(k+=f+l-_,(_-=l)<w){for(w-=_;B[o++]=h[k++],--_;);if(k=0,l<w){for(w-=_=l;B[o++]=h[k++],--_;);k=o-S,E=B}}}else if(k+=l-_,_<w){for(w-=_;B[o++]=h[k++],--_;);k=o-S,E=B}for(;2<w;)B[o++]=E[k++],B[o++]=E[k++],B[o++]=E[k++],w-=3;w&&(B[o++]=E[k++],1<w&&(B[o++]=E[k++]))}else{for(k=o-S;B[o++]=B[k++],B[o++]=B[k++],B[o++]=B[k++],2<(w-=3););w&&(B[o++]=B[k++],1<w&&(B[o++]=B[k++]))}break}}break}}while(n<i&&o<a);n-=w=p>>3,d&=(1<<(p-=w<<3))-1,t.next_in=n,t.next_out=o,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=o<a?a-o+257:257-(o-a),r.hold=d,r.bits=p}},{}],11:[function(t,e,r){"use strict";var n=t("../utils/common"),i=t("./adler32"),o=t("./crc32"),s=t("./inffast"),a=t("./inftrees"),u=-2;function f(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function c(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function l(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(852),e.distcode=e.distdyn=new n.Buf32(592),e.sane=1,e.back=-1,0):u}function h(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,l(t)):u}function d(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?u:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,h(t))):u}function p(t,e){var r,n;return t?(n=new c,(t.state=n).window=null,0!==(r=d(t,e))&&(t.state=null),r):u}var y,v,g=!0;function m(t){if(g){var e;for(y=new n.Buf32(512),v=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(1,t.lens,0,288,y,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(2,t.lens,0,32,v,0,t.work,{bits:5}),g=!1}t.lencode=y,t.lenbits=9,t.distcode=v,t.distbits=5}function b(t,e,r,i){var o,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new n.Buf8(s.wsize)),i>=s.wsize?(n.arraySet(s.window,e,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i<(o=s.wsize-s.wnext)&&(o=i),n.arraySet(s.window,e,r-i,o,s.wnext),(i-=o)?(n.arraySet(s.window,e,r-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}r.inflateReset=h,r.inflateReset2=d,r.inflateResetKeep=l,r.inflateInit=function(t){return p(t,15)},r.inflateInit2=p,r.inflate=function(t,e){var r,c,l,h,d,p,y,v,g,_,w,S,k,E,x,B,C,R,P,A,I,T,M,O,D=0,j=new n.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return u;12===(r=t.state).mode&&(r.mode=13),d=t.next_out,l=t.output,y=t.avail_out,h=t.next_in,c=t.input,p=t.avail_in,v=r.hold,g=r.bits,_=p,w=y,T=0;t:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;g<16;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if(2&r.wrap&&35615===v){j[r.check=0]=255&v,j[1]=v>>>8&255,r.check=o(r.check,j,2,0),g=v=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&v)<<8)+(v>>8))%31){t.msg="incorrect header check",r.mode=30;break}if(8!=(15&v)){t.msg="unknown compression method",r.mode=30;break}if(g-=4,I=8+(15&(v>>>=4)),0===r.wbits)r.wbits=I;else if(I>r.wbits){t.msg="invalid window size",r.mode=30;break}r.dmax=1<<I,t.adler=r.check=1,r.mode=512&v?10:12,g=v=0;break;case 2:for(;g<16;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if(r.flags=v,8!=(255&r.flags)){t.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=v>>8&1),512&r.flags&&(j[0]=255&v,j[1]=v>>>8&255,r.check=o(r.check,j,2,0)),g=v=0,r.mode=3;case 3:for(;g<32;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}r.head&&(r.head.time=v),512&r.flags&&(j[0]=255&v,j[1]=v>>>8&255,j[2]=v>>>16&255,j[3]=v>>>24&255,r.check=o(r.check,j,4,0)),g=v=0,r.mode=4;case 4:for(;g<16;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}r.head&&(r.head.xflags=255&v,r.head.os=v>>8),512&r.flags&&(j[0]=255&v,j[1]=v>>>8&255,r.check=o(r.check,j,2,0)),g=v=0,r.mode=5;case 5:if(1024&r.flags){for(;g<16;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}r.length=v,r.head&&(r.head.extra_len=v),512&r.flags&&(j[0]=255&v,j[1]=v>>>8&255,r.check=o(r.check,j,2,0)),g=v=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(p<(S=r.length)&&(S=p),S&&(r.head&&(I=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,c,h,S,I)),512&r.flags&&(r.check=o(r.check,c,S,h)),p-=S,h+=S,r.length-=S),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===p)break t;for(S=0;I=c[h+S++],r.head&&I&&r.length<65536&&(r.head.name+=String.fromCharCode(I)),I&&S<p;);if(512&r.flags&&(r.check=o(r.check,c,S,h)),p-=S,h+=S,I)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===p)break t;for(S=0;I=c[h+S++],r.head&&I&&r.length<65536&&(r.head.comment+=String.fromCharCode(I)),I&&S<p;);if(512&r.flags&&(r.check=o(r.check,c,S,h)),p-=S,h+=S,I)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;g<16;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if(v!==(65535&r.check)){t.msg="header crc mismatch",r.mode=30;break}g=v=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=12;break;case 10:for(;g<32;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}t.adler=r.check=f(v),g=v=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=d,t.avail_out=y,t.next_in=h,t.avail_in=p,r.hold=v,r.bits=g,2;t.adler=r.check=1,r.mode=12;case 12:if(5===e||6===e)break t;case 13:if(r.last){v>>>=7&g,g-=7&g,r.mode=27;break}for(;g<3;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}switch(r.last=1&v,g-=1,3&(v>>>=1)){case 0:r.mode=14;break;case 1:if(m(r),r.mode=20,6!==e)break;v>>>=2,g-=2;break t;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=30}v>>>=2,g-=2;break;case 14:for(v>>>=7&g,g-=7&g;g<32;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if((65535&v)!=(v>>>16^65535)){t.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&v,g=v=0,r.mode=15,6===e)break t;case 15:r.mode=16;case 16:if(S=r.length){if(p<S&&(S=p),y<S&&(S=y),0===S)break t;n.arraySet(l,c,h,S,d),p-=S,h+=S,y-=S,d+=S,r.length-=S;break}r.mode=12;break;case 17:for(;g<14;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if(r.nlen=257+(31&v),v>>>=5,g-=5,r.ndist=1+(31&v),v>>>=5,g-=5,r.ncode=4+(15&v),v>>>=4,g-=4,286<r.nlen||30<r.ndist){t.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;g<3;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}r.lens[U[r.have++]]=7&v,v>>>=3,g-=3}for(;r.have<19;)r.lens[U[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,M={bits:r.lenbits},T=a(0,r.lens,0,19,r.lencode,0,r.work,M),r.lenbits=M.bits,T){t.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;B=(D=r.lencode[v&(1<<r.lenbits)-1])>>>16&255,C=65535&D,!((x=D>>>24)<=g);){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if(C<16)v>>>=x,g-=x,r.lens[r.have++]=C;else{if(16===C){for(O=x+2;g<O;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if(v>>>=x,g-=x,0===r.have){t.msg="invalid bit length repeat",r.mode=30;break}I=r.lens[r.have-1],S=3+(3&v),v>>>=2,g-=2}else if(17===C){for(O=x+3;g<O;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}g-=x,I=0,S=3+(7&(v>>>=x)),v>>>=3,g-=3}else{for(O=x+7;g<O;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}g-=x,I=0,S=11+(127&(v>>>=x)),v>>>=7,g-=7}if(r.have+S>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=30;break}for(;S--;)r.lens[r.have++]=I}}if(30===r.mode)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,M={bits:r.lenbits},T=a(1,r.lens,0,r.nlen,r.lencode,0,r.work,M),r.lenbits=M.bits,T){t.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,M={bits:r.distbits},T=a(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,M),r.distbits=M.bits,T){t.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===e)break t;case 20:r.mode=21;case 21:if(6<=p&&258<=y){t.next_out=d,t.avail_out=y,t.next_in=h,t.avail_in=p,r.hold=v,r.bits=g,s(t,w),d=t.next_out,l=t.output,y=t.avail_out,h=t.next_in,c=t.input,p=t.avail_in,v=r.hold,g=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;B=(D=r.lencode[v&(1<<r.lenbits)-1])>>>16&255,C=65535&D,!((x=D>>>24)<=g);){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if(B&&!(240&B)){for(R=x,P=B,A=C;B=(D=r.lencode[A+((v&(1<<R+P)-1)>>R)])>>>16&255,C=65535&D,!(R+(x=D>>>24)<=g);){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}v>>>=R,g-=R,r.back+=R}if(v>>>=x,g-=x,r.back+=x,r.length=C,0===B){r.mode=26;break}if(32&B){r.back=-1,r.mode=12;break}if(64&B){t.msg="invalid literal/length code",r.mode=30;break}r.extra=15&B,r.mode=22;case 22:if(r.extra){for(O=r.extra;g<O;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}r.length+=v&(1<<r.extra)-1,v>>>=r.extra,g-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;B=(D=r.distcode[v&(1<<r.distbits)-1])>>>16&255,C=65535&D,!((x=D>>>24)<=g);){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if(!(240&B)){for(R=x,P=B,A=C;B=(D=r.distcode[A+((v&(1<<R+P)-1)>>R)])>>>16&255,C=65535&D,!(R+(x=D>>>24)<=g);){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}v>>>=R,g-=R,r.back+=R}if(v>>>=x,g-=x,r.back+=x,64&B){t.msg="invalid distance code",r.mode=30;break}r.offset=C,r.extra=15&B,r.mode=24;case 24:if(r.extra){for(O=r.extra;g<O;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}r.offset+=v&(1<<r.extra)-1,v>>>=r.extra,g-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===y)break t;if(S=w-y,r.offset>S){if((S=r.offset-S)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=30;break}S>r.wnext?(S-=r.wnext,k=r.wsize-S):k=r.wnext-S,S>r.length&&(S=r.length),E=r.window}else E=l,k=d-r.offset,S=r.length;for(y<S&&(S=y),y-=S,r.length-=S;l[d++]=E[k++],--S;);0===r.length&&(r.mode=21);break;case 26:if(0===y)break t;l[d++]=r.length,y--,r.mode=21;break;case 27:if(r.wrap){for(;g<32;){if(0===p)break t;p--,v|=c[h++]<<g,g+=8}if(w-=y,t.total_out+=w,r.total+=w,w&&(t.adler=r.check=r.flags?o(r.check,l,w,d-w):i(r.check,l,w,d-w)),w=y,(r.flags?v:f(v))!==r.check){t.msg="incorrect data check",r.mode=30;break}g=v=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;g<32;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if(v!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=30;break}g=v=0}r.mode=29;case 29:T=1;break t;case 30:T=-3;break t;case 31:return-4;default:return u}return t.next_out=d,t.avail_out=y,t.next_in=h,t.avail_in=p,r.hold=v,r.bits=g,(r.wsize||w!==t.avail_out&&r.mode<30&&(r.mode<27||4!==e))&&b(t,t.output,t.next_out,w-t.avail_out)?(r.mode=31,-4):(_-=t.avail_in,w-=t.avail_out,t.total_in+=_,t.total_out+=w,r.total+=w,r.wrap&&w&&(t.adler=r.check=r.flags?o(r.check,l,w,t.next_out-w):i(r.check,l,w,t.next_out-w)),t.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0===_&&0===w||4===e)&&0===T&&(T=-5),T)},r.inflateEnd=function(t){if(!t||!t.state)return u;var e=t.state;return e.window&&(e.window=null),t.state=null,0},r.inflateGetHeader=function(t,e){var r;return t&&t.state&&2&(r=t.state).wrap?((r.head=e).done=!1,0):u},r.inflateSetDictionary=function(t,e){var r,n=e.length;return t&&t.state?0!==(r=t.state).wrap&&11!==r.mode?u:11===r.mode&&i(1,e,n,0)!==r.check?-3:b(t,e,n,n)?(r.mode=31,-4):(r.havedict=1,0):u},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,"./inftrees":12}],12:[function(t,e,r){"use strict";var n=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,r,u,f,c,l,h){var d,p,y,v,g,m,b,_,w,S=h.bits,k=0,E=0,x=0,B=0,C=0,R=0,P=0,A=0,I=0,T=0,M=null,O=0,D=new n.Buf16(16),j=new n.Buf16(16),U=null,z=0;for(k=0;k<=15;k++)D[k]=0;for(E=0;E<u;E++)D[e[r+E]]++;for(C=S,B=15;1<=B&&0===D[B];B--);if(B<C&&(C=B),0===B)return f[c++]=20971520,f[c++]=20971520,h.bits=1,0;for(x=1;x<B&&0===D[x];x++);for(C<x&&(C=x),k=A=1;k<=15;k++)if(A<<=1,(A-=D[k])<0)return-1;if(0<A&&(0===t||1!==B))return-1;for(j[1]=0,k=1;k<15;k++)j[k+1]=j[k]+D[k];for(E=0;E<u;E++)0!==e[r+E]&&(l[j[e[r+E]]++]=E);if(0===t?(M=U=l,m=19):1===t?(M=i,O-=257,U=o,z-=257,m=256):(M=s,U=a,m=-1),k=x,g=c,P=E=T=0,y=-1,v=(I=1<<(R=C))-1,1===t&&852<I||2===t&&592<I)return 1;for(;;){for(b=k-P,l[E]<m?(_=0,w=l[E]):l[E]>m?(_=U[z+l[E]],w=M[O+l[E]]):(_=96,w=0),d=1<<k-P,x=p=1<<R;f[g+(T>>P)+(p-=d)]=b<<24|_<<16|w,0!==p;);for(d=1<<k-1;T&d;)d>>=1;if(0!==d?(T&=d-1,T+=d):T=0,E++,0==--D[k]){if(k===B)break;k=e[r+l[E]]}if(C<k&&(T&v)!==y){for(0===P&&(P=C),g+=x,A=1<<(R=k-P);R+P<B&&!((A-=D[R+P])<=0);)R++,A<<=1;if(I+=1<<R,1===t&&852<I||2===t&&592<I)return 1;f[y=T&v]=C<<24|R<<16|g-c}}return 0!==T&&(f[g+T]=k-P<<24|64<<16),h.bits=C,0}},{"../utils/common":3}],13:[function(t,e,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],14:[function(t,e,r){"use strict";var n=t("../utils/common");function i(t){for(var e=t.length;0<=--e;)t[e]=0}var o=256,s=286,a=30,u=15,f=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],c=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],h=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],d=new Array(576);i(d);var p=new Array(60);i(p);var y=new Array(512);i(y);var v=new Array(256);i(v);var g=new Array(29);i(g);var m,b,_,w=new Array(a);function S(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function k(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function E(t){return t<256?y[t]:y[256+(t>>>7)]}function x(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function B(t,e,r){t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,x(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function C(t,e,r){B(t,r[2*e],r[2*e+1])}function R(t,e){for(var r=0;r|=1&t,t>>>=1,r<<=1,0<--e;);return r>>>1}function P(t,e,r){var n,i,o=new Array(16),s=0;for(n=1;n<=u;n++)o[n]=s=s+r[n-1]<<1;for(i=0;i<=e;i++){var a=t[2*i+1];0!==a&&(t[2*i]=R(o[a]++,a))}}function A(t){var e;for(e=0;e<s;e++)t.dyn_ltree[2*e]=0;for(e=0;e<a;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function I(t){8<t.bi_valid?x(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function T(t,e,r,n){var i=2*e,o=2*r;return t[i]<t[o]||t[i]===t[o]&&n[e]<=n[r]}function M(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&T(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!T(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function O(t,e,r){var n,i,s,a,u=0;if(0!==t.last_lit)for(;n=t.pending_buf[t.d_buf+2*u]<<8|t.pending_buf[t.d_buf+2*u+1],i=t.pending_buf[t.l_buf+u],u++,0===n?C(t,i,e):(C(t,(s=v[i])+o+1,e),0!==(a=f[s])&&B(t,i-=g[s],a),C(t,s=E(--n),r),0!==(a=c[s])&&B(t,n-=w[s],a)),u<t.last_lit;);C(t,256,e)}function D(t,e){var r,n,i,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,f=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<f;r++)0!==o[2*r]?(t.heap[++t.heap_len]=c=r,t.depth[r]=0):o[2*r+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[i]=0,t.opt_len--,a&&(t.static_len-=s[2*i+1]);for(e.max_code=c,r=t.heap_len>>1;1<=r;r--)M(t,o,r);for(i=f;r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],M(t,o,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,o[2*i]=o[2*r]+o[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,o[2*r+1]=o[2*n+1]=i,t.heap[1]=i++,M(t,o,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,n,i,o,s,a,f=e.dyn_tree,c=e.max_code,l=e.stat_desc.static_tree,h=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,y=e.stat_desc.max_length,v=0;for(o=0;o<=u;o++)t.bl_count[o]=0;for(f[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<573;r++)y<(o=f[2*f[2*(n=t.heap[r])+1]+1]+1)&&(o=y,v++),f[2*n+1]=o,c<n||(t.bl_count[o]++,s=0,p<=n&&(s=d[n-p]),a=f[2*n],t.opt_len+=a*(o+s),h&&(t.static_len+=a*(l[2*n+1]+s)));if(0!==v){do{for(o=y-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[y]--,v-=2}while(0<v);for(o=y;0!==o;o--)for(n=t.bl_count[o];0!==n;)c<(i=t.heap[--r])||(f[2*i+1]!==o&&(t.opt_len+=(o-f[2*i+1])*f[2*i],f[2*i+1]=o),n--)}}(t,e),P(o,c,t.bl_count)}function j(t,e,r){var n,i,o=-1,s=e[1],a=0,u=7,f=4;for(0===s&&(u=138,f=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=s,s=e[2*(n+1)+1],++a<u&&i===s||(a<f?t.bl_tree[2*i]+=a:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=i,(a=0)===s?(u=138,f=3):i===s?(u=6,f=3):(u=7,f=4))}function U(t,e,r){var n,i,o=-1,s=e[1],a=0,u=7,f=4;for(0===s&&(u=138,f=3),n=0;n<=r;n++)if(i=s,s=e[2*(n+1)+1],!(++a<u&&i===s)){if(a<f)for(;C(t,i,t.bl_tree),0!=--a;);else 0!==i?(i!==o&&(C(t,i,t.bl_tree),a--),C(t,16,t.bl_tree),B(t,a-3,2)):a<=10?(C(t,17,t.bl_tree),B(t,a-3,3)):(C(t,18,t.bl_tree),B(t,a-11,7));o=i,(a=0)===s?(u=138,f=3):i===s?(u=6,f=3):(u=7,f=4)}}i(w);var z=!1;function N(t,e,r,i){var o,s,a;B(t,0+(i?1:0),3),s=e,a=r,I(o=t),x(o,a),x(o,~a),n.arraySet(o.pending_buf,o.window,s,a,o.pending),o.pending+=a}r._tr_init=function(t){z||(function(){var t,e,r,n,i,o=new Array(16);for(n=r=0;n<28;n++)for(g[n]=r,t=0;t<1<<f[n];t++)v[r++]=n;for(v[r-1]=n,n=i=0;n<16;n++)for(w[n]=i,t=0;t<1<<c[n];t++)y[i++]=n;for(i>>=7;n<a;n++)for(w[n]=i<<7,t=0;t<1<<c[n]-7;t++)y[256+i++]=n;for(e=0;e<=u;e++)o[e]=0;for(t=0;t<=143;)d[2*t+1]=8,t++,o[8]++;for(;t<=255;)d[2*t+1]=9,t++,o[9]++;for(;t<=279;)d[2*t+1]=7,t++,o[7]++;for(;t<=287;)d[2*t+1]=8,t++,o[8]++;for(P(d,287,o),t=0;t<a;t++)p[2*t+1]=5,p[2*t]=R(t,5);m=new S(d,f,257,s,u),b=new S(p,c,0,a,u),_=new S(new Array(0),l,0,19,7)}(),z=!0),t.l_desc=new k(t.dyn_ltree,m),t.d_desc=new k(t.dyn_dtree,b),t.bl_desc=new k(t.bl_tree,_),t.bi_buf=0,t.bi_valid=0,A(t)},r._tr_stored_block=N,r._tr_flush_block=function(t,e,r,n){var i,s,a=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<o;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),D(t,t.l_desc),D(t,t.d_desc),a=function(t){var e;for(j(t,t.dyn_ltree,t.l_desc.max_code),j(t,t.dyn_dtree,t.d_desc.max_code),D(t,t.bl_desc),e=18;3<=e&&0===t.bl_tree[2*h[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=i&&(i=s)):i=s=r+5,r+4<=i&&-1!==e?N(t,e,r,n):4===t.strategy||s===i?(B(t,2+(n?1:0),3),O(t,d,p)):(B(t,4+(n?1:0),3),function(t,e,r,n){var i;for(B(t,e-257,5),B(t,r-1,5),B(t,n-4,4),i=0;i<n;i++)B(t,t.bl_tree[2*h[i]+1],3);U(t,t.dyn_ltree,e-1),U(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),O(t,t.dyn_ltree,t.dyn_dtree)),A(t),n&&I(t)},r._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(v[r]+o+1)]++,t.dyn_dtree[2*E(e)]++),t.last_lit===t.lit_bufsize-1},r._tr_align=function(t){var e;B(t,2,3),C(t,256,d),16===(e=t).bi_valid?(x(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{"../utils/common":3}],15:[function(t,e,r){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/":[function(t,e,r){"use strict";var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=n},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},{},[])("/")},"object"==s(e)?t.exports=o():(n=[],void 0===(i="function"==typeof(r=o)?r.apply(e,n):r)||(t.exports=i))},905:function(t,e,r){var n;t.exports=(n=r(21),r(165),n.pad.Iso10126={pad:function(t,e){var r=4*e,i=r-t.sigBytes%r;t.concat(n.lib.WordArray.random(i-1)).concat(n.lib.WordArray.create([i<<24],1))},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},n.pad.Iso10126)},939:function(t,e,r){var n,i,o;t.exports=(o=r(21),r(165),o.mode.CTR=(n=o.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(t,e){var r=this._cipher,n=r.blockSize,i=this._iv,o=this._counter;i&&(o=this._counter=i.slice(0),this._iv=void 0);var s=o.slice(0);r.encryptBlock(s,0),o[n-1]=o[n-1]+1|0;for(var a=0;a<n;a++)t[e+a]^=s[a]}}),n.Decryptor=i,n),o.mode.CTR)},953:function(t,e,r){var n;t.exports=(n=r(21),r(240),function(t){var e=n,r=e.lib,i=r.WordArray,o=r.Hasher,s=e.x64.Word,a=e.algo,u=[],f=[],c=[];!function(){for(var t=1,e=0,r=0;r<24;r++){u[t+5*e]=(r+1)*(r+2)/2%64;var n=(2*t+3*e)%5;t=e%5,e=n}for(t=0;t<5;t++)for(e=0;e<5;e++)f[t+5*e]=e+(2*t+3*e)%5*5;for(var i=1,o=0;o<24;o++){for(var a=0,l=0,h=0;h<7;h++){if(1&i){var d=(1<<h)-1;d<32?l^=1<<d:a^=1<<d-32}128&i?i=i<<1^113:i<<=1}c[o]=s.create(a,l)}}();var l=[];!function(){for(var t=0;t<25;t++)l[t]=s.create()}();var h=a.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var t=this._state=[],e=0;e<25;e++)t[e]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(t,e){for(var r=this._state,n=this.blockSize/2,i=0;i<n;i++){var o=t[e+2*i],s=t[e+2*i+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),(R=r[i]).high^=s,R.low^=o}for(var a=0;a<24;a++){for(var h=0;h<5;h++){for(var d=0,p=0,y=0;y<5;y++)d^=(R=r[h+5*y]).high,p^=R.low;var v=l[h];v.high=d,v.low=p}for(h=0;h<5;h++){var g=l[(h+4)%5],m=l[(h+1)%5],b=m.high,_=m.low;for(d=g.high^(b<<1|_>>>31),p=g.low^(_<<1|b>>>31),y=0;y<5;y++)(R=r[h+5*y]).high^=d,R.low^=p}for(var w=1;w<25;w++){var S=(R=r[w]).high,k=R.low,E=u[w];E<32?(d=S<<E|k>>>32-E,p=k<<E|S>>>32-E):(d=k<<E-32|S>>>64-E,p=S<<E-32|k>>>64-E);var x=l[f[w]];x.high=d,x.low=p}var B=l[0],C=r[0];for(B.high=C.high,B.low=C.low,h=0;h<5;h++)for(y=0;y<5;y++){var R=r[w=h+5*y],P=l[w],A=l[(h+1)%5+5*y],I=l[(h+2)%5+5*y];R.high=P.high^~A.high&I.high,R.low=P.low^~A.low&I.low}R=r[0];var T=c[a];R.high^=T.high,R.low^=T.low}},_doFinalize:function(){var e=this._data,r=e.words,n=(this._nDataBytes,8*e.sigBytes),o=32*this.blockSize;r[n>>>5]|=1<<24-n%32,r[(t.ceil((n+1)/o)*o>>>5)-1]|=128,e.sigBytes=4*r.length,this._process();for(var s=this._state,a=this.cfg.outputLength/8,u=a/8,f=[],c=0;c<u;c++){var l=s[c],h=l.high,d=l.low;h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),f.push(d),f.push(h)}return new i.init(f,a)},clone:function(){for(var t=o.clone.call(this),e=t._state=this._state.slice(0),r=0;r<25;r++)e[r]=e[r].clone();return t}});e.SHA3=o._createHelper(h),e.HmacSHA3=o._createHmacHelper(h)}(Math),n.SHA3)},955:function(t,e,r){var n;t.exports=(n=r(21),r(754),r(636),r(506),r(165),function(){var t=n,e=t.lib.BlockCipher,r=t.algo,i=[],o=[],s=[],a=[],u=[],f=[],c=[],l=[],h=[],d=[];!function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var r=0,n=0;for(e=0;e<256;e++){var p=n^n<<1^n<<2^n<<3^n<<4;p=p>>>8^255&p^99,i[r]=p,o[p]=r;var y=t[r],v=t[y],g=t[v],m=257*t[p]^16843008*p;s[r]=m<<24|m>>>8,a[r]=m<<16|m>>>16,u[r]=m<<8|m>>>24,f[r]=m,m=16843009*g^65537*v^257*y^16843008*r,c[p]=m<<24|m>>>8,l[p]=m<<16|m>>>16,h[p]=m<<8|m>>>24,d[p]=m,r?(r=y^t[t[t[g^y]]],n^=t[t[n]]):r=n=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],y=r.AES=e.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,r=t.sigBytes/4,n=4*((this._nRounds=r+6)+1),o=this._keySchedule=[],s=0;s<n;s++)s<r?o[s]=e[s]:(f=o[s-1],s%r?r>6&&s%r==4&&(f=i[f>>>24]<<24|i[f>>>16&255]<<16|i[f>>>8&255]<<8|i[255&f]):(f=i[(f=f<<8|f>>>24)>>>24]<<24|i[f>>>16&255]<<16|i[f>>>8&255]<<8|i[255&f],f^=p[s/r|0]<<24),o[s]=o[s-r]^f);for(var a=this._invKeySchedule=[],u=0;u<n;u++){if(s=n-u,u%4)var f=o[s];else f=o[s-4];a[u]=u<4||s<=4?f:c[i[f>>>24]]^l[i[f>>>16&255]]^h[i[f>>>8&255]]^d[i[255&f]]}}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,s,a,u,f,i)},decryptBlock:function(t,e){var r=t[e+1];t[e+1]=t[e+3],t[e+3]=r,this._doCryptBlock(t,e,this._invKeySchedule,c,l,h,d,o),r=t[e+1],t[e+1]=t[e+3],t[e+3]=r},_doCryptBlock:function(t,e,r,n,i,o,s,a){for(var u=this._nRounds,f=t[e]^r[0],c=t[e+1]^r[1],l=t[e+2]^r[2],h=t[e+3]^r[3],d=4,p=1;p<u;p++){var y=n[f>>>24]^i[c>>>16&255]^o[l>>>8&255]^s[255&h]^r[d++],v=n[c>>>24]^i[l>>>16&255]^o[h>>>8&255]^s[255&f]^r[d++],g=n[l>>>24]^i[h>>>16&255]^o[f>>>8&255]^s[255&c]^r[d++],m=n[h>>>24]^i[f>>>16&255]^o[c>>>8&255]^s[255&l]^r[d++];f=y,c=v,l=g,h=m}y=(a[f>>>24]<<24|a[c>>>16&255]<<16|a[l>>>8&255]<<8|a[255&h])^r[d++],v=(a[c>>>24]<<24|a[l>>>16&255]<<16|a[h>>>8&255]<<8|a[255&f])^r[d++],g=(a[l>>>24]<<24|a[h>>>16&255]<<16|a[f>>>8&255]<<8|a[255&c])^r[d++],m=(a[h>>>24]<<24|a[f>>>16&255]<<16|a[c>>>8&255]<<8|a[255&l])^r[d++],t[e]=y,t[e+1]=v,t[e+2]=g,t[e+3]=m},keySize:8});t.AES=e._createHelper(y)}(),n.AES)}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,r),o.exports}r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,n(i.key),i)}}function n(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,r||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==t(r)?r:r+""}var i=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._pairs=[],this.size=0},(r=[{key:"has",value:function(t){return this._indexOf(t)>-1}},{key:"get",value:function(t){var e=this._indexOf(t);if(e>-1)return this._pairs[e][1]}},{key:"set",value:function(t,e){var r=this._indexOf(t);r>-1?this._pairs[r][1]=e:(this._pairs.push([t,e]),this.size++)}},{key:"delete",value:function(t){var e=this._indexOf(t);return e>-1&&(this._pairs.splice(e,1),this.size--,!0)}},{key:"forEach",value:function(t){for(var e=0;e<this._pairs.length;e++)t(this._pairs[e][1],this._pairs[e][0])}},{key:"clear",value:function(){this._pairs=[]}},{key:"_indexOf",value:function(t){for(var e=0;e<this._pairs.length;e++)if(this._pairs[e][0]===t)return e;return-1}}])&&e(t.prototype,r),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}(),o=function(){return new(self.Map||i)};function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function u(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}var f=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._set=[],this.size=0},(e=[{key:"add",value:function(t){return this._set.push(t),this.size++,this}},{key:"has",value:function(t){return this._set.indexOf(t)>-1}},{key:"delete",value:function(t){for(var e=0;e<this._set.length;e++)if(this._set[e]===t)return this._set.splice(e,1),this.size--,!0;return!1}},{key:"forEach",value:function(t){for(var e=0;e<this._set.length;e++)t(this._set[e])}},{key:"clear",value:function(){this._set=[]}}])&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),c=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=new(self.Set||f),r=0;r<t.length;r++)e.add(t[r]);return e};function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,d(n.key),n)}}function d(t){var e=function(t,e){if("object"!=l(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==l(e)?e:e+""}var p=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._msgListeners=o()},e=[{key:"setMessagingPort",value:function(t){var e=this;this._messagePort=t,t.setonmessage((function(t){var r=t.data,n=[],i=e._msgListeners.get(r.msgType);i&&i.forEach((function(t){t.callback(r.data),t.isOneTime&&n.push(t)})),n.forEach((function(t){i.delete(t)}))}))}},{key:"sendAsync",value:function(t,e,r,n,i){n&&r&&this.addMessageListener(r,n,i),this._messagePort.postMessage({msgType:t,data:e})}},{key:"addMessageListener",value:function(t,e,r){var n=null;this._msgListeners.has(t)?n=this._msgListeners.get(t):(n=c(),this._msgListeners.set(t,n)),n.add({callback:e,isOneTime:r})}}],e&&h(t.prototype,e),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),y="dataWupDispatchRateSettings",v="logWupDispatchRateSettings",g="forceDynamicDataWupDispatchSettings",m="wupStatisticsLogIntervalMs",b="serverCommunicationSettings",_="wupResponseTimeout",w="wupMessageRequestTimeout",S="logMessageRequestTimeout",k="crossDomainsList",E="logLevel",x="allowedUnmaskedValuesList",B="wupMessageNumToRetry",C="wupMessageRetryInterval",R="wupIncrementalGrowthBetweenFailures",P="wupMaxIntervalBetweenFailures",A="logMessageNumToRetry",I="logMessageRetryInterval",T="logIncrementalGrowthBetweenFailures",M="logMaxIntervalBetweenFailures",O="NewSessionStartedEvent",D="ConfigurationLoadedEvent",j="ServerStateUpdatedEvent",U="HeartBeatStatusEvent",z="ServerRestoredMuidEvent",N="ServerNewAgentIdEvent",L=10,F=20,H=30,W=40;function q(t){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function Y(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=q(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==q(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Z={V1_ONLY:"0",DUAL_COLLECTION_V1_PRIORITY:"1",DUAL_COLLECTION_V2_PRIORITY:"2",V2_ONLY:"3",isValid:function(t){return Object.values(Z).includes(t)},getDescription:function(t){return Y(Y(Y(Y({},Z.V1_ONLY,"Only V1 collector is active"),Z.DUAL_COLLECTION_V1_PRIORITY,"Both collectors active, V1 is primary"),Z.DUAL_COLLECTION_V2_PRIORITY,"Both collectors active, V2 is primary"),Z.V2_ONLY,"Only V2 collector is active")[t]||"Unknown stage"}},V=Z;function K(t){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(t)}function G(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,X(n.key),n)}}function X(t){var e=function(t,e){if("object"!=K(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==K(e)?e:e+""}var Q={defaultDynamicWupDispatchRateConfiguration:{type:"dynamic"},defaultIncrementalWupDispatchRateConfiguration:{type:"incremental",initialRateValueMs:500,incrementStepMs:500,incrementStopMs:5e3,incrementStartWupSendCount:20}},J=["keyEventsMaskSpecialChars","passwordIdMaskingList","maskElementsAttributes",x,"enableUnmaskedValues","enableCoordinatesMasking"],$=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._requireParseFields=o(),this._requireParseFields.set(y,y),this._requireParseFields.set(v,v),this._requireParseFields.set(k,k),this._requireParseFields.set(x,x),this._requireParseFields.set(b,b),this._configurationList={},this.configDefault={logLevel:F,isCrossdomain:!1,isGfxRendering:!1,isAudioDetectFeature:!1,enableEmuidFeature:!1,crossDomainsList:[],crossDomainsTimeout:5e3,orientationEventsSamplePeriod:300,orientationEventsThreshold:1,stateChangeEnabled:!1,accelerometerEventsSamplePeriod:0,dataQPassWorkerInterval:500,gyroEventsSamplePeriod:0,gyroEventsThreshold:.3,isContextPropsFeature:!0,isEnabled:!0,isResetEveryLoad:!1,isScrollCollect:!0,isVMDetection:!0,isAudioDetection:!1,wupStatisticsLogIntervalMs:3e4,heartBeatMessageInterval:5e3,resetSessionApiThreshold:2e4,wupMessageRequestTimeout:5e3,logMessageRequestTimeout:5e3,slaveChannelHandshakeTimeout:6e4,slaveAliveMessageInterval:100,forceDynamicDataWupDispatchSettings:!0,dataWupDispatchRateSettings:Q.defaultDynamicWupDispatchRateConfiguration,logWupDispatchRateSettings:{type:"constant",initialRateValueMs:2500},serverCommunicationSettings:{queueLoadThreshold:100},collectKeyRegionValue:!1,isMutationObserver:!0,collectCustomElementAttribute:!0,isCaptureKeyEvents:!1,locationEventsTimeoutMsec:1e4,isMotionAroundTouchEnabled:!0,motionPaddingAroundTouchMSec:3e3,isMotionOnSessionStart:!0,motionPaddingOnSessionStartMSec:2e4,keyEventsMaskSpecialChars:!1,collectSelectElementBlurAndFocusEvents:!1,enableUnmaskedValues:!1,allowedUnmaskedValuesList:[],wupMessageNumToRetry:5,wupMessageRetryInterval:1e3,wupIncrementalGrowthBetweenFailures:3500,wupMaxIntervalBetweenFailures:16e3,logMessageNumToRetry:5,logMessageRetryInterval:1e3,logIncrementalGrowthBetweenFailures:3500,logMaxIntervalBetweenFailures:16e3,cdsNumExpirationTime:60,enableCoordinatesMasking:!1,acknowledgeDataDispatchingRate:3e3,offloadFontsCollectionEnabled:!1,passwordIdMaskingList:[],isFontWidthFeature:!1,isFontMathFeature:!1,isFontEmojiFeature:!1,isStorageFeature:!1,isKeyboardLayoutFeature:!1,isScreenHighResFeature:!1,isBatteryStatusFeature:!1,isNavigatorFeature:!1,isWebglFeature:!1,isWebRTCFeature:!1,isSpeechVoicesFeature:!1,isDRMFeature:!1,isBrowserExtensionsFeature:!1,isAdblockerListsFeature:!1,elementUniqueIDConfiguration:{componentsFormat:"{tagName}_{index}_{id}_{className}_{ariaLabel}_{containerInfo}_{hierarchyPath}",hierarchyFormat:"{tagName}_{index}",enabledTags:["input","textarea","button","select","div","span"]},fontCollection:JSON.stringify({migrationMode:V.DUAL_COLLECTION_V1_PRIORITY,v2:{batchSize:10,timeoutGap:0}}),enableAutoElementId:!0},this.loadConfigurations(this.configDefault)},(e=[{key:"isConfigurationUpdatedFromServer",value:function(){return!this._isDefaultConfiguration}},{key:"loadConfigurations",value:function(t,e){var r=this;t&&(this._isDefaultConfiguration=t===this.configDefault,Object.keys(t).forEach((function(n){if(e||r._isDefaultConfiguration||!J.includes(n)){var i=t[n];if(r._requireParseFields.has(n)){var o=r._tryParseConfigurationValue(i);o&&(i=o)}r._configurationList[n]=i}})))}},{key:"get",value:function(t){return this._configurationList[t]}},{key:"set",value:function(t,e){this._configurationList[t]=e}},{key:"getAll",value:function(){return this._configurationList}},{key:"_tryParseConfigurationValue",value:function(t){if("string"!=typeof t)return null;try{return JSON.parse(t)}catch(t){}return null}}])&&G(t.prototype,e),r&&G(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function tt(t){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tt(t)}function et(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rt(n.key),n)}}function rt(t){var e=function(t,e){if("object"!=tt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tt(e)?e:e+""}var nt=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._listeners=[]},(e=[{key:"subscribe",value:function(t){this._listeners.push(t)}},{key:"publish",value:function(t){for(var e=0,r=this._listeners.length;e<r;e++)this._listeners[e](t)}},{key:"unsubscribe",value:function(t){for(var e=0,r=this._listeners.length;e<r;e++)if(t===this._listeners[e]){this._listeners.splice(e,1);break}}}])&&et(t.prototype,e),r&&et(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function it(t){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},it(t)}function ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function st(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ut(n.key),n)}}function at(t,e,r){return e&&st(t.prototype,e),r&&st(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ut(t){var e=function(t,e){if("object"!=it(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=it(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==it(e)?e:e+""}var ft=function(){return at((function t(){ot(this,t)}),null,[{key:"setLogger",value:function(t){this._logger=t}},{key:"attachSessionIdentifiers",value:function(t){if(this._logger)return this._logger.attachSessionIdentifiers(t)}},{key:"isDebug",value:function(){if(this._logger)return this._logger.isDebug()}},{key:"error",value:function(t,e){this._logger&&this._logger.error(t,e||null)}},{key:"warn",value:function(t,e){this._logger&&this._logger.warn(t,e||null)}},{key:"trace",value:function(t){this._logger&&this._logger.trace(t)}},{key:"debug",value:function(t){this._logger&&this._logger.debug(t)}},{key:"info",value:function(t){this._logger&&this._logger.info(t)}}])}(),ct=function(){return at((function t(e,r){ot(this,t),this._logBridge=e,this._logLevel=r||F,this._sessionIdentifiers={}}),[{key:"attachSessionIdentifiers",value:function(t){Object.assign(this._sessionIdentifiers,t)}},{key:"trace",value:function(t){this._sendToLogBridge(t,L)}},{key:"debug",value:function(t){this._sendToLogBridge(t,L)}},{key:"info",value:function(t){this._sendToLogBridge(t,F)}},{key:"warn",value:function(t,e){this._sendToLogBridge(t,H,e)}},{key:"error",value:function(t,e){this._sendToLogBridge(t,W,e)}},{key:"isDebug",value:function(){return this._logLevel===L}},{key:"updateLogConfig",value:function(t){this._logLevel=t.get(E)||this._logLevel,this._logBridge.setLogLevel(this._logLevel),this._logBridge.clearLogEntriesByLogLevel(this._logLevel)}},{key:"_sendToLogBridge",value:function(t,e,r){e>=this._logLevel&&(r&&r.stack&&(t+=" ;stack: ".concat(r.stack)),this._logBridge.log(t,e,this._sessionIdentifiers))}}])}();function lt(t){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lt(t)}function ht(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dt(n.key),n)}}function dt(t){var e=function(t,e){if("object"!=lt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lt(e)?e:e+""}var pt=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.onServerStateUpdated=new nt,this.reset()},e=[{key:"getSts",value:function(){return this._sts}},{key:"getStd",value:function(){return this._std}},{key:"getSid",value:function(){return this._sid}},{key:"setCid",value:function(t){this._cid=t}},{key:"getCid",value:function(){return this._cid}},{key:"getCsid",value:function(){return this._csid}},{key:"getPsid",value:function(){return this._psid}},{key:"getMuid",value:function(){return this._muid}},{key:"getContextName",value:function(){return this._contextName}},{key:"getRequestId",value:function(){return this._requestId}},{key:"getWupDispatchRate",value:function(){return this._wupDispatchRate}},{key:"getBrand",value:function(){return this._brand}},{key:"setSts",value:function(t){this._sts=t}},{key:"setStd",value:function(t){this._std=t}},{key:"setSid",value:function(t){this._sid=t}},{key:"setCsid",value:function(t){this._csid=t}},{key:"setPsid",value:function(t){this._psid=t}},{key:"setMuid",value:function(t){this._muid=t||null}},{key:"setOtt",value:function(t){this._ott=t}},{key:"getOtt",value:function(){return this._ott}},{key:"setContextName",value:function(t){this._contextName=t}},{key:"setRequestId",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._requestId=t,e&&this._publish(),this._requestId}},{key:"setWupDispatchRate",value:function(t){t?this._wupDispatchRate=t:ft.warn("Wup dispatch rate of ".concat(t," is invalid. Ignoring update"))}},{key:"setBrand",value:function(t){this._brand=t}},{key:"setAgentType",value:function(t){this._agent_type=t}},{key:"getAgentType",value:function(){return this._agent_type}},{key:"setAgentId",value:function(t){this._agent_id=t}},{key:"getAgentId",value:function(){return this._agent_id}},{key:"markConfigurationRequested",value:function(){this._hasConfiguration?ft.warn("We already have configuration. Ignoring the attempt to mark a pending configuration request."):this._hasPendingConfigurationRequest=!0}},{key:"markConfigurationReceived",value:function(){this._hasConfiguration?ft.warn("Marking that we received configuration although we already received configuration from the server. We shouldn\'t have received it again."):this._hasPendingConfigurationRequest||ft.warn("Marking that we received configurations although we didn\'t have a pending request for configurations."),this._hasPendingConfigurationRequest=!1,this._hasConfiguration=!0}},{key:"getHasConfiguration",value:function(){return this._hasConfiguration}},{key:"getHasPendingConfigurationRequest",value:function(){return this._hasPendingConfigurationRequest}},{key:"incrementRequestId",value:function(){return this._requestId++,this._publish(),this._requestId}},{key:"resetRequestId",value:function(){this._requestId=0}},{key:"reset",value:function(){this._ott=null,this._sts=null,this._std=null,this._sid=null,this._cid=null,this._csid=null,this._muid=null,this._contextName=null,this._requestId=0,this._wupDispatchRate=5e3,this._hasConfiguration=!1,this._hasPendingConfigurationRequest=!1,this._brand=null,this._agent_type=null,this._agent_id=null,this._baseServerUrl=null,this._protocolType=null,this._shouldMinifyUri=!1}},{key:"setBaseServerUrl",value:function(t){this._baseServerUrl=t}},{key:"getBaseServerUrl",value:function(){return this._baseServerUrl}},{key:"setProtocolType",value:function(t){this._protocolType=t}},{key:"setShouldMinifyUri",value:function(t){this._shouldMinifyUri=t}},{key:"getShouldMinifyUri",value:function(){return this._shouldMinifyUri}},{key:"getProtocolType",value:function(){return this._protocolType}},{key:"_publish",value:function(){this.onServerStateUpdated.publish({requestId:this._requestId,sid:this._sid,sts:this._sts,std:this._std,ott:this._ott})}}],e&&ht(t.prototype,e),r&&ht(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function yt(t){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt(t)}function vt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gt(n.key),n)}}function gt(t){var e=function(t,e){if("object"!=yt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=yt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yt(e)?e:e+""}var mt=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"build",value:function(t){return t.getInternalMessage()}}])&&vt(t.prototype,e),r&&vt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function bt(t){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bt(t)}function _t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wt(n.key),n)}}function wt(t){var e=function(t,e){if("object"!=bt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bt(e)?e:e+""}var St=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._buffer=[]},(e=[{key:"hasItems",value:function(){return this.length()>0}},{key:"length",value:function(){return this._buffer.length}},{key:"enqueue",value:function(t){this._buffer.push(t)}},{key:"enqueueToHead",value:function(t){this._buffer.unshift(t)}},{key:"dequeue",value:function(){return this._buffer.shift()}},{key:"getItem",value:function(t){return this._buffer[t]}}])&&_t(t.prototype,e),r&&_t(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function kt(t){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kt(t)}function Et(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xt(n.key),n)}}function xt(t){var e=function(t,e){if("object"!=kt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kt(e)?e:e+""}var Bt,Ct,Rt,Pt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return e=t,n=[{key:"addEventListener",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.isPassiveSupported?t.addEventListener(e,r,{capture:n,passive:i,once:o}):t.addEventListener?t.addEventListener(e,r,n):t.attachEvent("on"+e,r)}},{key:"removeEventListener",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.removeEventListener?t.removeEventListener(e,r,n):t.detachEvent("on"+e,r)}},{key:"outerHTML",value:function(t){return t.outerHTML||(new XMLSerializer).serializeToString(t)}},{key:"onDocumentBody",value:function(t,e){t.document.body?e():window.addEventListener?window.addEventListener("DOMContentLoaded",e,!0):window.attachEvent("onload",e)}},{key:"onPageLoad",value:function(e,r){t.addEventListener(e,"load",r,!0),(e.contentWindow&&"complete"===e.contentWindow.document.readyState||e.document&&"complete"===e.document.readyState)&&r()}},{key:"awaitWindowDocumentReady",value:function(t){var e=this;return new Promise((function(r,n){try{e.onWindowDocumentReady(t,(function(){r()}))}catch(t){n(t)}}))}},{key:"onWindowDocumentReady",value:function(e,r){var n=window.addEventListener?"DOMContentLoaded":"load";if("complete"===e.document.readyState||"interactive"===e.document.readyState)r();else{var i=function(){t.removeEventListener(e,n,i,!0),r()};t.addEventListener(e,n,i,!0)}}},{key:"isWindowDocumentReady",value:function(t){return t&&"complete"===t.document.readyState}},{key:"canAccessIFrame",value:function(t){var e=null;try{e=(t.contentDocument||t.contentWindow.document).body.innerHTML}catch(t){}return null!==e}},{key:"matches",value:function(t,e){var r=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector||function(t){var e=this.document||this.ownerDocument;if(!e)return!1;for(var r=e.querySelectorAll(t),n=r.length;--n>=0&&(r.item?r.item(n):r[n])!==this;);return n>-1};return r.call(t,e)}},{key:"isWebWorkerFetchSupported",value:function(){var t="Request"in self,e="fetch"in self;if(!t)return!1;var r="keepalive"in Request.prototype;return e&&r}},{key:"isSubtleCryptoSupported",value:function(){return"SubtleCrypto"in self}}],(r=null)&&Et(e.prototype,r),n&&Et(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();Bt=Pt,Ct="isPassiveSupported",Rt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}(),(Ct=xt(Ct))in Bt?Object.defineProperty(Bt,Ct,{value:Rt,enumerable:!0,configurable:!0,writable:!0}):Bt[Ct]=Rt;var At="X-h",It=r(396),Tt=r.n(It);function Mt(t){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mt(t)}function Ot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Dt(n.key),n)}}function Dt(t){var e=function(t,e){if("object"!=Mt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Mt(e)?e:e+""}var jt=function(){return function(t,e,r){return e&&Ot(t.prototype,e),r&&Ot(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),null,[{key:"hashSha256",value:function(t,e){if(!Pt.isSubtleCryptoSupported())return ft.info("HashService: SubtleCrypto is not supported using fallback hashing"),void e(null,Tt().SHA256(t).toString(Tt().enc.Hex));var r=(new TextEncoder).encode(t);crypto.subtle.digest("SHA-256",r).then((function(t){var r=Array.from(new Uint8Array(t)).map((function(t){return t.toString(16).padStart(2,"0")})).join("");e(null,r)})).catch((function(t){e(t)}))}}])}(),Ut="POST";function zt(t){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zt(t)}function Nt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Lt(n.key),n)}}function Lt(t){var e=function(t,e){if("object"!=zt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zt(e)?e:e+""}var Ft=function(){return function(t,e,r){return e&&Nt(t.prototype,e),r&&Nt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._requestBodyBuilder=e,this.updateSettings(r),this._workerUtils=n,this._acceptNoResponse=o,this._messageDescriptor=s,this.retryMessage=i,this._dataQueue=new St,this._awaitingServerResponse=!1,this._currentSentItem=null,this._sendRetryTimeoutId=null,this._shouldRetryToSendMessage=!1,this._messageIdentifier=0,this._enableRequestBodyHashing=!1,this._isPaused=!1}),[{key:"updateSettings",value:function(t){this._queueLoadThershold=t.queueLoadThreshold}},{key:"getRetryMessage",value:function(){return this.retryMessage}},{key:"updateEnableWupMessagesHashing",value:function(t){this._enableRequestBodyHashing=t}},{key:"sendMessage",value:function(t,e,r,n,i,o,s,a){var u=this;this._enqueueMessage(t,e,r,n,(function(t){u._onMessageSendSuccess(t,i)}),(function(t,e,r){u._onMessageSendFailure(t,e,r,o,s)}),a)}},{key:"flush",value:function(){this._flushData()}},{key:"setIsPaused",value:function(t){this._isPaused=t}},{key:"isReadyToSendData",value:function(){return!this._isPaused}},{key:"_onMessageSendSuccess",value:function(t,e){this._awaitingServerResponse=!1,this._currentSentItem=null,this._shouldRetryToSendMessage=!1,this.retryMessage.restartMessageSettings(),e(t),this._processNextQueueItem()}},{key:"_onMessageSendFailure",value:function(t,e,r,n,i){if(!this._currentSentItem)return ft.error("An unexpected error has occurred while handling a ".concat(this._messageDescriptor," message send failure. Could not find sent item value. Moving to next queued item")),void this._processNextQueueItem();ft.warn("Failed sending ".concat(this._messageDescriptor," message #").concat(this._currentSentItem.identifier,". ").concat(this._buildFailureLog(t,e,r))),this._awaitingServerResponse=!1;var o=0===this._currentSentItem.maxNumberOfSendAttempts;!this._isPaused&&this.retryMessage.shouldReMessage(o)?(this._shouldRetryToSendMessage=!0,ft.info("Trying to send ".concat(this._messageDescriptor," message #").concat(this._currentSentItem.identifier," again. Number of send failures is ").concat(this.retryMessage.getNumberOfSendFailures())),this._prepareMessageForSendRetry(),n&&n(this.retryMessage.getNumberOfSendFailures())):(this._shouldRetryToSendMessage=!1,this.retryMessage.restartMessageSettings(),ft.warn("Discarding ".concat(this._messageDescriptor," message #").concat(this._currentSentItem.identifier," after ").concat(this.retryMessage.getNumberOfSendFailures()," failed send attempts.")),n&&n(this.retryMessage.getNumberOfSendFailures()),this._currentSentItem=null,i&&i(t),this._processNextQueueItem())}},{key:"_enqueueMessage",value:function(t,e,r,n,i,o,s){this._dataQueue.enqueue({identifier:this._messageIdentifier++,messageToSend:t,onSuccess:i,onError:o,timeout:e,maxNumberOfSendAttempts:r,serverUrl:s}),this._shouldRetryToSendMessage||(this._clearRetryTimeout(),n&&this._flushData(),this._awaitingServerResponse||this._processNextQueueItem(n))}},{key:"_processNextQueueItem",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._dataQueue.hasItems()||!r){var n=null;r?(n=this._dataQueue.dequeue(),this._currentSentItem=n):n=this._currentSentItem;var i=this._requestBodyBuilder.build(n.messageToSend,e);this._enableRequestBodyHashing?jt.hashSha256(i,(function(r,o){r?ft.error(r):t._sendProcessedQueueItem(i,n,e,o)})):this._sendProcessedQueueItem(i,n,e)}}},{key:"_sendProcessedQueueItem",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(Pt.isWebWorkerFetchSupported()&&r){var i=new Headers;n&&i.append(At,n);var o={method:Ut,headers:i,body:t,keepalive:!0};this._sendWithFetch(o,e.serverUrl)}else this._sendWithXMLHttpRequest(t,e,n);this._checkQueueLength()}},{key:"_sendWithFetch",value:function(t,e){this._currentSentItem=null,self.fetch(e,t),ft.info("Flush data was sent by fetch")}},{key:"_sendWithXMLHttpRequest",value:function(t,e,r){this._awaitingServerResponse=!0,this._workerUtils.getPostUrl(e.serverUrl,Ut,t,e.onSuccess,e.onError,this._acceptNoResponse,e.timeout,r)}},{key:"_checkQueueLength",value:function(){this._dataQueue.length()>this._queueLoadThershold&&ft.warn("Data queue has ".concat(this._dataQueue.length()," items in queue. Might indicate slow\\\\unstable communication issues."))}},{key:"_flushData",value:function(){for(;this._dataQueue.hasItems();)this._processNextQueueItem(!0)}},{key:"_prepareMessageForSendRetry",value:function(){var t=this;this._clearRetryTimeout(),this.retryMessage.updateRetryInterval();var e=this.retryMessage.getNextInterval();this._sendRetryTimeoutId=setTimeout((function(){t._processNextQueueItem(!1,!1)}),e)}},{key:"_clearRetryTimeout",value:function(){this._sendRetryTimeoutId&&clearTimeout(this._sendRetryTimeoutId)}},{key:"_buildFailureLog",value:function(t,e,r){var n="";return t&&(n+="Response Text: ".concat(t,".")),e&&(n+="Status: ".concat(e,".")),r&&(n+="Status Text: ".concat(r,".")),n}}])}();function Ht(t){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ht(t)}function Wt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qt(n.key),n)}}function qt(t){var e=function(t,e){if("object"!=Ht(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ht(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ht(e)?e:e+""}var Yt=function(){return function(t,e,r){return e&&Wt(t.prototype,e),r&&Wt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),[{key:"setData",value:function(t){this._data=t}},{key:"getInternalMessage",value:function(){return this._data}}])}();function Zt(t){return Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zt(t)}function Vt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kt(n.key),n)}}function Kt(t){var e=function(t,e){if("object"!=Zt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Zt(e)?e:e+""}var Gt=function(){return function(t,e,r){return e&&Vt(t.prototype,e),r&&Vt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataPacker=e}),[{key:"build",value:function(t){var e=new Yt;return e.setData(this._dataPacker.pack(t)),e}}])}(),Xt=self.btoa?self.btoa.bind(self):function(t){for(var e,r,n=String(t),i="",o=0,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.charAt(0|o)||(s="=",o%1);i+=s.charAt(63&e>>8-o%1*8)){if((r=n.charCodeAt(o+=3/4))>255)throw new Error("\'btoa\' failed: The string to be encoded contains characters outside of the Latin1 range.");e=e<<8|r}return i};function Qt(t){return Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qt(t)}function Jt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$t(n.key),n)}}function $t(t){var e=function(t,e){if("object"!=Qt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Qt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qt(e)?e:e+""}var te=r(273),ee=r(860),re=function(){return function(t,e,r){return e&&Jt(t.prototype,e),r&&Jt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._compressData=function(t){var e=te.encode(t);return e=ee.deflateRaw(e,{to:"string"}),Xt(e)}}),[{key:"pack",value:function(t){return this._getCompressedData(t)}},{key:"_getCompressedData",value:function(t){return this._compressData(t)}}])}(),ne=5,ie=1,oe=1e3,se=1e3,ae=100,ue=1e4,fe=3500,ce=0,le=1e4,he=16e3,de=100,pe=3e5;function ye(t){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ye(t)}function ve(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ge(n.key),n)}}function ge(t){var e=function(t,e){if("object"!=ye(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ye(e)?e:e+""}var me=function(){return function(t,e,r){return e&&ve(t.prototype,e),r&&ve(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.messageNumToRetry=e,this.messageRetryInterval=r,this.incrementalGrowthBetweenFailures=n,this.maxIntervalBetweenFailures=i,this.init()}),[{key:"init",value:function(){this._validateReMessageSettings()}},{key:"getMessageNumToRetry",value:function(){return this.messageNumToRetry}},{key:"getMessageRetryInterval",value:function(){return this.messageRetryInterval}},{key:"getMaxIntervalBetweenFailures",value:function(){return this.maxIntervalBetweenFailures}},{key:"getIncrementalGrowthBetweenFailures",value:function(){return this.incrementalGrowthBetweenFailures}},{key:"_validateReMessageSettings",value:function(){var t="The provided configuration is invalid, it must be  ";if(isNaN(this.messageNumToRetry))ft.warn("".concat(t," a number. setting to default: ").concat(ne)),this.messageNumToRetry=ne;else{var e=parseInt(this.messageNumToRetry);this.messageNumToRetry=e}(this.messageNumToRetry<ie||this.messageNumToRetry>oe)&&(ft.warn("messageNumToRetry - ".concat(t," in the following range: \\n            ").concat(ie," - ").concat(oe," setting to default: ").concat(ne)),this.messageNumToRetry=ne),(this.messageRetryInterval<ae||this.messageRetryInterval>ue)&&(ft.warn("messageRetryInterval - ".concat(t," in the following range: \\n            [").concat(ae," - ").concat(ue,"], \\n            setting to default: ").concat(se)),this.messageRetryInterval=se),(this.incrementalGrowthBetweenFailures<ce||this.incrementalGrowthBetweenFailures>le)&&(ft.warn("incrementalGrowthBetweenFailures - ".concat(t," in the following range: \\n            [").concat(ce," - ").concat(le,"],\\n                setting to default: ").concat(fe)),this.incrementalGrowthBetweenFailures=fe),(this.maxIntervalBetweenFailures<de||this.maxIntervalBetweenFailures>pe)&&(ft.warn("maxIntervalBetweenFailures - ".concat(t," in the following range: \\n            [").concat(de," - ").concat(pe,"]\\n                setting to default: ").concat(he)),this.maxIntervalBetweenFailures=he),this.maxIntervalBetweenFailures<this.messageRetryInterval&&(ft.warn(" maxIntervalBetweenFailures - ".concat(t," greater than minimum interval: \\n            [").concat(de,"], setting to defaults:\\n                ").concat(he)),this.maxIntervalBetweenFailures=he,this.messageRetryInterval=se)}}])}();function be(t){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},be(t)}function _e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,we(n.key),n)}}function we(t){var e=function(t,e){if("object"!=be(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==be(e)?e:e+""}var Se=function(){return function(t,e,r){return e&&_e(t.prototype,e),r&&_e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.logMessageNumToRetry=e.get(A),this.logMessageRetryInterval=e.get(I),this.logIncrementalGrowthBetweenFailures=e.get(T),this.logMaxIntervalBetweenFailures=e.get(M)}),[{key:"createReMessageSettings",value:function(){return new me(this.logMessageNumToRetry,this.logMessageRetryInterval,this.logIncrementalGrowthBetweenFailures,this.logMaxIntervalBetweenFailures)}}])}();function ke(t){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ke(t)}function Ee(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xe(n.key),n)}}function xe(t){var e=function(t,e){if("object"!=ke(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ke(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ke(e)?e:e+""}var Be=function(){return function(t,e,r){return e&&Ee(t.prototype,e),r&&Ee(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._serverCommunicator=e,this._logMessageBuilder=r,this._configurationRepository=n,this._serverUrl=null,this._MESSAGE_SEND_RETRIES=5,this._requestTimeout=this._configurationRepository.get(S)}),[{key:"setServerUrl",value:function(t){this._serverUrl=t}},{key:"setIsPaused",value:function(t){this._serverCommunicator.setIsPaused(t)}},{key:"sendData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._serverUrl){var r=this._logMessageBuilder.build(t);this._serverCommunicator.sendMessage(r,this._requestTimeout,this._serverCommunicator.getRetryMessage().getMessageNumToRetry(),e,this._onSendDataSuccess.bind(this),null,this._onSendDataFailure.bind(this),this._serverUrl),e&&this._serverCommunicator.flush()}else ft.error("Cannot send log message: server URL is not set")}},{key:"isReady",value:function(){return this._serverCommunicator.isReadyToSendData()}},{key:"setRequestTimeout",value:function(t){this._requestTimeout=t}},{key:"setConfigurationLogMessage",value:function(){this._configurationWraperLogMessage=new Se(this._configurationRepository),this._reLogMessageSettings=this._configurationWraperLogMessage.createReMessageSettings(),this._serverCommunicator.getRetryMessage().updateSettings(this._reLogMessageSettings)}},{key:"_onSendDataSuccess",value:function(){}},{key:"_onSendDataFailure",value:function(t){ft.warn("Failed sending log message. Error: ".concat(t,"."))}}])}();function Ce(t){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ce(t)}function Re(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Pe(n.key),n)}}function Pe(t){var e=function(t,e){if("object"!=Ce(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ce(e)?e:e+""}var Ae=function(){return function(t,e,r){return e&&Re(t.prototype,e),r&&Re(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._statisticsLogIntervalMs=e,this.resetCounters(),this._setPeriodicStatisticsLog()}),[{key:"getSentWupsCount",value:function(){return this._sentWupsCount}},{key:"incrementSentWupCount",value:function(){this._sentWupsCount++,this._sentWupsInCurrentIntervalCount++}},{key:"updateSettings",value:function(t){this._statisticsLogIntervalMs=t,this._setPeriodicStatisticsLog()}},{key:"resetCounters",value:function(){this._sentWupsCount=0,this._sentWupsInCurrentIntervalCount=0}},{key:"stop",value:function(){this._stopPeriodicStatisticsLog()}},{key:"_writeStatisticsLog",value:function(){0!==this._sentWupsInCurrentIntervalCount&&(ft.debug("Sent ".concat(this._sentWupsInCurrentIntervalCount," wup in the last ").concat(this._statisticsLogIntervalMs," ms. Sent a total of ").concat(this._sentWupsCount," in the session")),this._sentWupsInCurrentIntervalCount=0)}},{key:"_stopPeriodicStatisticsLog",value:function(){this._periodicLogIntervalId&&clearInterval(this._periodicLogIntervalId)}},{key:"_setPeriodicStatisticsLog",value:function(){this._stopPeriodicStatisticsLog(),this._periodicLogIntervalId=setInterval(this._writeStatisticsLog.bind(this),this._statisticsLogIntervalMs)}}])}(),Ie="incremental",Te="constant",Me="dynamic";function Oe(t){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oe(t)}function De(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,je(n.key),n)}}function je(t){var e=function(t,e){if("object"!=Oe(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Oe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Oe(e)?e:e+""}var Ue=function(){return function(t,e,r){return e&&De(t.prototype,e),r&&De(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.updateSettings(e)}),[{key:"getRate",value:function(){return this._currentRate}},{key:"updateSettings",value:function(t){if(t.type!==Te)throw new Error("Invalid settings provided to constant calculator");this._currentRate=t.initialRateValueMs}}])}();function ze(t){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ze(t)}function Ne(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Le(n.key),n)}}function Le(t){var e=function(t,e){if("object"!=ze(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ze(e)?e:e+""}var Fe=function(){return function(t,e,r){return e&&Ne(t.prototype,e),r&&Ne(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._wupStatisticsService=r,this.updateSettings(e)}),[{key:"getRate",value:function(){if(this._wupStatisticsService.getSentWupsCount()<this._incrementStartWupSendCount)return this._currentRate;var t=this._currentRate+this._incrementStepMs;return t<=this._incrementStopMs&&(this._currentRate=t),this._currentRate}},{key:"updateSettings",value:function(t){if(t.type!==Ie)throw new Error("Invalid settings provided to incremental calculator");this._currentRate=t.initialRateValueMs,this._incrementStepMs=t.incrementStepMs,this._incrementStopMs=t.incrementStopMs,this._incrementStartWupSendCount=t.incrementStartWupSendCount}}])}();function He(t){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},He(t)}function We(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qe(n.key),n)}}function qe(t){var e=function(t,e){if("object"!=He(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=He(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==He(e)?e:e+""}var Ye=function(){return function(t,e,r){return e&&We(t.prototype,e),r&&We(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._wupServerSessionState=e}),[{key:"getRate",value:function(){return this._wupServerSessionState.getWupDispatchRate()}},{key:"updateSettings",value:function(){}}])}();function Ze(t){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ze(t)}function Ve(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ke(n.key),n)}}function Ke(t){var e=function(t,e){if("object"!=Ze(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ze(e)?e:e+""}var Ge=function(){return function(t,e,r){return e&&Ve(t.prototype,e),r&&Ve(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._wupStatisticsService=e,this._wupServerSessionState=r}),[{key:"create",value:function(t){if(t.type===Te)return new Ue(t);if(t.type===Ie)return new Fe(t,this._wupStatisticsService);if(t.type===Me)return new Ye(this._wupServerSessionState);throw new Error("Unsupported dispatch rate type ".concat(t.type))}}])}();function Xe(t){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xe(t)}function Qe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Je(n.key),n)}}function Je(t){var e=function(t,e){if("object"!=Xe(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Xe(e)?e:e+""}var $e=function(){return function(t,e,r){return e&&Qe(t.prototype,e),r&&Qe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._serverClient=e,this._aggregator=r,this._wupDispatchRateCalculatorFactory=n,this._wupDispatchRateSettings=i,this._wupDispatchRateCalculator=this._wupDispatchRateCalculatorFactory.create(this._wupDispatchRateSettings),this._sendToServerInterval=this._wupDispatchRateCalculator.getRate(),this._setDispatchInterval(this._sendToServerInterval)}),[{key:"add",value:function(t){this._aggregator.add(t)}},{key:"sendIfRequired",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0===this._sendToServerInterval||t)&&this._sendToServer(t)}},{key:"updateByConfig",value:function(t){t&&(t.type!==this._wupDispatchRateSettings.type?this._wupDispatchRateCalculator=this._wupDispatchRateCalculatorFactory.create(t):this._wupDispatchRateCalculator.updateSettings(t),this._sendToServerInterval=this._wupDispatchRateCalculator.getRate(),this._setDispatchInterval(this._sendToServerInterval),this._wupDispatchRateSettings=t)}},{key:"scheduleNextDispatching",value:function(){var t=this._wupDispatchRateCalculator.getRate();t!==this._sendToServerInterval&&(this._sendToServerInterval=t,this._setDispatchInterval(this._sendToServerInterval))}},{key:"_sendToServer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];ft.debug("Sending a message to the server"),this._serverClient.isReady()?this._aggregator.isEmpty()||(this._serverClient.sendData(this._aggregator.take(),t),this.scheduleNextDispatching()):ft.info("".concat(this._serverClient.constructor.name," is not ready. Message will not be sent to server"))}},{key:"_setDispatchInterval",value:function(t){this._sendIntervalId&&(clearInterval(this._sendIntervalId),this._sendIntervalId=null),0!==t&&(this._sendIntervalId=setInterval(this._sendToServer.bind(this),t))}}])}();function tr(t){return tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tr(t)}function er(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rr(n.key),n)}}function rr(t){var e=function(t,e){if("object"!=tr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tr(e)?e:e+""}var nr=function(){return function(t,e,r){return e&&er(t.prototype,e),r&&er(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.reset()}),[{key:"setLogLevel",value:function(t){this._logLevel=t}},{key:"add",value:function(t){var e=t.data;if(!e)throw new Error("Unable to add log message. Missing data field");(!e.level||e.level>=this._logLevel)&&this._Q.push(e)}},{key:"take",value:function(){var t=this._Q;return this.reset(),t}},{key:"reset",value:function(){this._Q=[],this.setLogLevel(void 0===this._logLevel?F:this._logLevel)}},{key:"isEmpty",value:function(){return 0===this._Q.length}},{key:"filterOutByLogLevel",value:function(t){this._Q=this._Q.filter((function(e,r,n){return e.level>=t}))}}])}();function ir(t){return ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ir(t)}function or(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sr(n.key),n)}}function sr(t){var e=function(t,e){if("object"!=ir(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ir(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ir(e)?e:e+""}var ar=function(){return function(t,e,r){return e&&or(t.prototype,e),r&&or(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataDispatcher=e}),[{key:"process",value:function(t){if(!t)throw new Error("Invalid message received for processing.");var e=!1;if(Array.isArray(t))for(var r=0,n=t.length;r<n;r++)e=this._processSingleMessage(t[r])||e;else e=this._processSingleMessage(t)||e;this._dataDispatcher.sendIfRequired(e)}},{key:"_processSingleMessage",value:function(t){if(this._isEmptyFlushMessage(t))return!0;var e=!1;if(t.shouldFlush&&(e=!0),!this._isDataValid(t)){var r="Received a message with invalid structure. Missing eventName or Data fields";throw ft.error(r),new Error(r)}return this._dataDispatcher.add(t),e}},{key:"_isEmptyFlushMessage",value:function(t){return"flushData"===t.eventName}},{key:"_isDataValid",value:function(t){return t.eventName&&t.data}}])}(),ur="js";function fr(t){return fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fr(t)}function cr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lr(n.key),n)}}function lr(t){var e=function(t,e){if("object"!=fr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fr(e)?e:e+""}var hr=function(){return function(t,e,r){return e&&cr(t.prototype,e),r&&cr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageStruct={ds:ur}}),[{key:"getDataSource",value:function(){return this._messageStruct.ds}},{key:"getSid",value:function(){return this._messageStruct.cdsnum}},{key:"setSid",value:function(t){this._messageStruct.cdsnum=t}},{key:"getCsid",value:function(){return this._messageStruct.csid}},{key:"setCsid",value:function(t){this._messageStruct.csid=t}},{key:"getPsid",value:function(){return this._messageStruct.psid}},{key:"setPsid",value:function(t){this._messageStruct.psid=t}},{key:"getMuid",value:function(){return this._messageStruct.muid}},{key:"setMuid",value:function(t){this._messageStruct.muid=t}},{key:"getContextName",value:function(){return this._messageStruct.context_name}},{key:"setContextName",value:function(t){this._messageStruct.context_name=t}},{key:"getRequestId",value:function(){return this._messageStruct.requestId}},{key:"setRequestId",value:function(t){this._messageStruct.requestId=t}},{key:"getSts",value:function(){return this._messageStruct.sts}},{key:"setSts",value:function(t){this._messageStruct.sts=t}},{key:"getStd",value:function(){return this._messageStruct.std}},{key:"setStd",value:function(t){this._messageStruct.std=t}},{key:"setFlush",value:function(t){this._messageStruct.f=t}},{key:"getConfigurationName",value:function(){return this._messageStruct.c}},{key:"setConfigurationName",value:function(t){this._messageStruct.c=t}},{key:"getData",value:function(){return this._messageStruct.d}},{key:"setData",value:function(t){this._messageStruct.d=t}},{key:"getInternalMessage",value:function(){return this._messageStruct}},{key:"setOtt",value:function(t){this._messageStruct.ott=t}},{key:"getOtt",value:function(){return this._messageStruct.ott}},{key:"setAgentType",value:function(t){this._messageStruct.agent_type=t}},{key:"getAgentType",value:function(){return this._messageStruct.agent_type}},{key:"setAgentId",value:function(t){this._messageStruct.agent_id=t}},{key:"getAgentId",value:function(){return this._messageStruct.agent_id}}])}();function dr(t){return dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dr(t)}function pr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yr(n.key),n)}}function yr(t){var e=function(t,e){if("object"!=dr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=dr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dr(e)?e:e+""}var vr=function(){return function(t,e,r){return e&&pr(t.prototype,e),r&&pr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._wupServerSessionState=e,this._dataPacker=r}),[{key:"build",value:function(t,e){var r=new hr;this._updateDataWithBrand(e),r.setSid(this._wupServerSessionState.getSid()),r.setCsid(this._wupServerSessionState.getCsid()),r.setPsid(this._wupServerSessionState.getPsid()),r.setMuid(this._wupServerSessionState.getMuid()),r.setContextName(this._wupServerSessionState.getContextName()),r.setRequestId(this._wupServerSessionState.getRequestId()),r.setAgentType(this._wupServerSessionState.getAgentType()),r.setAgentId(this._wupServerSessionState.getAgentId()),this._wupServerSessionState.getSts()&&this._wupServerSessionState.getStd()&&(r.setSts(this._wupServerSessionState.getSts()),r.setStd(this._wupServerSessionState.getStd()));var n=this._wupServerSessionState.getOtt();return n&&r.setOtt(n),t===ur?r.setConfigurationName(t):r.setData([this._dataPacker.pack(e)]),r}},{key:"_updateDataWithBrand",value:function(t){var e=this._wupServerSessionState.getBrand();e&&(t.static_fields||(t.static_fields=[]),t.static_fields.push(["brand",e]))}}])}();function gr(t){return gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gr(t)}function mr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,br(n.key),n)}}function br(t){var e=function(t,e){if("object"!=gr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gr(e)?e:e+""}var _r=function(){return function(t,e,r){return e&&mr(t.prototype,e),r&&mr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._wupServerSessionState=e}),[{key:"build",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.setSid(this._wupServerSessionState.getSid()),t.setSts(this._wupServerSessionState.getSts()),t.setStd(this._wupServerSessionState.getStd()),t.setOtt(this._wupServerSessionState.getOtt()),e&&t.setFlush(ur),JSON.stringify(t.getInternalMessage())}}])}(),wr="ConfigurationLoadedEvent",Sr="NewSessionStartedEvent",kr="WupDispatchRateUpdatedEvent",Er="ServerStateUpdatedEvent",xr="ServerRestoredMuidEvent",Br="ServerNewAgentIdEvent",Cr="WorkerSystemStatusEvent";function Rr(t){return Rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rr(t)}function Pr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ar(n.key),n)}}function Ar(t){var e=function(t,e){if("object"!=Rr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Rr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Rr(e)?e:e+""}var Ir=function(){return function(t,e,r){return e&&Pr(t.prototype,e),r&&Pr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._wupServerSessionState=e,this._messageBus=r,this._configurationRepository=n}),[{key:"process",value:function(t,e){var r=!1;e&&(this._wupServerSessionState.markConfigurationReceived(),this._configurationRepository.loadConfigurations(t),r=!0),t.sts&&this._wupServerSessionState.setSts(t.sts),t.std&&this._wupServerSessionState.setStd(t.std),t.ott&&this._wupServerSessionState.setOtt(t.ott),t.reset_session&&t.new_sid&&this._wupServerSessionState.setSid(t.new_sid),t.rmd&&(this._wupServerSessionState.setMuid(t.rmd),this._messageBus.publish(xr,t.rmd)),t.agent_id&&(this._wupServerSessionState.setAgentId(t.agent_id),this._messageBus.publish(Br,t.agent_id)),this._messageBus.publish(Er,{requestId:this._wupServerSessionState.getRequestId(),sid:this._wupServerSessionState.getSid(),sts:this._wupServerSessionState.getSts(),std:this._wupServerSessionState.getStd(),ott:this._wupServerSessionState.getOtt()}),r&&this._messageBus.publish(wr,this._configurationRepository),t.reset_session&&(t.new_sid?this._messageBus.publish(Sr,t.new_sid):ft.warn("Received a reset session flag from the server without a new sid. Ignoring reset.")),t.nextWupInterval?t.nextWupInterval!==this._wupServerSessionState.getWupDispatchRate()&&(this._wupServerSessionState.setWupDispatchRate(t.nextWupInterval),this._messageBus.publish(kr,this._wupServerSessionState.getWupDispatchRate())):ft.warn("Received an invalid nextWupInterval value of ".concat(t.nextWupInterval,". Ignoring value."))}}])}(),Tr="701",Mr="702",Or="703",Dr="704";function jr(t){return jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jr(t)}function Ur(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Nr(n.key),n)}}function zr(t,e,r){return e&&Ur(t.prototype,e),r&&Ur(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Nr(t){var e=function(t,e){if("object"!=jr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=jr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jr(e)?e:e+""}var Lr="oK",Fr="Error",Hr=zr((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.category=e,this.status=r}));function Wr(t){return Wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wr(t)}function qr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yr(n.key),n)}}function Yr(t){var e=function(t,e){if("object"!=Wr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Wr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Wr(e)?e:e+""}var Zr=function(){return function(t,e,r){return e&&qr(t.prototype,e),r&&qr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.wupMessageNumToRetry=e.get(B),this.wupMessageRetryInterval=e.get(C),this.wupIncrementalGrowthBetweenFailures=e.get(R),this.wupMaxIntervalBetweenFailures=e.get(P)}),[{key:"createReMessageSettings",value:function(){return new me(this.wupMessageNumToRetry,this.wupMessageRetryInterval,this.wupIncrementalGrowthBetweenFailures,this.wupMaxIntervalBetweenFailures)}}])}(),Vr={PRIMARY:"primary",SECONDARY:"secondary"};function Kr(t,e,r,n){var i;return n?(i=3===e?"v3.1":"v4",i+="/"+function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(11*Math.random())+10,r="",n=0;n<e;n++){r+=t[Math.floor(Math.random()*t.length)]}return r}()):(i=3===e?"client/v3.1/web/wup":"api/v4/wup",i+="?cid="+r),t+"/"+i}function Gr(t){return Gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gr(t)}function Xr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qr(n.key),n)}}function Qr(t){var e=function(t,e){if("object"!=Gr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Gr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Gr(e)?e:e+""}Object.freeze(Vr);var Jr=function(){return function(t,e,r){return e&&Xr(t.prototype,e),r&&Xr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n,i,o,s,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._serverCommunicator=e,this._wupMessageBuilder=r,this._wupServerSessionState=n,this._wupStatisticsService=i,this._wupResponseProcessor=o,this._configurationRepository=s,this._msgBus=a,this._INFINITE_MESSAGE_SEND_RETRIES=0,this._retryMessage=this._serverCommunicator.getRetryMessage(),this._MESSAGE_SEND_RETRIES=this._configurationRepository.get(B),this._requestTimeout=this._configurationRepository.get(w)}),[{key:"startNewSession",value:function(t,e,r,n,i,o,s,a){this._validateCommonSessionRelatedParameters(o,a),this._wupServerSessionState.setRequestId(0),this._wupServerSessionState.setBrand(null),this._sendSessionMessage(null,t,e,r,n,i,o,s,a,null,this._wupServerSessionState.getRequestId())}},{key:"_sendSessionMessage",value:function(t,e,r,n,i,o,s,a,u,f,c){var l=this;this._initSession(t,e,r,n,i,o,s,a,u,f,c);var h=this._createStaticFieldsPart(),d=!this._wupServerSessionState.getHasConfiguration()&&!this._wupServerSessionState.getHasPendingConfigurationRequest();d&&this._wupServerSessionState.markConfigurationRequested();var p=this._wupMessageBuilder.build(d?ur:"0",h),y=Kr(u,r,e,n);this._serverCommunicator.sendMessage(p,this._requestTimeout,d?this._INFINITE_MESSAGE_SEND_RETRIES:this._MESSAGE_SEND_RETRIES,!1,(function(t){l._onSendDataSuccess(t,d)}),this._onSendDataRetryFailure.bind(this),this._onSendDataFailure.bind(this),y)}},{key:"resumeSession",value:function(t,e,r,n,i,o,s,a,u,f){this._validateResumeSessionRelatedParameters(t,s,u);var c=f&&f.requestId?this._wupServerSessionState.setRequestId(f.requestId+1):this._wupServerSessionState.setRequestId(0);this._sendSessionMessage(t,e,r,n,i,o,s,a,u,f,c)}},{key:"sendData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this._wupServerSessionState.getOtt(),n=this._wupServerSessionState.getProtocolType(),i=4===n,o=3===n,s=this._wupServerSessionState.getSts()&&this._wupServerSessionState.getStd();if(r&&i||s&&o)this._sendMessage(t,e);else{var a=i?"ott":"sts or std";ft.error("Unable to send data. ".concat(a," is undefined"))}}},{key:"setRequestTimeout",value:function(t){this._requestTimeout=t}},{key:"setConfigurationWupMessage",value:function(){this._configurationWrapperWupMessage=new Zr(this._configurationRepository),this._reWupMessageSettings=this._configurationWrapperWupMessage.createReMessageSettings(),this._retryMessage.updateSettings(this._reWupMessageSettings)}},{key:"_initSession",value:function(t,e,r,n,i,o,s,a,u,f,c){ft.debug("Initializing session. wupUrl:".concat(u,", sid:").concat(t)),this._wupServerSessionState.setBaseServerUrl(u),this._wupServerSessionState.setSid(t),this._wupServerSessionState.setCid(e),this._wupServerSessionState.setCsid(i),this._wupServerSessionState.setPsid(o),this._wupServerSessionState.setMuid(s),this._wupServerSessionState.setProtocolType(r),this._wupServerSessionState.setShouldMinifyUri(n),this._wupServerSessionState.setContextName(a||""),this._wupServerSessionState.setRequestId(c,!1),f?(this._wupServerSessionState.setSts(f.sts),this._wupServerSessionState.setStd(f.std),this._wupServerSessionState.setOtt(f.ott)):(ft.info("Resetting server state of server communicator. Deleting sts and std"),this._wupServerSessionState.setSts(null),this._wupServerSessionState.setStd(null),this._wupServerSessionState.setOtt(null),this._wupStatisticsService.resetCounters())}},{key:"updateCsid",value:function(t){var e=this._wupServerSessionState.incrementRequestId()||0;this._wupServerSessionState.setCsid(t);var r={static_fields:[]};r.static_fields.push(["requestId",e],["contextId",this._wupServerSessionState.getContextName()],["sessionId",this._wupServerSessionState.getSid()],["customerSessionId",this._wupServerSessionState.getCsid()],["partnerSessionId",this._wupServerSessionState.getPsid()],["muid",this._wupServerSessionState.getMuid()]),this._sendMessage(r)}},{key:"updatePsid",value:function(t){var e=this._wupServerSessionState.incrementRequestId()||0;this._wupServerSessionState.setPsid(t);var r={static_fields:[]};r.static_fields.push(["requestId",e],["contextId",this._wupServerSessionState.getContextName()],["sessionId",this._wupServerSessionState.getSid()],["customerSessionId",this._wupServerSessionState.getCsid()],["partnerSessionId",this._wupServerSessionState.getPsid()],["muid",this._wupServerSessionState.getMuid()]),this._sendMessage(r)}},{key:"updateBrand",value:function(t){this._wupServerSessionState.setBrand(t)}},{key:"isReady",value:function(){var t=this._serverCommunicator.isReadyToSendData();if(4===this._wupServerSessionState.getProtocolType())return!(!t||!this._wupServerSessionState.getOtt());var e=this._wupServerSessionState.getStd()&&this._wupServerSessionState.getSts();return!(!t||!e)}},{key:"_validateResumeSessionRelatedParameters",value:function(t,e,r){if(!t)throw new Error("Invalid sid parameter ".concat(t,". Unable to start new session"));this._validateCommonSessionRelatedParameters(e,r)}},{key:"_validateCommonSessionRelatedParameters",value:function(t,e){if(!t&&this._wupServerSessionState.getAgentType()!==Vr.SECONDARY)throw new Error("Invalid muid parameter ".concat(t,". Unable to start new session"));if(!e)throw new Error("Invalid serverAddress parameter ".concat(e,". Unable to start new session"))}},{key:"_createStaticFieldsPart",value:function(){var t={static_fields:[]};return t.static_fields.push(["requestId",this._wupServerSessionState.getRequestId()],["contextId",this._wupServerSessionState.getContextName()],["sessionId",this._wupServerSessionState.getSid()],["customerSessionId",this._wupServerSessionState.getCsid()],["partnerSessionId",this._wupServerSessionState.getPsid()],["muid",this._wupServerSessionState.getMuid()]),t}},{key:"_sendMessage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this._wupMessageBuilder.build("0",t),n=Kr(this._wupServerSessionState.getBaseServerUrl(),this._wupServerSessionState.getProtocolType(),this._wupServerSessionState.getCid(),this._wupServerSessionState.getShouldMinifyUri());this._serverCommunicator.sendMessage(r,this._requestTimeout,this._MESSAGE_SEND_RETRIES,e,this._onSendDataSuccess.bind(this),this._onSendDataRetryFailure.bind(this),this._onSendDataFailure.bind(this),n)}},{key:"_onSendDataSuccess",value:function(t,e){e=e||!1,this._publishWorkerSystemStatus(Dr,Lr),this._publishWorkerSystemStatus(Dr,Lr),this._handleSuccessResponse(t,e),this._wupStatisticsService.incrementSentWupCount()}},{key:"_onSendDataRetryFailure",value:function(t){t===this._MESSAGE_SEND_RETRIES&&this._publishWorkerSystemStatus(Dr,Fr)}},{key:"_onSendDataFailure",value:function(){}},{key:"_handleSuccessResponse",value:function(t,e){var r=e?Mr:Or;try{var n=JSON.parse(t);this._wupResponseProcessor.process(n,e),this._publishWorkerSystemStatus(r,Lr)}catch(t){this._publishWorkerSystemStatus(r,Fr);var i="Failed to parse message from server: ".concat(t.message);ft.error(i,t)}}},{key:"_publishWorkerSystemStatus",value:function(t,e){this._msgBus.publish(Cr,new Hr(t,e))}}])}();function $r(t){return $r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$r(t)}function tn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,en(n.key),n)}}function en(t){var e=function(t,e){if("object"!=$r(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$r(e)?e:e+""}var rn=function(){return function(t,e,r){return e&&tn(t.prototype,e),r&&tn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._wupServerSessionState=e,this.reset()}),[{key:"add",value:function(t){var e=t.eventName,r=t.data;if(!e)throw new Error("Unable to add data message. Missing eventName field");if(!r)throw new Error("Unable to add data message. Missing data field");this._isEmpty=!1,this._dataObj[e]=this._dataObj[e]||[],this._dataObj[e].push(r)}},{key:"take",value:function(){this._isEmpty||this._dataObj.static_fields.push(["requestId",this._wupServerSessionState.incrementRequestId()]);var t=this._dataObj;return this.reset(),t}},{key:"reset",value:function(){this._isEmpty=!0,this._dataObj=this.getFreshDataObj()}},{key:"isEmpty",value:function(){return this._isEmpty}},{key:"getFreshDataObj",value:function(){return{static_fields:[],key_events:[],mouse_events:[]}}}])}();function nn(t){return nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nn(t)}function on(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sn(n.key),n)}}function sn(t){var e=function(t,e){if("object"!=nn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nn(e)?e:e+""}var an=function(){return function(t,e,r){return e&&on(t.prototype,e),r&&on(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n,i,o,s,a,u,f){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._wupStatisticsService=r,this._dataDispatcher=n,this._logDataDispatcher=i,this._serverCommunicator=o,this._wupServerClient=s,this._logServerClient=a,this._logger=u,this._mainCommunicator=f,this._messageBus.subscribe(wr,this._handle.bind(this))}),[{key:"_handle",value:function(t){this._wupStatisticsService.updateSettings(t.get(m));var e=t.get(g)?Q.defaultDynamicWupDispatchRateConfiguration:t.get(y);this._dataDispatcher.updateByConfig(e),this._logDataDispatcher.updateByConfig(t.get(v)),this._serverCommunicator.updateSettings(t.get(b)),this._logger.updateLogConfig(t),this._wupServerClient.setRequestTimeout(t.get(w)||t.get(_)),this._logServerClient.setRequestTimeout(t.get(S)),this._wupServerClient.setConfigurationWupMessage(),this._logServerClient.setConfigurationLogMessage(),this._mainCommunicator.sendAsync(D,t.getAll())}}])}();function un(t){return un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},un(t)}function fn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cn(n.key),n)}}function cn(t){var e=function(t,e){if("object"!=un(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=un(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==un(e)?e:e+""}var ln=function(){return function(t,e,r){return e&&fn(t.prototype,e),r&&fn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._logger=r,this._mainCommunicator=n,this._messageBus.subscribe(Sr,this._handle.bind(this))}),[{key:"_handle",value:function(t){this._logger.info("Worker received a new session id ".concat(t," from server.")),this._mainCommunicator.sendAsync(O,t)}}])}();function hn(t){return hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hn(t)}function dn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pn(n.key),n)}}function pn(t){var e=function(t,e){if("object"!=hn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hn(e)?e:e+""}var yn=function(){return function(t,e,r){return e&&dn(t.prototype,e),r&&dn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._logger=r,this._mainCommunicator=n,this._messageBus.subscribe(Er,this._handle.bind(this))}),[{key:"_handle",value:function(t){this._logger.debug("Worker received an updated server state."),this._mainCommunicator.sendAsync(j,t)}}])}();function vn(t){return vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vn(t)}function gn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mn(n.key),n)}}function mn(t){var e=function(t,e){if("object"!=vn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=vn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vn(e)?e:e+""}var bn=function(){return function(t,e,r){return e&&gn(t.prototype,e),r&&gn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._dataDispatcher=r,this._logger=n,this._messageBus.subscribe(kr,this._handle.bind(this))}),[{key:"_handle",value:function(t){this._logger.info("Worker received a wup dispatch rate ".concat(t," from server.")),this._dataDispatcher.scheduleNextDispatching()}}])}(),_n="startNewSessionCommand",wn="resumeSessionCommand",Sn="changeContextCommand",kn="updateCsidCommand",En="updatePsidCommand",xn="updateLogUrl",Bn="sendDataCommand",Cn="sendLogCommand",Rn="updateBrandCommand",Pn="stateUpdateFromStorage",An="setAgentTypeCommand",In="updateAgentIdCommand",Tn="enableWupMessagesHashingCommand",Mn="updateSDKState";function On(t){return On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},On(t)}function Dn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jn(n.key),n)}}function jn(t){var e=function(t,e){if("object"!=On(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=On(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==On(e)?e:e+""}var Un=function(){return function(t,e,r){return e&&Dn(t.prototype,e),r&&Dn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n,i,o,s,a,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._mainCommunicator=e,this._wupServerClient=r,this._logServerClient=n,this._configurationRepository=i,this._messageProcessor=o,this._logMessageProcessor=s,this._wupServerSessionState=a,this._dataServerCommunicator=u}),[{key:"start",value:function(){ft.debug("Starting Worker Service"),this._mainCommunicator.addMessageListener(_n,this._onStartNewSessionCommand.bind(this)),this._mainCommunicator.addMessageListener(wn,this._onResumeSessionCommand.bind(this)),this._mainCommunicator.addMessageListener(Sn,this._onChangeContextCommand.bind(this)),this._mainCommunicator.addMessageListener(kn,this._onUpdateCsidCommand.bind(this)),this._mainCommunicator.addMessageListener(En,this._onUpdatePsidCommand.bind(this)),this._mainCommunicator.addMessageListener(xn,this._onUpdateLogUrlCommand.bind(this)),this._mainCommunicator.addMessageListener(Bn,this._onSendDataCommand.bind(this)),this._mainCommunicator.addMessageListener(Cn,this._onSendLogCommand.bind(this)),this._mainCommunicator.addMessageListener(Rn,this._onUpdateBrandCommand.bind(this)),this._mainCommunicator.addMessageListener(An,this._setSessionAgentType.bind(this)),this._mainCommunicator.addMessageListener(In,this._onUpdateAgentId.bind(this)),this._mainCommunicator.addMessageListener(Tn,this._setWupMessagesHashing.bind(this))}},{key:"_onStartNewSessionCommand",value:function(t){this._wupServerClient.startNewSession(t.cid,t.protocolType,t.minifiedUri,t.csid,t.psid,t.muid,t.contextName,t.serverAddress)}},{key:"_onResumeSessionCommand",value:function(t){this._wupServerClient.resumeSession(t.cdsnum,t.cid,t.protocolType,t.minifiedUri,t.csid,t.psid,t.muid,t.contextName,t.serverAddress,t.serverState)}},{key:"_onChangeContextCommand",value:function(t){ft.debug("Worker received a ChangeContextCommand from main."),this._wupServerSessionState.setContextName(t.contextName)}},{key:"_onUpdateCsidCommand",value:function(t){ft.debug("Worker received an UpdateCsidCommand from main. CSID: ".concat(t.csid,".")),this._wupServerClient.updateCsid(t.csid)}},{key:"_onUpdatePsidCommand",value:function(t){ft.debug("Worker received an UpdatePsidCommand from main. PSID: ".concat(t.psid,".")),this._wupServerClient.updatePsid(t.psid)}},{key:"_onUpdateLogUrlCommand",value:function(t){ft.attachSessionIdentifiers(t.sessionIdentifiers),this._logServerClient.setServerUrl(t.logAddress)}},{key:"_onSendDataCommand",value:function(t){this._messageProcessor.process(t)}},{key:"_onSendLogCommand",value:function(t){this._logMessageProcessor.process(t)}},{key:"_onUpdateBrandCommand",value:function(t){this._wupServerClient.updateBrand(t.brand)}},{key:"_setSessionAgentType",value:function(t){this._wupServerSessionState.setAgentType(t.agentType)}},{key:"_onUpdateAgentId",value:function(t){this._wupServerSessionState.setAgentId(t.agentId)}},{key:"_setWupMessagesHashing",value:function(t){this._dataServerCommunicator.updateEnableWupMessagesHashing(t.enableWupMessagesHashing)}}])}();function zn(t){return zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zn(t)}function Nn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ln(n.key),n)}}function Ln(t){var e=function(t,e){if("object"!=zn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zn(e)?e:e+""}var Fn=function(){return function(t,e,r){return e&&Nn(t.prototype,e),r&&Nn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),null,[{key:"create",value:function(){if(self.XMLHttpRequest&&Object.prototype.hasOwnProperty.call(XMLHttpRequest.prototype,"withCredentials"))return new XMLHttpRequest;if(self.XDomainRequest)return new XDomainRequest;if(!self.XMLHttpRequest)throw new Error("There is no supported http request object");return new XMLHttpRequest}}])}();function Hn(t){return Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hn(t)}function Wn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qn(n.key),n)}}function qn(t){var e=function(t,e){if("object"!=Hn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Hn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Hn(e)?e:e+""}var Yn=function(){return function(t,e,r){return e&&Wn(t.prototype,e),r&&Wn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),null,[{key:"isUndefinedNull",value:function(t){return null==t||void 0===t}},{key:"getPostUrl",value:function(t,e,r,n,i,o,s,a){var u=Fn.create();try{u instanceof self.XMLHttpRequest?(u.open(e,t,!0),u.timeout=s||12e3,a&&u.setRequestHeader(At,a),u.onload=function(){200===u.status||204===u.status&&o?n&&n(u.responseText):i&&i(u.responseText,u.status,u.statusText)},u.onerror=function(){i&&i(u.responseText,u.status,u.statusText)},u.ontimeout=function(){i&&i("timeout")},u.onabort=function(){i&&i("abort")},u.send(r)):(u.onload=function(){n&&u.responseText&&n(u.responseText)},u.onerror=function(){i&&i(u.responseText,u.status,u.statusText)},u.onprogress=function(){},u.ontimeout=function(){i&&i("timeout")},u.open(e,t,!0),a&&u.setRequestHeader(At,a),u.timeout=s||12e3,setTimeout((function(){u.send(r)}),0))}catch(t){throw t}}}])}();function Zn(t){return Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zn(t)}function Vn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kn(n.key),n)}}function Kn(t){var e=function(t,e){if("object"!=Zn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Zn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Zn(e)?e:e+""}var Gn=function(){return function(t,e,r){return e&&Vn(t.prototype,e),r&&Vn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._mainCommunicator=e,this._messageBus=r,this._logger=n,this.errors={},this._messageBus.subscribe(Cr,this._handle.bind(this))}),[{key:"_handle",value:function(t){this._logger.debug("Sending new HeartBeatStatusEvent - ".concat(t.category,", ").concat(t.status)),this._mainCommunicator.sendAsync(U,t)}}])}();function Xn(t){return Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xn(t)}function Qn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Jn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qn(Object(r),!0).forEach((function(e){$n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function $n(t,e,r){return(e=ei(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ti(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ei(n.key),n)}}function ei(t){var e=function(t,e){if("object"!=Xn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Xn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Xn(e)?e:e+""}var ri=function(){return function(t,e,r){return e&&ti(t.prototype,e),r&&ti(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sn=0,this.url=r,this.logAggregator=e,this.msgPrefix=n}),[{key:"log",value:function(t,e,r){this.logAggregator.add({eventName:"log",data:Jn(Jn({msg:this.msgPrefix+t},r),{},{url:this.url,level:e,sn:this.sn++})})}},{key:"setLogLevel",value:function(t){this.logAggregator instanceof nr&&this.logAggregator.setLogLevel(t)}},{key:"clearLogEntriesByLogLevel",value:function(t){this.logAggregator.filterOutByLogLevel(t)}}])}();function ni(t){return ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ni(t)}function ii(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oi(n.key),n)}}function oi(t){var e=function(t,e){if("object"!=ni(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ni(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ni(e)?e:e+""}var si=function(){return function(t,e,r){return e&&ii(t.prototype,e),r&&ii(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.currentMessageNumberOfSendFailures=0,this.reMessageSettings=e,this.currentInterval=this.getMessageRetryInterval()}),[{key:"restartMessageSettings",value:function(){this.currentMessageNumberOfSendFailures=0,this.currentInterval=this.getMessageRetryInterval()}},{key:"updateSettings",value:function(t){this.reMessageSettings=t}},{key:"updateAllSettings",value:function(t){t.init(),this.reMessageSettings=t}},{key:"getNumberOfSendFailures",value:function(){return this.currentMessageNumberOfSendFailures}},{key:"getNextInterval",value:function(){return this.currentInterval}},{key:"getMessageNumToRetry",value:function(){return this.reMessageSettings.getMessageNumToRetry()}},{key:"getMessageRetryInterval",value:function(){return this.reMessageSettings.getMessageRetryInterval()}},{key:"getMaxIntervalBetweenFailures",value:function(){return this.reMessageSettings.getMaxIntervalBetweenFailures()}},{key:"getIncrementalGrowthBetweenFailures",value:function(){return this.reMessageSettings.getIncrementalGrowthBetweenFailures()}},{key:"_incrementNumberOfSendFailures",value:function(){this.currentMessageNumberOfSendFailures++}},{key:"shouldReMessage",value:function(t){return t||this.getNumberOfSendFailures()<this.getMessageNumToRetry()}},{key:"updateRetryInterval",value:function(){var t=this.currentInterval+this.currentMessageNumberOfSendFailures*this.getIncrementalGrowthBetweenFailures();t>this.getMaxIntervalBetweenFailures()?this.currentInterval=this.getMaxIntervalBetweenFailures():this.currentInterval=t,this._incrementNumberOfSendFailures()}}])}();function ai(t){return ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ai(t)}function ui(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fi(n.key),n)}}function fi(t){var e=function(t,e){if("object"!=ai(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ai(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ai(e)?e:e+""}var ci=function(){return function(t,e,r){return e&&ui(t.prototype,e),r&&ui(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._mainCommunicator=r,this._messageBus.subscribe(xr,this._handler.bind(this),!0)}),[{key:"_handler",value:function(t){this._mainCommunicator.sendAsync(z,t)}}])}();function li(t){return li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},li(t)}function hi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,di(n.key),n)}}function di(t){var e=function(t,e){if("object"!=li(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=li(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==li(e)?e:e+""}var pi=function(){return function(t,e,r){return e&&hi(t.prototype,e),r&&hi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._mainCommunicator=e,this._wupServerSessionState=r,this._logServerClient=n,this._mainCommunicator.addMessageListener(Pn,this._handle.bind(this)),this._mainCommunicator.addMessageListener(Mn,this._handleStateChanged.bind(this))}),[{key:"_handle",value:function(t){null!=t&&t.requestId&&(null!=t&&t.ott||null!=t&&t.sts)&&(this._wupServerSessionState.setRequestId(t.requestId,!1),this._wupServerSessionState.setOtt(t.ott),this._wupServerSessionState.setSts(t.sts),this._wupServerSessionState.setStd(t.std))}},{key:"_handleStateChanged",value:function(t){this._logServerClient.setIsPaused(t.SDK_state)}}])}();function yi(t){return yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yi(t)}function vi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gi(n.key),n)}}function gi(t){var e=function(t,e){if("object"!=yi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=yi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yi(e)?e:e+""}var mi=function(){return function(t,e,r){return e&&vi(t.prototype,e),r&&vi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._mainCommunicator=r,this._messageBus.subscribe(Br,this._handle.bind(this))}),[{key:"_handle",value:function(t){this._mainCommunicator.sendAsync(N,t)}}])}();function bi(t){return bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bi(t)}function _i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wi(n.key),n)}}function wi(t){var e=function(t,e){if("object"!=bi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=bi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bi(e)?e:e+""}var Si=function(){return function(t,e,r){return e&&_i(t.prototype,e),r&&_i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._mainCommunicator=e,this._msgBus=r,this._eventHandlers=[]}),[{key:"loadSystem",value:function(){var t=this;this._configurationRepository=new $,this._wupServerSessionState=new pt,this._logRequestBodyBuilder=new mt,this._configurationWrapperLogMessage=new Se(this._configurationRepository),this._logReMessageSettings=this._configurationWrapperLogMessage.createReMessageSettings(),this._logRetryMessage=new si(this._logReMessageSettings),this._logServerCommunicator=new Ft(this._logRequestBodyBuilder,this._configurationRepository.get(b),Yn,this._logRetryMessage,!0,"log"),this._logMessageBuilder=new Gt(new re),this._logServerClient=new Be(this._logServerCommunicator,this._logMessageBuilder,this._configurationRepository),this._wupStatisticsService=new Ae(this._configurationRepository.get(m)),this._wupDispatchRateCalculatorFactory=new Ge(this._wupStatisticsService,this._wupServerSessionState);var e=new nr;this._logDataDispatcher=new $e(this._logServerClient,e,this._wupDispatchRateCalculatorFactory,this._configurationRepository.get(v));var r=new ri(e,"worker");this._logMessageProcessor=new ar(this._logDataDispatcher);var n=new ct(r);ft.setLogger(n),this._wupMessageBuilder=new vr(this._wupServerSessionState,new re),this._wupRequestBodyBuilder=new _r(this._wupServerSessionState),this._configurationWrapperWupMessage=new Zr(this._configurationRepository),this._wupReMessageSettings=this._configurationWrapperWupMessage.createReMessageSettings(),this._wupRetryMessage=new si(this._wupReMessageSettings),this._dataServerCommunicator=new Ft(this._wupRequestBodyBuilder,this._configurationRepository.get(b),Yn,this._wupRetryMessage,!1,"wup"),this._wupResponseProcessor=new Ir(this._wupServerSessionState,this._msgBus,this._configurationRepository),this._wupServerClient=new Jr(this._dataServerCommunicator,this._wupMessageBuilder,this._wupServerSessionState,this._wupStatisticsService,this._wupResponseProcessor,this._configurationRepository,this._msgBus);var i=this._configurationRepository.get(g)?Q.defaultDynamicWupDispatchRateConfiguration:this._configurationRepository.get(y);this._dataDispatcher=new $e(this._wupServerClient,new rn(this._wupServerSessionState),this._wupDispatchRateCalculatorFactory,i),this._messageProcessor=new ar(this._dataDispatcher),this._eventHandlers.push(new an(this._msgBus,this._wupStatisticsService,this._dataDispatcher,this._logDataDispatcher,this._dataServerCommunicator,this._wupServerClient,this._logServerClient,n,this._mainCommunicator)),this._eventHandlers.push(new ln(this._msgBus,n,this._mainCommunicator)),this._eventHandlers.push(new yn(this._msgBus,n,this._mainCommunicator)),this._eventHandlers.push(new bn(this._msgBus,this._dataDispatcher,n)),this._eventHandlers.push(new Gn(this._mainCommunicator,this._msgBus,n)),this._eventHandlers.push(new ci(this._msgBus,this._mainCommunicator)),this._eventHandlers.push(new pi(this._mainCommunicator,this._wupServerSessionState,this._logServerClient)),this._eventHandlers.push(new mi(this._msgBus,this._mainCommunicator)),this._wupServerSessionState.onServerStateUpdated.subscribe((function(e){t._mainCommunicator.sendAsync(j,e)})),this._workerService=new Un(this._mainCommunicator,this._wupServerClient,this._logServerClient,this._configurationRepository,this._messageProcessor,this._logMessageProcessor,this._wupServerSessionState,this._dataServerCommunicator),this._workerService.start(),ft.info("Loaded worker")}}])}();function ki(t){return ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ki(t)}function Ei(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xi(n.key),n)}}function xi(t){var e=function(t,e){if("object"!=ki(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ki(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ki(e)?e:e+""}var Bi=function(){return function(t,e,r){return e&&Ei(t.prototype,e),r&&Ei(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.subscribers=o()}),[{key:"subscribe",value:function(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!1;this.subscribers.has(t)?(r=this.subscribers.get(t))&&r.forEach((function(t){e===t.handler&&(i=!0)})):(r=c(),this.subscribers.set(t,r)),i||r.add({handler:e,isOneTime:n})}},{key:"unsubscribe",value:function(t,e){if(t&&this.subscribers.has(t)){var r=this.subscribers.get(t);r&&r.forEach((function(t){e===t.handler&&r.delete(t)})),0===r.size&&this.subscribers.delete(t)}}},{key:"publish",value:function(t,e){if(!t)throw new Error("invalid argument messageType must be defined");this._notifySubscribers(t,e)}},{key:"_notifySubscribers",value:function(t,e){var r=this.subscribers.get(t);r&&r.forEach((function(t){t.handler(e),t.isOneTime&&r.delete(t)}))}}])}(),Ci=Bi;function Ri(t){return Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ri(t)}function Pi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ai(n.key),n)}}function Ai(t){var e=function(t,e){if("object"!=Ri(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ri(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ri(e)?e:e+""}var Ii=function(){return function(t,e,r){return e&&Pi(t.prototype,e),r&&Pi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._portNativeWorker=e}),[{key:"postMessage",value:function(){this._portNativeWorker.postMessage.apply(this._portNativeWorker,arguments)}},{key:"close",value:function(){this._portNativeWorker.terminate()}},{key:"setonmessage",value:function(t){this._portNativeWorker.onmessage=t}}])}();function Ti(t){return Ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ti(t)}function Mi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Oi(n.key),n)}}function Oi(t){var e=function(t,e){if("object"!=Ti(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ti(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ti(e)?e:e+""}var Di=function(){return function(t,e,r){return e&&Mi(t.prototype,e),r&&Mi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),[{key:"start",value:function(){var t=new p,e=new Ci,r=new Si(t,e);this._loadWorkerSystem(t,e,r,new Ii(self))}},{key:"_loadWorkerSystem",value:function(t,e,r,n){try{t.setMessagingPort(n),r.loadSystem(),e.publish(Cr,new Hr(Tr,Lr))}catch(t){e.publish(Cr,new Hr(Tr,Fr))}}}])}();function ji(t){return ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ji(t)}function Ui(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zi(n.key),n)}}function zi(t){var e=function(t,e){if("object"!=ji(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ji(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ji(e)?e:e+""}var Ni=function(){return function(t,e,r){return e&&Ui(t.prototype,e),r&&Ui(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=self,"undefined"==typeof TextEncoder&&(e.TextEncoder=function(){},TextEncoder.prototype.encode=function(t){for(var e=[],r=0;r<t.length;r++){var n=t.charCodeAt(r);n<128?e.push(n):n<2048?e.push(192|n>>6,128|63&n):n<55296||n>=57344?e.push(224|n>>12,128|n>>6&63,128|63&n):(r++,n=65536+((1023&n)<<10|1023&t.charCodeAt(r)),e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return new Uint8Array(e)})}),[{key:"start",value:function(){(new Di).start()}}])}();(new Ni).start()}()}();',"Worker",void 0,void 0)}function dn(t){return dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dn(t)}function hn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pn(r.key),r)}}function pn(t){var e=function(t,e){if("object"!=dn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=dn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dn(e)?e:e+""}var yn=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._portNativeWorker=e},e=[{key:"postMessage",value:function(){this._portNativeWorker.postMessage.apply(this._portNativeWorker,arguments)}},{key:"close",value:function(){this._portNativeWorker.terminate()}},{key:"setonmessage",value:function(t){this._portNativeWorker.onmessage=t}}],e&&hn(t.prototype,e),n&&hn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function mn(t){return mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mn(t)}function vn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bn(r.key),r)}}function bn(t){var e=function(t,e){if("object"!=mn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=mn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mn(e)?e:e+""}var gn=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nativeWorker=e,this.port=new yn(this._nativeWorker)},(e=[{key:"close",value:function(){this.port.close()}}])&&vn(t.prototype,e),n&&vn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function _n(t){return _n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_n(t)}function Sn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wn(r.key),r)}}function wn(t){var e=function(t,e){if("object"!=_n(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=_n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_n(e)?e:e+""}var En=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._useUrlWorker=e,this._workerUrl=n},e=[{key:"create",value:function(){return this._useUrlWorker?this._createWorkerFromUrl():this._createInlineWorker()}},{key:"_createInlineWorker",value:function(){var t=new fn;return ue.info("Created a dedicated worker."),new gn(t)}},{key:"_createWorkerFromUrl",value:function(){try{var t=new Worker(this._workerUrl);return ue.info("Created worker from url - ".concat(this._workerUrl)),new gn(t)}catch(t){throw ue.error("Failed to construct worker from url."),t}}}],e&&Sn(t.prototype,e),n&&Sn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function kn(t){return kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kn(t)}function Pn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Tn(r.key),r)}}function Tn(t){var e=function(t,e){if("object"!=kn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=kn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kn(e)?e:e+""}var On=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._pairs=[],this.size=0},(e=[{key:"has",value:function(t){return this._indexOf(t)>-1}},{key:"get",value:function(t){var e=this._indexOf(t);if(e>-1)return this._pairs[e][1]}},{key:"set",value:function(t,e){var n=this._indexOf(t);n>-1?this._pairs[n][1]=e:(this._pairs.push([t,e]),this.size++)}},{key:"delete",value:function(t){var e=this._indexOf(t);return e>-1&&(this._pairs.splice(e,1),this.size--,!0)}},{key:"forEach",value:function(t){for(var e=0;e<this._pairs.length;e++)t(this._pairs[e][1],this._pairs[e][0])}},{key:"clear",value:function(){this._pairs=[]}},{key:"_indexOf",value:function(t){for(var e=0;e<this._pairs.length;e++)if(this._pairs[e][0]===t)return e;return-1}}])&&Pn(t.prototype,e),n&&Pn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),Cn=function(){return new(self.Map||On)};function Mn(t){return Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mn(t)}function Bn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jn(r.key),r)}}function jn(t){var e=function(t,e){if("object"!=Mn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Mn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Mn(e)?e:e+""}var Rn=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._set=[],this.size=0},(e=[{key:"add",value:function(t){return this._set.push(t),this.size++,this}},{key:"has",value:function(t){return this._set.indexOf(t)>-1}},{key:"delete",value:function(t){for(var e=0;e<this._set.length;e++)if(this._set[e]===t)return this._set.splice(e,1),this.size--,!0;return!1}},{key:"forEach",value:function(t){for(var e=0;e<this._set.length;e++)t(this._set[e])}},{key:"clear",value:function(){this._set=[]}}])&&Bn(t.prototype,e),n&&Bn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),An=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=new(self.Set||Rn),n=0;n<t.length;n++)e.add(t[n]);return e};function In(t){return In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},In(t)}function xn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Nn(r.key),r)}}function Nn(t){var e=function(t,e){if("object"!=In(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=In(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==In(e)?e:e+""}var Ln=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._msgListeners=Cn()},e=[{key:"setMessagingPort",value:function(t){var e=this;this._messagePort=t,t.setonmessage((function(t){var n=t.data,r=[],o=e._msgListeners.get(n.msgType);o&&o.forEach((function(t){t.callback(n.data),t.isOneTime&&r.push(t)})),r.forEach((function(t){o.delete(t)}))}))}},{key:"sendAsync",value:function(t,e,n,r,o){r&&n&&this.addMessageListener(n,r,o),this._messagePort.postMessage({msgType:t,data:e})}},{key:"addMessageListener",value:function(t,e,n){var r=null;this._msgListeners.has(t)?r=this._msgListeners.get(t):(r=An(),this._msgListeners.set(t,r)),r.add({callback:e,isOneTime:n})}}],e&&xn(t.prototype,e),n&&xn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function Dn(t){return Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dn(t)}function Fn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Un(r.key),r)}}function Un(t){var e=function(t,e){if("object"!=Dn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Dn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Dn(e)?e:e+""}var Gn=function(){return t=function t(e,n,r,o,i,a){var u,s,c,l=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u=this,c="BC",(s=Un(s="_dataOrigin"))in u?Object.defineProperty(u,s,{value:c,enumerable:!0,configurable:!0,writable:!0}):u[s]=c,this._serverWorkerCommunicator=n,this._contextManager=r,this._passToWorkerInterval=a||0,this._intervalConfigKey=o,this._msgToWorker=i,this._Q=[],this._passToWorkerInterval&&(this._intervalId=setInterval(this._sendQToServerWorker.bind(this),this._passToWorkerInterval)),e.addEventListener(window,"beforeunload",(function(){l._onUnload()}),!0)},(e=[{key:"addToQueue",value:function(t,e,n,r){(n=!(null!=n&&!0!==n))&&e.push&&(e[0]=this._contextManager.contextHash),0!==this._passToWorkerInterval?(this._Q.push({eventName:t,data:e,shouldFlush:r,origin:this._dataOrigin}),r&&this._sendQToServerWorker()):this._serverWorkerCommunicator.sendAsync(this._msgToWorker,{eventName:t,data:e,shouldFlush:r,origin:this._dataOrigin})}},{key:"updateWithConfig",value:function(t){var e=t.get(this._intervalConfigKey);void 0!==e&&e!==this._passToWorkerInterval&&(this._passToWorkerInterval=e,clearInterval(this._intervalId),this._intervalId=null,0!==this._passToWorkerInterval&&(this._intervalId=setInterval(this._sendQToServerWorker.bind(this),this._passToWorkerInterval)))}},{key:"flushAllMessages",value:function(){this._Q.push({eventName:"flushData"}),this._sendQToServerWorker()}},{key:"registerOnPreSendToWorker",value:function(t){this._onPreSendToWorker=t}},{key:"_sendQToServerWorker",value:function(){try{this._onPreSendToWorker&&this._onPreSendToWorker(),this._Q.length&&(this._serverWorkerCommunicator.sendAsync(this._msgToWorker,this._Q),this._Q=[])}catch(t){ue.error("Failed sending data to worker. ".concat(t)),this._sendQInSingleMessagesToServerWorker()}}},{key:"appendData",value:function(t,e){this._Q.push({eventName:t,data:e,shouldFlush:!1,origin:this._dataOrigin})}},{key:"_sendQInSingleMessagesToServerWorker",value:function(){for(var t=0;t<this._Q.length;t++)try{this._serverWorkerCommunicator.sendAsync(this._msgToWorker,this._Q[t])}catch(t){ue.error("Failed sending single message data to worker. ".concat(t))}this._Q=[]}},{key:"_onUnload",value:function(){this.flushAllMessages()}},{key:"filterOut",value:function(t){this._Q=this._Q.filter(t)}}])&&Fn(t.prototype,e),n&&Fn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function Hn(t){return Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hn(t)}function Wn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Vn(r.key),r)}}function Vn(t){var e=function(t,e){if("object"!=Hn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Hn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Hn(e)?e:e+""}var Qn=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._perfDataQ=e,this._now=window.performance&&window.performance.now?window.performance.now.bind(window.performance):ze.dateNow.bind(Date),this._monitors=Cn()},e=[{key:"startMonitor",value:function(t){ue.debug("PerfMonitor:startMonitor on ".concat(t)),this._monitors.set(t,this._now())}},{key:"stopMonitor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main";if(this._monitors.has(t)){var n=this._now()-this._monitors.get(t);this._perfDataQ.addToQueue("perf",{orig:e,name:t,val:n}),ue.debug("PerfMonitor:stopMonitor on ".concat(t,": time = ").concat(n)),this._monitors.delete(t)}}},{key:"cancelMonitor",value:function(t){ue.debug("PerfMonitor:cancelMonitor on ".concat(t)),this._monitors.has(t)&&this._monitors.delete(t)}},{key:"reportMonitor",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main";ue.debug("PerfMonitor:reportMonitor on ".concat(t)),this._perfDataQ.addToQueue("perf",{orig:n,name:t,val:e})}}],e&&Wn(t.prototype,e),n&&Wn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function zn(t){return zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zn(t)}function Kn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qn(r.key),r)}}function qn(t){var e=function(t,e){if("object"!=zn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=zn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zn(e)?e:e+""}var Xn=function(){return t=function t(e,n,r,o,i){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:200;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._mutationObserver=e,this._siteMapKey=o,this._keyUrl=o+"_isUrlNonMasked",this._stopOnFirstMappingMatch=a,this._siteMap=null,this._observers=[],this._utils=n,this._domUtils=r,this._onMatchCB=i,this._maxMappings=u,this._maxTriggers=10},(e=[{key:"updateObserver",value:function(t){this._onMatchCB=t}},{key:"_observeChange",value:function(t,e){if(t)try{var n=window.document.querySelector(t);if(n){var r=new this._mutationObserver((function(t){t.length>0&&e()}));r.observe(n,{childList:!0,characterData:!0,attributes:!0,subtree:!0}),this._observers.push(r)}else ue.error("Selector:".concat(JSON.stringify(t)," not found on page. Check ").concat(this._siteMapKey," configuration"))}catch(t){ue.error("SiteMapper._observeChange: ".concat(t.message),t)}}},{key:"initTracking",value:function(){var t=this,e=function(){try{for(var e=0;e<t._siteMap.mappings.length;e++){var n=t._siteMap.mappings[e];if(!n.url||t._url.indexOf(n.url)>-1)if(n.selector){var r=window.document.querySelector(n.selector);if(r)if(n.byText){if((void 0!==r.innerText&&-1!==r.innerText.indexOf(n.byText)||r.value===n.byText||r.textContent===n.byText)&&(t._onMatchCB(n),t._stopOnFirstMappingMatch))return}else if(t._onMatchCB(n),t._stopOnFirstMappingMatch)return}else if(t._url.indexOf(n.url)>-1&&(t._onMatchCB(n),t._stopOnFirstMappingMatch))return}}catch(t){ue.error("SiteMapper:testQuerySelector failed. ex: ".concat(t.message),t)}};if(!this._siteMap){var n=this._utils.StorageUtils.getFromSessionStorage(this._siteMapKey);n&&n.triggers.length<=this._maxTriggers&&n.mappings.length<=this._maxMappings&&(this._siteMap=n),this._isNonMaskedUrl=this._utils.StorageUtils.getFromSessionStorage(this._keyUrl)}this._siteMap&&(this._url=this._isNonMaskedUrl?window.document.location.href:this._utils.getDocUrl(),this._domUtils.onDocumentBody(window,(function(){t._mutationObserver&&t._siteMap.triggers.forEach((function(n){(!n.url||t._url.indexOf(n.url)>-1)&&t._observeChange(n.selector,e)})),e()})))}},{key:"onConfigUpdate",value:function(t){try{if(!this._siteMap&&t.get(this._siteMapKey)){this.stopTracking();var e=t.get(this._siteMapKey)&&JSON.parse(t.get(this._siteMapKey));this._isNonMaskedUrl=t.get("useNonMaskedUrlInMappings"),e&&e.triggers.length<=this._maxTriggers&&e.mappings.length<=this._maxMappings?(this._siteMap=e,this._utils.StorageUtils.saveToSessionStorage(this._siteMapKey,this._siteMap),this._utils.StorageUtils.saveToSessionStorage(this._keyUrl,this._isNonMaskedUrl),this.initTracking()):ue.warn("Configuration ".concat(this._siteMapKey," contains an illegal amount of triggers or mappings. Max Allowed Triggers: ").concat(this._maxTriggers,", ")+"Max Allowed Mappings: ".concat(this._maxMappings))}}catch(t){ue.error("An error occurred while loading ".concat(this._siteMapKey," configuration. Make sure the configuration value is valid. ").concat(t.message),t)}}},{key:"stopTracking",value:function(){for(var t=0;t<this._observers.length;t++)this._observers[t].disconnect();this._observers=[],this._siteMap=null}}])&&Kn(t.prototype,e),n&&Kn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function Jn(t){return Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jn(t)}function Yn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Zn(r.key),r)}}function Zn(t){var e=function(t,e){if("object"!=Jn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Jn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Jn(e)?e:e+""}var $n=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._listeners=[]},(e=[{key:"subscribe",value:function(t){this._listeners.push(t)}},{key:"publish",value:function(t){for(var e=0,n=this._listeners.length;e<n;e++)this._listeners[e](t)}},{key:"unsubscribe",value:function(t){for(var e=0,n=this._listeners.length;e<n;e++)if(t===this._listeners[e]){this._listeners.splice(e,1);break}}}])&&Yn(t.prototype,e),n&&Yn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function tr(t){return tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tr(t)}function er(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nr(r.key),r)}}function nr(t){var e=function(t,e){if("object"!=tr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=tr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tr(e)?e:e+""}var rr=function(){return t=function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._utils=e,this._storageUtilsWrapper=o,this._contextSiteMapper=n,this.contextName="",this.referrer="",this.historyLen=-1,this.onContextChange=new $n,this._contextSiteMapper.updateObserver(this.onSiteMapperMatch.bind(this)),this._workerComm=r,this._contextIdKey="cdContextId",this.randomValue=Math.floor(1e6*Math.random())},(e=[{key:"contextData",value:function(){return{contextId:this.contextId,contextHash:this.contextHash,url:this.url,name:this.contextName,referrer:this.referrer,hLength:this.historyLen,timestamp:this.timestamp}}},{key:"getContextName",value:function(){return this.contextName}},{key:"setContext",value:function(t){this.contextName=t.name,this._genContext(),this.url=t.url,this.referrer=t.referrer,this.historyLen=t.hLength,this.timestamp=t.timestamp,this._publishContext()}},{key:"changeContext",value:function(t){t?t!==this.contextName?(this.contextName=t,this._updateContext(),this._publishContext(),ue.info("Context changed to ".concat(t," and Context hash its ").concat(this.contextHash))):ue.warn("Received context ".concat(t," but this is already the current context. Aborting operation.")):ue.error("Received an invalid context name ".concat(t,". Aborting context change operation"))}},{key:"onSiteMapperMatch",value:function(t){t.contextName!==this.contextName&&this.changeContext(t.contextName)}},{key:"_updateContext",value:function(){this._genContext(),this.url=this._utils.getDocUrl(),this.referrer=this._utils.clearTextFromNumbers(document.referrer),this.historyLen=window.history.length,this.timestamp=this._utils.dateNow()}},{key:"_genContext",value:function(){this.contextId=this._storageUtilsWrapper.getCookie(this._contextIdKey),this.contextId&&!isNaN(this.contextId)||(this.contextId=this._storageUtilsWrapper.getFromLocalStorage(this._contextIdKey),this.contextId&&!isNaN(this.contextId)||(this.contextId=0)),this.contextId=parseInt(this.contextId);var t=this.contextId+1;this._storageUtilsWrapper.saveToLocalStorage(this._contextIdKey,t)||ue.error("Failed saving contextId ".concat(this.contextId," to local storage.")),this._storageUtilsWrapper.setCookie(this._contextIdKey,t.toString())||ue.error("Failed saving contextId ".concat(this.contextId," to cookie.")),this.contextHash=this._toInt32Hash(this.contextId)}},{key:"_toInt32Hash",value:function(t){var e=t^=this.randomValue;return e=73244475*((e=73244475*(e>>>16^e))>>>16^e),4294967295&(e^=e>>>16)}},{key:"_publishContext",value:function(){var t={contextName:this.contextName};this._workerComm.sendAsync(Xe,t),this.onContextChange.publish(this.contextData())}},{key:"initContextHandling",value:function(){this._contextSiteMapper.initTracking()}},{key:"clearContextHandling",value:function(){this._contextSiteMapper.stopTracking()}},{key:"onConfigUpdate",value:function(t){this._contextSiteMapper.onConfigUpdate(t)}},{key:"onSessionReset",value:function(){this._publishContext()}}])&&er(t.prototype,e),n&&er(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function or(t){return or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},or(t)}function ir(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ar(r.key),r)}}function ar(t){var e=function(t,e){if("object"!=or(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=or(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==or(e)?e:e+""}var ur=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._cdUtils=e,this._scriptName=n,this._cdUtils.addEventListener(window,"error",this._handleException.bind(this))},(e=[{key:"_handleException",value:function(t){if(this._scriptName&&this._scriptName===t.filename){var e=this._buildErrorMessage(t);ue.error("caught unhandled exception. ".concat(e))}}},{key:"_buildErrorMessage",value:function(t){if(!t.error)return t.message;var e=t.error.toString(),n=t.error.stack?t.error.stack:"";return"".concat(e,", Line: ").concat(t.lineno,", Column: ").concat(t.colno,". Stacktrace: ").concat(n)}}])&&ir(t.prototype,e),n&&ir(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function sr(t){return sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sr(t)}function cr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lr(r.key),r)}}function lr(t){var e=function(t,e){if("object"!=sr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=sr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sr(e)?e:e+""}var fr=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.subscribers=Cn()},e=[{key:"subscribe",value:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!1;this.subscribers.has(t)?(n=this.subscribers.get(t))&&n.forEach((function(t){e===t.handler&&(o=!0)})):(n=An(),this.subscribers.set(t,n)),o||n.add({handler:e,isOneTime:r})}},{key:"unsubscribe",value:function(t,e){if(t&&this.subscribers.has(t)){var n=this.subscribers.get(t);n&&n.forEach((function(t){e===t.handler&&n.delete(t)})),0===n.size&&this.subscribers.delete(t)}}},{key:"publish",value:function(t,e){if(!t)throw new Error("invalid argument messageType must be defined");this._notifySubscribers(t,e)}},{key:"_notifySubscribers",value:function(t,e){var n=this.subscribers.get(t);n&&n.forEach((function(t){t.handler(e),t.isOneTime&&n.delete(t)}))}}],e&&cr(t.prototype,e),n&&cr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),dr=fr;function hr(t){return hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hr(t)}function pr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yr(r.key),r)}}function yr(t){var e=function(t,e){if("object"!=hr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=hr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hr(e)?e:e+""}var mr=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=new URL(e);if(this._cid=n.searchParams.get("cid"),!this._cid)throw new Error("cid was not found on provided url.")},(e=[{key:"get",value:function(){return this._cid}}])&&pr(t.prototype,e),n&&pr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),vr="NewSessionStartedEvent",br="ConfigurationLoadedEvent",gr="ServerStateUpdatedEvent",_r="HeartBeatStatusEvent",Sr="ServerRestoredMuidEvent",wr="ServerNewAgentIdEvent";function Er(t){return Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Er(t)}function kr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pr(r.key),r)}}function Pr(t){var e=function(t,e){if("object"!=Er(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Er(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Er(e)?e:e+""}var Tr=function(){return t=function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._workerComm=e,this._utils=n,this._currState=null,this._agentIdService=r,e.addMessageListener(gr,this._onStateUpdateFromWorker.bind(this)),e.addMessageListener(wr,this._onNewAgentIdFromWorker.bind(this)),n.addEventListener(window,"storage",this._onStateUpdateFromStorage.bind(this),!0)},e=[{key:"getServerState",value:function(t){if(this._utils.isUndefinedNull(t))throw new Error("Invalid sid param of ".concat(t));return this._currState=this._currState||this._utils.StorageUtils.getFromLocalStorage("cdSrvrState"),this._currState&&this._currState.sid!==t?null:this._currState}},{key:"onSessionIdChange",value:function(){this._utils.StorageUtils.removeFromLocalStorage("cdSrvrState"),this._currState=null}},{key:"_onStateUpdateFromWorker",value:function(t){this._updateServerState(t)}},{key:"_updateServerState",value:function(t){this._currState=t,this._utils.StorageUtils.saveToLocalStorage("cdSrvrState",t)}},{key:"_onStateUpdateFromStorage",value:function(t){if(t&&t.storageArea&&t.storageArea.cdSrvrState){var e=JSON.parse(t.storageArea.cdSrvrState);this._workerComm.sendAsync(nn,{requestId:e.val.requestId,sts:e.val.sts,std:e.val.std,ott:e.val.ott})}}},{key:"_onNewAgentIdFromWorker",value:function(t){this._agentIdService.set(t)}}],e&&kr(t.prototype,e),n&&kr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function Or(t){return Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Or(t)}function Cr(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=Or(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Or(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Or(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Mr={V1_ONLY:"0",DUAL_COLLECTION_V1_PRIORITY:"1",DUAL_COLLECTION_V2_PRIORITY:"2",V2_ONLY:"3",isValid:function(t){return Object.values(Mr).includes(t)},getDescription:function(t){return Cr(Cr(Cr(Cr({},Mr.V1_ONLY,"Only V1 collector is active"),Mr.DUAL_COLLECTION_V1_PRIORITY,"Both collectors active, V1 is primary"),Mr.DUAL_COLLECTION_V2_PRIORITY,"Both collectors active, V2 is primary"),Mr.V2_ONLY,"Only V2 collector is active")[t]||"Unknown stage"}},Br=Mr;function jr(t){return jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jr(t)}function Rr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ar(r.key),r)}}function Ar(t){var e=function(t,e){if("object"!=jr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=jr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jr(e)?e:e+""}var Ir={defaultDynamicWupDispatchRateConfiguration:{type:"dynamic"},defaultIncrementalWupDispatchRateConfiguration:{type:"incremental",initialRateValueMs:500,incrementStepMs:500,incrementStopMs:5e3,incrementStartWupSendCount:20}},xr=[J,yt,nt,Z,$,et],Nr=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._requireParseFields=Cn(),this._requireParseFields.set(w,w),this._requireParseFields.set(E,E),this._requireParseFields.set(O,O),this._requireParseFields.set(Z,Z),this._requireParseFields.set(P,P),this._configurationList={},this.configDefault={logLevel:$t,isCrossdomain:!1,isGfxRendering:!1,isAudioDetectFeature:!1,enableEmuidFeature:!1,crossDomainsList:[],crossDomainsTimeout:5e3,orientationEventsSamplePeriod:300,orientationEventsThreshold:1,stateChangeEnabled:!1,accelerometerEventsSamplePeriod:0,dataQPassWorkerInterval:500,gyroEventsSamplePeriod:0,gyroEventsThreshold:.3,isContextPropsFeature:!0,isEnabled:!0,isResetEveryLoad:!1,isScrollCollect:!0,isVMDetection:!0,isAudioDetection:!1,wupStatisticsLogIntervalMs:3e4,heartBeatMessageInterval:5e3,resetSessionApiThreshold:2e4,wupMessageRequestTimeout:5e3,logMessageRequestTimeout:5e3,slaveChannelHandshakeTimeout:6e4,slaveAliveMessageInterval:100,forceDynamicDataWupDispatchSettings:!0,dataWupDispatchRateSettings:Ir.defaultDynamicWupDispatchRateConfiguration,logWupDispatchRateSettings:{type:"constant",initialRateValueMs:2500},serverCommunicationSettings:{queueLoadThreshold:100},collectKeyRegionValue:!1,isMutationObserver:!0,collectCustomElementAttribute:!0,isCaptureKeyEvents:!1,locationEventsTimeoutMsec:1e4,isMotionAroundTouchEnabled:!0,motionPaddingAroundTouchMSec:3e3,isMotionOnSessionStart:!0,motionPaddingOnSessionStartMSec:2e4,keyEventsMaskSpecialChars:!1,collectSelectElementBlurAndFocusEvents:!1,enableUnmaskedValues:!1,allowedUnmaskedValuesList:[],wupMessageNumToRetry:5,wupMessageRetryInterval:1e3,wupIncrementalGrowthBetweenFailures:3500,wupMaxIntervalBetweenFailures:16e3,logMessageNumToRetry:5,logMessageRetryInterval:1e3,logIncrementalGrowthBetweenFailures:3500,logMaxIntervalBetweenFailures:16e3,cdsNumExpirationTime:60,enableCoordinatesMasking:!1,acknowledgeDataDispatchingRate:3e3,offloadFontsCollectionEnabled:!1,passwordIdMaskingList:[],isFontWidthFeature:!1,isFontMathFeature:!1,isFontEmojiFeature:!1,isStorageFeature:!1,isKeyboardLayoutFeature:!1,isScreenHighResFeature:!1,isBatteryStatusFeature:!1,isNavigatorFeature:!1,isWebglFeature:!1,isWebRTCFeature:!1,isSpeechVoicesFeature:!1,isDRMFeature:!1,isBrowserExtensionsFeature:!1,isAdblockerListsFeature:!1,elementUniqueIDConfiguration:{componentsFormat:"{tagName}_{index}_{id}_{className}_{ariaLabel}_{containerInfo}_{hierarchyPath}",hierarchyFormat:"{tagName}_{index}",enabledTags:["input","textarea","button","select","div","span"]},fontCollection:JSON.stringify({migrationMode:Br.DUAL_COLLECTION_V1_PRIORITY,v2:{batchSize:10,timeoutGap:0}}),enableAutoElementId:!0},this.loadConfigurations(this.configDefault)},(e=[{key:"isConfigurationUpdatedFromServer",value:function(){return!this._isDefaultConfiguration}},{key:"loadConfigurations",value:function(t,e){var n=this;t&&(this._isDefaultConfiguration=t===this.configDefault,Object.keys(t).forEach((function(r){if(e||n._isDefaultConfiguration||!xr.includes(r)){var o=t[r];if(n._requireParseFields.has(r)){var i=n._tryParseConfigurationValue(o);i&&(o=i)}n._configurationList[r]=o}})))}},{key:"get",value:function(t){return this._configurationList[t]}},{key:"set",value:function(t,e){this._configurationList[t]=e}},{key:"getAll",value:function(){return this._configurationList}},{key:"_tryParseConfigurationValue",value:function(t){if("string"!=typeof t)return null;try{return JSON.parse(t)}catch(t){}return null}}])&&Rr(t.prototype,e),n&&Rr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),Lr="touchEvent",Dr="keyEvent",Fr="ConfigurationLoadedEvent",Ur="NewSessionStartedEvent",Gr="ApiContextChangeEvent",Hr="ApiResetSessionEvent",Wr="ApiCustomerMetadataEvent",Vr="ApiChangeStateEvent",Qr="ApiSetCsidEvent",zr="ApiSetPsidEvent",Kr="ApiSetCustomerBrand",qr="ServerRestoredMuidEvent",Xr="StateChangedEvent",Jr="MutationSingleEvent",Yr="MutationAddedNodes",Zr="MutationRemovedNodes",$r="StandardInputEvent",to="StandardInputFocusEvent",eo="StandardInputBlurEvent",no="StandardOnClickEvent",ro="StandardOnSelectEvent",oo="ElementFocusEvent",io="ElementBlurEvent",ao="StandardOnFormSubmitEvent",uo="SyntheticInputMaskEvent",so="CutEvent",co="CopyEvent",lo="PasteEvent",fo="DeviceOrientationEvent",ho="BeforeInstallPromptEvent",po="FocusEvent",yo="BlurEvent",mo="ResizeEvent",vo="DOMContentLoadedEvent",bo="VisibilityChangeEvent",go="ScrollEvent",_o="WindowMessageEvent",So="CustomElementDetectedEvent",wo="CustomElementInaccessible",Eo="CustomElementSubmitted",ko="BrowserContextAdded",Po="CustomInputElement",To={ElementsEvent:"BCTrackerElementsEvent",ElementEventsEvent:"BCTrackerElementEventsEvent",KeyEvent:"BCTrackerKeyEvent",TouchEvent:"BCTrackerTouchEvent",MouseEvent:"BCTrackerMouseEvent"};function Oo(t){return Oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oo(t)}function Co(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Mo(r.key),r)}}function Mo(t){var e=function(t,e){if("object"!=Oo(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Oo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Oo(e)?e:e+""}var Bo=function(){return t=function t(e,n,r,o,i){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!r)throw new Error("messageBus param must be defined");this._configurationLoadedCallback=null,this._utils=e,this._configurationRepository=n,this._messageBus=r,this._cidCache=o,i&&i.addMessageListener(br,this._onConfigurationLoadedEvent.bind(this))},(e=[{key:"updateLogUrlToWorker",value:function(t,e,n){var r=this._configurationRepository.get(x);if(this._isValidLogUrl(r)){if(this._configurationRepository.get(k)){var o=new URL(r);r=o.protocol+"//"+o.host}var i={cid:this._cidCache.get(),sid:t,csid:e,ds:"js",sdkVer:this._utils.scriptVersion};ue.attachSessionIdentifiers(i);var a={logAddress:r,sessionIdentifiers:i};n.sendAsync(Ze,a)}}},{key:"_isValidLogUrl",value:function(t){try{return new URL(t),!0}catch(t){return!1}}},{key:"setConfigurationLoadedCallback",value:function(t){this._configurationLoadedCallback=t}},{key:"_onConfigurationLoadedEvent",value:function(t){this._configurationRepository.loadConfigurations(t),this._configurationLoadedCallback&&this._configurationLoadedCallback(this._configurationRepository.get(B)),this._messageBus.publish(Fr,this._configurationRepository)}}])&&Co(t.prototype,e),n&&Co(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function jo(t){return jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jo(t)}function Ro(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ao(r.key),r)}}function Ao(t){var e=function(t,e){if("object"!=jo(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=jo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jo(e)?e:e+""}var Io=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"startFeature",value:function(){}},{key:"stopFeature",value:function(){}},{key:"updateFeatureConfig",value:function(){}},{key:"sendToQueue",value:function(){}},{key:"getEventTimestamp",value:function(){return ze.dateNow()}},{key:"getTimestampFromEvent",value:function(t){return t.timeStamp?ze.cutDecimalPointDigits(t.timeStamp,3):0}}],e&&Ro(t.prototype,e),n&&Ro(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),xo={false:0,true:1,undefined:2,null:2},No={Enter:13,ArrowUp:38,ArrowDown:40,ArrowLeft:37,ArrowRight:39,Escape:27," ":32,Control:17,Alt:18,Tab:9,Shift:16,CapsLock:20,Meta:91,Backspace:8,Home:36,End:35,Insert:45,Delete:46,PageUp:33,PageDown:34,PrintScreen:44,NumLock:144,Clear:144,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,10:121,F11:122,F12:123};function Lo(t){return Lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lo(t)}function Do(t){return function(t){if(Array.isArray(t))return Fo(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Fo(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fo(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Uo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Go(r.key),r)}}function Go(t){var e=function(t,e){if("object"!=Lo(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Lo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Lo(e)?e:e+""}var Ho=-1e3,Wo=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._configurationRepository=e,this._attributesToMask=this._configurationRepository.get(nt),this.maskedCodeMapping={original:function(t,e,n){return{code:t,charCode:e,key:n}},numpadKey:function(t){return{code:"Numpad",charCode:96,key:t}},letter:function(){return{code:"Key",charCode:65,key:"A"}},digit:function(){return{code:"Digit",charCode:49,key:"1"}},specialChar:function(){return{code:"SpecialChar",charCode:42,key:"*"}},other:function(){return{code:"Other",charCode:66,key:"B"}},masked:function(){return{code:"Masked",charCode:"a".charCodeAt(0),key:"a"}}},this.digitMaskValue="1",this.letterMaskValueLowerCase="a",this.unicodeMaskValue="B",this.specialCharMaskValue="*",this.customPasswordMaskValue="a",this.specialConfigurationChars=new Set([",","."," ","@",";",":","-","+","$"]),this.specialChars=new Set(["_","!","%","^","&","*","#","(",")","=","{","}","[","]","’","\\","|","/","?",">","<","~",'"',"±","§","'"]),this.lettersSet=new Set(Do(Array(26)).map((function(t,e){return String.fromCharCode(65+e)})).concat(Do(Array(26)).map((function(t,e){return String.fromCharCode(97+e)}))).concat(Do(Array(27)).map((function(t,e){return String.fromCharCode(1488+e)})))),this.digitsSet=new Set(Do(Array(10)).map((function(t,e){return String(e)}))),this.cjkNumbersSet=new Set(["〇","一","二","三","四","五","六","七","八","九","十","百","千","万","零","壹","貳","贰","參","叁","肆","伍","陸","陆","柒","捌","玖","拾","佰","仟","萬","〡","〢","〣","〤","〥","〦","〧","〨","〩","〸","〹","〺"]),this.allowedUnmaskedChars=new Set([",",".","@",";",":","-","+","$"," "]),this.allowedMaskedChars=new Set(["a","1","*"])},e=[{key:"maskKey",value:function(t,e,n){if(this._isPasswordMaskedElementId(n))return this.maskedCodeMapping.masked();if(No[t]){var r=No[t];return this.maskedCodeMapping.original(e,r,t)}return this._isANumberOrDigit(t)?e.includes("Numpad")?this.maskedCodeMapping.numpadKey("1"):this.maskedCodeMapping.digit():this._isALetter(t)?this.maskedCodeMapping.letter():!this._configurationRepository.get(J)&&this.specialConfigurationChars.has(t)?this.maskedCodeMapping.original(e,t.charCodeAt(0),t):this.specialChars.has(t)||this.specialConfigurationChars.has(t)?e.includes("Numpad")?this.maskedCodeMapping.numpadKey("*"):this.maskedCodeMapping.specialChar():this.maskedCodeMapping.other()}},{key:"getKeyFromLegacyProperties",value:function(t){var e=t.keyCode||t.which;return 0===e||void 0===e?"":String.fromCharCode(e)}},{key:"_isALetter",value:function(t){return/^[a-zA-Z]$/.test(t)||this._isJapaneseOrChineseLetter(t)||this._isHebrewLetter(t)}},{key:"_isANumberOrDigit",value:function(t){return/[0-9]/.test(t)||this.cjkNumbersSet.has(t)}},{key:"_isJapaneseOrChineseLetter",value:function(t){return this._isCJKUnifiedIdeographs(t)||this._isCJKUnifiedIdeographsExtenA(t)||this._isCJKUnifiedIdeographsExtenB(t)||this._isSmallKatakanaLetter(t)}},{key:"_isCJKUnifiedIdeographsExtenB",value:function(t){return/[\u3041-\u309F]/.test(t)}},{key:"_isSmallKatakanaLetter",value:function(t){return/[\u30A1-\u30FF]/.test(t)}},{key:"_isCJKUnifiedIdeographsExtenA",value:function(t){return/[\u3400-\u4DB5]/.test(t)}},{key:"_isCJKUnifiedIdeographs",value:function(t){return/[\u4E00-\u9FCC]/.test(t)}},{key:"_isHebrewLetter",value:function(t){return/[\u05D0-\u05EA]/.test(t)}},{key:"_isPasswordMaskedElementId",value:function(t){var e=this._configurationRepository.get(yt);return void 0!==t&&Array.isArray(e)&&e.includes(t)}},{key:"getDropDownListValues",value:function(t){for(var e=[],n=0;n<t.length;n++){var r=t.options[n].text||t.options[n].value||"";e.push(this.maskText(r,t.id))}return e}},{key:"maskText",value:function(t,e){var n=this;if(!t)return"";if(this._isPasswordMaskedElementId(e))return t.replace(/./g,this.customPasswordMaskValue);var r=Do(t).map((function(t){return n.digitsSet.has(t)?n.digitMaskValue:n.lettersSet.has(t)?n.letterMaskValueLowerCase:n.cjkNumbersSet.has(t)?n.digitMaskValue:n.specialChars.has(t)?n.specialCharMaskValue:n.allowedUnmaskedChars.has(t)?t:n.unicodeMaskValue})).join("");return this._configurationRepository.get(J)?r=Do(r).map((function(t){return n.allowedUnmaskedChars.has(t)?n.specialCharMaskValue:t})).map((function(t){return n.allowedMaskedChars.has(t)?t:n.unicodeMaskValue})).join(""):r}},{key:"maskAbsoluteIfRequired",value:function(t,e){return""!==t&&this._shouldMask(t)?this.maskText(t,e):t}},{key:"shouldMaskCoordinates",value:function(){return this._configurationRepository.get(et)}},{key:"_shouldMask",value:function(t){var e=this;return void 0!==this._attributesToMask&&this._attributesToMask.some((function(n){return e._isConformsRegex(n.regexPattern,t)||n.name.toLowerCase()===(null==t?void 0:t.toLowerCase())}))}},{key:"_isConformsRegex",value:function(t,e){try{if(new RegExp(t).test(e))return ue.debug("The string ".concat(e," matches the pattern ").concat(t,".")),!0}catch(t){ue.error("Invalid regex pattern: ".concat(t))}return ue.debug("The string ".concat(e," does not match the pattern. ").concat(t,".")),!1}}],e&&Uo(t.prototype,e),n&&Uo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function Vo(t){return Vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vo(t)}function Qo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zo(r.key),r)}}function zo(t){var e=function(t,e){if("object"!=Vo(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Vo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Vo(e)?e:e+""}function Ko(t,e,n){return e=Xo(e),function(t,e){if(e&&("object"==Vo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,qo()?Reflect.construct(e,n||[],Xo(t).constructor):e.apply(t,n))}function qo(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(qo=function(){return!!t})()}function Xo(t){return Xo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xo(t)}function Jo(t,e){return Jo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Jo(t,e)}var Yo={configKey:"isTouchEvents",isDefault:!0,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!0,runInSlave:!0,runInLean:!0,runInUns:!1,isRunning:!1,instance:null},Zo={pointerdown:"touchstart",pointerup:"touchend",pointermove:"touchmove",MSPointerDown:"touchstart",MSPointerUp:"touchend",MSPointerMove:"touchmove"},$o={touchstart:0,touchmove:1,touchend:2,touchcancel:3},ti=["eventSequence","timestamp","eventType","isTrusted","elementHash","clientX","clientY","touchIndex","touchSizeMajor","touchSizeMinor","pageX","pageY","screenX","screenY","relativeTime","touchPressure"],ei=function(t){function e(t,n,r,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=Ko(this,e))._utils=t,a._dataQ=r,a._elements=n,a._msgBus=o,a._onAllBrowsersTouchEventBinded=a._onAllBrowsersTouchEvent.bind(a),a._maskingService=i,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jo(t,e)}(e,t),n=e,r=[{key:"startFeature",value:function(t){this._bind(t)}},{key:"stopFeature",value:function(t){this._unbind(t)}},{key:"_addToCommunicationQueue",value:function(t,e,n,r){t!==$o.touchstart&&t!==$o.touchend||this._msgBus.publish(Lr,{action:t});var o=this.getEventTimestamp(r),i=xo[r.isTrusted],a=this._elements.getElementHashFromEvent(r),u=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();this._utils.isUndefinedNull(t)&&(t=-1),this._utils.isUndefinedNull(e)&&(e=-1);var s=this.getTimestampFromEvent(r);this._dataQ.addToQueue("touch_events",this._utils.convertToArrayByMap(ti,{eventSequence:u,timestamp:o,eventType:t,isTrusted:i,elementHash:a,clientX:this._maskingService.shouldMaskCoordinates()?Ho:n.clientX?Math.round(n.clientX):0,clientY:this._maskingService.shouldMaskCoordinates()?Ho:n.clientY?Math.round(n.clientY):0,touchIndex:e,touchSizeMajor:n.radiusX?2*n.radiusX:0,touchSizeMinor:n.radiusY?2*n.radiusY:0,pageX:this._maskingService.shouldMaskCoordinates()?Ho:n.pageX||0,pageY:this._maskingService.shouldMaskCoordinates()?Ho:n.pageY||0,screenX:this._maskingService.shouldMaskCoordinates()?Ho:n.screenX||0,screenY:this._maskingService.shouldMaskCoordinates()?Ho:n.screenY||0,relativeTime:s,touchPressure:n.force||-1}))}},{key:"_bind",value:function(t){var e,n=t.getDocument();if(window.TouchEvent?e=["touchstart","touchmove","touchend","touchcancel"]:window.PointerEvent&&(e=["pointerdown","pointermove","pointerup"]),this._listeningToEvents=e,this._listeningToEvents)for(var r=0;r<this._listeningToEvents.length;r++)this._utils.addEventListener(n,this._listeningToEvents[r],this._onAllBrowsersTouchEventBinded)}},{key:"_unbind",value:function(t){var e=t.getDocument();if(this._listeningToEvents)for(var n=0;n<this._listeningToEvents.length;n++)this._utils.removeEventListener(e,this._listeningToEvents[n],this._onAllBrowsersTouchEventBinded)}},{key:"_onAllBrowsersTouchEvent",value:function(t){return this._onIeTouchEvent(t),this._onTouchEvent(t),!0}},{key:"_onTouchEvent",value:function(t){if((null===t.pointerType||void 0===t.pointerType)&&void 0!==t.changedTouches)for(var e=$o[t.type],n=0;n<t.changedTouches.length;n++){var r=t.changedTouches[n],o=r.identifier%1e4;this._addToCommunicationQueue(e,o,r,t)}}},{key:"_onIeTouchEvent",value:function(t){if(null!=t.pointerType&&("touch"===t.pointerType||"pen"===t.pointerType||t.pointerType===t.MSPOINTER_TYPE_TOUCH||t.pointerType===t.MSPOINTER_TYPE_PEN)){var e=Zo[t.type]||"touchcancel",n=t.pointerId?t.pointerId%1e4:0,r=$o[e];this._addToCommunicationQueue(r,n,t,t)}}}],o=[{key:"getDefaultSettings",value:function(){return Yo}}],r&&Qo(n.prototype,r),o&&Qo(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Io);function ni(t){return ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ni(t)}function ri(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oi(r.key),r)}}function oi(t){var e=function(t,e){if("object"!=ni(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ni(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ni(e)?e:e+""}var ii={true:1,false:0,undefined:-1},ai=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._elementList=new WeakMap},(e=[{key:"update",value:function(t,e){this._elementList.set(t,e)}},{key:"compare",value:function(t,e){return ii[e===this._elementList.get(t)]}}])&&ri(t.prototype,e),n&&ri(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),ui={IntlBackslash:"0",Digit1:"0",Digit2:"0",Digit3:"0",Digit4:"1",Digit5:"1",Digit6:"1",Digit7:"1",Digit8:"2",Digit9:"2",Digit0:"2",KeyQ:"3",KeyW:"3",KeyE:"3",KeyA:"3",KeyS:"3",KeyD:"3",KeyZ:"3",KeyX:"3",KeyC:"3",KeyR:"4",KeyT:"4",KeyF:"4",KeyG:"4",KeyV:"4",KeyB:"4",KeyY:"5",KeyU:"5",KeyH:"5",KeyJ:"5",KeyN:"5",KeyM:"5",KeyI:"6",KeyO:"6",KeyP:"6",KeyK:"6",KeyL:"6",Comma:"6",Period:"6",Semicolon:"7",Minus:"7",Equal:"7",Slash:"7",BracketLeft:"7",Backslash:"7",BracketRight:"7",Quote:"7",NumLock:"8",NumpadDivide:"8",NumpadMultiply:"8",NumpadSubtract:"8",NumpadAdd:"8",NumpadEnter:"8",NumpadDecimal:"8",Numpad0:"8",Numpad1:"8",Numpad2:"8",Numpad3:"8",Numpad4:"8",Numpad5:"8",Numpad6:"8",Numpad7:"8",Numpad8:"8",Numpad9:"8"};function si(t){return si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},si(t)}function ci(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,li(r.key),r)}}function li(t){var e=function(t,e){if("object"!=si(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=si(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==si(e)?e:e+""}function fi(t,e,n){return e=hi(e),function(t,e){if(e&&("object"==si(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,di()?Reflect.construct(e,n||[],hi(t).constructor):e.apply(t,n))}function di(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(di=function(){return!!t})()}function hi(t){return hi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hi(t)}function pi(t,e){return pi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pi(t,e)}var yi={configKey:"isKeyEvents",isDefault:!0,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!0,runInSlave:!0,runInLean:!0,runInUns:!1,isRunning:!1,instance:null},mi={keyup:0,keydown:1,keypress:2},vi=["eventSequence","timestamp","eventType","isTrusted","elementHash","charCode","character","keyComboType","isCtrl","isShift","isAlt","isMetaKey","keyLocation","code","key","isRepeat","keyRegion","relativeTime","isSameKey"],bi=function(t){function e(t,n,r,o,i,a,u){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=fi(this,e))._configurationRepository=t,s._utils=n,s._elements=r,s._dataQueue=o,s._msgBus=i,s._sameCharService=a,s._maskingService=u,s.comboCodes=["c","v","a","x","z","p","s"],s._onKeyEvent=s._onKeyEvent.bind(s),s._useCaptureEvents=s._configurationRepository.get(N),s._listeners=[],s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pi(t,e)}(e,t),n=e,r=[{key:"startFeature",value:function(t){try{var e=t.getDocument();this._bind(e,this._onKeyEvent,this._useCaptureEvents)}catch(t){ue.error("KeyEvents:startFeature failed, msg: ".concat(t.message),t)}}},{key:"stopFeature",value:function(t){try{var e=t.getDocument();this._unbind(e)}catch(t){ue.error("KeyEvents:stopFeature failed, msg: ".concat(t.message),t)}}},{key:"updateFeatureConfig",value:function(t){try{if(this._configurationRepository.get(N)!==this._useCaptureEvents){var e=t.getDocument(),n=this._configurationRepository.get(N);this._unbind(e),this._bind(e,this._onKeyEvent,n),this._useCaptureEvents=n}}catch(t){ue.error("KeyEvents:startFeature failed, msg: ".concat(t.message),t)}}},{key:"_bind",value:function(t,e,n){this._addListener(t,"keyup",e,n),this._addListener(t,"keydown",e,n),this._addListener(t,"keypress",e,n)}},{key:"_unbind",value:function(t){this._removeAllListeners(t,"keyup"),this._removeAllListeners(t,"keydown"),this._removeAllListeners(t,"keypress")}},{key:"_addListener",value:function(t,e,n,r){t.addEventListener(e,n,r),this._listeners.push({target:t,type:e,handler:n,options:r})}},{key:"_removeAllListeners",value:function(t,e){this._listeners.filter((function(n){return n.target===t&&n.type===e})).forEach((function(t){t.target.removeEventListener(t.type,t.handler,t.options)})),this._listeners=this._listeners.filter((function(n){return!(n.target===t&&n.type===e)}))}},{key:"_onKeyEvent",value:function(t){var e=mi[t.type];e!==mi.keydown&&e!==mi.keyup||this._msgBus.publish(Dr,{action:e}),this._handleKeyEvent(t,"key_events")}},{key:"_handleKeyEvent",value:function(t,e){var n=this._elements.getRealEventTarget(t).id,r=mi[t.type];this._utils.isUndefinedNull(r)&&(r=-1);var o=this._utils.StorageUtils.getAndUpdateEventSequenceNumber(),i=this.getEventTimestamp(t),a=t.key||this._maskingService.getKeyFromLegacyProperties(t),u=t.code||"",s=this._maskingService.maskKey(a,u,n),c=s.key.length>1?"":s.key,l=this._elements.getElementHashFromEvent(t),f=this._getComboType(t,a),d=xo[t.isTrusted],h="Meta"===t.key||"OS"===t.key||"Win"===t.key||t.metaKey||91===t.keyCode||92===t.keyCode,p=this._configurationRepository.get(T)?this._getKeyRegion(u):"-1",y=this.getTimestampFromEvent(t),m=ii.undefined;"keypress"===t.type&&(m=this._sameCharService.compare(t.target,t.key),this._sameCharService.update(t.target,t.key)),ue.isDebug()&&ue.trace("onKeyEvent: got event: ".concat(r,", at time:").concat(i,", key: ").concat(s.key,", code:").concat(s.code,", old charCode:").concat(s.charCode)),this._dataQueue.addToQueue(e,this._utils.convertToArrayByMap(vi,{eventType:r,eventSequence:o,timestamp:i,charCode:s.charCode,character:c,elementHash:l,keyComboType:f,isTrusted:d,isCtrl:t.ctrlKey||!1,isShift:t.shiftKey||!1,isAlt:t.altKey||!1,isMetaKey:h||!1,keyLocation:t.location||0,code:s.code||"",key:s.key||"",location:t.location||"",isRepeat:t.repeat||!1,keyRegion:p,relativeTime:y,isSameKey:m}))}},{key:"_getKeyRegion",value:function(t){return ui[t]?ui[t]:"-1"}},{key:"_getComboType",value:function(t,e){return(t.ctrlKey||t.metaKey)&&void 0!==e?this.comboCodes.indexOf(e):-1}}],o=[{key:"getDefaultSettings",value:function(){return yi}}],r&&ci(n.prototype,r),o&&ci(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Io);function gi(t){return gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gi(t)}function _i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Si(r.key),r)}}function Si(t){var e=function(t,e){if("object"!=gi(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=gi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gi(e)?e:e+""}var wi=function(){return t=function t(e,n,r,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._historyBuffer=[],this._isTouchInProgress=!1,this._touchStartCount=0,this._isPostTouch=!1,this._touchEndTime=0,this._sensorGateKeeper=i,this._dataQueue=n,this._configurationRepository=e,this._msgBus=r,this._utils=o,this._msgBus.subscribe(Lr,this._onTouch.bind(this)),this._msgBus.subscribe(Dr,this._onTouch.bind(this)),this._isMotionAroundTouchEnabled=this._configurationRepository.get(F),this._aroundTouchInterval=this._configurationRepository.get(U)},(e=[{key:"addToQueue",value:function(t,e,n,r){var o=this._utils.dateNow();if(this._isPostTouch&&o-this._touchEndTime>this._aroundTouchInterval&&(ue.debug("SensorsDataQueue: stopped post touch events, time has passed (".concat(this._aroundTouchInterval," millisec)")),this._isPostTouch=!1),!this._isMotionAroundTouchEnabled||this._isTouchInProgress||this._isPostTouch||this._sensorGateKeeper.isOpen())this._dataQueue.addToQueue(t,e,n,r);else{this._historyBuffer.push({name:t,data:e,addCtxId:n,isImmediateWup:r,timestamp:o});for(var i=0,a=this._historyBuffer.length;i<a&&o-this._historyBuffer[0].timestamp>this._aroundTouchInterval;i++)this._historyBuffer.shift()}}},{key:"onConfigUpdate",value:function(){this._aroundTouchInterval=void 0!==this._configurationRepository.get(U)?this._configurationRepository.get(U):this._aroundTouchInterval,this._isMotionAroundTouchEnabled=void 0!==this._configurationRepository.get(F)?this._configurationRepository.get(F):this._isMotionAroundTouchEnabled}},{key:"_sendBuffer",value:function(){var t=this._utils.dateNow();ue.debug("sending history sensors buffer ts=".concat(t));for(var e=0,n=this._historyBuffer.length;e<n;e++)t-this._historyBuffer[e].timestamp<=this._aroundTouchInterval&&this._dataQueue.addToQueue(this._historyBuffer[e].name,this._historyBuffer[e].data,this._historyBuffer[e].addCtxId,this._historyBuffer[e].isImmediateWup);this._historyBuffer=[]}},{key:"_onTouch",value:function(t){return this._isMotionAroundTouchEnabled&&(this._isTouchInProgress||t.action!==$o.touchstart&&t.action!==mi.keydown?t.action===$o.touchend||t.action===mi.keyup?(this._touchStartCount--,this._touchStartCount<=0&&(this._isTouchInProgress=!1,this._isPostTouch=!0,this._touchEndTime=this._utils.dateNow(),ue.debug("stopped touch event in sensors data q ts=".concat(this._utils.dateNow())))):t.action!==$o.touchstart&&t.action!==mi.keydown||this._touchStartCount++:(ue.debug("Started touch event in sensors data q ts=".concat(this._utils.dateNow())),this._isTouchInProgress=!0,this._touchStartCount=1,this._sendBuffer())),!1}}])&&_i(t.prototype,e),n&&_i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function Ei(t){return Ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ei(t)}function ki(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Pi(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pi(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Ti(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Oi(r.key),r)}}function Oi(t){var e=function(t,e){if("object"!=Ei(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ei(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ei(e)?e:e+""}var Ci=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._weights={input:5,fieldset:4,form:3,textarea:3,label:2},this._interactiveElementsTag=["input","fieldset","textarea","label"],this._classlist=["container","wrapper","section","content","main-content","main_content"],this._containerTagName=["main","article","aside","div"]},e=[{key:"isElementVisible",value:function(t){if(!(t instanceof HTMLElement))return!1;if(t.hasAttribute("hidden"))return!1;var e=window.getComputedStyle(t);if("none"===e.display||"hidden"===e.visibility||0===parseFloat(e.opacity))return!1;var n=t.offsetWidth>0||t.offsetHeight>0,r=t.getClientRects().length>0;if(!n&&!r)return!1;for(var o=t.parentElement;o;){var i=window.getComputedStyle(o);if("none"===i.display||"hidden"===i.visibility||o.hasAttribute("hidden"))return!1;o=o.parentElement}return!0}},{key:"isInExcludedArea",value:function(t){for(var e=t;e;){if(e.tagName){var n=e.tagName.toLowerCase();if("footer"===n||"header"===n||"nav"===n)return!0}e=e.parentElement}return!1}},{key:"isContainer",value:function(t){var e=this,n=t.tagName.toLowerCase(),r=t.className.split(" "),o=t.getAttribute("aria-label")?"_".concat(t.getAttribute("aria-label")):"",i=Array.from(t.attributes).filter((function(t){return t.name.startsWith("data-")})).map((function(t){return"_".concat(t.name)}));return!!this._containerTagName.includes(n)||r.some((function(t){return e._classlist.includes(t)}))||t.hasAttribute("role")&&"region"===t.getAttribute("role")||o.length>0||i.length>0}},{key:"isCustomElement",value:function(t){return"string"==typeof t.localName&&t.localName.indexOf("-")>0}},{key:"calculateScore",value:function(t){var e=this._weights,n=0;return t.id&&t.id.includes("username")?n=20:t.name&&t.name.includes("username")&&(n=10),e[t.tagName.toLowerCase()]+n+("text"===t.type?10:0)}},{key:"findInteractiveArea",value:function(t){var e=this,n=t.querySelectorAll(this._interactiveElementsTag),r={};return n.forEach((function(t){var n,o;if(e.isElementVisible(t)&&!e.isInExcludedArea(t)){var i=t.parentElement,a="".concat(i.tagName,".").concat((null===(n=i.className)||void 0===n?void 0:n.split(" ")[0])||"");r[a]||(r[a]={score:0,parent:i,types:new Set}),r[a].types.add(t.tagName.toLowerCase()),r[a].score+=e.calculateScore(t),r[a].score+=null!==(o=t.id)&&void 0!==o&&o.includes("maincontent")?20:0,r[a].score-=t.disabled?20:0}})),Object.values(r).reduce((function(t,e){return e.score+2*e.types.size>t.score?e:t}),{score:0}).parent}},{key:"findPotentialContainer",value:function(t){for(var e=t,n=null;e&&"body"!==e.tagName.toLowerCase();){if(this.isContainer(e)){var r;n=e;var o=null===(r=e)||void 0===r||null===(r=r.tagName)||void 0===r?void 0:r.toLowerCase(),i=e.className.split(" ");if("div"===o&&(i.includes("containerWrapper")||i.includes("container")))return e;if(this._containerTagName.includes(o)&&"div"!==o)return e}e=e.parentElement}return n}},{key:"interactiveContainer",value:function(){var t=this.findInteractiveArea(document);if(!t)return ue.info("No significant interactive area.");var e=this.findPotentialContainer(t);return e||void 0}},{key:"getUniqueElementId",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;if(!t||!e)return"";var r=e.componentsFormat,o=e.hierarchyFormat;if(!e.isTagEnabled(t.tagName))return"-1";for(var i=this.findInteractiveArea(document),a=i?this.findPotentialContainer(i):null,u=a?"".concat(a.tagName.toLowerCase(),"_").concat(a.className||""):"",s=this._buildFullHierarchyPath(t,o,n),c={"{tagName}":t.tagName.toLowerCase(),"{index}":"[".concat(this._getSiblingIndex(t),"]"),"{id}":t.id||"","{className}":t.className||"","{ariaLabel}":t.getAttribute("aria-label")||"","{hierarchyPath}":s,"{containerInfo}":u},l=r,f=0,d=Object.entries(c);f<d.length;f++){var h=ki(d[f],2),p=h[0],y=h[1];l=l.replace(p,y)}return l=l.replace(/\{[^}]+\}/g,"").replace(/[_:]+/g,"_").replace(/(^_|_$)/g,"")}},{key:"_getSiblingIndex",value:function(t){var e;return String(Array.from((null===(e=t.parentNode)||void 0===e?void 0:e.children)||[]).indexOf(t))}},{key:"_buildFullHierarchyPath",value:function(t,e,n){for(var r=[],o=t.parentNode,i=0;o&&"body"!==(null===(a=o.tagName)||void 0===a?void 0:a.toLowerCase())&&i<n;){var a,u=o.tagName.toLowerCase(),s=this._getSiblingIndex(o),c=e.replace("{tagName}",u).replace("{index}",s>=0?"[".concat(s,"]"):""),l=[];o.id&&l.push(o.id),o.name&&l.push(o.name),o.className&&l.push(o.className),l.length>0&&(c+="".concat(l.join(""))),r.unshift(c),o=o.parentNode instanceof ShadowRoot?o.parentNode.host:o.parentElement,i++}return r.join("")}},{key:"getUniqueElementXpath",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;if(!t)return"";for(var n=[],r=0;t&&r<e;){var o=t.tagName?t.tagName.toLowerCase():t.nodeName.toLowerCase();if(t.id)n.unshift("".concat(o,"#").concat(t.id));else{for(var i=1,a=t;a.previousElementSibling;)a=a.previousElementSibling,i++;n.unshift("".concat(o,":").concat(i))}t=t.assignedSlot?t.assignedSlot:t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentElement,r++}return n.join("/")}}],e&&Ti(t.prototype,e),n&&Ti(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),Mi=Object.freeze(new Ci);function Bi(t){return Bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bi(t)}function ji(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ri(r.key),r)}}function Ri(t){var e=function(t,e){if("object"!=Bi(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Bi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Bi(e)?e:e+""}var Ai=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.componentsFormat=e,this.hierarchyFormat=n,this.enabledTags=r}return e=t,r=[{key:"cleanFormat",value:function(t){return t?(t.match(/{[^}]+}|[:_]/g)||[]).join(""):""}},{key:"parse",value:function(e){try{if("string"==typeof e&&(e=JSON.parse(e)),"object"!==Bi(e)||null===e)throw new Error("Invalid configuration format");return new t(t.cleanFormat(e.componentsFormat),t.cleanFormat(e.hierarchyFormat),e.enabledTags)}catch(t){return ue.error("Failed to parse UniqueIDConfiguration:",t),null}}}],(n=[{key:"isTagEnabled",value:function(t){return"string"==typeof t&&this.enabledTags.length>0&&this.enabledTags.includes(t.toLowerCase())}}])&&ji(e.prototype,n),r&&ji(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r}();function Ii(t){return Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ii(t)}function xi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ni(r.key),r)}}function Ni(t){var e=function(t,e){if("object"!=Ii(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ii(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ii(e)?e:e+""}function Li(t,e,n){return e=Fi(e),function(t,e){if(e&&("object"==Ii(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Di()?Reflect.construct(e,n||[],Fi(t).constructor):e.apply(t,n))}function Di(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Di=function(){return!!t})()}function Fi(t){return Fi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Fi(t)}function Ui(t,e){return Ui=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ui(t,e)}var Gi=function(t){function e(t,n,r,o,i,a){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(u=Li(this,e))._configurationRepository=t,u._utils=n,u._dataQueue=r,u._contextMgr=o,u._maskingService=i,u._categoryService=a,u._elementHashWMap=new WeakMap,u._collectPosition=!0,u._collectClassName=!0,u._collectTitle=!0,u._collectHref=!0,u._collectCustomElementAttribute=!0,u._customElementAttribute=u._configurationRepository.get(R),u._maxElemValLength=30,u._allowedUnmaskedValuesList=u._configurationRepository.get(Z),u._enableUnmaskedValues=u._configurationRepository.get($),u._enableAutoElementId=u._configurationRepository.get(ut),u._uniqueIDConfiguration=Ai.parse(u._configurationRepository.get(mt)),u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ui(t,e)}(e,t),n=e,(r=[{key:"getElement",value:function(t){if(this._utils.isUndefinedNull(t)||t===document||t===document.body)return-1;var e=-1;if(this._elementHashWMap.has(t))e=this._elementHashWMap.get(t).hash;else{var n=Mi.getUniqueElementXpath(t);e=n?this._utils.getHash(n):-1,this._elementHashWMap.set(t,{hash:e,contextList:[this._contextMgr.contextName]}),this._sendElementToServer(t,e)}return e}},{key:"getElementHashFromEvent",value:function(t){var e=this.getRealEventTarget(t);return this.getElement(e)}},{key:"getRealEventTarget",value:function(t){var e=t.composedPath?t.composedPath():null;return e&&e.length>0?e[0]:t.target}},{key:"resendElementPerContext",value:function(t){if(this._elementHashWMap.has(t)){var e=this._elementHashWMap.get(t),n=e.hash;e.contextList.indexOf(this._contextMgr.contextName)<0&&(e.contextList.push(this._contextMgr.contextName),this._elementHashWMap.set(t,{hash:e.hash,contextList:e.contextList}),this._sendElementToServer(t,n))}else ue.error("received for resendElementPerContext bad element, not in hash map. id=".concat(t.id))}},{key:"isListed",value:function(t){return this._elementHashWMap.has(t)}},{key:"getElementData",value:function(t){return this._elementHashWMap.get(t)}},{key:"getElementContextList",value:function(t){return this._elementHashWMap.get(t).contextList}},{key:"_sendElementToServer",value:function(t,e){var n=this._collectPosition?t.getBoundingClientRect&&t.getBoundingClientRect():null,r=-1,o=-1,i=-1,a=-1;n&&(r=Math.round(n.left),o=Math.round(n.top),i=Math.round(n.right-n.left),a=Math.round(n.bottom-n.top));var u=this._maskingService.maskAbsoluteIfRequired(t.id,t.id),s=this._maskingService.maskAbsoluteIfRequired(t.name,t.id),c=this._collectClassName&&t.getAttribute&&this._verifyNoPrivateData(t.getAttribute("class"))||"",l=this._collectTitle&&this._verifyNoPrivateData(t.title)||"",f=this._verifyNoPrivateData(t.nodeName)||"",d=this._collectHref&&this._verifyNoPrivateData(t.href)||"";d.length>0&&(d=this._utils.clearTextFromNumbers(d));var h=this._collectCustomElementAttribute&&t.getAttribute&&this._verifyNoPrivateData(t.getAttribute(this._customElementAttribute))||"",p=this._maskingService.maskAbsoluteIfRequired(h,t.id),y="";"SELECT"===t.nodeName&&(y=this._utils.getDropDownListValues(t,this._maskingService).join(";"));var m=t.value||t.textContent||t.innerHTML||"",v="";this._enableUnmaskedValues&&Array.isArray(this._allowedUnmaskedValuesList)&&this._allowedUnmaskedValuesList.length>0&&this._allowedUnmaskedValuesList.forEach((function(t){"string"!=typeof t?ue.error("Unsupported allowedUnmaksedValuesList value was provided: ".concat(t.toString())):t.toLowerCase()===m.trim().toLowerCase()&&(v=t)})),m=m.length>this._maxElemValLength?"":this._maskingService.maskText(m,t.id);var b=this._utils.isUndefinedNull(t.checked)?-1:t.checked?1:0,g=this.getEventTimestamp(),_=this._enableAutoElementId?Mi.getUniqueElementId(t,this._uniqueIDConfiguration):"",S=this._enableAutoElementId?this._categoryService.categoryField(t):"";this._dataQueue.addToQueue("elements",[this._contextMgr.contextHash,e,f||"",u||"",s||"",t.type||"",r||0,o||0,i||0,a||0,c||"",d||"",l||"",t.alt||"",y||"",m||"",b,g,p||h,v,_,S],!1),ue.isDebug()&&ue.debug("adding element id:"+u+", name:"+s+", type:"+t.type+", width:"+i+", height:"+a+", left:"+r+", top:"+o+", hash: "+e)}},{key:"_verifyNoPrivateData",value:function(t){return/\d\d\d/.test(t)?this._utils.clearTextFromNumbers(t):t}},{key:"updateFeatureConfig",value:function(){this._collectPosition="boolean"==typeof this._configurationRepository.get("isElementsPosition")?this._configurationRepository.get("isElementsPosition"):this._collectPosition,this._collectClassName="boolean"==typeof this._configurationRepository.get("isElementsClassName")?this._configurationRepository.get("isElementsClassName"):this._collectClassName,this._collectTitle="boolean"==typeof this._configurationRepository.get("isElementsTitle")?this._configurationRepository.get("isElementsTitle"):this._collectTitle,this._collectHref="boolean"==typeof this._configurationRepository.get("isElementsHref")?this._configurationRepository.get("isElementsHref"):this._collectHref,this._collectCustomElementAttribute="boolean"==typeof this._configurationRepository.get(j)?this._configurationRepository.get(j):this._collectCustomElementAttribute,this._customElementAttribute="string"==typeof this._configurationRepository.get(R)?this._configurationRepository.get(R):this._customElementAttribute,this._maxElemValLength=this._configurationRepository.get("maxElValLen")?this._configurationRepository.get("maxElValLen"):this._maxElemValLength,this._allowedUnmaskedValuesList=this._configurationRepository.get("allowedUnmaskedValuesList")?this._configurationRepository.get("allowedUnmaskedValuesList"):this._allowedUnmaskedValuesList,this._enableUnmaskedValues=this._configurationRepository.get("enableUnmaskedValues")?this._configurationRepository.get("enableUnmaskedValues"):this._enableUnmaskedValues,this._enableAutoElementId="boolean"==typeof this._configurationRepository.get(ut)?this._configurationRepository.get(ut):this._enableAutoElementId,this._uniqueIDConfiguration="string"==typeof this._configurationRepository.get(mt)?Ai.parse(this._configurationRepository.get(mt)):this._uniqueIDConfiguration}}])&&xi(n.prototype,r),o&&xi(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Io),Hi="cd__rtcframe",Wi="cd__fontDetectionFrame",Vi="cd__frame__";function Qi(t){return Qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qi(t)}function zi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ki(r.key),r)}}function Ki(t){var e=function(t,e){if("object"!=Qi(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Qi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qi(e)?e:e+""}var qi=function(){return t=function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._elementsMutationObserverFactory=e,this._configurationRepository=r,this._domUtils=n,this._windowMutationObservers=Cn(),this._loadedFrames=Cn(),this._framesToIgnore=An(),this._frameSelector="frame, iframe",this._frameLoadedCallback=this._onFrameLoad.bind(this),this.frameAdded=new $n,this.frameRemoved=new $n,this.frameInaccessible=new $n},(e=[{key:"frames",get:function(){var t=[];return this._loadedFrames.forEach((function(e,n){t.push(n)})),t}},{key:"start",value:function(t){var e=this;this._monitorWindow(t),this._findFrames(t.document).forEach((function(t){e._processNewFrame(t)}))}},{key:"stop",value:function(){this._windowMutationObservers.forEach((function(t){t.disconnect()})),this._windowMutationObservers.clear(),this._loadedFrames.clear(),this._framesToIgnore.clear()}},{key:"addToIgnoreList",value:function(t){this._framesToIgnore.add(t)}},{key:"_monitorWindow",value:function(t){if(!this._windowMutationObservers.has(t)){var e=new this._elementsMutationObserverFactory.create(t,self.MutationObserver,this._configurationRepository);e.observe(t.document),e.nodeAdded.subscribe(this._processAddedNode.bind(this)),e.nodeRemoved.subscribe(this._processRemovedNode.bind(this)),this._windowMutationObservers.set(t,e)}}},{key:"_unMonitorWindow",value:function(t){var e=this._windowMutationObservers.get(t);e&&e.disconnect(),this._windowMutationObservers.delete(t)}},{key:"_processAddedNode",value:function(t){var e=this;if(this._domUtils.matches(t,this._frameSelector))this._processNewFrame(t);else{if(!t.hasChildNodes())return;this._findFrames(t).forEach((function(t){e._processNewFrame(t)}))}}},{key:"_processNewFrame",value:function(t){this._framesToIgnore.has(t.id)||t.id.startsWith(Vi)||this._loadedFrames.has(t)||(this._domUtils.addEventListener(t,"load",this._frameLoadedCallback),this._domUtils.canAccessIFrame(t)?this._domUtils.isWindowDocumentReady(t.contentWindow)&&this._addFrame(t):this.frameInaccessible.publish(t))}},{key:"_addFrame",value:function(t){var e=this;this._monitorWindow(t.contentWindow),this._findFrames(t.contentWindow.document).forEach((function(t){e._processNewFrame(t)})),this._loadedFrames.set(t,t.contentDocument),this.frameAdded.publish(t)}},{key:"_processRemovedNode",value:function(t){var e=this;if(this._domUtils.matches(t,this._frameSelector))this._removeFrame(t);else{if(!t.hasChildNodes())return;this._findFrames(t).forEach((function(t){e._removeFrame(t)}))}}},{key:"_removeFrame",value:function(t){this._unMonitorWindow(t.contentWindow),this._domUtils.removeEventListener(t,"load",this._frameLoadedCallback),this._loadedFrames.delete(t)&&this.frameRemoved.publish(t)}},{key:"_onFrameLoad",value:function(t){var e=t.target;this._loadedFrames.has(e)&&this._removeFrame(e),this._processNewFrame(e)}},{key:"_findFrames",value:function(t){for(var e=[],n=[],r=t.querySelectorAll(this._frameSelector),o=0;o<r.length;o++)n.push(r[o]);for(var i=0;i<n.length;i++){var a,u=n[i];e.push(u),this._domUtils.canAccessIFrame(u)?(a=this._findFrames(u.contentWindow.document)).length>0&&(e=e.concat(a)):this.frameInaccessible.publish(u)}return e}}])&&zi(t.prototype,e),n&&zi(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function Xi(t){return Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xi(t)}function Ji(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Yi(r.key),r)}}function Yi(t){var e=function(t,e){if("object"!=Xi(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Xi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Xi(e)?e:e+""}var Zi=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"startFeatures",value:function(){}},{key:"startFeature",value:function(){}},{key:"stopFeatures",value:function(){}},{key:"stopFeature",value:function(){}},{key:"updateFeatureConfig",value:function(){}}])&&Ji(t.prototype,e),n&&Ji(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function $i(t){return $i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$i(t)}function ta(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ea(r.key),r)}}function ea(t){var e=function(t,e){if("object"!=$i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=$i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$i(e)?e:e+""}var na=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.context=e||window.self},(e=[{key:"Context",get:function(){return this.context}},{key:"getDocument",value:function(){return this.context.document}}])&&ta(t.prototype,e),n&&ta(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function ra(t){return ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ra(t)}function oa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ia(r.key),r)}}function ia(t){var e=function(t,e){if("object"!=ra(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ra(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ra(e)?e:e+""}function aa(t,e,n){return e=sa(e),function(t,e){if(e&&("object"==ra(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ua()?Reflect.construct(e,n||[],sa(t).constructor):e.apply(t,n))}function ua(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ua=function(){return!!t})()}function sa(t){return sa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sa(t)}function ca(t,e){return ca=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ca(t,e)}var la=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),aa(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ca(t,e)}(e,t),n=e,(r=[{key:"getDocument",value:function(){return this.context.document||this.context.contentDocument}}])&&oa(n.prototype,r),o&&oa(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(na);function fa(t){return fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fa(t)}function da(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ha(r.key),r)}}function ha(t){var e=function(t,e){if("object"!=fa(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=fa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fa(e)?e:e+""}function pa(t,e,n){return e=ma(e),function(t,e){if(e&&("object"==fa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ya()?Reflect.construct(e,n||[],ma(t).constructor):e.apply(t,n))}function ya(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ya=function(){return!!t})()}function ma(t){return ma=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ma(t)}function va(t,e){return va=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},va(t,e)}var ba=function(t){function e(t,n,r,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=pa(this,e))._framesCache=t,i._framesDetector=n,i._framesDetector.frameAdded.subscribe(i._onFrameAdded.bind(i)),i._framesDetector.frameRemoved.subscribe(i._onFrameRemoved.bind(i)),i._framesDetector.frameInaccessible.subscribe(i._onFrameInaccessible.bind(i)),i._featuresList=[],i._domUtils=r,i._utils=o,i._framesDetector.addToIgnoreList(Hi),i._framesDetector.addToIgnoreList(Wi),i._framesDetector.start(window.self),i._buildFramesCache(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&va(t,e)}(e,t),n=e,r=[{key:"startFeatures",value:function(t){try{if(this._buildFeaturesMap(t),0===this._featuresList.length)return;ue.debug("startFeatures:Running features on ".concat(this._framesCache.count," frames")),this._startFeaturesOnFrames(this._framesCache.contexts,t)}catch(t){ue.debug("Failed to start features in FrameHandler.startFeatures: ".concat(t.message),t)}}},{key:"startFeature",value:function(t){try{this._featuresList.push(t),t.isRunning=!0,this._startFeaturesOnFrames(this._framesCache.contexts,[t])}catch(t){ue.debug("Failed to start feature in FrameHandler.startFeature: ".concat(t.message),t)}}},{key:"stopFeatures",value:function(t){try{this._stopFeaturesOnFrames(t,this._framesCache.contexts)}catch(t){ue.debug("Failed to stop features in FrameHandler.stopFeatures: ".concat(t.message),t)}}},{key:"stopFeature",value:function(t){try{t.isRunning=!1,this._stopFeaturesOnFrames([t],this._framesCache.contexts)}catch(t){ue.debug("Failed to stop feature in FrameHandler.stopFeature: ".concat(t.message),t)}}},{key:"updateFeatureConfig",value:function(t){t.instance.updateFeatureConfig&&this._updateFeaturesConfigOnFrames([t],this._framesCache.contexts)}},{key:"_onFrameAdded",value:function(t){try{ue.debug("Frame:".concat(t.name,", id:").concat(t.id,". was loaded.")),this._framesCache.exists(t)?this._framesCache.unRegisterContextFeatures(t,this._featuresList):this._framesCache.add(t),this._startFeaturesOnFrames([t],this._featuresList)}catch(e){ue.warn("Failed to start features on frame ".concat(t.id,": ").concat(e.message),e)}}},{key:"_onFrameRemoved",value:function(t){try{ue.debug("Frame:".concat(t.name,", id:").concat(t.id,". was removed.")),this._stopFeaturesOnFrames(this._featuresList,[t])}catch(e){ue.warn("Failed to stop features on frame ".concat(t.id,": ").concat(e.message),e)}}},{key:"_onFrameInaccessible",value:function(t){ue.debug("Frame:".concat(t.name,", id:").concat(t.id,". was detected as inaccessible."))}},{key:"_buildFeaturesMap",value:function(t){var e=this;this._featuresList=[],t.forEach((function(t){e._featuresList.push(t)}))}},{key:"_buildFramesCache",value:function(){var t=this;this._framesDetector.frames.forEach((function(e){t._framesCache.exists(e)||t._framesCache.add(e)}))}},{key:"_startFeaturesOnFrames",value:function(t,e){var n=this;t.forEach((function(t){try{if(!n._domUtils.canAccessIFrame(t))return;for(var r=0;r<e.length;r++){var o=e[r];o.shouldRun&&!n._framesCache.hasFeature(t,o)&&(n._framesCache.registerContextFeature(t,o),n._domUtils.isWindowDocumentReady(t.contentWindow)&&(ue.debug("_startFeaturesOnFrames: run feature on frame:".concat(t.name,", id:").concat(t.id,". feature:").concat(o.configKey)),n._utils.asyncCall.call(n._runFeatureOnFrame,n,t,o),o.isRunning=!0))}}catch(e){ue.error("An error has occurred while starting features on frame ".concat(t.name," with id: ").concat(t.id,". Error: ").concat(e.message),e)}}))}},{key:"_runFeatureOnFrame",value:function(t,e){try{this._domUtils.canAccessIFrame(t)?e.instance.startFeature(new la(t.contentWindow)):ue.debug("Not starting features on frame ".concat(t.name," with id: ").concat(t.id," as it is not accessible"))}catch(n){ue.error("An error has occurred while starting feature ".concat(e.configKey," on frame ").concat(t.name," with id: ").concat(t.id,". Error: ").concat(n.message),n)}}},{key:"_stopFeaturesOnFrames",value:function(t,e){var n=this;try{e.forEach((function(e){try{if(!n._domUtils.canAccessIFrame(e))return;if(e.contentWindow&&e.contentWindow.document)for(var r=0,o=t.length;r<o;r++)n._framesCache.hasFeature(e,t[r])&&n._utils.asyncCall.call(n._stopFeatureOnFrame,n,e,t[r]),t[r].isRunning=!1}catch(t){ue.error("An error has occurred while stopping features on frame ".concat(e.name," with id: ").concat(e.id,". Error: ").concat(t.message),t)}n._framesCache.exists(e)&&n._framesCache.unRegisterContextFeatures(e,t),n._framesCache.remove(e)}))}catch(t){ue.warn("Failed stopping features on frames ".concat(t.message),t)}}},{key:"_stopFeatureOnFrame",value:function(t,e){try{this._domUtils.canAccessIFrame(t)?e.instance.stopFeature(new la(t.contentWindow)):ue.debug("Not stopping feature ".concat(e.configKey," on frame ").concat(t.name," with id: ").concat(t.id," as it is not accessible"))}catch(n){ue.error("An error has occurred while stopping feature ".concat(e.configKey," ").concat(func," on frame ").concat(t.name," with id: ").concat(t.id,". Error: ").concat(n.message),n)}}},{key:"_updateFeaturesConfigOnFrames",value:function(t,e){var n=this;e.forEach((function(e){try{if(!n._domUtils.canAccessIFrame(e))return;for(var r=0,o=t.length;r<o;r++)n._framesCache.hasFeature(e,t[r])&&n._utils.asyncCall.call(n._updateFeatureConfigOnFrame,n,e,t[r])}catch(t){ue.error("An error has occurred while updating features configuration on frame ".concat(e.name," with id: ").concat(e.id,". Error: ").concat(t.message),t)}}))}},{key:"_updateFeatureConfigOnFrame",value:function(t,e){try{this._domUtils.canAccessIFrame(t)?e.instance.updateFeatureConfig(new la(t.contentWindow)):ue.debug("Not updating feature ".concat(e.configKey," config on frame ").concat(t.name," with id: ").concat(t.id," as it is not accessible"))}catch(n){ue.error("An error has occurred while updating feature ".concat(e.configKey," config on frame ").concat(t.name," with id: ").concat(t.id,". Error: ").concat(n.message),n)}}}],r&&da(n.prototype,r),o&&da(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Zi);function ga(t){return ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ga(t)}function _a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Sa(r.key),r)}}function Sa(t){var e=function(t,e){if("object"!=ga(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ga(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ga(e)?e:e+""}function wa(t,e,n){return e=ka(e),function(t,e){if(e&&("object"==ga(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ea()?Reflect.construct(e,n||[],ka(t).constructor):e.apply(t,n))}function Ea(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ea=function(){return!!t})()}function ka(t){return ka=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ka(t)}function Pa(t,e){return Pa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Pa(t,e)}var Ta=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),wa(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pa(t,e)}(e,t),n=e,r&&_a(n.prototype,r),o&&_a(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Zi);function Oa(t){return Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oa(t)}function Ca(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ma(r.key),r)}}function Ma(t){var e=function(t,e){if("object"!=Oa(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Oa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Oa(e)?e:e+""}var Ba=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._contexts=Cn()},(e=[{key:"contexts",get:function(){var t=[];return this._contexts.forEach((function(e,n){t.push(n)})),t}},{key:"browserContexts",get:function(){var t=[];return this._contexts.forEach((function(e){t.push(e.browserContext)})),t}},{key:"count",get:function(){return this._contexts.size}},{key:"add",value:function(t){this._contexts.set(t,{registered:!0,features:Cn()})}},{key:"addBrowserContext",value:function(t){this._contexts.set(t.Context,{registered:!0,features:Cn(),browserContext:t})}},{key:"remove",value:function(t){this.exists(t)&&0===this._contexts.get(t).features.size&&this._contexts.delete(t)}},{key:"get",value:function(t){return this._contexts.get(t)}},{key:"exists",value:function(t){return this._contexts.has(t)&&this._contexts.get(t).registered}},{key:"registerContextFeature",value:function(t,e){this.exists(t)&&this._contexts.get(t).features.set(e.configKey,!0)}},{key:"unRegisterContextFeature",value:function(t,e){this.exists(t,e)&&this._contexts.get(t).features.delete(e.configKey)}},{key:"unRegisterContextFeatures",value:function(t,e){for(var n=0;n<e.length;n++){var r=e[n];this.unRegisterContextFeature(t,r)}}},{key:"hasFeature",value:function(t,e){return this.exists(t)&&this._contexts.get(t).features.has(e.configKey)}}])&&Ca(t.prototype,e),n&&Ca(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function ja(t){return ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ja(t)}function Ra(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ia(r.key),r)}}function Aa(t,e,n){return e&&Ra(t.prototype,e),n&&Ra(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ia(t){var e=function(t,e){if("object"!=ja(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ja(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ja(e)?e:e+""}var xa=Aa((function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.browserContext=e,this.removedNodes=n}));function Na(t){return Na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Na(t)}function La(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Fa(r.key),r)}}function Da(t,e,n){return e&&La(t.prototype,e),n&&La(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fa(t){var e=function(t,e){if("object"!=Na(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Na(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Na(e)?e:e+""}var Ua=Da((function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.browserContext=e,this.addedNodes=n}));function Ga(t){return Ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ga(t)}function Ha(t){return function(t){if(Array.isArray(t))return Wa(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Wa(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wa(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wa(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Va(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Qa(r.key),r)}}function Qa(t){var e=function(t,e){if("object"!=Ga(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ga(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ga(e)?e:e+""}var za=function(){return t=function t(e,n,r){var o,i,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i="ignoreNodeTypes",a=An([Node.COMMENT_NODE,Node.TEXT_NODE,Node.ATTRIBUTE_NODE,Node.CDATA_SECTION_NODE]),(i=Qa(i))in o?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a,this._mutationObserver=new n(this._mutationObserved.bind(this,e)),this.nodesAdded=new $n,this.nodesRemoved=new $n,this.nodeAdded=new $n,this.nodeRemoved=new $n,this._configurationRepository=r,this.mutationQueue=[],this.processingQueue=!1},(e=[{key:"observe",value:function(t){this._mutationObserver.observe(t,{childList:!0,subtree:!0})}},{key:"disconnect",value:function(){this._mutationObserver.disconnect()}},{key:"_mutationObserved",value:function(t,e){var n,r,o,i=this,a=(null===(n=this._configurationRepository)||void 0===n?void 0:n.get(ht))||0,u=(null===(r=this._configurationRepository)||void 0===r?void 0:r.get(pt))||100,s=e.filter((function(t){return"childList"===t.type&&[].concat(Ha(t.addedNodes),Ha(t.removedNodes)).some((function(t){return i._isValidNodeType(t)}))}));if(a&&s.length>a)for(var c=function(){var e=s.slice(l,l+Math.min(a,s.length-l));setTimeout((function(){e.forEach((function(e){i._processMutation(t,e)}))}),u)},l=0;l<s.length;l+=a)c();else(o=this.mutationQueue).push.apply(o,Ha(s)),this.processingQueue||(this.processingQueue=!0,this.requestIdleCallbackSafe((function(){return i._processMutationQueue(t)})))}},{key:"_processMutationQueue",value:function(t){for(var e,n=this,r=(null===(e=this._configurationRepository)||void 0===e?void 0:e.get(ht))||50;this.mutationQueue.length>0;)this.mutationQueue.splice(0,r).forEach((function(e){return n._processMutation(t,e)}));this.processingQueue=!1}},{key:"_processMutation",value:function(t,e){var n=this._processNodes(e.addedNodes,this.nodeAdded),r=this._processNodes(e.removedNodes,this.nodeRemoved);this._publishNodesMutationEvents(t,n,r)}},{key:"_publishNodesMutationEvents",value:function(t,e,n){var r=this;e.length>0&&this.requestIdleCallbackSafe((function(){return r.nodesAdded.publish(new Ua(t,e))})),n.length>0&&this.requestIdleCallbackSafe((function(){return r.nodesRemoved.publish(new xa(t,n))}))}},{key:"_processNodes",value:function(t,e){for(var n=[],r=0;r<t.length;r++){var o=t[r];this._isValidNodeType(o)&&(n.push(o),e.publish(o))}return n}},{key:"_isValidNodeType",value:function(t){return!this.ignoreNodeTypes.has(t.nodeType)}},{key:"requestIdleCallbackSafe",value:function(t){return(window.requestIdleCallback||function(t){return setTimeout((function(){t({timeRemaining:function(){return 0},didTimeout:!0})}),1)})(t)}}])&&Va(t.prototype,e),n&&Va(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function Ka(t){return Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ka(t)}function qa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xa(r.key),r)}}function Xa(t){var e=function(t,e){if("object"!=Ka(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ka(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ka(e)?e:e+""}var Ja=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"create",value:function(t,e,n){return new za(t,e,n)}}])&&qa(t.prototype,e),n&&qa(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function Ya(t){return Ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ya(t)}function Za(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$a(r.key),r)}}function $a(t){var e=function(t,e){if("object"!=Ya(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ya(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ya(e)?e:e+""}var tu=function(){return t=function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._configurationRepository=e,this._domUtils=n,this._utils=r},(e=[{key:"create",value:function(){if(this._configurationRepository.get(A)){var t=new Ba,e=new qi(new Ja,this._domUtils,this._configurationRepository);return new ba(t,e,this._domUtils,this._utils)}return new Ta}}])&&Za(t.prototype,e),n&&Za(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function eu(t){return eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eu(t)}function nu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ru(r.key),r)}}function ru(t){var e=function(t,e){if("object"!=eu(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=eu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eu(e)?e:e+""}var ou=function(){return t=function t(e,n,r,o,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._features=e,this._frameHandler=n,this._configurationRepository=r,this._domUtils=o,this._cdUtils=i,this._browserContextsCache=a,this.buildFrameRelatedLists()},(e=[{key:"buildFrameRelatedLists",value:function(){this._frameRelatedDefaultFeatures=this._collectFrameRelated(this._features.getDefaultFeatures()),this._frameRelatedNonDefaultFeatures=this._collectFrameRelated(this._features.getNonDefaultFeatures())}},{key:"runDefault",value:function(){ue.info("Running default features"),this._runFeatures(this._features.getDefaultFeatures(),this._frameRelatedDefaultFeatures)}},{key:"stopDefault",value:function(){ue.info("Stopping default features"),this._stopFeatures(this._features.getDefaultFeatures(),this._frameRelatedDefaultFeatures)}},{key:"runPerSessionFeatures",value:function(){ue.info("Running per session features"),this._configurationRepository.isConfigurationUpdatedFromServer()?this._startFeatures(this._features.getPerSessionFeatures()):ue.info("We didn't receive configurations from the server yet. Skipping per session features start until configuration arrives.")}},{key:"stopPerSessionFeatures",value:function(){ue.info("Stopping per session features"),this._stopFeatures(this._features.getPerSessionFeatures())}},{key:"runNonDefault",value:function(){ue.info("Running non default features"),this._configurationRepository.isConfigurationUpdatedFromServer()?this._runFeatures(this._features.getNonDefaultFeatures(),this._frameRelatedNonDefaultFeatures):ue.info("We didn't receive configurations from the server yet. Skipping non default features start until configuration arrives.")}},{key:"stopNonDefault",value:function(){ue.info("Stopping non default features"),this._stopFeatures(this._features.getNonDefaultFeatures(),this._frameRelatedNonDefaultFeatures)}},{key:"runPerContextFeatures",value:function(t){ue.info("Running per context features"),this._configurationRepository.isConfigurationUpdatedFromServer()?(this._runFeatures(this._features.getPerContextFeatures()),"cd_auto"!==t.name&&this._frameRelatedDefaultFeatures&&this._frameHandler.startFeatures(this._frameRelatedDefaultFeatures)):ue.info("We didn't receive configurations from the server yet. Skipping per context features start until configuration arrives.")}},{key:"stopPerContextFeatures",value:function(){ue.info("Stopping per context features"),this._stopFeatures(this._features.getPerContextFeatures())}},{key:"stopAllFeatures",value:function(){ue.info("Stopping all features"),this.stopDefault(),this.stopNonDefault(),this.stopPerSessionFeatures(),this.stopPerContextFeatures()}},{key:"updateRunByConfig",value:function(t){ue.info("Updating features configuration"),this._updateFeatures(this._features.getDefaultFeatures(),t),this._updateFeatures(this._features.getNonDefaultFeatures(),t),this._updateFeatures(this._features.getPerContextFeatures(),t)}},{key:"runFeaturesOnBrowserContext",value:function(t){var e=this,n=this._features.getDefaultFeatures();n&&(this._browserContextsCache.unRegisterContextFeatures(t.Context,n),Object.keys(n).forEach((function(r){var o=n[r];o.shouldRun&&o.isFrameRelated&&(o.isRunning=!0,o.instance&&e._cdUtils.asyncCall.call(o.instance.startFeature,o.instance,t))})))}},{key:"stopFeaturesOnBrowserContextRemove",value:function(t){var e=this,n=this._features.getDefaultFeatures();n&&(this._browserContextsCache.unRegisterContextFeatures(t.Context,n),Object.keys(n).forEach((function(r){var o=n[r];o.shouldRun&&o.isFrameRelated&&o.isRunning&&o.instance&&e._cdUtils.asyncCall.call(o.instance.stopFeature,o.instance,t)})))}},{key:"_runFeatures",value:function(t,e){var n=this;t&&Object.keys(t).forEach((function(e){var r=t[e];r.shouldRun&&(n._cdUtils.asyncCall.call(r.instance.startFeature,r.instance,new na(window.self)),r.isRunning=!0)})),e&&(this._frameHandler.startFeatures(e),this._domUtils.onPageLoad(window,(function(){n._frameHandler.startFeatures(e)})))}},{key:"_stopFeatures",value:function(t,e){var n=this;t&&Object.keys(t).forEach((function(e){var r=t[e];r.instance.stopFeature&&n._cdUtils.asyncCall.call(r.instance.stopFeature,r.instance,new na(window.self)),r.isRunning=!1})),e&&this._frameHandler.stopFeatures(e)}},{key:"_actOnFeature",value:function(t,e){t.isFrameRelated&&this._frameHandler[e](t),t.instance[e]&&this._cdUtils.asyncCall.call(t.instance[e],t.instance,new na(window.self))}},{key:"_startFeatures",value:function(t){var e=this;t&&Object.keys(t).forEach((function(n){var r=t[n],o=e._configurationRepository.get(r.configKey);"boolean"==typeof o&&(r.shouldRun=o),r.shouldRun&&(e._actOnFeature(r,"startFeature"),r.isRunning=!0)}))}},{key:"_startFeatureOnBrowserContexts",value:function(t){var e=this;t.isFrameRelated&&this._browserContextsCache.browserContexts.forEach((function(n){t.shouldRun&&!e._browserContextsCache.hasFeature(n.Context,t)&&(e._browserContextsCache.registerContextFeature(n.Context,t),e._cdUtils.asyncCall.call(t.instance.startFeature,t.instance,n),t.isRunning=!0)}))}},{key:"_stopFeatureOnBrowserContexts",value:function(t){var e=this;t.isFrameRelated&&this._browserContextsCache.browserContexts.forEach((function(n){e._browserContextsCache.hasFeature(n.Context,t)&&e._cdUtils.asyncCall.call(t.instance.stopFeature,t.instance,n),t.isRunning=!1,e._browserContextsCache.exists(n.Context)&&e._browserContextsCache.unRegisterContextFeature(n.Context,t),e._browserContextsCache.remove(n.Context)}))}},{key:"_updateFeatureConfigOnBrowserContexts",value:function(t){var e=this;t.isFrameRelated&&this._browserContextsCache.browserContexts.forEach((function(n){e._browserContextsCache.hasFeature(n.Context,t)&&e._cdUtils.asyncCall.call(t.instance.updateFeatureConfig,t.instance,n)}))}},{key:"_updateFeatures",value:function(t,e){var n=this;t&&Object.keys(t).forEach((function(r){var o=t[r],i=e.get(o.configKey);"boolean"==typeof i&&(o.shouldRun=i),o.isRunning&&!o.shouldRun?(n._actOnFeature(o,"stopFeature"),n._stopFeatureOnBrowserContexts(o),o.isRunning=!1):!o.isRunning&&o.shouldRun&&(n._actOnFeature(o,"startFeature"),n._startFeatureOnBrowserContexts(o),o.isRunning=!0),o.isRunning&&(n._actOnFeature(o,"updateFeatureConfig"),n._updateFeatureConfigOnBrowserContexts(o))}))}},{key:"_collectFrameRelated",value:function(t){var e=[];return t&&Object.keys(t).forEach((function(n){var r=t[n];r.isFrameRelated&&e.push(r)})),e}}])&&nu(t.prototype,e),n&&nu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function iu(t){return iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iu(t)}function au(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uu(r.key),r)}}function uu(t){var e=function(t,e){if("object"!=iu(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=iu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==iu(e)?e:e+""}var su=0,cu=1,lu=function(){return t=function t(e,n,r,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._featureMgr=e,this._dataQ=r,this._configurationRepository=n,this._pauseResumeEnabled=n.get(K)||!1,this._sdkState=su,this._stateService=o,this._workerComm=i},(e=[{key:"onResume",value:function(){this._sdkState===cu?(ue.info("Resuming JS SDK"),this._featureMgr.updateRunByConfig(this._configurationRepository),this._sdkState=su,this._stateService.updateState(sn.started)):ue.warn("PauseResumeManager:onResume - resume api called when SDK already running")}},{key:"onPause",value:function(){this._sdkState===su?(ue.info("Pausing JS SDK"),this._featureMgr.stopAllFeatures(),this._sdkState=cu,this._stateService.updateState(sn.paused)):ue.warn("Pause api called when SDK already paused")}},{key:"onStateChange",value:function(t){t.toState&&this._verifyApiAllowed(t.toState)&&("pause"===t.toState?(this.onPause(),this.updateSDKStateToWorker(cu)):"run"===t.toState?(this.onResume(),this.updateSDKStateToWorker(su)):ue.warn("stateChange api called with non valid toState: "+t.toState))}},{key:"updateSDKStateToWorker",value:function(t){var e={SDK_state:t};this._workerComm.sendAsync(un,e)}},{key:"isCustomerApiEnabled",value:function(){return this._sdkState===su}},{key:"_verifyApiAllowed",value:function(t){return!!this._pauseResumeEnabled||(this._dataQ.addToQueue("forbidden_api_call",[null,t]),!1)}},{key:"onConfigUpdate",value:function(){this._pauseResumeEnabled=this._configurationRepository.get(K)||!1,!1===this._configurationRepository.get("isEnabled")&&this.onPause()}}])&&au(t.prototype,e),n&&au(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),fu="ContextChange",du="ResetSession",hu="cdCustomerMetadata",pu="cdChangeState",yu="cdSetCsid",mu="cdSetPsid",vu="cdSetCustomerBrand";function bu(t){return bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bu(t)}function gu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_u(r.key),r)}}function _u(t){var e=function(t,e){if("object"!=bu(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=bu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bu(e)?e:e+""}var Su=function(){return t=function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._pauseResumeMgr=e,this._messageBus=n,this._cdApiFacade=r,this._utils=o,this._createCommandToBusMessageMapping()},e=[{key:"enableApi",value:function(){ue.info("Enabling api calls"),this._onApiMessageBinded=this._onApiMessage.bind(this),this._utils.addEventListener(window,"message",this._onApiMessageBinded,!0)}},{key:"disableApi",value:function(){ue.info("Disabling api calls"),this._utils.removeEventListener(window,"message",this._onApiMessageBinded,!0)}},{key:"getCustomerSessionID",value:function(t){this._cdApiFacade.getCustomerSessionID((function(e){t(e)}))}},{key:"getLogServerAddress",value:function(t){this._cdApiFacade.getLogServerAddress((function(e){t(e)}))}},{key:"getServerAddress",value:function(t){this._cdApiFacade.getServerAddress((function(e){t(e)}))}},{key:"getConfigurations",value:function(t){this._cdApiFacade.getConfigurations((function(e){t(e)}))}},{key:"notifySessionReset",value:function(t){this._pauseResumeMgr.isCustomerApiEnabled()&&window.postMessage({type:"SNumNotification",cdSNum:t},window.location.href)}},{key:"isApiAvailable",value:function(t){return this._cdApiFacade.isApiAvailable(t)}},{key:"_onApiMessage",value:function(t){var e=t.data,n=e.type;if(void 0===n)try{n=(e=JSON.parse(e)).type}catch(t){}(n===pu||this._pauseResumeMgr.isCustomerApiEnabled()&&this._apiCommandToBusMessageMapping[n])&&(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),this._messageBus.publish(this._apiCommandToBusMessageMapping[n],e))}},{key:"_createCommandToBusMessageMapping",value:function(){this._apiCommandToBusMessageMapping={},this._apiCommandToBusMessageMapping[fu]=Gr,this._apiCommandToBusMessageMapping[du]=Hr,this._apiCommandToBusMessageMapping[hu]=Wr,this._apiCommandToBusMessageMapping[pu]=Vr,this._apiCommandToBusMessageMapping[yu]=Qr,this._apiCommandToBusMessageMapping[mu]=zr,this._apiCommandToBusMessageMapping[vu]=Kr}}],e&&gu(t.prototype,e),n&&gu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function wu(t){return wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wu(t)}function Eu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ku(r.key),r)}}function ku(t){var e=function(t,e){if("object"!=wu(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=wu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wu(e)?e:e+""}var Pu=function(){return t=function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.muid=null,this._utils=e,this._storageUtilsWrapper=r,this._dataQ=n,this._configurationRepository=o,this.EXPIRATION=e.minutesToMilliseconds(525600)},(e=[{key:"initMuid",value:function(){var t=this._storageUtilsWrapper.getCookie("bmuid"),e=this._storageUtilsWrapper.getFromLocalStorage("bmuid");this.muid=t||e,this.muid=this._utils.StorageUtils.validateBcId(this.muid),this.muid||(this.muid=this._utils.dateNow()+"-"+this._utils.generateUUID().toUpperCase(),ue.info("Generated a new muid: ".concat(this.muid))),this._saveAndSendMuid(),ue.info("Muid is: ".concat(this.muid))}},{key:"updateMuid",value:function(t){t?(this.muid=t,this.muid=this._utils.StorageUtils.validateBcId(this.muid),this.muid?(this._saveAndSendMuid(),ue.info("Restored MUID is: ".concat(this.muid))):ue.warn("Invalid format of restored MUID")):ue.warn("MUID is not defined")}},{key:"_saveAndSendMuid",value:function(){this._setStorageAndCookieKey(),this._addMuidToQueue()}},{key:"_setStorageAndCookieKey",value:function(){this._storageUtilsWrapper.setCookie("bmuid",this.muid,this.EXPIRATION),this._storageUtilsWrapper.saveToLocalStorage("bmuid",this.muid)}},{key:"_addMuidToQueue",value:function(){this._dataQ.addToQueue("static_fields",["muid",this.muid],!1)}}])&&Eu(t.prototype,e),n&&Eu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function Tu(t){return Tu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tu(t)}function Ou(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Cu(r.key),r)}}function Cu(t){var e=function(t,e){if("object"!=Tu(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Tu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Tu(e)?e:e+""}var Mu=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._psid=null},(e=[{key:"get",value:function(){return this._psid}},{key:"set",value:function(t){if(void 0===t)throw new Error("Invalid psid value of undefined");this._psid=t}}])&&Ou(t.prototype,e),n&&Ou(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function Bu(t){return Bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bu(t)}function ju(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ru(r.key),r)}}function Ru(t){var e=function(t,e){if("object"!=Bu(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Bu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Bu(e)?e:e+""}var Au=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._psidCache=e,this._workerCommunicator=n},(e=[{key:"set",value:function(t){if(void 0===t)throw new Error("Invalid psid value of undefined");this._psidCache.set(t),this._workerCommunicator.sendAsync(Ye,{psid:t})}}])&&ju(t.prototype,e),n&&ju(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function Iu(t){return Iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iu(t)}function xu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Nu(r.key),r)}}function Nu(t){var e=function(t,e){if("object"!=Iu(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Iu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Iu(e)?e:e+""}var Lu=function(){return t=function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sidKey="cdSNum",this._utils=e,this._storageUtilsWrapper=n,this.COOKIE_EXPIRATION_IN_MILLISECONDS=this.getExpirationTime(r)},(e=[{key:"onConfigUpdate",value:function(t){var e=this.getExpirationTime(t);this._setExpirationTime(e)&&(this.COOKIE_EXPIRATION_IN_MILLISECONDS=e)}},{key:"getExpirationTime",value:function(t){var e=t.get(tt);return this._utils.minutesToMilliseconds(this._validateCDSNumExpirationTime(e))}},{key:"_validateCDSNumExpirationTime",value:function(t){return t<Ae||t>Ie?Re:t}},{key:"_setExpirationTime",value:function(t){return this._storageUtilsWrapper.setExpirationInCookie(this.sidKey,t)===Le?(ue.warn("Failed set expiration time ".concat(t," in cookie.")),!1):this._storageUtilsWrapper.setExpirationInLocalStorage(this.sidKey,t)!==Le||(ue.warn("Failed set expiration time ".concat(t," in local storage.")),this._storageUtilsWrapper.setExpirationInCookie(this.sidKey,this._utils.minutesToMilliseconds(Re)),!1)}},{key:"get",value:function(){var t=this._storageUtilsWrapper.getCookie(this.sidKey),e=this._validateSid(t);if(!e){ue.info("Sid was not found in cookie. Trying to get it from the local storage.");var n=this._storageUtilsWrapper.getFromLocalStorage(this.sidKey);if(!(e=this._validateSid(n)))return ue.info("Sid was not found in local storage."),null}return e}},{key:"set",value:function(t){var e=t;(e=this._validateSid(e))?(this._storageUtilsWrapper.saveToLocalStorage(this.sidKey,e,this.COOKIE_EXPIRATION_IN_MILLISECONDS)||ue.error("Failed saving sid ".concat(t," to local storage.")),this._storageUtilsWrapper.setCookie(this.sidKey,e,this.COOKIE_EXPIRATION_IN_MILLISECONDS)||ue.error("Failed saving sid ".concat(t," to cookie."))):ue.error("Sid ".concat(t," is invalid. Will not save it."))}},{key:"_validateSid",value:function(t){return t||null}}])&&xu(t.prototype,e),n&&xu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function Du(t){return Du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Du(t)}function Fu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Uu(r.key),r)}}function Uu(t){var e=function(t,e){if("object"!=Du(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Du(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Du(e)?e:e+""}var Gu=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._csid=null},(e=[{key:"get",value:function(){return this._csid}},{key:"set",value:function(t){if(void 0===t)throw new Error("Invalid csid value of undefined");this._csid=t}}])&&Fu(t.prototype,e),n&&Fu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function Hu(t){return Hu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hu(t)}function Wu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Vu(r.key),r)}}function Vu(t){var e=function(t,e){if("object"!=Hu(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Hu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Hu(e)?e:e+""}var Qu=function(){return t=function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._customerApi=e,this._csidCache=n,this._workerCommunicator=r},(e=[{key:"set",value:function(t){if(void 0===t)throw new Error("Invalid csid value of undefined");this._csidCache.set(t),this._workerCommunicator.sendAsync(Je,{csid:t})}},{key:"get",value:function(t){this._customerApi.isApiAvailable("getCustomerSessionID")?this._getCsidWithRetries(0,t):ue.debug("getCustomerSessionID API is unavailable. Hopefully this is because the setCustomerSessionId API is being used")}},{key:"_getCsidWithRetries",value:function(t,e){var n=this;if(t>20)ue.error("Failed to get csid after all retries.");else try{this._customerApi.getCustomerSessionID((function(r){r?(ue.debug("Got csid after ".concat(t," retries. csid: ").concat(r)),n._csidCache.set(r),e()):setTimeout(n._getCsidWithRetries.bind(n,t+1,e),200)}))}catch(n){setTimeout(this._getCsidWithRetries.bind(this,t+1,e),200)}}}])&&Wu(t.prototype,e),n&&Wu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),zu={none:"none",init:"init",configuration:"config",configurationFromSlave:"configFromSlave",customerApi:"customerApi",pageTimeout:"timeout",unknown:"unknown"};function Ku(t){return Ku="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ku(t)}function qu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xu(r.key),r)}}function Xu(t){var e=function(t,e){if("object"!=Ku(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ku(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ku(e)?e:e+""}var Ju=function(){return t=function t(e,n,r,o,i,a,u,s,c,l,f,d,h,p,y,m,v,b,g,_){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._configurationService=n,this._configurationRepository=r,this._utils=o,this._domUtils=i,this._workerComm=a,this._contextMgr=u,this._muidService=s,this._serverStateMgr=c,this._resetSessionSiteMapper=l,this._sidRepository=f,this._csidService=m,this._csidCache=v,this._serverAddress=d.get(),this._cidCache=h,this._protocolType=p.get(),this._minifiedWupUriEnabled=y,this._psidCache=b,this._brandService=g,this._agentIdService=_,this._agentType=r.get(st),this._enableStartupCustomerSessionId=this._configurationRepository.get(ft),this.lastExternalResetCallTime=null,this.sessionId=null,this._resetSessionSiteMapper.updateObserver(this._onSiteMapperMatch.bind(this)),a.addMessageListener(vr,this._onNewSessionStartedEvent.bind(this)),this._setSessionStartupData()},e=[{key:"resumeOrStartSession",value:function(){var t=this._getSessionId();t?this._resumeSession(t):this._startNewSession()}},{key:"onConfigUpdate",value:function(t){this._resetSessionSiteMapper.onConfigUpdate(t),this._configurationRepository.get("logAddress")&&this._configurationService.updateLogUrlToWorker(this.sessionId,this._csidCache.get(),this._workerComm)}},{key:"resetSession",value:function(t){this.onResetSession(t)}},{key:"onResetSession",value:function(t){var e=t.resetReason?t.resetReason:zu.unknown;zu.hasOwnProperty(e)||(e=zu.customerApi),ue.info("Received a Reset Session event, reason: ".concat(e)),this._utils.dateNow()-this.lastExternalResetCallTime>this._configurationRepository.get(S)?(this._startNewSession(null==t?void 0:t.csid),this._configurationService.updateLogUrlToWorker(this.sessionId,this._csidCache.get(),this._workerComm),this.lastExternalResetCallTime=this._utils.dateNow()):ue.info("Ignoring external reset session call since resetSessionApiThreshold hasn't passed")}},{key:"startNewSession",value:function(){this._startNewSession()}},{key:"_startNewSession",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;ue.info("Starting a new session. Previous session was ".concat(this.sessionId)),this.sessionId=null,this._enableStartupCustomerSessionId?this._setOrFetchCsid(t):this._csidCache.set(t||null),this._psidCache.set(null),this._serverStateMgr.onSessionIdChange(),this._onStartedNewSession()}},{key:"_setOrFetchCsid",value:function(t){t?this._csidCache.set(t):this._csidService.get()}},{key:"_resumeSession",value:function(t){ue.info("Resuming an existing session with sid ".concat(t)),this.sessionId=t,this._saveSidToStorage(this.sessionId),this._handleBrandResume(),this._onResumedSession(),this._handleCsid()}},{key:"_getSessionId",value:function(){ue.info("Attempting to get sid from storage");var t=this._sidRepository.get();return t&&ue.info("Read sid ".concat(t," from storage")),t}},{key:"_saveSidToStorage",value:function(t){ue.info("Saving sid ".concat(t," to storage")),this._sidRepository.set(t)}},{key:"_onStartedNewSession",value:function(){var t;if(this._serverAddress){var e={serverAddress:this._serverAddress,csid:this._csidCache.get(),cid:this._cidCache.get(),protocolType:this._protocolType,minifiedUri:this._minifiedWupUriEnabled,psid:this._psidCache.get(),muid:null===(t=this._muidService)||void 0===t?void 0:t.muid,contextName:this._contextMgr.getContextName()};this._workerComm.sendAsync(Ke,e),this._configurationService.updateLogUrlToWorker(this.sessionId,this._csidCache.get(),this._workerComm)}}},{key:"_onResumedSession",value:function(){var t;if(this._serverAddress){var e=this._serverStateMgr.getServerState(this.sessionId),n={serverAddress:this._serverAddress,csid:this._csidCache.get(),cid:this._cidCache.get(),protocolType:this._protocolType,minifiedUri:this._minifiedWupUriEnabled,psid:this._psidCache.get(),cdsnum:this.sessionId,muid:null===(t=this._muidService)||void 0===t?void 0:t.muid,contextName:this._contextMgr.getContextName(),serverState:e};this._workerComm.sendAsync(qe,n),this._configurationService.updateLogUrlToWorker(this.sessionId,this._csidCache.get(),this._workerComm)}}},{key:"_handleCsid",value:function(){var t=this;this._domUtils.onDocumentBody(self,(function(){ue.debug("SessionService:_sessionIdRegeneration, onDocumentBody callback: cdSNum: ".concat(t.sessionId)),t._csidService.get((function(){ue.info("Received csid from client. csid: ".concat(t._csidCache.get(),", sid:").concat(null==t?void 0:t.sessionId)),t._sendCsidToServer()}))}))}},{key:"_sendCsidToServer",value:function(){this._serverAddress&&(ue.info("Sending csid to worker. csid: ".concat(this._csidCache.get(),", sid:").concat(this.sessionId)),this._workerComm.sendAsync(Je,{csid:this._csidCache.get()}),this._configurationService.updateLogUrlToWorker(this.sessionId,this._csidCache.get(),this._workerComm))}},{key:"_handleBrandResume",value:function(){this._brandService.update()}},{key:"_onSiteMapperMatch",value:function(){this.onResetSession({resetReason:zu.configuration})}},{key:"_onNewSessionStartedEvent",value:function(t){this.sessionId=t,this._saveSidToStorage(this.sessionId),this._configurationService.updateLogUrlToWorker(this.sessionId,this._csidCache.get(),this._workerComm),this._notifyNewSessionStarted(),this._agentType!==Jt.SECONDARY&&this._handleCsid(),ue.info("A new session ".concat(t," has started"))}},{key:"_notifyNewSessionStarted",value:function(){this._messageBus.publish(Ur,this.sessionId)}},{key:"_setSessionStartupData",value:function(){this._workerComm.sendAsync(rn,{agentType:this._configurationRepository.get(st)}),this._agentIdService.updateAgentIdWithServer()}}],e&&qu(t.prototype,e),n&&qu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function Yu(t){return Yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yu(t)}function Zu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$u(r.key),r)}}function $u(t){var e=function(t,e){if("object"!=Yu(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Yu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Yu(e)?e:e+""}var ts=function(){return t=function t(e,n){var r,o,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,i=void 0,(o=$u(o="_dataQ"))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i,this._configurationRepository=e,this._dataQ=n,this._isEnabled=this._configurationRepository.get("isCustMetadata")},(e=[{key:"onCustomerMetadata",value:function(t){void 0!==this._isEnabled&&null!=this._isEnabled&&!0!==this._isEnabled||(ue.debug("HandleMetadata:onCustomerMetadata. data="+JSON.stringify(t.data)),t.data&&this._dataQ.addToQueue("customer_metadata",[null,t.data]))}},{key:"onConfigUpdate",value:function(){this._isEnabled=this._configurationRepository.get("isCustMetadata")}}])&&Zu(t.prototype,e),n&&Zu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),es="updateSlaveConf",ns="updateSlaveState";function rs(t){return rs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rs(t)}function os(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,is(r.key),r)}}function is(t){var e=function(t,e){if("object"!=rs(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=rs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rs(e)?e:e+""}var as=function(){return t=function t(e,n,r,o,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._slaves=[],this._dataQ=e,this._configurationRepository=n,this._utils=r,this._logPerfDataQ=o,this._contextMgr=i,this._sessionService=a,this.onResetSessionTrigger=new $n,this.onMouseChallengeTrigger=new $n,this._msgRouter={dataFromSlave:this._onDataFromSlave,registerSlave:this._onRegisterSlave,logPerfSlave:this._onLogPerfSlave,updateMasterContext:this._onUpdateMasterContext,resetSessionTriggerFromSlave:this._onResetSessionTriggerFromSlave,mouseChallengeTriggerFromSlave:this._onMouseChallengeTriggerFromSlave}},e=[{key:"listen",value:function(){var t=this;ue.debug("SlaveListener:listen"),this._utils.addEventListener(window,"message",(function(e){var n=e.data.msgType;n&&t._msgRouter[n]&&t._msgRouter[n].call(t,e)}))}},{key:"sendToSlaves",value:function(t,e){ue.debug("SlaveListener:sendToSlaves"),this._slaves.forEach((function(n){n.source.postMessage({msgType:t,data:e},n.origin)}))}},{key:"onConfigUpdate",value:function(){ue.debug("SlaveListener:onConfigUpdate, updating ".concat(this._slaves.length," slaves")),this.sendToSlaves(es,this._configurationRepository.getAll())}},{key:"notifyStateChange",value:function(t){ue.info("SlaveListener:notifyStateChange, updating ".concat(this._slaves.length," slaves that the new state is ").concat(t.toState)),this.sendToSlaves(ns,t)}},{key:"_onDataFromSlave",value:function(t){var e=t.data;"flushData"!==e.data.eventName&&(this._isScriptVersionMessage(e)?e.data.eventName&&this._dataQ.addToQueue(e.data.eventName,e.data.data,!1):e.data.eventName&&this._dataQ.addToQueue(e.data.eventName,e.data.data))}},{key:"_isScriptVersionMessage",value:function(t){return"static_fields"===t.data.eventName&&"dataFromSlave"===t.msgType&&t.data&&t.data.data&&("slave_version_client"===t.data.data[0]||"device_source"===t.data.data[0])}},{key:"_onRegisterSlave",value:function(t){ue.info("SlaveListener:_onRegisterSlave - slave registered, origin ".concat(t.origin)),this._slaves.push({source:t.source,origin:t.origin}),t.source.postMessage({msgType:"updateSlaveConf",data:this._configurationRepository.getAll()},t.origin)}},{key:"_onLogPerfSlave",value:function(t){var e=t.data;"flushData"!==e.data.eventName&&e.data.eventName&&this._logPerfDataQ.addToQueue(e.data.eventName,e.data.data)}},{key:"_onUpdateMasterContext",value:function(t){ue.debug("SlaveListener:_onUpdateMasterContext");var e=t.data;this._contextMgr.setContext(e.data)}},{key:"_onResetSessionTriggerFromSlave",value:function(t){ue.debug("SlaveListener:_onResetSessionTriggerFromSlave");var e=t.data;this.onResetSessionTrigger.publish(e.data)}},{key:"_onMouseChallengeTriggerFromSlave",value:function(t){ue.debug("SlaveListener:_onMouseChallengeTriggerFromSlave");var e=t.data;this.onMouseChallengeTrigger.publish(e.data)}}],e&&os(t.prototype,e),n&&os(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function us(t){return us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},us(t)}function ss(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cs(r.key),r)}}function cs(t){var e=function(t,e){if("object"!=us(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=us(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==us(e)?e:e+""}var ls=function(){return t=function t(e,n,r,o,i,a,u,s,c,l,f,d,h,p,y,m,v,b){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._features=e,this._configurationRepository=n,this._utils=r,this._elements=o,this._mutationObserver=i,this._dataQ=a,this._devDebugDataQueue=u,this._sessionService=c,this._muidService=l,this._muidEncryptedService=f,this._perfMonitor=d,this._sensorDataQ=h,this._msgBus=p,this._cidCache=y,this._sameCharService=m,this._maskingService=v,this._configurations=s,this._contextMgr=b},e=[{key:"buildFeatures",value:function(){var t,e=this;(t=this._features.list)&&Object.keys(t).forEach((function(n){var r=t[n];try{r.init.apply(e)}catch(e){var o=r.name||n;ue.error('Failed to initialize feature "'.concat(o,'": ').concat(e.message,"\nStack: ").concat(e.stack)),delete t[n]}}))}}],e&&ss(t.prototype,e),n&&ss(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function fs(t){return fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fs(t)}function ds(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hs(r.key),r)}}function hs(t){var e=function(t,e){if("object"!=fs(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=fs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fs(e)?e:e+""}var ps=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._contextMgr=e,this._dataQ=n,this._contextMgr.onContextChange.subscribe(this.sendContextToServer.bind(this)),this.handleContextChange({context:"cd_auto"})},(e=[{key:"handleContextChange",value:function(t){this._contextMgr.changeContext(t.context||t.activityType)}},{key:"sendContextToServer",value:function(t){t&&this._dataQ.addToQueue("contextChange",[null,t.url,t.name,t.timestamp,t.referrer,t.hLength])}}])&&ds(t.prototype,e),n&&ds(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function ys(t){return ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ys(t)}function ms(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vs(r.key),r)}}function vs(t){var e=function(t,e){if("object"!=ys(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ys(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ys(e)?e:e+""}ps.apiName="ContextChange";var bs=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._state=sn.stopped},(e=[{key:"getState",value:function(){return this._state}},{key:"updateState",value:function(t){var e=sn[t];if(!e)throw new Error("Unknown state ".concat(t));this._state=e,this._messageBus.publish(Xr,{state:e})}}])&&ms(t.prototype,e),n&&ms(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),gs="cdNewSessionStartedEvent",_s="cdStateChangedEvent",Ss="cdHeartbeat",ws="RestoredMuidEvent";function Es(t){return Es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Es(t)}function ks(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ps(r.key),r)}}function Ps(t){var e=function(t,e){if("object"!=Es(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Es(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Es(e)?e:e+""}var Ts=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"publishNewSessionStartedEvent",value:function(t){window.postMessage({type:gs,event:{sessionID:t}},window.location.href)}},{key:"publishStateChangedEvent",value:function(t){window.postMessage({type:_s,event:{state:t}},window.location.href)}},{key:"publishRestoredMuidEvent",value:function(t){window.postMessage({type:ws,event:{muid:t}},window.location.href)}}])&&ks(t.prototype,e),n&&ks(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function Os(t){return Os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Os(t)}function Cs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ms(r.key),r)}}function Ms(t){var e=function(t,e){if("object"!=Os(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Os(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Os(e)?e:e+""}var Bs=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._contextMgr=n,this._messageBus.subscribe(Gr,this._handle.bind(this))},(e=[{key:"_handle",value:function(t){this._contextMgr.changeContext(t.context||t.activityType)}}])&&Cs(t.prototype,e),n&&Cs(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function js(t){return js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},js(t)}function Rs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,As(r.key),r)}}function As(t){var e=function(t,e){if("object"!=js(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=js(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==js(e)?e:e+""}var Is=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._sessionService=n,this._messageBus.subscribe(Hr,this._handle.bind(this))},(e=[{key:"_handle",value:function(t){this._sessionService.onResetSession(t)}}])&&Rs(t.prototype,e),n&&Rs(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function xs(t){return xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xs(t)}function Ns(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ls(r.key),r)}}function Ls(t){var e=function(t,e){if("object"!=xs(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=xs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xs(e)?e:e+""}var Ds=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._handleMetadata=n,this._messageBus.subscribe(Wr,this._handle.bind(this))},(e=[{key:"_handle",value:function(t){this._handleMetadata.onCustomerMetadata(t)}}])&&Ns(t.prototype,e),n&&Ns(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function Fs(t){return Fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fs(t)}function Us(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gs(r.key),r)}}function Gs(t){var e=function(t,e){if("object"!=Fs(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Fs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fs(e)?e:e+""}var Hs=function(){return t=function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._pauseResumeManager=n,this._slaveListener=r,this._messageBus.subscribe(Vr,this._handle.bind(this))},(e=[{key:"_handle",value:function(t){this._pauseResumeManager.onStateChange(t),this._slaveListener.notifyStateChange(t)}}])&&Us(t.prototype,e),n&&Us(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function Ws(t){return Ws="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ws(t)}function Vs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Qs(r.key),r)}}function Qs(t){var e=function(t,e){if("object"!=Ws(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ws(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ws(e)?e:e+""}var zs=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._csidService=n,this._messageBus.subscribe(Qr,this._handle.bind(this))},(e=[{key:"_handle",value:function(t){t.csid?this._csidService.set(t.csid):ue.warn("Received an invalid csid of ".concat(t.csid,". Ignoring api call"))}}])&&Vs(t.prototype,e),n&&Vs(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function Ks(t){return Ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ks(t)}function qs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xs(r.key),r)}}function Xs(t){var e=function(t,e){if("object"!=Ks(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ks(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ks(e)?e:e+""}var Js=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._psidService=n,this._messageBus.subscribe(zr,this._handle.bind(this))},(e=[{key:"_handle",value:function(t){t.psid?this._psidService.set(t.psid):ue.warn("Received an invalid psid of ".concat(t.psid,". Ignoring api call"))}}])&&qs(t.prototype,e),n&&qs(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function Ys(t){return Ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ys(t)}function Zs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$s(r.key),r)}}function $s(t){var e=function(t,e){if("object"!=Ys(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ys(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ys(e)?e:e+""}var tc=function(){return t=function t(e,n,r,o,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._featureService=n,this._customerApiBridge=r,this._contextMgr=o,this._clientEventService=i,this._sessionInfoService=a,this._messageBus.subscribe(Ur,this._handle.bind(this))},(e=[{key:"_handle",value:function(t){this._sessionInfoService.markStartTime(),this._featureService.runPerSessionFeatures(),this._customerApiBridge.notifySessionReset(t),this._contextMgr.onSessionReset(),this._clientEventService.publishNewSessionStartedEvent(t)}}])&&Zs(t.prototype,e),n&&Zs(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function ec(t){return ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ec(t)}function nc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rc(r.key),r)}}function rc(t){var e=function(t,e){if("object"!=ec(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ec(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ec(e)?e:e+""}var oc=function(){return t=function t(e,n,r,o,i,a,u,s,c,l,f,d,h,p,y,m){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._featureService=n,this._dataQ=r,this._pauseResumeMgr=o,this._handleMetadata=i,this._logger=a,this._contextMgr=u,this._sessionService=s,this._sensorDataQ=c,this._slaveListener=l,this._stateService=f,this._performanceMonitor=d,this._heartBeatMessageService=h,this._sensorGateKeeper=p,this._sidRepository=y,this._coordinatesMaskingConfigurationUpdater=m,this._messageBus.subscribe(Fr,this._handle.bind(this))},(e=[{key:"_handle",value:function(t){ue.info("Configurations were loaded from the server."),this._performanceMonitor.stopMonitor("t.timeTillServerConfig"),this._featureService.updateRunByConfig(t),this._dataQ.updateWithConfig(t),this._pauseResumeMgr.onConfigUpdate(t),this._handleMetadata.onConfigUpdate(t),this._logger.updateLogConfig(t),this._contextMgr.onConfigUpdate(t),this._sessionService.onConfigUpdate(t),this._sensorDataQ.onConfigUpdate(t),this._slaveListener.onConfigUpdate(t),this._heartBeatMessageService.updateConfig(t),this._sensorGateKeeper.configure(),this._sidRepository.onConfigUpdate(t),this._coordinatesMaskingConfigurationUpdater.onConfigUpdate(t),this._stateService.updateState(sn.started),ue.info("Successfully configured system")}}])&&nc(t.prototype,e),n&&nc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function ic(t){return ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ic(t)}function ac(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uc(r.key),r)}}function uc(t){var e=function(t,e){if("object"!=ic(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ic(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ic(e)?e:e+""}var sc=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._clientEventService=n,this._messageBus.subscribe(Xr,this._handle.bind(this))},(e=[{key:"_handle",value:function(t){ue.info("SDK state changed to ".concat(t.state)),this._clientEventService.publishStateChangedEvent(t.state)}}])&&ac(t.prototype,e),n&&ac(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function cc(t){return cc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cc(t)}function lc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fc(r.key),r)}}function fc(t){var e=function(t,e){if("object"!=cc(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=cc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cc(e)?e:e+""}var dc=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._brandService=n,this._messageBus.subscribe(Kr,this._handle.bind(this))},(e=[{key:"_handle",value:function(t){t.brand?this._brandService.set(t.brand):ue.warn("Received an empty brand name. Ignoring the API call")}}])&&lc(t.prototype,e),n&&lc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function hc(t){return hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hc(t)}function pc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yc(r.key),r)}}function yc(t){var e=function(t,e){if("object"!=hc(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=hc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hc(e)?e:e+""}var mc,vc,bc,gc=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return e=t,r=[{key:"addEventListener",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.isPassiveSupported?t.addEventListener(e,n,{capture:r,passive:o,once:i}):t.addEventListener?t.addEventListener(e,n,r):t.attachEvent("on"+e,n)}},{key:"removeEventListener",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.removeEventListener?t.removeEventListener(e,n,r):t.detachEvent("on"+e,n)}},{key:"outerHTML",value:function(t){return t.outerHTML||(new XMLSerializer).serializeToString(t)}},{key:"onDocumentBody",value:function(t,e){t.document.body?e():window.addEventListener?window.addEventListener("DOMContentLoaded",e,!0):window.attachEvent("onload",e)}},{key:"onPageLoad",value:function(e,n){t.addEventListener(e,"load",n,!0),(e.contentWindow&&"complete"===e.contentWindow.document.readyState||e.document&&"complete"===e.document.readyState)&&n()}},{key:"awaitWindowDocumentReady",value:function(t){var e=this;return new Promise((function(n,r){try{e.onWindowDocumentReady(t,(function(){n()}))}catch(t){r(t)}}))}},{key:"onWindowDocumentReady",value:function(e,n){var r=window.addEventListener?"DOMContentLoaded":"load";if("complete"===e.document.readyState||"interactive"===e.document.readyState)n();else{var o=function(){t.removeEventListener(e,r,o,!0),n()};t.addEventListener(e,r,o,!0)}}},{key:"isWindowDocumentReady",value:function(t){return t&&"complete"===t.document.readyState}},{key:"canAccessIFrame",value:function(t){var e=null;try{e=(t.contentDocument||t.contentWindow.document).body.innerHTML}catch(t){}return null!==e}},{key:"matches",value:function(t,e){var n=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector||function(t){var e=this.document||this.ownerDocument;if(!e)return!1;for(var n=e.querySelectorAll(t),r=n.length;--r>=0&&(n.item?n.item(r):n[r])!==this;);return r>-1};return n.call(t,e)}},{key:"isWebWorkerFetchSupported",value:function(){var t="Request"in self,e="fetch"in self;if(!t)return!1;var n="keepalive"in Request.prototype;return e&&n}},{key:"isSubtleCryptoSupported",value:function(){return"SubtleCrypto"in self}}],(n=null)&&pc(e.prototype,n),r&&pc(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r}();function _c(t){return _c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_c(t)}function Sc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wc(r.key),r)}}function wc(t){var e=function(t,e){if("object"!=_c(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=_c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_c(e)?e:e+""}mc=gc,vc="isPassiveSupported",bc=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}(),(vc=yc(vc))in mc?Object.defineProperty(mc,vc,{value:bc,enumerable:!0,configurable:!0,writable:!0}):mc[vc]=bc;var Ec=function(){return function(t,e,n){return e&&Sc(t.prototype,e),n&&Sc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){(e=wc(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"_dataOrigin","BC"),this._heartBeatErrorsState=n,this._heartBeatPostMessageInterval=r,e.addMessageListener(_r,this._handle.bind(this))}),[{key:"start",value:function(){this._clear(),this._periodicPostMessageIntervalId=setInterval(this._postHeartBeatMessage.bind(this),this._heartBeatPostMessageInterval)}},{key:"stop",value:function(){this._clear()}},{key:"updateConfig",value:function(t){this._heartBeatPostMessageInterval=t.get(D),this.start()}},{key:"_clear",value:function(){this._periodicPostMessageIntervalId&&clearInterval(this._periodicPostMessageIntervalId)}},{key:"_handle",value:function(t){this._heartBeatErrorsState.updateState(t)}},{key:"_postHeartBeatMessage",value:function(){this._heartBeatErrorsState.hasErrors()?window.postMessage({type:Ss,data:this._heartBeatErrorsState.getErrors(),origin:this._dataOrigin},window.location.href):window.postMessage({type:Ss,data:"Ok",origin:this._dataOrigin},window.location.href)}}])}();var kc="oK",Pc="Error";function Tc(t){return Tc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tc(t)}function Oc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Cc(r.key),r)}}function Cc(t){var e=function(t,e){if("object"!=Tc(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Tc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Tc(e)?e:e+""}var Mc=function(){return function(t,e,n){return e&&Oc(t.prototype,e),n&&Oc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.errors={}}),[{key:"updateState",value:function(t){var e=t.category,n=t.status;this._isErrorRecovery(e,n)?(ue.info("Received heart beat recovery event",t),delete this.errors[e]):this._isNewError(e,n)&&(ue.info("Received heart beat error event",t),this.errors[e]=e)}},{key:"_isErrorRecovery",value:function(t,e){return void 0!==this.errors[t]&&e===kc}},{key:"_isNewError",value:function(t,e){return void 0===this.errors[t]&&e===Pc}},{key:"getErrors",value:function(){var t=this;return Object.keys(this.errors).map((function(e){return"ERROR(".concat(t.errors[e],")")}))}},{key:"hasErrors",value:function(){return Object.keys(this.errors).length>0}}])}();function Bc(t){return Bc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bc(t)}function jc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Rc(r.key),r)}}function Rc(t){var e=function(t,e){if("object"!=Bc(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Bc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Bc(e)?e:e+""}var Ac=function(){return function(t,e,n){return e&&jc(t.prototype,e),n&&jc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.markStartTime()}),[{key:"markStartTime",value:function(){this.startTime=ze.dateNow()}},{key:"getStartTime",value:function(){return this.startTime}}])}();function Ic(t){return Ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ic(t)}function xc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Nc(r.key),r)}}function Nc(t){var e=function(t,e){if("object"!=Ic(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ic(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ic(e)?e:e+""}var Lc=function(){return function(t,e,n){return e&&xc(t.prototype,e),n&&xc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.configurationRepository=n,this.sessionInfoService=e,this.isMotionOnSessionStart=this.configurationRepository.get(G),this.motionPaddingOnSessionStartMSec=this.configurationRepository.get(H)}),[{key:"configure",value:function(){this.isMotionOnSessionStart=this.configurationRepository.get(G),this.motionPaddingOnSessionStartMSec=this.configurationRepository.get(H),this.isMotionOnSessionStart&&ue.info("Motion on session start is enabled, collecting motion events for ".concat(this.motionPaddingOnSessionStartMSec/1e3," seconds."))}},{key:"isOpen",value:function(){return this.isMotionOnSessionStart&&ze.dateNow()-this.motionPaddingOnSessionStartMSec<this.sessionInfoService.getStartTime()}}])}();function Dc(t){return Dc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dc(t)}function Fc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Uc(r.key),r)}}function Uc(t){var e=function(t,e){if("object"!=Dc(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Dc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Dc(e)?e:e+""}function Gc(t,e,n){return e=Wc(e),function(t,e){if(e&&("object"==Dc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Hc()?Reflect.construct(e,n||[],Wc(t).constructor):e.apply(t,n))}function Hc(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Hc=function(){return!!t})()}function Wc(t){return Wc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wc(t)}function Vc(t,e){return Vc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Vc(t,e)}var Qc=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Gc(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vc(t,e)}(e,t),function(t,e,n){return e&&Fc(t.prototype,e),n&&Fc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"getDocument",value:function(){return this.context.shadowRoot}}])}(na);function zc(t){return zc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zc(t)}function Kc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qc(r.key),r)}}function qc(t){var e=function(t,e){if("object"!=zc(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=zc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zc(e)?e:e+""}function Xc(t,e,n){return e=Yc(e),function(t,e){if(e&&("object"==zc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Jc()?Reflect.construct(e,n||[],Yc(t).constructor):e.apply(t,n))}function Jc(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Jc=function(){return!!t})()}function Yc(t){return Yc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Yc(t)}function Zc(t,e){return Zc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zc(t,e)}var $c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Xc(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zc(t,e)}(e,t),function(t,e,n){return e&&Kc(t.prototype,e),n&&Kc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"getDocument",value:function(){return this.context}}])}(na);function tl(t){return tl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tl(t)}function el(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nl(r.key),r)}}function nl(t){var e=function(t,e){if("object"!=tl(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=tl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tl(e)?e:e+""}var rl=function(){return function(t,e,n){return e&&el(t.prototype,e),n&&el(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._windowMutationObservers=e,this._messageBus=n,this._configurationRepository=r,this._messageBus.subscribe(ko,this._processNewContext.bind(this)),this._elementsMutationObserverFactory=new Ja}),[{key:"_processNewContext",value:function(t){this.monitorWindow(t)}},{key:"monitorWindow",value:function(t){if(!this._windowMutationObservers.has(t)){var e=this._elementsMutationObserverFactory.create(t,self.MutationObserver,this._configurationRepository);e.observe(t.getDocument()),e.nodesAdded.subscribe(this._nodesAddedMutationObserved.bind(this)),e.nodesRemoved.subscribe(this._nodesRemovedMutationObserved.bind(this)),this._windowMutationObservers.set(t,e)}}},{key:"unMonitorWindow",value:function(t){var e=this._windowMutationObservers.get(t);e&&(e.nodesAdded.unsubscribe(this._nodesAddedMutationObserved.bind(this)),e.nodesRemoved.unsubscribe(this._nodesRemovedMutationObserved.bind(this)),e.disconnect()),this._windowMutationObservers.delete(t)}},{key:"_nodesAddedMutationObserved",value:function(t){this._messageBus.publish(Yr,t)}},{key:"_nodesRemovedMutationObserved",value:function(t){this._messageBus.publish(Zr,t)}}])}();function ol(t){return ol="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ol(t)}function il(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ul(r.key),r)}}function al(t,e,n){return e&&il(t.prototype,e),n&&il(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ul(t){var e=function(t,e){if("object"!=ol(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ol(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ol(e)?e:e+""}var sl="added",cl="removed",ll=al((function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.browserContext=e,this.message=n}));function fl(t){return fl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fl(t)}function dl(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return hl(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,u=0,s=t,d.n=n,a}};function h(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=d.p,p=i[2];n>3?(o=p===r)&&(u=i[4]||3,s=i[5]===t?i[3]:i[5],i[4]=3,i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,d.v=r,d.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,d.n=p,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),u=l,s=p;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(d.n=-1),h(u,s)):d.n=s:d.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(hl(e={},r,(function(){return this})),e),f=c.prototype=u.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,hl(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,hl(f,"constructor",c),hl(c,"constructor",s),s.displayName="GeneratorFunction",hl(c,o,"GeneratorFunction"),hl(f),hl(f,o,"Generator"),hl(f,r,(function(){return this})),hl(f,"toString",(function(){return"[object Generator]"})),(dl=function(){return{w:i,m:d}})()}function hl(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}hl=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){hl(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},hl(t,e,n,r)}function pl(t){return function(t){if(Array.isArray(t))return yl(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return yl(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yl(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yl(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ml(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function vl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bl(r.key),r)}}function bl(t){var e=function(t,e){if("object"!=fl(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=fl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fl(e)?e:e+""}var gl=function(){return function(t,e,n){return e&&vl(t.prototype,e),n&&vl(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._domUtils=e,this._messageBus=n,this._loadedCustomElements=Cn(),this._windowMutationObservers=Cn(),this._messageBus.subscribe(Yr,this._processAddedNodes.bind(this)),this._messageBus.subscribe(Zr,this._processRemovedNodes.bind(this)),this._messageBus.subscribe(Eo,this._processSubmittedCustomElement.bind(this)),this._browserContextMutationObserver=new rl(this._windowMutationObservers,this._messageBus,r),this.customElementCache=new WeakMap}),[{key:"customElements",get:function(){var t=[];return this._loadedCustomElements.forEach((function(e,n){t.push(n)})),t}},{key:"hasCustomElement",value:function(t){return!!this._loadedCustomElements.has(t)}},{key:"addCustomElementToLoadedList",value:function(t,e){this._loadedCustomElements.set(t,e)}},{key:"start",value:function(t){var e=this;this._browserContextMutationObserver.monitorWindow(t),this._findCustomElementsInBrowserContext(t.getDocument()).then((function(t){t.forEach((function(t){e._processNewElement(t)}))}))}},{key:"stop",value:function(){this.customElementCache=new WeakMap,this._windowMutationObservers.forEach((function(t){t.disconnect()}))}},{key:"_processSubmittedCustomElement",value:function(t){this._loadedCustomElements.has(t)||this._addCustomElement(t,new $c(t),"closed")}},{key:"_processNewElement",value:function(t){this._loadedCustomElements.has(t)||(null!=t.shadowRoot?this._addCustomElement(t,new Qc(t)):this._messageBus.publish(wo,t))}},{key:"_addCustomElement",value:function(t,e){"open"===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"open")&&this._browserContextMutationObserver.monitorWindow(e),this._loadedCustomElements.set(t,e),this._messageBus.publish(So,new ll(e,sl))}},{key:"_removeCustomElement",value:function(t){var e=this._loadedCustomElements.get(t);this._browserContextMutationObserver.unMonitorWindow(t.shadowRoot),this._loadedCustomElements.delete(t)&&this._messageBus.publish(So,new ll(e,cl))}},{key:"_processAddedNodes",value:function(t){var e=this;t.addedNodes.forEach((function(t){if(t.nodeType===Node.ELEMENT_NODE){var n=t.shadowRoot?t.shadowRoot:t.ownerDocument;e._processNewElement(t),e._findCustomElementsInBrowserContext(n).then((function(t){t.forEach((function(t){e._processNewElement(t)}))}))}}))}},{key:"_processRemovedNodes",value:function(t){for(var e=this,n=t.removedNodes,r=[],o=0;o<n.length;o++){var i=n[o];i.hasChildNodes()?this._findCustomElementsInBrowserContext(i).then((function(t){t.length>0&&(r=r.concat(t))})):this._isCustomElement(i)&&i.shadowRoot&&r.push(i)}0!==r.length&&r.forEach((function(t){e._removeCustomElement(t)}))}},{key:"_isCustomElement",value:function(t){if(!t||"string"!=typeof t.localName)return!1;if(this.customElementCache.has(t))return this.customElementCache.get(t);var e=t.localName.includes("-");return this.customElementCache.set(t,e),e}},{key:"_findCustomElementsInBrowserContext",value:(t=dl().m((function t(e){var n,r,o,i=this;return dl().w((function(t){for(;;)switch(t.n){case 0:if(n=new Set,0!==(r=e.querySelectorAll("*")).length){t.n=1;break}return t.a(2,pl(n));case 1:return o=[],r.forEach((function(t){if(i._isCustomElement(t))if(n.add(t),t.shadowRoot){var e=i._findCustomElementsInBrowserContext(t.shadowRoot).then((function(t){t.forEach((function(t){return n.add(t)}))}));o.push(e)}else i._messageBus.publish(wo,t)})),t.n=2,Promise.all(o);case 2:return t.a(2,pl(n))}}),t)})),e=function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){ml(i,r,o,a,u,"next",t)}function u(t){ml(i,r,o,a,u,"throw",t)}a(void 0)}))},function(t){return e.apply(this,arguments)})}]);var t,e}();function _l(t){return _l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_l(t)}function Sl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wl(r.key),r)}}function wl(t){var e=function(t,e){if("object"!=_l(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=_l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_l(e)?e:e+""}var El=function(){return function(t,e,n){return e&&Sl(t.prototype,e),n&&Sl(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._browserContextsCache=e,this._messageBus=r,this._featureService=n,this._messageBus.subscribe(So,this._handle.bind(this))}),[{key:"_handle",value:function(t){var e=t.browserContext,n=t.message;n===sl?this._handleCustomElementAdded(e):n===cl&&this._handleCustomElementRemoved(e)}},{key:"_handleCustomElementAdded",value:function(t){this._browserContextsCache.exists(t.Context)||this._browserContextsCache.addBrowserContext(t),this._featureService.runFeaturesOnBrowserContext(t)}},{key:"_handleCustomElementRemoved",value:function(t){this._featureService.stopFeaturesOnBrowserContextRemove(t),this._browserContextsCache.remove(t.Context)}}])}();function kl(t){return kl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kl(t)}function Pl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Tl(r.key),r)}}function Tl(t){var e=function(t,e){if("object"!=kl(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=kl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kl(e)?e:e+""}var Ol=function(){return function(t,e,n){return e&&Pl(t.prototype,e),n&&Pl(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._configurationRepository=e,this._startUpConfigurations=n}),[{key:"loadStartUpConfigurations",value:function(){var t,e;this._setConfigurationOrDefault(x,this._startUpConfigurations.getLogServerURL(),null),this._setConfigurationOrDefault(k,this._startUpConfigurations.isMinifiedLogUriEnabled(),!1),this._setConfigurationOrDefault(A,this._startUpConfigurations.getEnableFramesProcessing(),!0),this._setConfigurationOrDefault(X,this._startUpConfigurations.getEnableCustomElementsProcessing(),!1),this._setConfigurationOrDefault(R,this._startUpConfigurations.getCollectionSettings().getElementSettings().getCustomElementAttribute(),"data-automation-id"),this._setConfigurationOrDefault(I,this._startUpConfigurations.getEnableSameSiteNoneAndSecureCookies(),!0),this._setConfigurationOrDefault(nt,this._startUpConfigurations.getCollectionSettings().getElementSettings().getAttributesToMask(),[]),this._setConfigurationOrDefault(rt,this._startUpConfigurations.getCollectionSettings().getCustomInputElementSettings().getParentElementSelector(),""),this._setConfigurationOrDefault(ot,this._startUpConfigurations.getCollectionSettings().getCustomInputElementSettings().getChildElementWithCustomAttribute(),""),this._setConfigurationOrDefault(it,this._startUpConfigurations.getCollectionSettings().getCustomInputElementSettings().getElementDataAttribute(),""),this._setConfigurationOrDefault(at,this._startUpConfigurations.getCollectionSettings().getCustomInputElementSettings().getCustomButtons(),[]),this._setConfigurationOrDefault(st,this._startUpConfigurations.getCollectionSettings().getAgentType(),Jt.PRIMARY),this._setConfigurationOrDefault(ct,this._startUpConfigurations.getCollectionSettings().getAgentMode(),Yt.FULL),this._setConfigurationOrDefault(J,this._startUpConfigurations.getCollectionSettings().getElementSettings().getKeyEventsMaskSpecialChars(),!1),this._setConfigurationOrDefault(lt,null===(t=this._startUpConfigurations.getClientSettings())||void 0===t?void 0:t.enableWupMessagesHashing,!1),this._setConfigurationOrDefault(et,null===(e=this._startUpConfigurations.getClientSettings())||void 0===e?void 0:e.enableCoordinatesMasking,!1),this._setConfigurationOrDefault(ft,this._startUpConfigurations.getEnableStartupCustomerSessionId(),!1),this._setNumberConfigurationOrDefault(ht,this._startUpConfigurations.getMutationMaxChunkSize(),0),this._setNumberConfigurationOrDefault(pt,this._startUpConfigurations.getMutationChunkDelayMs(),100),this._setConfigurationOrDefault(yt,this._startUpConfigurations.getPasswordIdMaskingList(),[]),this._setConfigurationOrDefault($,this._startUpConfigurations.isUnmaskedValuesEnabled(),!1),this._setConfigurationOrDefault(Z,this._startUpConfigurations.getAllowedUnmaskedValuesList(),[])}},{key:"_setConfigurationOrDefault",value:function(t,e,n){ze.isUndefinedNull(e)?this._configurationRepository.set(t,n):this._configurationRepository.set(t,e)}},{key:"_setNumberConfigurationOrDefault",value:function(t,e,n){ze.isNumber(e)?this._configurationRepository.set(t,e):this._configurationRepository.set(t,n)}}])}();function Cl(t){return Cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cl(t)}function Ml(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bl(r.key),r)}}function Bl(t){var e=function(t,e){if("object"!=Cl(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Cl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Cl(e)?e:e+""}var jl=function(){return function(t,e,n){return e&&Ml(t.prototype,e),n&&Ml(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.reset()}),[{key:"setLogLevel",value:function(t){this._logLevel=t}},{key:"add",value:function(t){var e=t.data;if(!e)throw new Error("Unable to add log message. Missing data field");(!e.level||e.level>=this._logLevel)&&this._Q.push(e)}},{key:"take",value:function(){var t=this._Q;return this.reset(),t}},{key:"reset",value:function(){this._Q=[],this.setLogLevel(void 0===this._logLevel?$t:this._logLevel)}},{key:"isEmpty",value:function(){return 0===this._Q.length}},{key:"filterOutByLogLevel",value:function(t){this._Q=this._Q.filter((function(e,n,r){return e.level>=t}))}}])}();function Rl(t){return Rl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rl(t)}function Al(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Il(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Al(Object(n),!0).forEach((function(e){xl(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Al(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function xl(t,e,n){return(e=Ll(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ll(r.key),r)}}function Ll(t){var e=function(t,e){if("object"!=Rl(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Rl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Rl(e)?e:e+""}var Dl=function(){return function(t,e,n){return e&&Nl(t.prototype,e),n&&Nl(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sn=0,this.url=n,this.logAggregator=e,this.msgPrefix=r}),[{key:"log",value:function(t,e,n){this.logAggregator.add({eventName:"log",data:Il(Il({msg:this.msgPrefix+t},n),{},{url:this.url,level:e,sn:this.sn++})})}},{key:"setLogLevel",value:function(t){this.logAggregator instanceof jl&&this.logAggregator.setLogLevel(t)}},{key:"clearLogEntriesByLogLevel",value:function(t){this.logAggregator.filterOutByLogLevel(t)}}])}();function Fl(t){return Fl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fl(t)}function Ul(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gl(r.key),r)}}function Gl(t){var e=function(t,e){if("object"!=Fl(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Fl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fl(e)?e:e+""}function Hl(t,e,n){return e=Vl(e),function(t,e){if(e&&("object"==Fl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Wl()?Reflect.construct(e,n||[],Vl(t).constructor):e.apply(t,n))}function Wl(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Wl=function(){return!!t})()}function Vl(t){return Vl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vl(t)}function Ql(t,e){return Ql=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ql(t,e)}var zl=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Hl(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ql(t,e)}(e,t),function(t,e,n){return e&&Ul(t.prototype,e),n&&Ul(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"add",value:function(t){this.addToQueue(t.eventName,t.data)}},{key:"filterOutByLogLevel",value:function(t){this.filterOut((function(e){return e.data.level>=t}))}}])}(Gn);function Kl(t){return Kl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kl(t)}function ql(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xl(r.key),r)}}function Xl(t){var e=function(t,e){if("object"!=Kl(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Kl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Kl(e)?e:e+""}var Jl=function(){return function(t,e,n){return e&&ql(t.prototype,e),n&&ql(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isSecureSameSite=n.get(I),this._utils=e}),[{key:"getCookie",value:function(t){return this._utils.StorageUtils.getCookie(t)}},{key:"setCookie",value:function(t,e,n){return this._utils.StorageUtils.setCookie(t,e,n,this.isSecureSameSite)}},{key:"setExpirationInCookie",value:function(t,e){return this._utils.StorageUtils.setExpirationInCookie(t,e)}},{key:"getFromLocalStorage",value:function(t){return this._utils.StorageUtils.getFromLocalStorage(t)}},{key:"saveToLocalStorage",value:function(t,e,n){return this._utils.StorageUtils.saveToLocalStorage(t,e,n)}},{key:"setExpirationInLocalStorage",value:function(t,e){return this._utils.StorageUtils.setExpirationInLocalStorage(t,e)}},{key:"removeFromLocalStorage",value:function(t){return this._utils.StorageUtils.removeFromLocalStorage(t)}},{key:"removeCookie",value:function(t){return this._utils.StorageUtils.removeCookie(t)}}])}();function Yl(t){return Yl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yl(t)}function Zl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$l(r.key),r)}}function $l(t){var e=function(t,e){if("object"!=Yl(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Yl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Yl(e)?e:e+""}var tf=function(){return function(t,e,n){return e&&Zl(t.prototype,e),n&&Zl(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._workerCommunicator=e,this._brandRepository=n}),[{key:"set",value:function(t){this._validateBrand(t)&&(this._brandRepository.set(t),this._workerCommunicator.sendAsync(en,{brand:t}))}},{key:"update",value:function(){var t=this._brandRepository.get();t&&this.set(t)}},{key:"_validateBrand",value:function(t){return t.length>200?(ue.warn("The received brand name length is greater than 200. It is illegal. Ignoring the API call"),!1):!!/^[a-zA-Z0-9.\-,_ ]+$/.test(t)||(ue.warn("The received brand contains illegal characters. The legal characters are: A-Za-z0-9.-,_ and space. Ignoring the API call"),!1)}}])}();function ef(t){return ef="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ef(t)}function nf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rf(r.key),r)}}function rf(t){var e=function(t,e){if("object"!=ef(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ef(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ef(e)?e:e+""}var of=function(){return function(t,e,n){return e&&nf(t.prototype,e),n&&nf(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.brandKey="brand",this._utils=e,this._storageUtilsWrapper=n,this.COOKIE_EXPIRATION_IN_MILLISECONDS=this._utils.minutesToMilliseconds(525600)}),[{key:"get",value:function(){var t=this._storageUtilsWrapper.getCookie(this.brandKey),e=this._validateBrand(t);if(!e){ue.debug("Brand was not found in cookie. Trying to get it from the local storage.");var n=this._storageUtilsWrapper.getFromLocalStorage(this.brandKey);if(!(e=this._validateBrand(n)))return ue.debug("Brand was not found in local storage."),null}return e}},{key:"set",value:function(t){var e=this._validateBrand(t);e?(this._storageUtilsWrapper.saveToLocalStorage(this.brandKey,e)||ue.error("Failed saving brand ".concat(t," to local storage.")),this._storageUtilsWrapper.setCookie(this.brandKey,e,this.COOKIE_EXPIRATION_IN_MILLISECONDS)||ue.error("Failed saving brand ".concat(t," to cookie."))):ue.error("Brand ".concat(t," is invalid. Will not save it."))}},{key:"_validateBrand",value:function(t){return t||null}}])}();function af(t){return af="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},af(t)}function uf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sf(r.key),r)}}function sf(t){var e=function(t,e){if("object"!=af(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=af(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==af(e)?e:e+""}var cf=function(){return function(t,e,n){return e&&uf(t.prototype,e),n&&uf(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._muidService=n,this._clientEventService=r,this._workerCommunicator=o,this._messageBus.subscribe(qr,this._handler.bind(this),!0),this._workerCommunicator.addMessageListener(Sr,this._publish.bind(this),!0)}),[{key:"_handler",value:function(t){var e;null===(e=this._muidService)||void 0===e||e.updateMuid(t),this._clientEventService.publishRestoredMuidEvent(t)}},{key:"_publish",value:function(t){this._messageBus.publish(qr,t)}}])}();function lf(t){return lf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lf(t)}function ff(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,df(r.key),r)}}function df(t){var e=function(t,e){if("object"!=lf(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=lf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lf(e)?e:e+""}var hf=function(){return function(t,e,n){return e&&ff(t.prototype,e),n&&ff(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._configurationRepository=e}),[{key:"onConfigUpdate",value:function(t){var e=t.get(et);this._setConfigurationKey(e)}},{key:"updateConfig",value:function(t){this._handleConfigurationUpdate(t)}},{key:"_handleConfigurationUpdate",value:function(t){ze.isBoolean(t)?(ue.info("Set coordinates masking API was called, is enabled: ".concat(t)),this._setConfigurationKey(t)):ue.warn("Invalid argument type: ".concat(t))}},{key:"_setConfigurationKey",value:function(t){this._configurationRepository.set(et,t)}}])}();function pf(t){return pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pf(t)}function yf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mf(r.key),r)}}function mf(t){var e=function(t,e){if("object"!=pf(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=pf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pf(e)?e:e+""}var vf="cdAgentId",bf=function(){return function(t,e,n){return e&&yf(t.prototype,e),n&&yf(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._storageUtilsWrapper=e,this._agentId=null,this._loadAgentIdFromStorage()}),[{key:"get",value:function(){return this._agentId}},{key:"set",value:function(t){if(!t||"string"!=typeof t)throw new Error("Invalid agentId value");this._agentId=t,this._saveAgentIdToStorage()}},{key:"_saveAgentIdToStorage",value:function(){this._storageUtilsWrapper.saveToLocalStorage(vf,this._agentId)}},{key:"_loadAgentIdFromStorage",value:function(){this._agentId=this._storageUtilsWrapper.getFromLocalStorage(vf)||null}}])}();function gf(t){return gf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gf(t)}function _f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Sf(r.key),r)}}function Sf(t){var e=function(t,e){if("object"!=gf(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=gf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gf(e)?e:e+""}var wf=function(){return function(t,e,n){return e&&_f(t.prototype,e),n&&_f(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._agentIdCache=e,this._serverWorkerCommunicator=n}),[{key:"updateAgentIdWithServer",value:function(){var t=this._agentIdCache.get();this._serverWorkerCommunicator.sendAsync(on,{agentId:t})}},{key:"set",value:function(t){if(!t)throw new Error("Invalid agentId value of undefined");this._agentIdCache.set(t)}}])}();function Ef(t){return Ef="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ef(t)}function kf(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Pf(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?kf(Object(n),!0).forEach((function(e){Af(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kf(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Tf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Of(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,If(r.key),r)}}function Cf(t,e,n){return e&&Of(t.prototype,e),n&&Of(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mf(t,e,n){return e=jf(e),function(t,e){if(e&&("object"==Ef(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Bf()?Reflect.construct(e,n||[],jf(t).constructor):e.apply(t,n))}function Bf(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Bf=function(){return!!t})()}function jf(t){return jf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jf(t)}function Rf(t,e){return Rf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Rf(t,e)}function Af(t,e,n){return(e=If(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function If(t){var e=function(t,e){if("object"!=Ef(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ef(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ef(e)?e:e+""}var xf={configKey:"isElementsEvent",isDefault:!0,shouldRunPerContext:!0,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!0,runInUns:!1,runInSlave:!0,runInLean:!0,isRunning:!1,instance:null},Nf={input:0,initial:1,focus:2,blur:3,change:4,click:5,submit:6},Lf=["eventSequence","timestamp","eventType","isTrusted","elementHash","length","elementValues","selected","hashedValue","relativeTime"],Df=function(t){function e(t){var n;return Tf(this,e),Af(n=Mf(this,e),"mutationMessageHandler",(function(t){var e,r;t.browserContext&&(n._inputEvents.addOnLoadInputData(t.browserContext,!0),n._inputEvents.bind(t.browserContext),n._clickEvents.addOnLoadInputData(t.browserContext,!0),n._clickEvents.bind(t.browserContext),n._selectElementEvents.bind(t.browserContext),n._formEvents.bind(t.browserContext),null===(e=n._customInputEvents)||void 0===e||e.addOnLoadInputData(t.browserContext,!0),null===(r=n._customInputEvents)||void 0===r||r.bind(t.browserContext))})),Af(n,"startFeature",(function(t){var e,r;n._inputEvents.addOnLoadInputData(t,!1),n._inputEvents.bind(t),n._clickEvents.addOnLoadInputData(t,!1),n._clickEvents.bind(t),n._selectElementEvents.bind(t),null===(e=n._customInputEvents)||void 0===e||e.addOnLoadInputData(t,!1),null===(r=n._customInputEvents)||void 0===r||r.bind(t),n._formEvents.bind(t),n._configurationRepository.get(M)&&n._mutationEmitter&&(n._mutationEmitter.startObserver(t),n._jQueryElementListenerSiteMapper.initTracking())})),Af(n,"_onSiteMapperMatch",(function(t){var e=t.selector;if(e)try{var r=window.document.querySelector(e);if(!r)return void ue.error("ElementEvents._onSiteMapperMatch - selector:".concat(JSON.stringify(e)," not found on page"));n._domUtils.matches(r,n._inputSelectors)?n._jqueryEventHandler.bindInputEvents(r):n._domUtils.matches(r,n._onClickSelectors)?n._jqueryEventHandler.bindOnClickEvents(r):n._domUtils.matches(r,n._onSelectSelectors)?n._jqueryEventHandler.bindOnChangeEvents(r):n._domUtils.matches(r,n._onFormSelectors)?n._jqueryEventHandler.bindOnFormsEvents(r):ue.error("ElementEvents._onSiteMapperMatch - Unable to match the element with selector:\n                ".concat(JSON.stringify(e)," to any selectors group. Aborting jQuery element listening process."))}catch(t){ue.error("ElementEvents._onSiteMapperMatch - ".concat(t.message),t)}else ue.warn("ElementEvents._onSiteMapperMatch - No selector defined for match. Aborting jQuery element listening process.")})),n._configurationRepository=t.configurationRepository,n._utils=t.utils,n._domUtils=t.domUtils,n._dataQ=t.dataQ,n._elements=t.elements,n._jQueryElementListenerSiteMapper=t.jQueryElementListenerSiteMapper,n._jQueryElementListenerSiteMapper.updateObserver(n._onSiteMapperMatch),n._messageBus=t.messageBus,n._mutationEmitter=t.mutationEmitter,n._messageBus.subscribe(Jr,n.mutationMessageHandler),n._StandardInputEventsEmitter=t.StandardInputEventsEmitter,n._SyntheticMaskInputEventsHandler=t.SyntheticMaskInputEventsHandler,n._SyntheticAutotabInputEventsHandler=t.SyntheticAutotabInputEventsHandler,n._maskingService=t.maskingService,n._inputEvents=new t.InputEvents(n._elements,n.sendToQueue.bind(n),n._utils,n._messageBus,n._StandardInputEventsEmitter,n._SyntheticMaskInputEventsHandler,n._SyntheticAutotabInputEventsHandler,n._maskingService,t.maxShadowDepth),n._inputSelectors=t.inputSelectors,n._StandardOnClickEventsEmitter=t.StandardOnClickEventsEmitter,n._configurationRepository.get(rt)&&n._configurationRepository.get(ot)&&n._configurationRepository.get(it)&&(n._StandardCustomInputEmitter=t.StandardCustomInputEmitter,n._inputElementSettings={parentElementSelector:n._configurationRepository.get(rt),childElementWithCustomAttribute:n._configurationRepository.get(ot),elementDataAttribute:n._configurationRepository.get(it),customButtons:n._configurationRepository.get(at)},n._customInputEvents=new t.CustomInputEvents(n._elements,n.sendToQueue.bind(n),n._utils,n._messageBus,n._StandardCustomInputEmitter,n._maskingService,n.inputElementSettings=n._inputElementSettings)),n._clickEvents=new t.ClickEvents(n.sendToQueue.bind(n),n._utils,n._messageBus,n._configurationRepository,n._StandardOnClickEventsEmitter,n._maskingService,n._elements),n._onClickSelectors=t.onClickSelectors,n._StandardOnChangeEventsEmitter=t.StandardOnChangeEventsEmitter,n._elementFocusEventEmitter=t.ElementFocusEventsEmitter,n._elementBlurEventEmitter=t.ElementBlurEventsEmitter,n._selectElementEvents=new t.SelectElementEvents(n.sendToQueue.bind(n),n._utils,n._messageBus,n._StandardOnChangeEventsEmitter,n._elementFocusEventEmitter,n._elementBlurEventEmitter,n._configurationRepository,n._maskingService),n._onSelectSelectors=t.onSelectSelectors,n._StandardOnFormEventsEmitter=t.StandardOnFormEventsEmitter,n._formEvents=new t.FormEvents(n.sendToQueue.bind(n),n._messageBus,n._StandardOnFormEventsEmitter),n._onFormSelectors=t.onFormSelectors,n._jqueryEventHandler=t.JqueryElementsHandler,n._maxElemValLength=200,n._hashTruncationLength=n._configurationRepository.get("elementHashTruncationLength")||2,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rf(t,e)}(e,t),Cf(e,[{key:"stopFeature",value:function(t){var e;this._inputEvents.unbind(t),this._clickEvents.unbind(t),this._selectElementEvents.unbind(t),null===(e=this._customInputEvents)||void 0===e||e.unbind(t),this._formEvents.unbind(t),this._jQueryElementListenerSiteMapper.stopTracking(),this._mutationEmitter.stopObserver(t)}},{key:"updateFeatureConfig",value:function(t){this._configurationRepository.get("isMutationObserver")&&this._mutationEmitter&&(this._mutationEmitter.startObserver(t),this._jQueryElementListenerSiteMapper.onConfigUpdate(this._configurationRepository)),this._hashTruncationLength=void 0!==this._configurationRepository.get("elementHashTruncationLength")?this._configurationRepository.get("elementHashTruncationLength"):this._hashTruncationLength,this._elements.updateFeatureConfig(),this._selectElementEvents.updateSettings(t)}},{key:"sendToQueue",value:function(t,e){var n=xo[t.isTrusted],r=this.getEventTimestamp(t),o=this.getTimestampFromEvent(t),i=Nf[t.type];this._utils.isUndefinedNull(i)&&(i=-1);var a=this._elements.getElementHashFromEvent(t),u=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();(e=e||{}).elementValues&&e.elementValues.length>this._maxElemValLength&&(e.elementValues="");var s=Pf(Pf({},e),{eventType:i,eventSequence:u,timestamp:r,elementHash:a,isTrusted:n,hashedValue:"",relativeTime:o});this._dataQ.addToQueue("element_events",this._utils.convertToArrayByMap(Lf,s),!0)}}],[{key:"getDefaultSettings",value:function(){return xf}},{key:"Builder",get:function(){var t=function(){return Cf((function t(e,n,r,o,i,a){Tf(this,t),this.configurationRepository=e,this.utils=n,this.domUtils=r,this.elements=o,this.dataQ=i,this.maxShadowDepth=a}),[{key:"withMessageBus",value:function(t){return this.messageBus=t,this}},{key:"withMutationEmitter",value:function(t){return this.mutationEmitter=t,this}},{key:"withjQueryElementListenerSiteMapper",value:function(t){return this.jQueryElementListenerSiteMapper=t,this}},{key:"withjQueryElementsHandler",value:function(t){return this.JqueryElementsHandler=t,this}},{key:"withInputEvents",value:function(t,e,n){return this.InputEvents=t,this.inputSelectors=e,this.maskingService=n,this}},{key:"withStandardInputEventsEmitter",value:function(t){return this.StandardInputEventsEmitter=t,this}},{key:"withSyntheticMaskInputEventsHandler",value:function(t){return this.SyntheticMaskInputEventsHandler=t,this}},{key:"withSyntheticAutotabInputEventsHandler",value:function(t){return this.SyntheticAutotabInputEventsHandler=t,this}},{key:"withClickEvents",value:function(t,e){return this.ClickEvents=t,this.onClickSelectors=e,this}},{key:"withStandardOnClickEventsEmitter",value:function(t){return this.StandardOnClickEventsEmitter=t,this}},{key:"withSelectElementEvents",value:function(t,e){return this.SelectElementEvents=t,this.onSelectSelectors=e,this}},{key:"withStandardOnChangeEventsEmitter",value:function(t){return this.StandardOnChangeEventsEmitter=t,this}},{key:"withElementFocusEventsEmitter",value:function(t){return this.ElementFocusEventsEmitter=t,this}},{key:"withElementBlurEventsEmitter",value:function(t){return this.ElementBlurEventsEmitter=t,this}},{key:"withFormEvents",value:function(t,e){return this.FormEvents=t,this.onFormSelectors=e,this}},{key:"withStandardOnFormEventsEmitter",value:function(t){return this.StandardOnFormEventsEmitter=t,this}},{key:"withCustomInputEventEmitter",value:function(t,e){return this.CustomInputEvents=t,this.StandardCustomInputEmitter=e,this}},{key:"build",value:function(){return new e(this)}}])}();return t}}])}(Io),Ff=Df;function Uf(t){return Uf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uf(t)}function Gf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xf(r.key),r)}}function Wf(t,e,n){return e&&Hf(t.prototype,e),n&&Hf(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Vf(t,e,n){return e=zf(e),function(t,e){if(e&&("object"==Uf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Qf()?Reflect.construct(e,n||[],zf(t).constructor):e.apply(t,n))}function Qf(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Qf=function(){return!!t})()}function zf(t){return zf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zf(t)}function Kf(t,e){return Kf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Kf(t,e)}function qf(t,e,n){return(e=Xf(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xf(t){var e=function(t,e){if("object"!=Uf(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Uf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Uf(e)?e:e+""}var Jf={configKey:"isClipboardEvent",isDefault:!0,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!0,runInUns:!1,runInSlave:!0,runInLean:!0,isRunning:!1,instance:null},Yf={copy:0,paste:1,cut:2},Zf=["eventSequence","timestamp","clipboardEventType","elementHash","copiedText"],$f=function(t){function e(t){var n;return Gf(this,e),qf(n=Vf(this,e),"startFeature",(function(t){try{var e=t.getDocument();n._cutEventEmitter.start(e),n._messageBus.subscribe(so,n._handleClipboardEvent),n._copyEventEmitter.start(e),n._messageBus.subscribe(co,n._handleClipboardEvent),n._pasteEventEmitter.start(e),n._messageBus.subscribe(lo,n._handleClipboardEvent)}catch(t){ue.error("Failed starting the ClipboardEvents feature. msg: ".concat(t.message),t)}})),qf(n,"_handleClipboardEvent",(function(t){n._sendToQueue(t)})),qf(n,"_sendToQueue",(function(t){try{var e=n.getEventTimestamp(t),r=n._elements.getElementHashFromEvent(t),o=n._utils.StorageUtils.getAndUpdateEventSequenceNumber(),i=t.clipboardData?t.clipboardData.getData("text"):window.clipboardData?window.clipboardData.getData("text"):"";""!==(i=i||"")&&(i=i.replace(/[\d]/g,"1").replace(/[a-zA-Z]/g,"a").replace(/[^a-zA-Z\d]/g,"*"));var a=Yf[t.type];n._utils.isUndefinedNull(a)&&(a=-1),n._dataQueue.addToQueue("clipboard_events",n._utils.convertToArrayByMap(Zf,{eventSequence:o,timestamp:e,elementHash:r,copiedText:i,clipboardEventType:a}))}catch(t){ue.error("Failed handling ClipboardEvent. msg: ".concat(t.message),t)}})),n._utils=t.utils,n._dataQueue=t.dataQueue,n._elements=t.elements,n._messageBus=t.messageBus,n._cutEventEmitter=t.cutEventEmitter,n._copyEventEmitter=t.copyEventEmitter,n._pasteEventEmitter=t.pasteEventEmitter,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kf(t,e)}(e,t),Wf(e,[{key:"stopFeature",value:function(t){try{var e=t.getDocument();this._cutEventEmitter.stop(e),this._messageBus.unsubscribe(so,this._handleClipboardEvent),this._copyEventEmitter.stop(e),this._messageBus.unsubscribe(co,this._handleClipboardEvent),this._pasteEventEmitter.stop(e),this._messageBus.unsubscribe(lo,this._handleClipboardEvent)}catch(t){ue.error("Failed stopping the ClipboardEvents feature. msg: ".concat(t.message),t)}}}],[{key:"getDefaultSettings",value:function(){return Jf}},{key:"Builder",get:function(){return function(){return Wf((function t(e,n,r){Gf(this,t),this.utils=e,this.dataQueue=r,this.elements=n}),[{key:"withMessageBus",value:function(t){return this.messageBus=t,this}},{key:"withCutEventEmitter",value:function(t){return this.cutEventEmitter=t,this}},{key:"withCopyEventEmitter",value:function(t){return this.copyEventEmitter=t,this}},{key:"withPasteEventEmitter",value:function(t){return this.pasteEventEmitter=t,this}},{key:"build",value:function(){return new e(this)}}])}()}}])}(Io),td=$f;function ed(t){return ed="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ed(t)}function nd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ud(r.key),r)}}function rd(t,e,n){return e=id(e),function(t,e){if(e&&("object"==ed(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,od()?Reflect.construct(e,n||[],id(t).constructor):e.apply(t,n))}function od(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(od=function(){return!!t})()}function id(t){return id=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},id(t)}function ad(t,e){return ad=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ad(t,e)}function ud(t){var e=function(t,e){if("object"!=ed(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ed(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ed(e)?e:e+""}var sd={configKey:"isOrientationEvents",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},cd=function(t){function e(t,n,r,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){(e=ud(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(a=rd(this,e),"_handleDeviceOrientationEvent",(function(t){var e=a._utils.dateNow();if(t&&e-a._lastTime>a._samplePeriod){var n=t.absolute||!1,r=a._utils.isUndefinedNull(t.alpha)?0:a._utils.cutDecimalPointDigits(t.alpha,4),o=a._utils.isUndefinedNull(t.beta)?0:a._utils.cutDecimalPointDigits(t.beta,4),i=a._utils.isUndefinedNull(t.gamma)?0:a._utils.cutDecimalPointDigits(t.gamma,4);if(r!==a._lastAlpha||o!==a._lastBeta||i!==a._lastGamma){ue.isDebug()&&ue.debug("OrientationEvents:_onOrientationEvent, sending data: timestamp: ".concat(e,"\n                alpha,betta,gamma: ").concat(r,",").concat(o,",").concat(i,",prevTime:").concat(a._lastTime)),a._lastTime=e,a._lastAlpha=r,a._lastBeta=o,a._lastGamma=i;var u=a._utils.StorageUtils.getAndUpdateEventSequenceNumber();a._dataQ.addToQueue("orientation_events",[null,u,e,n,r,o,i])}}})),a._dataQ=r,a._configurationRepository=t,a._utils=n,a._samplePeriod=a._configurationRepository.get(z)||0,a._lastAlpha=0,a._lastBeta=0,a._lastGamma=0,a._lastTime=0,a._messageBus=o,a._deviceOrientationEventEmitter=i,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ad(t,e)}(e,t),function(t,e,n){return e&&nd(t.prototype,e),n&&nd(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){window.DeviceOrientationEvent&&(this._deviceOrientationEventEmitter.start(),this._messageBus.subscribe(fo,this._handleDeviceOrientationEvent))}},{key:"stopFeature",value:function(){window.DeviceOrientationEvent&&(this._deviceOrientationEventEmitter.stop(),this._messageBus.unsubscribe(fo,this._handleDeviceOrientationEvent))}},{key:"updateFeatureConfig",value:function(){var t=this._configurationRepository.get(z);this._samplePeriod=void 0!==t?t:this._samplePeriod}}],[{key:"getDefaultSettings",value:function(){return sd}}])}(Io),ld=cd;function fd(t){return fd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fd(t)}function dd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vd(r.key),r)}}function hd(t,e,n){return e=yd(e),function(t,e){if(e&&("object"==fd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,pd()?Reflect.construct(e,n||[],yd(t).constructor):e.apply(t,n))}function pd(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(pd=function(){return!!t})()}function yd(t){return yd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yd(t)}function md(t,e){return md=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},md(t,e)}function vd(t){var e=function(t,e){if("object"!=fd(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=fd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fd(e)?e:e+""}var bd={configKey:"isBeforeInstallPrompt",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!1,isFrameRelated:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},gd=["eventSequence","timestamp","platforms","relativeTime"],_d=function(t){function e(t,n,r,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){(e=vd(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(i=hd(this,e),"_onBeforeInstallPrompt",(function(t){var e=i._utils.StorageUtils.getAndUpdateEventSequenceNumber(),n=i.getEventTimestamp(),r=i.getTimestampFromEvent(t),o=t.platforms?t.platforms.join(","):"";i._dataQueue.addToQueue("before_install_prompt",i._utils.convertToArrayByMap(gd,{eventSequence:e,timestamp:n,platforms:o,relativeTime:r}))})),i._messageBus=r,i._eventEmitter=o,i._dataQueue=t,i._utils=n,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&md(t,e)}(e,t),function(t,e,n){return e&&dd(t.prototype,e),n&&dd(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){this._eventEmitter.start(window),this._messageBus.subscribe(ho,this._onBeforeInstallPrompt)}},{key:"stopFeature",value:function(){this._eventEmitter.stop(window),this._messageBus.unsubscribe(ho,this._onBeforeInstallPrompt)}}],[{key:"getDefaultSettings",value:function(){return bd}}])}(Io),Sd=_d;function wd(t){return wd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wd(t)}function Ed(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jd(r.key),r)}}function Pd(t,e,n){return e&&kd(t.prototype,e),n&&kd(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Td(t,e,n){return e=Cd(e),function(t,e){if(e&&("object"==wd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Od()?Reflect.construct(e,n||[],Cd(t).constructor):e.apply(t,n))}function Od(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Od=function(){return!!t})()}function Cd(t){return Cd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Cd(t)}function Md(t,e){return Md=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Md(t,e)}function Bd(t,e,n){return(e=jd(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jd(t){var e=function(t,e){if("object"!=wd(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=wd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wd(e)?e:e+""}var Rd={configKey:"isWindowEvents",isDefault:!0,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},Ad={DOMContentLoaded:0,scroll:1,resize:2,focus:3,blur:4,tabFocus:5,tabBlur:6},Id=["eventSequence","timestamp","eventType","isTrusted","screenWidth","screenHeight","clientWidth","clientHeight","documentWidth","documentHeight","scrollTop","scrollLeft","windowInnerWidth","windowInnerHeight","windowOuterWidth","windowOuterHeight"],xd=function(t){function e(t){var n;return Ed(this,e),Bd(n=Td(this,e),"startFeature",(function(t){try{n._resizeEventEmitter.start(t.Context),n._messageBus.subscribe(mo,n._onWindowEvent),n._focusEventEmitter.start(t.Context),n._messageBus.subscribe(po,n._onWindowEvent),n._blurEventEmitter.start(t.Context),n._messageBus.subscribe(yo,n._onWindowEvent),n._domContentLoadedEventEmitter.start(t.getDocument()),n._messageBus.subscribe(vo,n._onWindowEvent),n._visibilityChangeEventEmitter.start(t.getDocument()),n._messageBus.subscribe(bo,n._onWindowEvent),n._configurationRepository.get(W)&&(n._scrollEventEmitter.start(t.Context),n._messageBus.subscribe(go,n._onWindowEvent))}catch(t){ue.error("Failed starting the WindowEventCollector. msg: ".concat(t.message),t)}})),Bd(n,"stopFeature",(function(t){try{n._resizeEventEmitter.stop(t.Context),n._messageBus.unsubscribe(mo,n._onWindowEvent),n._focusEventEmitter.stop(t.Context),n._messageBus.unsubscribe(po,n._onWindowEvent),n._blurEventEmitter.stop(t.Context),n._messageBus.unsubscribe(yo,n._onWindowEvent),n._domContentLoadedEventEmitter.stop(t.getDocument()),n._messageBus.unsubscribe(vo,n._onWindowEvent),n._visibilityChangeEventEmitter.stop(t.getDocument()),n._messageBus.unsubscribe(bo,n._onWindowEvent),n._configurationRepository.get(W)&&(n._scrollEventEmitter.stop(t.Context),n._messageBus.unsubscribe(go,n._onWindowEvent))}catch(t){ue.error("Failed stopping the ClipboardEvents feature. msg: ".concat(t.message),t)}})),Bd(n,"updateFeatureConfig",(function(t){n._configurationRepository.get(W)?n._configurationRepository.get(W)&&(n._scrollEventEmitter.start(t.Context),n._messageBus.subscribe(go,n._onWindowEvent)):(n._scrollEventEmitter.stop(t.Context),n._messageBus.unsubscribe(go,n._onWindowEvent))})),Bd(n,"_onWindowEvent",(function(t){try{n._sendToQueue(t)}catch(t){ue.error("An error has occurred while sending window event. ".concat(t.message),t)}})),Bd(n,"_sendToQueue",(function(t){if(!t)throw new Error("Invalid window event received.");var e,r=xo[void 0];"DOMContentLoaded"===t.type?e=(new Date).getTime():(e=n.getEventTimestamp(t),r=xo[t.isTrusted]),ue.isDebug()&&(ue.trace("got event "+t.type+" at time "+e),ue.trace("adding to queue - screen(width,height): "+screen.width+","+screen.height+" window(width,height): "+window.innerWidth+","+window.innerHeight));var o=n._utils.StorageUtils.getAndUpdateEventSequenceNumber(),i="visibilitychange"!==t.type?t.type:"hidden"===document.visibilityState?"tabBlur":"tabFocus",a=Ad[i];null!=a&&void 0!==a||(a=-1),n._dataQueue.addToQueue("window_events",n._utils.convertToArrayByMap(Id,{eventType:a,eventSequence:o,timestamp:e,screenWidth:screen.width?Math.round(screen.width):-1,screenHeight:screen.height?Math.round(screen.height):-1,clientWidth:window.innerWidth?Math.round(window.innerWidth):-1,clientHeight:window.innerHeight?Math.round(window.innerHeight):-1,documentWidth:document.body&&document.body.clientWidth?Math.round(document.body.clientWidth):-1,documentHeight:document.body&&document.body.clientHeight?Math.round(document.body.clientHeight):-1,scrollTop:document.body&&document.body.scrollTop?Math.round(document.body.scrollTop):0,scrollLeft:document.body&&document.body.scrollLeft?Math.round(document.body.scrollLeft):0,windowInnerWidth:window.innerWidth?Math.round(window.innerWidth):-1,windowInnerHeight:window.innerHeight?Math.round(window.innerHeight):-1,windowOuterWidth:window.outerWidth?Math.round(window.outerWidth):-1,windowOuterHeight:window.outerHeight?Math.round(window.outerHeight):-1,isTrusted:r}))})),n._configurationRepository=t.configurationRepository,n._utils=t.utils,n._dataQueue=t.dataQueue,n._messageBus=t.messageBus,n._focusEventEmitter=t.focusEventEmitter,n._blurEventEmitter=t.blurEventEmitter,n._resizeEventEmitter=t.resizeEventEmitter,n._domContentLoadedEventEmitter=t.domContentLoadedEventEmitter,n._visibilityChangeEventEmitter=t.visibilityChangeEventEmitter,n._scrollEventEmitter=t.scrollEventEmitter,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Md(t,e)}(e,t),Pd(e,null,[{key:"getDefaultSettings",value:function(){return Rd}},{key:"Builder",get:function(){return function(){return Pd((function t(e,n,r){Ed(this,t),this.configurationRepository=e,this.utils=n,this.dataQueue=r}),[{key:"withMessageBus",value:function(t){return this.messageBus=t,this}},{key:"withFocusEventEmitter",value:function(t){return this.focusEventEmitter=t,this}},{key:"withBlurEventEmitter",value:function(t){return this.blurEventEmitter=t,this}},{key:"withResizeEventEmitter",value:function(t){return this.resizeEventEmitter=t,this}},{key:"withDOMContentLoadedEventEmitter",value:function(t){return this.domContentLoadedEventEmitter=t,this}},{key:"withVisibilityChangeEventEmitter",value:function(t){return this.visibilityChangeEventEmitter=t,this}},{key:"withScrollEventEmitter",value:function(t){return this.scrollEventEmitter=t,this}},{key:"build",value:function(){return new e(this)}}])}()}}])}(Io);function Nd(t){return Nd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nd(t)}function Ld(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Dd(r.key),r)}}function Dd(t){var e=function(t,e){if("object"!=Nd(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Nd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Nd(e)?e:e+""}function Fd(t,e,n){return e=Gd(e),function(t,e){if(e&&("object"==Nd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ud()?Reflect.construct(e,n||[],Gd(t).constructor):e.apply(t,n))}function Ud(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ud=function(){return!!t})()}function Gd(t){return Gd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gd(t)}function Hd(t,e){return Hd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Hd(t,e)}var Wd={configKey:"isAccelerometerEvents",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},Vd=function(t){function e(t,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Fd(this,e))._configurationRepository=t,o._utils=n,o._dataQueue=r,o._storageUtils=o._utils.StorageUtils,o._samplePeriod=o._configurationRepository.get(Q)||0,o._samplePeriodGyro=o._configurationRepository.get(V)||0,o._lastX=0,o._lastY=0,o._lastZ=0,o._lastTime=0,o._lastAlpha=0,o._lastBeta=0,o._lastGamma=0,o._lastTimeGyro=0,o._onAccelerometerventFunc=o._onAccelerometerEvent.bind(o),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hd(t,e)}(e,t),function(t,e,n){return e&&Ld(t.prototype,e),n&&Ld(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"_onAccelerometerEvent",value:function(t){var e=this._utils.dateNow();if(t&&t.accelerationIncludingGravity&&e-this._lastTime>this._samplePeriod){var n=t.accelerationIncludingGravity.x,r=t.accelerationIncludingGravity.y,o=t.accelerationIncludingGravity.z;if(!(this._utils.isUndefinedNull(n)&&this._utils.isUndefinedNull(r)&&this._utils.isUndefinedNull(o)||(n=this._utils.isUndefinedNull(n)?-1:this._utils.cutDecimalPointDigits(n,4),r=this._utils.isUndefinedNull(r)?-1:this._utils.cutDecimalPointDigits(r,4),o=this._utils.isUndefinedNull(o)?-1:this._utils.cutDecimalPointDigits(o,4),n===this._lastX&&r===this._lastY&&o===this._lastZ))){var i=this._storageUtils.getAndUpdateEventSequenceNumber();this._lastTime=e,this._lastX=n,this._lastY=r,this._lastZ=o,this._dataQueue.addToQueue("accelerometer_events",[null,i,e,n,r,o]),ue.isDebug()&&ue.debug("AccelerometerEvents:_onAccelerometerEvent, sending data: timestamp:".concat(e," x,y,z:").concat(n,",").concat(r,",").concat(o,", prevTime:").concat(this._lastTime))}}if(t&&t.rotationRate&&e-this._lastTimeGyro>this._samplePeriodGyro){var a=t.rotationRate.alpha,u=t.rotationRate.beta,s=t.rotationRate.gamma;if(!this._utils.isUndefinedNull(a)||!this._utils.isUndefinedNull(u)||!this._utils.isUndefinedNull(s)){var c=t.absolute||!1;if(a=this._utils.isUndefinedNull(a)?0:this._utils.cutDecimalPointDigits(a,4),u=this._utils.isUndefinedNull(u)?0:this._utils.cutDecimalPointDigits(u,4),s=this._utils.isUndefinedNull(s)?0:this._utils.cutDecimalPointDigits(s,4),a!==this._lastAlpha||u!==this._lastBeta||s!==this._lastGamma){this._lastTimeGyro=e,this._lastAlpha=a,this._lastBeta=u,this._lastGamma=s;var l=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();this._dataQueue.addToQueue("gyro_events",[null,l,e,c,a,u,s]),ue.isDebug()&&ue.debug("GyroEvents:_onGyroEvent, sending data: timestamp:".concat(e," alpha,betta,gamma:").concat(a,",").concat(u,",").concat(s,", prevTime: ").concat(this._lastTimeGyro))}}}return!0}},{key:"startFeature",value:function(){window.DeviceMotionEvent&&this._utils.addEventListener(window,"devicemotion",this._onAccelerometerventFunc)}},{key:"stopFeature",value:function(){window.DeviceMotionEvent&&this._utils.removeEventListener(window,"devicemotion",this._onAccelerometerventFunc)}},{key:"updateFeatureConfig",value:function(){this._samplePeriod=void 0!==this._configurationRepository.get(Q)?this._configurationRepository.get(Q):this._samplePeriod,this._samplePeriodGyro=void 0!==this._configurationRepository.get(V)?this._configurationRepository.get(V):this._samplePeriodGyro}}],[{key:"getDefaultSettings",value:function(){return Wd}}])}(Io);function Qd(t){return Qd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qd(t)}function zd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Kd(r.key),r)}}function Kd(t){var e=function(t,e){if("object"!=Qd(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Qd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qd(e)?e:e+""}function qd(t,e,n){return e=Jd(e),function(t,e){if(e&&("object"==Qd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Xd()?Reflect.construct(e,n||[],Jd(t).constructor):e.apply(t,n))}function Xd(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Xd=function(){return!!t})()}function Jd(t){return Jd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jd(t)}function Yd(t,e){return Yd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Yd(t,e)}var Zd=["clientX","clientY"],$d=["screenX","screenY"],th=function(t,e,n){function r(t,e){var r=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return Math.sqrt(r*r+o*o)}return{getScale:function(){return r(t[0],t[1])/r(e[0],e[1])},getFocusPoint:function(){return e=t[1],r=t[0],{x:(e[n[0]]+r[n[0]])/2,y:(e[n[1]]+r[n[1]])/2};var e,r}}},eh={pointerdown:0,pointermove:1,pointerup:2},nh={configKey:"isPinchZoomEvents",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!0,runInSlave:!0,runInLean:!0,runInUns:!1,isRunning:!1,instance:null},rh=["eventSequence","timestamp","focusX","focusY","scaleFactor"],oh=function(t){function e(t,n,r,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=qd(this,e))._utils=t,i._dataQ=r,i._elements=n,i._msgBus=o,i._evGesturesCache=[],i._prevEventDiff=-1,i._prevEvGestureSet=[],i._prevTouchEvents=[],i._onAllBrowsersPinchZoomEventBinded=i._onAllBrowsersPinchZoomEvent.bind(i),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yd(t,e)}(e,t),function(t,e,n){return e&&zd(t.prototype,e),n&&zd(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(t){this._bind(t)}},{key:"stopFeature",value:function(t){this._unbind(t)}},{key:"_addToCommunicationQueue",value:function(t,e,n,r){t!==eh.pointerdown&&t!==eh.pointerup||this._msgBus.publish("pinchEvent",{action:t});var o=this.getEventTimestamp(r),i=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();this._dataQ.addToQueue("pinch_events",this._utils.convertToArrayByMap(rh,{eventSequence:i,timestamp:o,focusX:n.x,focusY:n.y,scaleFactor:e}))}},{key:"_bind",value:function(t){var e,n=t.getDocument();if(window.PointerEvent?e=["pointerdown","pointermove","pointerup"]:window.TouchEvent&&(e=["touchstart","touchend","touchcancel","touchmove"]),this._listeningToEvents=e,this._listeningToEvents)for(var r=0;r<this._listeningToEvents.length;r++)this._utils.addEventListener(n,this._listeningToEvents[r],this._onAllBrowsersPinchZoomEventBinded,!1,!1)}},{key:"_unbind",value:function(t){var e=t.getDocument();if(this._listeningToEvents)for(var n=0;n<this._listeningToEvents.length;n++)this._utils.removeEventListener(e,this._listeningToEvents[n],this._onAllBrowsersPinchZoomEventBinded);this._evGesturesCache=[],this._prevEventDiff=-1}},{key:"_onAllBrowsersPinchZoomEvent",value:function(t){switch(t.type){case"pointerdown":this._onPointerDownEvent(t);break;case"pointermove":this._onPointerMoveEvent(t);break;case"pointerup":this._onPointerUpEvent(t);break;case"touchstart":this._onTouchStartEvent(t);break;case"touchend":this._onTouchEndEvent();break;case"touchmove":this._onTouchMoveEvent(t)}return!0}},{key:"_onPointerDownEvent",value:function(t){this._evGesturesCache.push(t)}},{key:"_onPointerMoveEvent",value:function(t){for(var e=0;e<this._evGesturesCache.length;e++)if(t.pointerId===this._evGesturesCache[e].pointerId){this._evGesturesCache[e]=t;break}if(2===this._evGesturesCache.length&&this._evGesturesCache[0].pointerId!==this._evGesturesCache[1].pointerId){var n=Math.abs(this._evGesturesCache[0].clientX-this._evGesturesCache[1].clientX);if(this._prevEventDiff>0&&(this._prevEventDiff,this._prevEventDiff,2===this._prevEvGestureSet.length)){var r=th(this._evGesturesCache,this._prevEvGestureSet,Zd),o=r.getScale();this._addToCommunicationQueue(eh[t.type],o,r.getFocusPoint(),t)}this._prevEventDiff=n,this._prevEvGestureSet=this._evGesturesCache.slice(0)}else this._evGesturesCache.length>2&&(this._evGesturesCache=[],this._prevEvGestureSet=[])}},{key:"_onPointerUpEvent",value:function(t){for(var e=0;e<this._evGesturesCache.length;e++)if(this._evGesturesCache[e].pointerId===t.pointerId){this._evGesturesCache.splice(e,1);break}this._evGesturesCache.length<2&&(this._prevEventDiff=-1,this._prevEvGestureSet=[])}},{key:"_onTouchStartEvent",value:function(t){this._prevTouchEvents[0]=t.touches.item(0),this._prevTouchEvents[1]=t.touches.item(1)}},{key:"_onTouchEndEvent",value:function(){this._prevTouchEvents=[]}},{key:"_onTouchMoveEvent",value:function(t){if(2===t.touches.length){if(2===this._prevTouchEvents.length){var e=[t.touches.item(0),t.touches.item(1)],n=th(e,this._prevTouchEvents.splice(0),$d),r=n.getScale();this._addToCommunicationQueue(eh[t.type],r,n.getFocusPoint(),t)}this._prevTouchEvents[0]=t.touches.item(0),this._prevTouchEvents[1]=t.touches.item(1)}}}],[{key:"getDefaultSettings",value:function(){return nh}}])}(Io);function ih(t){return ih="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ih(t)}function ah(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uh(r.key),r)}}function uh(t){var e=function(t,e){if("object"!=ih(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ih(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ih(e)?e:e+""}function sh(t,e,n){return e=lh(e),function(t,e){if(e&&("object"==ih(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ch()?Reflect.construct(e,n||[],lh(t).constructor):e.apply(t,n))}function ch(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ch=function(){return!!t})()}function lh(t){return lh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},lh(t)}function fh(t,e){return fh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fh(t,e)}var dh={load:0},hh={configKey:"isScriptExecuteEve",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},ph=["eventSequence","timestamp","eventType","scriptId","namespaceURI","outerHTML","scriptSource","scriptType"],yh=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=sh(this,e))._onScriptExecuteEventFunc=r._onScriptExecuteEvent.bind(r),r._dataQueue=n,r._utils=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fh(t,e)}(e,t),function(t,e,n){return e&&ah(t.prototype,e),n&&ah(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"_onScriptExecuteEvent",value:function(t){if(t&&t.target&&("load"!==t.type||"script"===t.target.nodeName.toLowerCase()))try{var e=this.getEventTimestamp(t),n=this._utils.StorageUtils.getAndUpdateEventSequenceNumber(),r=dh[t.type];this._utils.isUndefinedNull(r)&&(r=-1),ue.isDebug()&&ue.trace("got event "+t.type+", "+r+", scriptSrc: "+t.target.src+" at time "+e),this._dataQueue.addToQueue("script_events",this._utils.convertToArrayByMap(ph,{eventSequence:n,timestamp:e,eventType:r,scriptId:t.target.id||"",namespaceURI:t.target.namespaceURI||"",outerHTML:t.target.outerHTML||"",scriptSource:t.target.src||"",scriptType:t.target.type||""}))}catch(t){ue.error("error on getScriptExecuteEvent ".concat(t.toString()))}}},{key:"startFeature",value:function(){this._utils.addEventListener(document,"load",this._onScriptExecuteEventFunc,!0)}},{key:"stopFeature",value:function(){this._utils.removeEventListener(document,"load",this._onScriptExecuteEventFunc,!0)}}],[{key:"getDefaultSettings",value:function(){return hh}}])}(Io);function mh(t){return mh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mh(t)}function vh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bh(r.key),r)}}function bh(t){var e=function(t,e){if("object"!=mh(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=mh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mh(e)?e:e+""}function gh(t,e,n){return e=Sh(e),function(t,e){if(e&&("object"==mh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,_h()?Reflect.construct(e,n||[],Sh(t).constructor):e.apply(t,n))}function _h(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_h=function(){return!!t})()}function Sh(t){return Sh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Sh(t)}function wh(t,e){return wh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wh(t,e)}var Eh={configKey:"isNetInfoEvents",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},kh=["eventSequence","timestamp","connectionType","effectiveType","downlinkMax","downlink","rtt","isSaveData"],Ph=function(t){function e(t,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:navigator.connection||navigator.mozConnection||navigator.webkitConnection;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=gh(this,e))._dataQueue=n,r._utils=t,r._connection=o,r._boundOnChangeNetworkInfo=r.onChangeNetworkInfo.bind(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wh(t,e)}(e,t),function(t,e,n){return e&&vh(t.prototype,e),n&&vh(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"onChangeNetworkInfo",value:function(){ue.debug("NetInfoEvents:onChangeNetworkInfo");var t=this._utils.isUndefinedNull(this._connection.saveData)?"":this._connection.saveData.toString(),e=this.getEventTimestamp(),n=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();this._dataQueue.addToQueue("net_info_events",this._utils.convertToArrayByMap(kh,{eventSequence:n,timestamp:e,connectionType:this._connection.type?this._connection.type:"",effectiveType:this._connection.effectiveType?this._connection.effectiveType:"",downlinkMax:this._connection.downlinkMax?this._connection.downlinkMax.toString():"",downlink:this._connection.downlink?this._connection.downlink.toString():"",rtt:this._connection.rtt?this._connection.rtt.toString():"",isSaveData:t}))}},{key:"startFeature",value:function(){this._connection&&(this._connection.addEventListener("change",this._boundOnChangeNetworkInfo,!0),this.onChangeNetworkInfo())}},{key:"stopFeature",value:function(){this._connection&&this._connection.removeEventListener("change",this._boundOnChangeNetworkInfo,!0)}}],[{key:"getDefaultSettings",value:function(){return Eh}}])}(Io);function Th(t){return Th="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Th(t)}function Oh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ch(r.key),r)}}function Ch(t){var e=function(t,e){if("object"!=Th(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Th(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Th(e)?e:e+""}function Mh(t,e,n){return e=jh(e),function(t,e){if(e&&("object"==Th(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Bh()?Reflect.construct(e,n||[],jh(t).constructor):e.apply(t,n))}function Bh(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Bh=function(){return!!t})()}function jh(t){return jh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jh(t)}function Rh(t,e){return Rh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Rh(t,e)}var Ah={configKey:"isDeviceOrientationEvents",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},Ih={undefined:0,"portrait-primary":1,"landscape-primary":2,"portrait-secondary":3,"landscape-secondary":4},xh=["eventSequence","timestamp","orientation"],Nh=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Mh(this,e))._dataQ=n,r._utils=t,r._onDeviceOrientationEventFunc=r._onDeviceOrientationEvent.bind(r),screen.mozOrientation&&screen.addEventListener?(r._eventTarget=screen,r._eventName="mozorientationchange"):screen.msOrientation&&screen.addEventListener?(r._eventTarget=screen,r._eventName="msorientationchange"):(r._eventTarget=window,r._eventName="orientationchange"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rh(t,e)}(e,t),function(t,e,n){return e&&Oh(t.prototype,e),n&&Oh(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){this._utils.addEventListener(this._eventTarget,this._eventName,this._onDeviceOrientationEventFunc),this._handleDeviceOrientationEvent(screen)}},{key:"stopFeature",value:function(){this._utils.removeEventListener(this._eventTarget,this._eventName,this._onDeviceOrientationEventFunc)}},{key:"_onDeviceOrientationEvent",value:function(t){var e;e=t&&t.target?t.target.screen||t.target:screen,this._handleDeviceOrientationEvent(e)}},{key:"_handleDeviceOrientationEvent",value:function(t){var e=t.mozOrientation||t.msOrientation||t.orientation;if(void 0!==e){var n=e.type||e,r=Ih[n];if(void 0!==r){if(this._lastDeviceOrientationType!==r){var o=this.getEventTimestamp(),i=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();this._lastDeviceOrientationType=r,ue.trace("onDeviceOrientationEvent: Orientation changed to ".concat(r," at time ").concat(o)),this._dataQ.addToQueue("screen_orientation",this._utils.convertToArrayByMap(xh,{eventSequence:i,timestamp:o,orientation:r}))}}else ue.error("onDeviceOrientationEvent: Unknown orientation ".concat(n," value."))}else ue.debug("onDeviceOrientationEvent: Unable to find orientation data.")}}],[{key:"getDefaultSettings",value:function(){return Ah}}])}(Io);function Lh(t){return Lh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lh(t)}function Dh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Fh(r.key),r)}}function Fh(t){var e=function(t,e){if("object"!=Lh(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Lh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Lh(e)?e:e+""}function Uh(t,e,n){return e=Hh(e),function(t,e){if(e&&("object"==Lh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Gh()?Reflect.construct(e,n||[],Hh(t).constructor):e.apply(t,n))}function Gh(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Gh=function(){return!!t})()}function Hh(t){return Hh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Hh(t)}function Wh(t,e){return Wh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Wh(t,e)}var Vh={configKey:"isTapEvents",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!0,runInSlave:!0,runInLean:!0,runInUns:!1,isRunning:!1,instance:null},Qh=["eventSequence","timestamp","screenX","screenY","pageX","pageY","clientX","clientY","isTrusted","elementHash","touchIndex","touchSizeMajor","touchSizeMinor"],zh=["eventSequence","timestamp","screenX","screenY","pageX","pageY","clientX","clientY","isTrusted","elementHash","touchIndex","touchSizeMajor","touchSizeMinor"],Kh=function(t){function e(t,n,r,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=Uh(this,e))._configurationRepository=t,a._utils=n,a._dataQ=o,a._elements=r,a._activeTouchActions={},a._maskingService=i,a._tapMaxSlop=a._configurationRepository.get("tapEventsTapMaxSlop")||20,a._longPressTimeout=a._configurationRepository.get("tapEventsLongPressTimeout")||500,a._handleStartEventBind=a._handleStartEvent.bind(a),a._handleMoveEventBind=a._handleMoveEvent.bind(a),a._handleEndEventBind=a._handleEndEvent.bind(a),a._handleCancelEventBind=a._handleCancelEvent.bind(a),a._eventDefinitions=e.getSupportedTouchEvents(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wh(t,e)}(e,t),function(t,e,n){return e&&Dh(t.prototype,e),n&&Dh(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(t){this._bind(t)}},{key:"stopFeature",value:function(t){this._unbind(t)}},{key:"updateFeatureConfig",value:function(){this._tapMaxSlop=void 0!==this._configurationRepository.get("tapEventsTapMaxSlop")?this._configurationRepository.get("tapEventsTapMaxSlop"):this._tapMaxSlop,this._longPressTimeout=void 0!==this._configurationRepository.get("tapEventsLongPressTimeout")?this._configurationRepository.get("tapEventsLongPressTimeout"):this._longPressTimeout}},{key:"_bind",value:function(t){if(this._eventDefinitions){var e=t.getDocument();this._utils.addEventListener(e,this._eventDefinitions.startEvent,this._handleStartEventBind),this._utils.addEventListener(e,this._eventDefinitions.moveEvent,this._handleMoveEventBind),this._utils.addEventListener(e,this._eventDefinitions.endEvent,this._handleEndEventBind),this._utils.addEventListener(e,this._eventDefinitions.cancelEvent,this._handleCancelEventBind)}else ue.debug("TapEvents:_bind - No event definitions. Might be a legacy browser. Aborting bind operation.")}},{key:"_unbind",value:function(t){if(this._eventDefinitions){var e=t.getDocument();this._utils.removeEventListener(e,this._eventDefinitions.startEvent,this._handleStartEventBind),this._utils.removeEventListener(e,this._eventDefinitions.moveEvent,this._handleMoveEventBind),this._utils.removeEventListener(e,this._eventDefinitions.endEvent,this._handleEndEventBind),this._utils.removeEventListener(e,this._eventDefinitions.cancelEvent,this._handleCancelEventBind)}}},{key:"_handleStartEvent",value:function(t){for(var e=this._getEventData(t),n=0;n<e.length;n++)this._activeTouchActions[e[n].identifier]={startTime:this.getEventTimestamp(),startX:e[n].touchData.pageX,startY:e[n].touchData.pageY,offsetX:0,offsetY:0}}},{key:"_handleMoveEvent",value:function(t){for(var e=this._getEventData(t),n=0;n<e.length;n++){var r=this._activeTouchActions[e[n].identifier];r&&(r.offsetX=Math.abs(e[n].touchData.pageX-r.startX),r.offsetY=Math.abs(e[n].touchData.pageY-r.startY))}}},{key:"_handleEndEvent",value:function(t){for(var e=this._getEventData(t),n=0;n<e.length;n++){var r=this._activeTouchActions[e[n].identifier];r&&(r.offsetX<this._tapMaxSlop&&r.offsetY<this._tapMaxSlop&&(this.getEventTimestamp()-r.startTime<this._longPressTimeout?this._sendEvent("tap_events",Qh,e[n].identifier,e[n].touchData,e[n].eventArgs):this._sendEvent("longpress_events",zh,e[n].identifier,e[n].touchData,e[n].eventArgs)),delete this._activeTouchActions[e[n].identifier])}}},{key:"_handleCancelEvent",value:function(t){for(var e=this._getEventData(t),n=0;n<e.length;n++)delete this._activeTouchActions[e[n].identifier]}},{key:"_getEventData",value:function(t){if(void 0!==t.changedTouches){for(var e=[],n=0;n<t.changedTouches.length;n++){var r=t.changedTouches[n],o=r.identifier;e.push({identifier:o,touchData:r,eventArgs:t})}return e}if(null!=t.pointerType&&("touch"===t.pointerType||"pen"===t.pointerType||t.pointerType===t.MSPOINTER_TYPE_TOUCH||t.pointerType===t.MSPOINTER_TYPE_PEN))return[{identifier:t.pointerId?t.pointerId:0,touchData:t,eventArgs:t}];return[]}},{key:"_sendEvent",value:function(t,e,n,r,o){var i=this.getEventTimestamp(),a=xo[o.isTrusted],u=this._elements.getElementHashFromEvent(o),s=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();this._utils.isUndefinedNull(n)&&(n=0),this._dataQ.addToQueue(t,this._utils.convertToArrayByMap(e,{eventSequence:s,timestamp:i,screenX:this._maskingService.shouldMaskCoordinates()?Ho:r.screenX?Math.round(r.screenX):0,screenY:this._maskingService.shouldMaskCoordinates()?Ho:r.screenY?Math.round(r.screenY):0,pageX:this._maskingService.shouldMaskCoordinates()?Ho:r.pageX||0,pageY:this._maskingService.shouldMaskCoordinates()?Ho:r.pageY||0,clientX:this._maskingService.shouldMaskCoordinates()?Ho:r.clientX||0,clientY:this._maskingService.shouldMaskCoordinates()?Ho:r.clientY||0,isTrusted:a,elementHash:u,touchIndex:n%1e4,touchSizeMajor:r.radiusX?2*r.radiusX:0,touchSizeMinor:r.radiusY?2*r.radiusY:0}))}}],[{key:"getDefaultSettings",value:function(){return Vh}},{key:"getSupportedTouchEvents",value:function(){return window.TouchEvent?{startEvent:"touchstart",moveEvent:"touchmove",endEvent:"touchend",cancelEvent:"touchcancel"}:window.PointerEvent?{startEvent:"pointerdown",moveEvent:"pointermove",endEvent:"pointerup",cancelEvent:"pointercancel"}:void ue.debug("TapEvents:_createEventsToListenList - No touch support for browser.")}}])}(Io);function qh(t){return qh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qh(t)}function Xh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Jh(r.key),r)}}function Jh(t){var e=function(t,e){if("object"!=qh(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=qh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qh(e)?e:e+""}function Yh(t,e,n){return e=$h(e),function(t,e){if(e&&("object"==qh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Zh()?Reflect.construct(e,n||[],$h(t).constructor):e.apply(t,n))}function Zh(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Zh=function(){return!!t})()}function $h(t){return $h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$h(t)}function tp(t,e){return tp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tp(t,e)}var ep={configKey:"isStorageEvents",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!1,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},np=0,rp=["eventSequence","timestamp","keys","action","tabsOpened"],op=function(t){function e(t,n,r,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Yh(this,e))._utils=t,i._dataQ=r,i._elements=n,i._msgBus=o,i._onAllStorageEventBinded=i._onAllStorageEvent.bind(i),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tp(t,e)}(e,t),function(t,e,n){return e&&Xh(t.prototype,e),n&&Xh(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(t){this._bind(t)}},{key:"stopFeature",value:function(t){this._unbind(t)}},{key:"_addToCommunicationQueue",value:function(t,e,n,r,o){t===np&&this._msgBus.publish("storageEvent",{action:t});var i=this.getEventTimestamp(o),a=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();this._dataQ.addToQueue("storage_events",this._utils.convertToArrayByMap(rp,{eventSequence:a,timestamp:i,keys:e,action:n,tabsOpened:r}))}},{key:"_bind",value:function(t){var e,n=t.Context;if((n.localStorage||n.sessionStorage)&&(e=["storage"]),this._listeningToEvents=e,this._listeningToEvents.length>0)for(var r=0;r<this._listeningToEvents.length;r++)this._utils.addEventListener(n,this._listeningToEvents[r],this._onAllStorageEventBinded,!0)}},{key:"_unbind",value:function(t){if(this._listeningToEvents)for(var e=0;e<this._listeningToEvents.length;e++)this._utils.removeEventListener(t.Context,this._listeningToEvents[e],this._onAllStorageEventBinded,!0)}},{key:"_onAllStorageEvent",value:function(t){if("storage"===t.type)this._onStorageEvent(t);return!0}},{key:"_onStorageEvent",value:function(t){var e=!1,n=null,r=null;null===t.key&&(n=null),"string"==typeof t.key&&null===t.newValue?(n=t.key,r="delete"):(n=t.key,r="update");var o=this._utils.StorageUtils.getFromLocalStorage("cdTabList");o&&"object"===qh(o[0])&&(e=!0),e=e?1:0,this._addToCommunicationQueue(t.type,n,r,e,t)}}],[{key:"getDefaultSettings",value:function(){return ep}}])}(Io);function ip(t){return ip="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ip(t)}function ap(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,up(r.key),r)}}function up(t){var e=function(t,e){if("object"!=ip(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ip(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ip(e)?e:e+""}function sp(t,e,n){return e=lp(e),function(t,e){if(e&&("object"==ip(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,cp()?Reflect.construct(e,n||[],lp(t).constructor):e.apply(t,n))}function cp(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(cp=function(){return!!t})()}function lp(t){return lp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},lp(t)}function fp(t,e){return fp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fp(t,e)}var dp={configKey:"isPrintEvents",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!1,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},hp=1,pp=0,yp=["eventSequence","timestamp","printDialogState"],mp=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=sp(this,e))._utils=t,r._dataQueue=n,r._addToEventQueueFunc=r._addToEventQueue.bind(r),r._myAfterPrintFunc=r._myAfterPrint.bind(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fp(t,e)}(e,t),function(t,e,n){return e&&ap(t.prototype,e),n&&ap(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"_myAfterPrint",value:function(){this._addToEventQueueFunc(pp),window.removeEventListener("focus",this._myAfterPrintFunc)}},{key:"_onBeforePrintEvent",value:function(){this._addToEventQueueFunc(hp),this._utils.addEventListener(window,"focus",this._myAfterPrintFunc.bind(this))}},{key:"_addToEventQueue",value:function(t){var e=this.getEventTimestamp(),n=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();this._dataQueue.addToQueue("print_events",this._utils.convertToArrayByMap(yp,{eventSequence:n,timestamp:e,printDialogState:t}))}},{key:"startFeature",value:function(){this._utils.addEventListener(window,"beforeprint",this._onBeforePrintEvent.bind(this))}},{key:"stopFeature",value:function(){this._utils.removeEventListener(window,"beforeprint",this._onBeforePrintEvent.bind(this),!0)}}],[{key:"getDefaultSettings",value:function(){return dp}}])}(Io);function vp(t){return vp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vp(t)}function bp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gp(r.key),r)}}function gp(t){var e=function(t,e){if("object"!=vp(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=vp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vp(e)?e:e+""}function _p(t,e,n){return e=wp(e),function(t,e){if(e&&("object"==vp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Sp()?Reflect.construct(e,n||[],wp(t).constructor):e.apply(t,n))}function Sp(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Sp=function(){return!!t})()}function wp(t){return wp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wp(t)}function Ep(t,e){return Ep=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ep(t,e)}var kp={configKey:"isLightSensor",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!1,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},Pp=["eventSequence","timestamp","illuminance"],Tp=function(t){function e(t,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=_p(this,e))._dataQueue=t,o._utils=n,o._configurationRepository=r,o._eventThreshold=o._configurationRepository.get("lightSensorEventThreshold")||5e3,o._lastTime=0,o.onReadingSensorBoundble=o._onReadingSensor.bind(o),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ep(t,e)}(e,t),function(t,e,n){return e&&bp(t.prototype,e),n&&bp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"_onReadingSensor",value:function(){var t=this.getEventTimestamp();if(t-this._lastTime>this._eventThreshold){var e=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();this._lastTime=t,this._dataQueue.addToQueue("ambient_light_level",this._utils.convertToArrayByMap(Pp,{eventSequence:e,timestamp:t,illuminance:this._sensor.illuminance}))}}},{key:"startFeature",value:function(){window.AmbientLightSensor?(ue.info("AmbientLightSensor exists and collected"),this._sensor=new AmbientLightSensor,this._sensor.addEventListener("reading",this.onReadingSensorBoundble,!0),this._sensor.addEventListener("error",e._onSensorError,!0),this._sensor.start()):ue.debug("LightSensor does not exist, not collecting")}},{key:"stopFeature",value:function(){this._sensor&&(this._sensor.removeEventListener("reading",this.onReadingSensorBoundble,!0),this._sensor.removeEventListener("error",e._onSensorError,!0),this._sensor.stop(),this._sensor=null)}},{key:"updateFeatureConfig",value:function(){this._eventThreshold=this._configurationRepository.get("lightSensorEventThreshold")?this._configurationRepository.get("lightSensorEventThreshold"):this._eventThreshold}}],[{key:"getDefaultSettings",value:function(){return kp}},{key:"_onSensorError",value:function(t){ue.debug("Error connecting LightSensor ".concat(t.error))}}])}(Io);function Op(t){return Op="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Op(t)}function Cp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ip(r.key),r)}}function Mp(t,e,n){return e=jp(e),function(t,e){if(e&&("object"==Op(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Bp()?Reflect.construct(e,n||[],jp(t).constructor):e.apply(t,n))}function Bp(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Bp=function(){return!!t})()}function jp(t){return jp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jp(t)}function Rp(t,e){return Rp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Rp(t,e)}function Ap(t,e,n){return(e=Ip(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ip(t){var e=function(t,e){if("object"!=Op(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Op(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Op(e)?e:e+""}var xp={configKey:"isMouseEvents",isDefault:!0,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!0,runInSlave:!0,runInLean:!0,runInUns:!1,isRunning:!1,instance:null},Np={mousemove:0,mousedown:1,mouseup:2,click:3,dblclick:4,mouseleave:5,mouseenter:6,wheel:7,mouseout:8,mouseover:9},Lp=["eventSequence","timestamp","eventType","isTrusted","elementHash","pageX","pageY","screenX","screenY","button","wheelDelta","clientX","clientY","eventDetail","buttonNew","relativeTime"],Dp=function(t){function e(t,n,r,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ap(a=Mp(this,e),"_lastButton",void 0),Ap(a,"_getMouseEvent",(function(t){var e=t.which;"mouseup"===t.type?a._lastButton=e:"click"===t.type&&0===e&&(e=a._lastButton);var n=Np[t.type];a._utils.isUndefinedNull(n)&&(n=-1);var r=t.deltaY||t.deltaX||t.deltaZ||t.wheelDelta||0,o=a.getTimestampFromEvent(t);a._dataQueue.addToQueue("mouse_events",[null,a._utils.StorageUtils.getAndUpdateEventSequenceNumber(),a.getEventTimestamp(t),n,xo[t.isTrusted],"mousemove"===t.type?0:a._elements.getElementHashFromEvent(t),a._maskingService.shouldMaskCoordinates()?Ho:a._roundCoordinate(t.pageX),a._maskingService.shouldMaskCoordinates()?Ho:a._roundCoordinate(t.pageY),a._maskingService.shouldMaskCoordinates()?Ho:a._roundCoordinate(t.screenX),a._maskingService.shouldMaskCoordinates()?Ho:a._roundCoordinate(t.screenY),null==e?-1:e,Math.round(r),a._maskingService.shouldMaskCoordinates()?Ho:a._roundCoordinate(t.clientX),a._maskingService.shouldMaskCoordinates()?Ho:a._roundCoordinate(t.clientY),t.detail||0,null===t.button||void 0===t.button?-1:t.button,o])})),a._utils=t,a._domUtils=n,a._elements=r,a._dataQueue=o,a._maskingService=i,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rp(t,e)}(e,t),function(t,e,n){return e&&Cp(t.prototype,e),n&&Cp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(t){var e=this;try{var n=t.getDocument();this._domUtils.addEventListener(n,"mousemove",this._getMouseEvent,!0),this._domUtils.addEventListener(n,"mousedown",this._getMouseEvent,!0),this._domUtils.addEventListener(n,"mouseup",this._getMouseEvent,!0),this._domUtils.addEventListener(n,"click",this._getMouseEvent,!0),this._domUtils.addEventListener(n,"dblclick",this._getMouseEvent,!0),this._isIE=!!n.documentMode||/edge/.test(window.navigator.userAgent.toLowerCase()),this._isIE?this._domUtils.onDocumentBody(t.Context,(function(){e._domUtils.addEventListener(n.body,"mouseleave",e._getMouseEvent),e._domUtils.addEventListener(n.body,"mouseenter",e._getMouseEvent)})):(this._domUtils.addEventListener(n,"mouseleave",this._getMouseEvent),this._domUtils.addEventListener(n,"mouseenter",this._getMouseEvent)),this._domUtils.addEventListener(n,"wheel",this._getMouseEvent,!0)}catch(t){ue.error("MouseEvents:startFeature failed. msg: ".concat(t.message),t)}}},{key:"stopFeature",value:function(t){try{var e=t.getDocument();this._domUtils.removeEventListener(e,"mousemove",this._getMouseEvent,!0),this._domUtils.removeEventListener(e,"mousedown",this._getMouseEvent,!0),this._domUtils.removeEventListener(e,"mouseup",this._getMouseEvent,!0),this._domUtils.removeEventListener(e,"click",this._getMouseEvent,!0),this._domUtils.removeEventListener(e,"dblclick",this._getMouseEvent,!0),this._isIE?(this._domUtils.removeEventListener(e.body,"mouseleave",this._getMouseEvent),this._domUtils.removeEventListener(e.body,"mouseenter",this._getMouseEvent)):(this._domUtils.removeEventListener(e,"mouseleave",this._getMouseEvent),this._domUtils.removeEventListener(e,"mouseenter",this._getMouseEvent)),this._domUtils.removeEventListener(e,"wheel",this._getMouseEvent,!0)}catch(t){ue.error("MouseEvents:stopFeature failed. msg: ".concat(t.message),t)}}},{key:"_roundCoordinate",value:function(t){return t?Math.round(t):-1}}],[{key:"getDefaultSettings",value:function(){return xp}}])}(Io);function Fp(t){return Fp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fp(t)}function Up(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gp(r.key),r)}}function Gp(t){var e=function(t,e){if("object"!=Fp(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Fp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fp(e)?e:e+""}function Hp(t,e,n){return e=Vp(e),function(t,e){if(e&&("object"==Fp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Wp()?Reflect.construct(e,n||[],Vp(t).constructor):e.apply(t,n))}function Wp(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Wp=function(){return!!t})()}function Vp(t){return Vp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vp(t)}function Qp(t,e){return Qp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qp(t,e)}var zp={configKey:"isTabsEvents",isDefault:!0,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},Kp=0,qp=1,Xp=2,Jp=["eventSequence","timestamp","type","id","href","referrer","currentTabsList"],Yp=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Hp(this,e))._utils=t,r._currState=null,r._dataQueue=n,r._tabData={id:"",openTabTS:0},r._onUnloadTabBinded=r._onUnloadTab.bind(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qp(t,e)}(e,t),function(t,e,n){return e&&Up(t.prototype,e),n&&Up(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){ue.info("Starting tab events feature"),this._initTabInfo(),window.addEventListener("beforeunload",this._onUnloadTabBinded)}},{key:"stopFeature",value:function(){ue.info("Stopping tab events feature"),window.removeEventListener("beforeunload",this._onUnloadTabBinded)}},{key:"_initTabInfo",value:function(){var t=this._utils.StorageUtils.getFromLocalStorage("cdTabList");t||(t=[]);var e=Kp;this._tabData=this._utils.StorageUtils.getFromSessionStorage("cdTabData")||this._tabData.id,this._tabData||(this._updateTabData(),e=qp);for(var n=-1,r=0,o=t.length;r<o;r++)if(t[r][0]===this._tabData.id){n=r;break}-1!==n&&n!==t.length||(t.push([this._tabData.id,this._tabData.openTabTS]),this._utils.StorageUtils.saveToLocalStorage("cdTabList",t),ue.debug("added tab to list. "+this._tabData.id+", tab index="+t.length));var i=this._utils.getDocUrl(),a=this._utils.StorageUtils.getAndUpdateEventSequenceNumber(),u=JSON.stringify(t);this._dataQueue.addToQueue("tab_events",this._utils.convertToArrayByMap(Jp,{eventSequence:a,timestamp:this._tabData.openTabTS,type:e,id:this._tabData.id||"",href:i||"",referrer:this._utils.clearTextFromNumbers(document.referrer),currentTabsList:u||""}))}},{key:"_onUnloadTab",value:function(){var t=this._utils.StorageUtils.getFromLocalStorage("cdTabList");t||(t=[]);var e=this.getEventTimestamp(),n=this._utils.StorageUtils.getAndUpdateEventSequenceNumber(),r=this._utils.getDocUrl(),o=Xp,i=JSON.stringify(t);ue.debug("removing tab from list. id:".concat(this._tabData.id,", timestamp:").concat(e)),this._dataQueue.addToQueue("tab_events",this._utils.convertToArrayByMap(Jp,{eventSequence:n,timestamp:e,type:o,id:this._tabData.id||"",href:r||"",referrer:this._utils.clearTextFromNumbers(document.referrer),currentTabsList:i||""}),!0,!0);for(var a=0,u=t.length;a<u;a++)if(t[a][0]===this._tabData.id){t.splice(a,1);break}this._utils.StorageUtils.saveToLocalStorage("cdTabList",t)}},{key:"_updateTabData",value:function(){this._tabData={},this._tabData={id:this._utils.generateUUID(),openTabTS:this.getEventTimestamp()},ue.debug("initialize tab data: id:".concat(this._tabData.id,", timestamp:").concat(this._tabData.openTabTS)),this._utils.StorageUtils.saveToSessionStorage("cdTabData",this._tabData)}}],[{key:"getDefaultSettings",value:function(){return zp}}])}(Io);function Zp(t){return Zp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zp(t)}function $p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,iy(r.key),r)}}function ty(t,e,n){return e=ny(e),function(t,e){if(e&&("object"==Zp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ey()?Reflect.construct(e,n||[],ny(t).constructor):e.apply(t,n))}function ey(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ey=function(){return!!t})()}function ny(t){return ny=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ny(t)}function ry(t,e){return ry=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ry(t,e)}function oy(t,e,n){return(e=iy(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iy(t){var e=function(t,e){if("object"!=Zp(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Zp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Zp(e)?e:e+""}var ay={configKey:"isLocationEvents",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},uy=["eventSequence","timestamp","longitude","latitude","accuracy","speed","provider"],sy=function(t){function e(t,n,r){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window.navigator;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),oy(o=ty(this,e),"_subscribeForLocationEvents",(function(){o._unsubscribeFromLocationEvents(),o._watcherID=o._navigator.geolocation.watchPosition(o._onGeoLocationPositionEvent,o._onGeoLocationPositionError),o._clearLocationEventsTimeout(),o._locationEventsTimeoutID=setTimeout((function(){o._unsubscribeFromLocationEvents()}))})),oy(o,"_unsubscribeFromLocationEvents",(function(){o._clearLocationEventsTimeout(),o._watcherID&&(o._navigator.geolocation.clearWatch(o._watcherID),o._watcherID=null)})),oy(o,"_onGeoLocationPositionEvent",(function(t){o._sendData(t)})),oy(o,"_onGeoLocationPositionError",(function(t){ue.warn("Failed getting geolocation with code ".concat(t.code,". ").concat(t.message))})),o._configurationRepository=r,o._locationEventsTimeoutMsec=o._configurationRepository.get(L),o._utils=n,o._dataQ=t,o._navigator=i,o._watcherID=null,o._locationEventsTimeoutID=null,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ry(t,e)}(e,t),function(t,e,n){return e&&$p(t.prototype,e),n&&$p(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){this._subscribeForLocationIfPermissionGranted()}},{key:"stopFeature",value:function(){this._unsubscribeFromLocationEvents()}},{key:"updateFeatureConfig",value:function(){try{this._configurationRepository.get(L)!==this._locationEventsTimeoutMsec&&(this._locationEventsTimeoutMsec=this._configurationRepository.get(L))}catch(t){ue.error("LocationEvents: updateFeatureConfig failed, msg: ".concat(t.message),t)}}},{key:"_subscribeForLocationIfPermissionGranted",value:function(){var t=this;this._navigator.permissions&&this._navigator.permissions.query&&this._navigator.permissions.query({name:"geolocation"}).then((function(e){"granted"===e.state?t._subscribeForLocationEvents():ue.info("location permission is denied. Location data will not be collected")})).catch((function(t){ue.error("Failed querying for geolocation permission. ".concat(t.message))}))}},{key:"_clearLocationEventsTimeout",value:function(){this._locationEventsTimeoutID&&clearTimeout(this._locationEventsTimeoutID),this._locationEventsTimeoutID=null}},{key:"_sendData",value:function(t){var e=t.coords,n=this._utils.StorageUtils.getAndUpdateEventSequenceNumber(),r=this.getEventTimestamp();this._dataQ.addToQueue("location_events",this._utils.convertToArrayByMap(uy,{eventSequence:n,timestamp:r,longitude:e.longitude||-1,latitude:e.latitude||-1,accuracy:e.accuracy||-1,speed:e.speed||-1,provider:""}))}}],[{key:"getDefaultSettings",value:function(){return ay}}])}(Io);function cy(t){return cy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cy(t)}function ly(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,by(r.key),r)}}function fy(t,e,n){return e=yy(e),function(t,e){if(e&&("object"==cy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,dy()?Reflect.construct(e,n||[],yy(t).constructor):e.apply(t,n))}function dy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(dy=function(){return!!t})()}function hy(t,e,n,r){var o=py(yy(1&r?t.prototype:t),e,n);return 2&r&&"function"==typeof o?function(t){return o.apply(n,t)}:o}function py(){return py="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=yy(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},py.apply(null,arguments)}function yy(t){return yy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yy(t)}function my(t,e){return my=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},my(t,e)}function vy(t,e,n){return(e=by(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function by(t){var e=function(t,e){if("object"!=cy(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=cy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cy(e)?e:e+""}var gy=function(t){function e(t,n,r,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),vy(a=fy(this,e),"_collectEventElement",(function(t){var e=a._utils.StorageUtils.getAndUpdateEventSequenceNumber(),n=a.getEventTimestamp(),r=a.getTimestampFromEvent(t),o=a._maskingService.maskText(t.elementValue,t.elementId),i=Nf[t.eventType];o&&o.length>a._maxElemValLength&&(o=""),a._dataQueue.addToQueue("element_events",a._utils.convertToArrayByMap(Lf,{eventSequence:e,timestamp:n,eventType:i,isTrusted:-1,elementHash:t.hashCode,length:o.length,elementValues:o,selected:-1,hashedValue:"",relativeTime:r}))})),vy(a,"_collectElement",(function(t){if(!a._utils.isUndefinedNull(t.hashCode)&&!a._elementWMap.has(t.hashCode)){a._elementWMap.add(t.hashCode);var e=a._maskingService.maskAbsoluteIfRequired(t.elementId,t.elementId);a._dataQueue.addToQueue("elements",[a._contextMgr.contextHash,t.hashCode,"",e||"","",t.widgetType||"",t.dxPosition||0,t.dyPosition||0,t.widthElement||0,t.heightElement||0,"","","","","","",0,t.timeStamp,"","",""])}})),a._msgBus=t,a._dataQueue=n,a._utils=r,a._contextMgr=o,a._maskingService=i,a._elementWMap=new Set,a._maxElemValLength=200,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&my(t,e)}(e,t),function(t,e,n){return e&&ly(t.prototype,e),n&&ly(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){hy(e,"startFeature",this,3)([]),this._msgBus.subscribe(To.ElementEventsEvent,this._collectEventElement),this._msgBus.subscribe(To.ElementsEvent,this._collectElement)}},{key:"stopFeature",value:function(){this._msgBus.unsubscribe(To.ElementEventsEvent,this._collectEventElement),this._msgBus.unsubscribe(To.ElementsEvent,this._collectElement),hy(e,"stopFeature",this,3)([])}}])}(Io);function _y(t){return _y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_y(t)}function Sy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Cy(r.key),r)}}function wy(t,e,n){return e=Ty(e),function(t,e){if(e&&("object"==_y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ey()?Reflect.construct(e,n||[],Ty(t).constructor):e.apply(t,n))}function Ey(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ey=function(){return!!t})()}function ky(t,e,n,r){var o=Py(Ty(1&r?t.prototype:t),e,n);return 2&r&&"function"==typeof o?function(t){return o.apply(n,t)}:o}function Py(){return Py="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Ty(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Py.apply(null,arguments)}function Ty(t){return Ty=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ty(t)}function Oy(t,e){return Oy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Oy(t,e)}function Cy(t){var e=function(t,e){if("object"!=_y(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=_y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_y(e)?e:e+""}var My=function(t){function e(t,n,r,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){(e=Cy(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(i=wy(this,e),"_onKeyEvent",(function(t){var e=i._utils.StorageUtils.getAndUpdateEventSequenceNumber(),n=i.getEventTimestamp(),r=t.char,o=i._maskingService.maskKey(r,"",t.elementId),a=o.key.length>1?"":o.key,u=i.getTimestampFromEvent(t);i._dataQueue.addToQueue("key_events",i._utils.convertToArrayByMap(vi,{eventSequence:e,timestamp:n,eventType:2,isTrusted:-1,elementHash:t.hashCode,charCode:o.charCode,character:a,keyComboType:-1,isCtrl:!1,isShift:!1,isAlt:!1,isMetaKey:!1,keyLocation:0,code:o.code||"",key:o.key||"",isRepeat:!1,keyRegion:"-1",relativeTime:u,isSameKey:-1}))})),i._msgBus=t,i._dataQueue=n,i._utils=r,i._maskingService=o,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oy(t,e)}(e,t),function(t,e,n){return e&&Sy(t.prototype,e),n&&Sy(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){ky(e,"startFeature",this,3)([]),this._msgBus.subscribe(To.KeyEvent,this._onKeyEvent)}},{key:"stopFeature",value:function(){this._msgBus.unsubscribe(To.KeyEvent,this._onKeyEvent),ky(e,"stopFeature",this,3)([])}}])}(Io);function By(t){return By="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},By(t)}function jy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Dy(r.key),r)}}function Ry(t,e,n){return e=Ny(e),function(t,e){if(e&&("object"==By(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ay()?Reflect.construct(e,n||[],Ny(t).constructor):e.apply(t,n))}function Ay(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ay=function(){return!!t})()}function Iy(t,e,n,r){var o=xy(Ny(1&r?t.prototype:t),e,n);return 2&r&&"function"==typeof o?function(t){return o.apply(n,t)}:o}function xy(){return xy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Ny(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},xy.apply(null,arguments)}function Ny(t){return Ny=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ny(t)}function Ly(t,e){return Ly=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ly(t,e)}function Dy(t){var e=function(t,e){if("object"!=By(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=By(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==By(e)?e:e+""}var Fy={onTapDown:0,onTapUp:2},Uy=function(t){function e(t,n,r,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){(e=Dy(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(i=Ry(this,e),"_onTouchEvent",(function(t){var e=Fy[t.touchState];e!==Fy.onTapDown&&e!==Fy.onTapUp||i._msgBus.publish(Lr,{action:e});var n=i.getEventTimestamp(),r=i._utils.StorageUtils.getAndUpdateEventSequenceNumber(),o=i.getTimestampFromEvent(t);i._utils.isUndefinedNull(e)&&(e=-1),i._dataQueue.addToQueue("touch_events",i._utils.convertToArrayByMap(ti,{eventSequence:r,timestamp:n,eventType:e,isTrusted:-1,elementHash:t.hashCode,clientX:i._maskingService.shouldMaskCoordinates()?Ho:t.x?Math.round(t.x):0,clientY:i._maskingService.shouldMaskCoordinates()?Ho:t.y?Math.round(t.y):0,touchIndex:t.pointer,touchSizeMajor:t.radiusMajor?2*t.radiusMajor:0,touchSizeMinor:t.radiusMinor?2*t.radiusMinor:0,pageX:0,pageY:0,screenX:0,screenY:0,relativeTime:o,touchPressure:t.pressure||-1}))})),i._msgBus=t,i._dataQueue=n,i._utils=r,i._maskingService=o,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ly(t,e)}(e,t),function(t,e,n){return e&&jy(t.prototype,e),n&&jy(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){Iy(e,"startFeature",this,3)([]),this._msgBus.subscribe(To.TouchEvent,this._onTouchEvent)}},{key:"stopFeature",value:function(){this._msgBus.unsubscribe(To.TouchEvent,this._onTouchEvent),Iy(e,"stopFeature",this,3)([])}}])}(Io);function Gy(t){return Gy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gy(t)}function Hy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xy(r.key),r)}}function Wy(t,e,n){return e=Ky(e),function(t,e){if(e&&("object"==Gy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Vy()?Reflect.construct(e,n||[],Ky(t).constructor):e.apply(t,n))}function Vy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Vy=function(){return!!t})()}function Qy(t,e,n,r){var o=zy(Ky(1&r?t.prototype:t),e,n);return 2&r&&"function"==typeof o?function(t){return o.apply(n,t)}:o}function zy(){return zy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Ky(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},zy.apply(null,arguments)}function Ky(t){return Ky=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ky(t)}function qy(t,e){return qy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qy(t,e)}function Xy(t){var e=function(t,e){if("object"!=Gy(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Gy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Gy(e)?e:e+""}var Jy={mousemove:0,onTapDown:1,onTapUp:2},Yy=function(t){function e(t,n,r,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){(e=Xy(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(a=Wy(this,e),"_onMouseEvent",(function(t){var e=Jy[t.type],n=a.getTimestampFromEvent(t);a._dataQueue.addToQueue("mouse_events",a._utils.convertToArrayByMap(Lp,{eventSequence:a._utils.StorageUtils.getAndUpdateEventSequenceNumber(),timestamp:a.getEventTimestamp(),eventType:e,isTrusted:"mousemove"===t.type?xo[t.isTrusted]:-1,elementHash:"mousemove"===t.type?0:t.hashCode,pageX:a._resolveCoordinate(t.type,t.pageX),pageY:a._resolveCoordinate(t.type,t.pageY),screenX:a._maskingService.shouldMaskCoordinates()?Ho:a._roundCoordinate(t.screenX),screenY:a._maskingService.shouldMaskCoordinates()?Ho:a._roundCoordinate(t.screenY),button:0,wheelDelta:0,clientX:a._resolveCoordinate(t.type,t.clientX),clientY:a._resolveCoordinate(t.type,t.clientY),eventDetail:"mousemove"===t.type&&t.detail||0,buttonNew:0,relativeTime:n}))})),a._msgBus=t,a._dataQueue=n,a._utils=r,a._maskingService=o,a._domUtils=i,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qy(t,e)}(e,t),function(t,e,n){return e&&Hy(t.prototype,e),n&&Hy(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(t){Qy(e,"startFeature",this,3)([]);try{var n=t.getDocument();this._domUtils.addEventListener(n,"mousemove",this._onMouseEvent,!0),this._msgBus.subscribe(To.MouseEvent,this._onMouseEvent)}catch(t){ue.error("MouseEvents:startFeature failed. msg: ".concat(t.message),t)}}},{key:"stopFeature",value:function(t){try{var n=t.getDocument();this._domUtils.removeEventListener(n,"mousemove",this._onMouseEvent,!0),this._msgBus.unsubscribe(To.MouseEvent,this._onMouseEvent)}catch(t){ue.error("MouseEvents:stopFeature failed. msg: ".concat(t.message),t)}Qy(e,"stopFeature",this,3)([])}},{key:"_resolveCoordinate",value:function(t,e){return"mousemove"===t?this._maskingService.shouldMaskCoordinates()?Ho:this._roundCoordinate(e):0}},{key:"_roundCoordinate",value:function(t){return t?Math.round(t):-1}}])}(Io);function Zy(t){return Zy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zy(t)}function $y(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return tm(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,u=0,s=t,d.n=n,a}};function h(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=d.p,p=i[2];n>3?(o=p===r)&&(u=i[4]||3,s=i[5]===t?i[3]:i[5],i[4]=3,i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,d.v=r,d.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,d.n=p,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),u=l,s=p;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(d.n=-1),h(u,s)):d.n=s:d.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(tm(e={},r,(function(){return this})),e),f=c.prototype=u.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,tm(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,tm(f,"constructor",c),tm(c,"constructor",s),s.displayName="GeneratorFunction",tm(c,o,"GeneratorFunction"),tm(f),tm(f,o,"Generator"),tm(f,r,(function(){return this})),tm(f,"toString",(function(){return"[object Generator]"})),($y=function(){return{w:i,m:d}})()}function tm(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}tm=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){tm(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},tm(t,e,n,r)}function em(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function nm(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){em(i,r,o,a,u,"next",t)}function u(t){em(i,r,o,a,u,"throw",t)}a(void 0)}))}}function rm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,om(r.key),r)}}function om(t){var e=function(t,e){if("object"!=Zy(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Zy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Zy(e)?e:e+""}function im(t,e,n){return e=um(e),function(t,e){if(e&&("object"==Zy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,am()?Reflect.construct(e,n||[],um(t).constructor):e.apply(t,n))}function am(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(am=function(){return!!t})()}function um(t){return um=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},um(t)}function sm(t,e){return sm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},sm(t,e)}var cm={configKey:"isBatteryStatusFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!1,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},lm=["eventSequence","timestamp","chargeLevel","isCharging","powerSource"],fm=function(t){function e(t,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.navigator;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=im(this,e))._dataQueue=t,r._utils=n,r._storageUtils=n.StorageUtils,r._navigator=o,r._battery=null,r._onLevelChangeEventFunc=r._onLevelChangeEventFunc.bind(r),r._onChargingChangeEventFunc=r._onChargingChangeEventFunc.bind(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sm(t,e)}(e,t),function(t,e,n){return e&&rm(t.prototype,e),n&&rm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:(r=nm($y().m((function t(){var e;return $y().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,this.getBatteryManager();case 1:return this._battery=t.v,this._setupEventListeners(),t.n=2,this._sendData();case 2:t.n=4;break;case 3:t.p=3,e=t.v,ue.error("Failed to start battery status collector: ".concat(e.message||e));case 4:return t.a(2)}}),t,this,[[0,3]])}))),function(){return r.apply(this,arguments)})},{key:"stopFeature",value:function(){this._cleanupEventListeners(),this._battery=null}},{key:"_setupEventListeners",value:function(){this._battery&&(this._battery.addEventListener("levelchange",this._onLevelChangeEventFunc),this._battery.addEventListener("chargingchange",this._onChargingChangeEventFunc))}},{key:"_cleanupEventListeners",value:function(){this._battery&&(this._battery.removeEventListener("levelchange",this._onLevelChangeEventFunc),this._battery.removeEventListener("chargingchange",this._onChargingChangeEventFunc))}},{key:"getBatteryManager",value:(n=nm($y().m((function t(){var e;return $y().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,this._navigator.getBattery();case 1:return t.a(2,t.v);case 2:throw t.p=2,e=t.v,new Error("Failed to get battery manager: ".concat(e.message||e));case 3:return t.a(2)}}),t,this,[[0,2]])}))),function(){return n.apply(this,arguments)})},{key:"_onLevelChangeEventFunc",value:function(t){this._sendData(t.currentTarget)}},{key:"_onChargingChangeEventFunc",value:function(t){this._sendData(t.currentTarget)}},{key:"_sendData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._battery;if(t){var e=this._storageUtils.getAndUpdateEventSequenceNumber(),n=this._utils.dateNow();this._dataQueue.addToQueue("battery_status",this._utils.convertToArrayByMap(lm,{eventSequence:e,timestamp:n,chargeLevel:t.level,isCharging:t.charging,powerSource:0}))}}}],[{key:"getDefaultSettings",value:function(){return cm}}]);var n,r}(Io);function dm(t){return dm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dm(t)}function hm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pm(r.key),r)}}function pm(t){var e=function(t,e){if("object"!=dm(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=dm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dm(e)?e:e+""}var ym=function(){return function(t,e,n){return e&&hm(t.prototype,e),n&&hm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),[{key:"validateParams",value:function(){throw new Error("_validateParams should be overridden")}},{key:"buildQueueMessage",value:function(){throw new Error("buildQueueMessage should be overridden")}},{key:"validateMessage",value:function(){throw new Error("_validateMessage should be overridden")}},{key:"getName",value:function(){throw new Error("_getName should be overridden")}}])}();function mm(t){return mm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mm(t)}function vm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bm(r.key),r)}}function bm(t){var e=function(t,e){if("object"!=mm(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=mm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mm(e)?e:e+""}function gm(t,e,n){return e=Sm(e),function(t,e){if(e&&("object"==mm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,_m()?Reflect.construct(e,n||[],Sm(t).constructor):e.apply(t,n))}function _m(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_m=function(){return!!t})()}function Sm(t){return Sm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Sm(t)}function wm(t,e){return wm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wm(t,e)}var Em=function(t){function e(t,n,r,o,i,a,u){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=gm(this,e)).validateParams(t,n,r,o,i,a,u),s.isChrome=t,s.isFirefox=n,s.isEdge=r,s.isIE=o,s.isSafari=i,s.isOpera=a,s.isBlink=u,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wm(t,e)}(e,t),function(t,e,n){return e&&vm(t.prototype,e),n&&vm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t,e,n,r,o,i,a){"boolean"==typeof t&&"boolean"==typeof e&&"boolean"==typeof n&&"boolean"==typeof r&&"boolean"==typeof o&&"boolean"==typeof i&&"boolean"==typeof a||ue.warn("wrong type in Per, BrowserDetectContract, parameters. isChrome : {expected: boolean, received: ".concat(mm(t),"},\n            isFirefox : {expected: boolean, received: ").concat(mm(e),"},isEdge : {expected: boolean, received: ").concat(mm(n),"},isIE : {expected: boolean, received: ").concat(mm(r),"},\n            isSafari : {expected: boolean, received: ").concat(mm(o),"},isOpera : {expected: boolean, received: ").concat(mm(i),"} ,isBlink : {expected: boolean, received: ").concat(mm(a),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),[this.isChrome,this.isFirefox,this.isEdge,this.isIE,this.isSafari,this.isOpera,this.isBlink]];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&Array.isArray(t[1])&&7===t[1].length||ue.warn("BrowserDetect - Contract verification failed")}},{key:"getName",value:function(){return"browser_spoofing"}}])}(ym);function km(t){return km="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},km(t)}function Pm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Tm(r.key),r)}}function Tm(t){var e=function(t,e){if("object"!=km(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=km(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==km(e)?e:e+""}function Om(t,e,n){return e=Mm(e),function(t,e){if(e&&("object"==km(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Cm()?Reflect.construct(e,n||[],Mm(t).constructor):e.apply(t,n))}function Cm(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Cm=function(){return!!t})()}function Mm(t){return Mm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Mm(t)}function Bm(t,e){return Bm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Bm(t,e)}var jm={configKey:"isBrowserDetect",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!0,isFrameRelated:!1,runInUns:!0,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},Rm=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Om(this,e))._dataQ=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bm(t,e)}(e,t),function(t,e,n){return e&&Pm(t.prototype,e),n&&Pm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){var t=!1,e=!1,n=!1,r=!1,o=!1,i=!1,a=!1;if(this.doesUserAagentDataExists())navigator.userAgentData.brands.forEach((function(r){"Google Chrome"===r.brand&&(t=!0),"Opera"===r.brand&&(e=!0),"Microsoft Edge"===r.brand&&(i=!0),"Firefox"===r.brand&&(n=!0)})),navigator.userAgentData.platform&&(r="macOS"===navigator.userAgentData.platform&&!t&&!i&&!e&&/Safari/.test(navigator.userAgent)),a=t||e;else{var u=navigator.userAgent;e=/OPR|Opera/.test(u),n=/Firefox/.test(u),r=/Safari/.test(u)&&/Apple Computer/.test(navigator.vendor),o=/MSIE|Trident/.test(u),i=/Edg/.test(u),a=((t=/Chrome/.test(u)&&!i&&!e&&/Google Inc/.test(navigator.vendor))||e)&&!!window.CSS}var s=new Em(t,n,i,o,r,e,a).buildQueueMessage();this._dataQ.addToQueue("static_fields",s,!1)}},{key:"doesUserAagentDataExists",value:function(){return navigator.userAgentData&&navigator.userAgentData.brands&&navigator.userAgentData.brands.length>0}}],[{key:"getDefaultSettings",value:function(){return jm}}])}(Io);function Am(t){return Am="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Am(t)}function Im(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xm(r.key),r)}}function xm(t){var e=function(t,e){if("object"!=Am(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Am(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Am(e)?e:e+""}function Nm(t,e,n){return e=Dm(e),function(t,e){if(e&&("object"==Am(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Lm()?Reflect.construct(e,n||[],Dm(t).constructor):e.apply(t,n))}function Lm(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Lm=function(){return!!t})()}function Dm(t){return Dm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Dm(t)}function Fm(t,e){return Fm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Fm(t,e)}var Um=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Nm(this,e)).validateParams(t),n.scriptVersion=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fm(t,e)}(e,t),function(t,e,n){return e&&Im(t.prototype,e),n&&Im(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"string"==typeof t||ue.warn(" wrong type in VersionClient, BrowserProps parameters. scriptVersion : {expected: string, received: ".concat(Am(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.scriptVersion];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"string"==typeof t[1]||ue.warn("version_client, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"version_client"}}])}(ym);function Gm(t){return Gm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gm(t)}function Hm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Wm(r.key),r)}}function Wm(t){var e=function(t,e){if("object"!=Gm(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Gm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Gm(e)?e:e+""}function Vm(t,e,n){return e=zm(e),function(t,e){if(e&&("object"==Gm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Qm()?Reflect.construct(e,n||[],zm(t).constructor):e.apply(t,n))}function Qm(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Qm=function(){return!!t})()}function zm(t){return zm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zm(t)}function Km(t,e){return Km=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Km(t,e)}var qm=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Vm(this,e)).validateParams(t),n.source=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Km(t,e)}(e,t),function(t,e,n){return e&&Hm(t.prototype,e),n&&Hm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"string"==typeof t||ue.warn(" wrong type in DeviceSource, BrowserProps parameters. source : {expected: string, received: ".concat(Gm(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.source];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"string"==typeof t[1]||ue.warn("device_source, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"device_source"}}])}(ym);function Xm(t){return Xm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xm(t)}function Jm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ym(r.key),r)}}function Ym(t){var e=function(t,e){if("object"!=Xm(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Xm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Xm(e)?e:e+""}function Zm(t,e,n){return e=tv(e),function(t,e){if(e&&("object"==Xm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$m()?Reflect.construct(e,n||[],tv(t).constructor):e.apply(t,n))}function $m(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($m=function(){return!!t})()}function tv(t){return tv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tv(t)}function ev(t,e){return ev=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ev(t,e)}var nv=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Zm(this,e)).validateParams(t),n.platform=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ev(t,e)}(e,t),function(t,e,n){return e&&Jm(t.prototype,e),n&&Jm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"string"==typeof t||ue.warn(" wrong type in OS, BrowserProps parameters. platform : {expected: string, received: ".concat(Xm(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.platform];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"string"==typeof t[1]||ue.warn("os, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"os"}}])}(ym);function rv(t){return rv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rv(t)}function ov(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,iv(r.key),r)}}function iv(t){var e=function(t,e){if("object"!=rv(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=rv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rv(e)?e:e+""}function av(t,e,n){return e=sv(e),function(t,e){if(e&&("object"==rv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,uv()?Reflect.construct(e,n||[],sv(t).constructor):e.apply(t,n))}function uv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(uv=function(){return!!t})()}function sv(t){return sv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sv(t)}function cv(t,e){return cv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},cv(t,e)}var lv=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=av(this,e)).validateParams(t),n.version=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cv(t,e)}(e,t),function(t,e,n){return e&&ov(t.prototype,e),n&&ov(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"number"==typeof t||null===t||ue.warn(" wrong type in OSVersion, BrowserProps parameters. version : {expected: number, received: ".concat(rv(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.version];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&("number"==typeof t[1]||null===t[1])||ue.warn("os_version, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"os_version"}}])}(ym);function fv(t){return fv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fv(t)}function dv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hv(r.key),r)}}function hv(t){var e=function(t,e){if("object"!=fv(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=fv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fv(e)?e:e+""}function pv(t,e,n){return e=mv(e),function(t,e){if(e&&("object"==fv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,yv()?Reflect.construct(e,n||[],mv(t).constructor):e.apply(t,n))}function yv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(yv=function(){return!!t})()}function mv(t){return mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mv(t)}function vv(t,e){return vv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vv(t,e)}var bv=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=pv(this,e)).validateParams(t),n.osName=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vv(t,e)}(e,t),function(t,e,n){return e&&dv(t.prototype,e),n&&dv(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"string"==typeof t||ue.warn(" wrong type in OSFamily, BrowserProps parameters. osName : {expected: string, received: ".concat(fv(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.osName];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"string"==typeof t[1]||ue.warn("os_family, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"os_family"}}])}(ym);function gv(t){return gv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gv(t)}function _v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Sv(r.key),r)}}function Sv(t){var e=function(t,e){if("object"!=gv(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=gv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gv(e)?e:e+""}function wv(t,e,n){return e=kv(e),function(t,e){if(e&&("object"==gv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ev()?Reflect.construct(e,n||[],kv(t).constructor):e.apply(t,n))}function Ev(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ev=function(){return!!t})()}function kv(t){return kv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kv(t)}function Pv(t,e){return Pv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Pv(t,e)}var Tv=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=wv(this,e)).validateParams(t,n),r.pointer=t,r.hover=n,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pv(t,e)}(e,t),function(t,e,n){return e&&_v(t.prototype,e),n&&_v(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t,e){!("number"!=typeof t||1!==t&&2!==t&&3!==t&&4!==t&&5!==t||"number"!=typeof e||1!==e&&2!==e&&3!==e&&4!==e&&5!==e)||ue.warn(" wrong type in InputMech, BrowserProps parameters. pointer : {expected: number, received: ".concat(gv(t),"}, hover : {expected: number, received: ").concat(gv(e),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),[this.pointer,this.hover]];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&Array.isArray(t[1])&&2===t[1].length||ue.warn("input_mech, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"input_mech"}}])}(ym);function Ov(t){return Ov="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ov(t)}function Cv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Mv(r.key),r)}}function Mv(t){var e=function(t,e){if("object"!=Ov(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ov(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ov(e)?e:e+""}function Bv(t,e,n){return e=Rv(e),function(t,e){if(e&&("object"==Ov(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,jv()?Reflect.construct(e,n||[],Rv(t).constructor):e.apply(t,n))}function jv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(jv=function(){return!!t})()}function Rv(t){return Rv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rv(t)}function Av(t,e){return Av=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Av(t,e)}var Iv=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Bv(this,e)).validateParams(t),n.hardwareConcurrency=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Av(t,e)}(e,t),function(t,e,n){return e&&Cv(t.prototype,e),n&&Cv(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"number"==typeof t||ue.warn("wrong type in cores, BrowserProps parameters. hardwareConcurrency : {expected: number, received: ".concat(Ov(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.hardwareConcurrency];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"number"==typeof t[1]||ue.warn("cores,BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"cores"}}])}(ym);function xv(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Nv(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nv(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Nv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Lv(t){return Lv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lv(t)}function Dv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Fv(r.key),r)}}function Fv(t){var e=function(t,e){if("object"!=Lv(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Lv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Lv(e)?e:e+""}function Uv(t,e,n){return e=Hv(e),function(t,e){if(e&&("object"==Lv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Gv()?Reflect.construct(e,n||[],Hv(t).constructor):e.apply(t,n))}function Gv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Gv=function(){return!!t})()}function Hv(t){return Hv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Hv(t)}function Wv(t,e){return Wv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Wv(t,e)}var Vv=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Uv(this,e)).validateParams(t),n.plugins=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wv(t,e)}(e,t),function(t,e,n){return e&&Dv(t.prototype,e),n&&Dv(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){Array.isArray(t)&&this._eachPluginIsValid(t)||ue.warn(" wrong type in plugins, BrowserProps parameters. plugins : {expected: [[...string]], received: ".concat(Lv(t),"}"))}},{key:"_eachPluginIsValid",value:function(t){var e,n=!0,r=!0,o=!0,i=xv(t);try{for(i.s();!(e=i.n()).done;){var a=e.value;if(Array.isArray(a)){4!==a.length&&(o=!1);var u,s=xv(a);try{for(s.s();!(u=s.n()).done;){"string"!=typeof u.value&&(r=!1)}}catch(t){s.e(t)}finally{s.f()}}else n=!1}}catch(t){i.e(t)}finally{i.f()}return n&&o&&r}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.plugins];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&Array.isArray(t[1])||ue.warn("plugins, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"plugins"}}])}(ym);function Qv(t){return Qv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qv(t)}function zv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Kv(r.key),r)}}function Kv(t){var e=function(t,e){if("object"!=Qv(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Qv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qv(e)?e:e+""}function qv(t,e,n){return e=Jv(e),function(t,e){if(e&&("object"==Qv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Xv()?Reflect.construct(e,n||[],Jv(t).constructor):e.apply(t,n))}function Xv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Xv=function(){return!!t})()}function Jv(t){return Jv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jv(t)}function Yv(t,e){return Yv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Yv(t,e)}var Zv=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=qv(this,e)).validateParams(t),n.userAgent=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yv(t,e)}(e,t),function(t,e,n){return e&&zv(t.prototype,e),n&&zv(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"string"==typeof t||ue.warn("wrong type in JsUa, BrowserProps parameters. userAgent : {expected: string, received: ".concat(Qv(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.userAgent];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"string"==typeof t[1]||ue.warn("js_ua, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"js_ua"}}])}(ym);function $v(t){return $v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$v(t)}function tb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,eb(r.key),r)}}function eb(t){var e=function(t,e){if("object"!=$v(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=$v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$v(e)?e:e+""}function nb(t,e,n){return e=ob(e),function(t,e){if(e&&("object"==$v(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,rb()?Reflect.construct(e,n||[],ob(t).constructor):e.apply(t,n))}function rb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(rb=function(){return!!t})()}function ob(t){return ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ob(t)}function ib(t,e){return ib=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ib(t,e)}var ab=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=nb(this,e)).validateParams(t),n.tz=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ib(t,e)}(e,t),function(t,e,n){return e&&tb(t.prototype,e),n&&tb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"number"==typeof t||ue.warn("wrong type in TimeZone, BrowserProps parameters. tz : {expected: string, received: ".concat($v(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.tz];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"number"==typeof t[1]||ue.warn("time_zone, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"time_zone"}}])}(ym);function ub(t){return ub="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ub(t)}function sb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cb(r.key),r)}}function cb(t){var e=function(t,e){if("object"!=ub(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ub(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ub(e)?e:e+""}function lb(t,e,n){return e=db(e),function(t,e){if(e&&("object"==ub(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,fb()?Reflect.construct(e,n||[],db(t).constructor):e.apply(t,n))}function fb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(fb=function(){return!!t})()}function db(t){return db=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},db(t)}function hb(t,e){return hb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},hb(t,e)}var pb=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=lb(this,e)).validateParams(t),n.isCookie=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hb(t,e)}(e,t),function(t,e,n){return e&&sb(t.prototype,e),n&&sb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"boolean"==typeof t||ue.warn("wrong type in CookieEnabled, BrowserProps parameters. isCookie : {expected: boolean, received: ".concat(ub(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.isCookie];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"boolean"==typeof t[1]||ue.warn("CookieEnabled,BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"cookie_enabled"}}])}(ym);function yb(t){return yb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yb(t)}function mb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vb(r.key),r)}}function vb(t){var e=function(t,e){if("object"!=yb(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=yb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yb(e)?e:e+""}function bb(t,e,n){return e=_b(e),function(t,e){if(e&&("object"==yb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,gb()?Reflect.construct(e,n||[],_b(t).constructor):e.apply(t,n))}function gb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(gb=function(){return!!t})()}function _b(t){return _b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_b(t)}function Sb(t,e){return Sb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Sb(t,e)}var wb=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=bb(this,e)).validateParams(t),n.memory=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sb(t,e)}(e,t),function(t,e,n){return e&&mb(t.prototype,e),n&&mb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"number"==typeof t&&(.25===t||.5===t||1===t||2===t||4===t||8===t||0===t)||ue.warn("wrong type in DeviceMemoryBrowser, BrowserProps parameters. memory : {expected: number in {0.25, 0.5, 1, 2, 4, 8, 0} received: type:".concat(yb(t)," value:").concat(t,"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.memory];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"number"==typeof t[1]||ue.warn("device_memory, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"device_memory"}}])}(ym);function Eb(t){return Eb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eb(t)}function kb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pb(r.key),r)}}function Pb(t){var e=function(t,e){if("object"!=Eb(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Eb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Eb(e)?e:e+""}function Tb(t,e,n){return e=Cb(e),function(t,e){if(e&&("object"==Eb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ob()?Reflect.construct(e,n||[],Cb(t).constructor):e.apply(t,n))}function Ob(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ob=function(){return!!t})()}function Cb(t){return Cb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Cb(t)}function Mb(t,e){return Mb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Mb(t,e)}var Bb=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Tb(this,e)).validateParams(t),n.language=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mb(t,e)}(e,t),function(t,e,n){return e&&kb(t.prototype,e),n&&kb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"string"==typeof t||ue.warn(" wrong type in Lang, BrowserProps parameters. language : {expected: string, received: ".concat(Eb(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.language];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"string"==typeof t[1]||ue.warn("main_lang, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"main_lang"}}])}(ym);function jb(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Rb(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rb(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Rb(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Ab(t){return Ab="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ab(t)}function Ib(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xb(r.key),r)}}function xb(t){var e=function(t,e){if("object"!=Ab(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ab(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ab(e)?e:e+""}function Nb(t,e,n){return e=Db(e),function(t,e){if(e&&("object"==Ab(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Lb()?Reflect.construct(e,n||[],Db(t).constructor):e.apply(t,n))}function Lb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Lb=function(){return!!t})()}function Db(t){return Db=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Db(t)}function Fb(t,e){return Fb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Fb(t,e)}var Ub=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Nb(this,e)).validateParams(t),n.languagesList=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fb(t,e)}(e,t),function(t,e,n){return e&&Ib(t.prototype,e),n&&Ib(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){Array.isArray(t)&&this._eachLangIsValid(t)||ue.warn(" wrong type in LanguagesList, BrowserProps parameters. languagesList : {expected: [...string], received: ".concat(Ab(t),"}"))}},{key:"_eachLangIsValid",value:function(t){var e,n=!0,r=jb(t);try{for(r.s();!(e=r.n()).done;){"string"!=typeof e.value&&(n=!1)}}catch(t){r.e(t)}finally{r.f()}return n}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.languagesList];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&Array.isArray(t[1])||ue.warn("languages, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"languages"}}])}(ym);function Gb(t){return Gb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gb(t)}function Hb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Wb(r.key),r)}}function Wb(t){var e=function(t,e){if("object"!=Gb(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Gb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Gb(e)?e:e+""}function Vb(t,e,n){return e=zb(e),function(t,e){if(e&&("object"==Gb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Qb()?Reflect.construct(e,n||[],zb(t).constructor):e.apply(t,n))}function Qb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Qb=function(){return!!t})()}function zb(t){return zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zb(t)}function Kb(t,e){return Kb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Kb(t,e)}var qb=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Vb(this,e)).validateParams(t),n.buildID=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kb(t,e)}(e,t),function(t,e,n){return e&&Hb(t.prototype,e),n&&Hb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){void 0!==t&&"string"==typeof t||ue.warn("The buildID is either undefined or of a wrong type. Expected string, received: ".concat(Gb(t)))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.buildID];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"string"==typeof t[1]||ue.warn("navigator_build_id, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"navigator_build_id"}}])}(ym);function Xb(t){return Xb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xb(t)}function Jb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Yb(r.key),r)}}function Yb(t){var e=function(t,e){if("object"!=Xb(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Xb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Xb(e)?e:e+""}function Zb(t,e,n){return e=tg(e),function(t,e){if(e&&("object"==Xb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$b()?Reflect.construct(e,n||[],tg(t).constructor):e.apply(t,n))}function $b(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($b=function(){return!!t})()}function tg(t){return tg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tg(t)}function eg(t,e){return eg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},eg(t,e)}var ng=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Zb(this,e)).validateParams(t),n.maxTouchPoints=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eg(t,e)}(e,t),function(t,e,n){return e&&Jb(t.prototype,e),n&&Jb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){void 0!==t&&"number"==typeof t||ue.warn("wrong type in MaxTouchPointsContract parameters. Expected: number, received: ".concat(Xb(t)))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.maxTouchPoints];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"number"==typeof t[1]||ue.warn("navigator_max_touch_points, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"navigator_max_touch_points"}}])}(ym);function rg(t){return rg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rg(t)}function og(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ig(r.key),r)}}function ig(t){var e=function(t,e){if("object"!=rg(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=rg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rg(e)?e:e+""}function ag(t,e,n){return e=sg(e),function(t,e){if(e&&("object"==rg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ug()?Reflect.construct(e,n||[],sg(t).constructor):e.apply(t,n))}function ug(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ug=function(){return!!t})()}function sg(t){return sg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sg(t)}function cg(t,e){return cg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},cg(t,e)}var lg=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ag(this,e)).validateParams(t),n.math=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cg(t,e)}(e,t),function(t,e,n){return e&&og(t.prototype,e),n&&og(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"string"==typeof t||ue.warn("wrong type in MathDetect parameters. renderer: {expected: string, received: ".concat(rg(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.math];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"string"==typeof t[1]||ue.warn("MathDetect - Contract verification failed")}},{key:"getName",value:function(){return"math_detect"}}])}(ym);function fg(t){return fg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fg(t)}function dg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hg(r.key),r)}}function hg(t){var e=function(t,e){if("object"!=fg(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=fg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fg(e)?e:e+""}function pg(t,e,n){return e=mg(e),function(t,e){if(e&&("object"==fg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,yg()?Reflect.construct(e,n||[],mg(t).constructor):e.apply(t,n))}function yg(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(yg=function(){return!!t})()}function mg(t){return mg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mg(t)}function vg(t,e){return vg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vg(t,e)}var bg=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=pg(this,e)).validateParams(t),n.browserDisplay=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vg(t,e)}(e,t),function(t,e,n){return e&&dg(t.prototype,e),n&&dg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"string"==typeof t||ue.warn("wrong type in BrowserDisplay, BrowserProps parameters. BrowserDisplay : {expected: string, received: ".concat(fg(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.browserDisplay];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"string"==typeof t[1]||ue.warn("TransparencyReduced, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"browser_display_detect"}}])}(ym);function gg(t){return gg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gg(t)}function _g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Sg(r.key),r)}}function Sg(t){var e=function(t,e){if("object"!=gg(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=gg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gg(e)?e:e+""}function wg(t,e,n){return e=kg(e),function(t,e){if(e&&("object"==gg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Eg()?Reflect.construct(e,n||[],kg(t).constructor):e.apply(t,n))}function Eg(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Eg=function(){return!!t})()}function kg(t){return kg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kg(t)}function Pg(t,e){return Pg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Pg(t,e)}var Tg={configKey:"collectBrowserProps",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!0,isFrameRelated:!1,runInUns:!0,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},Og=function(t){function e(t,n,r,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=wg(this,e))._dataQ=t,i._pointerHoverDetector=n,i._utils=r,i._configurationRepository=o,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pg(t,e)}(e,t),function(t,e,n){return e&&_g(t.prototype,e),n&&_g(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){var t=this;ue.info("Collecting Browser Props");var n=new Um(this._utils.scriptVersion).buildQueueMessage();this._dataQ.addToQueue("static_fields",n,!1);var r=new qm("js").buildQueueMessage();this._dataQ.addToQueue("static_fields",r,!1),ue.info("SDK Version is ".concat(this._utils.scriptVersion));var o=e.getLanguage();if(o){this._configurationRepository.get("browserPropsShouldHashLanguageField")&&(ue.debug("Hashing language field according to configuration"),o=this._utils.getHash(o).toString());var i=new Bb(o).buildQueueMessage();this._dataQ.addToQueue("static_fields",i,!1)}var a=new nv(e.getAvailablePlatform(window.navigator)).buildQueueMessage();this._dataQ.addToQueue("static_fields",a,!1);var u=e.getOperatingSystem(),s=new lv(u.version).buildQueueMessage();this._dataQ.addToQueue("static_fields",s,!1);var c=new bv(u.name).buildQueueMessage();this._dataQ.addToQueue("static_fields",c,!1);var l=this._pointerHoverDetector.getPointerHover(),f=new Tv(l.pointer,l.hover).buildQueueMessage();this._dataQ.addToQueue("static_fields",f,!1);var d=new Iv(window.navigator.hardwareConcurrency||0).buildQueueMessage();if(this._dataQ.addToQueue("static_fields",d,!1),navigator.languages){var h=navigator.languages;this._configurationRepository.get("browserPropsShouldHashLanguageField")&&(ue.debug("Hashing languages field according to configuration"),h=Array.from(h,(function(e){return t._utils.getHash(e).toString()})));var p=new Ub(h).buildQueueMessage();this._dataQ.addToQueue("static_fields",p,!1)}var y=e.getPlugins();if(y&&y.length>0){var m=new Vv(y).buildQueueMessage();this._dataQ.addToQueue("static_fields",m,!1)}var v=new Zv(navigator.userAgent).buildQueueMessage();this._dataQ.addToQueue("static_fields",v,!1);var b=-1*(new Date).getTimezoneOffset(),g=new ab(b).buildQueueMessage();this._dataQ.addToQueue("static_fields",g,!1);var _=e.checkCookie(),S=new pb(_).buildQueueMessage();this._dataQ.addToQueue("static_fields",S,!1);var w=navigator.deviceMemory||0,E=new wb(w).buildQueueMessage();this._dataQ.addToQueue("static_fields",E,!1);var k=navigator.buildID;if(k){var P=new qb(k).buildQueueMessage();this._dataQ.addToQueue("static_fields",P,!1)}var T=navigator.maxTouchPoints,O=new ng(T).buildQueueMessage();this._dataQ.addToQueue("static_fields",O,!1);var C="".concat(e.isTransparencyReduced(),",\n        ").concat(e.isMotionReduced(),",\n        ").concat(e.getColorGamut(),",\n        ").concat(e.areColorsForced(),",\n        ").concat(e.areColorsInverted(),",\n        ").concat(e.isHDR(),",\n        ").concat(e.getMonochromeDepth()),M=new bg(C).buildQueueMessage();this._dataQ.addToQueue("static_fields",M,!1);var B=e.getMathFingerprint(),j=new lg(B).buildQueueMessage();this._dataQ.addToQueue("static_fields",j,!1),ue.info("Browser Props collected")}}],[{key:"getDefaultSettings",value:function(){return Tg}},{key:"getLanguage",value:function(){if(navigator){if(navigator.language)return navigator.language;if(navigator.userLanguage)return navigator.userLanguage}}},{key:"getMonochromeDepth",value:function(){if(matchMedia("(min-monochrome: 0)").matches)for(var t=0;t<=100;++t)if(matchMedia("(max-monochrome: ".concat(t,")")).matches)return t}},{key:"isHDR",value:function(){var t=function(t){return matchMedia("(dynamic-range: ".concat(t,")")).matches};return t("high")?"high":t("standard")?"standard":"undefined"}},{key:"areColorsInverted",value:function(){var t=function(t){return matchMedia("(inverted-colors: ".concat(t,")")).matches};return t("inverted")?"inverted":t("none")?"none":"undefined"}},{key:"areColorsForced",value:function(){var t=function(t){return matchMedia("(forced-colors: ".concat(t,")")).matches};return t("active")?"active":t("none")?"none":"undefined"}},{key:"getColorGamut",value:function(){for(var t=0,e=["rec2020","p3","srgb"];t<e.length;t++){var n=e[t];if(matchMedia("(color-gamut: ".concat(n,")")).matches)return n}return"undefined"}},{key:"isMotionReduced",value:function(){var t=function(t){return matchMedia("(prefers-reduced-motion: ".concat(t,")")).matches};return t("reduce")?"reduce":t("no-preference")?"no-preference":"undefined"}},{key:"isTransparencyReduced",value:function(){var t=function(t){return matchMedia("(prefers-reduced-transparency: ".concat(t,")")).matches};return t("reduce")?"reduce":t("no-preference")?"no-preference":"undefined"}},{key:"getMathFingerprint",value:function(){return[Math.acos(.12312423423423424),Math.acosh(1e308),Math.asin(.12312423423423424),Math.asinh(1),Math.atan(.5),Math.atanh(.5),Math.sin(-1e300),Math.sinh(1),Math.cos(10.000000000123),Math.cosh(1),Math.tan(-1e300),Math.tanh(1),Math.exp(1),Math.expm1(1),Math.log1p(10),Math.pow(Math.PI,-100)].join("|")}},{key:"getPlugins",value:function(){try{var t=[];if(window.navigator.plugins&&window.navigator.plugins.length>0)for(var n=0,r=window.navigator.plugins.length;n<r;n++)t.push([window.navigator.plugins[n].name,window.navigator.plugins[n].filename,window.navigator.plugins[n].description,window.navigator.plugins[n].version?window.navigator.plugins[n].version:""]);else if(window.navigator.mimeTypes&&window.navigator.mimeTypes.length>0)for(var o=0;o<window.navigator.mimeTypes.length;o++)t.push([window.navigator.mimeTypes[o].type,"",window.navigator.mimeTypes[o].description,""]);var i=e.isActiveXAndFlashEnabled;return e.augmentWithFlashInIE(t,window.navigator.plugins,i),t}catch(t){ue.warn("getPlugins error: ".concat(t.message),t)}}},{key:"checkCookie",value:function(){var t=navigator.cookieEnabled;return t||(this._utils.StorageUtils.setCookie("testcookie","1",6e4),t=-1!==document.cookie.indexOf("testcookie")),t}},{key:"getOperatingSystem",value:function(){for(var t,n,r=[{name:"Windows Phone",value:"Windows Phone",version:"OS"},{name:"Windows",value:"Win",version:"NT"},{name:"iPhone",value:"iPhone",version:"OS"},{name:"iPad",value:"iPad",version:"OS"},{name:"Kindle",value:"Silk",version:"Silk"},{name:"Android",value:"Android",version:"Android"},{name:"PlayBook",value:"PlayBook",version:"OS"},{name:"BlackBerry",value:"BlackBerry",version:"/"},{name:"Macintosh",value:"Mac",version:"OS X"},{name:"Linux",value:"Linux",version:"rv"},{name:"Palm",value:"Palm",version:"PalmOS"}],o=[e.getAvailablePlatform(window.navigator),navigator.userAgent].join(" "),i="",a="Unknown",u=0;u<r.length;u++)if(new RegExp(r[u].value,"i").test(o)){if(t=new RegExp(r[u].version+"[- /:;]([\\d._]+)","i"),n=o.match(t)){n[1]&&(n=n[1]),n=n.split(/[._]+/);for(var s=0;s<n.length;s++)i+=0===s?n[s]+".":n[s]}a=r[u].name;break}return{version:parseFloat(i)||null,name:a}}},{key:"isActiveXAndFlashEnabled",value:function(){try{return Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(t){return!1}}},{key:"getAvailablePlatform",value:function(t){return"platform"in t?t.platform:"userAgentData"in t?t.userAgentData.platform:null}},{key:"augmentWithFlashInIE",value:function(t,e,n){if("[object PluginArray]"===Object.prototype.toString.call(e))return t;return n()&&t.push(["Flash32_32_0_0_238.ocx",2,"Shockwave Flash","32.0.0.238"]),t}}])}(Io);function Cg(t){return Cg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cg(t)}function Mg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bg(r.key),r)}}function Bg(t){var e=function(t,e){if("object"!=Cg(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Cg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Cg(e)?e:e+""}function jg(t,e,n){return e=Ag(e),function(t,e){if(e&&("object"==Cg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Rg()?Reflect.construct(e,n||[],Ag(t).constructor):e.apply(t,n))}function Rg(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Rg=function(){return!!t})()}function Ag(t){return Ag=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ag(t)}function Ig(t,e){return Ig=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ig(t,e)}var xg=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=jg(this,e)).validateParams(t),n.dnt=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ig(t,e)}(e,t),function(t,e,n){return e&&Mg(t.prototype,e),n&&Mg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"number"==typeof t&&(0===t||1===t||2===t)||ue.warn("wrong type in DoNotTrackContract parameters. dnt : {expected: number in {0,1,2}, received: type: ".concat(Cg(t),", value: ").concat(t))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.dnt];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"number"==typeof t[1]||ue.warn("DoNotTrack - Contract verification failed")}},{key:"getName",value:function(){return"dnt"}}])}(ym);function Ng(t){return Ng="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ng(t)}function Lg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Dg(r.key),r)}}function Dg(t){var e=function(t,e){if("object"!=Ng(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ng(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ng(e)?e:e+""}function Fg(t,e,n){return e=Gg(e),function(t,e){if(e&&("object"==Ng(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ug()?Reflect.construct(e,n||[],Gg(t).constructor):e.apply(t,n))}function Ug(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ug=function(){return!!t})()}function Gg(t){return Gg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gg(t)}function Hg(t,e){return Hg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Hg(t,e)}var Wg={configKey:"isDoNotTrack",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!0,isFrameRelated:!1,runInUns:!0,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},Vg=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Fg(this,e))._dataQ=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hg(t,e)}(e,t),function(t,e,n){return e&&Lg(t.prototype,e),n&&Lg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){var t=navigator.doNotTrack;void 0===t&&void 0===(t=window.doNotTrack)&&(t=navigator.msDoNotTrack);var e=new xg(t=null===t||"unspecified"===t||"0"===t?0:"1"===t?1:2).buildQueueMessage();this._dataQ.addToQueue("static_fields",e,!1)}}],[{key:"getDefaultSettings",value:function(){return Wg}}])}(Io);function Qg(t){return Qg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qg(t)}function zg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Kg(r.key),r)}}function Kg(t){var e=function(t,e){if("object"!=Qg(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Qg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qg(e)?e:e+""}function qg(t,e,n){return e=Jg(e),function(t,e){if(e&&("object"==Qg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Xg()?Reflect.construct(e,n||[],Jg(t).constructor):e.apply(t,n))}function Xg(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Xg=function(){return!!t})()}function Jg(t){return Jg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jg(t)}function Yg(t,e){return Yg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Yg(t,e)}var Zg=function(t){function e(t,n,r,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=qg(this,e)).validateParams(t,n,r,o),i.renderer=t,i.vendor=n,i.version=r,i.supportedExtensions=o,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yg(t,e)}(e,t),function(t,e,n){return e&&zg(t.prototype,e),n&&zg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t,e,n,r){"string"==typeof t&&"string"==typeof e&&"string"==typeof n&&"string"==typeof r||ue.warn("wrong type in GraphicDetectContract parameters. renderer: {expected: string, received: ".concat(Qg(t),"}, vendor: {expected: string, received: ").concat(Qg(e),"},\n            version: {expected: string, received: ").concat(Qg(n),"}, supportedExtensions: {expected: string, received: ").concat(Qg(r),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),[this.renderer,this.vendor,this.version,this.supportedExtensions]];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&Array.isArray(t[1])&&4===t[1].length||ue.warn("GraphicDetect - Contract verification failed")}},{key:"getName",value:function(){return"grph_card"}}])}(ym);function $g(t){return $g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$g(t)}function t_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,e_(r.key),r)}}function e_(t){var e=function(t,e){if("object"!=$g(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=$g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$g(e)?e:e+""}function n_(t,e,n){return e=o_(e),function(t,e){if(e&&("object"==$g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,r_()?Reflect.construct(e,n||[],o_(t).constructor):e.apply(t,n))}function r_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(r_=function(){return!!t})()}function o_(t){return o_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},o_(t)}function i_(t,e){return i_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i_(t,e)}var a_={configKey:"isVMDetection",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!0,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},u_=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=n_(this,e))._dataQ=t,n.canvasId="cd_canvas",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i_(t,e)}(e,t),function(t,e,n){return e&&t_(t.prototype,e),n&&t_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){try{this._getMappedRenderInfo()}catch(t){ue.error("Failed collecting Graphic Card information. ".concat(t))}}},{key:"_getMappedRenderInfo",value:function(){ue.info("Collecting Graphic Card props");var t={renderer:"unknown",vendor:"",version:"unknown",supportedExtensions:""};if(window.WebGLRenderingContext||window.WebGL2RenderingContext){var e=document.createElement("canvas");e.id=this.canvasId;var n=e.getContext("experimental-webgl");if(n){var r=n.getExtension("WEBGL_debug_renderer_info");if(null!=r){t.renderer=n.getParameter(r.UNMASKED_RENDERER_WEBGL),t.vendor=n.getParameter(r.UNMASKED_VENDOR_WEBGL),t.supportedExtensions=n.getSupportedExtensions().join(",");if(t.renderer.indexOf("Intel")>-1&&t.renderer.indexOf("HD Graphics")>-1){var o=t.renderer.match(/\d+/g);if(o){var i=o[0];i>500&&i<599&&(t.version="SKL (6th gen core)"),i>5300&&i<6999&&(t.version="BDW (5th gen core)")}}}}}var a=new Zg(t.renderer,t.vendor,t.version,t.supportedExtensions).buildQueueMessage();this._dataQ.addToQueue("static_fields",a,!1),ue.info("Graphic Card props collected")}}],[{key:"getDefaultSettings",value:function(){return a_}}])}(Io);function s_(t){return s_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s_(t)}function c_(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return l_(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l_(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function l_(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function f_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d_(r.key),r)}}function d_(t){var e=function(t,e){if("object"!=s_(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=s_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s_(e)?e:e+""}function h_(t,e,n){return e=y_(e),function(t,e){if(e&&("object"==s_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,p_()?Reflect.construct(e,n||[],y_(t).constructor):e.apply(t,n))}function p_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(p_=function(){return!!t})()}function y_(t){return y_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},y_(t)}function m_(t,e){return m_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},m_(t,e)}var v_=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=h_(this,e)).validateParams(t),n.mediaDevices=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m_(t,e)}(e,t),function(t,e,n){return e&&f_(t.prototype,e),n&&f_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){Array.isArray(t)&&this._eachDeviceIsValid(t)||ue.warn(" wrong type in MediaDevicesContract parameters. mediaDevices : {expected: [[...string]], received: ".concat(t,"}"))}},{key:"_eachDeviceIsValid",value:function(t){var e,n=!0,r=!0,o=!0,i=c_(t);try{for(i.s();!(e=i.n()).done;){var a=e.value;if(Array.isArray(a)){4!==a.length&&(o=!1);var u,s=c_(a);try{for(s.s();!(u=s.n()).done;){"string"!=typeof u.value&&(r=!1)}}catch(t){s.e(t)}finally{s.f()}}else n=!1}}catch(t){i.e(t)}finally{i.f()}return n&&o&&r}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.mediaDevices];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&Array.isArray(t[1])||ue.warn("MediaDevices - Contract verification failed")}},{key:"getName",value:function(){return"media_devices"}}])}(ym);function b_(t){return b_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b_(t)}function g_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,__(r.key),r)}}function __(t){var e=function(t,e){if("object"!=b_(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=b_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==b_(e)?e:e+""}function S_(t,e,n){return e=E_(e),function(t,e){if(e&&("object"==b_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,w_()?Reflect.construct(e,n||[],E_(t).constructor):e.apply(t,n))}function w_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(w_=function(){return!!t})()}function E_(t){return E_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},E_(t)}function k_(t,e){return k_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},k_(t,e)}var P_={configKey:"isMediaDevices",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!0,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},T_=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.navigator;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=S_(this,e))._dataQ=t,n._navigator=r,n._metric="MediaDevicesFeature",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k_(t,e)}(e,t),function(t,e,n){return e&&g_(t.prototype,e),n&&g_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){var t=this;this._navigator.mediaDevices&&this._navigator.mediaDevices.enumerateDevices&&this._navigator.mediaDevices.enumerateDevices().then((function(e){var n=[];e.forEach((function(t){var e=[t.kind||"",t.label||"",t.deviceId||"",t.groupId||""];n.push(e)}));var r=new v_(n).buildQueueMessage();t._dataQ.addToQueue("static_fields",r,!1)})).catch((function(e){t.cancelMonitor(t._metric),ue.error("MediaDevicesFeature:startFeature failed to enumerateDevices: ".concat(e.message))}))}}],[{key:"getDefaultSettings",value:function(){return P_}}])}(Io);function O_(t){return O_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O_(t)}function C_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,M_(r.key),r)}}function M_(t){var e=function(t,e){if("object"!=O_(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=O_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==O_(e)?e:e+""}function B_(t,e,n){return e=R_(e),function(t,e){if(e&&("object"==O_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,j_()?Reflect.construct(e,n||[],R_(t).constructor):e.apply(t,n))}function j_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(j_=function(){return!!t})()}function R_(t){return R_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},R_(t)}function A_(t,e){return A_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},A_(t,e)}var I_=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=B_(this,e)).validateParams(t,n),r.per=t,r.state=n,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A_(t,e)}(e,t),function(t,e,n){return e&&C_(t.prototype,e),n&&C_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t,e){"string"==typeof t&&"number"==typeof e||ue.warn("wrong type in Per, UserPermissionContract, parameters. per : {expected: string, received: ".concat(O_(t),"}, state : {expected: number, received: ").concat(O_(e),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.state];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"number"==typeof t[1]||ue.warn("per, UserPermissionContract - Contract verification failed")}},{key:"getName",value:function(){return"per_".concat(this.per)}}])}(ym);function x_(t){return x_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x_(t)}function N_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,L_(r.key),r)}}function L_(t){var e=function(t,e){if("object"!=x_(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=x_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==x_(e)?e:e+""}function D_(t,e,n){return e=U_(e),function(t,e){if(e&&("object"==x_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,F_()?Reflect.construct(e,n||[],U_(t).constructor):e.apply(t,n))}function F_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(F_=function(){return!!t})()}function U_(t){return U_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},U_(t)}function G_(t,e){return G_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},G_(t,e)}var H_=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=D_(this,e)).validateParams(t),n.persistent=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&G_(t,e)}(e,t),function(t,e,n){return e&&N_(t.prototype,e),n&&N_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"number"==typeof t||ue.warn("wrong type in PerStorage , UserPermissionContract, parameters. persistent : {expected: number, received: ".concat(x_(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.persistent];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"number"==typeof t[1]||ue.warn("per_storage, UserPermissionContract - Contract verification failed")}},{key:"getName",value:function(){return"per_storage"}}])}(ym);function W_(t){return W_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W_(t)}function V_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Q_(r.key),r)}}function Q_(t){var e=function(t,e){if("object"!=W_(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=W_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==W_(e)?e:e+""}function z_(t,e,n){return e=q_(e),function(t,e){if(e&&("object"==W_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,K_()?Reflect.construct(e,n||[],q_(t).constructor):e.apply(t,n))}function K_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(K_=function(){return!!t})()}function q_(t){return q_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},q_(t)}function X_(t,e){return X_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},X_(t,e)}var J_=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=z_(this,e)).validateParams(t,n),r.kind=t,r.perm=n,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&X_(t,e)}(e,t),function(t,e,n){return e&&V_(t.prototype,e),n&&V_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t,e){"string"==typeof t&&"number"==typeof e||ue.warn("wrong type in PerKind , UserPermissionContract, parameters. kind : {expected: string, received: ".concat(W_(t),"}, perm : {expected: number, received: ").concat(W_(e),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.perm];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"number"==typeof t[1]||ue.warn("PerKind, UserPermissionContract - Contract verification failed")}},{key:"getName",value:function(){return"per_".concat(this.kind)}}])}(ym);function Y_(t){return Y_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y_(t)}function Z_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$_(r.key),r)}}function $_(t){var e=function(t,e){if("object"!=Y_(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Y_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Y_(e)?e:e+""}function tS(t,e,n){return e=nS(e),function(t,e){if(e&&("object"==Y_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,eS()?Reflect.construct(e,n||[],nS(t).constructor):e.apply(t,n))}function eS(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(eS=function(){return!!t})()}function nS(t){return nS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nS(t)}function rS(t,e){return rS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rS(t,e)}var oS={configKey:"isUserPermissions",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!0,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},iS=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.navigator;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=tS(this,e))._permDefs={granted:1,prompt:2,denied:3,true:1,false:3},n._permissions=["geolocation","midi","notifications","push"],n._dataQ=t,n._navigator=r,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rS(t,e)}(e,t),function(t,e,n){return e&&Z_(t.prototype,e),n&&Z_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){this._reportQueryPermissions(),this._reportStoragePermission(),this._reportMicCameraPermissions()}},{key:"_reportQueryPermissions",value:function(){var t=this;if(this._navigator.permissions&&this._navigator.permissions.query)for(var e=ue,n=function(){var n=t._permissions[r];t._navigator.permissions.query({name:n}).then((function(e){var r=t._permDefs[e.state]||-1,o=new I_(n,r).buildQueueMessage();t._dataQ.addToQueue("static_fields",o,!1)})).catch((function(t){e.debug("Failed querying for ".concat(n," permissions ").concat(t.message))}))},r=0;r<this._permissions.length;r++)n()}},{key:"_reportStoragePermission",value:function(){var t=this;this._navigator.storage&&this._navigator.storage.persisted&&this._navigator.storage.persisted().then((function(e){var n=new H_(t._permDefs[e]||-1).buildQueueMessage();t._dataQ.addToQueue("static_fields",n,!1)})).catch((function(t){ue.debug("Failed to check storage persisted: ".concat(t.message))}))}},{key:"_reportMicCameraPermissions",value:function(){var t=this,e={audio:!1,video:!1};this._navigator.mediaDevices&&this._navigator.mediaDevices.enumerateDevices&&this._navigator.mediaDevices.enumerateDevices().then((function(n){n.forEach((function(n){if(!((a=n.kind).includes("audio")&&e.audio||a.includes("video")&&e.video)){var r=function(t){return t.includes("audio")?(e.audio=!0,"audio"):t.includes("video")?(e.video=!0,"video"):void 0}(n.kind),o=""!==n.label?t._permDefs.granted:t._permDefs.denied,i=new J_(r,o).buildQueueMessage();t._dataQ.addToQueue("static_fields",i,!1)}var a}))})).catch((function(t){ue.debug("UserPermissions:startFeature failed to enumerateDevices: ".concat(t.message))}))}}],[{key:"getDefaultSettings",value:function(){return oS}}])}(Io);function aS(t){return aS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aS(t)}function uS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sS(r.key),r)}}function sS(t){var e=function(t,e){if("object"!=aS(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=aS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==aS(e)?e:e+""}function cS(t,e,n){return e=fS(e),function(t,e){if(e&&("object"==aS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,lS()?Reflect.construct(e,n||[],fS(t).constructor):e.apply(t,n))}function lS(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(lS=function(){return!!t})()}function fS(t){return fS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fS(t)}function dS(t,e){return dS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},dS(t,e)}var hS=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=cS(this,e)).validateParams(t),n.isPrivate=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dS(t,e)}(e,t),function(t,e,n){return e&&uS(t.prototype,e),n&&uS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"boolean"==typeof t||ue.warn("wrong type in IsPrivateBrowsingContract parameters. isPrivate : {expected: boolean, received: ".concat(aS(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.isPrivate];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"boolean"==typeof t[1]||ue.warn("IsPrivateBrowsing - Contract verification failed")}},{key:"getName",value:function(){return"is_private_browsing"}}])}(ym);function pS(t){return pS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pS(t)}function yS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mS(r.key),r)}}function mS(t){var e=function(t,e){if("object"!=pS(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=pS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pS(e)?e:e+""}function vS(t,e,n){return e=gS(e),function(t,e){if(e&&("object"==pS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,bS()?Reflect.construct(e,n||[],gS(t).constructor):e.apply(t,n))}function bS(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(bS=function(){return!!t})()}function gS(t){return gS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gS(t)}function _S(t,e){return _S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_S(t,e)}var SS={configKey:"isPrivateBrowsing",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!0,isFrameRelated:!1,runInUns:!0,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},wS=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=vS(this,e))._dataQ=t,r._privateBrowsingDetector=n,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_S(t,e)}(e,t),function(t,e,n){return e&&yS(t.prototype,e),n&&yS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){var t=this;this._privateBrowsingDetector.detectPrivateMode((function(e){var n=new hS(e).buildQueueMessage();t._dataQ.addToQueue("static_fields",n,!1)}))}}],[{key:"getDefaultSettings",value:function(){return SS}}])}(Io);function ES(t){return ES="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ES(t)}function kS(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return PS(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?PS(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PS(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function TS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,OS(r.key),r)}}function OS(t){var e=function(t,e){if("object"!=ES(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ES(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ES(e)?e:e+""}function CS(t,e,n){return e=BS(e),function(t,e){if(e&&("object"==ES(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,MS()?Reflect.construct(e,n||[],BS(t).constructor):e.apply(t,n))}function MS(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(MS=function(){return!!t})()}function BS(t){return BS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},BS(t)}function jS(t,e){return jS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jS(t,e)}var RS=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=CS(this,e)).validateParams(t,n),r.dataType=t,r.fontList=n,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jS(t,e)}(e,t),function(t,e,n){return e&&TS(t.prototype,e),n&&TS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t,e){if(!(Array.isArray(e)&&2===e.length&&Object.values(AS).includes(t)))throw ue.warn("Invalid parameters in FontsDetectionContract. \n                dataType: {expected: ".concat(Object.keys(AS).join(", "),", received: ").concat(t,"},\n                fontList: {expected: tuple [string, array], received: ").concat(JSON.stringify(e),"}")),new Error("Invalid parameters provided to FontsDetectionContract.")}},{key:"buildQueueMessage",value:function(){var t;if(this.dataType===AS.V1_ONLY)t=this.fontList[0].join(",");else if(this.dataType===AS.V2_ONLY)t=this.fontList[1];else{if(this.dataType!==AS.V1_AND_V2)throw new Error("Invalid dataType: ".concat(this.dataType));t=[this.fontList[0].join(","),this.fontList[1]]}var e=[this.getName(),[this.dataType,t]];return this.validateMessage(e),e}},{key:"validateMessage",value:function(t){var e="string"==typeof t[0],n=kS(t[1]||[],2),r=n[0],o=n[1],i=!1;if(r===AS.V1_ONLY?i="string"==typeof o:r===AS.V2_ONLY?i=Array.isArray(o)&&o.every((function(t){return"string"==typeof t})):r===AS.V1_AND_V2&&(i=Array.isArray(o)&&2===o.length&&"string"==typeof o[0]&&Array.isArray(o[1])&&o[1].every((function(t){return"string"==typeof t}))),!e||!i)throw ue.warn("FontsDetectionContract - Queue message validation failed."),ue.debug("Invalid message: ".concat(JSON.stringify(t))),new Error("Invalid message structure.")}},{key:"getName",value:function(){return"fonts"}}])}(ym),AS=Object.freeze({V1_ONLY:"v1",V2_ONLY:"v2",V1_AND_V2:"v1+v2"}),IS=Object.freeze({VERSION1:"VERSION1",VERSION2:"VERSION2"});function xS(t){return xS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xS(t)}function NS(t,e,n){return(e=DS(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,DS(r.key),r)}}function DS(t){var e=function(t,e){if("object"!=xS(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=xS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xS(e)?e:e+""}var FS=function(){return function(t,e,n){return e&&LS(t.prototype,e),n&&LS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._storageUtils=e,this._versionKeys=NS(NS({},IS.VERSION1,"detectedFonts_2.1.5"),IS.VERSION2,"detectedFonts_3")}),[{key:"saveFonts",value:function(t,e){var n=this._getKeyByVersion(e);ue.debug("[FONTS-COLLECTOR][".concat(e,"] Saving fonts to localStorage under key: ").concat(n)),this._storageUtils.saveToLocalStorage(n,t)}},{key:"getStoredFonts",value:function(t){var e=this._getKeyByVersion(t),n=this._storageUtils.getFromLocalStorage(e);return ue.debug("[FONTS-COLLECTOR][".concat(t,"] Retrieved fonts from localStorage under key ").concat(e,": ").concat(n)),n}},{key:"_getKeyByVersion",value:function(t){var e=this._versionKeys[t];if(!e)throw new Error("Unsupported font version type: ".concat(t));return e}}])}(),US=n(729),GS=n.n(US),HS=n(592),WS=n.n(HS);function VS(t){return VS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},VS(t)}function QS(t,e,n){return(e=KS(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,KS(r.key),r)}}function KS(t){var e=function(t,e){if("object"!=VS(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=VS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==VS(e)?e:e+""}var qS=function(){return function(t,e,n){return e&&zS(t.prototype,e),n&&zS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fontVersions=QS(QS({},IS.VERSION1,GS()),IS.VERSION2,WS())}),[{key:"getFontsByVersion",value:function(t){if(this.fontVersions[t])return this.fontVersions[t];throw new Error("Invalid version type. Use one of: ".concat(Object.keys(IS).join(", ")))}}])}(),XS=qS;function JS(t){return JS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},JS(t)}function YS(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return ZS(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,u=0,s=t,d.n=n,a}};function h(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=d.p,p=i[2];n>3?(o=p===r)&&(u=i[4]||3,s=i[5]===t?i[3]:i[5],i[4]=3,i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,d.v=r,d.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,d.n=p,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),u=l,s=p;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(d.n=-1),h(u,s)):d.n=s:d.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(ZS(e={},r,(function(){return this})),e),f=c.prototype=u.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,ZS(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,ZS(f,"constructor",c),ZS(c,"constructor",s),s.displayName="GeneratorFunction",ZS(c,o,"GeneratorFunction"),ZS(f),ZS(f,o,"Generator"),ZS(f,r,(function(){return this})),ZS(f,"toString",(function(){return"[object Generator]"})),(YS=function(){return{w:i,m:d}})()}function ZS(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}ZS=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){ZS(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},ZS(t,e,n,r)}function $S(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function tw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ew(r.key),r)}}function ew(t){var e=function(t,e){if("object"!=JS(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=JS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==JS(e)?e:e+""}var nw=function(){return function(t,e,n){return e&&tw(t.prototype,e),n&&tw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),[{key:"detect",value:(t=YS().m((function t(e,n){return YS().w((function(t){for(;;)switch(t.n){case 0:throw new Error('Method "checkFontList" must be implemented.');case 1:return t.a(2)}}),t)})),e=function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){$S(i,r,o,a,u,"next",t)}function u(t){$S(i,r,o,a,u,"throw",t)}a(void 0)}))},function(t,n){return e.apply(this,arguments)})},{key:"release",value:function(){throw new Error('Method "release" must be implemented.')}},{key:"isSupported",value:function(){throw new Error('Method "isSupported" must be implemented.')}}]);var t,e}();function rw(t){return rw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rw(t)}function ow(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return iw(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iw(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function iw(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function aw(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return uw(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,u=0,s=t,d.n=n,a}};function h(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=d.p,p=i[2];n>3?(o=p===r)&&(u=i[4]||3,s=i[5]===t?i[3]:i[5],i[4]=3,i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,d.v=r,d.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,d.n=p,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),u=l,s=p;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(d.n=-1),h(u,s)):d.n=s:d.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(uw(e={},r,(function(){return this})),e),f=c.prototype=u.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,uw(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,uw(f,"constructor",c),uw(c,"constructor",s),s.displayName="GeneratorFunction",uw(c,o,"GeneratorFunction"),uw(f),uw(f,o,"Generator"),uw(f,r,(function(){return this})),uw(f,"toString",(function(){return"[object Generator]"})),(aw=function(){return{w:i,m:d}})()}function uw(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}uw=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){uw(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},uw(t,e,n,r)}function sw(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function cw(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){sw(i,r,o,a,u,"next",t)}function u(t){sw(i,r,o,a,u,"throw",t)}a(void 0)}))}}function lw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fw(r.key),r)}}function fw(t){var e=function(t,e){if("object"!=rw(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=rw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rw(e)?e:e+""}function dw(t,e,n){return e=pw(e),function(t,e){if(e&&("object"==rw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,hw()?Reflect.construct(e,n||[],pw(t).constructor):e.apply(t,n))}function hw(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(hw=function(){return!!t})()}function pw(t){return pw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pw(t)}function yw(t,e){return yw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yw(t,e)}var mw=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=dw(this,e))._domUtils=t,n._baselineFonts=["sans-serif","serif","fangsong","cursive","fantasy","monospace","emoji","ui-rounded","math","system-ui","ui-serif","ui-sans-serif","unknown"],n._testText="AaBb123!@# אבגד אبت 你好世 あア अआऋИΔ สวั อา რუც კзءλ ⵍ 𐌄 фغ😀✔",n._fontSize="48px",n._canvas=null,n._context=null,n._baselineWidths={},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yw(t,e)}(e,t),function(t,e,n){return e&&lw(t.prototype,e),n&&lw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"detect",value:(o=cw(aw().m((function t(e,n){var r,o;return aw().w((function(t){for(;;)switch(t.n){case 0:if(!this._hasReleased){t.n=1;break}throw new Error("CanvasFontDetector has been released and is no longer usable. Please create a new instance to use the detector.");case 1:if(this._initialized){t.n=2;break}return t.n=2,this._initialize();case 2:if(void 0!==(r=this._baselineWidths[n])){t.n=3;break}throw new Error('Font family "'.concat(n,'" is not recognized.'));case 3:return this._context.font="".concat(this._fontSize,' "').concat(e,'", ').concat(n),o=this._context.measureText(this._testText).width,t.a(2,o!==r)}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"release",value:(r=cw(aw().m((function t(){return aw().w((function(t){for(;;)switch(t.n){case 0:this._hasReleased=!0,this._canvas=null,this._context=null,this._baselineWidths=null;case 1:return t.a(2)}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"isSupported",value:function(){try{var t=document.createElement("canvas");return Boolean(t.getContext&&t.getContext("2d"))}catch(t){return!1}}},{key:"_initialize",value:(n=cw(aw().m((function t(){var e,n,r,o;return aw().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this._domUtils.awaitWindowDocumentReady(window);case 1:this._canvas=document.createElement("canvas"),this._context=this._canvas.getContext("2d"),this._context.textBaseline="alphabetic",this._context.direction="ltr",this._baselineWidths={},e=ow(this._baselineFonts);try{for(e.s();!(n=e.n()).done;)r=n.value,this._context.font="".concat(this._fontSize,' "non-existed-font", ').concat(r),o=this._context.measureText(this._testText).width,this._baselineWidths[r]=o}catch(t){e.e(t)}finally{e.f()}this._initialized=!0;case 2:return t.a(2)}}),t,this)}))),function(){return n.apply(this,arguments)})}]);var n,r,o}(nw);function vw(t){return vw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vw(t)}function bw(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return gw(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,u=0,s=t,d.n=n,a}};function h(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=d.p,p=i[2];n>3?(o=p===r)&&(u=i[4]||3,s=i[5]===t?i[3]:i[5],i[4]=3,i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,d.v=r,d.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,d.n=p,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),u=l,s=p;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(d.n=-1),h(u,s)):d.n=s:d.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(gw(e={},r,(function(){return this})),e),f=c.prototype=u.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,gw(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,gw(f,"constructor",c),gw(c,"constructor",s),s.displayName="GeneratorFunction",gw(c,o,"GeneratorFunction"),gw(f),gw(f,o,"Generator"),gw(f,r,(function(){return this})),gw(f,"toString",(function(){return"[object Generator]"})),(bw=function(){return{w:i,m:d}})()}function gw(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}gw=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){gw(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},gw(t,e,n,r)}function _w(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function Sw(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){_w(i,r,o,a,u,"next",t)}function u(t){_w(i,r,o,a,u,"throw",t)}a(void 0)}))}}function ww(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ew(r.key),r)}}function Ew(t){var e=function(t,e){if("object"!=vw(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=vw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vw(e)?e:e+""}function kw(t,e,n){return e=Tw(e),function(t,e){if(e&&("object"==vw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Pw()?Reflect.construct(e,n||[],Tw(t).constructor):e.apply(t,n))}function Pw(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Pw=function(){return!!t})()}function Tw(t){return Tw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Tw(t)}function Ow(t,e){return Ow=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ow(t,e)}var Cw=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=kw(this,e))._domUtils=t,n._testText="AaBb123!@# אבגד אبت 你好世 あア अआऋИΔ สวั อา რუც კзءλ ⵍ 𐌄 фغ😀✔",n._testFontSize="48px",n._baselineFontFamilies=["monospace","sans-serif","serif"],n._baselineMetrics={},n._testNode=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ow(t,e)}(e,t),function(t,e,n){return e&&ww(t.prototype,e),n&&ww(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"detect",value:(o=Sw(bw().m((function t(e,n){var r,o,i;return bw().w((function(t){for(;;)switch(t.n){case 0:if(!this._hasReleased){t.n=1;break}throw new Error("DomFontDetector has been released and is no longer usable. Please create a new instance to use the detector.");case 1:if(this._initialized){t.n=2;break}return t.n=2,this._initialize();case 2:return this._testNode.style.fontFamily='"'.concat(e,'", ').concat(n),r=this._testNode.offsetWidth,o=this._testNode.offsetHeight,i=this._baselineMetrics[n],t.a(2,r!==i.width||o!==i.height)}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"release",value:(r=Sw(bw().m((function t(){return bw().w((function(t){for(;;)switch(t.n){case 0:this._hasReleased=!0,this._testNode&&document.body.removeChild(this._testNode),this._testNode=null,this._baselineMetrics={};case 1:return t.a(2)}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"isSupported",value:function(){return!0}},{key:"_initialize",value:(n=Sw(bw().m((function t(){var e=this;return bw().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this._domUtils.awaitWindowDocumentReady(window);case 1:this._testNode=document.createElement("span"),this._testNode.style.fontSize=this._testFontSize,this._testNode.style.lineHeight="1",this._testNode.style.fontStretch="condensed",this._testNode.style.whiteSpace="nowrap",this._testNode.style.position="absolute",this._testNode.style.visibility="hidden",this._testNode.textContent=this._testText,document.body.appendChild(this._testNode),this._baselineFontFamilies.forEach((function(t){e._testNode.style.fontFamily="non-existed-font, ".concat(t),e._baselineMetrics[t]={width:e._testNode.offsetWidth,height:e._testNode.offsetHeight}})),this._initialized=!0;case 2:return t.a(2)}}),t,this)}))),function(){return n.apply(this,arguments)})}]);var n,r,o}(nw);function Mw(t){return Mw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mw(t)}function Bw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jw(r.key),r)}}function jw(t){var e=function(t,e){if("object"!=Mw(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Mw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Mw(e)?e:e+""}var Rw=function(){return function(t,e,n){return e&&Bw(t.prototype,e),n&&Bw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)throw new Error("domUtils is required for FontDetectorProvider.");this._domUtils=e,this._logsTag="[FONTS-COLLECTOR]"}),[{key:"getBestDetector",value:function(){for(var t=this,e=0,n=[{detector:function(){return new mw(t._domUtils)},name:"CanvasFontDetector"},{detector:function(){return new Cw(t._domUtils)},name:"DomFontDetector"}];e<n.length;e++){var r=n[e],o=r.detector,i=r.name;try{var a=o();if(a.isSupported())return ue.info("".concat(this._logsTag," Using ").concat(i)),a}catch(t){ue.error("".concat(this._logsTag," ").concat(i," failed:"),t)}}throw new Error("[FontDetectorProvider] No suitable font detection implementation is supported in this environment.")}}])}();function Aw(t){return Aw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Aw(t)}function Iw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xw(r.key),r)}}function xw(t){var e=function(t,e){if("object"!=Aw(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Aw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Aw(e)?e:e+""}var Nw="span",Lw=function(){return function(t,e,n){return e&&Iw(t.prototype,e),n&&Iw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._domUtils=e,this._baseFonts=["rat-fonts","monospace","sans-serif","serif"],this._testString="mmmmmmmmmmlli",this._testSize="72px",this._chunkSize=30,this._defaultWidth={},this._defaultHeight={},this._body=null,this._iframe=null,this._spanArray=null,this._allFontsDiffs=[]}),[{key:"release",value:function(){this._body&&this._iframe&&this._body.removeChild(this._iframe),this._iframe=null,this._spanArray=null,this._allFontsDiffs=[]}},{key:"init",value:function(){var t=this;return new Promise((function(e,n){try{t.initCallback(e)}catch(t){n(t)}}))}},{key:"initCallback",value:function(t){var e=this;if(this._body=document.body,!this._body)return"";this._iframe=document.createElement("iframe"),this._iframe.setAttribute("sandbox","allow-same-origin"),this._iframe.id=Wi,this._iframe.style.visibility="hidden",this._iframe.style.zIndex="-1",this._iframe.style.width=0,this._iframe.style.height=0,this._body.appendChild(this._iframe),this._iframe.contentDocument.body||(this._iframe.style.width=null,this._iframe.style.height=null,this._iframe.contentDocument.appendChild(document.createElement("body"))),this._domUtils.onWindowDocumentReady(this._iframe.contentWindow,(function(){e._createCalculationElements(t)}))}},{key:"_createCalculationElements",value:function(t){var e=document.createElement("span");e.style.fontSize=this._testSize,e.style.visibility="hidden",e.style.position="absolute",e.style.zIndex="-1",e.style.lineHeight="normal",e.innerHTML=this._testString;for(var n=0;n<this._baseFonts.length;n++)e.style.fontFamily=this._baseFonts[n],this._iframe.contentDocument.body.appendChild(e),this._defaultWidth[this._baseFonts[n]]=e.offsetWidth,this._defaultHeight[this._baseFonts[n]]=e.offsetHeight,this._iframe.contentDocument.body.removeChild(e);ue.debug("FontsScanner:init - base fonts width: \n                ".concat(this._baseFonts[0],":").concat(this._defaultWidth[this._baseFonts[0]],";\n                ").concat(this._baseFonts[1],":").concat(this._defaultWidth[this._baseFonts[1]],";\n                ").concat(this._baseFonts[2],":").concat(this._defaultWidth[this._baseFonts[2]],";\n                ").concat(this._baseFonts[3],":").concat(this._defaultWidth[this._baseFonts[3]])),ue.debug("FontsScanner:init - base fonts height: \n                ".concat(this._baseFonts[0],":").concat(this._defaultHeight[this._baseFonts[0]],";\n                ").concat(this._baseFonts[1],":").concat(this._defaultHeight[this._baseFonts[1]],";\n                ").concat(this._baseFonts[2],":").concat(this._defaultHeight[this._baseFonts[2]],";\n                ").concat(this._baseFonts[3],":").concat(this._defaultHeight[this._baseFonts[3]])),this._createSpanArray(),t()}},{key:"_createSpanArray",value:function(){var t=document.createElement("div");t.id="currentDiv",t.style.position="absolute",t.style.visibility="hidden";for(var e=0;e<this._chunkSize;e++){var n=document.createElement("span");n.style.lineHeight="normal",n.style.position="absolute",n.style.zIndex="-1",n.style.fontSize=this._testSize,n.innerHTML=this._testString,t.appendChild(n);var r=document.createElement("br");t.appendChild(r)}this._iframe.contentDocument.body.appendChild(t),this._spanArray=t}},{key:"getAllFontsDiffs",value:function(){return this._allFontsDiffs}}])}();function Dw(t){return Dw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dw(t)}function Fw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Uw(r.key),r)}}function Uw(t){var e=function(t,e){if("object"!=Dw(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Dw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Dw(e)?e:e+""}function Gw(t,e,n){return e=Ww(e),function(t,e){if(e&&("object"==Dw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Hw()?Reflect.construct(e,n||[],Ww(t).constructor):e.apply(t,n))}function Hw(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Hw=function(){return!!t})()}function Ww(t){return Ww=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ww(t)}function Vw(t,e){return Vw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Vw(t,e)}var Qw=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Gw(this,e,[t])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vw(t,e)}(e,t),function(t,e,n){return e&&Fw(t.prototype,e),n&&Fw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"scan",value:function(t,e){var n=this;return this.init().then((function(){return new Promise((function(r,o){try{n.detectCallback(t,e,r)}catch(t){o(t)}}))})).catch((function(t){return Promise.reject(t)}))}},{key:"detectCallback",value:function(t,e,n){var r=this,o=[],i=0,a=0;if(!this._spanArray)return n(o),o;var u=this._spanArray.getElementsByTagName(Nw),s=this._defaultWidth[e],c=this._defaultHeight[e],l=function(t){t.forEach((function(t){var e=Math.abs(t.offsetWidth-s),n=Math.abs(t.offsetHeight-c);r._allFontsDiffs.push([t.id,e,n]),(e>1||n>1)&&(o[i]=t.id,i++)}))};t.forEach((function(t){a>=r._chunkSize&&(a=0,l(Array.from(u))),u[a].style.fontFamily=t+","+e,u[a].id=t,a++})),a<this._chunkSize&&l(Array.from(u).slice(0,a)),n(o)}}])}(Lw);function zw(t){return zw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zw(t)}function Kw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qw(r.key),r)}}function qw(t){var e=function(t,e){if("object"!=zw(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=zw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zw(e)?e:e+""}function Xw(t,e,n){return e=Yw(e),function(t,e){if(e&&("object"==zw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Jw()?Reflect.construct(e,n||[],Yw(t).constructor):e.apply(t,n))}function Jw(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Jw=function(){return!!t})()}function Yw(t){return Yw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Yw(t)}function Zw(t,e){return Zw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zw(t,e)}var $w=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Xw(this,e,[t]))._getElementOffsetTask=n._getElementOffsetTask.bind(n),n._lastChunck=!0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zw(t,e)}(e,t),function(t,e,n){return e&&Kw(t.prototype,e),n&&Kw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"scan",value:function(t,e){var n=this;return this.init().then((function(){return new Promise((function(r,o){try{n.detectCallback(t,e,r)}catch(t){o(t)}}))})).catch((function(t){return Promise.reject(t)}))}},{key:"detectCallback",value:function(t,e,n){if(!this._spanArray)return n([]),[];var r,o,i,a,u,s,c,l,f=this._spanArray.getElementsByTagName(Nw),d=(r=0,o=Math.min(t.length,this._chunkSize),i=f,a=r,u=[],s=n,c=t,l=e,{next:function(){var t=null;return a<o?(t=i[a],a++,t):null},reset:function(){a=0},addFont:function(t){u.push(t)},runCallback:function(){s(u)},getFontsArray:function(){return c},getFontFamily:function(){return l},getAvailableFonts:function(){return u}});this._lastChunck=!0,this._applyFontsToSpanElements(d,0)}},{key:"_applyFontsToSpanElements",value:function(t,e){var n=this;ue.trace("[FONTS-COLLECTOR][VERSION1] Checking font ".concat(e,"."));for(var r=t.next(),o=t.getFontsArray(),i=t.getFontFamily();null!==r&&e<o.length;)r.style.fontFamily=o[e]+", "+i,r.id=o[e],e++,r=t.next();if(t.reset(),e>=o.length){if(this._lastChunck)return this._lastChunck=!1,window.setTimeout((function(){n._getElementOffsetTask(t,e)}),0);t.runCallback()}else window.setTimeout((function(){n._getElementOffsetTask(t,e)}),0)}},{key:"_getElementOffsetTask",value:function(t,e){var n=this,r=t.getFontFamily(),o=this._defaultWidth[r],i=this._defaultHeight[r],a=t.next();if(a&&a.offsetWidth){var u=Math.abs(a.offsetWidth-o),s=Math.abs(a.offsetHeight-i);this._allFontsDiffs.push([a.id,u,s]),(u>1||s>1)&&t.addFont(a.id),window.setTimeout((function(){n._getElementOffsetTask(t,e)}),0)}else t.reset(),this._applyFontsToSpanElements(t,e)}},{key:"isSupported",value:function(){return!0}}])}(Lw);function tE(t){return tE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tE(t)}function eE(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return nE(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nE(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function nE(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function rE(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return oE(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,u=0,s=t,d.n=n,a}};function h(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=d.p,p=i[2];n>3?(o=p===r)&&(u=i[4]||3,s=i[5]===t?i[3]:i[5],i[4]=3,i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,d.v=r,d.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,d.n=p,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),u=l,s=p;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(d.n=-1),h(u,s)):d.n=s:d.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(oE(e={},r,(function(){return this})),e),f=c.prototype=u.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,oE(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,oE(f,"constructor",c),oE(c,"constructor",s),s.displayName="GeneratorFunction",oE(c,o,"GeneratorFunction"),oE(f),oE(f,o,"Generator"),oE(f,r,(function(){return this})),oE(f,"toString",(function(){return"[object Generator]"})),(rE=function(){return{w:i,m:d}})()}function oE(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}oE=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){oE(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},oE(t,e,n,r)}function iE(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function aE(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){iE(i,r,o,a,u,"next",t)}function u(t){iE(i,r,o,a,u,"throw",t)}a(void 0)}))}}function uE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sE(r.key),r)}}function sE(t){var e=function(t,e){if("object"!=tE(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=tE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tE(e)?e:e+""}var cE=function(){return function(t,e,n){return e&&uE(t.prototype,e),n&&uE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){var n=e.utils,r=e.domUtils,o=e.detector,i=void 0===o?null:o,a=e.batchSize,u=void 0===a?10:a,s=e.timeoutGap,c=void 0===s?0:s;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!n)throw new Error("The 'utils' parameter is required.");if(!r)throw new Error("The 'domUtils' parameter is required.");this._utils=n,this._domUtils=r,this.detector=i,this.batchSize=u,this.timeoutGap=c,this._hasReleased=!1}),[{key:"release",value:(n=aE(rE().m((function t(){return rE().w((function(t){for(;;)switch(t.n){case 0:if(this._hasReleased=!0,!this.detector||"function"!=typeof this.detector.release){t.n=1;break}return t.n=1,this.detector.release();case 1:return t.a(2)}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"scan",value:(e=aE(rE().m((function t(e,n){var r,o,i,a,u,s,c,l,f,d;return rE().w((function(t){for(;;)switch(t.n){case 0:if(!this._hasReleased){t.n=1;break}throw new Error("BatchFontScanner has been released and cannot be used.");case 1:if(Array.isArray(e)){t.n=2;break}throw new TypeError("The 'fonts' parameter must be an array.");case 2:if(0!==e.length){t.n=3;break}return t.a(2,[]);case 3:r=[],o=this._createBatchIndices(e.length,this.batchSize),i=eE(o),t.p=4,i.s();case 5:if((a=i.n()).done){t.n=9;break}if(u=a.value,s=u.start,c=u.end,!this._hasReleased){t.n=6;break}throw new Error("BatchFontScanner was released during scanning. Operation aborted.");case 6:return l=performance.now(),t.n=7,this._processBatch(e.slice(s,c),n,r);case 7:if(f=performance.now()-l,ue.trace("Batch processed (".concat(s,"-").concat(c,") in ").concat(f.toFixed(2),"ms.")),!(c<e.length)){t.n=8;break}return t.n=8,this._delay(this.timeoutGap);case 8:t.n=5;break;case 9:t.n=11;break;case 10:t.p=10,d=t.v,i.e(d);case 11:return t.p=11,i.f(),t.f(11);case 12:if(!this._hasReleased){t.n=13;break}throw new Error("BatchFontScanner was released after scanning. Operation aborted.");case 13:return t.a(2,r)}}),t,this,[[4,10,11,12]])}))),function(t,n){return e.apply(this,arguments)})},{key:"_processBatch",value:(t=aE(rE().m((function t(e,n,r){var o,i,a,u,s,c;return rE().w((function(t){for(;;)switch(t.n){case 0:o=eE(e),t.p=1,o.s();case 2:if((i=o.n()).done){t.n=7;break}if(a=i.value,!this._hasReleased){t.n=3;break}throw new Error("BatchFontScanner was released during batch processing. Operation aborted.");case 3:return t.p=3,t.n=4,null===(u=this.detector)||void 0===u?void 0:u.detect(a,n);case 4:t.v&&r.push(a),t.n=6;break;case 5:t.p=5,s=t.v,ue.error('Error detecting font "'.concat(a,'":'),s);case 6:t.n=2;break;case 7:t.n=9;break;case 8:t.p=8,c=t.v,o.e(c);case 9:return t.p=9,o.f(),t.f(9);case 10:return t.a(2)}}),t,this,[[3,5],[1,8,9,10]])}))),function(e,n,r){return t.apply(this,arguments)})},{key:"_createBatchIndices",value:function(t,e){return Array.from({length:Math.ceil(t/e)},(function(n,r){return{start:r*e,end:Math.min((r+1)*e,t)}}))}},{key:"_delay",value:function(t){return new Promise((function(e){return setTimeout(e,t)}))}}]);var t,e,n}();var lE=function(t){var e,n,r,o,i=t.utils,a=t.domUtils,u=t.configurationRepository,s=t.fontVersion,c=t.fontDetector,l=void 0===c?null:c,f=u.get(dt);if(s===IS.VERSION1)return f?new $w(a):new Qw(a);var d=JSON.parse(u.get(vt)||"{}"),h=new Rw(a),p=null!==(e=null==d||null===(n=d.v2)||void 0===n?void 0:n.batchSize)&&void 0!==e?e:10,y=null!==(r=null==d||null===(o=d.v2)||void 0===o?void 0:o.timeoutGap)&&void 0!==r?r:0;return new cE({utils:i,domUtils:a,detector:null!=l?l:h.getBestDetector(),batchSize:p,timeoutGap:y})};function fE(t){return fE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fE(t)}function dE(t){return function(t){if(Array.isArray(t))return yE(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||pE(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hE(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,e)||pE(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pE(t,e){if(t){if("string"==typeof t)return yE(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yE(t,e):void 0}}function yE(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function mE(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return vE(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,u=0,s=t,d.n=n,a}};function h(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=d.p,p=i[2];n>3?(o=p===r)&&(u=i[4]||3,s=i[5]===t?i[3]:i[5],i[4]=3,i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,d.v=r,d.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,d.n=p,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),u=l,s=p;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(d.n=-1),h(u,s)):d.n=s:d.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(vE(e={},r,(function(){return this})),e),f=c.prototype=u.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,vE(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,vE(f,"constructor",c),vE(c,"constructor",s),s.displayName="GeneratorFunction",vE(c,o,"GeneratorFunction"),vE(f),vE(f,o,"Generator"),vE(f,r,(function(){return this})),vE(f,"toString",(function(){return"[object Generator]"})),(mE=function(){return{w:i,m:d}})()}function vE(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}vE=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){vE(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},vE(t,e,n,r)}function bE(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function gE(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){bE(i,r,o,a,u,"next",t)}function u(t){bE(i,r,o,a,u,"throw",t)}a(void 0)}))}}function _E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,SE(r.key),r)}}function SE(t){var e=function(t,e){if("object"!=fE(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=fE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fE(e)?e:e+""}var wE=function(){return function(t,e,n){return e&&_E(t.prototype,e),n&&_E(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n,r,o,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)throw new Error("CDUtils instance is required.");if(!n)throw new Error("DOMUtils instance is required.");if(!r)throw new Error("DataQueue instance is required.");if(!o)throw new Error("ConfigurationRepository instance is required.");if(!Object.values(IS).includes(i))throw new Error("Invalid font version type. Use one of: ".concat(Object.keys(IS).join(", ")));this._logsTag="[FONTS-COLLECTOR][".concat(i,"]"),this._utils=e,this._domUtils=n,this._dataQueue=r,this._configRepo=o,this._fontVersion=i,this._fontScanner=null!=a?a:lE({utils:e,domUtils:n,configurationRepository:o,fontVersion:i,fontDetector:c}),this._fontsProvider=u||new XS,this._fontCache=s||new FS(e.StorageUtils),this._fontCacheExpiration=864e5}),[{key:"collectFonts",value:(e=gE(mE().m((function t(){var e,n,r,o,i,a,u,s,c,l,f,d;return mE().w((function(t){for(;;)switch(t.n){case 0:if(ue.info("".concat(this._logsTag," Starting font collection.")),r=this._fontCache.getStoredFonts(this._fontVersion),o=null!==(e=null==r?void 0:r.installedFonts)&&void 0!==e?e:r,i=null!==(n=null==r?void 0:r.scannedAt)&&void 0!==n?n:-1,ue.debug("".concat(this._logsTag," Cached fonts retrieved: ").concat(JSON.stringify(o))),t.p=1,a=Date.now()-i>this._fontCacheExpiration,!o||a){t.n=2;break}return ue.info("".concat(this._logsTag," Font collection complete using valid cache.")),t.a(2,o);case 2:return t.n=3,this._scanForInstalledFonts();case 3:if(u=t.v,s=u.installedFonts,c=u.scannedAt,l=u.scanTime,f=u.totalFontsScanned,!this._collectorHasStopped){t.n=4;break}return t.a(2);case 4:return ue.debug("".concat(this._logsTag," Detected fonts: ").concat(JSON.stringify(s))),this._fontCache.saveFonts({installedFonts:s,scannedAt:c},this._fontVersion),ue.debug("".concat(this._logsTag," Font cache updated with new fonts.")),ue.info("".concat(this._logsTag," Font collection complete. Scan time: ").concat(l,"ms. Total Fonts Scanned: ").concat(f," Total Installed Fonts: ").concat(s.length)),t.a(2,s);case 5:t.p=5,d=t.v,ue.error("".concat(this._logsTag," Error during font collection:"),d);case 6:return t.a(2)}}),t,this,[[1,5]])}))),function(){return e.apply(this,arguments)})},{key:"release",value:function(){this._collectorHasStopped=!0,this._fontScanner.release()}},{key:"_scanForInstalledFonts",value:(t=gE(mE().m((function t(){var e,n,r,o,i,a,u,s,c,l,f;return mE().w((function(t){for(;;)switch(t.n){case 0:ue.info("".concat(this._logsTag," Starting font scanning process.")),e=Date.now(),n=this._fontsProvider.getFontsByVersion(this._fontVersion),r=[],o=0,i=Object.entries(n);case 1:if(!(o<i.length)){t.n=4;break}return a=hE(i[o],2),u=a[0],s=a[1],t.n=2,this._fontScanner.scan(s,u);case 2:c=t.v,r.push.apply(r,dE(c));case 3:o++,t.n=1;break;case 4:return l=Date.now()-e,f=Object.values(n).reduce((function(t,e){return t+e.length}),0),t.a(2,{installedFonts:r,scanTime:l,scannedAt:Date.now(),totalFontsScanned:f,totalFontsFound:r.length})}}),t,this)}))),function(){return t.apply(this,arguments)})}]);var t,e}();function EE(t){return EE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},EE(t)}function kE(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return PE(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,u=0,s=t,d.n=n,a}};function h(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=d.p,p=i[2];n>3?(o=p===r)&&(u=i[4]||3,s=i[5]===t?i[3]:i[5],i[4]=3,i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,d.v=r,d.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,d.n=p,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),u=l,s=p;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(d.n=-1),h(u,s)):d.n=s:d.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(PE(e={},r,(function(){return this})),e),f=c.prototype=u.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,PE(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,PE(f,"constructor",c),PE(c,"constructor",s),s.displayName="GeneratorFunction",PE(c,o,"GeneratorFunction"),PE(f),PE(f,o,"Generator"),PE(f,r,(function(){return this})),PE(f,"toString",(function(){return"[object Generator]"})),(kE=function(){return{w:i,m:d}})()}function PE(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}PE=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){PE(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},PE(t,e,n,r)}function TE(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function OE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,CE(r.key),r)}}function CE(t){var e=function(t,e){if("object"!=EE(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=EE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==EE(e)?e:e+""}function ME(t,e,n){return e=jE(e),function(t,e){if(e&&("object"==EE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,BE()?Reflect.construct(e,n||[],jE(t).constructor):e.apply(t,n))}function BE(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(BE=function(){return!!t})()}function jE(t){return jE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jE(t)}function RE(t,e){return RE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},RE(t,e)}var AE={configKey:"isFonts",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!0,isFrameRelated:!1,runInUns:!0,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},IE=function(t){function e(t,n,r,o){var i,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=ME(this,e))._logsTag="[FONTS-COLLECTOR][MAIN]",!t)throw new Error("CDUtils instance is required.");if(!n)throw new Error("DOMUtils instance is required.");if(!r)throw new Error("DataQueue instance is required.");if(!o)throw new Error("ConfigurationRepository instance is required.");return i._utils=t,i._domUtils=n,i._dataQueue=r,i._configRepo=o,i._v1Collector=a,i._v2Collector=u,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RE(t,e)}(e,t),function(t,e,n){return e&&OE(t.prototype,e),n&&OE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:(n=kE().m((function t(){var e,n,r,o,i,a,u,s,c,l;return kE().w((function(t){for(;;)switch(t.n){case 0:if(ue.info("".concat(this._logsTag," Starting font collection.")),!this._isMobileDevice()){t.n=1;break}return ue.info("".concat(this._logsTag," Mobile phone has detected. aborting font detection.")),t.a(2);case 1:if(this._v1Collector||(this._v1Collector=new wE(this._utils,this._domUtils,this._dataQueue,this._configRepo,IS.VERSION1)),this._v2Collector||(this._v2Collector=new wE(this._utils,this._domUtils,this._dataQueue,this._configRepo,IS.VERSION2)),n=this._configRepo.get(vt)||"{}",r=JSON.parse(n),(o=null!==(e=r.migrationMode)&&void 0!==e?e:Br.DUAL_COLLECTION_V1_PRIORITY)!==Br.V1_ONLY){t.n=3;break}return t.n=2,this._v1Collector.collectFonts();case 2:return i=t.v,this._enqueueFontData(AS.V1_ONLY,[i,null]),t.a(2);case 3:if(o!==Br.DUAL_COLLECTION_V1_PRIORITY){t.n=6;break}return t.n=4,this._v1Collector.collectFonts();case 4:return a=t.v,this._enqueueFontData(AS.V1_ONLY,[a,null]),t.n=5,this._v2Collector.collectFonts();case 5:u=t.v,this._enqueueFontData(AS.V1_AND_V2,[a,u]);case 6:if(o!==Br.DUAL_COLLECTION_V2_PRIORITY){t.n=9;break}return t.n=7,this._v2Collector.collectFonts();case 7:return s=t.v,this._enqueueFontData(AS.V2_ONLY,[null,s]),t.n=8,this._v1Collector.collectFonts();case 8:c=t.v,this._enqueueFontData(AS.V1_AND_V2,[c,s]);case 9:if(o!==Br.V2_ONLY){t.n=11;break}return t.n=10,this._v2Collector.collectFonts();case 10:l=t.v,this._enqueueFontData(AS.V2_ONLY,[null,l]);case 11:return t.a(2)}}),t,this)})),r=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){TE(i,r,o,a,u,"next",t)}function u(t){TE(i,r,o,a,u,"throw",t)}a(void 0)}))},function(){return r.apply(this,arguments)})},{key:"stopFeature",value:function(){var t,e;this._collectorHasStopped=!0,null===(t=this._v1Collector)||void 0===t||t.release(),null===(e=this._v2Collector)||void 0===e||e.release(),this._v1Collector=null,this._v2Collector=null}},{key:"_enqueueFontData",value:function(t,e){if(!this._collectorHasStopped){if(!e)throw Error("IllegalState fonts undefined");var n=new RS(t,e).buildQueueMessage();this._dataQueue.addToQueue("static_fields",n,!1),ue.debug("".concat(this._logsTag," Fonts enqueued: ").concat(JSON.stringify(e)))}}},{key:"_isMobileDevice",value:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}}],[{key:"getDefaultSettings",value:function(){return AE}}]);var n,r}(Io);function xE(t){return xE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xE(t)}function NE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,LE(r.key),r)}}function LE(t){var e=function(t,e){if("object"!=xE(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=xE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xE(e)?e:e+""}function DE(t,e,n){return e=UE(e),function(t,e){if(e&&("object"==xE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,FE()?Reflect.construct(e,n||[],UE(t).constructor):e.apply(t,n))}function FE(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(FE=function(){return!!t})()}function UE(t){return UE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},UE(t)}function GE(t,e){return GE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},GE(t,e)}var HE=function(t){function e(t,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=DE(this,e)).validateParams(t,n,r),o.winding=t,o.text=n,o.geometry=r,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GE(t,e)}(e,t),function(t,e,n){return e&&NE(t.prototype,e),n&&NE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t,e,n){if(!("boolean"==typeof t&&"string"==typeof e&&"string"==typeof n)){var r="wrong type in GfxRenderingContract parameters. winding: {expected: boolean, received: ".concat(xE(t),"}, text: {expected: string, received: ").concat(xE(e),"},\n            geometry: {expected: string, received: ").concat(xE(n),"}");ue.warn(r)}}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),[this.winding,this.text,this.geometry]];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&Array.isArray(t[1])&&3===t[1].length||ue.warn("GfxRendering - Contract verification failed")}},{key:"getName",value:function(){return"gfx"}}])}(ym);function WE(t){return WE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},WE(t)}function VE(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return QE(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?QE(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QE(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function zE(t,e,n){return e=qE(e),function(t,e){if(e&&("object"==WE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,KE()?Reflect.construct(e,n||[],qE(t).constructor):e.apply(t,n))}function KE(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(KE=function(){return!!t})()}function qE(t){return qE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qE(t)}function XE(t,e){return XE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},XE(t,e)}function JE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ZE(r.key),r)}}function YE(t,e,n){return e&&JE(t.prototype,e),n&&JE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ZE(t){var e=function(t,e){if("object"!=WE(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=WE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==WE(e)?e:e+""}function $E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var tk={configKey:"isGfxRendering",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInUns:!1,runInSlave:!0,runInLean:!0,isRunning:!1,instance:null},ek=256,nk=256,rk="0",ok=YE((function t(){$E(this,t),this.winding=!1,this.text="",this.geometry=""})),ik=function(t){function e(t,n){var r;return $E(this,e),(r=zE(this,e))._dataQ=t,r._utils=n,r._metric="GFX",r.canvasElement=null,r.canvasContext=null,r._addToQueueAndCleanUp=r.addToQueueAndCleanUp.bind(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XE(t,e)}(e,t),YE(e,[{key:"startFeature",value:function(){this.initCanvasAndContext(),this.isCanvas2DSupported(this.canvasElement,this.canvasContext)&&this.generateCanvasData()}},{key:"addToQueueAndCleanUp",value:function(t){var e=new HE(t.winding,t.text,t.geometry).buildQueueMessage();this._dataQ.addToQueue("static_fields",e,!1),this.cleanUp()}},{key:"initCanvasAndContext",value:function(){null!==this.canvasElement&&null!==this.canvasContext||(this.canvasElement=document.createElement("canvas"),this.canvasContext=this.buildCanvasContext(this.canvasElement))}},{key:"cleanUp",value:function(){this.canvasContext=null,this.canvasElement=null}},{key:"generateCanvasData",value:function(){var t=this,e=new ok;e.winding=this.hasWinding(this.canvasContext),this.renderTextImage(this.canvasElement,this.canvasContext);var n=this.canvasToText(this.canvasElement),r=this.canvasToText(this.canvasElement);0===n.length||0===r.length||n!==r?(e.text=rk,e.geometry=rk,this._addToQueueAndCleanUp(e)):this.hashCanvasText(n).then((function(n){return e.text=n||rk,t.renderGeometryImage(t.canvasElement,t.canvasContext),t.hashCanvasText(t.canvasToText(t.canvasElement))})).then((function(n){e.geometry=n||rk,t._addToQueueAndCleanUp(e)}))}},{key:"buildCanvasContext",value:function(t){return t.width=1,t.height=1,t.getContext("2d")}},{key:"isCanvas2DSupported",value:function(t,e){return!(!e||!t.toDataURL)}},{key:"renderTextImage",value:function(t,e){t.width=320,t.height=120;var n=e.createLinearGradient(0,0,320,120);n.addColorStop(0,"#f60"),n.addColorStop(1,"#069"),e.fillStyle=n,e.fillRect(0,0,320,120),e.textBaseline="alphabetic",e.fillStyle="#fff",e.font="11pt Times New Roman";var r="DHO YbmPx KTGUL CQrSfJ iNvZAEW ".concat(String.fromCharCode(55357,56835)," 😄 💩 ⚓ ↔");e.fillText(r,2,15),e.save(),e.translate(4,45),e.rotate(.1),e.font="18pt Arial",e.fillStyle="rgba(102, 204, 0, 0.7)",e.fillText(r,0,0),e.restore(),e.font="14pt Georgia",e.shadowColor="rgba(0, 0, 0, 0.5)",e.shadowBlur=2,e.shadowOffsetX=1,e.shadowOffsetY=1,e.fillStyle="#ff0",e.save(),e.transform(1,.1,0,1,0,0),e.fillText(r,2,75),e.restore(),e.shadowColor="transparent";var o=e.createPattern(this.createPatternCanvas(),"repeat");e.font="16pt Verdana",e.fillStyle=o,e.fillText(r,2,100)}},{key:"createPatternCanvas",value:function(){var t=document.createElement("canvas");t.width=20,t.height=20;var e=t.getContext("2d");return e.fillStyle="#f00",e.fillRect(0,0,10,10),e.fillStyle="#00f",e.fillRect(10,10,10,10),t}},{key:"renderGeometryImage",value:function(t,e){t.width=ek,t.height=nk;var n=e.createRadialGradient(128,128,0,128,128,128);n.addColorStop(0,"#f2f"),n.addColorStop(.5,"#2ff"),n.addColorStop(1,"#ff2"),e.fillStyle=n,e.fillRect(0,0,ek,nk),e.globalCompositeOperation="multiply";for(var r=0,o=[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]];r<o.length;r++){var i=VE(o[r],3),a=i[0],u=i[1],s=i[2];e.fillStyle=a,e.beginPath(),e.arc(u,s,40,0,2*Math.PI,!0),e.closePath(),e.fill()}e.globalCompositeOperation="screen",e.fillStyle="#f9c",e.beginPath(),e.arc(60,60,60,0,2*Math.PI,!0),e.arc(60,60,20,0,2*Math.PI,!0),e.fill("evenodd"),e.globalCompositeOperation="difference",e.beginPath(),e.moveTo(20,20),e.bezierCurveTo(40,40,60,40,80,20),e.strokeStyle="#0f0",e.lineWidth=3,e.stroke(),e.globalCompositeOperation="luminosity";for(var c=0;c<5;c++)e.beginPath(),e.moveTo(0,50*c),e.lineTo(ek,50*c),e.strokeStyle="rgba(255, 255, 255, ".concat(.2+.1*c,")"),e.stroke()}},{key:"canvasToText",value:function(t){try{return t.toDataURL().split(",")[1]}catch(t){return""}}},{key:"hashCanvasText",value:function(t){return this._utils.digest_sha256(t).then((function(t){return t})).catch((function(){return""}))}},{key:"hasWinding",value:function(t){return t.rect(0,0,10,10),t.rect(2,2,6,6),!t.isPointInPath(5,5,"evenodd")}}],[{key:"getDefaultSettings",value:function(){return tk}}])}(Io);function ak(t){return ak="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ak(t)}function uk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sk(r.key),r)}}function sk(t){var e=function(t,e){if("object"!=ak(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ak(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ak(e)?e:e+""}function ck(t,e,n){return e=fk(e),function(t,e){if(e&&("object"==ak(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,lk()?Reflect.construct(e,n||[],fk(t).constructor):e.apply(t,n))}function lk(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(lk=function(){return!!t})()}function fk(t){return fk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fk(t)}function dk(t,e){return dk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},dk(t,e)}var hk=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ck(this,e)).validateParams(t),n.acoustic=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dk(t,e)}(e,t),function(t,e,n){return e&&uk(t.prototype,e),n&&uk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"string"==typeof t||ue.warn("wrong type in AudioDetect parameters. renderer: {expected: string, received: ".concat(ak(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.acoustic];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"string"==typeof t[1]||ue.warn("AudioDetect - Contract verification failed")}},{key:"getName",value:function(){return"audio_detect"}}])}(ym);function pk(t){return pk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pk(t)}function yk(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return mk(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,u=0,s=t,d.n=n,a}};function h(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=d.p,p=i[2];n>3?(o=p===r)&&(u=i[4]||3,s=i[5]===t?i[3]:i[5],i[4]=3,i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,d.v=r,d.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,d.n=p,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),u=l,s=p;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(d.n=-1),h(u,s)):d.n=s:d.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(mk(e={},r,(function(){return this})),e),f=c.prototype=u.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,mk(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,mk(f,"constructor",c),mk(c,"constructor",s),s.displayName="GeneratorFunction",mk(c,o,"GeneratorFunction"),mk(f),mk(f,o,"Generator"),mk(f,r,(function(){return this})),mk(f,"toString",(function(){return"[object Generator]"})),(yk=function(){return{w:i,m:d}})()}function mk(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}mk=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){mk(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},mk(t,e,n,r)}function vk(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function bk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gk(r.key),r)}}function gk(t){var e=function(t,e){if("object"!=pk(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=pk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pk(e)?e:e+""}function _k(t,e,n){return e=wk(e),function(t,e){if(e&&("object"==pk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Sk()?Reflect.construct(e,n||[],wk(t).constructor):e.apply(t,n))}function Sk(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Sk=function(){return!!t})()}function wk(t){return wk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wk(t)}function Ek(t,e){return Ek=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ek(t,e)}var kk={configKey:"isAudioDetectFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInUns:!1,runInSlave:!0,runInLean:!0,isRunning:!1,instance:null},Pk=1,Tk=5e3,Ok=44100,Ck="triangle",Mk=1e4,Bk={threshold:-50,knee:40,ratio:12,attack:0,release:.25},jk=500,Rk=3,Ak=4500,Ik=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=_k(this,e))._dataQ=t,r._utils=n,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ek(t,e)}(e,t),function(t,e,n){return e&&bk(t.prototype,e),n&&bk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){ue.info("Starting Audio Detection Feature");try{this._collectAudioFingerprintInfo()}catch(t){ue.error("Failed to collect audio information: ".concat(t))}}},{key:"_collectAudioFingerprintInfo",value:function(){var t=this;ue.info("Collecting audio properties"),this._getAudioFingerprint().then((function(e){return t._utils.digest_sha256(e)})).then((function(e){var n=new hk(e).buildQueueMessage();t._dataQ.addToQueue("static_fields",n,!1),ue.info("Audio properties collected successfully")})).catch((function(t){ue.error("Error collecting audio information: ".concat(t))}))}},{key:"_getAudioFingerprint",value:(n=yk().m((function t(){var e,n,r,o,i;return yk().w((function(t){for(;;)switch(t.n){case 0:if(t.p=0,e=window.OfflineAudioContext||window.webkitOfflineAudioContext){t.n=1;break}throw new Error("AudioContext is not supported");case 1:return n=new e(Pk,Tk,Ok),r=n.createOscillator(),o=n.createDynamicsCompressor(),r.type=Ck,r.frequency.value=Mk,o.threshold.value=Bk.threshold,o.knee.value=Bk.knee,o.ratio.value=Bk.ratio,o.attack.value=Bk.attack,o.release.value=Bk.release,r.connect(o),o.connect(n.destination),r.start(0),t.a(2,this._renderAudio(n).then((function(t){return t.getChannelData(0).subarray(Ak).toString()})));case 2:throw t.p=2,i=t.v,ue.error("Error initializing audio fingerprint: ".concat(i)),i;case 3:return t.a(2)}}),t,this,[[0,2]])})),r=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){vk(i,r,o,a,u,"next",t)}function u(t){vk(i,r,o,a,u,"throw",t)}a(void 0)}))},function(){return r.apply(this,arguments)})},{key:"_renderAudio",value:function(t){var e=jk,n=Rk,r=0;return new Promise((function(o,i){var a=function(){try{var u=t.startRendering();"running"===t.state?o(u):"suspended"!==t.state||document.hidden||(++r<n?setTimeout(a,e):i(new Error("Audio context suspended")))}catch(t){i(t)}};a()}))}}],[{key:"getDefaultSettings",value:function(){return kk}}]);var n,r}(Io);function xk(t){return xk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xk(t)}function Nk(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return Lk(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,u=0,s=t,d.n=n,a}};function h(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=d.p,p=i[2];n>3?(o=p===r)&&(u=i[4]||3,s=i[5]===t?i[3]:i[5],i[4]=3,i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,d.v=r,d.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,d.n=p,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),u=l,s=p;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(d.n=-1),h(u,s)):d.n=s:d.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Lk(e={},r,(function(){return this})),e),f=c.prototype=u.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Lk(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,Lk(f,"constructor",c),Lk(c,"constructor",s),s.displayName="GeneratorFunction",Lk(c,o,"GeneratorFunction"),Lk(f),Lk(f,o,"Generator"),Lk(f,r,(function(){return this})),Lk(f,"toString",(function(){return"[object Generator]"})),(Nk=function(){return{w:i,m:d}})()}function Lk(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Lk=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){Lk(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},Lk(t,e,n,r)}function Dk(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function Fk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Uk(r.key),r)}}function Uk(t){var e=function(t,e){if("object"!=xk(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=xk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xk(e)?e:e+""}function Gk(t,e,n){return e=Wk(e),function(t,e){if(e&&("object"==xk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Hk()?Reflect.construct(e,n||[],Wk(t).constructor):e.apply(t,n))}function Hk(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Hk=function(){return!!t})()}function Wk(t){return Wk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wk(t)}function Vk(t,e){return Vk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Vk(t,e)}var Qk={configKey:"enableEmuidFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},zk=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Gk(this,e))._encryptedMuidService=n,r._dataQ=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vk(t,e)}(e,t),function(t,e,n){return e&&Fk(t.prototype,e),n&&Fk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:(n=Nk().m((function t(){var e;return Nk().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this._encryptedMuidService.getEncryptedMuid();case 1:(e=t.v)&&this._dataQ.addToQueue("static_fields",["emuid",e],!1);case 2:return t.a(2)}}),t,this)})),r=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){Dk(i,r,o,a,u,"next",t)}function u(t){Dk(i,r,o,a,u,"throw",t)}a(void 0)}))},function(){return r.apply(this,arguments)})}],[{key:"getDefaultSettings",value:function(){return Qk}}]);var n,r}(Io);function Kk(t){return Kk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kk(t)}function qk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xk(r.key),r)}}function Xk(t){var e=function(t,e){if("object"!=Kk(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Kk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Kk(e)?e:e+""}function Jk(t,e,n){return e=Zk(e),function(t,e){if(e&&("object"==Kk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Yk()?Reflect.construct(e,n||[],Zk(t).constructor):e.apply(t,n))}function Yk(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Yk=function(){return!!t})()}function Zk(t){return Zk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zk(t)}function $k(t,e){return $k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$k(t,e)}var tP={configKey:"isNavigatorFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!0,runInLean:!1,isRunning:!1,instance:null},eP=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.navigator;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Jk(this,e))._dataQ=t,n._navigator=r,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$k(t,e)}(e,t),function(t,e,n){return e&&qk(t.prototype,e),n&&qk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){try{var t,e={oscpu:this._navigator.oscpu||null,pdfViewerEnabled:this._navigator.pdfViewerEnabled||null,webdriver:this._navigator.webdriver||null,userAgentData:this._navigator.userAgentData||null,appVersion:this._navigator.appVersion||null,platform:this._navigator.platform||null,vendor:this._navigator.vendor||null,productSub:this._navigator.productSub||null,vendorSub:this._navigator.vendorSub||null,onLine:this._navigator.onLine||null,getHighEntropyValues:Boolean(null===(t=this._navigator.userAgentData)||void 0===t?void 0:t.getHighEntropyValues),prototype:Object.getOwnPropertyNames(Object.getPrototypeOf(this._navigator))};ue.debug("NavigatorFeature: Collected navigator data",e),this._dataQ.addToQueue("static_fields",["navigator_oscpu",e.oscpu],!1),this._dataQ.addToQueue("static_fields",["navigator_pdfViewerEnabled",e.pdfViewerEnabled],!1),this._dataQ.addToQueue("static_fields",["navigator_webdriver",e.webdriver],!1),this._dataQ.addToQueue("static_fields",["navigator_userAgentData",e.userAgentData],!1),this._dataQ.addToQueue("static_fields",["navigator_appVersion",e.appVersion],!1),this._dataQ.addToQueue("static_fields",["navigator_platform",e.platform],!1),this._dataQ.addToQueue("static_fields",["navigator_vendor",e.vendor],!1),this._dataQ.addToQueue("static_fields",["navigator_productSub",e.productSub],!1),this._dataQ.addToQueue("static_fields",["navigator_vendorSub",e.vendorSub],!1),this._dataQ.addToQueue("static_fields",["navigator_onLine",e.onLine],!1),this._dataQ.addToQueue("static_fields",["navigator_getHighEntropyValues",e.getHighEntropyValues],!1),this._dataQ.addToQueue("static_fields",["navigator_prototype",e.prototype],!1)}catch(t){ue.error("NavigatorFeature: Error collecting navigator data",t)}}}],[{key:"getDefaultSettings",value:function(){return tP}}])}(Io),nP={abpIndo:["#Iklan-Melayang","#Kolom-Iklan-728","#SidebarIklan-wrapper",'a[title="7naga poker" i]','[title="ALIENBOLA" i]'],abpvn:["#quangcaomb",".i-said-no-thing-can-stop-me-warning.dark",".quangcao",'[href^="https://r88.vn/"]','[href^="https://zbet.vn/"]'],adBlockFinland:[".mainostila",".sponsorit",".ylamainos",'a[href*="/clickthrgh.asp?"]','a[href^="https://app.readpeak.com/ads"]'],adBlockPersian:["#navbar_notice_50",'a[href^="http://g1.v.fwmrm.net/ad/"]',".kadr",'TABLE[width="140px"]',"#divAgahi"],adBlockWarningRemoval:["#adblock_message",".adblockInfo",".deadblocker-header-bar",".no-ad-reminder","#AdBlockDialog"],adGuardAnnoyances:['amp-embed[type="zen"]',".hs-sosyal","#cookieconsentdiv",'div[class^="app_gdpr"]',".as-oil"],adGuardBase:["#ad-fullbanner2-billboard-outer",".stky-ad-footer",".BetterJsPopOverlay","#ad_300X250","#bannerfloat22"],adGuardChinese:['#piao_div_0[style*="width:140px;"]','a[href*=".ttz5.cn"]','a[href*=".yabovip2027.com/"]',".tm3all2h4b","#duilian_left"],adGuardFrench:["#anAdScGp300x25",'a[href*=".kfiopkln.com/"]','a[href^="https://jsecoin.com/o/?"]','a[href^="https://www.clickadu.com/?"]',".bandeauClosePub"],adGuardGerman:[".banneritemwerbung_head_1",".boxstartwerbung",".werbung3",'a[href^="http://www.eis.de/index.phtml?refid="]','a[href^="https://www.tipico.com/?affiliateId="]'],adGuardJapanese:["#kauli_yad_1",".adArticleSidetile",".ads_entrymore",'a[href^="http://ad2.trafficgate.net/"]','a[href^="http://www.rssad.jp/"]'],adGuardMobile:["amp-auto-ads","#mgid_iframe",".amp_ad","amp-sticky-ad",".plugin-blogroll"],adGuardRussian:['a[href^="https://ya-distrib.ru/r/"]','a[href^="https://ad.letmeads.com/"]',".reclama",'div[id^="smi2adblock"]','div[id^="AdFox_banner_"]'],adGuardSocial:['a[href^="//www.stumbleupon.com/submit?url="]','a[href^="//telegram.me/share/url?"]',".etsy-tweet","#inlineShare",".popup-social"],adGuardSpanishPortuguese:["#barraPublicidade","#Publicidade","#publiEspecial","#queTooltip",'[href^="http://ads.glispa.com/"]'],adGuardTrackingProtection:['amp-embed[type="taboola"]',"#qoo-counter",'a[href^="http://click.hotlog.ru/"]','a[href^="http://hitcounter.ru/top/stat.php"]','a[href^="http://top.mail.ru/jump"]'],adGuardTurkish:["#backkapat","#reklami",'a[href^="http://adserv.ontek.com.tr/"]','a[href^="http://izlenzi.com/campaign/"]','a[href^="http://www.installads.net/"]'],bulgarian:["td#freenet_table_ads","#newAd","#ea_intext_div",".lapni-pop-over","#xenium_hot_offers"],easyList:["#adlabelheader","#anAdScGame300x250","#adTakeOverLeft","#ad_LargeRec01","#adundergame"],easyListChina:['a[href*=".wensixuetang.com/"]','A[href*="/hth107.com/"]','.appguide-wrap[onclick*="bcebos.com"]',".frontpageAdvM","#taotaole"],easyListCookie:["#Button_Cookie","#CWCookie","#CookieCon","#DGPR","#PnlCookie"],easyListCzechSlovak:["#onlajny-stickers","#reklamni-box",".reklama-megaboard",".sklik",'[id^="sklikReklama"]'],easyListDutch:["#advertentie","#vipAdmarktBannerBlock",".adstekst",'a[href^="http://adserver.webads.nl/adclick/"]',"#semilo-lrectangle"],easyListGermany:["#nativendo-hometop",'a[href^="http://www.kontakt-vermittler.de/?wm="]',"#gwerbung",'a[href^="https://marketing.net.brillen.de/"]',".werbenbox"],easyListItaly:[".box_adv_annunci",".sb-box-pubbliredazionale",'a[href^="http://affiliazioniads.snai.it/"]','a[href^="https://adserver.html.it/"]','a[href^="https://affiliazioniads.snai.it/"]'],easyListLithuania:[".reklamos_tarpas",".reklamos_nuorodos",'img[alt="Reklaminis skydelis"]','img[alt="Dedikuoti.lt serveriai"]','img[alt="Hostingas Serveriai.lt"]'],estonian:['A[href*="http://pay4results24.eu"]'],fanboyAnnoyances:["#feedback-tab","#taboola-below-article",".feedburnerFeedBlock",".widget-feedburner-counter",'[title="Subscribe to our blog"]'],fanboyAntiFacebook:[".util-bar-module-firefly-visible"],fanboyEnhancedTrackers:[".open.pushModal","#issuem-leaky-paywall-articles-zero-remaining-nag",'div[style*="box-shadow: rgb(136, 136, 136) 0px 0px 12px; color: "]','div[class$="-hide"][zoompage-fontsize][style="display: block;"]',".BlockNag__Card"],fanboySocial:[".td-tags-and-social-wrapper-box",".twitterContainer",".youtube-social",'a[title^="Like us on Facebook"]','img[alt^="Share on Digg"]'],frellwitSwedish:['a[href*="casinopro.se"][target="_blank"]','a[href*="doktor-se.onelink.me"]',"article.category-samarbete","div.holidAds","ul.adsmodern"],greekAdBlock:['A[href*="adman.otenet.gr/click?"]','A[href*="http://axiabanners.exodus.gr/"]','A[href*="http://interactive.forthnet.gr/click?"]',"DIV.agores300","TABLE.advright"],hungarian:['A[href*="ad.eval.hu"]','A[href*="ad.netmedia.hu"]','A[href*="daserver.ultraweb.hu"]',"#cemp_doboz",".optimonk-iframe-container"],iDontCareAboutCookies:['.alert-info[data-block-track*="CookieNotice"]',".ModuleTemplateCookieIndicator",".o--cookies--container",".cookie-msg-info-container","#cookies-policy-sticky"],icelandicAbp:['A[href^="/framework/resources/forms/ads.aspx"]'],latvian:['a[href="http://www.salidzini.lv/"][style="display: block; width: 120px; height: 40px; overflow: hidden; position: relative;"]','a[href="http://www.salidzini.lv/"][style="display: block; width: 88px; height: 31px; overflow: hidden; position: relative;"]'],listKr:['a[href*="//kingtoon.slnk.kr"]','a[href*="//playdsb.com/kr"]',"div.logly-lift-adz",'div[data-widget_id="ml6EJ074"]',"ins.daum_ddn_area"],listeAr:[".geminiLB1Ad",".right-and-left-sponsers",'a[href*=".aflam.info"]','a[href*="booraq.org"]','a[href*="dubizzle.com/ar/?utm_source="]'],listeFr:['a[href^="http://promo.vador.com/"]',"#adcontainer_recherche",'a[href*="weborama.fr/fcgi-bin/"]',".site-pub-interstitiel",'div[id^="crt-"][data-criteo-id]'],officialPolish:["#ceneo-placeholder-ceneo-12",'[href^="https://aff.sendhub.pl/"]','a[href^="http://advmanager.techfun.pl/redirect/"]','a[href^="http://www.trizer.pl/?utm_source"]',"div#skapiec_ad"],ro:['a[href^="//afftrk.altex.ro/Counter/Click"]','a[href^="/magazin/"]','a[href^="https://blackfridaysales.ro/trk/shop/"]','a[href^="https://event.2performant.com/events/click"]','a[href^="https://l.profitshare.ro/"]'],ruAd:['a[href*="//febrare.ru/"]','a[href*="//utimg.ru/"]','a[href*="://chikidiki.ru"]',"#pgeldiz",".yandex-rtb-block"],thaiAds:["a[href*=macau-uta-popup]","#ads-google-middle_rectangle-group",".ads300s",".bumq",".img-kosana"],webAnnoyancesUltralist:["#mod-social-share-2","#social-tools",".ctpl-fullbanner",".zergnet-recommend",".yt.btn-link.btn-md.btn"]};function rP(t){return rP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rP(t)}function oP(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=uP(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function iP(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,e)||uP(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aP(t){return function(t){if(Array.isArray(t))return sP(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||uP(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uP(t,e){if(t){if("string"==typeof t)return sP(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sP(t,e):void 0}}function sP(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function cP(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return lP(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,u=0,s=t,d.n=n,a}};function h(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=d.p,p=i[2];n>3?(o=p===r)&&(u=i[4]||3,s=i[5]===t?i[3]:i[5],i[4]=3,i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,d.v=r,d.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,d.n=p,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),u=l,s=p;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(d.n=-1),h(u,s)):d.n=s:d.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(lP(e={},r,(function(){return this})),e),f=c.prototype=u.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,lP(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,lP(f,"constructor",c),lP(c,"constructor",s),s.displayName="GeneratorFunction",lP(c,o,"GeneratorFunction"),lP(f),lP(f,o,"Generator"),lP(f,r,(function(){return this})),lP(f,"toString",(function(){return"[object Generator]"})),(cP=function(){return{w:i,m:d}})()}function lP(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}lP=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){lP(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},lP(t,e,n,r)}function fP(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function dP(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){fP(i,r,o,a,u,"next",t)}function u(t){fP(i,r,o,a,u,"throw",t)}a(void 0)}))}}function hP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pP(r.key),r)}}function pP(t){var e=function(t,e){if("object"!=rP(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=rP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rP(e)?e:e+""}function yP(t,e,n){return e=vP(e),function(t,e){if(e&&("object"==rP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,mP()?Reflect.construct(e,n||[],vP(t).constructor):e.apply(t,n))}function mP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(mP=function(){return!!t})()}function vP(t){return vP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vP(t)}function bP(t,e){return bP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},bP(t,e)}var gP={configKey:"isAdblockerListsFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},_P=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=yP(this,e))._dataQueue=t,n.debug=r.debug||!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bP(t,e)}(e,t),function(t,e,n){return e&&hP(t.prototype,e),n&&hP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:(o=dP(cP().m((function t(){var e,n;return cP().w((function(t){for(;;)switch(t.n){case 0:return ue.debug("Starting ad blocker lists detection"),t.p=1,t.n=2,this.detectActiveAdblockLists();case 2:e=t.v,this._sendData(e),t.n=4;break;case 3:t.p=3,n=t.v,ue.error("Error detecting ad blocker lists:",n);case 4:return t.a(2)}}),t,this,[[1,3]])}))),function(){return o.apply(this,arguments)})},{key:"stopFeature",value:function(){}},{key:"canRunDetection",value:function(){return!0}},{key:"_sendData",value:function(t){this._dataQueue.addToQueue("static_fields",["adblock_lists",t],!1)}},{key:"detectActiveAdblockLists",value:(r=dP(cP().m((function t(){var e,n,r,o,i,a,u,s,c,l,f,d,h,p,y;return cP().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,n=(e=[]).concat.apply(e,aP(Object.values(nP))),t.n=1,this.getBlockedSelectors(n);case 1:for(r=t.v,o=[],i=0,a=Object.entries(nP);i<a.length;i++){u=iP(a[i],2),s=u[0],c=u[1],l=0,f=oP(c);try{for(f.s();!(d=f.n()).done;)h=d.value,r.has(h)?(l++,ue.trace('Selector "'.concat(h,'" is blocked for filter "').concat(s,'".'))):ue.trace('Selector "'.concat(h,'" is not blocked for filter "').concat(s,'".'))}catch(t){f.e(t)}finally{f.f()}l>=2&&(o.push(s),ue.trace('Filter "'.concat(s,'" is considered active.')))}return p=o.sort(),ue.debug("Active ad blocker lists: "+p),t.a(2,p);case 2:return t.p=2,y=t.v,ue.error("Error in detectActiveAdblockLists:",y),t.a(2,[])}}),t,this,[[0,2]])}))),function(){return r.apply(this,arguments)})},{key:"getBlockedSelectors",value:(n=dP(cP().m((function t(e){var n,r,o,i,a,u,s,c,l,f,d;return cP().w((function(t){for(;;)switch(t.n){case 0:for((n=document.createElement("iframe")).style.position="absolute",n.style.width="0",n.style.height="0",n.style.opacity="0",document.body.appendChild(n),t.p=1,(r=n.contentDocument||n.contentWindow.document).body||(o=r.createElement("body"),r.documentElement.appendChild(o)),i=r.createElement("div"),a=new Array(e.length),u=new Set,s=0;s<e.length;s++)c=this.selectorToElement(e[s],r),(l=r.createElement("div")).appendChild(c),i.appendChild(l),a[s]=c;return r.body.appendChild(i),t.n=2,new Promise((function(t){return setTimeout(t,200)}));case 2:for(f=0;f<e.length;f++)a[f].offsetParent||u.add(e[f]);return t.a(2,u);case 3:return t.p=3,d=t.v,ue.error("Error in getBlockedSelectors:",d),t.a(2,new Set);case 4:return t.p=4,n.parentNode&&n.parentNode.removeChild(n),t.f(4);case 5:return t.a(2)}}),t,this,[[1,3,4,5]])}))),function(t){return n.apply(this,arguments)})},{key:"selectorToElement",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n=iP(this.parseSimpleCssSelector(t),2),r=n[0],o=n[1],i=e.createElement(r||"div");for(var a in o)o.hasOwnProperty(a)&&i.setAttribute(a,o[a].join(" "));return i}},{key:"parseSimpleCssSelector",value:function(t){var e=/^\s*([a-z-]*)(.*)$/i.exec(t);if(!e){var n="Unexpected syntax '".concat(t,"'");throw new Error(n)}for(var r,o=e[1]||void 0,i={},a=/([.:#][\w-]+|\[.+?\])/gi,u=function(t,e){i[t]||(i[t]=[]),i[t].push(e)};null!==(r=a.exec(e[2]));){var s=r[0];switch(s[0]){case".":u("class",s.slice(1));break;case"#":u("id",s.slice(1));break;case"[":var c=/^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(s);if(!c)throw new Error(errorMessage);u(c[1],c[4]||c[5]||"");break;default:throw new Error(errorMessage)}}return[o,i]}}],[{key:"getDefaultSettings",value:function(){return gP}}]);var n,r,o}(Io);function SP(t,e){var n=t[0]>>>16,r=65535&t[0],o=t[1]>>>16,i=65535&t[1],a=e[0]>>>16,u=65535&e[0],s=e[1]>>>16,c=0,l=0,f=0,d=0;f+=(d+=i+(65535&e[1]))>>>16,d&=65535,l+=(f+=o+s)>>>16,f&=65535,c+=(l+=r+u)>>>16,l&=65535,c+=n+a,c&=65535,t[0]=c<<16|l,t[1]=f<<16|d}function wP(t,e){var n=t[0]>>>16,r=65535&t[0],o=t[1]>>>16,i=65535&t[1],a=e[0]>>>16,u=65535&e[0],s=e[1]>>>16,c=65535&e[1],l=0,f=0,d=0,h=0;d+=(h+=i*c)>>>16,h&=65535,f+=(d+=o*c)>>>16,d&=65535,f+=(d+=i*s)>>>16,d&=65535,l+=(f+=r*c)>>>16,f&=65535,l+=(f+=o*s)>>>16,f&=65535,l+=(f+=i*u)>>>16,f&=65535,l+=n*c+r*s+o*u+i*a,l&=65535,t[0]=l<<16|f,t[1]=d<<16|h}function EP(t,e){var n=t[0];32===(e%=64)?(t[0]=t[1],t[1]=n):e<32?(t[0]=n<<e|t[1]>>>32-e,t[1]=t[1]<<e|n>>>32-e):(e-=32,t[0]=t[1]<<e|n>>>32-e,t[1]=n<<e|t[1]>>>32-e)}function kP(t,e){0!==(e%=64)&&(e<32?(t[0]=t[1]>>>32-e,t[1]=t[1]<<e):(t[0]=t[1]<<e-32,t[1]=0))}function PP(t,e){t[0]^=e[0],t[1]^=e[1]}var TP=[4283543511,3981806797],OP=[3301882366,444984403];function CP(t){var e=[0,t[0]>>>1];PP(t,e),wP(t,TP),e[1]=t[0]>>>1,PP(t,e),wP(t,OP),e[1]=t[0]>>>1,PP(t,e)}var MP=[2277735313,289559509],BP=[1291169091,658871167],jP=[0,5],RP=[0,1390208809],AP=[0,944331445];function IP(t,e){var n=function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r>127)return(new TextEncoder).encode(t);e[n]=r}return e}(t);e=e||0;var r,o=[0,n.length],i=o[1]%16,a=o[1]-i,u=[0,e],s=[0,e],c=[0,0],l=[0,0];for(r=0;r<a;r+=16)c[0]=n[r+4]|n[r+5]<<8|n[r+6]<<16|n[r+7]<<24,c[1]=n[r]|n[r+1]<<8|n[r+2]<<16|n[r+3]<<24,l[0]=n[r+12]|n[r+13]<<8|n[r+14]<<16|n[r+15]<<24,l[1]=n[r+8]|n[r+9]<<8|n[r+10]<<16|n[r+11]<<24,wP(c,MP),EP(c,31),wP(c,BP),PP(u,c),EP(u,27),SP(u,s),wP(u,jP),SP(u,RP),wP(l,BP),EP(l,33),wP(l,MP),PP(s,l),EP(s,31),SP(s,u),wP(s,jP),SP(s,AP);c[0]=0,c[1]=0,l[0]=0,l[1]=0;var f=[0,0];switch(i){case 15:f[1]=n[r+14],kP(f,48),PP(l,f);case 14:f[1]=n[r+13],kP(f,40),PP(l,f);case 13:f[1]=n[r+12],kP(f,32),PP(l,f);case 12:f[1]=n[r+11],kP(f,24),PP(l,f);case 11:f[1]=n[r+10],kP(f,16),PP(l,f);case 10:f[1]=n[r+9],kP(f,8),PP(l,f);case 9:f[1]=n[r+8],PP(l,f),wP(l,BP),EP(l,33),wP(l,MP),PP(s,l);case 8:f[1]=n[r+7],kP(f,56),PP(c,f);case 7:f[1]=n[r+6],kP(f,48),PP(c,f);case 6:f[1]=n[r+5],kP(f,40),PP(c,f);case 5:f[1]=n[r+4],kP(f,32),PP(c,f);case 4:f[1]=n[r+3],kP(f,24),PP(c,f);case 3:f[1]=n[r+2],kP(f,16),PP(c,f);case 2:f[1]=n[r+1],kP(f,8),PP(c,f);case 1:f[1]=n[r],PP(c,f),wP(c,MP),EP(c,31),wP(c,BP),PP(u,c)}return PP(u,o),PP(s,o),SP(u,s),SP(s,u),CP(u),CP(s),SP(u,s),SP(s,u),("00000000"+(u[0]>>>0).toString(16)).slice(-8)+("00000000"+(u[1]>>>0).toString(16)).slice(-8)+("00000000"+(s[0]>>>0).toString(16)).slice(-8)+("00000000"+(s[1]>>>0).toString(16)).slice(-8)}function xP(t){return xP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xP(t)}function NP(t,e,n){return e=DP(e),function(t,e){if(e&&("object"==xP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,LP()?Reflect.construct(e,n||[],DP(t).constructor):e.apply(t,n))}function LP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(LP=function(){return!!t})()}function DP(t){return DP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},DP(t)}function FP(t,e){return FP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},FP(t,e)}function UP(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return GP(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,u=0,s=t,d.n=n,a}};function h(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=d.p,p=i[2];n>3?(o=p===r)&&(u=i[4]||3,s=i[5]===t?i[3]:i[5],i[4]=3,i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,d.v=r,d.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,d.n=p,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),u=l,s=p;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(d.n=-1),h(u,s)):d.n=s:d.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(GP(e={},r,(function(){return this})),e),f=c.prototype=u.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,GP(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,GP(f,"constructor",c),GP(c,"constructor",s),s.displayName="GeneratorFunction",GP(c,o,"GeneratorFunction"),GP(f),GP(f,o,"Generator"),GP(f,r,(function(){return this})),GP(f,"toString",(function(){return"[object Generator]"})),(UP=function(){return{w:i,m:d}})()}function GP(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}GP=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){GP(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},GP(t,e,n,r)}function HP(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function WP(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){HP(i,r,o,a,u,"next",t)}function u(t){HP(i,r,o,a,u,"throw",t)}a(void 0)}))}}function VP(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,KP(r.key),r)}}function zP(t,e,n){return e&&QP(t.prototype,e),n&&QP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function KP(t){var e=function(t,e){if("object"!=xP(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=xP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xP(e)?e:e+""}var qP=function(){return zP((function t(){VP(this,t),this.contextNames=["webgl2","experimental-webgl2","webgl","experimental-webgl","moz-webgl","webkit-3d","webgl2-compute"],this.data={},this.availableContexts=[],this._hashCache={json:null,image:null},this._initialized=!1}),[{key:"start",value:(n=WP(UP().m((function t(){var e;return UP().w((function(t){for(;;)switch(t.n){case 0:if(!this._initialized){t.n=1;break}return t.a(2);case 1:return t.p=1,t.n=2,this._initializeContexts();case 2:this._computeHashes(),this._initialized=!0,t.n=4;break;case 3:throw t.p=3,e=t.v,ue.debug("Error during WebGL fingerprinting:",e),e;case 4:return t.a(2)}}),t,this,[[1,3]])}))),function(){return n.apply(this,arguments)})},{key:"_initializeContexts",value:(e=WP(UP().m((function t(){var e,n=this;return UP().w((function(t){for(;;)switch(t.n){case 0:return e=this.contextNames.map(function(){var t=WP(UP().m((function t(e){var r,o;return UP().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,n.getContextData(e);case 1:(r=t.v)&&(n.availableContexts.push(e),n.data[e]=r),t.n=3;break;case 2:t.p=2,o=t.v,ue.debug("Error retrieving context data for ".concat(e,":"),o);case 3:return t.a(2)}}),t,null,[[0,2]])})));return function(e){return t.apply(this,arguments)}}()),t.n=1,Promise.all(e);case 1:ue.debug("WebGL fingerprint data:",this.data);case 2:return t.a(2)}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"_computeHashes",value:function(){this.jsonString=JSON.stringify(this.data),this._hashCache.json=IP(this.jsonString),this._hashCache.image=this.availableContexts.length>0?this.computeImageHash():null}},{key:"jsonHash",get:function(){return this._hashCache.json}},{key:"imageHash",get:function(){return this._hashCache.image}},{key:"getContextData",value:(t=WP(UP().m((function t(e){var n=this;return UP().w((function(t){for(;;)if(0===t.n)return t.a(2,new Promise((function(t){try{var r,o=document.createElement("canvas");o.width=256,o.height=128,o.style=null!==(r=o.style)&&void 0!==r?r:{},o.style.backgroundColor="#555",o.style.borderRadius="4px";var i=o.getContext(e);if(!i)return void t(null);var a={},u=i.getContextAttributes();u&&Object.keys(u).length>0&&(a.contextAttributes=u),a.drawingBufferColorSpace=i.drawingBufferColorSpace,a.unpackColorSpace=i.unpackColorSpace;var s=i.getExtension("WEBGL_debug_renderer_info");s&&(a.UNMASKED_RENDERER_WEBGL=i.getParameter(s.UNMASKED_RENDERER_WEBGL),a.UNMASKED_VENDOR_WEBGL=i.getParameter(s.UNMASKED_VENDOR_WEBGL)),a.VERTEX_SHADER_PRECISION=n.getShaderPrecision(i,i.VERTEX_SHADER),a.FRAGMENT_SHADER_PRECISION=n.getShaderPrecision(i,i.FRAGMENT_SHADER);var c=i.getExtension("WEBGL_draw_buffers");a.MAX_DRAW_BUFFERS_WEBGL=c?i.getParameter(c.MAX_DRAW_BUFFERS_WEBGL):null;var l=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic");a.MAX_TEXTURE_MAX_ANISOTROPY_EXT=l?i.getParameter(l.MAX_TEXTURE_MAX_ANISOTROPY_EXT):null,a.MAX_TEXTURE_IMAGE_UNITS=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),a.MAX_VERTEX_TEXTURE_IMAGE_UNITS=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),a.MAX_COMBINED_TEXTURE_IMAGE_UNITS=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS),a.ALIASED_LINE_WIDTH_RANGE=i.getParameter(i.ALIASED_LINE_WIDTH_RANGE),a.ALIASED_POINT_SIZE_RANGE=i.getParameter(i.ALIASED_POINT_SIZE_RANGE),a.SAMPLES=i.getParameter(i.SAMPLES),a.RENDERER=i.getParameter(i.RENDERER),a.VENDOR=i.getParameter(i.VENDOR),a.VERSION=i.getParameter(i.VERSION),a.SHADING_LANGUAGE_VERSION=i.getParameter(i.SHADING_LANGUAGE_VERSION),a.MAX_CUBE_MAP_TEXTURE_SIZE=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),a.MAX_TEXTURE_SIZE=i.getParameter(i.MAX_TEXTURE_SIZE),a.MAX_RENDERBUFFER_SIZE=i.getParameter(i.MAX_RENDERBUFFER_SIZE),a.DEPTH_BITS=i.getParameter(i.DEPTH_BITS),a.STENCIL_BITS=i.getParameter(i.STENCIL_BITS),a.MAX_VERTEX_ATTRIBS=i.getParameter(i.MAX_VERTEX_ATTRIBS),a.MAX_VIEWPORT_DIMS=i.getParameter(i.MAX_VIEWPORT_DIMS),a.MAX_FRAGMENT_UNIFORM_VECTORS=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),a.MAX_VERTEX_UNIFORM_VECTORS=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS);var f=i.getSupportedExtensions();a.extensions=f?f.sort():[],t(a)}catch(n){ue.debug("Error in getContextData for ".concat(e,":"),n),t(null)}})))}),t)}))),function(e){return t.apply(this,arguments)})},{key:"getShaderPrecision",value:function(t,e){try{var n=t.getShaderPrecisionFormat(e,t.HIGH_FLOAT),r=t.getShaderPrecisionFormat(e,t.MEDIUM_FLOAT),o=0!==n.precision?n:r;return{rangeMin:o.rangeMin,rangeMax:o.rangeMax,precision:o.precision}}catch(t){return null}}},{key:"computeImageHash",value:function(){if(0===this.availableContexts.length)return null;var t=this.availableContexts[0],e=document.createElement("canvas");e.width=512,e.height=256;var n=e.getContext(t);if(!n)return null;var r={program:null,vertexShader:null,fragmentShader:null,buffer:null};try{n.viewport(0,0,e.width,e.height);var o=function(t,e){var r=n.createShader(t);return n.shaderSource(r,e),n.compileShader(r),n.getShaderParameter(r,n.COMPILE_STATUS)||ue.debug((t===n.VERTEX_SHADER?"Vertex":"Fragment")+" shader error:",n.getShaderInfoLog(r)),r},i=n.createProgram();r.program=i;var a=o(n.VERTEX_SHADER,"\n        attribute vec2 attrVertex;\n        attribute vec4 attrColor;\n        varying vec4 varyinColor;\n        uniform mat4 transform;\n        void main(){\n          varyinColor = attrColor;\n          gl_Position = transform * vec4(attrVertex, 0.0, 1.0);\n        }\n      ");r.vertexShader=a;var u=o(n.FRAGMENT_SHADER,"\n        precision mediump float;\n        varying vec4 varyinColor;\n        void main(){\n          gl_FragColor = varyinColor;\n        }\n      ");r.fragmentShader=u,n.attachShader(i,a),n.attachShader(i,u),n.linkProgram(i),n.getProgramParameter(i,n.LINK_STATUS)||ue.debug("Program link error:",n.getProgramInfoLog(i)),n.useProgram(i);var s=n.getAttribLocation(i,"attrVertex"),c=n.getAttribLocation(i,"attrColor"),l=n.getUniformLocation(i,"transform");n.enableVertexAttribArray(s),n.enableVertexAttribArray(c),n.uniformMatrix4fv(l,!1,new Float32Array([1.5,0,0,0,0,1.5,0,0,0,0,1,0,.5,0,0,1]));var f=[-.25,0],d=128,h=[];h.push(f[0],f[1],1,.7,0,1);for(var p=0;p<d;p++){var y=(45+p/d*270)/360*2*Math.PI,m=(45+(p+1)/d*270)/360*2*Math.PI;h.push(f[0]+.5*Math.cos(y),f[1]+.5*Math.sin(y),2,1-p/d,0,1),h.push(f[0]+.5*Math.cos(m),f[1]+.5*Math.sin(m),1,1-(p+1)/d,0,1)}var v=[.2,.2,.8,.2,.2,1,.8,.2,.2,.8,.8,1,.2,.8,.5,.5,.2,1,.8,.2,.2,.8,.8,1,.8,.8,.8,.8,.8,1,.2,.8,.5,.5,.2,1],b=new Float32Array([].concat(h,v)),g=n.createBuffer();r.buffer=g,n.bindBuffer(n.ARRAY_BUFFER,g),n.bufferData(n.ARRAY_BUFFER,b,n.STATIC_DRAW),n.vertexAttribPointer(s,2,n.FLOAT,!1,24,0),n.vertexAttribPointer(c,4,n.FLOAT,!1,24,8),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT);var _=h.length/6;n.drawArrays(n.LINE_STRIP,0,_);var S=v.length/6;n.drawArrays(n.TRIANGLES,_,S);var w=new Uint8Array(e.width*e.height*4);try{n.readPixels(0,0,e.width,e.height,n.RGBA,n.UNSIGNED_BYTE,w)}catch(t){return"gl.readPixels: "+t}var E=function(t){for(var e="",n=new Uint8Array(t),r=n.byteLength,o=0;o<r;o++)e+=String.fromCharCode(n[o]);return btoa(e)}(w.buffer);return IP(E+(n.getParameter(n.VENDOR)||"")+(n.getParameter(n.RENDERER)||"")+(n.getSupportedExtensions()||[]).join(","))}catch(t){return ue.debug("Error computing WebGL image hash:",t),null}finally{this._cleanupWebGLResources(n,r)}}},{key:"_cleanupWebGLResources",value:function(t,e){if(t)try{e.vertexShader&&t.deleteShader(e.vertexShader),e.fragmentShader&&t.deleteShader(e.fragmentShader),e.program&&t.deleteProgram(e.program),e.buffer&&t.deleteBuffer(e.buffer)}catch(t){ue.debug("Error cleaning up WebGL resources:",t)}}}]);var t,e,n}(),XP={configKey:"isWebglFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!0,runInLean:!1,isRunning:!1,instance:null},JP=function(t){function e(t){var n;return VP(this,e),(n=NP(this,e))._dataQ=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FP(t,e)}(e,t),zP(e,[{key:"startFeature",value:(n=WP(UP().m((function t(){var e,n;return UP().w((function(t){for(;;)switch(t.n){case 0:return e=new qP,t.p=1,t.n=2,e.start();case 2:ue.debug("WebGL JSON Hash:"+e.jsonHash),ue.debug("WebGL Image Hash:"+e.imageHash),this._dataQ.addToQueue("static_fields",["webgl",[e.jsonHash,e.imageHash]],!1),t.n=4;break;case 3:t.p=3,n=t.v,ue.debug("Error in WebGL fingerprinting:",n);case 4:return t.a(2)}}),t,this,[[1,3]])}))),function(){return n.apply(this,arguments)})}],[{key:"getDefaultSettings",value:function(){return XP}}]);var n}(Io);function YP(t){return YP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},YP(t)}function ZP(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return $P(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,u=0,s=t,d.n=n,a}};function h(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=d.p,p=i[2];n>3?(o=p===r)&&(u=i[4]||3,s=i[5]===t?i[3]:i[5],i[4]=3,i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,d.v=r,d.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,d.n=p,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),u=l,s=p;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(d.n=-1),h(u,s)):d.n=s:d.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):($P(e={},r,(function(){return this})),e),f=c.prototype=u.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,$P(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,$P(f,"constructor",c),$P(c,"constructor",s),s.displayName="GeneratorFunction",$P(c,o,"GeneratorFunction"),$P(f),$P(f,o,"Generator"),$P(f,r,(function(){return this})),$P(f,"toString",(function(){return"[object Generator]"})),(ZP=function(){return{w:i,m:d}})()}function $P(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}$P=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){$P(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},$P(t,e,n,r)}function tT(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function eT(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){tT(i,r,o,a,u,"next",t)}function u(t){tT(i,r,o,a,u,"throw",t)}a(void 0)}))}}function nT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rT(r.key),r)}}function rT(t){var e=function(t,e){if("object"!=YP(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=YP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==YP(e)?e:e+""}function oT(t,e,n){return e=aT(e),function(t,e){if(e&&("object"==YP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,iT()?Reflect.construct(e,n||[],aT(t).constructor):e.apply(t,n))}function iT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(iT=function(){return!!t})()}function aT(t){return aT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},aT(t)}function uT(t,e){return uT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},uT(t,e)}var sT=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=oT(this,e))._dataQ=t,n.peer=null,n.timeoutId=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uT(t,e)}(e,t),function(t,e,n){return e&&nT(t.prototype,e),n&&nT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:(r=eT(ZP().m((function t(){var e,n;return ZP().w((function(t){for(;;)switch(t.n){case 0:return ue.info("Starting WebRTCDataCollector"),t.p=1,t.n=2,this.gatherIceCandidates();case 2:e=t.v,this.sendData(e),t.n=4;break;case 3:t.p=3,n=t.v,ue.error("WebRTCDataCollector failed:",n),this.sendData([]);case 4:return t.p=4,this.cleanup(),t.f(4);case 5:return t.a(2)}}),t,this,[[1,3,4,5]])}))),function(){return r.apply(this,arguments)})},{key:"gatherIceCandidates",value:(n=eT(ZP().m((function t(){var e=this;return ZP().w((function(t){for(;;)if(0===t.n)return t.a(2,new Promise((function(t){var n=[],r=!1;e.peer=new RTCPeerConnection({iceServers:[{urls:"stun:stunserver.stunprotocol.org"},{urls:"stun:stun.l.google.com:19302"}]}),e.peer.onicecandidate=function(e){if(e.candidate){var o=e.candidate;n.push({address:String(o.address),port:String(o.port),tcpType:String(o.tcpType),type:String(o.type),protocol:String(o.protocol),url:String(o.url),relatedAddress:String(o.relatedAddress),relatedPort:String(o.relatedPort),candidate:String(o.candidate),sdpMid:String(o.sdpMid),sdpMLineIndex:String(o.sdpMLineIndex)}),ue.debug("ICE candidate found: ".concat(o.type," ").concat(o.protocol," ").concat(o.address,":").concat(o.port))}else ue.debug("ICE candidate gathering complete - no more candidates"),r=!0,t(n)},e.peer.onicecandidateerror=function(t){ue.warn("ICE candidate error:",t.errorText,t.errorCode)},e.peer.onicegatheringstatechange=function(){var o,i;ue.debug("ICE gathering state changed:",null===(o=e.peer)||void 0===o?void 0:o.iceGatheringState),"complete"===(null===(i=e.peer)||void 0===i?void 0:i.iceGatheringState)&&(r=!0,t(n))},e.timeoutId=setTimeout((function(){r||(ue.warn("ICE candidate gathering timed out after 900ms"),t(n))}),900),e.peer.createDataChannel("data"),e.peer.createOffer().then((function(t){return e.peer.setLocalDescription(t)})).catch((function(e){ue.error("Error creating offer:",e),t(n)}))})))}),t)}))),function(){return n.apply(this,arguments)})},{key:"cleanup",value:function(){if(this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.peer){try{this.peer.close(),ue.debug("WebRTC peer connection closed")}catch(t){ue.warn("Error closing peer connection:",t)}this.peer=null}}},{key:"sendData",value:function(t){ue.info("Sending ".concat(t.length," ICE candidates")),this._dataQ.addToQueue("static_fields",["webrtc",t],!1)}}],[{key:"getDefaultSettings",value:function(){return{configKey:"isWebRTCFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!0,runInLean:!1,isRunning:!1,instance:null}}}]);var n,r}(Io),cT=sT;function lT(t){return lT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lT(t)}function fT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dT(r.key),r)}}function dT(t){var e=function(t,e){if("object"!=lT(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=lT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lT(e)?e:e+""}function hT(t,e,n){return e=yT(e),function(t,e){if(e&&("object"==lT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,pT()?Reflect.construct(e,n||[],yT(t).constructor):e.apply(t,n))}function pT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(pT=function(){return!!t})()}function yT(t){return yT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yT(t)}function mT(t,e){return mT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},mT(t,e)}var vT={configKey:"isSpeechVoicesFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!0,runInLean:!1,isRunning:!1,instance:null},bT=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=hT(this,e))._dataQ=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mT(t,e)}(e,t),function(t,e,n){return e&&fT(t.prototype,e),n&&fT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){speechSynthesis.addEventListener("voiceschanged",this.processVoices.bind(this)),speechSynthesis.pending||this.processVoices()}},{key:"processVoices",value:function(){var t=speechSynthesis.getVoices().map((function(t){return{def:t.default,lang:t.lang,localService:t.localService,name:t.name,voiceURI:t.voiceURI}}));if(0!==t.length){var e=IP(JSON.stringify(t));ue.debug("SpeechVoices - Voice hash:"+e),this._dataQ.addToQueue("static_fields",["speech_voices",e],!1)}}}],[{key:"getDefaultSettings",value:function(){return vT}}])}(Io),gT=bT;function _T(t){return _T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_T(t)}function ST(t,e,n){return e=ET(e),function(t,e){if(e&&("object"==_T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,wT()?Reflect.construct(e,n||[],ET(t).constructor):e.apply(t,n))}function wT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(wT=function(){return!!t})()}function ET(t){return ET=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ET(t)}function kT(t,e){return kT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},kT(t,e)}function PT(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return TT(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,u=0,s=t,d.n=n,a}};function h(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=d.p,p=i[2];n>3?(o=p===r)&&(u=i[4]||3,s=i[5]===t?i[3]:i[5],i[4]=3,i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,d.v=r,d.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,d.n=p,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),u=l,s=p;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(d.n=-1),h(u,s)):d.n=s:d.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(TT(e={},r,(function(){return this})),e),f=c.prototype=u.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,TT(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,TT(f,"constructor",c),TT(c,"constructor",s),s.displayName="GeneratorFunction",TT(c,o,"GeneratorFunction"),TT(f),TT(f,o,"Generator"),TT(f,r,(function(){return this})),TT(f,"toString",(function(){return"[object Generator]"})),(PT=function(){return{w:i,m:d}})()}function TT(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}TT=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){TT(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},TT(t,e,n,r)}function OT(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function CT(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){OT(i,r,o,a,u,"next",t)}function u(t){OT(i,r,o,a,u,"throw",t)}a(void 0)}))}}function MT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jT(r.key),r)}}function BT(t,e,n){return e&&MT(t.prototype,e),n&&MT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function jT(t){var e=function(t,e){if("object"!=_T(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=_T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_T(e)?e:e+""}function RT(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var AT={configKey:"isBrowserExtensionsFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},IT="ad_blocker",xT="password_manager",NT="crypto_wallet",LT="developer_tool",DT="grammar_writing",FT="dark_mode",UT="other",GT=BT((function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:UT,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.8;RT(this,t),this.name=e,this.detection=n,this.category=r,this.reliability=o})),HT=function(){return BT((function t(e,n){RT(this,t),this._window=e,this._document=n,this.extensions=this._initializeExtensions(),this._detectionCache=new Map}),[{key:"_initializeExtensions",value:function(){return[new GT("Ad Blocker",this._detectAdBlocker.bind(this),IT,.9),new GT("LastPass",this._detectLastPass.bind(this),xT,.85),new GT("1Password",this._detect1Password.bind(this),xT,.85),new GT("MetaMask",this._detectMetaMask.bind(this),NT,.95),new GT("Coinbase Wallet",this._detectCoinbaseWallet.bind(this),NT,.95),new GT("WalletConnect Wallet",this._detectWalletConnect.bind(this),NT,.95),new GT("Trust Wallet",this._detectTrustWallet.bind(this),NT,.95),new GT("Phantom Wallet",this._detectPhantomWallet.bind(this),NT,.95),new GT("Binance Wallet",this._detectBinanceWallet.bind(this),NT,.95),new GT("Brave Wallet",this._detectBraveWallet.bind(this),NT,.9),new GT("Apple Pay",this._detectApplePay.bind(this),NT,.9),new GT("Google Pay",this._detectGooglePay.bind(this),NT,.9),new GT("React Developer Tools",this._detectReactDevTools.bind(this),LT,.95),new GT("Vue.js DevTools",this._detectVueDevTools.bind(this),LT,.95),new GT("Redux DevTools",this._detectReduxDevTools.bind(this),LT,.95),new GT("Angular DevTools",this._detectAngularDevTools.bind(this),LT,.95),new GT("Svelte DevTools",this._detectSvelteDevTools.bind(this),LT,.95),new GT("Grammarly",this._detectGrammarly.bind(this),DT,.9),new GT("Dark Reader",this._detectDarkReader.bind(this),FT,.85),new GT("Super Dark Mode",this._detectSuperDarkMode.bind(this),FT,.85),new GT("Adobe Acrobat",this._detectAdobeAcrobat.bind(this),UT,.8)]}},{key:"detectExtension",value:(E=CT(PT().m((function t(e){var n,r;return PT().w((function(t){for(;;)switch(t.n){case 0:if(!this._detectionCache.has(e.name)){t.n=1;break}return t.a(2,this._detectionCache.get(e.name));case 1:return t.p=1,t.n=2,e.detection();case 2:return n=t.v,this._detectionCache.set(e.name,n),t.a(2,n);case 3:return t.p=3,r=t.v,ue.debug("Error detecting ".concat(e.name,": ").concat(r.message)),t.a(2,!1)}}),t,this,[[1,3]])}))),function(t){return E.apply(this,arguments)})},{key:"scan",value:(w=CT(PT().m((function t(){var e,n,r=this;return PT().w((function(t){for(;;)switch(t.n){case 0:return e=this.extensions.map(function(){var t=CT(PT().m((function t(e){var n,o;return PT().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,r.detectExtension(e);case 1:return n=t.v,t.a(2,{name:e.name,detected:n,category:e.category,reliability:e.reliability});case 2:return t.p=2,o=t.v,ue.debug("Failed to detect ".concat(e.name,": ").concat(o.message)),t.a(2,{name:e.name,detected:!1,category:e.category,reliability:e.reliability})}}),t,null,[[0,2]])})));return function(e){return t.apply(this,arguments)}}()),t.n=1,Promise.all(e);case 1:return n=t.v,t.a(2,n.filter((function(t){return t.detected})).sort((function(t,e){return e.reliability-t.reliability})).map((function(t){return t.name})))}}),t,this)}))),function(){return w.apply(this,arguments)})},{key:"_detectAdBlocker",value:(S=CT(PT().m((function t(){var e,n,r,o;return PT().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,(e=this._document.createElement("div")).className="pub_300x250 ad_unit adsbox",e.style.cssText="height:50px;width:50px;position:absolute;left:-9999px;top:0;display:block;",this._document.body.appendChild(e),n=this._window.getComputedStyle(e),r="none"===n.display||"hidden"===n.visibility||0===e.offsetHeight||0===e.offsetWidth,this._document.body.removeChild(e),t.a(2,r);case 1:return t.p=1,o=t.v,ue.debug("Ad blocker detection error: ".concat(o.message)),t.a(2,!1)}}),t,this,[[0,1]])}))),function(){return S.apply(this,arguments)})},{key:"_detectLastPass",value:(_=CT(PT().m((function t(){return PT().w((function(t){for(;;)if(0===t.n)return t.a(2,this._document.querySelectorAll("[data-lastpass-icon-root]").length>0)}),t,this)}))),function(){return _.apply(this,arguments)})},{key:"_detect1Password",value:(g=CT(PT().m((function t(){var e;return PT().w((function(t){for(;;)if(0===t.n)return t.a(2,(null===(e=JSON.stringify(this._window._sentryDebugIds))||void 0===e?void 0:e.includes("aeblfdkhhhdcdjpifhhbdiojplfjncoa"))||!!this._document.querySelector(".onepassword-fill-button"))}),t,this)}))),function(){return g.apply(this,arguments)})},{key:"_detectMetaMask",value:(b=CT(PT().m((function t(){return PT().w((function(t){for(;;)if(0===t.n)return t.a(2,!!this._window.ethereum&&this._window.ethereum.isMetaMask)}),t,this)}))),function(){return b.apply(this,arguments)})},{key:"_detectCoinbaseWallet",value:(v=CT(PT().m((function t(){return PT().w((function(t){for(;;)if(0===t.n)return t.a(2,!!this._window.ethereum&&this._window.ethereum.isCoinbaseWallet)}),t,this)}))),function(){return v.apply(this,arguments)})},{key:"_detectWalletConnect",value:(m=CT(PT().m((function t(){return PT().w((function(t){for(;;)if(0===t.n)return t.a(2,!!this._window.ethereum&&this._window.ethereum.isWalletConnect)}),t,this)}))),function(){return m.apply(this,arguments)})},{key:"_detectTrustWallet",value:(y=CT(PT().m((function t(){return PT().w((function(t){for(;;)if(0===t.n)return t.a(2,!!this._window.ethereum&&this._window.ethereum.isTrust)}),t,this)}))),function(){return y.apply(this,arguments)})},{key:"_detectPhantomWallet",value:(p=CT(PT().m((function t(){return PT().w((function(t){for(;;)if(0===t.n)return t.a(2,!!this._window.solana&&this._window.solana.isPhantom)}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"_detectBinanceWallet",value:(h=CT(PT().m((function t(){return PT().w((function(t){for(;;)if(0===t.n)return t.a(2,!!this._window.BinanceChain&&!0===this._window.BinanceChain.isBinanceChain)}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"_detectBraveWallet",value:(d=CT(PT().m((function t(){return PT().w((function(t){for(;;)if(0===t.n)return t.a(2,!(!this._window.navigator.brave||!this._window.navigator.brave.isBrave))}),t,this)}))),function(){return d.apply(this,arguments)})},{key:"_detectApplePay",value:(f=CT(PT().m((function t(){var e;return PT().w((function(t){for(;;)switch(t.n){case 0:if(!(e=!!this._window.ApplePaySession&&"function"==typeof this._window.ApplePaySession.canMakePayments)){t.n=2;break}return t.n=1,this._window.ApplePaySession.canMakePayments();case 1:e=t.v;case 2:return t.a(2,e)}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"_detectGooglePay",value:(l=CT(PT().m((function t(){return PT().w((function(t){for(;;)if(0===t.n)return t.a(2,!!(this._window.google&&this._window.google.payments&&this._window.google.payments.api))}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"_detectReactDevTools",value:(c=CT(PT().m((function t(){return PT().w((function(t){for(;;)if(0===t.n)return t.a(2,!!this._window.__REACT_DEVTOOLS_GLOBAL_HOOK__)}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"_detectVueDevTools",value:(s=CT(PT().m((function t(){return PT().w((function(t){for(;;)if(0===t.n)return t.a(2,!!this._window.__VUE_DEVTOOLS_GLOBAL_HOOK__)}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"_detectReduxDevTools",value:(u=CT(PT().m((function t(){return PT().w((function(t){for(;;)if(0===t.n)return t.a(2,!!this._window.__REDUX_DEVTOOLS_EXTENSION__)}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"_detectAngularDevTools",value:(a=CT(PT().m((function t(){return PT().w((function(t){for(;;)if(0===t.n)return t.a(2,!!this._window.ng)}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"_detectSvelteDevTools",value:(i=CT(PT().m((function t(){return PT().w((function(t){for(;;)if(0===t.n)return t.a(2,!!this._window.__SVELTE_DEVTOOLS_GLOBAL_HOOK__)}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"_detectGrammarly",value:(o=CT(PT().m((function t(){var e,n=this;return PT().w((function(t){for(;;)if(0===t.n)return e=["grammarly-extension","grammarly-desktop-integration","grammarly-mirror","grammarly-popups","grammarly-extension-vbars","grammarly-extension-vbar-cad","grammarly-extension-vbars-feedback-form"],t.a(2,e.some((function(t){return null!==n._document.querySelector(t)})))}),t)}))),function(){return o.apply(this,arguments)})},{key:"_detectDarkReader",value:(r=CT(PT().m((function t(){return PT().w((function(t){for(;;)if(0===t.n)return t.a(2,this._detectDarkModeExtension(50))}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"_detectSuperDarkMode",value:(n=CT(PT().m((function t(){return PT().w((function(t){for(;;)if(0===t.n)return t.a(2,this._detectDarkModeExtension(5))}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"_detectDarkModeExtension",value:(e=CT(PT().m((function t(e){var n,r,o,i,a;return PT().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,(n=this._document.createElement("div")).style.cssText="background-color:#ffffff;width:100px;height:100px;position:absolute;top:0;left:0;z-index:9999;",this._document.body.appendChild(n),t.n=1,new Promise((function(t){return setTimeout(t,500)}));case 1:return r=this._window.getComputedStyle(n),o=r.backgroundColor,this._document.body.removeChild(n),i="rgb(0, 0, 0)"===o||(u=void 0,!!(u=o.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))&&(parseInt(u[1],10)+parseInt(u[2],10)+parseInt(u[3],10))/3<e),t.a(2,i);case 2:return t.p=2,a=t.v,ue.debug("Dark mode detection error: ".concat(a.message)),t.a(2,!1)}var u}),t,this,[[0,2]])}))),function(t){return e.apply(this,arguments)})},{key:"_detectAdobeAcrobat",value:(t=CT(PT().m((function t(){var e;return PT().w((function(t){for(;;)if(0===t.n)return t.a(2,"true"===(null===(e=this._window)||void 0===e||null===(e=e.sessionStorage)||void 0===e?void 0:e.getItem("adobeCleanFontAdded")))}),t,this)}))),function(){return t.apply(this,arguments)})}]);var t,e,n,r,o,i,a,u,s,c,l,f,d,h,p,y,m,v,b,g,_,S,w,E}(),WT=function(t){function e(t,n,r,o){var i,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return RT(this,e),(i=ST(this,e))._configurationRepository=t,i._domUtils=r,i._utils=n,i._dataQueue=o,i._regularExtensionsScanner=a||new HT(window,document),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kT(t,e)}(e,t),BT(e,[{key:"startFeature",value:(n=CT(PT().m((function t(){var e,n;return PT().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,this._regularExtensionsScanner.scan();case 1:(e=t.v).length>0?(ue.info("Detected browser extensions: ".concat(e.join(", "))),this._sendData(e)):(ue.info("No browser extensions detected"),this._sendData([])),t.n=3;break;case 2:t.p=2,n=t.v,ue.error("Failed to detect browser extensions: ".concat(n.message)),this._sendData([]);case 3:return t.a(2)}}),t,this,[[0,2]])}))),function(){return n.apply(this,arguments)})},{key:"_sendData",value:function(t){this._dataQueue.addToQueue("static_fields",["browser_extensions",["v1",t]],!1)}}],[{key:"getDefaultSettings",value:function(){return AT}}]);var n}(Io);function VT(t){return VT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},VT(t)}function QT(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return zT(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,u=0,s=t,d.n=n,a}};function h(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=d.p,p=i[2];n>3?(o=p===r)&&(u=i[4]||3,s=i[5]===t?i[3]:i[5],i[4]=3,i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,d.v=r,d.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,d.n=p,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),u=l,s=p;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(d.n=-1),h(u,s)):d.n=s:d.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(zT(e={},r,(function(){return this})),e),f=c.prototype=u.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,zT(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,zT(f,"constructor",c),zT(c,"constructor",s),s.displayName="GeneratorFunction",zT(c,o,"GeneratorFunction"),zT(f),zT(f,o,"Generator"),zT(f,r,(function(){return this})),zT(f,"toString",(function(){return"[object Generator]"})),(QT=function(){return{w:i,m:d}})()}function zT(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}zT=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){zT(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},zT(t,e,n,r)}function KT(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return qT(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qT(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qT(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function XT(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function JT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,YT(r.key),r)}}function YT(t){var e=function(t,e){if("object"!=VT(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=VT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==VT(e)?e:e+""}function ZT(t,e,n){return e=tO(e),function(t,e){if(e&&("object"==VT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$T()?Reflect.construct(e,n||[],tO(t).constructor):e.apply(t,n))}function $T(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($T=function(){return!!t})()}function tO(t){return tO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tO(t)}function eO(t,e){return eO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},eO(t,e)}var nO=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ZT(this,e))._dataQ=t,n.drmData={},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eO(t,e)}(e,t),function(t,e,n){return e&&JT(t.prototype,e),n&&JT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"hashDRMData",value:function(t){return IP(JSON.stringify(t))}},{key:"startFeature",value:(n=QT().m((function t(){var e,n,r,o,i,a,u,s,c;return QT().w((function(t){for(;;)switch(t.n){case 0:e={widevine:"com.widevine.alpha",playready:"com.microsoft.playready",fairplay:"com.apple.fairplay",clearkey:"org.w3.clearkey"},n=[{initDataTypes:["cenc"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"'}]}],r=0,o=Object.entries(e);case 1:if(!(r<o.length)){t.n=6;break}return i=KT(o[r],2),a=i[0],u=i[1],t.p=2,t.n=3,navigator.requestMediaKeySystemAccess(u,n);case 3:s=t.v,this.drmData[a]={supported:!0,keySystem:u,sessionTypes:s.getConfiguration().sessionTypes,videoCapabilities:s.getConfiguration().videoCapabilities,audioCapabilities:s.getConfiguration().audioCapabilities},t.n=5;break;case 4:t.p=4,t.v,this.drmData[a]={supported:!1};case 5:r++,t.n=1;break;case 6:c=this.hashDRMData(this.drmData),this.sendData(this.drmData),ue.debug("DRMDataCollector - DRM Data"),ue.debug(this.drmData),ue.debug(c);case 7:return t.a(2)}}),t,this,[[2,4]])})),r=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){XT(i,r,o,a,u,"next",t)}function u(t){XT(i,r,o,a,u,"throw",t)}a(void 0)}))},function(){return r.apply(this,arguments)})},{key:"sendData",value:function(t){this._dataQ.addToQueue("static_fields",["drm",t],!1)}}],[{key:"getDefaultSettings",value:function(){return{configKey:"isDRMFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null}}}]);var n,r}(Io),rO=nO;function oO(t){return oO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oO(t)}function iO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aO(r.key),r)}}function aO(t){var e=function(t,e){if("object"!=oO(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=oO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==oO(e)?e:e+""}function uO(t,e,n){return e=cO(e),function(t,e){if(e&&("object"==oO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,sO()?Reflect.construct(e,n||[],cO(t).constructor):e.apply(t,n))}function sO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(sO=function(){return!!t})()}function cO(t){return cO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},cO(t)}function lO(t,e){return lO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},lO(t,e)}var fO=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=uO(this,e)).validateParams(t,n),r.usage=t,r.quota=n,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lO(t,e)}(e,t),function(t,e,n){return e&&iO(t.prototype,e),n&&iO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t,e){"number"==typeof t&&"number"==typeof e||ue.warn("wrong type in StorageEstimate parameters. usage : {expected: number, received: ".concat(oO(t),"}, quota : {expected: number, received: ").concat(oO(e),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),[this.usage,this.quota]];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&Array.isArray(t[1])&&2===t[1].length||ue.warn("StorageEstimate - Contract verification failed")}},{key:"getName",value:function(){return"storage_estimate"}}])}(ym);function dO(t){return dO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dO(t)}function hO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pO(r.key),r)}}function pO(t){var e=function(t,e){if("object"!=dO(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=dO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dO(e)?e:e+""}function yO(t,e,n){return e=vO(e),function(t,e){if(e&&("object"==dO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,mO()?Reflect.construct(e,n||[],vO(t).constructor):e.apply(t,n))}function mO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(mO=function(){return!!t})()}function vO(t){return vO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vO(t)}function bO(t,e){return bO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},bO(t,e)}var gO=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=yO(this,e)).validateParams(t),n.directoryName=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bO(t,e)}(e,t),function(t,e,n){return e&&hO(t.prototype,e),n&&hO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"string"==typeof t||ue.warn("wrong type in StorageDirectory parameters. directoryName : {expected: string, received: ".concat(dO(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.directoryName];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"string"==typeof t[1]||ue.warn("StorageDirectory - Contract verification failed")}},{key:"getName",value:function(){return"storage_directory"}}])}(ym);function _O(t){return _O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_O(t)}function SO(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return wO(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,u=0,s=t,d.n=n,a}};function h(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=d.p,p=i[2];n>3?(o=p===r)&&(u=i[4]||3,s=i[5]===t?i[3]:i[5],i[4]=3,i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,d.v=r,d.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,d.n=p,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),u=l,s=p;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(d.n=-1),h(u,s)):d.n=s:d.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(wO(e={},r,(function(){return this})),e),f=c.prototype=u.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,wO(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,wO(f,"constructor",c),wO(c,"constructor",s),s.displayName="GeneratorFunction",wO(c,o,"GeneratorFunction"),wO(f),wO(f,o,"Generator"),wO(f,r,(function(){return this})),wO(f,"toString",(function(){return"[object Generator]"})),(SO=function(){return{w:i,m:d}})()}function wO(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}wO=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){wO(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},wO(t,e,n,r)}function EO(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function kO(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){EO(i,r,o,a,u,"next",t)}function u(t){EO(i,r,o,a,u,"throw",t)}a(void 0)}))}}function PO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,TO(r.key),r)}}function TO(t){var e=function(t,e){if("object"!=_O(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=_O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_O(e)?e:e+""}function OO(t,e,n){return e=MO(e),function(t,e){if(e&&("object"==_O(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,CO()?Reflect.construct(e,n||[],MO(t).constructor):e.apply(t,n))}function CO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(CO=function(){return!!t})()}function MO(t){return MO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},MO(t)}function BO(t,e){return BO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},BO(t,e)}var jO={configKey:"isStorageFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!0,runInLean:!0,isRunning:!1,instance:null},RO=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=OO(this,e))._dataQ=t,r._devDebugDataQueue=n,r._storageManager=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BO(t,e)}(e,t),function(t,e,n){return e&&PO(t.prototype,e),n&&PO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:(a=kO(SO().m((function t(){var e;return SO().w((function(t){for(;;)switch(t.n){case 0:return ue.info("Starting Storage Feature"),this._initializeStorageManager(),t.p=1,t.n=2,this._collectStorageEstimateInfo();case 2:return t.n=3,this._collectStorageDirectoryInfo();case 3:t.n=5;break;case 4:t.p=4,e=t.v,ue.error("Error in Storage Feature: ".concat(e.message||e));case 5:return t.a(2)}}),t,this,[[1,4]])}))),function(){return a.apply(this,arguments)})},{key:"_initializeStorageManager",value:function(){this._storageManager||(this._storageManager=this.getStorageManager())}},{key:"getStorageManager",value:function(){return"undefined"!=typeof navigator&&navigator.storage?navigator.storage:null}},{key:"_collectStorageEstimateInfo",value:(i=kO(SO().m((function t(){var e,n,r,o;return SO().w((function(t){for(;;)switch(t.n){case 0:return ue.info("Collecting storage estimate properties"),t.p=1,t.n=2,this._getStorageEstimateInfo();case 2:e=t.v,this._isValidStorageEstimate(e)?(n=new fO(e.usage,e.quota),r=n.buildQueueMessage(),this._dataQ.addToQueue("static_fields",r,!1)):ue.warn("Invalid storage estimate data received"),t.n=4;break;case 3:throw t.p=3,o=t.v,ue.error("Error collecting storage estimate information: ".concat(o.message||o)),o;case 4:return t.a(2)}}),t,this,[[1,3]])}))),function(){return i.apply(this,arguments)})},{key:"_isValidStorageEstimate",value:function(t){return t&&"number"==typeof t.usage&&"number"==typeof t.quota&&t.usage>=0&&t.quota>=0}},{key:"_getStorageEstimateInfo",value:(o=kO(SO().m((function t(){var e,n;return SO().w((function(t){for(;;)switch(t.n){case 0:if(t.p=0,this._storageManager){t.n=1;break}throw ue.error("StorageManager is not initialized or unavailable."),new Error("StorageManager is not initialized or unavailable.");case 1:return t.n=2,this._storageManager.estimate();case 2:return e=t.v,t.a(2,{quota:e.quota,usage:e.usage});case 3:throw t.p=3,n=t.v,ue.error("Failed to get storage estimate: ".concat(n.message||n)),n;case 4:return t.a(2)}}),t,this,[[0,3]])}))),function(){return o.apply(this,arguments)})},{key:"_collectStorageDirectoryInfo",value:(r=kO(SO().m((function t(){var e,n,r,o;return SO().w((function(t){for(;;)switch(t.n){case 0:return ue.info("Collecting storage directory properties"),t.p=1,t.n=2,this._getStorageDirectoryInfo();case 2:e=t.v,this._isValidDirectoryName(e)?(n=new gO(e),r=n.buildQueueMessage(),this._devDebugDataQueue.addToQueue("static_fields",r,!1)):ue.warn("Invalid storage directory data received"),t.n=4;break;case 3:throw t.p=3,o=t.v,ue.error("Error collecting storage directory information: ".concat(o.message||o)),o;case 4:return t.a(2)}}),t,this,[[1,3]])}))),function(){return r.apply(this,arguments)})},{key:"_isValidDirectoryName",value:function(t){return void 0!==t&&"string"==typeof t}},{key:"_getStorageDirectoryInfo",value:(n=kO(SO().m((function t(){var e,n;return SO().w((function(t){for(;;)switch(t.n){case 0:if(t.p=0,this._storageManager){t.n=1;break}throw ue.error("StorageManager is not initialized or unavailable."),new Error("StorageManager is not initialized or unavailable.");case 1:return t.n=2,this._storageManager.getDirectory();case 2:return e=t.v,t.a(2,e.name);case 3:throw t.p=3,n=t.v,ue.error("Failed to get storage directory: ".concat(n.message||n)),n;case 4:return t.a(2)}}),t,this,[[0,3]])}))),function(){return n.apply(this,arguments)})}],[{key:"getDefaultSettings",value:function(){return jO}}]);var n,r,o,i,a}(Io);function AO(t){return AO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AO(t)}function IO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xO(r.key),r)}}function xO(t){var e=function(t,e){if("object"!=AO(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=AO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==AO(e)?e:e+""}function NO(t,e,n){return e=DO(e),function(t,e){if(e&&("object"==AO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,LO()?Reflect.construct(e,n||[],DO(t).constructor):e.apply(t,n))}function LO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(LO=function(){return!!t})()}function DO(t){return DO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},DO(t)}function FO(t,e){return FO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},FO(t,e)}var UO=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=NO(this,e)).validateParams(t),n.keyboardLayout=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FO(t,e)}(e,t),function(t,e,n){return e&&IO(t.prototype,e),n&&IO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"string"==typeof t||ue.warn("wrong type in KeyboardLayout parameters. keyboardLayout : {expected: string, received: ".concat(AO(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.keyboardLayout];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"string"==typeof t[1]||ue.warn("KeyboardLayout - Contract verification failed")}},{key:"getName",value:function(){return"keyboard_layout"}}])}(ym);function GO(t){return GO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},GO(t)}function HO(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return WO(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,u=0,s=t,d.n=n,a}};function h(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=d.p,p=i[2];n>3?(o=p===r)&&(u=i[4]||3,s=i[5]===t?i[3]:i[5],i[4]=3,i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,d.v=r,d.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,d.n=p,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),u=l,s=p;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(d.n=-1),h(u,s)):d.n=s:d.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(WO(e={},r,(function(){return this})),e),f=c.prototype=u.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,WO(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,WO(f,"constructor",c),WO(c,"constructor",s),s.displayName="GeneratorFunction",WO(c,o,"GeneratorFunction"),WO(f),WO(f,o,"Generator"),WO(f,r,(function(){return this})),WO(f,"toString",(function(){return"[object Generator]"})),(HO=function(){return{w:i,m:d}})()}function WO(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}WO=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){WO(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},WO(t,e,n,r)}function VO(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function QO(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){VO(i,r,o,a,u,"next",t)}function u(t){VO(i,r,o,a,u,"throw",t)}a(void 0)}))}}function zO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,KO(r.key),r)}}function KO(t){var e=function(t,e){if("object"!=GO(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=GO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==GO(e)?e:e+""}function qO(t,e,n){return e=JO(e),function(t,e){if(e&&("object"==GO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,XO()?Reflect.construct(e,n||[],JO(t).constructor):e.apply(t,n))}function XO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(XO=function(){return!!t})()}function JO(t){return JO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},JO(t)}function YO(t,e){return YO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},YO(t,e)}var ZO={configKey:"isKeyboardLayoutFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!0,runInLean:!0,isRunning:!1,instance:null},$O=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=qO(this,e))._dataQ=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YO(t,e)}(e,t),function(t,e,n){return e&&zO(t.prototype,e),n&&zO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:(o=QO(HO().m((function t(){return HO().w((function(t){for(;;)switch(t.n){case 0:return ue.info("Starting Keyboard Layout Feature"),t.n=1,this._collectKeyboardLayoutInfo();case 1:return t.a(2)}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"getKeyboard",value:function(){return"undefined"!=typeof navigator&&navigator.keyboard?navigator.keyboard:null}},{key:"_collectKeyboardLayoutInfo",value:(r=QO(HO().m((function t(){var e,n,r,o;return HO().w((function(t){for(;;)switch(t.n){case 0:return ue.info("Collecting keyboard layout properties"),t.p=1,t.n=2,this._getKeyboardLayoutInfo();case 2:e=t.v,n=new UO(e),r=n.buildQueueMessage(),this._dataQ.addToQueue("static_fields",r,!1),t.n=4;break;case 3:t.p=3,o=t.v,ue.error("Error collecting keyboard layout information: ".concat(o));case 4:return t.a(2)}}),t,this,[[1,3]])}))),function(){return r.apply(this,arguments)})},{key:"_getKeyboardLayoutInfo",value:(n=QO(HO().m((function t(){var e,n,r;return HO().w((function(t){for(;;)switch(t.n){case 0:if(e=this.getKeyboard()){t.n=1;break}throw Error("Could not find keyboard layout");case 1:return t.n=2,e.getLayoutMap();case 2:return n=t.v,r=Array.from(n.values()).join(""),t.a(2,IP(r))}}),t,this)}))),function(){return n.apply(this,arguments)})}],[{key:"getDefaultSettings",value:function(){return ZO}}]);var n,r,o}(Io);function tC(t){return tC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tC(t)}function eC(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return nC(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,u=0,s=t,d.n=n,a}};function h(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=d.p,p=i[2];n>3?(o=p===r)&&(u=i[4]||3,s=i[5]===t?i[3]:i[5],i[4]=3,i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,d.v=r,d.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,d.n=p,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),u=l,s=p;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(d.n=-1),h(u,s)):d.n=s:d.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(nC(e={},r,(function(){return this})),e),f=c.prototype=u.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,nC(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,nC(f,"constructor",c),nC(c,"constructor",s),s.displayName="GeneratorFunction",nC(c,o,"GeneratorFunction"),nC(f),nC(f,o,"Generator"),nC(f,r,(function(){return this})),nC(f,"toString",(function(){return"[object Generator]"})),(eC=function(){return{w:i,m:d}})()}function nC(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}nC=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){nC(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},nC(t,e,n,r)}function rC(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function oC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,iC(r.key),r)}}function iC(t){var e=function(t,e){if("object"!=tC(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=tC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tC(e)?e:e+""}function aC(t,e,n){return e=sC(e),function(t,e){if(e&&("object"==tC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,uC()?Reflect.construct(e,n||[],sC(t).constructor):e.apply(t,n))}function uC(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(uC=function(){return!!t})()}function sC(t){return sC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sC(t)}function cC(t,e){return cC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},cC(t,e)}var lC={configKey:"isFontEmojiFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!0,runInLean:!0,isRunning:!1,instance:null},fC=function(t){function e(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.g.window,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.g.document,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ue;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=aC(this,e))._dataQ=t,r._window=o,r._document=i,r._logger=a,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cC(t,e)}(e,t),function(t,e,n){return e&&oC(t.prototype,e),n&&oC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"_getBoundingBox",value:function(t,e){var n=t.getBoundingClientRect(),r={};["x","y","left","right","bottom","height","top","width"].forEach((function(t){t in n&&(r[t]=n[t])}));var o=e.getComputedStyle(t,null).getPropertyValue("font-family");return r.font=o,r}},{key:"_renderEmojis",value:function(){var t=Array.from({length:80},(function(t,e){return String.fromCodePoint(128512+e)})).join(""),e=this._document.createElement("span");e.style.whiteSpace="nowrap",e.innerHTML=t,this._document.body.append(e);var n=this._getBoundingBox(e,this._window);return e.remove(),n}},{key:"startFeature",value:(r=eC().m((function t(){var e;return eC().w((function(t){for(;;)switch(t.n){case 0:try{e=this._renderEmojis(),this._dataQ.addToQueue("static_fields",["font_emoji_info",e],!1)}catch(t){this._logger.error("Failed to collect emoji font information",t)}case 1:return t.a(2)}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){rC(i,n,o,a,u,"next",t)}function u(t){rC(i,n,o,a,u,"throw",t)}a(void 0)}))},function(){return o.apply(this,arguments)})}],[{key:"getDefaultSettings",value:function(){return lC}}]);var r,o}(Io);function dC(t){return dC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dC(t)}function hC(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return pC(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,u=0,s=t,d.n=n,a}};function h(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=d.p,p=i[2];n>3?(o=p===r)&&(u=i[4]||3,s=i[5]===t?i[3]:i[5],i[4]=3,i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,d.v=r,d.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,d.n=p,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),u=l,s=p;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(d.n=-1),h(u,s)):d.n=s:d.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(pC(e={},r,(function(){return this})),e),f=c.prototype=u.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,pC(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,pC(f,"constructor",c),pC(c,"constructor",s),s.displayName="GeneratorFunction",pC(c,o,"GeneratorFunction"),pC(f),pC(f,o,"Generator"),pC(f,r,(function(){return this})),pC(f,"toString",(function(){return"[object Generator]"})),(hC=function(){return{w:i,m:d}})()}function pC(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}pC=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){pC(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},pC(t,e,n,r)}function yC(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function mC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vC(r.key),r)}}function vC(t){var e=function(t,e){if("object"!=dC(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=dC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dC(e)?e:e+""}function bC(t,e,n){return e=_C(e),function(t,e){if(e&&("object"==dC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,gC()?Reflect.construct(e,n||[],_C(t).constructor):e.apply(t,n))}function gC(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(gC=function(){return!!t})()}function _C(t){return _C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_C(t)}function SC(t,e){return SC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},SC(t,e)}var wC={configKey:"isFontMathFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!0,runInLean:!0,isRunning:!1,instance:null},EC=function(t){function e(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.g.window,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.g.document,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ue;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=bC(this,e))._dataQ=t,r._window=o,r._document=i,r._logger=a,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SC(t,e)}(e,t),function(t,e,n){return e&&mC(t.prototype,e),n&&mC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"_getBoundingBox",value:function(t,e){try{var n=t.getBoundingClientRect(),r={};["x","y","left","right","bottom","height","top","width"].forEach((function(t){t in n&&(r[t]=n[t])}));var o=e.getComputedStyle(t,null).getPropertyValue("font-family");return r.font=o,r}catch(t){return this._logger.error("Failed to get bounding box",t),null}}},{key:"_renderMathFormulas",value:function(){try{var t="<mrow><munderover><mmultiscripts><mo>∏</mo>";[["𝔈","υ","τ","ρ","σ"],["𝔇","π","ο","ν","ξ"],["𝔄","δ","γ","α","β"],["𝔅","θ","η","ε","ζ"],["𝔉","ω","ψ","ϕ","χ"],["ℭ","μ","λ","ι","κ"]].forEach((function(e){var n,r,o,i,a;t+=(n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],"<mmultiscripts><mi>".concat(n,"</mi><mi>").concat(r,"</mi><mi>").concat(o,"</mi>\n                        <mprescripts></mprescripts><mi>").concat(i,"</mi><mi>").concat(a,"</mi></mmultiscripts>"))})),t+="</munderover></mrow>";var e=this._document.createElement("math");e.style.whiteSpace="nowrap",e.innerHTML=t,this._document.body.append(e);var n=this._getBoundingBox(e,this._window);return e.remove(),n}catch(t){return this._logger.error("Failed to render math formulas",t),null}}},{key:"startFeature",value:(r=hC().m((function t(){var e;return hC().w((function(t){for(;;)switch(t.n){case 0:try{(e=this._renderMathFormulas())&&this._dataQ.addToQueue("static_fields",["font_math_info",e],!1)}catch(t){this._logger.error("Failed to collect math font information",t)}case 1:return t.a(2)}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){yC(i,n,o,a,u,"next",t)}function u(t){yC(i,n,o,a,u,"throw",t)}a(void 0)}))},function(){return o.apply(this,arguments)})}],[{key:"getDefaultSettings",value:function(){return wC}}]);var r,o}(Io);function kC(t){return kC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kC(t)}function PC(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return TC(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,u=0,s=t,d.n=n,a}};function h(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=d.p,p=i[2];n>3?(o=p===r)&&(u=i[4]||3,s=i[5]===t?i[3]:i[5],i[4]=3,i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,d.v=r,d.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,d.n=p,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),u=l,s=p;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(d.n=-1),h(u,s)):d.n=s:d.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(TC(e={},r,(function(){return this})),e),f=c.prototype=u.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,TC(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,TC(f,"constructor",c),TC(c,"constructor",s),s.displayName="GeneratorFunction",TC(c,o,"GeneratorFunction"),TC(f),TC(f,o,"Generator"),TC(f,r,(function(){return this})),TC(f,"toString",(function(){return"[object Generator]"})),(PC=function(){return{w:i,m:d}})()}function TC(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}TC=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){TC(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},TC(t,e,n,r)}function OC(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function CC(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return MC(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?MC(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function MC(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function BC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jC(r.key),r)}}function jC(t){var e=function(t,e){if("object"!=kC(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=kC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kC(e)?e:e+""}function RC(t,e,n){return e=IC(e),function(t,e){if(e&&("object"==kC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,AC()?Reflect.construct(e,n||[],IC(t).constructor):e.apply(t,n))}function AC(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(AC=function(){return!!t})()}function IC(t){return IC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},IC(t)}function xC(t,e){return xC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xC(t,e)}var NC={configKey:"isFontWidthFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!0,runInLean:!0,isRunning:!1,instance:null},LC=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.document,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.devicePixelRatio;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=RC(this,e))._dataQ=t,n._document=r,n._devicePixelRatio=o,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xC(t,e)}(e,t),function(t,e,n){return e&&BC(t.prototype,e),n&&BC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"_measureFontWidths",value:function(){var t=this,e={default:[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]};function n(t,e,n){e.style.width="".concat(n,"px"),e.style.webkitTextSizeAdjust=e.style.textSizeAdjust="none",this._isZoomNeeded()?e.style.zoom="".concat(1/this._devicePixelRatio):this._isZoomResetNeeded()&&(e.style.zoom="reset");var r=t.createElement("div");r.textContent=Array.from({length:n/20|0},(function(){return"word"})).join(" "),e.appendChild(r)}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3,n=this._document.createElement("iframe");this._document.body.appendChild(n);var r=n.contentDocument;r.open(),r.write('<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1"></head><body></body></html>'),r.close();var o=t(r,r.body,e);return this._document.body.removeChild(n),o}.call(this,(function(r,o,i){return n.call(t,r,o,i),function(t,n){for(var r={},o={},i=function(){var e=CC(u[a],2),o=e[0],i=e[1][0]||{},s=t.createElement("span");s.textContent="mmMwWLliI0fiflO&1",s.style.whiteSpace="nowrap",Object.entries(i).forEach((function(t){var e=CC(t,2),n=e[0],r=e[1];void 0!==r&&(s.style[n]=r)})),r[o]=s,n.append(t.createElement("br"),s)},a=0,u=Object.entries(e);a<u.length;a++)i();return Object.keys(e).forEach((function(t){o[t]=r[t].getBoundingClientRect().width})),o}(r,o)}))}},{key:"_isZoomNeeded",value:function(){return!0}},{key:"_isZoomResetNeeded",value:function(){return!1}},{key:"startFeature",value:(n=PC().m((function t(){var e;return PC().w((function(t){for(;;)switch(t.n){case 0:try{e=this._measureFontWidths(),this._dataQ.addToQueue("static_fields",["font_width_info",e],!1)}catch(t){ue.error("Failed to collect font width information",t)}case 1:return t.a(2)}}),t,this)})),r=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){OC(i,r,o,a,u,"next",t)}function u(t){OC(i,r,o,a,u,"throw",t)}a(void 0)}))},function(){return r.apply(this,arguments)})}],[{key:"getDefaultSettings",value:function(){return NC}}]);var n,r}(Io);function DC(t){return DC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},DC(t)}function FC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,UC(r.key),r)}}function UC(t){var e=function(t,e){if("object"!=DC(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=DC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==DC(e)?e:e+""}function GC(t,e,n){return e=WC(e),function(t,e){if(e&&("object"==DC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,HC()?Reflect.construct(e,n||[],WC(t).constructor):e.apply(t,n))}function HC(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(HC=function(){return!!t})()}function WC(t){return WC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},WC(t)}function VC(t,e){return VC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},VC(t,e)}var QC=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=GC(this,e)).validateParams(t),n.isHighRes=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VC(t,e)}(e,t),function(t,e,n){return e&&FC(t.prototype,e),n&&FC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"boolean"==typeof t||ue.warn("wrong type in ScreenHighRes parameters. isHighRes : {expected: boolean, received: ".concat(DC(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.isHighRes];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"boolean"==typeof t[1]||ue.warn("ScreenHighRes - Contract verification failed")}},{key:"getName",value:function(){return"screen_high_res"}}])}(ym);function zC(t){return zC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zC(t)}function KC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qC(r.key),r)}}function qC(t){var e=function(t,e){if("object"!=zC(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=zC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zC(e)?e:e+""}function XC(t,e,n){return e=YC(e),function(t,e){if(e&&("object"==zC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,JC()?Reflect.construct(e,n||[],YC(t).constructor):e.apply(t,n))}function JC(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(JC=function(){return!!t})()}function YC(t){return YC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},YC(t)}function ZC(t,e){return ZC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ZC(t,e)}var $C={configKey:"isScreenHighResFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!0,runInLean:!0,isRunning:!1,instance:null},tM=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=XC(this,e))._dataQ=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZC(t,e)}(e,t),function(t,e,n){return e&&KC(t.prototype,e),n&&KC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){ue.info("Starting Screen High Resolution Feature");var t=e.getScreenHighResInfo(),n=new QC(t).buildQueueMessage();this._dataQ.addToQueue("static_fields",n,!1)}}],[{key:"getDefaultSettings",value:function(){return $C}},{key:"getScreenHighResInfo",value:function(){var t=e.getMediaQueryList("(-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2), (min-resolution: 192dpi)");return!!t&&t.matches}},{key:"getMediaQueryList",value:function(t){return"undefined"!=typeof window&&"function"==typeof window.matchMedia?window.matchMedia(t):null}}])}(Io);function eM(t){return eM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eM(t)}function nM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rM(r.key),r)}}function rM(t){var e=function(t,e){if("object"!=eM(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=eM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eM(e)?e:e+""}function oM(t,e,n){return e=aM(e),function(t,e){if(e&&("object"==eM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,iM()?Reflect.construct(e,n||[],aM(t).constructor):e.apply(t,n))}function iM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(iM=function(){return!!t})()}function aM(t){return aM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},aM(t)}function uM(t,e){return uM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},uM(t,e)}var sM={configKey:"isContextPropsFeature",isDefault:!1,shouldRunPerContext:!0,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInUns:!0,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},cM=function(t){function e(t,n,r,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=oM(this,e))._dataQ=t,i._domUtils=n,i._perfMonitor=r,i._configurationRepository=o,i._observerCallback=i._observerCallback.bind(i),i.calcTime=i.calcTime.bind(i),i._getEntriesByType=i._getEntriesByType.bind(i),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uM(t,e)}(e,t),function(t,e,n){return e&&nM(t.prototype,e),n&&nM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){if(self.screen){var t=window.devicePixelRatio?window.devicePixelRatio:-1,e=window.devicePixelRatio?window.devicePixelRatio:-1;this._shouldCollectStaticFields()&&this._dataQ.addToQueue("static_fields",["display",[screen.colorDepth,screen.width,screen.height,screen.availHeight||-1,screen.availWidth||-1,t,e]],!1)}this.reportPageLoadTime()}},{key:"_shouldCollectStaticFields",value:function(){var t;return(null===(t=this._configurationRepository)||void 0===t?void 0:t.get(st))!==Jt.SECONDARY}},{key:"_observerCallback",value:function(t,e){var n=t.getEntries()[0];n.duration&&(this.calcTime(n),"disconnect"in e&&e.disconnect())}},{key:"_isEntrySupportedByBrowser",value:function(t){return!("supportedEntryTypes"in window.PerformanceObserver)||PerformanceObserver.supportedEntryTypes.includes(t)}},{key:"_getEntriesByType",value:function(){if(window.performance.timing&&window.performance.timing.loadEventEnd&&window.performance.timing.navigationStart){var t={duration:window.performance.timing.loadEventEnd-window.performance.timing.navigationStart};this.calcTime(t)}}},{key:"calcTime",value:function(t){ze.isUndefinedNull(t)?ue.warn("Context Props Feature: no entries of navigation timing were captured"):ze.isUndefinedNull(t)||!ze.isUndefinedNull(t.duration)?this._perfMonitor.reportMonitor("t.timeTillPageLoad",Math.round(t.duration)):ue.warn("Context Props Feature: page duration loading was not calculated")}},{key:"reportPageLoadTime",value:function(){if(window.performance&&"PerformanceNavigationTiming"in window){var t="navigation";if(!("PerformanceObserver"in window)||!this._isEntrySupportedByBrowser(t))return void this.reportPageLoadTimeFallback();var e=new PerformanceObserver(this._observerCallback);try{e.observe({type:t,buffered:!0})}catch(t){this.reportPageLoadTimeFallback()}}else this.reportPageLoadTimeFallback()}},{key:"reportPageLoadTimeFallback",value:function(){var t=this;gc.isWindowDocumentReady(window)?ze.asyncCall.call(this._getEntriesByType):ze.addEventListener(self,"load",(function(){ze.asyncCall.call(t._getEntriesByType)}))}}],[{key:"getDefaultSettings",value:function(){return sM}}])}(Io);function lM(t){return lM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lM(t)}function fM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dM(r.key),r)}}function dM(t){var e=function(t,e){if("object"!=lM(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=lM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lM(e)?e:e+""}function hM(t,e,n){return e=yM(e),function(t,e){if(e&&("object"==lM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,pM()?Reflect.construct(e,n||[],yM(t).constructor):e.apply(t,n))}function pM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(pM=function(){return!!t})()}function yM(t){return yM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yM(t)}function mM(t,e){return mM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},mM(t,e)}var vM={configKey:"isScriptsFeature",isDefault:!1,shouldRunPerContext:!0,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInUns:!0,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},bM=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=hM(this,e))._dataQ=t,r._timeoutValue=1e3,r._scriptsRepository=n,r._runDetectionLoopBinded=r._runDetectionLoop.bind(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mM(t,e)}(e,t),function(t,e,n){return e&&fM(t.prototype,e),n&&fM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"_checkScriptsData",value:function(){for(var t=document.scripts,e=0;e<t.length;e++){var n={src:t[e].src,text:t[e].text};this._scriptsRepository.exists(n)||(this._scriptsRepository.add(n),this._dataQ.addToQueue("scripts",[null,n.src,n.textHash]))}}},{key:"_runDetectionLoop",value:function(){this._checkScriptsData(),this._timer=setTimeout(this._runDetectionLoopBinded,this._timeoutValue),this._timeoutValue<536870911&&(this._timeoutValue*=4)}},{key:"startFeature",value:function(){this._runDetectionLoop()}},{key:"stopFeature",value:function(){this._timer&&clearTimeout(this._timer)}}],[{key:"getDefaultSettings",value:function(){return vM}}])}(Io);function gM(t){return gM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gM(t)}function _M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,SM(r.key),r)}}function SM(t){var e=function(t,e){if("object"!=gM(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=gM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gM(e)?e:e+""}function wM(t,e,n){return e=kM(e),function(t,e){if(e&&("object"==gM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,EM()?Reflect.construct(e,n||[],kM(t).constructor):e.apply(t,n))}function EM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(EM=function(){return!!t})()}function kM(t){return kM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kM(t)}function PM(t,e){return PM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},PM(t,e)}var TM={configKey:"isFilesFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!0,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},OM=function(t){function e(t,n,r,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=wM(this,e))._utils=n,a._configurationRepository=t,a._sessionService=r,a._muidService=o,a._cidCache=i,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PM(t,e)}(e,t),function(t,e,n){return e&&_M(t.prototype,e),n&&_M(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"getFiles",value:function(){if(this._customerId&&this._muid&&this._sid&&this._addrList&&this._addrList.length>0)for(var t,e=0;e<this._addrList.length;e++)t=this._addrList[e]+"?cid="+this._customerId+"&snum="+this._sid+"&muid="+this._muid,this._utils.getPostUrl(t,"GET",null,null,null),this._isSent=!0}},{key:"startFeature",value:function(){var t;this._isSent=!1;try{this._addrList=JSON.parse(this._configurationRepository.get("getAddrList"))}catch(t){this._addrList=""}this._customerId=this._cidCache.get()||"",this._muid=(null===(t=this._muidService)||void 0===t?void 0:t.muid)||"",this._sid=this._sessionService.sessionId||"",this.getFiles()}},{key:"updateFeatureConfig",value:function(){var t;try{this._addrList=JSON.parse(this._configurationRepository.get("getAddrList"))}catch(t){this._addrList=""}this._customerId=this._cidCache.get()||"",this._muid=(null===(t=this._muidService)||void 0===t?void 0:t.muid)||"",this._sid=this._sessionService.sessionId||"",this._isSent||this.getFiles()}}],[{key:"getDefaultSettings",value:function(){return TM}}])}(Io);function CM(t){return CM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CM(t)}function MM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,BM(r.key),r)}}function BM(t){var e=function(t,e){if("object"!=CM(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=CM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==CM(e)?e:e+""}function jM(t,e,n){return e=AM(e),function(t,e){if(e&&("object"==CM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,RM()?Reflect.construct(e,n||[],AM(t).constructor):e.apply(t,n))}function RM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(RM=function(){return!!t})()}function AM(t){return AM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},AM(t)}function IM(t,e){return IM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},IM(t,e)}var xM={configKey:"isMetadataCollect",isDefault:!0,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInSlave:!0,runInLean:!0,runInUns:!1,isRunning:!1,instance:null},NM=function(t){function e(t,n,r,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=jM(this,e))._configurationRepository=t,i._dataQ=n,i._metaDataSiteMapper=r,i._utils=o,i._metaDataSiteMapper.updateObserver(i.onSiteMapperMatch.bind(i)),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IM(t,e)}(e,t),function(t,e,n){return e&&MM(t.prototype,e),n&&MM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){this._metaDataSiteMapper.initTracking()}},{key:"stopFeature",value:function(){this._metaDataSiteMapper.stopTracking()}},{key:"onSiteMapperMatch",value:function(t){ue.debug("Metadata Collector mapper match - ".concat(JSON.stringify(t))),t.metaVal&&this._dataQ.addToQueue("metadata_map",[null,t.metaVal,this._utils.dateNow()])}},{key:"updateFeatureConfig",value:function(){this._metaDataSiteMapper.onConfigUpdate(this._configurationRepository)}}],[{key:"getDefaultSettings",value:function(){return xM}}])}(Io),LM=null,DM=null,FM=null,UM=null;function GM(t){LM.removeElementEvents(t),LM.addElementEvents(t,!0)}function HM(t){DM.removeElementEvents(t),DM.addElementEvents(t,!0)}function WM(t){FM.removeElementEvents(t),FM.addElementEvents(t,!0)}function VM(t){UM.removeElementEvents(t),UM.addElementEvents(t,!0)}function QM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function zM(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?QM(Object(n),!0).forEach((function(e){eB(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QM(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function KM(t){return KM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},KM(t)}function qM(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function XM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nB(r.key),r)}}function JM(t,e,n){return e&&XM(t.prototype,e),n&&XM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function YM(t,e,n){return e=$M(e),function(t,e){if(e&&("object"==KM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ZM()?Reflect.construct(e,n||[],$M(t).constructor):e.apply(t,n))}function ZM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ZM=function(){return!!t})()}function $M(t){return $M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$M(t)}function tB(t,e){return tB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tB(t,e)}function eB(t,e,n){return(e=nB(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nB(t){var e=function(t,e){if("object"!=KM(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=KM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==KM(e)?e:e+""}var rB={configKey:"isCrossdomain",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},oB={found:0,new:1},iB=/(?=(child\-src)|(frame\-src))([^;]+)/gi,aB=/http[s]?:\/\/([^\/]+)/gi,uB={resource:null,iframeElement:!1,blockedByCSP:!1,iframeLoaded:!1,ACKMessageSent:!1,ACKMessageRecieved:!1,unavailable:!1},sB=["eventSequence","timestamp","eventType","domainUrl","muid"],cB=function(t){function e(t){var n;return qM(this,e),eB(n=YM(this,e),"startFeature",(function(t){n._domainsResources=n._configurationRepository.get(O),n._crossDomainsTimeout=n._configurationRepository.get(C),Array.isArray(n._domainsResources)&&n._domainsResources.length>0&&(n._windowMessageEmitter.startObserver(t),n._domainsResources.forEach((function(t){var e=t.match(aB);if(null!==e&&"string"==typeof e[0]){var r=e[0];if("object"===KM(n._domainsStates[r]))return;n._domainsStates[r]=zM({},uB),n._domainsStates[r].resource=t,n._domains.push(r)}})),Array.isArray(n._domains)&&n._domains.length>0&&(n.isBlockedByCSP(t,n._domains),n._domUtils.onDocumentBody(t.Context,(function(){n.connectDomains(t)}))))})),eB(n,"stopFeature",(function(t){n._clearFeaturesObjects(t)})),eB(n,"_clearFeaturesObjects",(function(t){n._windowMessageEmitter.stopObserver(t),Array.isArray(n._domains)&&n._domains.length>0&&(n._domains.forEach((function(e){n.clearDomElements(t,e)})),n._domains=[],n._domainsStates={})})),eB(n,"connectDomains",(function(t){Array.isArray(n._domains)&&n._domains.length>0&&(n._domains.forEach((function(e){n._domainsStates[e].blockedByCSP||!1!==n._domainsStates[e].iframeElement||n.createIframe(t,e)})),n._domainsTimeoutFunc=setTimeout((function(){n._domains.forEach((function(e){"object"===KM(n._domainsStates[e])&&!1===n._domainsStates[e].ACKMessageRecieved&&!1===n._domainsStates[e].unavailable&&(ue.warn("Cross Domain feature - domain ".concat(e," is unavailable")),n._domainsStates[e].unavailable=!0,n.clearDomElements(t,e))}))}),n._crossDomainsTimeout))})),eB(n,"createIframe",(function(t,r){var o=t.getDocument().createElement("iframe");o.onload=function(){n.postNextMessage(r)},o.id=Vi+e.generateRandomID(),o.src=n._domainsStates[r].resource,o.style.display="none",o.style.opacity="0",o.width="1",o.height="1",t.getDocument().body.appendChild(o),n._domainsStates[r].iframeElement=o})),eB(n,"clearDomElements",(function(t,e){var r=n._domainsStates[e].iframeElement;"object"===KM(r)&&(null!==t.getDocument().getElementById(n._domainsStates[e].iframeElement.id)&&t.getDocument().body.removeChild(r))})),eB(n,"postNextMessage",(function(t){if(!n._domainsStates[t].ACKMessageRecieved&&n._domainsStates[t].iframeElement){var e={muid:n._generatedMUID};n._domainsStates[t].iframeElement.contentWindow.postMessage(JSON.stringify(e),t),n._domainsStates[t].ACKMessageSent=!0}})),eB(n,"isBlockedByCSP",(function(t,e){if(!Array.isArray(e)||e.length<1)throw new Error("Domains are expected for content security policy assertion");var r=!1;[].slice.call(t.getDocument().getElementsByTagName("meta")).forEach((function(t){if("Content-Security-Policy"===t.getAttribute("http-equiv")){r=!0;var o=t.getAttribute("content").match(iB);e.forEach((function(t){o&&-1===o[0].indexOf(t)&&"object"===KM(n._domainsStates[t])&&(n._domainsStates[t].blockedByCSP=!0,ue.warn("Cross Domain feature - domain ".concat(t," is blocked by CSP")))}))}if(r)return!1}))})),eB(n,"windowMessageHandler",(function(t){var e=t.message.origin;if(n._domainsStates.hasOwnProperty(e)){if(!0===n._domainsStates[e].ACKMessageRecieved)return;n._domainsStates[e].ACKMessageRecieved=!0,n.clearDomElements(new na(t.message.currentTarget),e);var r=t.message.data;n.sendToQueue(e,r)}})),eB(n,"sendToQueue",(function(t,e){var r=t.replace(/http[s]?:\/\//i,"");"object"===KM(e.found)&&Object.keys(e.found).forEach((function(t){var o=n._utils.StorageUtils.getAndUpdateEventSequenceNumber(),i=r,a=e.found[t].split("__"),u={eventType:n._eventType.found,eventSequence:o,domainUrl:i,muid:a[0],timestamp:a[1]};n._dataQ.addToQueue("crossmuid_event",n._utils.convertToArrayByMap(sB,u),!0)})),"object"===KM(e.new)&&Object.keys(e.new).forEach((function(t){var o=n._utils.StorageUtils.getAndUpdateEventSequenceNumber(),i=r,a=e.new[t].split("__"),u={eventType:n._eventType.new,eventSequence:o,domainUrl:i,muid:a[0],timestamp:a[1]};n._dataQ.addToQueue("crossmuid_event",n._utils.convertToArrayByMap(sB,u))})),"object"===KM(e.error_message)&&ue.warn("Cross Domain feature - domain ".concat(r," error. Error Message: \n                ").concat(e.error_message," Code: ").concat(e.error_code))})),eB(n,"updateFeatureConfig",(function(t){n._domainsResources=n._configurationRepository.get(O),n._crossDomainsTimeout=n._configurationRepository.get(C),clearTimeout(n._domainsTimeoutFunc),n._domainsTimeoutFunc=null,n.updateDomainStates(t)})),eB(n,"updateDomainStates",(function(t){Array.isArray(n._domainsResources)&&n._domainsResources.length>0&&(n._domains=[],n._domainsResources.forEach((function(t){var e=t.match(aB);if(null!==e&&"string"==typeof e[0]){var r=e[0];"object"!==KM(n._domainsStates[r])&&(n._domainsStates[r]=zM({},uB),n._domainsStates[r].resource=t),n._domains.push(r)}})),Array.isArray(n._domains)&&n._domains.length>0&&(n.isBlockedByCSP(t,n._domains),n._domUtils.onDocumentBody(t.Context,(function(){n.connectDomains(t)}))))})),n._configurationRepository=t.configurationRepository,n._dataQ=t.dataQ,n._utils=t.utils,n._domUtils=t.domUtils,n._eventType=t.eventType,n._messageBus=t.messageBus,n._windowMessageEmitter=t.windowMessageEventEmitter,n._messageBus.subscribe(_o,n.windowMessageHandler),n._generatedMUID=n._utils.dateNow()+"-"+n._utils.generateUUID().toUpperCase(),n._domainsStates={},n._domainsResources=[],n._domains=[],n._domainsTimeoutFunc=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tB(t,e)}(e,t),JM(e,null,[{key:"getDefaultSettings",value:function(){return rB}},{key:"Builder",get:function(){return function(){return JM((function t(e,n,r,o,i){qM(this,t),this.configurationRepository=e,this.dataQ=n,this.utils=r,this.domUtils=o,this.eventType=i}),[{key:"withMessageBus",value:function(t){return this.messageBus=t,this}},{key:"withWindowMessageEventEmitter",value:function(t){return this.windowMessageEventEmitter=t,this}},{key:"build",value:function(){return new e(this)}}])}()}},{key:"generateRandomID",value:function(){for(var t="abcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<16;n++)e+=t.charAt(Math.floor(36*Math.random()));return e}}])}(Io),lB=cB;function fB(t){return fB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fB(t)}function dB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hB(r.key),r)}}function hB(t){var e=function(t,e){if("object"!=fB(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=fB(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fB(e)?e:e+""}var pB=function(){return function(t,e,n){return e&&dB(t.prototype,e),n&&dB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),[{key:"getEventTimestamp",value:function(){return ze.dateNow()}},{key:"getTimestampFromEvent",value:function(t){return t.timeStamp?ze.cutDecimalPointDigits(t.timeStamp,3):0}},{key:"updateFeatureConfig",value:function(){}},{key:"processElements",value:function(t,e,n,r,o){t.forEach((function(t){var i=n.isListed(t);i&&!e?r.call(n,t):i||o.call(n,t,!1)}))}}])}();function yB(t){return yB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yB(t)}function mB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wB(r.key),r)}}function vB(t,e,n){return e=gB(e),function(t,e){if(e&&("object"==yB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,bB()?Reflect.construct(e,n||[],gB(t).constructor):e.apply(t,n))}function bB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(bB=function(){return!!t})()}function gB(t){return gB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gB(t)}function _B(t,e){return _B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_B(t,e)}function SB(t,e,n){return(e=wB(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wB(t){var e=function(t,e){if("object"!=yB(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=yB(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yB(e)?e:e+""}function EB(t){return function(t){if(Array.isArray(t))return kB(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return kB(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kB(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kB(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var PB="input:not([type='color']):not([type='hidden']):not([type='file']):not([type='image']):not([type='button']):not([type='radio']):not([type='checkbox']), textarea",TB=function(t,e){return{applyAction:function(n,r,o){if(!["start","stop"].includes(r))return!1;var i=n.getDocument(),a=[];if(e>0){var u=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(n<=0)return[];var r=[],o=t.querySelectorAll(PB);return r.push.apply(r,EB(o)),n>1&&t.querySelectorAll("*").forEach((function(t){t.shadowRoot&&r.push.apply(r,EB(u(t.shadowRoot,n-1)))})),r};a=u(i)}else for(var s=i.querySelectorAll(PB),c=0;c<s.length;c++)a.push(s[c]);a.length>0&&t[r](a,n.Context,o)}}},OB=function(t){function e(t,n,r,o,i,a,u,s,c){var l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),SB(l=vB(this,e),"handleInputEvents",(function(t){"InputEvent"===t.constructor.name&&l._inputEventsPerElement.set(t.target,{});var e=t.target.value||"";""!==e&&(e=l._maskingService.maskText(e,t.target.id)),l._sendToQueue(t,{length:e?e.length:0,elementValues:e,selected:-1})})),SB(l,"handleFocusBlurEvents",(function(t){l._sendToQueue(t,{length:0,selected:-1,elementValues:""})})),SB(l,"handleSyntheticInputEvents",(function(t){if(!l._inputEventsPerElement.has(t.target)||void 0!==t.jQueryMask&&("autotab"===t.jQueryMask||"prasleyValidator"===t.jQueryMask)){var e=t.target.value||"";""!==e&&(e=l._maskingService.maskText(e,t.target.id)),l._sendToQueue(t,{length:e?e.length:0,elementValues:e,selected:-1})}})),l._elements=t,l._sendToQueue=n,l._messageBus=o,l._CDUtils=r,l._StandardInputEventsEmitter=i,l._SyntheticMaskInputEventsHandler=a,l._SyntheticAutotabInputEventsHandler=u,l._maskingService=s,l._inputEventsPerElement=new WeakMap,l._maxShadowDepth=c,l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_B(t,e)}(e,t),function(t,e,n){return e&&mB(t.prototype,e),n&&mB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"bind",value:function(t){this._messageBus.subscribe($r,this.handleInputEvents),this._messageBus.subscribe(to,this.handleFocusBlurEvents),this._messageBus.subscribe(eo,this.handleFocusBlurEvents),this._messageBus.subscribe(uo,this.handleSyntheticInputEvents),TB(this._StandardInputEventsEmitter,this._maxShadowDepth).applyAction(t,"start"),TB(this._SyntheticMaskInputEventsHandler,this._maxShadowDepth).applyAction(t,"start"),TB(this._SyntheticAutotabInputEventsHandler,this._maxShadowDepth).applyAction(t,"start")}},{key:"unbind",value:function(t){TB(this._StandardInputEventsEmitter,this._maxShadowDepth).applyAction(t,"stop"),TB(this._SyntheticMaskInputEventsHandler,this._maxShadowDepth).applyAction(t,"stop"),TB(this._SyntheticAutotabInputEventsHandler,this._maxShadowDepth).applyAction(t,"stop"),this._messageBus.unsubscribe($r,this.handleInputEvents),this._messageBus.unsubscribe(to,this.handleFocusBlurEvents),this._messageBus.unsubscribe(eo,this.handleFocusBlurEvents),this._messageBus.unsubscribe(uo,this.handleSyntheticInputEvents)}},{key:"addOnLoadInputData",value:function(t,e){var n=t.getDocument().querySelectorAll(PB);this.processElements(n,e,this._elements,this._elements.resendElementPerContext,this._elements.getElement)}}])}(pB),CB=OB;function MB(t){return MB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},MB(t)}function BB(t){return function(t){if(Array.isArray(t))return jB(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return jB(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jB(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jB(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function RB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,LB(r.key),r)}}function AB(t,e,n){return e=xB(e),function(t,e){if(e&&("object"==MB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,IB()?Reflect.construct(e,n||[],xB(t).constructor):e.apply(t,n))}function IB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(IB=function(){return!!t})()}function xB(t){return xB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xB(t)}function NB(t,e){return NB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},NB(t,e)}function LB(t){var e=function(t,e){if("object"!=MB(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=MB(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==MB(e)?e:e+""}var DB=function(t){function e(t,n,r,o,i,a,u){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){(e=LB(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(s=AB(this,e),"handleInputEvents",(function(t){var e,n,r,o,i,a,u="",c=null==t||null===(e=t.getAttribute)||void 0===e?void 0:e.call(t,null===(n=s._inputElementSettings)||void 0===n?void 0:n.elementDataAttribute);if(c)u=c;else if(null!=t&&null!==(r=t.target)&&void 0!==r&&r.ariaValueNow)u=t.target.ariaValueNow;else if(null!=t&&null!==(o=t.target)&&void 0!==o&&o.value){var l;u=null===(l=t.target)||void 0===l?void 0:l.value}else if(null!=t&&t[null===(i=s._inputElementSettings)||void 0===i?void 0:i.elementDataAttribute]){var f;u=t[null===(f=s._inputElementSettings)||void 0===f?void 0:f.elementDataAttribute]}""!==u&&(u=s._maskingService.maskText(u,t.id)),""!==u&&s._sendToQueue(t,{length:(null===(a=u)||void 0===a?void 0:a.length)||0,elementValues:u,selected:-1})})),s._elements=t,s._sendToQueue=n,s._CDUtils=r,s._messageBus=o,s._StandardCustomInputEmitter=i,s._maskingService=a,s._inputElementSettings=u,s._elementsFromDoc={mainElement:"",customButtons:[]},s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NB(t,e)}(e,t),function(t,e,n){return e&&RB(t.prototype,e),n&&RB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"bind",value:function(t){var e,n,r,o;if(null!==(e=this._inputElementSettings)&&void 0!==e&&e.parentElementSelector||null!==(n=this._inputElementSettings)&&void 0!==n&&n.childElementWithCustomAttribute){var i=t.getDocument();this._messageBus.subscribe(Po,this.handleInputEvents);var a=[null===(r=this._elementsFromDoc)||void 0===r?void 0:r.mainElement].concat(BB(this._elementsFromDoc.customButtons));""===(null===(o=this._elementsFromDoc)||void 0===o?void 0:o.mainElement)&&this.getSelectElementsFromDoc(i),this.addListenersBySelector(a)}}},{key:"unbind",value:function(t){var e,n,r,o;if(null!==(e=this._inputElementSettings)&&void 0!==e&&e.parentElementSelector||null!==(n=this._inputElementSettings)&&void 0!==n&&n.childElementWithCustomAttribute){var i=t.getDocument();this._messageBus.subscribe(Po,this.handleInputEvents);var a=[null===(r=this._elementsFromDoc)||void 0===r?void 0:r.mainElement].concat(BB(this._elementsFromDoc.customButtons));""===(null===(o=this._elementsFromDoc)||void 0===o?void 0:o.mainElement)&&this.getSelectElementsFromDoc(i),this.removeListenersBySelector(a)}}},{key:"getSelectElementsFromDoc",value:function(t){var e,n,r,o=this,i=t.querySelector("body"),a=t.querySelector(null===(e=this._inputElementSettings)||void 0===e?void 0:e.childElementWithCustomAttribute);i&&(a&&(this._elementsFromDoc.mainElement=a),null!==(n=this._inputElementSettings)&&void 0!==n&&n.customButtons&&(null===(r=this._inputElementSettings)||void 0===r||r.customButtons.forEach((function(e){var n=t.querySelector(e);n&&o._elementsFromDoc.customButtons.push(n)}))));return this._elementsFromDoc}},{key:"addListenersBySelector",value:function(t){var e;null!==(e=this._elementsFromDoc)&&void 0!==e&&e.mainElement&&t.length>=1&&this._StandardCustomInputEmitter.start(t)}},{key:"removeListenersBySelector",value:function(t){var e;null!==(e=this._elementsFromDoc)&&void 0!==e&&e.mainElement&&t.length>=1&&this._StandardCustomInputEmitter.stop(t),this._elementsFromDoc={mainElement:"",customButtons:[]}}},{key:"addOnLoadInputData",value:function(t,e){var n,r,o,i,a,u=this;if(null!==(n=this._inputElementSettings)&&void 0!==n&&n.parentElementSelector||null!==(r=this._inputElementSettings)&&void 0!==r&&r.childElementWithCustomAttribute){var s=t.getDocument(),c=[null===(o=this._elementsFromDoc)||void 0===o?void 0:o.mainElement].concat(BB(this._elementsFromDoc.customButtons));""===(null===(i=this._elementsFromDoc)||void 0===i?void 0:i.mainElement)&&this.getSelectElementsFromDoc(s),null!==(a=this._elementsFromDoc)&&void 0!==a&&a.mainElement&&c.length>=1&&c.forEach((function(t){u._elements.isListed(t)?e||u._elements.resendElementPerContext(t):u._elements.getElement(t,!1)}))}}}])}(pB),FB=DB;function UB(t){return UB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},UB(t)}function GB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zB(r.key),r)}}function HB(t,e,n){return e=VB(e),function(t,e){if(e&&("object"==UB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,WB()?Reflect.construct(e,n||[],VB(t).constructor):e.apply(t,n))}function WB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(WB=function(){return!!t})()}function VB(t){return VB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},VB(t)}function QB(t,e){return QB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},QB(t,e)}function zB(t){var e=function(t,e){if("object"!=UB(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=UB(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==UB(e)?e:e+""}var KB="input[type='button'], input[type='radio'], input[type='checkbox'], button",qB=function(t){function e(t,n,r,o,i,a,u){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){(e=zB(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(s=HB(this,e),"handleOnClickEvents",(function(t){var e=t.target,n=e.value||e.innerHTML||"";n=s._maskingService.maskText(n,t.target.id),s._sendToQueue(t,{length:n.length,elementValues:n,selected:void 0===e.checked?-1:e.checked?1:0})})),s._elements=u,s._sendToQueue=t,s._CDUtils=n,s._messageBus=r,s._StandardOnClickEventsEmitter=i,s._configurationRepository=o,s._enableAutoElementId=o.get(ut),s._maskingService=a,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QB(t,e)}(e,t),function(t,e,n){return e&&GB(t.prototype,e),n&&GB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"bind",value:function(t){var e=t.getDocument();this._messageBus.subscribe(no,this.handleOnClickEvents),this.addListenersBySelector(e)}},{key:"unbind",value:function(t){for(var e=[],n=t.getDocument().querySelectorAll(KB),r=0;r<n.length;r++)e.push(n[r]);this._StandardOnClickEventsEmitter.stop(e),this._messageBus.unsubscribe(no,this.handleOnClickEvents)}},{key:"addListenersBySelector",value:function(t){for(var e=[],n=t.querySelectorAll(KB),r=0;r<n.length;r++)e.push(n[r]);this._StandardOnClickEventsEmitter.start(e)}},{key:"addOnLoadInputData",value:function(t,e){if(this._enableAutoElementId){var n=t.getDocument().querySelectorAll(KB);this.processElements(n,e,this._elements,this._elements.resendElementPerContext,this._elements.getElement)}}}])}(pB),XB=qB;function JB(t){return JB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},JB(t)}function YB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rj(r.key),r)}}function ZB(t,e,n){return e=tj(e),function(t,e){if(e&&("object"==JB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$B()?Reflect.construct(e,n||[],tj(t).constructor):e.apply(t,n))}function $B(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($B=function(){return!!t})()}function tj(t){return tj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tj(t)}function ej(t,e){return ej=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ej(t,e)}function nj(t,e,n){return(e=rj(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rj(t){var e=function(t,e){if("object"!=JB(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=JB(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==JB(e)?e:e+""}var oj="select",ij=function(t){function e(t,n,r,o,i,a,u,s){var c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),nj(c=ZB(this,e),"handleOnChangeEvents",(function(t){var e=c._CDUtils.getDropDownListValues(t.target,c._maskingService).join(";");e=c._CDUtils.clearTextFromNumbers(e);var n=t.target.selectedIndex,r=t.target.value.length;c._sendToQueue(t,{length:r,selected:n,elementValues:e})})),nj(c,"handleBlurEvent",(function(t){c._sendToQueue(t,{length:0,selected:-1,elementValues:""})})),nj(c,"handleFocusEvent",(function(t){c._sendToQueue(t,{length:0,selected:-1,elementValues:""})})),c._sendToQueue=t,c._CDUtils=n,c._messageBus=r,c._StandardOnChangeEventsEmitter=o,c._elementFocusEventEmitter=i,c._elementBlurEventEmitter=a,c._configurationRepository=u,c._collectSelectElementBlurAndFocusEvents=c._configurationRepository.get(Y),c._maskingService=s,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ej(t,e)}(e,t),function(t,e,n){return e&&YB(t.prototype,e),n&&YB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"bind",value:function(t){var e=t.getDocument();this._messageBus.subscribe(ro,this.handleOnChangeEvents),this._messageBus.subscribe(oo,this.handleFocusEvent),this._messageBus.subscribe(io,this.handleBlurEvent),this.addListenersBySelector(e)}},{key:"unbind",value:function(t){var e=t.getDocument(),n=this._getSelectElementsFromDoc(e);this._StandardOnChangeEventsEmitter.stop(n),this._elementFocusEventEmitter.stop(n),this._elementBlurEventEmitter.stop(n),this._messageBus.unsubscribe(ro,this.handleOnChangeEvents),this._messageBus.unsubscribe(oo,this.handleFocusEvent),this._messageBus.unsubscribe(io,this.handleBlurEvent)}},{key:"addListenersBySelector",value:function(t){var e=this._getSelectElementsFromDoc(t);this._StandardOnChangeEventsEmitter.start(e),this._collectSelectElementBlurAndFocusEvents&&(this._elementFocusEventEmitter.start(e),this._elementBlurEventEmitter.start(e))}},{key:"updateSettings",value:function(t){if(this._collectSelectElementBlurAndFocusEvents=this._configurationRepository.get(Y),!this._collectSelectElementBlurAndFocusEvents){var e=t.getDocument(),n=this._getSelectElementsFromDoc(e);this._elementFocusEventEmitter.stop(n),this._elementBlurEventEmitter.stop(n)}}},{key:"_getSelectElementsFromDoc",value:function(t){for(var e=[],n=t.querySelectorAll(oj),r=0;r<n.length;r++)e.push(n[r]);return e}}])}(pB),aj=ij;function uj(t){return uj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uj(t)}function sj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hj(r.key),r)}}function cj(t,e,n){return e=fj(e),function(t,e){if(e&&("object"==uj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,lj()?Reflect.construct(e,n||[],fj(t).constructor):e.apply(t,n))}function lj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(lj=function(){return!!t})()}function fj(t){return fj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fj(t)}function dj(t,e){return dj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},dj(t,e)}function hj(t){var e=function(t,e){if("object"!=uj(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=uj(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==uj(e)?e:e+""}var pj="form",yj=function(t){function e(t,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){(e=hj(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(o=cj(this,e),"handleOnFormEvents",(function(t){ue.trace("ElementEvents:_onFormSubmitEvent"),o._sendToQueue(t,{length:0,selected:-1,elementValues:""})})),o._sendToQueue=t,o._messageBus=n,o._StandardOnFormEventsEmitter=r,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dj(t,e)}(e,t),function(t,e,n){return e&&sj(t.prototype,e),n&&sj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"bind",value:function(t){var e=t.getDocument();this._messageBus.subscribe(ao,this.handleOnFormEvents),this.addListenersBySelector(e)}},{key:"unbind",value:function(t){for(var e=[],n=t.getDocument().querySelectorAll(pj),r=0;r<n.length;r++)e.push(n[r]);this._StandardOnFormEventsEmitter.stop(e),this._messageBus.unsubscribe(ao,this.handleOnFormEvents)}},{key:"addListenersBySelector",value:function(t){for(var e=[],n=t.querySelectorAll(pj),r=0;r<n.length;r++)e.push(n[r]);this._StandardOnFormEventsEmitter.start(e)}}])}(pB),mj=yj;function vj(t){return vj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vj(t)}function bj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gj(r.key),r)}}function gj(t){var e=function(t,e){if("object"!=vj(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=vj(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vj(e)?e:e+""}var _j=function(){return function(t,e,n){return e&&bj(t.prototype,e),n&&bj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),[{key:"detectPrivateMode",value:function(t){this._isWebkitBrowser()?this._detectPrivateBrowsingOnWebkit(t):this._isMozillaBrowser()?this._detectPrivateBrowsingOnMozilla(t):this._isIE10OrLater(window.navigator.userAgent)?this._detectPrivateBrowsingOnIESinceVersion10(t):window.localStorage&&/Safari/.test(window.navigator.userAgent)?this._detectPrivateBrowsingOnSafari(t):t(null)}},{key:"_isWebkitBrowser",value:function(){return!!window.webkitRequestFileSystem}},{key:"_isMozillaBrowser",value:function(){return"MozAppearance"in document.documentElement.style}},{key:"_isIE10OrLater",value:function(t){var e=t.toLowerCase();if(0===e.indexOf("msie")&&0===e.indexOf("trident"))return!1;var n=/(?:msie|rv:)\s?([\d\.]+)/.exec(e);if(n&&parseInt(n[1],10)>=10)return!0;if((n="documentElement"in document&&("filters"in document.documentElement||"documentMode"in document))&&document.documentMode&&parseFloat((e.match(/.+(?:ie|rv)[\/: ]([\d.]+)/)||[])[1])>=10)return!0;n=/edge/.test(e);var r=!!e.match(/trident\/7\./);if((n||r)&&parseFloat((e.match(/.+(?:edge|rv)[\/: ]([\d.]+)/)||[])[1])>=10)return!0;return!1}},{key:"_detectPrivateBrowsingOnWebkit",value:function(t){void 0!==navigator.storage&&"function"==typeof navigator.storage.estimate?this._storageEstimateDetectionOnWebkit(t):this._fileSystemDetectionOnWebkit(t)}},{key:"_fileSystemDetectionOnWebkit",value:function(t){window.webkitRequestFileSystem(window.TEMPORARY,1,(function(){t(!1)}),(function(){t(!0)}))}},{key:"_storageEstimateDetectionOnWebkit",value:function(t){navigator.storage.estimate().then((function(e){var n=e.quota;t(n<12e7)})).catch((function(t){ue.error("failed to detect private browsing",t)}))}},{key:"_detectPrivateBrowsingOnMozilla",value:function(t){try{var e=(indexedDB||window.indexedDB).open("test");e.onerror=function(){t(!0)},e.onsuccess=function(){t(!1)}}catch(e){t(!0)}}},{key:"_detectPrivateBrowsingOnIESinceVersion10",value:function(t){var e=!1;try{window.indexedDB||(e=!0)}catch(t){e=!0}t(e)}},{key:"_detectPrivateBrowsingOnSafari",value:function(t){var e;try{window.openDatabase(null,null,null,null)}catch(t){e=!0}try{window.localStorage.setItem("test",1)}catch(t){e=!0}e||(e=!1,window.localStorage.removeItem("test")),t(e)}}])}();function Sj(t){return Sj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sj(t)}function wj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ej(r.key),r)}}function Ej(t){var e=function(t,e){if("object"!=Sj(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Sj(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Sj(e)?e:e+""}var kj=1,Pj=2,Tj=3,Oj=4,Cj=5,Mj=1,Bj=2,jj=3,Rj=4,Aj=function(){return function(t,e,n){return e&&wj(t.prototype,e),n&&wj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),null,[{key:"getPointerHover",value:function(){var t={pointer:Cj,hover:Cj};if(window.matchMedia){var e=window.matchMedia;e("( any-pointer: fine )").matches?t.pointer=kj:e("( any-pointer: coarse )").matches?t.pointer=Pj:e("( any-pointer: none )").matches?t.pointer=Tj:e("( any-pointer )").matches&&(t.pointer=Oj),e("( any-hover: hover )").matches?t.hover=Mj:e("( any-hover: on-demand )").matches?t.hover=Bj:e("( any-hove: none )").matches?t.hover=jj:window.matchMedia("( any-hover )").matches&&(t.hover=Rj)}return t}}])}();function Ij(t){return Ij="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ij(t)}function xj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Nj(r.key),r)}}function Nj(t){var e=function(t,e){if("object"!=Ij(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ij(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ij(e)?e:e+""}var Lj=function(){return function(t,e,n){return e&&xj(t.prototype,e),n&&xj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._utils=e,this._scriptList=[]}),[{key:"count",value:function(){return this._scriptList.length}},{key:"exists",value:function(t){/\d\d\d/.test(t.src)&&(t.src=this._utils.clearTextFromNumbers(t.src));for(var e=this._utils.getHash(t.text),n=0;n<this._scriptList.length;n++)if(t.src&&t.src===this._scriptList[n].src||e&&e===this._scriptList[n].textHash)return!0;return!1}},{key:"add",value:function(t){t.textHash=this._utils.getHash(t.text),/\d\d\d/.test(t.src)&&(t.src=this._utils.clearTextFromNumbers(t.src)),this._scriptList.push({src:t.src,textHash:t.textHash})}}])}();function Dj(t){return Dj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dj(t)}function Fj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Uj(r.key),r)}}function Uj(t){var e=function(t,e){if("object"!=Dj(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Dj(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Dj(e)?e:e+""}var Gj=function(){return function(t,e,n){return e&&Fj(t.prototype,e),n&&Fj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){var n=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){(e=Uj(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"handleMutationEvent",(function(t,e){t&&e&&n._messageBus.publish(Jr,{mutation:t,browserContext:e})})),this._messageBus=e,"object"!==Dj(this._messageBus))throw new Error("Bootstrap aborted! MessageBus missing for MutationEmitter");this._documentObservers=new WeakMap}),[{key:"startObserver",value:function(t){var e=this,n=t.getDocument();if(!this._documentObservers.has(n)){var r=new window.MutationObserver((function(n){try{for(var r=0;r<n.length;r++){var o=n[r];if(o.addedNodes.length>0){e.handleMutationEvent(o,t);break}}}catch(t){ue.error("An error has occurred: ".concat(t.message))}}));r.observe(n,{childList:!0,subtree:!0}),this._documentObservers.set(n,{instance:r})}}},{key:"stopObserver",value:function(t){var e,n=t.getDocument();this._documentObservers.has(n)&&(e=this._documentObservers.get(n))&&(e.instance&&e.instance.disconnect(),this._documentObservers.delete(n))}}])}();function Hj(t){return Hj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hj(t)}function Wj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Qj(r.key),r)}}function Vj(t,e,n){return(e=Qj(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qj(t){var e=function(t,e){if("object"!=Hj(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Hj(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Hj(e)?e:e+""}var zj=function(){return function(t,e,n){return e&&Wj(t.prototype,e),n&&Wj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n,r){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Vj(this,"handleInputEvents",(function(t){o._messageBus.publish($r,t)})),Vj(this,"handleFocusEvents",(function(t){o._messageBus.publish(to,t)})),Vj(this,"handleBlurEvents",(function(t){o._messageBus.publish(eo,t)})),this._messageBus=e,this._eventAggregator=n,this._elementBindingWMap=new WeakMap,this._utils=r,this.defaultInputEventListener=[{event:"input",handler:this.handleInputEvents},{event:"focus",handler:this.handleFocusEvents},{event:"blur",handler:this.handleBlurEvents}]}),[{key:"start",value:function(t,e,n){var r=this;t.forEach((function(t){if(!r._elementBindingWMap.has(t)){var o=[];void 0!==n?"function"==typeof n.func&&Array.isArray(n.allowedEvents)&&n.allowedEvents.length>0&&(n.func(e,t)?r.defaultInputEventListener.forEach((function(t){n.allowedEvents.includes(t.event)&&o.push(t)})):o=Array.from(r.defaultInputEventListener)):o=Array.from(r.defaultInputEventListener),o.forEach((function(e){r._eventAggregator.addEventListener(t,e.event,e.handler)})),r._elementBindingWMap.set(t,{isBinded:!0,listeners:[r.handleInputEvents,r.handleFocusEvents,r.handleBlurEvents],isUsingJQuery:!1})}}))}},{key:"stop",value:function(t){var e=this;t.forEach((function(t){var n=e._elementBindingWMap.get(t);n&&n.isBinded&&(e.defaultInputEventListener.forEach((function(n){e._eventAggregator.removeEventListener(t,n.event,n.handler)})),e._elementBindingWMap.delete(t))}))}},{key:"addElementEvents",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._elementBindingWMap.has(t)){if(n){if(!this._utils.JQueryUtils.isJQueryAvailable())return void ue.error("Unable to add event listeners for element using jQuery because jQuery is not available");this.defaultInputEventListener.forEach((function(n){e._utils.JQueryUtils.addEventListener(t,n.event,n.handler)}))}else this.defaultInputEventListener.forEach((function(n){e._eventAggregator.addEventListener(t,n.event,n.handler)}));this._elementBindingWMap.set(t,{isBinded:!0,listeners:[this.handleInputEvents,this.handleFocusEvents,this.handleBlurEvents],isUsingJQuery:n})}}},{key:"removeElementEvents",value:function(t){var e=this,n=this._elementBindingWMap.get(t);if(n&&n.isBinded){if(n.isUsingJQuery){if(!this._utils.JQueryUtils.isJQueryAvailable())return void ue.error("Unable to remove event listeners for element using jQuery because jQuery is not available");this.defaultInputEventListener.forEach((function(n){e._utils.JQueryUtils.removeEventListener(t,n.event,n.handler)}))}else this.defaultInputEventListener.forEach((function(t){e._eventAggregator.removeEventListener(elements,t.event,t.handler)}));this._elementBindingWMap.delete(t)}}}])}();function Kj(t){return Kj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kj(t)}function qj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xj(r.key),r)}}function Xj(t){var e=function(t,e){if("object"!=Kj(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Kj(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Kj(e)?e:e+""}var Jj=!1;!function(){try{var t=Object.defineProperty({},"passive",{get:function(){Jj=!0}});window.addEventListener("test",null,t)}catch(t){}}();var Yj=function(){return function(t,e,n){return e&&qj(t.prototype,e),n&&qj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),null,[{key:"addEventListener",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];Jj?t.addEventListener(e,n,{capture:r,passive:o,once:i}):t.addEventListener?t.addEventListener(e,n,r):t.attachEvent("on"+e,n)}},{key:"removeEventListener",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.removeEventListener?t.removeEventListener(e,n,r):t.detachEvent("on"+e,n)}}])}();function Zj(t){return Zj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zj(t)}function $j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tR(r.key),r)}}function tR(t){var e=function(t,e){if("object"!=Zj(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Zj(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Zj(e)?e:e+""}var eR=function(){return function(t,e,n){return e&&$j(t.prototype,e),n&&$j(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n,r){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){(e=tR(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"handleOnClickEvents",(function(t){o._messageBus.publish(no,t)})),this._messageBus=e,this._eventAggregator=n,this._elementBindingWMap=new WeakMap,this._utils=r,this.defaultOnClickEventListener=[{event:"click",handler:this.handleOnClickEvents}]}),[{key:"start",value:function(t){var e=this;t.forEach((function(t){e._elementBindingWMap.has(t)||(e.defaultOnClickEventListener.forEach((function(n){e._eventAggregator.addEventListener(t,n.event,n.handler)})),e._elementBindingWMap.set(t,{isBinded:!0,listeners:[e.handleOnClickEvents],isUsingJQuery:!1}))}))}},{key:"stop",value:function(t){var e=this;t.forEach((function(t){var n=e._elementBindingWMap.get(t);n&&n.isBinded&&(e.defaultOnClickEventListener.forEach((function(n){e._eventAggregator.removeEventListener(t,n.event,n.handler)})),e._elementBindingWMap.delete(t))}))}},{key:"addElementEvents",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._elementBindingWMap.has(t)){if(n){if(!this._utils.JQueryUtils.isJQueryAvailable())return void ue.error("Unable to add event listeners for element using jQuery because jQuery is not available");this.defaultOnClickEventListener.forEach((function(n){e._utils.JQueryUtils.addEventListener(t,n.event,n.handler)}))}else this.defaultOnClickEventListener.forEach((function(n){e._eventAggregator.addEventListener(t,n.event,n.handler)}));this._elementBindingWMap.set(t,{isBinded:!0,listeners:[this.handleOnClickEvents],isUsingJQuery:n})}}},{key:"removeElementEvents",value:function(t){var e=this,n=this._elementBindingWMap.get(t);if(n&&n.isBinded){if(n.isUsingJQuery){if(!this._utils.JQueryUtils.isJQueryAvailable())return void ue.error("Unable to remove event listeners for element using jQuery because jQuery is not available");this.defaultOnClickEventListener.forEach((function(n){e._utils.JQueryUtils.removeEventListener(t,n.event,n.handler)}))}else this.defaultOnClickEventListener.forEach((function(t){e._eventAggregator.removeEventListener(elements,t.event,t.handler)}));this._elementBindingWMap.delete(t)}}}])}(),nR=eR;function rR(t){return rR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rR(t)}function oR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,iR(r.key),r)}}function iR(t){var e=function(t,e){if("object"!=rR(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=rR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rR(e)?e:e+""}var aR=function(){return function(t,e,n){return e&&oR(t.prototype,e),n&&oR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n,r){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){(e=iR(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"handleOnChangeEvents",(function(t){o._messageBus.publish(ro,t)})),this._messageBus=e,this._eventAggregator=n,this._elementBindingWMap=new WeakMap,this._utils=r,this.defaultOnChangeEventListener=[{event:"change",handler:this.handleOnChangeEvents}]}),[{key:"start",value:function(t){var e=this;t.forEach((function(t){e._elementBindingWMap.has(t)||(e.defaultOnChangeEventListener.forEach((function(n){e._eventAggregator.addEventListener(t,n.event,n.handler)})),e._elementBindingWMap.set(t,{isBinded:!0,listeners:[e.handleOnChangeEvents],isUsingJQuery:!1}))}))}},{key:"stop",value:function(t){var e=this;t.forEach((function(t){var n=e._elementBindingWMap.get(t);n&&n.isBinded&&(e.defaultOnChangeEventListener.forEach((function(n){e._eventAggregator.removeEventListener(t,n.event,n.handler)})),e._elementBindingWMap.delete(t))}))}},{key:"addElementEvents",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._elementBindingWMap.has(t)){if(n){if(!this._utils.JQueryUtils.isJQueryAvailable())return void ue.error("Unable to add event listeners for element using jQuery because jQuery is not available");this.defaultOnChangeEventListener.forEach((function(n){e._utils.JQueryUtils.addEventListener(t,n.event,n.handler)}))}else this.defaultOnChangeEventListener.forEach((function(n){e._eventAggregator.addEventListener(t,n.event,n.handler)}));this._elementBindingWMap.set(t,{isBinded:!0,listeners:[this.handleOnChangeEvents],isUsingJQuery:n})}}},{key:"removeElementEvents",value:function(t){var e=this,n=this._elementBindingWMap.get(t);if(n&&n.isBinded){if(n.isUsingJQuery){if(!this._utils.JQueryUtils.isJQueryAvailable())return void ue.error("Unable to remove event listeners for element using jQuery because jQuery is not available");this.defaultOnChangeEventListener.forEach((function(n){e._utils.JQueryUtils.removeEventListener(t,n.event,n.handler)}))}else this.defaultOnChangeEventListener.forEach((function(t){e._eventAggregator.removeEventListener(elements,t.event,t.handler)}));this._elementBindingWMap.delete(t)}}}])}(),uR=aR;function sR(t){return sR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sR(t)}function cR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lR(r.key),r)}}function lR(t){var e=function(t,e){if("object"!=sR(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=sR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sR(e)?e:e+""}var fR=function(){return function(t,e,n){return e&&cR(t.prototype,e),n&&cR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n,r){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){(e=lR(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"handleOnFormSubmitEvents",(function(t){o._messageBus.publish(ao,t)})),this._messageBus=e,this._eventAggregator=n,this._elementBindingWMap=new WeakMap,this._utils=r,this.defaultOnFormEventListener=[{event:"submit",handler:this.handleOnFormSubmitEvents}]}),[{key:"start",value:function(t){var e=this;t.forEach((function(t){e._elementBindingWMap.has(t)||(e.defaultOnFormEventListener.forEach((function(n){e._eventAggregator.addEventListener(t,n.event,n.handler)})),e._elementBindingWMap.set(t,{isBinded:!0,listeners:[e.handleOnFormSubmitEvents],isUsingJQuery:!1}))}))}},{key:"stop",value:function(t){var e=this;t.forEach((function(t){var n=e._elementBindingWMap.get(t);n&&n.isBinded&&(e.defaultOnFormEventListener.forEach((function(n){e._eventAggregator.removeEventListener(t,n.event,n.handler)})),e._elementBindingWMap.delete(t))}))}},{key:"addElementEvents",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._elementBindingWMap.has(t)){if(n){if(!this._utils.JQueryUtils.isJQueryAvailable())return void ue.error("Unable to add event listeners for element using jQuery because jQuery is not available");this.defaultOnFormEventListener.forEach((function(n){e._utils.JQueryUtils.addEventListener(t,n.event,n.handler)}))}else this.defaultOnFormEventListener.forEach((function(n){e._eventAggregator.addEventListener(t,n.event,n.handler)}));this._elementBindingWMap.set(t,{isBinded:!0,listeners:[this.handleOnFormSubmitEvents],isUsingJQuery:n})}}},{key:"removeElementEvents",value:function(t){var e=this,n=this._elementBindingWMap.get(t);if(n&&n.isBinded){if(n.isUsingJQuery){if(!this._utils.JQueryUtils.isJQueryAvailable())return void ue.error("Unable to remove event listeners for element using jQuery because jQuery is not available");this.defaultOnFormEventListener.forEach((function(n){e._utils.JQueryUtils.removeEventListener(t,n.event,n.handler)}))}else this.defaultOnFormEventListener.forEach((function(t){e._eventAggregator.removeEventListener(elements,t.event,t.handler)}));this._elementBindingWMap.delete(t)}}}])}(),dR=fR;function hR(t){return hR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hR(t)}function pR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yR(r.key),r)}}function yR(t){var e=function(t,e){if("object"!=hR(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=hR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hR(e)?e:e+""}var mR=function(){return function(t,e,n){return e&&pR(t.prototype,e),n&&pR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){(e=yR(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"isJQueryDataSupported",(function(t){return!(!t.jQuery||!t.jQuery._data)})),this._messageBus=e,this._eventAggregator=n,this._elementBindingWMap=new WeakMap,this._utils=r,this.defaultEventListener=[{event:"keypress",handler:this.handleKeypressEvents.bind(this)}]}),[{key:"handleKeypressEvents",value:function(t,e){}},{key:"registerElement",value:function(t,e){var n=this;if(!this._elementBindingWMap.has(t)){var r={};this.defaultEventListener.forEach((function(o){var i=function(t){o.handler(t,e)};r[o.event]=i,n._eventAggregator.addEventListener(t,o.event,i)})),this._elementBindingWMap.set(t,{isBinded:!0,listeners:r})}}},{key:"unregisterElements",value:function(t){var e=this;t.forEach((function(t){var n=e._elementBindingWMap.get(t);n&&n.isBinded&&(e.defaultEventListener.forEach((function(r){e._eventAggregator.removeEventListener(t,r.event,n.listeners[r.event])})),e._elementBindingWMap.delete(t))}))}},{key:"publishEvent",value:function(t,e,n,r){var o={bubbles:!0,cancelBubble:!1,cancelable:!1,composed:!0,currentTarget:null,data:r,dataTransfer:null,defaultPrevented:!1,detail:0,eventPhase:0,inputType:n,isComposing:!1,isTrusted:!0,jqueryMask:e,returnValue:!0,sourceCapabilities:null,srcElement:Object.assign(t.target||t.srcElement,{}),target:Object.assign(t.target,{}),timeStamp:t.timeStamp,type:"input",view:null,which:0};this._messageBus.publish(uo,o)}}])}();function vR(t){return vR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vR(t)}function bR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gR(r.key),r)}}function gR(t){var e=function(t,e){if("object"!=vR(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=vR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vR(e)?e:e+""}function _R(t,e,n){return e=wR(e),function(t,e){if(e&&("object"==vR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,SR()?Reflect.construct(e,n||[],wR(t).constructor):e.apply(t,n))}function SR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(SR=function(){return!!t})()}function wR(t){return wR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wR(t)}function ER(t,e){return ER=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ER(t,e)}var kR=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),_R(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ER(t,e)}(e,t),function(t,e,n){return e&&bR(t.prototype,e),n&&bR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"start",value:function(t,e){var n=this;e=e||window.self,t.forEach((function(t){n.isJQueryDataSupported(e)&&n.hasMaskEventSupported(t,e)&&n.registerElement(t,e)}))}},{key:"stop",value:function(t){this.unregisterElements(t)}},{key:"hasMaskEventSupported",value:function(t,e){var n=e.jQuery._data(t,"events");if(void 0===n)return!1;for(var r=Object.keys(n),o=0;o<r.length;o++)if("unmask"===r[o])return!0;return!1}},{key:"handleKeypressEvents",value:function(t,e){if(this.isJQueryDataSupported(e)&&this.hasMaskEventSupported(t.target,e)){var n=t.key;this.publishEvent(t,"maskedInput","insertText",n)}}}])}(mR);function PR(t){return PR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},PR(t)}function TR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,OR(r.key),r)}}function OR(t){var e=function(t,e){if("object"!=PR(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=PR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==PR(e)?e:e+""}function CR(t,e,n){return e=BR(e),function(t,e){if(e&&("object"==PR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,MR()?Reflect.construct(e,n||[],BR(t).constructor):e.apply(t,n))}function MR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(MR=function(){return!!t})()}function BR(t){return BR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},BR(t)}function jR(t,e){return jR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jR(t,e)}var RR=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),CR(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jR(t,e)}(e,t),function(t,e,n){return e&&TR(t.prototype,e),n&&TR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"start",value:function(t,e){var n=this;t.forEach((function(t){n.isJQueryDataSupported(e)&&n.hasjQueryAutoTab(t,e)&&n.registerElement(t,e)}))}},{key:"stop",value:function(t){this.unregisterElements(t)}},{key:"hasjQueryAutoTab",value:function(t,e){if(void 0===e.jQuery._data(t,"events"))return!1;for(var n=Object.keys(e.jQuery._data(t,"events")),r=0;r<n.length;r++)if(-1!==n[r].indexOf("autotab"))return!0;return!1}},{key:"handleKeypressEvents",value:function(t,e){if(this.isJQueryDataSupported(e)&&this.hasjQueryAutoTab(t.target,e)){var n=t.key;8!==t.keyCode&&this.publishEvent(t,"autotab","insertText",n)}}}])}(mR);function AR(t){return AR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AR(t)}function IR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xR(r.key),r)}}function xR(t){var e=function(t,e){if("object"!=AR(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=AR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==AR(e)?e:e+""}var NR=function(){return function(t,e,n){return e&&IR(t.prototype,e),n&&IR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){(e=xR(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"handleFocusEvent",(function(t){r._messageBus.publish(po,t)})),this._messageBus=e,this._eventAggregator=n}),[{key:"start",value:function(t){if(!t)throw new Error("invalid window parameter");this._eventAggregator.addEventListener(t,"focus",this.handleFocusEvent,!1,!0)}},{key:"stop",value:function(t){if(!t)throw new Error("invalid window parameter");this._eventAggregator.removeEventListener(t,"focus",this.handleFocusEvent)}}])}(),LR=NR;function DR(t){return DR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},DR(t)}function FR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,UR(r.key),r)}}function UR(t){var e=function(t,e){if("object"!=DR(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=DR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==DR(e)?e:e+""}var GR=function(){return function(t,e,n){return e&&FR(t.prototype,e),n&&FR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){(e=UR(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"handleBlurEvent",(function(t){r._messageBus.publish(yo,t)})),this._messageBus=e,this._eventAggregator=n}),[{key:"start",value:function(t){if(!t)throw new Error("invalid window parameter");this._eventAggregator.addEventListener(t,"blur",this.handleBlurEvent,!1,!0)}},{key:"stop",value:function(t){if(!t)throw new Error("invalid window parameter");this._eventAggregator.removeEventListener(t,"blur",this.handleBlurEvent)}}])}(),HR=GR;function WR(t){return WR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},WR(t)}function VR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,QR(r.key),r)}}function QR(t){var e=function(t,e){if("object"!=WR(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=WR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==WR(e)?e:e+""}var zR=function(){return function(t,e,n){return e&&VR(t.prototype,e),n&&VR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){(e=QR(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"handleResizeEvent",(function(t){r._messageBus.publish(mo,t)})),this._messageBus=e,this._eventAggregator=n}),[{key:"start",value:function(t){if(!t)throw new Error("invalid window parameter");this._eventAggregator.addEventListener(t,"resize",this.handleResizeEvent,!1,!0)}},{key:"stop",value:function(t){if(!t)throw new Error("invalid window parameter");this._eventAggregator.removeEventListener(t,"resize",this.handleResizeEvent)}}])}(),KR=zR;function qR(t){return qR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qR(t)}function XR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,JR(r.key),r)}}function JR(t){var e=function(t,e){if("object"!=qR(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=qR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qR(e)?e:e+""}var YR=function(){return function(t,e,n){return e&&XR(t.prototype,e),n&&XR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){(e=JR(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"handleDOMContentLoadedEvent",(function(t){r._messageBus.publish(vo,t)})),this._messageBus=e,this._eventAggregator=n}),[{key:"start",value:function(t){if(!t)throw new Error("invalid document parameter");this._eventAggregator.addEventListener(t,"DOMContentLoaded",this.handleDOMContentLoadedEvent)}},{key:"stop",value:function(t){if(!t)throw new Error("invalid document parameter");this._eventAggregator.removeEventListener(t,"DOMContentLoaded",this.handleDOMContentLoadedEvent)}}])}(),ZR=YR;function $R(t){return $R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$R(t)}function tA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,eA(r.key),r)}}function eA(t){var e=function(t,e){if("object"!=$R(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=$R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$R(e)?e:e+""}var nA=function(){return function(t,e,n){return e&&tA(t.prototype,e),n&&tA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){(e=eA(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"handleVisibilityChangeEvent",(function(t){r._messageBus.publish(bo,t)})),this._messageBus=e,this._eventAggregator=n}),[{key:"start",value:function(t){if(!t)throw new Error("invalid document parameter");this._eventAggregator.addEventListener(t,"visibilitychange",this.handleVisibilityChangeEvent,!1,!0)}},{key:"stop",value:function(t){if(!t)throw new Error("invalid document parameter");this._eventAggregator.removeEventListener(t,"visibilitychange",this.handleVisibilityChangeEvent)}}])}(),rA=nA;function oA(t){return oA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oA(t)}function iA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aA(r.key),r)}}function aA(t){var e=function(t,e){if("object"!=oA(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=oA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==oA(e)?e:e+""}var uA=function(){return function(t,e,n){return e&&iA(t.prototype,e),n&&iA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){(e=aA(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"handleScrollEvent",(function(t){r._messageBus.publish(go,t)})),this._messageBus=e,this._eventAggregator=n}),[{key:"start",value:function(t){if(!t)throw new Error("invalid window parameter");this._eventAggregator.addEventListener(t,"scroll",this.handleScrollEvent,!1,!0)}},{key:"stop",value:function(t){if(!t)throw new Error("invalid window parameter");this._eventAggregator.removeEventListener(t,"scroll",this.handleScrollEvent)}}])}(),sA=uA;function cA(t){return cA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cA(t)}function lA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fA(r.key),r)}}function fA(t){var e=function(t,e){if("object"!=cA(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=cA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cA(e)?e:e+""}var dA=function(){return function(t,e,n){return e&&lA(t.prototype,e),n&&lA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){(e=fA(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"handleWindowMessage",(function(t){t&&r._messageBus.publish(_o,{message:t})})),this._messageBus=e,this._EventAggregator=n,this._windowListeners=new WeakMap,this.defaultPostMessageEventListener=[{event:"message",handler:this.handleWindowMessage}]}),[{key:"startObserver",value:function(t){var e=this;this._windowListeners.has(t.Context)||(this.defaultPostMessageEventListener.forEach((function(n){e._EventAggregator.addEventListener(t.Context,n.event,n.handler)})),this._windowListeners.set(t.Context,{isBinded:!0,listeners:[this.handleWindowMessage]}))}},{key:"stopObserver",value:function(t){var e=this,n=this._windowListeners.get(t.Context);n&&n.isBinded&&(this.defaultPostMessageEventListener.forEach((function(n){e._EventAggregator.removeEventListener(t.Context,n.event,n.handler)})),this._windowListeners.delete(t.Context))}}])}();function hA(t){return hA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hA(t)}function pA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yA(r.key),r)}}function yA(t){var e=function(t,e){if("object"!=hA(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=hA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hA(e)?e:e+""}var mA=function(){return function(t,e,n){return e&&pA(t.prototype,e),n&&pA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){(e=yA(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"handleDeviceOrientationEvent",(function(t){r._messageBus.publish(fo,t)})),this._messageBus=e,this._eventAggregator=n}),[{key:"start",value:function(){this._eventAggregator.addEventListener(window,"deviceorientation",this.handleDeviceOrientationEvent)}},{key:"stop",value:function(){this._eventAggregator.removeEventListener(window,"deviceorientation",this.handleDeviceOrientationEvent)}}])}(),vA=mA;function bA(t){return bA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bA(t)}function gA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_A(r.key),r)}}function _A(t){var e=function(t,e){if("object"!=bA(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=bA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bA(e)?e:e+""}var SA=function(){return function(t,e,n){return e&&gA(t.prototype,e),n&&gA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){(e=_A(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"handleBeforeInstallPrompt",(function(t){r._messageBus.publish(ho,t)})),this._messageBus=e,this._eventAggregator=n}),[{key:"start",value:function(t){if(!t)throw new Error("invalid window parameter");this._eventAggregator.addEventListener(t,"beforeinstallprompt",this.handleBeforeInstallPrompt)}},{key:"stop",value:function(t){if(!t)throw new Error("invalid window parameter");this._eventAggregator.removeEventListener(t,"beforeinstallprompt",this.handleBeforeInstallPrompt)}}])}(),wA=SA;function EA(t){return EA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},EA(t)}function kA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,PA(r.key),r)}}function PA(t){var e=function(t,e){if("object"!=EA(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=EA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==EA(e)?e:e+""}var TA=function(){return function(t,e,n){return e&&kA(t.prototype,e),n&&kA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){(e=PA(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"handleCutEvent",(function(t){r._messageBus.publish(so,t)})),this._messageBus=e,this._eventAggregator=n}),[{key:"start",value:function(t){if(!t)throw new Error("invalid document parameter");this._eventAggregator.addEventListener(t,"cut",this.handleCutEvent)}},{key:"stop",value:function(t){if(!t)throw new Error("invalid document parameter");this._eventAggregator.removeEventListener(t,"cut",this.handleCutEvent)}}])}(),OA=TA;function CA(t){return CA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CA(t)}function MA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,BA(r.key),r)}}function BA(t){var e=function(t,e){if("object"!=CA(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=CA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==CA(e)?e:e+""}var jA=function(){return function(t,e,n){return e&&MA(t.prototype,e),n&&MA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){(e=BA(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"handleCopyEvent",(function(t){r._messageBus.publish(co,t)})),this._messageBus=e,this._eventAggregator=n}),[{key:"start",value:function(t){if(!t)throw new Error("invalid document parameter");this._eventAggregator.addEventListener(t,"copy",this.handleCopyEvent)}},{key:"stop",value:function(t){if(!t)throw new Error("invalid document parameter");this._eventAggregator.removeEventListener(t,"copy",this.handleCopyEvent)}}])}(),RA=jA;function AA(t){return AA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AA(t)}function IA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xA(r.key),r)}}function xA(t){var e=function(t,e){if("object"!=AA(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=AA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==AA(e)?e:e+""}var NA=function(){return function(t,e,n){return e&&IA(t.prototype,e),n&&IA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){(e=xA(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"handlePasteEvent",(function(t){r._messageBus.publish(lo,t)})),this._messageBus=e,this._eventAggregator=n}),[{key:"start",value:function(t){if(!t)throw new Error("invalid document parameter");this._eventAggregator.addEventListener(t,"paste",this.handlePasteEvent)}},{key:"stop",value:function(t){if(!t)throw new Error("invalid document parameter");this._eventAggregator.removeEventListener(t,"paste",this.handlePasteEvent)}}])}(),LA=NA;function DA(t){return DA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},DA(t)}function FA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,UA(r.key),r)}}function UA(t){var e=function(t,e){if("object"!=DA(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=DA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==DA(e)?e:e+""}var GA=function(){return function(t,e,n){return e&&FA(t.prototype,e),n&&FA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){(e=UA(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"handleElementFocusEvents",(function(t){r._messageBus.publish(oo,t)})),this._messageBus=e,this._eventAggregator=n}),[{key:"start",value:function(t){var e=this;t.forEach((function(t){e._eventAggregator.addEventListener(t,"focus",e.handleElementFocusEvents)}))}},{key:"stop",value:function(t){var e=this;t.forEach((function(t){e._eventAggregator.removeEventListener(t,"focus",e.handleElementFocusEvents)}))}}])}(),HA=GA;function WA(t){return WA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},WA(t)}function VA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,QA(r.key),r)}}function QA(t){var e=function(t,e){if("object"!=WA(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=WA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==WA(e)?e:e+""}var zA=function(){return function(t,e,n){return e&&VA(t.prototype,e),n&&VA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){(e=QA(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"handleElementBlurEvents",(function(t){r._messageBus.publish(io,t)})),this._messageBus=e,this._eventAggregator=n}),[{key:"start",value:function(t){var e=this;t.forEach((function(t){e._eventAggregator.addEventListener(t,"blur",e.handleElementBlurEvents)}))}},{key:"stop",value:function(t){var e=this;t.forEach((function(t){e._eventAggregator.removeEventListener(t,"blur",e.handleElementBlurEvents)}))}}])}(),KA=zA;function qA(t){return qA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qA(t)}function XA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,YA(r.key),r)}}function JA(t,e,n){return(e=YA(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YA(t){var e=function(t,e){if("object"!=qA(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=qA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qA(e)?e:e+""}var ZA=function(){return function(t,e,n){return e&&XA(t.prototype,e),n&&XA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n,r){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),JA(this,"mousemove",(function(t){o._messageBus.publish(Po,t)})),JA(this,"keydown",(function(t){o._messageBus.publish(Po,t)})),JA(this,"mouseleave",(function(t){o._eventAggregator.removeEventListener(t.target,"mousemove",o.mousemove),o._messageBus.publish(Po,t)})),JA(this,"mouseup",(function(t){o._eventAggregator.removeEventListener(t.target,"mousemove",o.mousemove),o._eventAggregator.removeEventListener(t.target,"mouseleave",o.mouseleave)})),JA(this,"mousedown",(function(t){o._eventAggregator.addEventListener(t.target,"mousemove",o.mousemove),o._eventAggregator.addEventListener(t.target,"mouseleave",o.mouseleave),o._eventAggregator.addEventListener(t.target,"mouseup",o.mouseup),o._eventAggregator.addEventListener(t.target,"keydown",o.keydown)})),JA(this,"handleFocus",(function(t){o._messageBus.publish(Po,t)})),JA(this,"handleMouseEnter",(function(t){o._eventAggregator.addEventListener(t.target,"mousedown",o.mousedown)})),JA(this,"handleOnClickEvents",(function(){o._messageBus.publish(Po,o._mainElm)})),this._messageBus=e,this._eventAggregator=n,this._utils=r,this._elementsBindingWMap=new WeakMap,this.customInputEventListener=[{event:"mouseenter",handler:this.handleMouseEnter},{event:"focus",handler:this.handleFocus}],this.defaultOnClickEventListener=[{event:"click",handler:this.handleOnClickEvents}],this._mainElm="",this._mainTagName=["SPAN","DIV"],this._btnTagName="BUTTON",this._btnInnerText=["+","-"]}),[{key:"start",value:function(t){var e=this;t&&t.forEach((function(t){e._elementsBindingWMap.has(t)||(null!=t&&t.tagName&&e._mainTagName.includes(t.tagName)&&(e._mainElm=t,e.customInputEventListener.forEach((function(n){e._eventAggregator.addEventListener(t,n.event,n.handler)})),e._elementsBindingWMap.set(t,{isBinded:!0,listeners:[e.handleMouseEnter,e.handleFocus],isUsingJQuery:!1})),(null!=t&&t.tagName&&t.tagName===e._btnTagName||null!=t&&t.innerText&&e._btnInnerText.includes(t.innerText))&&(e.defaultOnClickEventListener.forEach((function(n){e._eventAggregator.addEventListener(t,n.event,n.handler)})),e._elementsBindingWMap.set(t,{isBinded:!0,listeners:[e.handleOnClickEvents],isUsingJQuery:!1})))}))}},{key:"stop",value:function(t){var e=this;t.forEach((function(t){var n=e._elementsBindingWMap.get(t);null!=n&&n.isBinded&&(null!=t&&t.tagName&&e._mainTagName.includes(t.tagName)&&e.customInputEventListener.forEach((function(n){e._eventAggregator.removeEventListener(t,n.event,n.handler)})),(null!=t&&t.tagName&&t.tagName===e._btnTagName||null!=t&&t.innerText&&e._btnInnerText.includes(t.innerText))&&e.defaultOnClickEventListener.forEach((function(n){e._eventAggregator.removeEventListener(t,n.event,n.handler)})),e._elementsBindingWMap.delete(t))}))}}])}(),$A=ZA;function tI(t){return tI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tI(t)}function eI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function nI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oI(r.key),r)}}function rI(t,e,n){return(e=oI(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oI(t){var e=function(t,e){if("object"!=tI(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=tI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tI(e)?e:e+""}var iI=[{name:"MouseEvents",className:Dp,init:function(){return function(){this._configurations.isFlutterApp()?this._features.list.MouseEvents.instance=new Yy(this._msgBus,this._dataQ,this._utils,this._maskingService,gc):this._features.list.MouseEvents.instance=new Dp(this._utils,gc,this._elements,this._dataQ,this._maskingService)}}},{name:"KeyEvents",className:bi,init:function(){return function(){this._configurations.isFlutterApp()?this._features.list.KeyEvents.instance=new My(this._msgBus,this._dataQ,this._utils,this._maskingService):this._features.list.KeyEvents.instance=new bi(this._configurationRepository,this._utils,this._elements,this._dataQ,this._msgBus,this._sameCharService,this._maskingService)}}},{name:"TouchEvents",className:ei,init:function(){return function(){this._configurations.isFlutterApp()?this._features.list.TouchEvents.instance=new Uy(this._msgBus,this._dataQ,this._utils,this._maskingService):this._features.list.TouchEvents.instance=new ei(this._utils,this._elements,this._dataQ,this._msgBus,this._maskingService)}}},{name:"ClipboardEvents",className:td,init:function(){return function(){var t=new td.Builder(this._utils,this._elements,this._dataQ),e=new OA(this._msgBus,Yj),n=new RA(this._msgBus,Yj),r=new LA(this._msgBus,Yj);t.withMessageBus(this._msgBus).withCutEventEmitter(e).withCopyEventEmitter(n).withPasteEventEmitter(r),this._features.list.ClipboardEvents.instance=t.build()}}},{name:"ElementEvents",className:Ff,init:function(){return function(){if(this._configurations.isFlutterApp())this._features.list.ElementEvents.instance=new gy(this._msgBus,this._dataQ,this._utils,this._contextMgr,this._maskingService);else{var t=new zj(this._msgBus,Yj,this._utils),e=new nR(this._msgBus,Yj,this._utils),n=new uR(this._msgBus,Yj,this._utils),r=new HA(this._msgBus,Yj,this._utils),o=new KA(this._msgBus,Yj,this._utils),i=new dR(this._msgBus,Yj,this._utils),a=new $A(this._msgBus,Yj,this._utils),u=new Xn(MutationObserver,this._utils,gc,"jQueryElementListenerConfig",null,!1),s=(LM=t,DM=e,FM=n,UM=i,{bindInputEvents:GM,bindOnClickEvents:HM,bindOnChangeEvents:WM,bindOnFormsEvents:VM}),c=new Ff.Builder(this._configurationRepository,this._utils,gc,this._elements,this._dataQ,this._configurations.getMaxShadowDepth()),l=new Gj(this._msgBus),f=new kR(this._msgBus,Yj,this._utils),d=new RR(this._msgBus,Yj,this._utils);c.withjQueryElementListenerSiteMapper(u),c.withMessageBus(this._msgBus),c.withMutationEmitter(l),c.withjQueryElementsHandler(s),c.withInputEvents(CB,PB,this._maskingService),c.withStandardInputEventsEmitter(t),c.withSyntheticMaskInputEventsHandler(f),c.withSyntheticAutotabInputEventsHandler(d),c.withClickEvents(XB,KB),c.withStandardOnClickEventsEmitter(e),c.withSelectElementEvents(aj,oj),c.withElementFocusEventsEmitter(r),c.withElementBlurEventsEmitter(o),c.withStandardOnChangeEventsEmitter(n),c.withFormEvents(mj,pj),c.withStandardOnFormEventsEmitter(i),c.withCustomInputEventEmitter(FB,a),this._features.list.ElementEvents.instance=c.build()}}}},{name:"WindowEvents",className:xd,init:function(){return function(){var t=new xd.Builder(this._configurationRepository,ze,this._dataQ),e=new LR(this._msgBus,Yj),n=new HR(this._msgBus,Yj),r=new KR(this._msgBus,Yj),o=new ZR(this._msgBus,Yj),i=new rA(this._msgBus,Yj),a=new sA(this._msgBus,Yj);t.withMessageBus(this._msgBus),t.withFocusEventEmitter(e),t.withBlurEventEmitter(n),t.withResizeEventEmitter(r),t.withDOMContentLoadedEventEmitter(o),t.withVisibilityChangeEventEmitter(i),t.withScrollEventEmitter(a),this._features.list.WindowEvents.instance=t.build()}}},{name:"MetadataCollector",className:NM,init:function(){return function(){var t=new Xn(MutationObserver,this._utils,gc,"metadataConfig",null,!1);this._features.list.MetadataCollector.instance=new NM(this._configurationRepository,this._dataQ,t,this._utils)}}},{name:"TabsEvents",className:Yp,init:function(){return function(){this._features.list.TabsEvents.instance=new Yp(this._utils,this._dataQ)}}},{name:"DoNotTrack",className:Vg,init:function(){return function(){this._features.list.DoNotTrack.instance=new Vg(this._dataQ)}}},{name:"BrowserProps",className:Og,init:function(){return function(){this._features.list.BrowserProps.instance=new Og(this._dataQ,Aj,this._utils,this._configurationRepository)}}},{name:"IsPrivateBrowsing",className:wS,init:function(){return function(){var t=new _j;this._features.list.IsPrivateBrowsing.instance=new wS(this._dataQ,t)}}},{name:"FontsDetectionFeature",className:IE,init:function(){return function(){this._features.list.FontsDetectionFeature.instance=new IE(this._utils,gc,this._dataQ,this._configurationRepository)}}},{name:"GraphicDetectFeature",className:u_,init:function(){return function(){this._features.list.GraphicDetectFeature.instance=new u_(this._dataQ)}}},{name:"BrowserDetect",className:Rm,init:function(){return function(){this._features.list.BrowserDetect.instance=new Rm(this._dataQ)}}},{name:"FilesFeature",className:OM,init:function(){return function(){this._features.list.FilesFeature.instance=new OM(this._configurationRepository,this._utils,this._sessionService,this._muidService,this._cidCache)}}},{name:"UserPermissions",className:iS,init:function(){return function(){this._features.list.UserPermissions.instance=new iS(this._dataQ)}}},{name:"MediaDevicesFeature",className:T_,init:function(){return function(){this._features.list.MediaDevicesFeature.instance=new T_(this._dataQ)}}},{name:"ContextPropsFeature",className:cM,init:function(){return function(){this._features.list.ContextPropsFeature.instance=new cM(this._dataQ,gc,this._perfMonitor,this._configurationRepository)}}},{name:"GfxRenderingFeature",className:ik,init:function(){return function(){this._features.list.GfxRenderingFeature.instance=new ik(this._dataQ,ze)}}},{name:"AudioDetectFeature",className:Ik,init:function(){return function(){this._features.list.AudioDetectFeature.instance=new Ik(this._dataQ,ze)}}},{name:"EncryptedMuidFeature",className:zk,init:function(){return function(){this._features.list.EncryptedMuidFeature.instance=new zk(this._devDebugDataQueue,this._muidEncryptedService)}}},{name:"ScriptsFeature",className:bM,init:function(){return function(){var t=new Lj(this._utils);this._features.list.ScriptsFeature.instance=new bM(this._dataQ,t)}}},{name:"AccelerometerEvents",className:Vd,init:function(){return function(){this._features.list.AccelerometerEvents.instance=new Vd(this._configurationRepository,this._utils,this._sensorDataQ)}}},{name:"PinchZoomEvents",className:oh,init:function(){return function(){this._features.list.PinchZoomEvents.instance=new oh(this._utils,this._elements,this._dataQ,this._msgBus)}}},{name:"ScriptEvents",className:yh,init:function(){return function(){this._features.list.ScriptEvents.instance=new yh(this._utils,this._dataQ)}}},{name:"NetInfoEvents",className:Ph,init:function(){return function(){this._features.list.NetInfoEvents.instance=new Ph(this._utils,this._dataQ)}}},{name:"DeviceOrientationCollector",className:Nh,init:function(){return function(){this._features.list.DeviceOrientationCollector.instance=new Nh(this._utils,this._dataQ)}}},{name:"TapEvents",className:Kh,init:function(){return function(){this._features.list.TapEvents.instance=new Kh(this._configurationRepository,this._utils,this._elements,this._dataQ,this._maskingService)}}},{name:"LocationEvents",className:sy,init:function(){return function(){this._features.list.LocationEvents.instance=new sy(this._dataQ,this._utils,this._configurationRepository)}}},{name:"StorageEvents",className:op,init:function(){return function(){this._features.list.StorageEvents.instance=new op(this._utils,this._elements,this._dataQ,this._msgBus)}}},{name:"PrintEvents",className:mp,init:function(){return function(){this._features.list.PrintEvents.instance=new mp(this._utils,this._dataQ)}}},{name:"LightSensorEvents",className:Tp,init:function(){return function(){this._features.list.LightSensorEvents.instance=new Tp(this._dataQ,this._utils,this._configurationRepository)}}},{name:"CrossDomain",className:lB,init:function(){return function(){var t=new lB.Builder(this._configurationRepository,this._dataQ,this._utils,gc,oB),e=new dA(this._msgBus,Yj);t.withMessageBus(this._msgBus),t.withWindowMessageEventEmitter(e),this._features.list.CrossDomain.instance=t.build()}}},{name:"OrientationEvents",className:ld,init:function(){return function(){var t=new vA(this._msgBus,Yj);this._features.list.OrientationEvents.instance=new ld(this._configurationRepository,this._utils,this._sensorDataQ,this._msgBus,t)}}},{name:"BeforeInstallPromptEvents",className:Sd,init:function(){return function(){var t=new wA(this._msgBus,Yj);this._features.list.BeforeInstallPromptEvents.instance=new Sd(this._dataQ,this._utils,this._msgBus,t)}}},{name:"Navigator",className:eP,init:function(){return function(){this._features.list.Navigator.instance=new eP(this._devDebugDataQueue)}}},{name:"KeyboardLayoutFeature",className:$O,init:function(){return function(){this._features.list.KeyboardLayoutFeature.instance=new $O(this._dataQ)}}},{name:"StorageFeature",className:RO,init:function(){return function(){this._features.list.StorageFeature.instance=new RO(this._dataQ,this._devDebugDataQueue)}}},{name:"BatteryStatusCollector",className:fm,init:function(){return function(){this._features.list.BatteryStatusCollector.instance=new fm(this._dataQ,this._utils)}}},{name:"FontEmojiFeature",className:fC,init:function(){return function(){this._features.list.FontEmojiFeature.instance=new fC(this._devDebugDataQueue)}}},{name:"FontMathFeature",className:EC,init:function(){return function(){this._features.list.FontMathFeature.instance=new EC(this._devDebugDataQueue)}}},{name:"FontWidthFeature",className:LC,init:function(){return function(){this._features.list.FontWidthFeature.instance=new LC(this._devDebugDataQueue)}}},{name:"ScreenHighResFeature",className:tM,init:function(){return function(){this._features.list.ScreenHighResFeature.instance=new tM(this._devDebugDataQueue)}}},{name:"BrowserExtensionEvents",className:WT,init:function(){return function(){this._features.list.BrowserExtensionEvents.instance=new WT(this._configurationRepository,this._utils,gc,this._dataQ)}}},{name:"AdblockerListsCollector",className:_P,init:function(){return function(){this._features.list.AdblockerListsCollector.instance=new _P(this._devDebugDataQueue)}}},{name:"WebglCollector",className:JP,init:function(){return function(){this._features.list.WebglCollector.instance=new JP(this._devDebugDataQueue)}}},{name:"DRMDataCollector",className:rO,init:function(){return function(){this._features.list.DRMDataCollector.instance=new rO(this._devDebugDataQueue)}}},{name:"WebRTCDataCollector",className:cT,init:function(){return function(){this._features.list.WebRTCDataCollector.instance=new cT(this._dataQ)}}},{name:"SpeechVoiceCollector",className:gT,init:function(){return function(){this._features.list.SpeechVoiceCollector.instance=new gT(this._devDebugDataQueue)}}}],aI=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return e&&nI(t.prototype,e),n&&nI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,null,[{key:"register",value:function(){var e=this;t.list={},iI.forEach((function(t){e._addFeature(t)}))}},{key:"registerLeanFeatures",value:function(){var e=this;t.list={},iI.forEach((function(t){t.className.getDefaultSettings().runInLean&&e._addFeature(t)}))}},{key:"getDefaultFeatures",value:function(){return this.getFeaturesByCondition((function(t){return t.isDefault}))}},{key:"getPerContextFeatures",value:function(){return this.getFeaturesByCondition((function(t){return t.shouldRunPerContext}))}},{key:"getPerSessionFeatures",value:function(){return this.getFeaturesByCondition((function(t){return t.shouldRunPerSession}))}},{key:"getNonDefaultFeatures",value:function(){return this.getFeaturesByCondition((function(t){return!t.isDefault&&!t.shouldRunPerContext&&!t.shouldRunPerSession}))}},{key:"getFeaturesByCondition",value:function(e){var n={};return Object.keys(t.list).forEach((function(r){var o=t.list[r];e(o)&&(n[r]=o)})),n}},{key:"_addFeature",value:function(e){var n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?eI(Object(n),!0).forEach((function(e){rI(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eI(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},e.className.getDefaultSettings()),r=e.name;n.init=e.init(),t.list[r]=n}}])}();function uI(t){return uI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uI(t)}function sI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cI(r.key),r)}}function cI(t){var e=function(t,e){if("object"!=uI(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=uI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==uI(e)?e:e+""}rI(aI,"list",void 0);var lI=function(){return function(t,e,n){return e&&sI(t.prototype,e),n&&sI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.messageBus=e}),[{key:"collectElement",value:function(t,e,n,r,o,i,a,u,s){this.messageBus.publish(To.ElementsEvent,{hashCode:t,elementId:e,widthElement:n,heightElement:r,dxPosition:o,dyPosition:i,widgetType:a,timeStamp:s})}},{key:"collectElementEvent",value:function(t,e,n,r,o){this.messageBus.publish(To.ElementEventsEvent,{hashCode:t,elementId:e,eventType:n,elementValue:r,timeStamp:o})}},{key:"collectTouchEvent",value:function(t,e,n,r,o,i,a,u,s,c,l,f){this.messageBus.publish(To.TouchEvent,{hashCode:t,touchState:e,x:n,y:r,pointer:o,radiusMajor:u,radiusMinor:s,pressure:c,timeStamp:f})}},{key:"collectKeyEvent",value:function(t,e,n,r){this.messageBus.publish(To.KeyEvent,{hashCode:t,elementId:e,char:n,timeStamp:r})}},{key:"collectOnMouseEvent",value:function(t,e,n,r,o,i,a,u,s,c,l,f){this.messageBus.publish(To.MouseEvent,{hashCode:t,type:e,screenX:n,screenY:r,pointer:o,radiusMajor:u,radiusMinor:s,pressure:c,timeStamp:f})}}])}();function fI(t){return fI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fI(t)}function dI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hI(r.key),r)}}function hI(t){var e=function(t,e){if("object"!=fI(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=fI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fI(e)?e:e+""}var pI=function(){return function(t,e,n){return e&&dI(t.prototype,e),n&&dI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._protocolType=e.includes(Se)?4:3}),[{key:"get",value:function(){return this._protocolType}}])}();function yI(t){return yI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yI(t)}function mI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vI(r.key),r)}}function vI(t){var e=function(t,e){if("object"!=yI(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=yI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yI(e)?e:e+""}var bI=function(){return function(t,e,n){return e&&mI(t.prototype,e),n&&mI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=new URL(e);this._baseServerAddress=n.protocol+"//"+n.host}),[{key:"get",value:function(){return this._baseServerAddress}}])}();function gI(t){return gI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gI(t)}function _I(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return SI(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?SI(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SI(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function wI(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return EI(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,u=0,s=t,d.n=n,a}};function h(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=d.p,p=i[2];n>3?(o=p===r)&&(u=i[4]||3,s=i[5]===t?i[3]:i[5],i[4]=3,i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,d.v=r,d.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,d.n=p,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),u=l,s=p;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(d.n=-1),h(u,s)):d.n=s:d.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(EI(e={},r,(function(){return this})),e),f=c.prototype=u.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,EI(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,EI(f,"constructor",c),EI(c,"constructor",s),s.displayName="GeneratorFunction",EI(c,o,"GeneratorFunction"),EI(f),EI(f,o,"Generator"),EI(f,r,(function(){return this})),EI(f,"toString",(function(){return"[object Generator]"})),(wI=function(){return{w:i,m:d}})()}function EI(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}EI=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){EI(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},EI(t,e,n,r)}function kI(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function PI(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){kI(i,r,o,a,u,"next",t)}function u(t){kI(i,r,o,a,u,"throw",t)}a(void 0)}))}}function TI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,CI(r.key),r)}}function OI(t,e,n){return(e=CI(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CI(t){var e=function(t,e){if("object"!=gI(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=gI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gI(e)?e:e+""}var MI=function(){function t(e){var n=e.storeName;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!n)throw new Error("Store name must be provided.");if(t.instances.has(n))return t.instances.get(n);if(!t.DB_CONFIG.STORE_SCHEMAS[n])throw new Error('Store "'.concat(n,'" is not defined in the schema.'));this.storeName=n,this.db=null,this.initialized=!1,t.instances.set(n,this)}return function(t,e,n){return e&&TI(t.prototype,e),n&&TI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,[{key:"init",value:(u=PI(wI().m((function t(){return wI().w((function(t){for(;;)switch(t.n){case 0:if(!this.initialized){t.n=1;break}return t.a(2);case 1:return t.n=2,this._openDB();case 2:this.db=t.v,this.initialized=!0;case 3:return t.a(2)}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"_openDB",value:function(){return new Promise((function(e,n){var r=indexedDB.open(t.DB_CONFIG.NAME,t.DB_CONFIG.VERSION);r.onupgradeneeded=function(e){var n=e.target.result;ue.debug("Database upgrade: Version ".concat(e.oldVersion," -> ").concat(e.newVersion));for(var r=0,o=Object.entries(t.DB_CONFIG.STORE_SCHEMAS);r<o.length;r++){var i=_I(o[r],1)[0];n.objectStoreNames.contains(i)?ue.debug("Object store exists: ".concat(i)):(ue.debug("Creating object store: ".concat(i)),n.createObjectStore(i))}},r.onsuccess=function(n){ue.debug('Database "'.concat(t.DB_CONFIG.NAME,'" opened successfully.')),e(n.target.result)},r.onerror=function(e){ue.error('Error opening database "'.concat(t.DB_CONFIG.NAME,'":'),e.target.error),n(e.target.error)}}))}},{key:"_openObjectStore",value:function(t){if(!this.db)throw new Error("Database is not initialized. Call init() first.");return this.db.transaction([this.storeName],t).objectStore(this.storeName)}},{key:"addRecord",value:(a=PI(wI().m((function t(e,n){var r=this;return wI().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this.init();case 1:return t.a(2,new Promise((function(t,o){var i=r._openObjectStore("readwrite").put(n,e);i.onsuccess=function(){return t("Record added successfully.")},i.onerror=function(t){return o("Add record error: ".concat(t.target.error))}})))}}),t,this)}))),function(t,e){return a.apply(this,arguments)})},{key:"getRecord",value:(i=PI(wI().m((function t(e){var n=this;return wI().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this.init();case 1:return t.a(2,new Promise((function(t,r){var o=n._openObjectStore("readonly").get(e);o.onsuccess=function(e){return t(e.target.result||null)},o.onerror=function(t){return r("Get record error: ".concat(t.target.error))}})))}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"updateRecord",value:(o=PI(wI().m((function t(e,n){var r=this;return wI().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this.init();case 1:return t.a(2,new Promise((function(t,o){var i=r._openObjectStore("readwrite").put(n,e);i.onsuccess=function(){return t("Record updated successfully.")},i.onerror=function(t){return o("Update record error: ".concat(t.target.error))}})))}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"deleteRecord",value:(r=PI(wI().m((function t(e){var n=this;return wI().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this.init();case 1:return t.a(2,new Promise((function(t,r){var o=n._openObjectStore("readwrite").delete(e);o.onsuccess=function(){return t("Record deleted successfully.")},o.onerror=function(t){return r("Delete record error: ".concat(t.target.error))}})))}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"getAllRecords",value:(n=PI(wI().m((function t(){var e=this;return wI().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this.init();case 1:return t.a(2,new Promise((function(t,n){var r=e._openObjectStore("readonly").getAll();r.onsuccess=function(e){return t(e.target.result)},r.onerror=function(t){return n("Get all records error: ".concat(t.target.error))}})))}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"clearStore",value:(e=PI(wI().m((function t(){var e=this;return wI().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this.init();case 1:return t.a(2,new Promise((function(t,n){var r=e._openObjectStore("readwrite").clear();r.onsuccess=function(){return t("All records cleared successfully.")},r.onerror=function(t){return n("Clear store error: ".concat(t.target.error))}})))}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"release",value:function(){this.db&&(this.db.close(),this.db=null,this.initialized=!1,t.instances.delete(this.storeName),ue.debug('Database "'.concat(t.DB_CONFIG.NAME,'" connection for store "').concat(this.storeName,'" closed.')))}}]);var e,n,r,o,i,a,u}();function BI(t){return BI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},BI(t)}function jI(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return RI(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,u=0,s=t,d.n=n,a}};function h(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=d.p,p=i[2];n>3?(o=p===r)&&(u=i[4]||3,s=i[5]===t?i[3]:i[5],i[4]=3,i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,d.v=r,d.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,d.n=p,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),u=l,s=p;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(d.n=-1),h(u,s)):d.n=s:d.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(RI(e={},r,(function(){return this})),e),f=c.prototype=u.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,RI(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,RI(f,"constructor",c),RI(c,"constructor",s),s.displayName="GeneratorFunction",RI(c,o,"GeneratorFunction"),RI(f),RI(f,o,"Generator"),RI(f,r,(function(){return this})),RI(f,"toString",(function(){return"[object Generator]"})),(jI=function(){return{w:i,m:d}})()}function RI(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}RI=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){RI(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},RI(t,e,n,r)}function AI(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function II(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){AI(i,r,o,a,u,"next",t)}function u(t){AI(i,r,o,a,u,"throw",t)}a(void 0)}))}}function xI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,NI(r.key),r)}}function NI(t){var e=function(t,e){if("object"!=BI(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=BI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==BI(e)?e:e+""}OI(MI,"instances",new Map),OI(MI,"DB_CONFIG",{NAME:"bio",VERSION:1,STORE_SCHEMAS:{emuid:{},keystore:{}}});var LI=function(){return function(t,e,n){return e&&xI(t.prototype,e),n&&xI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.storage=null!=e?e:new MI({storeName:"keystore"})}),[{key:"init",value:(i=II(jI().m((function t(){return jI().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this.storage.init();case 1:return t.a(2)}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"getKey",value:(o=II(jI().m((function t(e){var n,r,o;return jI().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,this.storage.getRecord(e);case 1:if(n=t.v){t.n=4;break}return t.n=2,this._generateKey();case 2:return r=t.v,t.n=3,this._saveKey(e,r);case 3:return t.a(2,r);case 4:return t.a(2,n);case 5:throw t.p=5,o=t.v,ue.error("Failed to import key:",o),new Error("Key retrieval failed.");case 6:return t.a(2)}}),t,this,[[0,5]])}))),function(t){return o.apply(this,arguments)})},{key:"deleteKey",value:(r=II(jI().m((function t(e){return jI().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this.storage.deleteRecord(e);case 1:return t.a(2)}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"_generateKey",value:(n=II(jI().m((function t(){var e;return jI().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,window.crypto.subtle.generateKey({name:"AES-GCM",length:256},!1,["encrypt","decrypt"]);case 1:return t.a(2,t.v);case 2:throw t.p=2,e=t.v,ue.error("Failed to generate key:",e),new Error("Key generation failed.");case 3:return t.a(2)}}),t,null,[[0,2]])}))),function(){return n.apply(this,arguments)})},{key:"_saveKey",value:(e=II(jI().m((function t(e,n){var r;return jI().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,this.storage.addRecord(e,n);case 1:t.n=3;break;case 2:throw t.p=2,r=t.v,ue.error("Failed to save key:",r),new Error("Key saving failed.");case 3:return t.a(2)}}),t,this,[[0,2]])}))),function(t,n){return e.apply(this,arguments)})},{key:"_clearKeys",value:(t=II(jI().m((function t(){return jI().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this.storage.clearStore();case 1:return t.a(2)}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"release",value:function(){this.storage.release()}}]);var t,e,n,r,o,i}();function DI(t){return DI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},DI(t)}function FI(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return UI(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,u=0,s=t,d.n=n,a}};function h(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=d.p,p=i[2];n>3?(o=p===r)&&(u=i[4]||3,s=i[5]===t?i[3]:i[5],i[4]=3,i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,d.v=r,d.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,d.n=p,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),u=l,s=p;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(d.n=-1),h(u,s)):d.n=s:d.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(UI(e={},r,(function(){return this})),e),f=c.prototype=u.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,UI(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,UI(f,"constructor",c),UI(c,"constructor",s),s.displayName="GeneratorFunction",UI(c,o,"GeneratorFunction"),UI(f),UI(f,o,"Generator"),UI(f,r,(function(){return this})),UI(f,"toString",(function(){return"[object Generator]"})),(FI=function(){return{w:i,m:d}})()}function UI(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}UI=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){UI(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},UI(t,e,n,r)}function GI(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function HI(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){GI(i,r,o,a,u,"next",t)}function u(t){GI(i,r,o,a,u,"throw",t)}a(void 0)}))}}function WI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,VI(r.key),r)}}function VI(t){var e=function(t,e){if("object"!=DI(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=DI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==DI(e)?e:e+""}var QI=function(){return function(t,e,n){return e&&WI(t.prototype,e),n&&WI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)throw new Error("encryptionKeyName is required.");this.encryptionKeyName=e,this.keyStore=null!=n?n:new LI,this.isInitialized=!1}),[{key:"init",value:(n=HI(FI().m((function t(){return FI().w((function(t){for(;;)switch(t.n){case 0:if(this.isInitialized){t.n=2;break}return t.n=1,this.keyStore.init();case 1:this.isInitialized=!0;case 2:return t.a(2)}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"encrypt",value:(e=HI(FI().m((function t(e){var n,r,o,i,a,u;return FI().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this.init();case 1:return t.p=1,t.n=2,this.keyStore.getKey(this.encryptionKeyName);case 2:return n=t.v,r=window.crypto.getRandomValues(new Uint8Array(12)),o=(new TextEncoder).encode(e),t.n=3,window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},n,o);case 3:return i=t.v,a=new Uint8Array(i),t.a(2,{encryptedData:Array.from(a),iv:Array.from(r)});case 4:throw t.p=4,u=t.v,ue.error("Encryption failed:",u),new Error("Encryption error occurred.");case 5:return t.a(2)}}),t,this,[[1,4]])}))),function(t){return e.apply(this,arguments)})},{key:"decrypt",value:(t=HI(FI().m((function t(e,n){var r,o,i,a,u,s;return FI().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this.init();case 1:return t.p=1,t.n=2,this.keyStore.getKey(this.encryptionKeyName);case 2:return r=t.v,o=new Uint8Array(e).buffer,i=new Uint8Array(n),t.n=3,window.crypto.subtle.decrypt({name:"AES-GCM",iv:i},r,o);case 3:return a=t.v,u=(new TextDecoder).decode(a),t.a(2,u);case 4:throw t.p=4,s=t.v,ue.error("Decryption failed:",s),new Error("Decryption error occurred.");case 5:return t.a(2)}}),t,this,[[1,4]])}))),function(e,n){return t.apply(this,arguments)})}]);var t,e,n}();function zI(t){return zI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zI(t)}function KI(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return qI(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,u=0,s=t,d.n=n,a}};function h(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=d.p,p=i[2];n>3?(o=p===r)&&(u=i[4]||3,s=i[5]===t?i[3]:i[5],i[4]=3,i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,d.v=r,d.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,d.n=p,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),u=l,s=p;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(d.n=-1),h(u,s)):d.n=s:d.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(qI(e={},r,(function(){return this})),e),f=c.prototype=u.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,qI(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,qI(f,"constructor",c),qI(c,"constructor",s),s.displayName="GeneratorFunction",qI(c,o,"GeneratorFunction"),qI(f),qI(f,o,"Generator"),qI(f,r,(function(){return this})),qI(f,"toString",(function(){return"[object Generator]"})),(KI=function(){return{w:i,m:d}})()}function qI(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}qI=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){qI(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},qI(t,e,n,r)}function XI(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function JI(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){XI(i,r,o,a,u,"next",t)}function u(t){XI(i,r,o,a,u,"throw",t)}a(void 0)}))}}function YI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ZI(r.key),r)}}function ZI(t){var e=function(t,e){if("object"!=zI(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=zI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zI(e)?e:e+""}var $I=function(){return function(t,e,n){return e&&YI(t.prototype,e),n&&YI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){var n=e.storeName,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.indexedDBStorage=new MI({storeName:n}),this.cryptoService=null!=r?r:new QI(n),this.initialized=!1}),[{key:"init",value:(s=JI(KI().m((function t(){return KI().w((function(t){for(;;)switch(t.n){case 0:if(!this.initialized){t.n=1;break}return t.a(2);case 1:return t.n=2,this.indexedDBStorage.init();case 2:return t.n=3,this.cryptoService.init();case 3:this.initialized=!0;case 4:return t.a(2)}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"release",value:function(){this.indexedDBStorage.release(),this.encryptionKeyStorage.release(),this.initialized=!1}},{key:"addRecord",value:(u=JI(KI().m((function t(e,n){var r;return KI().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this.init();case 1:return t.n=2,this._encryptRecord(n);case 2:return r=t.v,t.a(2,this.indexedDBStorage.addRecord(e,r))}}),t,this)}))),function(t,e){return u.apply(this,arguments)})},{key:"getRecord",value:(a=JI(KI().m((function t(e){var n;return KI().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this.init();case 1:return t.n=2,this.indexedDBStorage.getRecord(e);case 2:if(n=t.v){t.n=3;break}return t.a(2,null);case 3:return t.a(2,this._decryptRecord(n))}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"updateRecord",value:(i=JI(KI().m((function t(e,n){var r;return KI().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this.init();case 1:return t.n=2,this._encryptRecord(n);case 2:return r=t.v,t.a(2,this.indexedDBStorage.updateRecord(e,r))}}),t,this)}))),function(t,e){return i.apply(this,arguments)})},{key:"deleteRecord",value:(o=JI(KI().m((function t(e){return KI().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this.init();case 1:return t.a(2,this.indexedDBStorage.deleteRecord(e))}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"getAllRecords",value:(r=JI(KI().m((function t(){var e,n=this;return KI().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this.init();case 1:return t.n=2,this.indexedDBStorage.getAllRecords();case 2:return e=t.v,t.a(2,Promise.all(e.map((function(t){return n._decryptRecord(t)}))))}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"clearStore",value:(n=JI(KI().m((function t(){return KI().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this.init();case 1:return t.a(2,this.indexedDBStorage.clearStore())}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"_encryptRecord",value:(e=JI(KI().m((function t(e){var n,r,o;return KI().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this.cryptoService.encrypt(JSON.stringify(e));case 1:return n=t.v,r=n.encryptedData,o=n.iv,t.a(2,{encryptedData:r,iv:o})}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"_decryptRecord",value:(t=JI(KI().m((function t(e){var n,r,o;return KI().w((function(t){for(;;)switch(t.n){case 0:return n=e.encryptedData,r=e.iv,t.n=1,this.cryptoService.decrypt(n,r);case 1:return o=t.v,t.a(2,JSON.parse(o))}}),t,this)}))),function(e){return t.apply(this,arguments)})}]);var t,e,n,r,o,i,a,u,s}();function tx(t){return tx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tx(t)}function ex(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return nx(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,u=0,s=t,d.n=n,a}};function h(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=d.p,p=i[2];n>3?(o=p===r)&&(u=i[4]||3,s=i[5]===t?i[3]:i[5],i[4]=3,i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,d.v=r,d.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,d.n=p,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),u=l,s=p;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(d.n=-1),h(u,s)):d.n=s:d.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(nx(e={},r,(function(){return this})),e),f=c.prototype=u.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,nx(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,nx(f,"constructor",c),nx(c,"constructor",s),s.displayName="GeneratorFunction",nx(c,o,"GeneratorFunction"),nx(f),nx(f,o,"Generator"),nx(f,r,(function(){return this})),nx(f,"toString",(function(){return"[object Generator]"})),(ex=function(){return{w:i,m:d}})()}function nx(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}nx=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){nx(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},nx(t,e,n,r)}function rx(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function ox(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){rx(i,r,o,a,u,"next",t)}function u(t){rx(i,r,o,a,u,"throw",t)}a(void 0)}))}}function ix(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ax(r.key),r)}}function ax(t){var e=function(t,e){if("object"!=tx(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=tx(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tx(e)?e:e+""}var ux=function(){return function(t,e,n){return e&&ix(t.prototype,e),n&&ix(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){var n=e.domUtils,r=e.utils,o=e.configurationRepository,i=e.keys,a=void 0===i?{indexedDBKey:"emuid"}:i,u=e.encryptedIndexedDB,s=void 0===u?new $I({storeName:"emuid"}):u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._domUtils=n,this._utils=r,this._configurationRepository=o,this._encryptedStorage=s,this._keys=a}),[{key:"getEncryptedMuid",value:(n=ox(ex().m((function t(){var e,n;return ex().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,ue.debug("Fetching existing Encrypted MUID from storage..."),t.n=1,this._fetchMuidFromStorage();case 1:if(e=t.v,this._isValidMuid(e)){t.n=3;break}return ue.warn("No valid Encrypted MUID found. Generating a new one..."),t.n=2,this._generateNewMuid();case 2:return e=t.v,t.n=3,this._saveMuidToStorage(e);case 3:return t.a(2,e);case 4:return t.p=4,n=t.v,ue.error("Failed to initialize MUID:",n),t.a(2,null)}}),t,this,[[0,4]])}))),function(){return n.apply(this,arguments)})},{key:"_fetchMuidFromStorage",value:(e=ox(ex().m((function t(){var e,n;return ex().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,this._encryptedStorage.getRecord(this._keys.indexedDBKey);case 1:return e=t.v,ue.debug("Fetched Encrypted MUID from storage."),t.a(2,(null==e?void 0:e.emuid)||null);case 2:return t.p=2,n=t.v,ue.error("Error retrieving Encrypted MUID from storage:",n),t.a(2,null)}}),t,this,[[0,2]])}))),function(){return e.apply(this,arguments)})},{key:"_saveMuidToStorage",value:(t=ox(ex().m((function t(e){var n;return ex().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,this._encryptedStorage.updateRecord(this._keys.indexedDBKey,{emuid:e});case 1:ue.debug("Encrypted MUID saved to storage."),t.n=3;break;case 2:t.p=2,n=t.v,ue.error("Error saving Encrypted MUID to storage:",n);case 3:return t.a(2)}}),t,this,[[0,2]])}))),function(e){return t.apply(this,arguments)})},{key:"_generateNewMuid",value:function(){return this._utils.dateNow()+"-"+this._utils.generateUUID().toUpperCase()}},{key:"_isValidMuid",value:function(t){return!!t&&/^([0-9]{13,}-)?[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t)}}]);var t,e,n}();function sx(t){return sx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sx(t)}function cx(t){return function(t){if(Array.isArray(t))return lx(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return lx(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lx(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lx(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function fx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dx(r.key),r)}}function dx(t){var e=function(t,e){if("object"!=sx(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=sx(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sx(e)?e:e+""}var hx=function(){return function(t,e,n){return e&&fx(t.prototype,e),n&&fx(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=n(542),a=n(727),u=r&&Object.keys(r).length?r:i,s=(null==o||null===(e=o.attributes)||void 0===e?void 0:e.length)>0?o:a;this.CATEGORY_RULES=new Map(Object.entries(u)),this.ATTRIBUTE_NAMES=s}),[{key:"categoryField",value:function(t){var e,n,r=this;if(!(t instanceof HTMLElement)||"hidden"===t.type)return"0";var o=this.ATTRIBUTE_NAMES.attributes.map((function(e){var n;return null===(n=t.getAttribute(e))||void 0===n?void 0:n.toLowerCase()})).filter(Boolean),i=null===(e=document.querySelector('label[for="'.concat(t.id,'"]')))||void 0===e||null===(e=e.innerText)||void 0===e?void 0:e.toLowerCase();i&&o.push(i);var a=new Map;return o.flatMap((function(t){return t.split(/\s+/)})).forEach((function(t){var e=r.CATEGORY_RULES.get(t);e&&a.set(e,(a.get(e)||0)+1)})),a.size?null===(n=cx(a.entries()).reduce((function(t,e){return e[1]>t[1]?e:t}),["0",0])[0])||void 0===n?void 0:n.toString():"0"}}])}();function px(t){return px="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},px(t)}function yx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mx(r.key),r)}}function mx(t){var e=function(t,e){if("object"!=px(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=px(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==px(e)?e:e+""}var vx=function(){return function(t,e,n){return e&&yx(t.prototype,e),n&&yx(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._configurationRepository=e,this._dataQ=n,this._aggregatedDebugInfoData={},this._changeId=-1,this._flushId=-1,this._dataQ.registerOnPreSendToWorker(this._onPreSendToWorker.bind(this)),this.defaultCollectionLevels={emuid:"debug",storage_directory:"debug",screen_high_res:"debug",adblock_lists:"debug",webgl:"debug",drm:"debug",speech_voices:"debug",font_emoji_info:"debug",font_math_info:"debug",font_width_info:"debug",navigator_pdfViewerEnabled:"debug",navigator_webdriver:"debug",navigator_userAgentData:"debug",navigator_appVersion:"debug",navigator_platform:"debug",navigator_vendor:"debug",navigator_productSub:"debug",navigator_vendorSub:"debug",navigator_onLine:"debug",navigator_getHighEntropyValues:"debug",navigator_prototype:"debug"},this._fixedDebugFeatures=["emuid"]}),[{key:"addToQueue",value:function(t,e,n,r){var o=this._resolveDebugInfoCollectionLevels(),i=e[0],a=this._fixedDebugFeatures.includes(i)?"debug":o[i];"debug"===a?(this._aggregatedDebugInfoData[i]=e.slice(1),this._changeId++):"prod"===a?this._dataQ.addToQueue(t,e,n,r):ue.warn("Received collectionLevel = ".concat(a," for ").concat(i))}},{key:"_onPreSendToWorker",value:function(){this._changeId!==this._flushId&&0!==Object.keys(this._aggregatedDebugInfoData).length&&(this._appendAggregatedDebugInfoDataToQueue(),this._flushId=this._changeId)}},{key:"_appendAggregatedDebugInfoDataToQueue",value:function(){var t=JSON.parse(JSON.stringify(this._aggregatedDebugInfoData));this._dataQ.appendData("static_fields",["client_debug_info",t])}},{key:"_resolveDebugInfoCollectionLevels",value:function(){var t=this._configurationRepository.get("debugInfoCollectionLevels");if(!t)return this.defaultCollectionLevels;try{return JSON.parse(t)}catch(t){return ue.error("Invalid debugInfoCollectionLevels config, falling back to defaults",t),this.defaultCollectionLevels}}}])}();function bx(t){return bx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bx(t)}function gx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_x(r.key),r)}}function _x(t){var e=function(t,e){if("object"!=bx(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=bx(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bx(e)?e:e+""}var Sx=function(){return function(t,e,n){return e&&gx(t.prototype,e),n&&gx(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._serverWorker=null,this._serverWorkerCommunicator=null,this._configurationService=null,this._featureBuilder=null,this._featureService=null,this._dataQ=null,this._frameHandler=null,this._eventHandlers=[],this._contextMgr=null,this._runWorker=function(t){return new En(t.getUseUrlWorker(),t.getWorkerUrl()).create()}}),[{key:"start",value:function(t,e){this._loadSystem(t,e)}},{key:"stop",value:function(){this._serverWorker&&this._serverWorker.close(),this.heartBeatService&&this.heartBeatService.stop()}},{key:"registerPostLoadEvents",value:function(){this._slaveListener.onResetSessionTrigger.subscribe(this._sessionService.resetSession.bind(this._sessionService))}},{key:"flushAllMessages",value:function(){this._dataQ.flushAllMessages()}},{key:"handleCoordinatesMaskingConfigurationUpdate",value:function(t){this._coordinatesMaskingConfigurationUpdater.updateConfig(t)}},{key:"getServerWorkerCommunicator",value:function(){return this._serverWorkerCommunicator}},{key:"getFeatureBuilder",value:function(){return this._featureBuilder}},{key:"getFeatureService",value:function(){return this._featureService}},{key:"getConfigurationService",value:function(){return this._configurationService}},{key:"getConfigurationRepository",value:function(){return this._configurationRepository}},{key:"getSessionService",value:function(){return this._sessionService}},{key:"getContextMgr",value:function(){return this._contextMgr}},{key:"getMuidService",value:function(){return this._muidService}},{key:"getEncryptedMuidService",value:function(){return this._muidEncryptedService}},{key:"getApiBridge",value:function(){return this._customerApiBridge}},{key:"getPerfMonitor",value:function(){return this._perfMonitor}},{key:"getServerStateMgr",value:function(){return this._serverStateMgr}},{key:"getMessageBus",value:function(){return this._msgBus}},{key:"getAgentIdService",value:function(){return this._agentIdService}},{key:"_loadSystem",value:function(t,e){var n,r;this._runServerWorker(e),this._serverWorkerCommunicator=new Ln,this._serverWorkerCommunicator.setMessagingPort(this._serverWorker.port);var o=new zl(gc,this._serverWorkerCommunicator,null,"logPerfQPassWorkerInterval",tn);this._perfMonitor=new Qn(o),this._configurationRepository=new Nr,new Ol(this._configurationRepository,e).loadStartUpConfigurations();var i=null===(n=this._configurationRepository)||void 0===n?void 0:n.get(lt);this._shouldEnableWorkerWupMessagesHashing(i,this._serverWorkerCommunicator);var a=new Jl(ze,this._configurationRepository),u=new Xn(self.MutationObserver,ze,gc,"contextConfiguration",null,!0,400);this._contextMgr=new rr(ze,u,this._serverWorkerCommunicator,a);var s=new Dl(o,this._contextMgr.url),c=new se(s);ue.setLogger(c);var l=null===(r=this._configurationRepository)||void 0===r?void 0:r.get(ct);this._registerFeatures(l),this._currScriptName=document.currentScript?document.currentScript.src:"",this._globalexceptionHandler=new ur(ze,this._currScriptName),this._msgBus=new dr,this._dataQ=new Gn(gc,this._serverWorkerCommunicator,this._contextMgr,"dataQPassWorkerInterval",$e),this._devDebugDataQueue=new vx(this._configurationRepository,this._dataQ),this._agentIdCache=new bf(a),this._agentIdService=new wf(this._agentIdCache,this._serverWorkerCommunicator),this._cidCache=new mr(e.getWupServerURL()),this._serverStateMgr=new Tr(this._serverWorkerCommunicator,ze,this._agentIdService),this._sessionInfoService=new Ac,this._sensorGateKeeper=new Lc(this._sessionInfoService,this._configurationRepository),this._configurationService=new Bo(ze,this._configurationRepository,this._msgBus,this._cidCache,this._serverWorkerCommunicator),this._sensorDataQ=new wi(this._configurationRepository,this._dataQ,this._msgBus,ze,this._sensorGateKeeper),this._maskingService=new Wo(this._configurationRepository);var f=e.getElementCategories(),d=e.getElementAttributes();this._categoryService=new hx(f,d),this._elementsUtils=new Gi(this._configurationRepository,ze,this._dataQ,this._contextMgr,this._maskingService,this._categoryService);var h=new Ba,p=new tu(this._configurationRepository,gc,ze);this._frameHandler=p.create(),this._featureService=new ou(aI,this._frameHandler,this._configurationRepository,gc,ze,h);var y=new gl(ze,this._msgBus,this._configurationRepository);this._stateService=new bs(this._msgBus),this._pauseResumeMgr=new lu(this._featureService,this._configurationRepository,this._dataQ,this._stateService,this._serverWorkerCommunicator),this._customerApiBridge=new Su(this._pauseResumeMgr,this._msgBus,t,ze),this._configurationRepository.get(st)!==Jt.SECONDARY&&(this._muidService=new Pu(ze,this._dataQ,a,this._configurationRepository),this._muidEncryptedService=new ux({domUtils:gc,utils:ze,storage:a,configurationRepository:this._configurationRepository})),this._psidCache=new Mu;var m=new Au(this._psidCache,this._serverWorkerCommunicator),v=new Xn(self.MutationObserver,ze,gc,"resetSessionConfig"),b=new Lu(ze,a,this._configurationRepository);this._csidCache=new Gu;var g=new Qu(this._customerApiBridge,this._csidCache,this._serverWorkerCommunicator),_=new of(ze,a);this._brandService=new tf(this._serverWorkerCommunicator,_),this._coordinatesMaskingConfigurationUpdater=new hf(this._configurationRepository);var S=new bI(e.getWupServerURL()),w=new pI(e.getWupServerURL()),E=e.isMinifiedWupUriEnabled();this._sessionService=new Ju(this._msgBus,this._configurationService,this._configurationRepository,ze,gc,this._serverWorkerCommunicator,this._contextMgr,this._muidService,this._serverStateMgr,v,b,S,this._cidCache,w,E,g,this._csidCache,this._psidCache,this._brandService,this._agentIdService),this._metadataService=new ts(this._configurationRepository,this._dataQ),this._slaveListener=new as(this._dataQ,this._configurationRepository,ze,o,this._contextMgr),this._slaveListener.listen(),this._sameChar=new ai,this._featureBuilder=new ls(aI,this._configurationRepository,ze,this._elementsUtils,self.MutationObserver,this._dataQ,this._devDebugDataQueue,e,this._sessionService,this._muidService,this._muidEncryptedService,this._perfMonitor,this._sensorDataQ,this._msgBus,this._cidCache,this._sameChar,this._maskingService,this._contextMgr),this._contextApiHandler=new ps(this._contextMgr,this._dataQ),this._contextMgr.onContextChange.subscribe(this._featureService.runPerContextFeatures.bind(this._featureService));var k=new Ts;this.heartBeatService=new Ec(this._serverWorkerCommunicator,new Mc,this._configurationRepository.get(D)),this.heartBeatService.start(),this._eventHandlers.push(new cf(this._msgBus,this._muidService,k,this._serverWorkerCommunicator)),this._eventHandlers.push(new Bs(this._msgBus,this._contextMgr)),this._eventHandlers.push(new Is(this._msgBus,this._sessionService)),this._eventHandlers.push(new Ds(this._msgBus,this._metadataService)),this._eventHandlers.push(new Hs(this._msgBus,this._pauseResumeMgr,this._slaveListener)),this._eventHandlers.push(new zs(this._msgBus,g)),this._eventHandlers.push(new Js(this._msgBus,m)),this._eventHandlers.push(new dc(this._msgBus,this._brandService)),this._eventHandlers.push(new sc(this._msgBus,k)),this._eventHandlers.push(new oc(this._msgBus,this._featureService,this._dataQ,this._pauseResumeMgr,this._metadataService,c,this._contextMgr,this._sessionService,this._sensorDataQ,this._slaveListener,this._stateService,this._perfMonitor,this.heartBeatService,this._sensorGateKeeper,b,this._coordinatesMaskingConfigurationUpdater)),this._eventHandlers.push(new tc(this._msgBus,this._featureService,this._customerApiBridge,this._contextMgr,k,this._sessionInfoService)),this._configurationRepository.get(X)&&(y.start(new na(window.self)),this._eventHandlers.push(new El(h,this._featureService,this._msgBus))),e.getLogServerURL()&&this._configurationService.updateLogUrlToWorker(this._sessionService.sessionId,this._csidCache.get(),this._serverWorkerCommunicator),e.isFlutterApp()&&(window.bcClient?window.bcClient.flutterBridge=new lI(this._msgBus):ue.error("Cannot initiate FlutterSdkBridge: bcClient object not found.")),this._stateService.updateState(sn.starting)}},{key:"_runServerWorker",value:function(t){this._serverWorker=this._runWorker(t)}},{key:"_registerFeatures",value:function(t){if(t!==Yt.LEAN)return ue.info("Build features per collection mode: FULL"),void aI.register();ue.info("Build features per collection mode: LEAN"),aI.registerLeanFeatures()}},{key:"_shouldEnableWorkerWupMessagesHashing",value:function(t,e){t&&e.sendAsync(an,{enableWupMessagesHashing:t})}}])}(),wx="getConfigurations",Ex="client";function kx(t){return kx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kx(t)}function Px(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Tx(r.key),r)}}function Tx(t){var e=function(t,e){if("object"!=kx(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=kx(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kx(e)?e:e+""}var Ox=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return e&&Px(t.prototype,e),n&&Px(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,null,[{key:"extract",value:function(t){if(!t)throw new Error("Invalid wupServerURL. Parameter is empty");var e={};if(e.cid=this.getCID(t),e.serverURL=this.getServerURL(t),!e.serverURL)throw new Error("Invalid field. Failed extracting the address parameter: ".concat(t));if(!e.cid)throw new Error("Invalid field. Failed extracting the cid parameter: ".concat(t));return e}},{key:"getCID",value:function(e){var n=t.extractCid(e);return n||null}},{key:"extractCid",value:function(t){var e=t.indexOf("cid=");if(-1===e)return null;e+=4;var n=t.indexOf("&",e);return n=-1===n?void 0:n,t.substring(e,n)}},{key:"getServerURL",value:function(t){var e=t.indexOf("/client/v",t);return(e=-1===e?null:e)?t.substring(0,e):null}}])}();function Cx(t){return Cx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cx(t)}function Mx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bx(r.key),r)}}function Bx(t){var e=function(t,e){if("object"!=Cx(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Cx(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Cx(e)?e:e+""}var jx=function(){return function(t,e,n){return e&&Mx(t.prototype,e),n&&Mx(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),null,[{key:"build",value:function(t,e){var n="/client/v3.1/web/wup";if(!t)throw new Error("Invalid server URL. Parameter is empty");return ze.hasProtocol(t)?t.toString().concat(n,"?cid=",e):"https".concat("://",t,n,"?cid=",e)}},{key:"buildCustomServerUrl",value:function(t){if(!t)throw new Error("Invalid server URL. Parameter is empty");return ze.hasProtocol(t)?t:"https".concat("://",t)}}])}();function Rx(t){return Rx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rx(t)}function Ax(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ix(r.key),r)}}function Ix(t){var e=function(t,e){if("object"!=Rx(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Rx(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Rx(e)?e:e+""}function xx(t,e,n){return e=Fx(e),function(t,e){if(e&&("object"==Rx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Lx()?Reflect.construct(e,n||[],Fx(t).constructor):e.apply(t,n))}function Nx(t){var e="function"==typeof Map?new Map:void 0;return Nx=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(Lx())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&Dx(o,n.prototype),o}(t,arguments,Fx(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Dx(n,t)},Nx(t)}function Lx(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Lx=function(){return!!t})()}function Dx(t,e){return Dx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Dx(t,e)}function Fx(t){return Fx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Fx(t)}var Ux=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),xx(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dx(t,e)}(e,t),function(t,e,n){return e&&Ax(t.prototype,e),n&&Ax(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e)}(Nx(Error)),Gx="enableRestart",Hx="enableFlush",Wx="enableCustomElements";function Vx(t){return Vx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vx(t)}function Qx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zx(r.key),r)}}function zx(t){var e=function(t,e){if("object"!=Vx(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Vx(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Vx(e)?e:e+""}var Kx=function(){return function(t,e,n){return e&&Qx(t.prototype,e),n&&Qx(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._utils=e}),[{key:"getCustomerSessionID",value:function(t){this._getFromApiOrEmpty("getCustomerSessionID",(function(e){t(e)}))}},{key:"getLogServerAddress",value:function(t){this._getFromApiOrEmpty("getLogServerAddress",(function(e){t(e)}))}},{key:"getServerAddress",value:function(t){this._getFromApiOrEmpty("getCustomerConfigLocation",(function(e){t(e)}))}},{key:"getConfigurations",value:function(t){var e=this,n=null;this.isApiAvailable(wx)?this._getFromApiOrEmpty(wx,(function(e){var r=null;if(e){if(e.isWupServerURLProxy)n=e.wupServerURL;else if(e[Tt])n=jx.buildCustomServerUrl(e[Tt]);else{if(!e[At]||!e[Rt])throw new Error("Invalid serverURL or cid. Parameter is empty");n=jx.build(e[Rt],e[At])}r=(new _e).mapStartupConfigurations(n,e)}t(r)})):this.getLogServerAddress((function(r){e.getServerAddress((function(e){var o=Ox.extract(e);n=jx.build(o.serverURL,o.cid),t(new me(n,r,null,!1,"",null))}))}))}},{key:"createClientInterface",value:function(t,e){if(!this.isCDAPIAvailable())throw ue.error("Failed setting client facade. cdApi is unavailable."),new Ux("Failed setting client facade. cdApi is unavailable.");var n={setCoordinatesMasking:function(e){t.setCoordinatesMasking(e)}};e&&e[Gx]&&(n.restart=function(){t.restart()}),e&&e[Hx]&&(n.flush=function(){t.flush()}),e&&e[Wx]&&(n.submitCustomElement=function(e){t.submitCustomElement(e)}),window.cdApi[Ex]=n}},{key:"isCDAPIAvailable",value:function(){return!!window.cdApi}},{key:"isApiAvailable",value:function(t){return!!window.cdApi&&!!window.cdApi[t]}},{key:"_getFromApiOrEmpty",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!window.cdApi)return n>=20?void ue.error("Failed getting cdApi after all retries."):(0===n&&ue.warn("cdApi not found in retry ".concat(n)),n++,void setTimeout(this._getFromApiOrEmpty.bind(this,t,e,n),100));if(!window.cdApi[t])return ue.warn("User did not implement cdApi method: ".concat(t)),void e("");try{window.cdApi[t](e)}catch(e){throw ue.error("An error has occurred while calling cdApi ".concat(t," function. Exception was thrown from client implementation."),e),e}}}])}();function qx(t){return qx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qx(t)}function Xx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Jx(r.key),r)}}function Jx(t){var e=function(t,e){if("object"!=qx(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=qx(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qx(e)?e:e+""}var Yx=function(){return function(t,e,n){return e&&Xx(t.prototype,e),n&&Xx(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),[{key:"autoStart",value:function(t){var e=this,n=new Kx;n.getConfigurations((function(r){r?r.getWupServerURL()?r.getUseUrlWorker()&&""===r.getWorkerUrl()?ue.error("Failed starting the JS SDK. Received invalid WorkerUrl configuration"):e.start(n,r,t):ue.error("Missing server URL. Unable to start the library."):ue.error("Failed starting the JS SDK. Received invalid start configurations")}))}},{key:"manualStart",value:function(t,e,n){var r=new Kx;this.start(r,t,n)}},{key:"start",value:function(t,e,n){var r;this._cdApiFacade=t,this._startupConfigurations=e,this._configurationLoadedCallback=n,this.systemBootstrapper=new Sx,t.createClientInterface(this,e.getClientSettings()),this.systemBootstrapper.start(t,e),ue.info("Got server address: ".concat(e.getWupServerURL()));var o=this.systemBootstrapper.getPerfMonitor();o.startMonitor("t.timeTillServerConfig"),o.startMonitor("t.timeTillDataCollect"),this.configurationService=this.systemBootstrapper.getConfigurationService(),this.sessionService=this.systemBootstrapper.getSessionService(),this.configurationService.setConfigurationLoadedCallback(n),this.systemBootstrapper.getFeatureService().buildFrameRelatedLists(),this.systemBootstrapper.getFeatureBuilder().buildFeatures(),ue.info("Started default features collection"),this.systemBootstrapper.getFeatureService().runDefault(),this.systemBootstrapper.getApiBridge().enableApi(),this.systemBootstrapper.getContextMgr().initContextHandling(),this.systemBootstrapper.registerPostLoadEvents(),null===(r=this.systemBootstrapper.getMuidService())||void 0===r||r.initMuid(),this.systemBootstrapper.getConfigurationRepository().get(ft)?this.sessionService.startNewSession():this.sessionService.resumeOrStartSession()}},{key:"stop",value:function(){this.systemBootstrapper.stop()}},{key:"pause",value:function(){window.cdApi.pauseCollection()}},{key:"resume",value:function(){window.cdApi.resumeCollection()}},{key:"updateCustomerSessionID",value:function(t){window.cdApi.setCustomerSessionId(t)}},{key:"changeContext",value:function(t){window.cdApi.changeContext(t)}},{key:"startNewSession",value:function(t){window.cdApi.startNewSession(t)}},{key:"restart",value:function(){this.stop(),this.start(this._cdApiFacade,this._startupConfigurations,this._configurationLoadedCallback)}},{key:"flush",value:function(){this.systemBootstrapper.flushAllMessages()}},{key:"setCoordinatesMasking",value:function(t){this.systemBootstrapper.handleCoordinatesMaskingConfigurationUpdate(t)}},{key:"submitCustomElement",value:function(t){this.systemBootstrapper.getMessageBus().publish(Eo,t)}}])}();function Zx(){return new m(new Yx,new _,new _e,new Te)}Zx()}(),cdwpb=r}();