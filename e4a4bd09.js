/* dd: 2025-08-14__10-03-46 */

(function (window, document) {
  "use strict";
  const getMetatagContent = (name) => {
    const elem = document.querySelector(`meta[name="${name}"]`);
    return elem ? elem.getAttribute("content") : "";
  };

  const isHybrid = getMetatagContent("isHybrid");

  if (isHybrid === "false") {
    console.log("Hybrid mode is false, using cdApi"); // remember to delete this line in production
    const cdApi = {
      configurationKeys: {
        wupServerURL: "wupServerURL",
        logServerURL: "logServerURL",
        enableCustomElementsProcessing: "enableCustomElementsProcessing",
        collectionSettings: "collectionSettings",
        maxShadowDepth: "maxShadowDepth",
      },

      getMetatagContent: (name) => {
        const elem = document.querySelector(`meta[name="${name}"]`);
        return elem ? elem.getAttribute("content") : "";
      },

      getConfigurations: function (callback) {
        const configurations = {};
        configurations[cdApi.configurationKeys.wupServerURL] =
          "https://wup-4ff4f23f.eu.v2.we-stats.com/client/v3.1/web/wup?v=1&cid=dummy";
        configurations[cdApi.configurationKeys.logServerURL] =
          "https://logs-4ff4f23f.eu.v2.we-stats.com/api/v1/sendLogs";
        configurations[
          cdApi.configurationKeys.enableCustomElementsProcessing
        ] = true;
        configurations[cdApi.configurationKeys.maxShadowDepth] = 25;
        configurations[cdApi.configurationKeys.collectionSettings] = {
          elementSettings: { customElementAttribute: "data-bb" },
        };
        callback(configurations);
      },

      postMessage: function (message) {
        window.postMessage(message, window.location.origin);
      },

      changeContext: function (contextName) {
        this.postMessage({
          type: "ContextChange",
          context: contextName,
        });
      },

      startNewSession: function (csid) {
        this.postMessage({
          type: "ResetSession",
          resetReason: "customerApi",
          csid,
        });
      },

      setCustomerSessionId: function (csid) {
        this.postMessage({ type: "cdSetCsid", csid: csid });
      },

      setCustomerBrand: function (brand) {
        this.postMessage({
          type: "cdSetCustomerBrand",
          brand: brand,
        });
      },
    };
    window.cdApi = cdApi;
  } else {
    console.log("Hybrid mode is true, using bcClient"); // remember to delete this line in production
    const bcGetMetatagContent = (name) => {
      const elem = document.querySelector(`meta[name="${name}"]`);
      return elem ? elem.getAttribute("content") : "";
    };
    const bcGetCookiesContent = (key) => {
      let result = new RegExp(
        "(?:^|; )" + encodeURIComponent(key) + "=([^;]*)"
      ).exec(document.cookie);
      return result ? decodeURIComponent(result[1]) : "";
    };
    const bcClientConfiguration = {};
    bcClientConfiguration["logServerURL"] =
      "https://logs-4ff4f23f.eu.v2.we-stats.com/api/v1/sendLogs";
    bcClientConfiguration["enableCustomElementsProcessing"] = true;
    bcClientConfiguration["collectionSettings"] = {
      mode: {
        agentType: "secondary",
        collectionMode: "lean",
      },
    };
    window.bcClientConfiguration = bcClientConfiguration;
    window.bcGetMetatagContent = bcGetMetatagContent;
    window.bcGetCookiesContent = bcGetCookiesContent;
  }
})(window, document);
  /*! For license information please see main.bundle.js.LICENSE.txt */
var cdwpb;!function(){var e={512:function(e){"use strict";e.exports=function(e,t,n,r){var o=self||window;try{try{var i;try{i=new o.Blob([e])}catch(t){(i=new(o.BlobBuilder||o.WebKitBlobBuilder||o.MozBlobBuilder||o.MSBlobBuilder)).append(e),i=i.getBlob()}var a=o.URL||o.webkitURL,u=a.createObjectURL(i),s=new o[t](u,n);return a.revokeObjectURL(u),s}catch(r){return new o[t]("data:application/javascript,".concat(encodeURIComponent(e)),n)}}catch(e){if(!r)throw Error("Inline worker is not supported");return new o[t](r,n)}}},521:function(e){e.exports={unlabled:["Ayuthaya","Baskerville","Beirut","BigCaslon","Didot","Farisi","Galvji","GurmukhiMT","HeitiSC","HeitiTC","HiraginoKakuGothicPro","HiraginoKakuGothicProN","HiraginoKakuGothicStdN","HiraginoMaruGothicPro","HiraginoMaruGothicProN","HiraginoMinchoPro","HiraginoMinchoProN","HiraginoSans","HoeflerText","HoeflerTextOrnaments","ITFDevanagari","ITFDevanagariMarathi","IowanOldStyle","Kailasa","Kokonor","LucidaGrande","LaoMN","LaoSangamMN","MalayalamMN","Mishafi-Bold","Mshtakan","Muna","NotoSansCuneiform","PTMono","PTSans","Palatino","PartyLET","Raanana","Rockwell","Sana","Sathu","Seravek","ShreeDevanagari714","Silom","SinhalaSangamMN","SongtiSC","SongtiTC","SukhumvitSet","Symbol","SystemFont","Waseem","ZapfDingbats","Geneva","Galvji-Regular","Ubuntu-Regular","NotoSansCanadianAboriginal-Regular","MuktaMahee-Regular","NotoSansMasaramGondi-Regular","NirmalaUI","MyanmarText","Gadugi","DejaVuSans","HelveticaNeue","Roboto-Regular","SegoeUIEmoji","JavaneseText","LeelawadeeUI","OpenSymbol","NotoSansGunjalaGondi-Regular","ArialMT","ArialNarrow","VnAvant","VnAvantH","VnGothicH","VnHelvetIns","VnGothic","VnHelvetInsH","LucidaSans","VnUniverse-H","3MCircularTT-Bold","ABeeZee-Regular","AbadiMTCondensedLight","AbadiMTCondensed-ExtraBold","Abel-Regular","AboriginalSans","ARBerkeley","AccentSF-Regular","Abscissa-Regular","AccordHeavySF","AccordLightSF","AccordSF-Regular","AcuminPro","AdobeHeitiStd","AdobeGothicStd","Aileron","AgencyFB-Regular","Aharoni-Bold","AirCut-Light","AlegreyaSansSC-Regular","AlekyaExtraBold","Alekya-Thin","Alekya-Medium","AndaleSans","AlternateGothic-No2-D","AlternateGothic2-BT","AmerikaSans","Antonio-Regular","AntiqueOlive","LiGothic-Regular","AppleGothic","Arimo-Regular","Asenine-Thin","Architext-Regular","AppleSDGothicNeo-Regular","AppleSDGothicNeo-ExtraBold","AsenineSuperThin","Arimo-BoldItalic","AvantGarde-Book","Avenir-Medium","Charter-Bold","Futura-Medium","Phosphate-Solid","Bariol-Regular","AveriaSans","BankGothic","AveriaSerifLibre-Regular","Avinor-Regular","BaronNeue-Regular","BebasNeue-Bold","BelfastLightSF","BerlinSansFB-Regular","Belfast-SF","BellGothicStd-Bold","Biko-Regular","BlairMdITCttMedium","BitstreamVeraSans","BowlbyOneSC-Regular","BrandonGrotesque-Bold","Cabin","CairoSF-Regular","Calibri","Candara","Cantarell-Bold","Carlito-Regular","CenturyGothic","CharcoalCY","CarroisGothicSC-Regular","CaviarDreams","CircularStd-Bold","Coda-Regular","ClearSans","ComicSansMS","Comfortaa-Regular","Commons-Regular","Corbel-Regular","CordiaUPC-Regular","CorporateSansMedium","Coolvetica","CronosPro-Regular","DaysRegular","DIN-Bold","DFKGothic-Md","Dayton-Regular","Damascus-Bold","DengXian","Dosis-Regular","Dosis-ExtraLight","Dotum","DotumChe-Regular","DroidSans","DroidSansArmenian","DroidSansArabic","DroidSansEthiopic","DroidSansHebrew","DroidSansGeorgian","DroidSansJapanese","DroidSansFallback","DroidSansThai","Ebrima","ElaSans-LightCaps","ErasBoldITC","Euclid","ExistenceLight","Eurostile","EuphemiaUCAS","Euclid-ExtraBold","Fabrica-Regular","FiraSans-Regular","Formata-LightCondensed","FolioXBdBT","FrancoisOne","FranklinGothicMedium","FreeSans","FuturaStd","GenW01-Light","GeotypeTT-Regular","Gidole-Regular","GillSans-Bold","GillSans","GilliusADF-Regular","GilliusADFNo2","GilliusADF-Cd","Gotham-Book","Gisha","GilliusADFNo2-Condensed","Gothic720-BT","GothicE","GothicI-Black","GothicG","GothicNo13-BT","HPSimplified-Regular","HGHeiseiKakugothicW5","HGHeiseiKakugothicW3","HGPAGothic2-Latin1K","HGPHeiseiKakugothicW3","HGPHeiseiKakugothictaiW5","Haettenschweiler","Hebar-Regular","HeitiTC-W5","Helvetica-Light","HeitiSC-Regular","Helvetica","HannotateTC-Bold","HiraginoKakuGothicPro-W3","HiraginoKakuGothicProN-W3","HiraginoMaruGothicPro-W3","HiraginoKakuGothicStdN-W3","HypatiaSansPro-Regular","HiraginoMaruGothicProN-W3","Humanist777BT-Regular","HiraginoSansGB-W3","IPAPGothic","HiraginoSans-W3","IPAGothic","IdealSans-Bold","ISOCPEUR","Interstate-Bold","Impact","Inder-Regular","JLSDataGothicCNC","JuliusSansOne","JLSDataGothicRNC","KleeDemibold","Kokila-Regular","Laila-Medium","LatinModernSans","LantingheiSC-Extralight","Latha","KozukaGothicPr6N-Medium","LantingheiSC-Demibold","LatinModernSans-DemiCondensed","Lato-Regular","LMSans10-Regular","LevenimMT","LinuxBiolinumKeyboardO","LiberationSans","LinuxBiolinumG-Regular","LinuxBiolinumO","LucidaSans-Demibold","Loma","LucidaSansUnicode","LuzSans-Book","MMCenturyNew-Bold","MMVariable-Bold","MMVariableDBold","MMVariableFBold","MMaVariable-Bold","MSReferenceSansSerif","MSSansSerif","MyriadPro","MaiandraGD","MalgunGothic","Meiryo","MarquisetteBTN-Light","NeoGothic-Regular","MicrosoftSansSerif","Montserrat-Regular","PhagsPa","MuktiNarrow","Muli","MSGothic","Muna-Bold","Museo100-Regular","MyriadArabic-Bold","MuseoSans-100","MyriadCAD-Regular","NanumBarunGothic-Regular","MyriadPro-Semibold","Neolith-Regular","NanumGothic-Regular","Narkisim","NapaSF-Regular","NeoSansPro-Light","NewGulim","NewsCycle-Regular","NeueHaasGroteskTextPro-Black","NewsGothicMT","NewsGothicBT","Nexa-Bold","NexaXBold","NimbusSansL-Regular","Nobile-Regular","NotoSans-Regular","NovaFlat-Regular","NovaOval-Regular","NovaSlim-Regular","SimpleSansOC-Regular","Optima-Regular","OpenSans-Regular","OpusChordsSans","OstrichSansRounded","NovaSquare-Regular","Nunito-Regular","OstrichSans","NuevaStd-BoldCondensed","OstrichSansDashed","Oswald-Regular","Oxygen-Regular","PTBoldHeading","Padauk-Regular","Paralucent-ExtraLight","ParalucentDemiBoldItalic","PingFangSC-Regular","Paralucent-ExtraLightItalic","PingFangTC-Regular","PlacardMTCondensed","PoiretOne","PoetsenOne-Regular","Praxis-Regular","PrimaSansBT","Purisa","ProximaNova","QTOptimum-Bold","QuickTypeII-Condensed","Quicksand-Regular","Quicksand-Dash","RacingSansOne-Regular","Raanana-Bold","Rakesly-Light","SFCompactText","SFNSDisplay","RotisSansSerifStd-Bold","RotisSansSerifStd-BoldExtrabold","Rondalo-Regular","SWGothic","STXihei-Regular","SamsungImagination-Bold","Raleway-Regular","SansSerif","Skia-Regular","Seravek-Regular","SofiaPro","SohoGothicPro-Bold","Seravek-ExtraLight","Square721BT","SourceSansPro-Regular","StoneSansITCTT","SukhumvitSet-Regular","Swiss721-BlackCondensed","Swiss721BlackExBT","Swiss721-BoldOul","Swiss721LTStd-LightCn","Swiss721-BoldCondensedOul","Swiss721BT-Regular","Swiss721LTEx-Bold","Swiss721BT","Tahoma","TakaoPGothic","Swiss911XCmBT","Technic","TeXGyreHeros","Swiss921BT-Regular","Technic-Bold","TempusSansITC-Regular","StezSans","Thonburi","Titillium","Titillium-Bold","TitilliumLight","Titillium-Regular","Titillium-Semibold","Swiss721-BlackOulBT","TitilliumThinUpright","TitilliumText22L-Bold","TrebuchetMS","TradeGothicLTStd","TitilliumText22-Bold","TsukushiBRoundGothic","TsukushiArounGothic","TwCenMT","URWGLN","TwCenMTCondensed-ExtraBold","URWGroteskT","UmeGothic","UmePGothic","VLGothic","UnDotum-Regular","Univers-55Roman","VNI-Bauhaus","VLPGothic","VNIHelve","VNI-HelveticaCondensed","Verdana","VodafoneRg","Verlag-Book","Vogue-ExtraBold","WPMultinationalA-Helvetica","VNI-Swiss-Condense","WPMultinationalB-Helvetica","WPGreekHelve","WenQuanYiMicroHei","YuCirilHelvetica","YuGothic","ZapfHumanistBT","ZolanoSansBTN","ZurichExBT","CMSS10","ZurichBoldExBT","Chicago","CMSS12","Bahnschrift","CMSS17","CMSS8","CMSS9","CMSSBX10","CMSSQ8","Dubai","CMSSDC10","HeitiStd","LCMSSB8-Regular","CambriaMath","LetterGothicStd","Luminari-Regular","Futura-Bold","InaiMathi-Bold","SignPainterHouseScript-Semibold","GentiumBookBasic","Amiri-Regular","NotoSerifYezidi-Regular","VnAristote","VnBodoni","VnBodoniH","AmericanTypewriter-Semibold","VnBookAntiquaH","CenturySchoolbook","VnClarendon","VnClarendonH","VnBookAntiqua","18thCentury","CenturySchoolbook-Bold","ARHermann-Regular","AboriginalSerif","AbrilFatface","AccanthisADFStd","AcademyEngravedLetPlain","AbyssinicaSIL","AccanthisADFStdNo2","AdlerStd-Regular","AccanthisADFStd-No3","AdobeGaramond-Regular","AdobeCaslonPro","AdobeHebrew-Regular","AdobeJensonStd","AkhbarMT","AdobeNaskh-Regular","AlbanyAMT-Regular","Aleo-Regular","AlbertusExtraBold","AmadeusStd-Regular","AdobeMingStd-L","MyungjoStd-Regular","AmazoneBT","Ambages-Regular","Andalus","AmericanTypewriter","Angostura-Regular","AngleterreBook-DGL","AngsanaNew","AppleMyungjo-Regular","Ariston-Regular","ArnoPro","Aparajita-Regular","AmiriQuran","Athelas-Regular","Arvo-Regular","AutourOne-Regular","AveriaSerif","BacktalkSerif-BTN","BanmaiTimes","Augusta-Regular","Batang","BaronNeue-Italic","BauerBodoniStd-Bold","BellMT","Bellota-Regular","BelweBoldBT","Bentham-Regular","BenguiatBookBT","BerlingStd-Regular","BerlingRoman","BauerBodni-BT","BernardMTCondensed","BernhardFashion-BT","Bevan-Regular","BirchStd-Regular","BernhardModBT-Regular","BitstreamCharter","BookAntiqua","BitstreamVeraSerif","BookmanOldStyle","BordeauxRoman-BoldLET","BordeauxRoman-Bold","BordeauxRoman-BoldLETPlain","BrowalliaNew","BreeSerif-Regular","Caladea-Regular","CalistoMT","Cambria","CalifornianFB-Regular","Canterbury-Regular","Catull-Regular","Castellar-Regular","Century","CentaurStd-Regular","Chandas-Regular","CentSchbookBT-Regular","CharisSILCompact","CharlemagneStd-Bold","ChaparralPro-Regular","ChunkFiveRoman","ClarendonBT","CloisterBlackBT","Cinzel-Regular","ColonnaMT","Cochin-Bold","Constantia","CooperStd-Black","Copperplate-Bold","CordiaNew-Regular","CumberlandAMT-Regular","DayRoman","DejaVuSerif","Didot-Regular","Dominican-Regular","DoulosSIL","Dutch801-Roman","DroidSerif-Regular","DiavloBook","Dutch801-Black","Egyptian710BT-Regular","English157BT-Regular","EngraverFontSet","EngraverTextHTTF","EngraverTextTT","EngraversMT","EngraverText-NC","EngraverTime","EuclidFraktur-Regular","EuroRoman-Regular","EzraSIL","EzraSILSR","FanwoodStd-Regular","FinaleCopyistTextExt","FelixTitling","FinaleCopyistText","Firenze-SF","FootlightMTLight","Formal436BT","FrankfurterVenetianTT","GFSArtemisia","FreeSerif","GFSComplutum","GFSBaskerville","GFSBodoniClassic","FrankRuhlLibre-Regular","GFSDidot","GFSDidotClassic","GFSGazis","GFSNeohellenic","GFSOlga","GFSTheokritos","GFSolomos-Regular","Gabriola","GFSPorson","GaramondPremrPro","GalatiaSIL-Regular","GeezaPro","GentiumBasic","Georgia","GentiumAlt-Regular","Glegoo-Regular","GermanicaStd-Regular","GloucesterMTExtraCondensed","GiovanniITCTT-Regular","GoudyOldStyle","Granjon-Bold","GujaratiMT","GoudyHandtooledBT","GravurCondensed-Light","HGPMinchoL","HGMinchoL-Medium","HYSerif-Medium","HGSMinchoL","HiraginoMinchoProN-W3","HighTowerText","Humanist521BT-Regular","Humanist521Bold","HuxleyTitling","IPAMincho","IMFELLDWPica","IPAPMincho-Regular","Italianate-Regular","JFArmenianSerif","IowanOldStyleTitling","JFGeorgianContrast","Joan-Regular","JosefinSlab-Regular","Jomolhari","Judson-Regular","Junicode","Kalyani-Regular","Kartika","Kalinga","KinoMT","KievitOffcPro-Regular","KohinoorBangla-Regular","Langdon-Regular","KozMinPro6N-Regular","KohinoorDevanagari-Book","LatiennePro-Regular","LatinModernRoman","LMRomanDunhill","LMRomanSlanted","LeituraDisplayRoman","LexiaRegular","LatinModernRoman-Unslanted","LiberationSerif","LatinModernRoman-Caps","LiberationSerif-Regular","LindenHill-Regular","LinuxLibertineDisplayG-Regular","LinuxLibertineG-Regular","LinuxLibertineInitialsO","LinuxLibertineO","LucidaFax","LucidaBright","Times-Roman","MMCenturyNew-Italic","MMCenturyOld-Bold","MMCenturyOldGreek","MMTextBook-Italic","MMTextBookB-Italic","MMTimes-Regular","MMaCentury","MMaCenturyK","MMaCenturyKSBold","MMaCenturyKSS-Bold","MMaCenturySSStd","MMaCenturyS","MMaPascal-Bold","MMaFraktur","MMaTextBook-Bold","MSMincho","MSPMincho","MSSerif","MSReferenceSerif","MaestroTimes-Regular","Manorama-Regular","Marion-Bold","Martina-Regular","Menlo-Regular","Merriweather-Black","MingLiU","Minerva-Regular","Merriweather-Bold","MinionPro-Regular","ModernAntiqua","ModernNo20","MrsEavesRoman","MudirMT","Museo700-Regular","NafeesWebNaskh","MyanmarSangamMN-Regular","NewAthenaUnicode","NanumMyeongjo-Regular","NewPeninimMT","NewPeninimMTInclined","NewPeninimMT-BoldItalic","NimbusRomNo9L-Regular","Norasi-Regular","Nonfiction-Regular","NotoNaskhArabic-Regular","NuevaStd-Regular","NotoSerif-Regular","NuevaStd-BoldCond","NuevaStd-Condensed","OldCentury","OpusText","Nyala","OdessaLET-Regular","PTBarnum-BT","PTSerif-Regular","PCMyungjo-Regular","OriyaSangamMN-Regular","OratorStd","PalatinoStd","PanRoman","Perpetua","PersiaBT-Regular","PerpetuaTitlingMT","PetrucciStd-Regular","PlayfairDisplay-Regular","PlantagenetCherokee","Piranesi-Italic","PlayfairDisplaySC-Regular","PoorRichard","PoplarStd","PosterBodoniBT-Regular","PrioriSerifOT-Regular","PrincetownLET-Regular","STLiti-Regular","SerifaBT-Regular","RockwellStd","RobotoSlab-Regular","SWRomans","SerifaThBT","SinhalaMN-Regular","SimSun","SitkaBanner","Seville-Regular","SitkaHeading-Regular","SitkaSubheading-Regular","SitkaDisplay-Regular","SongtiSC-Regular","SortsMillGoudy","SourceSerifPro-Regular","SouvenirLTBT","Superclarendon-Regular","SongtiTC-Regular","Sylfaen","TeXGyreAdventor","TeXGyreChorus","TeXGyreBonum","TeXGyrePagella","TeXGyreSchola","TheatreAntoine","TeXGyreTermes","ThorndaleAMT","ThorndaleVST","Tinos-Regular","TirantiSolidLET","Tinos-BoldItalic","TlwgTypo","TrajanPro","Trocchi-Regular","TwCenMT-Italic","URWAntiquaT","URWPalladioL-Regular","BookmanStd-Regular","UmeMincho","UmePMincho","UnBatang-Regular","UniversityRomanLET","UniversityRomanAltsLET","UncialAntiqua","VNI-Bodon","Utopia","VNI-Chaucer","VNI-Cooper","VNI-Garamond","VNI-Couri","VNI-Bodon-Poster","VNI-Palatin","VNI-Times","Verona-Regular","TimesNewRomanPSMT","VnTimes","Vijaya","VnTimes2","VogueStd-Bold","VNI-Goudy","WPGreekCentury","Vollkorn-Bold","WPMultinationalARoman","WarnockPro-Regular","Waverly-Regular","WPMultinationalB-Roman","Westminster-Regular","YuMincho-Medium","YuMincho-Kana","ZolanoSerifBTN","AlbertusMedium","Ceriph05","BodoniMT","ComputerModern-Bold","CMR10","CMEX12","CMEX10","CMU","CMEX7","CMBig8","CMR10Italic","ComputerModernRoman10","ComputerModern-BoldItalic","CMR12","CMR17","CMR5","CMR6","CMR7","ComputerModernRoman","ComputerModernRoman-Regular","CMTI8","CMTI12","CMTI9","EurM10","NewYork","NewCenturySchlbk","StMary10","FangSongStd-Regular","AdobeKaitiStd-R","AdobeMingStd-Regular","AdobeSongStd-Light","BatangChe-Regular","BiauKai","LiSung","CSongGB18030C-Light","DFKai-SB","Kaiti","HGSHeiseiMinchoW3","HYSWLongFangSong","KaiTiGB2312","KaitiSC-Regular","KaitiTC-Regular","LiSongPro-Regular","MSungStd","MingLiU-ExtB","NSimSun","MingLiU-HKSCS","PMingLiU","STKaiti-Regular","STFangsong-Regular","STSongti-SC-Regular","STXingkai-Regular","STZhongSong","SimSun-ExtB","WeibeiSC-Regular","DancingScript","XingkaiSC-Bold","KohinoorDevanagari-Medium","VnMystical","VnMysticalH","28DaysLater","ZWAdobeF","ActionJackson","African","AajaxSurrealFreak","AirConditioner","Airstream-Regular","Algerian","AliceAndTheWickedMonster","AlienEncounters","AlphaClown","AntFarmGoneCamping","AppleBoyBTN","AquaductWarp","Army","BadaBoomBB","Bauhaus93","Benguiat","BlackoakStd-Regular","BladeRunnerMovieFont","BlackoutRegular","Blockbuster-Regular","Boogaloo","Braggadocio-Regular","BrokenPlanewing","BroadwayBT","BubblegumSans","BurstMyBubble-Regular","CandyRoundBTN","Canter-Bold3D","Chalkduster","Chewy-Regular","Chiller","CinemaGothicBTNShadow","CoasterShadow","ComicRelief","Coolsville-Regular","Cracked-Regular","ColdSpaghettiBTN-Regular","Creepygirl","CrackedJohnnie","CutMeOut","DirtyHeadline","DistantGalaxy","Drivebye3","Elephant-Regular","DotMatrix","CurlzMT","Ethnocentric-Regular","Dynalight","FascinateInline","FingerPaint","Flubber-Regular","Fingerpop-Regular","FluffySlacksBTN","Forte-Regular","GoodTimes","GelflingSF-Regular","GaleforceBTN-Regular","GoudyStout","GrilledCheeseBTN","GreekDinerInlineTT","GrilledCheeseBTToasted","Gunplay-Regular","HelterSkelter","HarryP","Harrington","HoboStd","HennyPenny","HolidaySpringsBTN","HolidayPiBT","HotMustardBTN","HotMustardBTNPoster","HollywoodHills","IMGBaby","IceKingdom","ImprintMTShadow","ItalicOutlineArt","JazzBT-Regular","IguanaLover-BTN","JazzText-Regular","JazzTextExtended","Jokerman","JokermanAlternatesLET","KingthingsVersalis","LaBambaLET","LucidaBlackletter","MVBoli","MagicSchoolOne","MagicSchoolTwo","LAHeadlightsBTN-Regular","Magneto-Regular","MarkerFelt-Wide","Monoton-Regular","NeonLights","NewRocker-Regular","Metamorphous-Regular","MekanikLET-Regular","NightclubBTN-Regular","NightclubBTN-UltraCn","MasterOfBreak","OldAnticDecorative","PaintStroke","OldAnticOutlineShaded","OldEnglishTextMT","OldAnticOutline","ParryHotter","Puppylike","PTBoldStars","PartyLET-Regular","PhosphateInline","PointedlyMad","Poster","Pirate","PressStart2P","Pricedown-Bold","Ravie","Pricedown","RazerText-Regular","Rage-Italic","SFDistantGalaxy","RosewoodStd-Regular","SFDistantGalaxyAltOutline","SFDistantGalaxyAlternate","SFSlapstickComic","SacredGeometry-Regular","SFSlapstickComicShaded","SigmarOne","ShowcardGothic","SimpleIndustShaded","SonicX-Bold","SneakerheadBTN-Regular","SnapITC-Regular","SonicCutThru-Bold","SpaceAge","SupernaturalKnight","StarlinerBTN-Regular","SuperFrench-Regular","TallBoy3D-Regular","TerminatorTwo","Tarzan-Regular","TanglewoodTales-Regular","TitanOne","Unicorn","TrueLies","TypeEmbellishmentsOneLET","Playbill","VNI-Disney","VictorianLET","VirtualDJ-Regular","VNI-Shadow","VinetaBT-Regular","WesternBangBang","WhimsyTT","WideLatin","WolfInTheCity-Regular","Woodcut-Regular","XFiles-Regular","Fantasy","balonezfantasiabr","balonezfantasia","YearSupplyOfFairyCakes","Simpson","Surfer","HarlowSolidItalic","LucidaConsole","SourceCodePro-Regular","LiberationMono","Cousine-Regular","Monaco","DroidSansMono","VnCourier","CourierNewPSMT","CourierNewPS-BoldMT","AndaleMono","AnonymicePowerline","Consolas","Code2000","BitstreamVeraSansMono","Courier","CousineforPowerline","CousineBoldItalicforPowerline","DV1TTYogesh","DejaVuSansMono","DroidSansMonoDottedPowerline","DejaVuSansMono-BoldOblique","FiraCode-Regular","FiraMono","DroidSansMonoSlashedForPowerline","FiraMono-Bold-Powerline","FiraMono-MediumPowerline","FixedMiriamTransparent","Fixedsys","FreeMono","Hack-Bold","IBM3270-Regular","Inconsolata-Regular","LMMono10-Regular","LMMonoCaps10","LMMono10-LightCondensed","Inconsolata-dz-Powerline","Inconsolata-gforPowerline","LMMonoSlanted","LinuxLibertineMonoO","LiterationMonoPowerline","LucidaSansTypewriter","Math4Mono-Regular","Math3Mono","Math2Mono-Regular","Math1Mono","LucidaSansTypewriter-BoldOblique","Menlo-Bold","MesloLGMDZ-Regular","MesloLG-Regular","Math5Mono","MiriamFixed","MesloLGSDZ-Regular","MitraMono","Monospac821BT-Regular","Monotxt-Regular","NewRenexTerminal","NimbusMonoL-Regular","NotoMono-Regular","NotoSansMonoCJKjp-Regular","OCR-A","OsakaMono","PrestigeEliteStd","QuickTypeII-Mono","RobotoMono-Regular","RomanMono","RocketArabicFixed","SauceCodePowerline","SWMono-Regular","SpecialElite","SASMonospace","SauceCodePowerline-ExtraLight","SymbolMonoBT","Teletype","Terminal","TerminalGreek737437G","TlwgTypewriter-Regular","Typewriter","UbuntuMono-Regular","WPBoxDrawing","WPGreekCourier","TeXGyreCursor","TerminalGreek869","TlwgMono","TlwgTypist","WPMultinationalACourier","WPMultinationalBCourier","Courier-Oblique","WenQuanYiMicroHeiMono","Mono07","CMVTT10","Monoeger05","MonofurPowerline","Monooge05","SaxMono-Regular","CourierNew","AppleColorEmoji","NotoColorEmoji","ArialRoundedMTBold","TwemojiMozilla","NovaRound-Regular","VAGRounded-BT","TsukushiBRoundGothic-Regular","VNIArialRounded","SFCompactRounded-Regular","AsanaMath","DejaVuMathTeXGyre","EuclidMathOne","LibertinusMath-Regular","LatinModernMath-Regular","EuclidMathTwo","Math2","Math4","Math3-Regular","Math1","Math5","STIXMath","STIXNonUnicode-Regular","STIXNonUnicode-BoldItalic","STIXSizeThreeSym-Regular","STIXTwoSym-Regular","SWMath-Regular","Symath-Regular","TGPagellaMath","TGTermesMath","TeXGyreBonumMath","TeXGyrePagellaMath","UniversalMath1-BT","WPMathA","WPMathB-Regular","TeXGyreTermesMath","WPMathExtendedB","XITSMath","WPMathExtendedA","CMEX8","CMEX9","CMI5","CMI6","CMI8","CMI10","CMMIB10","CMMI6","CMMIB7","CMR8-MediumItalic","CMSY10","CMSY5","CMSY6","CMSY7","CMSY9","MSAM6","MSAM5","CMSY8","MSAM7","MSAM8","MSAM9","MSBM5","MSAM10","MSBM10","MSBM9","MSBM7-Regular","MSBM6","DroidNaskh","MSBM8-Regular","KhmerOSsys","MSDialog","MSSystemEx","SanFranciscoDisplay-Regular","SegoeMDL2Assets","SystemFontItalicG1","SystemFontBoldItalicG1","SystemFontBoldG1","SystemFontMediumItalicP4","DroidNaskhUI","SystemFontRegularG1","HeitiSC-Light","AppleSDGothicNeo-SemiBold","KhmerUI","HeitiTC-Light","LaoUI","MSDialogLight","MSPGothic","LeelawadeeUI-Semilight","MSUIGothic","MalgunGothicSemilight","LucidaGrandeBold","MicrosoftJhengHei","Meiryo-BoldItalic","MeiryoUI","MicrosoftJhengHeiUI","MicrosoftYaHeiUI","MicrosoftMHei","NirmalaUI-Semilight","NotoSansUI-Regular","MicrosoftYaHei","PingFangHK-Regular","STHeiti-Regular","SegoeUI","SegoeUIHistoric","SegoeUISemilight","SegoeUISymbol","SegoeCondensed","SkypeUISymbol","SegoeWP-SemiLight","SegoeWP","UmeGothic-Regular","YuGothic-Medium","YuGothicUI","YuantiSC-Bold","YuantiTC-Light","YuGothicUISemiLight","SegoeFluentIcons","HoloLensMDL2Assets","MSOutlook","KACSTOffice","STIXTwoText-Regular","PingFangHK-Light","Chilanka-Regular","Manal-Black","TwentiethCenturyBold","MondulkiriU-Regular","Vn3DH","VnArabiaH","VnArabia","VnAristoteH","VnBahamas-Bold","VnBlack","VnCooperH","VnCooper","VnExotic","VnFree","VnBlackH","VnExoticH","VnFreeH-Regular","VnKoala","VnLincoln","VnKoalaH","VnLincolnH","VnLinus","VnLinusH","VnPark","VnMemorandum","VnParkH","VnMemorandumH","VnPresent","VnPresentH","VnRevue","VnRevueH","VnSouthern","VnStamp","VnShelleyAllegro","VnTeknicalH","VnTeknical","VnTifaniHeavy","VnSouthernH","VnTime","VnTifani-HeavyH","VnVogueH","VnUniverse","VnTimeH","VnVogue","Barcode39","Nineteen","1942Report","ThickBRK","ThirtySixDaysAgoBRK","FiftyOne","3dsLight","36pKanaDemibold","FuturaStd-Book","Futura-Book","F56-Regular","HelveticaNeue-CondensedBlack","F57","65Black","HelveticaNeue-CondensedBold","67Regular","8514oem","ABite","ASensibleArmadillo","Absalom-Regular","ALewis","Abigail-Regular","ADMUI2Lg","ADMUI3Lg","ADMUI2SM","ADMUI3SM","8PinMatrix","AGaramond","AIGDT-Regular","AMGDT-Regular","AGAArabesque","AndroidRobot","ARBlanca","AR-CARTER","AR-CENA","ARDecode-Regular","ARDestine","ArcherStd-Regular","AREssence","ASTTDurga","ARJulian","Fujiyama","Fujiyama2","AVFontBen1","AVFontKan1","AVFontMal1","AVFontGuj1","AVFontSymbol","AVFontSin1","AVWebHin1","Fujiyama-ExtraBold","AVFontTam1","AVFontSin","AVFontHin1","AVG-Medium-Bold","AVWebTam1","Aarcover-Regular","AVWebTel1","AardvarkCafe","Abduction2002","Abscissa-Italic","Aberration-Regular","Aardvark-Bold","AbstraktRegular","AcmeFont-Regular","AdamskySF","AcadEref-Regular","AdobeArabic","AdobeDevanagari","AddJazz-Regular","Gurmukhi","AdmisiDisplaySSi","AdobeFanHeitiStd","AdobeHebrew-Bold","AdobeKaitiStd","AeroviasBrasilNF","AdobePiStd","Aftermath-Regular","AftershockDebris","AlBayan","Akaash-Regular","AksharUnicode-Regular","Ahnberg-Regular","AftershockDebris-CondSolid","AlNile","Aldhabi","AlTarikh","Alekya-Bold","Alfredo-Regular","Alibi-Regular","Alison-Regular","AllCaps-Regular","AllegroStd","AlmonteSnow","AlligatorPuree","AmerTypeMediumBT","Amerika","AmdtSymbols","Analgesics-Regular","Amethyst-Regular","Amudham-Regular","AmerikaAlternates","AnandapatraCMJ-Regular","Andong-Regular","Angiang-Regular","Ancuu-Regular","Angstrom-Regular","AnnRegular","AnjaliOldLipi","AngsanaUPC-Regular","AppleBraille","AnticFont","AngiomaAOE","AppleBraillePinpoint6Dot","AppleSymbols","ArabicTransparent","AquaductPlain","ArabicTypesetting","Archicoco-Regular","Aquaduct-Italic","Aramis-Italic","AppleBrailleOutline6Dot","Archive-Regular","ArgosMF-Regular","Arctic-Regular","ArhialkhanMJ-Regular","Arkhip","Ashwariya-Regular","ArrusBT-Regular","ArhialkhanOMJ","Arrobatherapy-Regular","Asimov-Regular","Asenine-Regular","Atlas-Regular","AtraiMJ-Regular","Atzur-Regular","AuroraCnBT","AtraiOMJ","Batavia-Regular","AvantiStd","B095","BJCreeUni","Autumn","BNJinx","BNMachine","BNTTDurga","BOUTONInternationalSymbols","BPGClassic99U","Baamini","BPGPaataKhutsuriU","Braddon-Regular","Baclieu-Regular","Baghdad","BaiduanNumber","Bamini","BangkokCirilica","Bahiana-Regular","BaluBold","BanglaSangamMN","BanglaMN","Barrio-Regular","BaronNeue-BoldItalic","BaoliSC-Regular","Bazooka-Regular","Bastion-Regular","BeatnikSF-Regular","BelfastHeavySF","BelweCnBT","BhagirathiMJ-Regular","BernardCondensed","BhagirathiOMJ-Regular","BhairabMJ-Regular","Bhuma","BhairabOMJ-Regular","Bienhoa-Regular","Bifurk-Regular","Binhlong-Regular","BinnerD-Regular","Blackletter686BT-Regular","Bobcat-Regular","BlairMdITCtt","Binhdinh-Regular","BodoniOrnaments","Bolster-Bold","BoldItalicArt","BongshaiMJ-Regular","BongshaiOMJ","BookshelfSymbol7","BorhalMJ-Regular","Borealis-Regular","BorakOMJ-Regular","BrahmaputraMJ-Regular","BorakMJ-Regular","Brandish-Regular","BritannicBold","BrilliantStd-Bold","Brussels-Regular","BrowalliaUPC-Regular","BuiltTitling-Bold","BuiltTitling-BoldItalic","BurigangaKamalaOMJ","BurigangaOMJ","BurigangaSushreeMJ","CMedium","BurigangaMJ-Regular","Campbell","BurigangaSushreeOMJ","Casimira-Regular","CATIA-Symbols","C-MediumHWL","Chanl-Regular","CLMedi","CSD16-Regular","ClarenceStd-Regular","CSongGB18030C-LightHWL","CZEC-Regular","Calvin-Regular","Camau-Regular","CDTKhmer","Camranh-Regular","Canter-Bold","Canter-BoldStrips","Capitals-Regular","CarbonBlock","Canter-Outline","Cantho-Regular","CarolinaStd-Regular","Chalkboard","ChandrabatiMJ-Regular","ChandrabatiMatraMJ-Regular","ChandrabatiMatraOMJ-Regular","ChandrabatiOMJ","ChessBerlin","ChessAlpha","ChessMarroquin","ChessMaya","Chinyen-Regular","Chipotle-Regular","ChitraMJ-Regular","ChitraOMJ","ChitraSMJ-Regular","ChondanaMJ-Regular","ChessMerida","ChandrabatiSushreeMJ","CityBlueprint-Regular","Clubland-Regular","Code39AzaleaNarrow1","Code39AzaleaNarrow2","Code39AzaleaRegular","Code39AzaleaNarrow3","Code39AzaleaRegular2","Code39AzaleaRegular3","Code39AzaleaWide1","Code39AzaleaWide2","Code39AzaleaWide3","Colbert-Regular","CommercialPi-BT","ComplexStd-Regular","ConcursoItalian-BTN","CopperplateGothicBold","Copyist-Regular","CooperBlack","Cortoba-Regular","ChondanaOMJ-Regular","CrystalCF","Cuulong-Regular","CountryBlueprint-Regular","DFMaruGothic-Md","DSCrystal","DVTtyogesh","DYMOSymbols","Daclac-Regular","DYMObvba","Damascus","David","DavidTransparent","DecoTypeNaskh","DecoTypeNaskhExtensions","DecoTypeNaskhSpecial","Decor","DecoTypeNaskhVariants","Deepa-Regular","DecoTypeThuluth","DecoTypeNaskhSwashes","Deepak-Regular","Deneane-Regular","DevanagariMT","DevanagariSangamMN","DhanshirhiOMJ","DholeshwariMJ-Regular","DhakarchithiMJ-Regular","DhakarchithiOMJ-Regular","DhanshirhiMJ-Regular","DholeshwariOMJ-Regular","DhonooMJ-Regular","DhonooOMJ","DhorolaMJ-Regular","DhorolaOMJ","DigifaceWide-Regular","Digifit-Regular","Diavlo-Bold","Divya-Regular","DilleniaUPC-Regular","DigitalReadoutUpright","DiwanKufi","DiwanThuluth","DiwaniBent","DiwaniLetter","DokChampa","Dot","DiwaniSimpleStriped","DiwaniSimpleOutline","DiwaniOutlineShaded","Dollar","Drivebye1","DroidArabicNaskh","DroidNaskhShift","DroidNaskhShiftAlt","Dyname-BlackSSK","Dyuthi-Regular","ELEGANCE","ElangoTMLPanchaliNormal","Ducmy-Regular","Ellis-Regular","ENGL-Bold","EQUIS-Regular","Excess-Regular","ESTO-Regular","EccentricStd","EkusheyPunarbhaba","ElegantIcons","EmbassyBT","Emmett-Regular","EngraverFontExtras","EstrangeloEdessa","Enliven-Regular","EuclidExtra","EthiopiaJiret","EuroSign","EucrosiaUPC-Regular","EuphemiaUCAS-Italic","EuclidSymbol","Feliz-Regular","FMLAkhila","FMLIndulekha","FMLLeela","FMLIndulekhaHeavy","FMLKarthika","FMLLeelaHeavy","FMLMohini","FMLNanditha","FMLPadmanabha","FMLRevathi","FMLSruthy","FMLTTAmbili","FML-TTAnjali","FMLTTAnakha","FMLTTAparna","FML-TTAshtamudi","FML-TTAswathi","FMLTTAtchu","FML-TTAshtamudiExBold","FML-TTAyilyamBold","FMLTTBeckal-Bold","FMLTTChandrika","FMLTTBhavana","FMLTTChithira","FMLTTDevika","FMLTTChithiraHeavy","FMLTTGauri","FML-TTGeethika","FMLTTGopika","FMLTTGauriHeavy","FMLTTIndulekha","FMLTTJaya","FMLTTIndulekhaHeavy","FML-TTJyotsna","FMLTTGuruvayur","FML-TTJyothy","FMLTTKala","FMLTTKamini","FMLTTKanika","FMLTTKarthika","FMLTTKaumudi","FML-TTKeerthi","FMLTTLeela","FMLTTLeelaHeavy","FML-TTMalavika","FMLTTMangalaExBold","FMLTTMadhaviExBold","FMLTTMayoori","FMLTTNandini","FMLTTNanditha","FMLTTNila","FMLTTOnam","FMLTTNarmadaExBold","FMLTTPeriyar","FMLTTPoornima","FML-TTPooram","FMLTTNalini","FMLTTRavivarma","FMLTTRevathi","FMLTTSabari","FMLTTRohini","FML-TTSarada","FMLTTSugatha","FMLTTSruthy","FMLTTSankara","FML-TTSwathyBold","FML-TTSuparna","FMLTTThakazhi","FMLTTTheyyam","FMLTTThiruvathira","FML-TTVaisali","FMLTTVarsha","FMLTTVeenaHeavy","FMLTTThunchan","FMLTTVinay","FML-TTSurya","FMLTTVisakham","FMLTTVishu","FMLTTYashasri","FMLTTAathira","FREH-Regular","FTEasci1","FTEasci1-f","FTEbaudo-Regular","FTEasci2","FTEbaudo-f","FTEebcd1","FTEasci2-f","FTEebcd1-f","FTEebcd2-f","FTEspec-Regular","FTEspecf","FTEebcd2","Farah-Regular","FarsiSimpleOutline","FarsiSimple-Bold","Farisi-Regular","FZLanTingHeiS-UL-GBK","Fences-Regular","FerroRosso","FinaleMallets","FinaleAlphaNotes","FinalePercussion","FordLineDraw","FinaleNumerics","Fren-Regular","FreesiaUPC-Regular","GB18030Bitmap","FontAwesome5Free","GDTRegular","GENISO-Regular","GFZemenUnicode","TTAvantika","GlyphiconsHalflings","Genuine","Ganesh-Black","Grobold","Ganesh-Bold","Ganesh-ExtraBold","Ganesh-Medium","GaneshNarrow-Regular","Ganesh-Thin","GangaMJ-Regular","GangaOMJ-Regular","Garuda-Regular","Gauge-Regular","Gautami","Gayathri","GenW01-Regular","GangaSagarMJ-Regular","Gazzarelli-Regular","Germ","GhorautraMJ-Regular","Giadinh-Regular","Giolinh-Regular","Gocong-Regular","Glockenspiel-Regular","GoomtiMJ-Regular","GoraiOMJ","GoraiMJ-Medium","GothamLightItalic","Gravity-Regular","GreekC","GreekS","Gridnik-Regular","Gulim","GujaratiMT-Bold","GujaratiSangamMN","GulimChe","GrilledCheeseBTN-WideBlack","GungSeo-Regular","Gungsuh","GungsuhChe-Regular","GurmukhiMN","Hana","GuttmanYad","GurmukhiSangamMN","Herman","HGHangle","HGHeiseiMinchoW3","HGHeiseiMinchoW9","HGHeiseiKakugothictaiW9","GhorautraOMJ","HGPHeiseiKakugothicW9","HGPHeiseiMinchoW3","HGSHeiseiKakuGothicW3","HGSHeiseiMinchoW9","HGSHeiseiKakugothicW5","HPPsgd","Hadong-Regular","Huntson-Regular","HKSCS-ExtB","HKSCS-Regular","HGPHeiseiMinchoW9","HGSHeiseiKakuGothicW9","HaldaMJ-Regular","Halong-Regular","HaldaOMJ","HannotateSC-Regular","Hansen-Regular","HannotateTC-Regular","HariSree-Regular","HanziPenTC-Bold","HanziPenSC-Bold","Harvest-Italic","HarvestRegular","HaxtonLogosTT","HeatherBTN-Regular","HeadLineA-Bold","HeavyFont","HeavyHeap-Regular","Hoian-Regular","Herculanum","HighlightLET","HoboStd-Medium","Hombre-Regular","HucklebuckJF-Regular","Hue","HooglyOMJ","HooglyMJ-Regular","IDAutomationPDF417n2","IMGExtreme","IDAutomationPDF417n5","IDAutomationPDF417n3","IMGSeasons","IDAutomationPDF417n4","IMGSymbols","InspectionXpertGDTFrames","IMGTravel","IRIS-Regular","InspectionXpertGDTNoForms","Isabelle-Regular","ISOCP-Regular","ISOCP2","ISOCP3","ISOCT-Regular","ISOCT2","ISOCT3","ISOCTEUR","ITCAvantGardeStd-Book","IchamotiMJ-Regular","IchamotiOMJ","ImpregnablePersonalUseOnly","InaiMathi","Incised901-BoldCn","Incised901CTBT","Incised901Std-Nd","Incised901-BookItalic","Induction-Regular","Industrial736BT-Regular","IrisUPC-Regular","ItalicStd","IskoolaPota","ItalicC","ItalicT","JLSSpaceGothicCNC","JUSTICE-Regular","JLSSpaceGothicRNC","JaJaDiMJ","JaJaDiOMJ","Janaranjani-Regular","Jayanthi","JazzPerc","JomunaMJ-Regular","JuiceITC-Regular","JameelNooriNastaleeq","Jwala","JumunaOMJ","KN-TTUma","KBVibrocentric","JugantorMJ-Regular","Kabin-Bold","JazzCord-Regular","KacstArt","KacstBook","KacstDecorative","KacstDigital","KacstLetter","KacstFarsi","KacstNaskh","KacstOffice","KacstOne","KacstPoster","KacstPen-Regular","KacstQurn","KacstScreen","KacstTitle","Kailasa-Regular","KacstTitleL-Regular","KalegongaMJ-Regular","KalegongaOMJ","Kalakaumudi-Regular","KalindiSMJ-Regular","KalindiMJ-Regular","KalindiOMJ","Kalpurush","KalpurushANSI","Kanalisirung-Regular","KanchanMJ-Regular","KannadaMN-Regular","KanchanOMJ-Regular","KannadaSangamMN","KasseFLF-Regular","Kedage-Regular","Kefa-Regular","KeralaRegular","KhSrokKhleang","KhalidArt-Bold","Khanhoa-Regular","KhmerOS","KhmerOSFasthand","KhmerOSFreehand","KhmerMN","KhmerOSMetalChrieng","KhmerOSMuol","KarnaphuliOMJ-Regular","KhmerSangamMN","KievitPro-Regular","Kinnari-Regular","Klee","Kiran-Regular","KodchiangUPC-Regular","Kokonor-Regular","KohinoorDevanagari-Regular","KohinoorBangla-Bold","KohinoorBangla-Semibold","Krungthep","KtavRegular","KufiExtendedOutline","KrutiAstro","Kumudam-Regular","KufiStandardGK","Kundli-Regular","KufiOutlineShaded","LCD","KundliEnglish","LETTERRS","Livingwell-Regular","LTETRamya","LT-TM-Barani","LKLUG-Regular","LT-TM-Lakshman","LTHYSZK","Laksaman-Regular","KohinoorTelugu-Regular","KarnaphuliMJ-Regular","LantingheiTC-Regular","LaoMN-Regular","LantingheiTC-Extralight","LantingheiSC-Regular","LaoSangamMN-Regular","LatinoElongatedLETPlain","LearningCurveDashedPro","Lapidary333-Bold","LearningCurvePro","Led-Italic","LetterOMatic-Regular","LeituraDisplaySwashes","Leelawadee","LibelSuit-Regular","LiHeiPro-Regular","LibianSC-Regular","LightSC-Regular","Likhan-Regular","LilyUPC-Regular","Limousine","Linowrite-Regular","LingoesUnicode","Logo3Mtt","Logo3Mv3tt","LithosPro-Regular","LohitBengali","LohitDevanagari","LohitGujarati-Regular","LohitTamil-Regular","LohitHindi-Regular","LunaBar","LohitPunjabi","Mandela","MarketPro-Regular","MatterOfFact-Regular","Maximo-Regular","MLIndulekhaHeavy","MLNILA01","MLNILA03","MLNILA02","MLNILA04","MLNILA05","MLNILA07","ML-TTAathira","ML-TTAnakha","MLTTAmbili","MLTTAnjali","MLTTAparna","ML-TTAshtamudi","MLTTAswathi","ML-TTAshtamudiExBold","MLNILA06","ML-TTAtchu","ML-TTAyilyam-Bold","MLTTBhavana","ML-TTBeckal-Bold","MLTTChandrika","MLTTChithira","MLTTChithiraHeavy","MLTTGauri","MLTTGauriHeavy","ML-TTGeethika","MLTTDevika","MLTTGopika","MLTTGuruvayur","MLTTIndulekha","MLTTIndulekhaHeavy","MLTTJaya","ML-TTJyothy","MLTTJyotsna","MLTTKala","MLTTKarthika","MLTTKanika","MLTTKaumudi","MLTTLeela","MLTTKeerthi","MLTTMadhaviExBold","MLTTMalavika","MLTTMangalaExBold","MLTTLeelaHeavy","MLTTNandini","MLTTNarmadaExBold","MLTTMayoori","MLTTNalini","MLTTNila-Regular","MLTTNanditha","MLTTOnam","MLTTPeriyar","ML-TTPooram","ML-TTPoornima","MLTTRevathi","MLTTRavivarma","MLTTSabari","MLTTRohini","MLTTSankara","MLTTSarada","MLTTSruthy","MLTTSugatha","ML-TTSuparna","MLTTSurya","MLTTSwathy-Bold","MLTTThakazhi","MLTTThiruvathira","MLTTThunchan","ML-TTVaisali","ML-TTTheyyam","MLTTVarsha","MLTTVeenaHeavy","MLTTKamini","MLTTVisakham","MLTTYashasri","MLTTVishu","ML1-TTAmbili","MLTTVinay","ML1-TTAswathi","ML1-TTIndulekha","MLB-TTAmbili","MLUPanini","MLB-TTIndulekha","MLB-TTAswathi","MMArrow","MMBinary","MLW-TTKarthika","MMCenturyNew-Regular","MMCenturyOld","MMCenturyNewRD-Regular","MMEtc-Regular","MMNegate","MMExtra-Regular","MMGreek","MMSchoolRD-Regular","MMTextBook-Regular","MMTextBook-Bold","MMVariable","MMVariable2","MMVariableA","MMRelation-Regular","MMVariableB","MMVariableC","MMVariableD-Regular","MMVariableF-Regular","MMaArrow","MMaBinarySS","MMaCenturyKSS","MMaArrowSS","MMaEtcSS","MMaFermat","MMaExtra","MMaEtc","MMaExtraSS","MMaGreek","MMaGreekS","MMaGreekSS","MMaNegate","MMaNegateSS","MMaPascal","MMaRelation","MMaRelationSS","MMaTextBook","MMaVariableSS","MMaVariable","MMaVariable2","MMaVariableASS","MMaVariable2SS","MMaVariableB","MMaVariableA","MMaBinary","MMaGauss","MMaCenturyKS-Regular","MMaVariableBSS","MMaVariableD","MMaVariableDSS","MMaVariableF","MSReference1","MMaVariableC","MMaVariableCSS","MTExtraTiger","MTExtra","MSReferenceSpecialty","MYingHei-Regular","Mael-Regular","MaestroStd","MaidenOrange","MaestroPercussion","MalayalamMN-Regular","Manorly-Regular","Mangal","Mallige-Regular","MapSymbols-Regular","MapInfoCartographic","Marion-Regular","Marlett","MarquisetteBTN-Regular","MarquisetteBTN-Lined","Mathilde-Regular","Medlin-Regular","MayencePremium","MalayalamSangamMN","Meera","MelodBold","Microdot-Regular","MicrosoftTaiLe","Himalaya","NewTaiLue","MesquiteStd-Regular","MicrosoftYiBaiti","MicrosoftUighur","Miama-Regular","Minisystem-Regular","MingLiU-HKSCS-ExtB","Miriam","MiriamTransparent","MishafiGold","Ml-Regular","ModernNo.20","ModenaPrinted","MongolianBaiti","MonaLisaSolidITCtt","MonotypeSorts","MonotypeKoufi","Monotype.com","MoonFlower-Bold","MoolBoran-Regular","MotoyaLMaru-Regular","MotoyaL-Cedar","Mshtakan-Regular","Muna-Regular","Mshtakan-BoldOblique","MyanmarMN","MyriadArabic","MyriadHebrew-Regular","Mycalc","Mytho-Regular","MyanmarSangamMN-Bold","NaturalBorn","NBPInformaFiveSix","NBPInformaFiveThree","NORMAL","Nadeem","Nasalization","NewtonPhoneticABBYY","NewRenexSpecialGraphics","NiagaraEngraved-Regular","NiagaraSolid","NinaRegular","NixieOne","NixieOne-Regular","Notethis","NoFlash","NotoKufiArabic-Regular","Noteworthy-Bold","Notram-Regular","NotoSansCuneiform-Regular","NovemberStd-Regular","NovaCut-Regular","NuevaStd-BoldCondensedItalic","TTSarala","OliveOil-Regular","OpenClassic-Regular","OldAntic-Bold","OneDance-Bold","OpineHeavy","Onyx-Regular","OpusStd","OpusChords","OpusFiguredBassExtras","OpusFunctionSymbols","OpusFiguredBass","OpusJapaneseChords","OpusMetronome","OpusNoteNames","OpusPercussion","OpusOrnaments","OpusPlainChords","Origin-Regular","OpusSpecial","OpusRomanChords","OratorStd-Medium","OratorStdSlanted","OriyaMN","Osaka","OriyaSangamMN-Bold","OskiDakelh-Regular","PFFuelPro-Regular","POLI-Regular","PN-TTAmar","PMingLiU-ExtB","Pretext-Regular","PTBoldBroken","PTBoldDusky","PTBoldArch","PRCelticNarrow","PTBoldMirror","PTSeparatedBalloon","PTSimpleBoldRuled","Papyrus","Paralucent-Bold","ParisianBT","Parvathi-Bold","ParkAvenueBT-Regular","Parvathi-Thin","Parvathi-Medium","Penultimate-Regular","Pegypta-Regular","Penultimate-Light","Pegasus-Regular","Penultimate-LightItal","Phatdiem","PhetsarathOT","PhnomPenhOT","PhotoshopLarge","PickwickStd-Regular","Pigiarniq-Regular","PilGi-Regular","Phrastic-Medium","PondFreeBoss","PondAllRounder-Regular","PondFreeMe","PondFreeZoo","PortagoITC-TT","PoplarStd-Black","PowerClear","Pothana","Pothana2000","PowerGreen","PowerRedandBlueIntl","Praveen","PowerRedandBlue","Prema-Regular","PowerRedAndGreen","Proxy1","Pujeeta-Regular","PujeetaNarrow","PrisonerSF-Regular","PujeetaSpecial","Pythagoras-Regular","QuickTypeII","Qaskin-Black","QuickTypeII-Pi","QTOptimum-Regular","Quinhon-Regular","Quiver-Italic","Quangngai-Regular","Radagund-Regular","QumpellkaNo12","Ruma","Raanana-Regular","Rachana-Regular","Rachana","Radha-Regular","Rachgia-Regular","Raavi","Raghindi-Regular","RaghuMalayalam-Regular","RazerHeader-Light","RaisinDesSables","Rakesly-Bold","RakeslyUl","Reginet-Regular","RealVirtue","Rakesly-Regular","Reswysokr-Regular","Rekha","RomanT","Ribbon-Bold","Rod-Regular","RomanD-Regular","RomanC","RupeeForadian","RowdyHeavy","RodTransparent","RomanS","SAF-Regular","Rumburak-Regular","SAPGUI-Icons","SC","SDTTSurekh","SFMoviePoster","Radha-Bold","SerifB","SHELMAN-Regular","SAPIcons","SAPDings","Span-Regular","SWAstro-Regular","STXinwei-Regular","SWED-Regular","SWComp-Regular","SWGothe-Regular","SolidworksGDT","STHupo-Regular","SWGDT-Regular","SWGrekc","SWIsop3-Regular","SWGamekeysMT","SWIsot1-Regular","SWIsop2-Regular","SWIsot2-Regular","SWIsot3-Regular","SWIsop1-Regular","SWGreks-Regular","SWItal","SWITCIT","SWLink-Regular","SWItalt","SWMap-Regular","SWMeteo-Regular","SWMusic","SWRomnd-Regular","SWRomnc-Regular","SWMacro","SWScrpc-Regular","SWRomnt-Regular","SWSimp-Regular","TrajanPro-Regular","SWTxt-Regular","SabrinaStd","SaiEmbed-Regular","SaiMeera-Regular","SaiVrishin-Regular","Saab-Regular","SaiSai-Regular","SakkalMajalla","SaiIndira-Regular","SaintAndrewdesKiwis","Salina-Regular","SamsungImagination-Regular","Sana-Regular","Salilam-Regular","Sanpya-Regular","Sanskrit","Samathwa","Sasfont","Sathu-Regular","SeagullAPL-Regular","SceptreStd","SchoolHousePrintedA","SanskritNew","Selena-Regular","SherwoodStd-Regular","SegoeMarker","ShreeKan0853","Shruti","ShreeTelugu0900-Regular","Signboard-Regular","ShreeDevanagari714-Regular","ShreeMal0502","ShonarBangla","Silom-Regular","SimHei","SimpleBoldJutOut","SimpleOutlinePat","Simplex-Regular","SimplifiedArabic","SimplifiedArabicFixed","SilentReaction","SinhalaMN-Bold","SimpleIndust-Outline","SinhalaSangamMN-Regular","SixCaps-Regular","SketchBlock","SiyamRupaliANSI","SiyamRupali","SketchMatch","SketchRockwell","Skinny-Regular","SmallFonts","SmartyPantsBTN","Smooth","Sniglet-Regular","Socket-Regular","Snowdrift-Regular","Smokum-Regular","SmartGothic-Regular","Splash-Regular","Sosa-Regular","Steamer-Regular","StMarieThin","Staccato222BT","StandardSymbolsL","StencilStd","StephenScript","SteppesTT","SpaceBoldBT","Storybook-Regular","SubwayRegular","SunExtA","SutonnyMJ-Regular","Syastro-Regular","SutonnyOMJ-Regular","SymbolMT","Symap-Regular","TAB","Symusic","Suruma-Regular","TACBarathi","Symeteo-Regular","TAC-Kabilar","TAC-Kambar","SynchroLET-Regular","TACValluvar","TAM","TAMShree800","TAMKavi","TAMElango","TAMILFIX","TAMLKamban","TAMILLATIN","TAU-Kabilar","TAUBarathi","TAU-Valluvar","TITUSCyberbitBasic","TLArabic-Regular","TLPashto","TAU-Kambar","TL-TTHemalatha","TAU-Kaveri-Regular","Trial-Regular","TSCu","TallBoyWest","TURK-Regular","TLUrdu-Regular","TM-TTValluvar","TMBW-TTValluvar","Tamburo-Regular","TamilMN","TamilAiswarya","TeamViewer10-Regular","TeamViewer11-Regular","TamilSangamMN","TeamViewer-Regular","TeamViewer13-Regular","TeamViewer7-Regular","TeamViewer12-Regular","TeX","TechnicLite-Regular","TeenStd-Regular","Technical","TeleMarines","TektonPro","TerminatorRealNFI","TeluguMN","TeluguSangamMN","TeamViewer9-Regular","TeraSpecial","TextilePiEF","Thanhoa-Regular","ThoolikaUnicode-Regular","ThrowMyHandsUpInTheAir","Tiger","TigerExpert","TibetanMachineUni","Timeless-Regular","TraditionalArabic","Tristan-Regular","TtsNote","Tubular-Regular","Toledo-Regular","Tuyenduc-Regular","TypeEmbellishmentsOneLET-Plain","Txt-Regular","Tunga","TypoUprightBT-Regular","Ultra","Umpush-Regular","UnDinaru-Regular","UnGraphic-Regular","UnPilgi-Regular","UnitedStates-Regular","Uqammaq-Regular","UnknownCallerBTN-SC","UnGungseo-Regular","Untitled1","UrduNaskhAsiatype","Urvasi-Regular","UrduTypesetting","Uttara-Regular","Utsaah-Regular","VISCII-Sample-Font","VANAVIL-Avvaiyar","VN-NTime","VNIGreece","VNICambodia","VNILao","VNI-Russia","VNI-Algerian","VNI-Allegie","VNI-Ariston","VNI-Auchon","VNI-Avo","VNI-Awchon","VNI-Aztek","VNI-Baybuom","VNI-Bandit","VNI-Aptima","VNI-Bazooka","VNI-Book","VNI-BostonBlack","VNI-Briquet","VNI-Bragga","VNI-Broad","VNI-Butlong","VNI-Centur","VNI-Commerce","VNI-Coronet","VNI-DOS","VNI-DesdemonaU","VNI-Colonna","VNI-Diudang","VNI-Dom","VNI-Duff","VNI-Dur","VNI-Fato","VNIFranko","VNI-Fillmore","VNI-Free","VNIHLThuphap","VNI-Harrington","VNI-GlabXb","VNIHobo","VNIHeather","VNIJuni","VNI-Jamai","VNI-InternetMail","VNI-Linus","VNI-Korin","VNILithos","VNI-Kun","VNI-Maria","VNIMeli","VNI-Lydi","VNI-Netbut","VNI-Murray","VNI-Nhatban","VNIPresent","VNI-Park","VNI-OngDoHL","VNIRevue","VNI-Slogan","VNI-ShellaL","VNI-Souvir","VNIStageCoach","VNI-Standout","VNI-Thanhcao","VNI-Thufap1","VNI-Thufap3","VNIStencilU","VNI-Thufap2","VNI-Stylus","VNI-Tekon","VNI-Thufapfan","VNI-Truck","VNI-Tubes","VNI-Top","VNI-Vari","VNI-Univer","VNI-Vivi","VNI-WINSampleFont","VNIWideLatin","VNI-Viettay","VNIWhimsy","VNIYahoo","VNI-Zap","VTCTribal-Regular","Vagabond-Regular","Valluvan","Valken-Regular","Vani","Vikatan-Regular","Vemana2000","Vinhan-Regular","VisitorTT2-Bold","VisualGeezUnicode","VisualGeezUnicodeAgazian","VisitorTT1-BRK","VisualGeezUnicodeTitle","Vonique64","VoyagerNBP-Regular","WPArabicSihafa","Vrinda-Regular","WPArabicScriptSihafa","WPCyrillicA","WPCyrillicB","WPIconicSymbolsA","WPHebrewDavid","WPJapanese","WPPhonetic","WST","WPTypographicSymbols","WPIconicSymbolsB","WSTCzec","WSTEngl","WSTFren","WST_Germ","WSTSpan","WSTItal","WSTSwed","WalterTurncoat","Waree-Regular","Warsaw-Regular","WawatiSC-Regular","WebServeroff","WawatiTC-Regular","Webdunia-Regular","WeibeiSCBold","Waseem-Regular","Wellfleet-Regular","Wingdings","WeibeiTC-Regular","WestwoodLET-Regular","WolfInTheCity-Light","XingkaiSC-Regular","XpressSF-Regular","YD2002","Webdings","XpressHeavySF","YuantiSC-Regular","YesevaOne","XeroxMalfunctionBRK","YuppySC-Regular","Xirod-Regular","YuantiTC-Regular","YuppyTC","Zar11F8","Z@R123A","Zar120A","Z@R13D5","Zar16EB","Zar16FD","R170E","Zar1720","Zar1751","Zar1774","Zar1816Regular","Zar183A","Z@R1828","Zar184B","Zar185D-Regular","Zar1762","R277-Regular","Zar195D","ZapfElliptBT","Zirkon-Regular","Zuzumbo-Regular","akaDora-Regular","AeStd","Amaze-Regular","Athletic-Regular","AtMostSphere-Regular","Bart","Balthazar","Bimini","Cafeta-Regular","Boot","ChalkboardSE-Regular","Classic10","Cmbsy10","CochinStd-BoldItalic","Cmbsy7","Cmbsy6","Cmbsy9","Cmdunh10","CMIT10","CMSSLT10","CMSSBI8","CMTCsc10","CMSS12Italic","CMTeX8","CMTI7","Cnefont","Cnefonts","CMTeX9","Copy08","EuclidEx10","DBLDWRSW","Euex9-Regular","Euex7-Regular","EurEur","EuclidBold6","EuclidBold5","EuclidBold7","EuclidBold8","EuclidMath10","EuclidBold9","EuclidBold10","EuclidMath5","EuclidMathRegular","Eurbd10","EuclidMath8","EurB7","EurB6","EurB8","EurostileBold","EurB9","EurM5","EurM6","EurM8","EurM7","EurM9","EuclidSans-Bold","EuclidMedium","Eusm7","EuclidMath5-Regular","EuclidMediumItalic","FakeFont2","FoxInTheSnow","Gargi-Regular","Hooge04","ISO08","JPN","Kawoszeh","Koruri-Regular","Lcircle10","Kroeger04","Lcirclew10","Header08","LCMSS8-Regular","LCMSSIB8","Line10","Lettau06","Linew10","ModStMary10","Mryad","OldDreadfulNo7-BT","Ori1Uni","PumpDemiBoldLet","Roland-Regular","MixtapeMike","Schoenecker10","SignsNormal","Spinwerad-Regular","SmartWatch-Regular","Standard07","Terk-Regular","Uni05","Trendy-Regular","Type07","Vivian-Regular","W01-Regular","WGL4","Western"]}},542:function(e){"use strict";e.exports=JSON.parse('{"username":"0001","user name":"0001","user-name":"0001","user_id":"0001","userid":"0001","user-id":"0001","login name":"0001","loginname":"0001","login_id":"0001","loginid":"0001","login-user":"0001","login_user":"0001","account name":"0001","accountname":"0001","account_name":"0001","account id":"0006","accountid":"0006","account_id":"0001","uname":"0001","member id":"0120","password":"0002","pass word":"0002","pass-word":"0002","passwd":"0002","pwd":"0002","p/w":"0002","pword":"0002","pass_code":"0002","passcode":"0002","password_input":"0002","pass input":"0002","password field":"0002","passwordfield":"0002","user password":"0002","userpassword":"0002","account password":"0002","accountpassword":"0002","login password":"0002","loginpassword":"0002","secret password":"0002","otp":"0003","one time password":"0003","one-time password":"0003","onetime password":"0003","one time pin":"0003","one-time pin":"0003","otp code":"0003","otpcode":"0003","verification code":"0128","verify code":"0003","verificationcode":"0003","auth code":"0003","authcode":"0003","authentication code":"0003","2fa code":"0003","two factor code":"0003","two-factor code":"0003","2fa":"0003","security code":"0128","pin code":"0003","amount":"0004","payment amount":"0004","transfer amount":"0004","total amount":"0004","money":"0004","value":"0004","sum":"0004","price":"0004","fee":"0004","charge":"0004","cost":"0004","amount due":"0004","balance":"0004","payable amount":"0004","bill amount":"0004","transaction amount":"0004","withdrawal amount":"0004","deposit amount":"0004","loan amount":"0004","subtotal":"0004","new payee":"0005","add payee":"0005","payee name":"0005","payee":"0005","recipient name":"0005","recipient":"0005","beneficiary":"0005","beneficiary name":"0005","payee account":"0005","payee_account":"0005","recipient account":"0005","recipient_account":"0005","payee id":"0005","payeeid":"0005","beneficiary id":"0005","beneficiaryid":"0005","new recipient":"0005","add beneficiary":"0005","payee details":"0005","recipient details":"0005","account number":"0006","acc number":"0006","acct number":"0006","account no":"0006","account #":"0006","account#":"0006","accountnum":"0006","accountnum#":"0006","bank account":"0006","bankaccount":"0006","bank account number":"0006","bankaccountnumber":"0006","accountnumbr":"0006","acct no":"0006","acct#":"0006","acctno":"0006","account identifier":"0006","account code":"0006","change password":"0007","update password":"0007","reset password":"0007","new password":"0007","set password":"0007","create password":"0007","re-enter password":"0007","confirm password":"0007","modify password":"0007","password change":"0007","password reset":"0007","password update":"0007","change passcode":"0007","update passcode":"0007","reset passcode":"0007","change pwd":"0007","update pwd":"0007","reset pwd":"0007","change secret":"0007","update secret":"0007","change phone":"0008","update phone":"0008","new phone":"0008","phone update":"0008","change number":"0008","phone number change":"0008","update number":"0008","modify phone":"0008","modify number":"0008","phone change":"0008","phone edit":"0008","edit phone":"0008","replace phone":"0008","replace number":"0008","new phone number":"0008","add phone number":"0008","set phone number":"0008","set phone":"0008","phone update request":"0008","update mobile":"0008","change email":"0009","update email":"0009","new email":"0009","email update":"0009","change e-mail":"0009","e-mail update":"0009","email address change":"0009","update email address":"0009","change email address":"0009","modify email":"0009","modify e-mail":"0009","edit email":"0009","email change":"0009","replace email":"0009","new email address":"0009","set email":"0009","update mail":"0009","change mail":"0009","mail update":"0009","email modifications":"0009","change address":"0010","update address":"0010","new address":"0010","address update":"0010","edit address":"0010","modify address":"0010","replace address":"0010","address change":"0010","address edit":"0010","address modification":"0010","set address":"0010","update location":"0010","change location":"0010","new location":"0010","location update":"0010","shipping address change":"0010","billing address change":"0010","change street":"0010","update street":"0010","change home address":"0010","login":"0011","sign in":"0011","sign-in":"0011","signin":"0011","submit login":"0011","login button":"0011","log in":"0011","log-in":"0011","login submit":"0011","submit credentials":"0011","sign in button":"0011","sign in submit":"0011","connect":"0011","access account":"0011","enter":"0011","enter site":"0011","authenticate":"0011","proceed login":"0011","start session":"0011","begin session":"0011","first name":"0100","firstname":"0100","given name":"0100","your first name":"0100","first-name":"0100","forename":"0100","christian name":"0100","personal name":"0100","first":"0100","initial name":"0100","givenname":"0100","firstn":"0100","fname":"0100","first name field":"0100","customer first name":"0100","applicant first name":"0100","user first name":"0100","first name input":"0100","first name enter":"0100","first-name-entry":"0100","last name":"0101","lastname":"0101","surname":"0101","family name":"0101","last-name":"0101","l-name":"0101","lname":"0101","second name":"0102","lastn":"0101","last name field":"0101","customer last name":"0101","applicant last name":"0101","user last name":"0101","surname field":"0101","familyname":"0101","last name input":"0101","last name enter":"0101","surname input":"0101","surname enter":"0101","surname entry":"0101","middle name":"0102","middlename":"0102","middle-name":"0102","middle initial":"0102","middleinitial":"0102","m name":"0102","mname":"0102","middle":"0102","middle n.":"0102","middle name field":"0102","middle name input":"0102","middle name enter":"0102","middle name entry":"0102","mi":"0102","middle initial field":"0102","middleinitial field":"0102","middle initial input":"0102","middle initial entry":"0102","m.i.":"0102","email":"0103","email address":"0103","e-mail":"0103","mail address":"0103","your email":"0103","your e-mail":"0103","email id":"0103","emailid":"0103","email_id":"0103","mail id":"0103","mailid":"0103","mail_id":"0103","emailaddress":"0103","email addr":"0103","email field":"0103","email input":"0103","email enter":"0103","email entry":"0103","emailaccount":"0103","email account":"0103","ssn":"0104","social security number":"0104","social security #":"0104","ssn number":"0104","soc sec number":"0104","social-sec-number":"0104","social security no":"0104","ss no":"0104","ss#":"0104","ss number":"0104","socsec":"0104","social security id":"0104","social security identifier":"0104","social security code":"0104","ssnid":"0104","ssn id":"0104","ssn field":"0104","ssn input":"0104","ssn enter":"0104","ssn entry":"0104","phone number":"0105","phone":"0105","mobile number":"0105","mobile":"0105","telephone":"0105","cell number":"0105","cellphone":"0105","your phone":"0105","contact number":"0105","contact #":"0105","phone no":"0105","phone#":"0105","tel":"0105","tel number":"0105","telephone number":"0105","mobile phone":"0105","cell":"0105","cell phone":"0105","phone field":"0105","phone input":"0105","street address":"0106","address":"0106","home address":"0106","residential address":"0106","mailing address":"0106","your address":"0106","street":"0106","street address line":"0106","streetaddr":"0106","address line":"0106","street address field":"0106","street address input":"0106","address field":"0106","address input":"0106","address enter":"0106","address entry":"0106","house address":"0106","road address":"0106","streetname":"0106","street line":"0106","dob":"0107","date of birth":"0107","birth date":"0107","full dob":"0107","your birthdate":"0107","birthdate":"0107","birth date full":"0107","full date of birth":"0107","dob full":"0107","dob field":"0107","dob input":"0107","dob enter":"0107","birthdate field":"0107","birthday":"0107","birthday full":"0107","birthday date":"0107","date-of-birth":"0107","birth date input":"0107","birth date entry":"0107","dob complete":"0107","dob day":"0108","birth day":"0108","day of birth":"0108","birth day of month":"0108","day of month":"0108","dob-day":"0108","birth day field":"0108","birth day input":"0108","day field":"0108","day input":"0108","dob day field":"0108","birth day entry":"0108","day birth":"0108","day dob":"0108","birth-day":"0108","dayofbirth":"0108","day-of-birth":"0108","date day":"0108","day value":"0108","dob d":"0108","dob month":"0109","birth month":"0109","month of birth":"0109","month born":"0109","dob-month":"0109","birth month field":"0109","month field":"0109","month input":"0109","month entry":"0109","dob mth":"0109","dob m":"0109","month dob":"0109","birth-month":"0109","monthofbirth":"0109","month-of-birth":"0109","month value":"0109","month dob field":"0109","month dob input":"0109","birth mth":"0109","dob month value":"0109","dob year":"0110","birth year":"0110","year of birth":"0110","year born":"0110","dob-year":"0110","birth year field":"0110","year field":"0110","year input":"0110","year entry":"0110","dob yr":"0110","birth-year":"0110","yearofbirth":"0110","year-of-birth":"0110","yr of birth":"0110","dob y":"0110","birthyear":"0110","year value":"0110","dob year field":"0110","year dob":"0110","dob yyyy":"0110","annual income":"0111","income":"0111","yearly income":"0111","salary":"0111","earnings":"0111","yearly salary":"0111","annual salary":"0111","monthly income":"0111","income per year":"0111","yearly earnings":"0111","income yearly":"0111","total income":"0111","gross income":"0111","net income":"0111","income amount":"0111","income field":"0111","income input":"0111","salary amount":"0111","salary field":"0111","salary input":"0111","zip code":"0112","postal code":"0112","zipcode":"0112","zip":"0112","post code":"0112","zip-code":"0112","zip number":"0112","zip no":"0112","postal":"0112","postal no":"0112","postal number":"0112","postalcode":"0112","post code number":"0112","zip field":"0112","zip input":"0112","zip entry":"0112","postcode field":"0112","postal code field":"0112","zip_digit":"0112","zipcode field":"0112","city":"0113","town":"0113","city name":"0113","town name":"0113","your city":"0113","municipality":"0113","city/town":"0113","citytown":"0113","city or town":"0113","locality":"0113","village":"0113","hometown":"0113","city field":"0113","city input":"0113","city entry":"0113","city value":"0113","town field":"0113","town input":"0113","cityname":"0113","city location":"0113","state":"0114","province":"0114","territory":"0114","region":"0114","your state":"0114","state/region":"0114","state name":"0114","province name":"0114","province/state":"0114","county":"0114","state field":"0114","state input":"0114","state entry":"0114","region field":"0114","region input":"0114","regional":"0114","state value":"0114","state id":"0114","statecode":"0114","statecode field":"0114","country":"0115","nation":"0115","country name":"0115","your country":"0115","country/region":"0115","nationality":"0115","nation name":"0115","country field":"0115","country input":"0115","country entry":"0115","country code":"0115","countrycode":"0115","country id":"0115","country identifier":"0115","country of residence":"0115","residing country":"0115","country value":"0115","countryname":"0115","home country":"0115","birth country":"0115","address line 1":"0116","street line 1":"0116","address1":"0116","street address 1":"0116","address first line":"0116","addr line 1":"0116","address line1":"0116","streetline1":"0116","addressl1":"0116","street addr 1":"0116","line1 address":"0116","address primary":"0116","primary address":"0116","address_part1":"0116","address part 1":"0116","house number":"0116","house no":"0116","block":"0116","building number":"0116","building no":"0116","address line 2":"0117","street line 2":"0117","address2":"0117","street address 2":"0117","address second line":"0117","addr line 2":"0117","address line2":"0117","streetline2":"0117","addressl2":"0117","street addr 2":"0117","line2 address":"0117","secondary address":"0117","secondary addr":"0117","address_part2":"0117","address part 2":"0117","apartment":"0117","apt number":"0117","suite":"0117","unit":"0117","floor":"0117","submit application":"0118","application submit":"0118","apply button":"0118","submit form":"0118","send application":"0118","apply now":"0118","application button":"0118","submit app":"0118","apply":"0118","submit application button":"0118","application submit button":"0118","send form":"0118","submit request":"0118","send request":"0118","proceed":"0118","continue application":"0118","submit":"0118","continue":"0118","next":"0118","finish application":"0118","iban":"0119","international bank account number":"0119","iban number":"0119","iban no":"0119","bank iban":"0119","iban code":"0119","iban field":"0119","iban input":"0119","iban entry":"0119","iban#":"0119","account iban":"0119","account_iban":"0119","iban id":"0119","iban identifier":"0119","iban value":"0119","iban digits":"0119","iban account":"0119","iban acct":"0119","acct iban":"0119","iban code number":"0119","membership id":"0120","membership number":"0120","member number":"0120","membership no":"0120","member no":"0120","membership#":"0120","member#":"0120","membershipid":"0120","memberid":"0120","member identifier":"0120","membership identifier":"0120","membership code":"0120","membership code number":"0120","membership account":"0120","account membership":"0120","membership field":"0120","member field":"0120","membership input":"0120","member input":"0120","mother name":"0121","mother\'s name":"0121","mom name":"0121","mom\'s name":"0121","maternal name":"0121","mothername":"0121","momname":"0121","mother full name":"0121","mother fullname":"0121","mums name":"0121","mother field":"0121","mother input":"0121","mother entry":"0121","mom field":"0121","mom input":"0121","mother\'s full name":"0121","maternal fullname":"0121","mothername field":"0121","mother first name":"0121","mother last name":"0121","routing number":"0122","bank routing number":"0122","routing no":"0122","routing #":"0122","routing code":"0122","bank routing code":"0122","routingnum":"0122","routingnum#":"0122","routing number field":"0122","routing field":"0122","routing input":"0122","routing entry":"0122","aba number":"0122","aba routing":"0122","aba code":"0122","aba routing number":"0122","aba routing no":"0122","transit number":"0122","bank transit number":"0122","transit code":"0122","sort code":"0123","bank sort code":"0123","sortcode":"0123","sort-code":"0123","sort code number":"0123","bank sort code number":"0123","sort code field":"0123","sort code input":"0123","sort code entry":"0123","sort no":"0123","sort#":"0123","bank sort#":"0123","bank sort no":"0123","sort identifier":"0123","bank code":"0123","bank sort identifier":"0123","bank code number":"0123","bank sort":"0123","clearing code":"0123","sort digits":"0123","passport number":"0124","passport no":"0124","passport id":"0124","passport #":"0124","passportnum":"0124","passport#":"0124","passport identifier":"0124","passport code":"0124","passport field":"0124","passport input":"0124","passport entry":"0124","passport document number":"0124","passportdocument":"0124","passport doc no":"0124","passport doc#":"0124","passport serial":"0124","passport serial number":"0124","passport num field":"0124","travel document number":"0124","passport digits":"0124","driving licence number":"0125","driver\'s license number":"0125","driver licence number":"0125","dl number":"0125","drivers license":"0125","driving license":"0125","licence number":"0125","driver license no":"0125","driver license #":"0125","driverlicense":"0125","driving licence no":"0125","dl no":"0125","license number":"0125","driving licence id":"0125","driver id":"0125","driver\'s licence id":"0125","driving permit number":"0125","driving licence field":"0125","dl field":"0125","dl input":"0125","business name":"0126","company name":"0126","organization name":"0126","business":"0126","company":"0126","organization":"0126","enterprise name":"0126","enterprise":"0126","corporate name":"0126","corporate":"0126","businessname":"0126","companyname":"0126","company title":"0126","firm name":"0126","firm":"0126","business title":"0126","business field":"0126","company field":"0126","organization field":"0126","company input":"0126","card number":"0127","credit card number":"0127","debit card number":"0127","card no":"0127","card #":"0127","cardnum":"0127","card#":"0127","card digits":"0127","card id":"0127","card identifier":"0127","cc number":"0127","cc#":"0127","creditcard":"0127","debitcard":"0127","card number field":"0127","card input":"0127","card entry":"0127","payment card number":"0127","card account number":"0127","card acct number":"0127","cvv":"0128","cvc":"0128","card security code":"0128","card cvv":"0128","card cvc":"0128","cvv2":"0128","cvv code":"0128","cvc code":"0128","card code":"0128","card verification value":"0128","card verification code":"0128","card verification":"0128","security number":"0128","card security number":"0128","cvv field":"0128","cvv input":"0128","cvv entry":"0128","cvc2":"0128","card expiration":"0129","expiry date":"0129","expiration date":"0129","card expiry":"0129","expiration":"0129","exp date":"0129","exp":"0129","card exp":"0129","card expiration date":"0129","card expiry date":"0129","expiry":"0129","cardexp":"0129","card exp date":"0129","expdate":"0129","expiration field":"0129","expiry field":"0129","expiration input":"0129","expiry input":"0129","expiration entry":"0129","exp date field":"0129","employer name":"0130","company you work for":"0130","workplace":"0130","work name":"0130","employer":"0130","employername":"0130","company employer":"0130","work employer":"0130","organization employer":"0130","employer field":"0130","employer input":"0130","employer entry":"0130","job employer":"0130","employer company":"0130","employer organization":"0130","employer details":"0130","employer info":"0130","employer id":"0130","employer title":"0130","employer company name":"0130","security question 1":"0131","security q1":"0131","security question one":"0131","security question first":"0131","first security question":"0131","securityquestion1":"0131","securityquestionone":"0131","sec q1":"0131","sec question 1":"0131","sq1":"0131","security qn1":"0131","sec ques 1":"0131","security question field 1":"0131","security question input 1":"0131","security question 1 field":"0131","question 1":"0131","security quest 1":"0131","personal question 1":"0131","secret question 1":"0131","challenge question 1":"0131","security question 2":"0132","security q2":"0132","security question two":"0132","security question second":"0132","second security question":"0132","securityquestion2":"0132","securityquestiontwo":"0132","sec q2":"0132","sec question 2":"0132","sq2":"0132","security qn2":"0132","sec ques 2":"0132","security question field 2":"0132","security question input 2":"0132","security question 2 field":"0132","question 2":"0132","security quest 2":"0132","personal question 2":"0132","secret question 2":"0132","challenge question 2":"0132"}')},727:function(e){"use strict";e.exports=JSON.parse('{"attributes":["name","id","placeholder","aria-label","data-label","aria-describedby","title","autocomplete","data-placeholder","data-hint","aria-placeholder","aria-labelledby","formcontrolname","role","data-type","data-field","data-name","inputmode","data-test-id","data-value","data-format"]}')},837:function(e){e.exports={serif:["adobe jenson","adobe text","albertus","aldus","alexandria","algerian","american typewriter","antiqua","arno","aster","aurora","baskerville","bell","bembo","bembo schoolbook","benguiat","berkeley old style","bernhard modern","bodoni","book antiqua","bookman","bordeaux roman","californian fb","calisto","capitals","cambria","cartier","caslon","caslon antique","catull","centaur","century old style","century schoolbook","new century schoolbook","chaparral","charis sil","cheltenham","clearface","cochin","colonna","computer modern","concrete roman","constantia","cooper black","corona","dejavu fonts","ecotype","elephant","espy serif","excelsior","fairfield","ff scala","footlight","freeserif","friz quadrata","garamond","gentium","georgia","gloucester","goudy old style","goudy schoolbook","goudy pro font","granjon","heather","hercules","high tower text","hiroshige","hoefler text","humana serif","imprint","ionic no. 5","janson","jenson","joanna","korinna","kursivschrift","legacy serif","lexicon","liberation fonts","linux libertine","literaturnaya","lucida","melior","memphis","miller","minion","didone","mona lisa","mrs eaves","ms serif","new york","nimbus roman","nps rawlinson roadway","ocr a extended","palatino","perpetua","plantin","plantin schoolbook","playbill","poor richard","rawlinson roadway","renault","requiem","roman","rotis serif","sabon","seagull","sistina","souvenir","stix","stone informal","stone serif","sylfaen","times new roman","times","trajan","trinité","trump mediaeval","utopia","vale type","bitstream vera","versailles","wanted","weiss","wide latin","windsor","xits","apex","archer","athens","city","cholla slab","clarendon","courier","egyptienne","guardian egyptian","lexia","museo slab","rockwell","nilland","skeleton antique","tower","allegro","amiri","athelas","belwe","bookerly","bulmer","caledonia","constructium","copperplate Gothic","dejaVu serif","didot","droid serif","emerson","galliard","iowan old style","itc lubalin graph","ibm plex","ibm plex serif","junicode","literata","lucida bright","rotis","serifa","source serif pro","theano","zilla slab","bitstream charter","roboto slab","university of california old style","berkeley old style","candida","doves","hightower","liberation sans","lucida grande","vera sans","vercetti regular","computer modern sans","rotis ii sans","sherbrooke","tilson","triplex"],"sans-serif":["abadi","agency fb","akzidenz grotesk","aptifer","arial","arial unicode ms","avant garde","avenir","bank gothic","barmeno","bauhaus","bell centennial","bell gothic","benguiat gothic","berlin sans","beteckna","brandon grotesque","cabin","cafeteria","calibri","century gothic","charcoal","chicago","clearface gothic","clearview","co headline","co text","compacta","corbel","ff dax","dotum","droid","dyslexie","ecofont","eras","espy sans","nu sans","eurocrat","eurostile","ff meta","flama","formata","freesans","franklin gothic","frutiger","futura","geneva","gill sans","gill sans schoolbook","gotham","handel gothic","denmark","haettenschweiler","hei","helvetica","helvetica neue","swiss 721","highway gothic","hiroshige sans","hobo","impact","industria","interstate","johnston","kabel","lato","legacy sans","lexia readable","meiryo","microgramma","motorway","ms sans serif","museo sans","myriad","neutraface","neuzeit s","news gothic","nimbus sans l","nina","optima","parisine","pricedown","prima sans","pt sans","rail alphabet","revue","roboto","rotis sans","ff scala sans","segoe","skia","souvenir gothic","stone sans","syntax","tahoma","template gothic","tiresias","trade gothic","transport alphabet","trebuchet ms","trump gothic","tw cen","twentieth century","ubuntu font family","univers","zurich","verdana","virtue","acumin","akzidenz-grotesk","amplitude","andalé sans","antique olive","archivo","austria","itc avant garde","itc avant garde gothic","averta","bahnschrift","barlow","bobcaygeon","breeze sans","cantarell","caractères","cera Pro","cisco sans","adobe clean","clear sans","comic neue","dejaVu sans","din 1451","dosis","drogowskaz","droid sans","dubai","e-ukraine","fira sans","folio","gerstner programm","grand slang","harmonyos sans","ibm plex sans","inter","ge inspira","karrik","klavika","libre franklin","linux biolinum","fs me","ff meta","montserrat","national trust","nokia pure","noto sans","nunito sans","open sans","overpass","oxygen","poppins","proxima nova","radis sans","raleway","Selawik","semplicità","seravek","oneplus","snv","source sans pro","sweden sans","thesis sans","transport","tratex","unica","universalis","vag rounded","whitney","aphont","ff clan","gilroy","greycliff","nobel"],monospace:["andale mono","anonymous","consolas","courierhp","courier new","courierps","fontcraft courier","everson mono","fedra mono","fixed","fixedsys","fixedsys excelsior","inconsolata","hyperfont","letter gothic","magnetic ink character recognition","menlo","miriam fixed","monaco","monofur","monospace","ms gothic","ms mincho","nimbus mono l","ocr-a","ocr-b","orator","ormaxx","pragmatapro","prestige elite","profont","proggy programming fonts","small fonts","sydnie","terminal","tex gyre cursor","um typewriter","william monospace","balloon","brush script","dragonwick","choc","dom casual","mistral","papyrus","tempus sans","amazone","ams euler","apple chancery","aristocrat","bickley script","civitype","codex","edwardian script","forte","french script","kuenstler script","monotype corsiva","old english text mt","palace script","park avenue","scriptina","shelley volante","vivaldi","vladimir script","zapf chancery","zapfino","andy","ashley script","chalkboard","comic sans","cezanne","fontoon","irregularis","jefferson","kristen","lucida handwriting","rage italic","rufscript","scribble","soupbone","tekton","alecko","cinderella","cupola","curlz","magnificat","script","american text","cloister black","fraktur","goudy text","old english text","wedding text","aegyptus","aharoni","aisha","amienne","batak script","chandas","hanacaraka","japanese gothic typeface","jomolhari","kochi font","lontara script","maiola","minchō","mona font","nassim","nastaliq navees","neacademia","perpetua greek","simsun","skolar","skolar devanagari","sundanese unicode","sutturah","tai le valentinium","tengwar","tibetan machine uni","tunga","wadalab","apple symbols","bookshelf symbol 7","braille","commercial pi","corel","erler dingbats","hm phonetic","mathematical pi","morse code","opensymbol","richstyle","symbol","symbolps","wingdings","wingdings 2","wingdings 3","webdings","zapf dingbats","abracadabra","ad lib","allegro","andreas","arnold böcklin","astur","balloon pop outlaw black","banco","beat","braggadocio","broadway","ellington","exablock","exocet","fig script","gigi","harlow solid","harrington","horizon","jim crow","jokerman","juice","lo-type","magneto","megadeth","neuland","peignot","ravie","san francisco","showcard gothic","snap","stencil","umbra","westminster","willow","bagel","lithos","aldhabi","andalus","angsana new","angsanaupc","aparajita","arabic typesetting","arial black","arial narrow","arial rounded mt bold","baskerville old face","batang","batangche","bauhaus 93","bell mt","berlin sans fb","berlin sans fb demi","bernard mt condensed","blackadder itc","bodoni mt","bodoni mt black","bodoni mt condensed","bodoni mt poster compressed","bookman old style","bradley hand itc","britannic bold","browallia new","browalliaupc","brush script mt","buxton sketch","calibri light","calisto mt","cambria math","candara","castellar","century","chiller","colonna mt","comic sans ms","copperplate gothic bold","copperplate gothic light","cordia new","cordiaupc","curlz mt","daunpenh","david","dfkai-sb","dilleniaupc","dokchampa","dotumche","ebrima","edwardian script itc","engravers mt","eras bold itc","eras demi itc","eras light itc","eras medium itc","estrangelo edessa","eucrosiaupc","euphemia","fangsong","felix titling","footlight mt light","franklin gothic book","franklin gothic demi","franklin gothic demi cond","franklin gothic heavy","franklin gothic medium","franklin gothic medium cond","frankruehl","freesiaupc","freestyle script","french script mt","gabriola","gadugi","gautami","gill sans mt","gill sans mt condensed","gill sans mt ext condensed bold","gill sans ultra bold","gill sans ultra bold condensed","gisha","gloucester mt extra condensed","goudy stout","gulim","gulimche","gungsuh","gungsuhche","harlow solid italic","imprint mt shadow","informal roman","irisupc","iskoola pota","jasmineupc","javanese text","juice itc","kaiti","kalinga","kartika","khmer ui","kodchiangupc","kokila","kristen itc","kunstler script","lao ui","latha","leelawadee","leelawadee ui","leelawadee ui semilight","levenim mt","lilyupc","lucida bright","lucida calligraphy","lucida console","lucida fax","lucida sans","lucida sans typewriter","lucida sans unicode","maiandra gd","malgun gothic","mangal","marlett","matura mt script capitals","meiryo ui","microsoft himalaya","microsoft jhenghei","microsoft jhenghei light","microsoft jhenghei ui","microsoft jhenghei ui light","microsoft new tai lue","microsoft phagspa","microsoft sans serif","microsoft tai le","microsoft uighur","microsoft yahei","microsoft yahei light","microsoft yahei ui","microsoft yahei ui light","microsoft yi baiti","mingliu","mingliu-extb","mingliu_hkscs","mingliu_hkscs-extb","miriam","modern","modern no. 20","mongolian baiti","moolboran","ms outlook","ms pgothic","ms pmincho","ms reference sans serif","ms reference specialty","ms ui gothic","mt extra","mv boli","myanmar text","narkisim","niagara engraved","niagara solid","nirmala ui","nirmala ui semilight","nsimsun","nyala","onyx","palace script mt","palatino linotype","parchment","perpetua titling mt","plantagenet cherokee","pmingliu","pmingliu-extb","pristina","raavi","rockwell condensed","rockwell extra bold","rod","sakkal majalla","script mt bold","segoe marker","segoe print","segoe script","segoe ui","segoe ui black","segoe ui emoji","segoe ui light","segoe ui semibold","segoe ui semilight","segoe ui symbol","shonar bangla","shruti","simhei","simplified arabic","simplified arabic fixed","simsun-extb","sitka banner","sitka display","sitka heading","sitka small","sitka subheading","sitka text","sketchflow print","snap itc","system","tempus sans itc","traditional arabic","tw cen mt","tw cen mt condensed","tw cen mt condensed extra bold","urdu typesetting","utsaah","vani","vijaya","viner hand itc","vrinda","yu gothic","yu gothic light","yu mincho","yu mincho demibold","yu mincho light","bitstream vera sans mono","cascadia code","century schoolbook monospace","comic mono","computer modern mono","typewriter","curier","cousine","dejavu sans mono","droid sans mono","envy code r","fantasque sans","fira code","fira mono","freemono","gnu freefont","go mono","hack","ibm monochrome display adapter","ibm mda","ibm plex mono","input","iosevka","jetbrains mono","juliamono","liberation mono","nk57 monospace","noto mono","operator mono","overpass mono","oxygen mono","pt mono","recursive mono","roboto mono","sf mono","source code pro","spleen","terminus","ubuntu mono","victor mono","wumpus mono"],rat_fonts:["Teamviewer11","Teamviewer12","Teamviewer13","Teamviewer14","Teamviewer15"]}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.amdO={},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}n.r(r),n.d(r,{BioCatchClient:function(){return m},initializeBioCatchClient:function(){return MN}});var i=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},r=[{key:"isSupported",value:function(){return!("undefined"==typeof WeakMap||!window.Worker||!window.MutationObserver)}}],(n=null)&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(){if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}),!Object.defineProperty||!function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()){var e=Object.defineProperty;Object.defineProperty=function(t,n,r){if(e)try{return e(t,n,r)}catch(e){}if(t!==Object(t))throw TypeError("Object.defineProperty called on non-object");return Object.prototype.__defineGetter__&&"get"in r&&Object.prototype.__defineGetter__.call(t,n,r.get),Object.prototype.__defineSetter__&&"set"in r&&Object.prototype.__defineSetter__.call(t,n,r.set),"value"in r&&(t[n]=r.value),t}}var t,n,r,o;"function"!=typeof Object.defineProperties&&(Object.defineProperties=function(e,t){if(e!==Object(e))throw TypeError("Object.defineProperties called on non-object");var n;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&Object.defineProperty(e,n,t[n]);return e}),"function"!=typeof Object.create&&(Object.create=function(e,t){if("object"!==a(e))throw TypeError();function n(){}n.prototype=e;var r=new n;if(e&&(r.constructor=n),void 0!==t){if(t!==Object(t))throw TypeError();Object.defineProperties(r,t)}return r}),Object.keys||(Object.keys=function(e){if(e!==Object(e))throw TypeError("Object.keys called on non-object");var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,r;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),i=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),r=0;r<i;){var a;r in o&&(a=o[r],e.call(n,a,r,o)),r++}}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw TypeError("Bind must be called on a function");var t=[].slice,n=t.call(arguments,1),r=this,o=function(){return r.apply(this.prototype&&this instanceof i?this:e,n.concat(t.call(arguments)))};function i(){}return i.prototype=r.prototype,o.prototype=new i,o}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.from||(Array.from=(t=Object.prototype.toString,n=function(e){return"function"==typeof e||"[object Function]"===t.call(e)},r=Math.pow(2,53)-1,o=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),r)},function(e){var t=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var r,i=arguments.length>1?arguments[1]:void 0;if(void 0!==i){if(!n(i))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(r=arguments[2])}for(var a,u=o(t.length),s=n(this)?Object(new this(u)):new Array(u),c=0;c<u;)a=t[c],s[c]=i?void 0===r?i(a,c):i.call(r,a,c):a,c+=1;return s.length=u,s})),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],o=0;o<n;){var i=t[o];if(e.call(r,i,o,t))return i;o++}},configurable:!0,writable:!0}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;var o=0|t,i=Math.max(o>=0?o:r-Math.abs(o),0);function a(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}for(;i<r;){if(a(n[i],e))return!0;i++}return!1},configurable:!0,writable:!0}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var o=arguments[r];if(null!=o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])}return n},writable:!0,configurable:!0}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e}),String.prototype.includes||(String.prototype.includes=function(e,t){if(e instanceof RegExp)throw TypeError("first argument must not be a RegExp");return void 0===t&&(t=0),-1!==this.indexOf(e,t)}),self.MutationObserver=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e){if(!e.WeakMap){var t=Object.prototype.hasOwnProperty,n=function(e,t,n){Object.defineProperty?Object.defineProperty(e,t,{configurable:!0,writable:!0,value:n}):e[t]=n};e.WeakMap=function(){function e(e,n){if(!r(e)||!t.call(e,"_id"))throw new TypeError(n+" method called on incompatible receiver "+s(e))}function o(){return Math.random().toString().substring(2)}function i(){if(void 0===this)throw new TypeError("Constructor WeakMap requires 'new'");if(n(this,"_id","_WeakMap"+"_"+o()+"."+o()),arguments.length>0)throw new TypeError("WeakMap iterable is not supported")}return n(i.prototype,"delete",function(t){if(e(this,"delete"),!r(t))return!1;var n=t[this._id];return!(!n||n[0]!==t)&&(delete t[this._id],!0)}),n(i.prototype,"get",function(t){if(e(this,"get"),r(t)){var n=t[this._id];return n&&n[0]===t?n[1]:void 0}}),n(i.prototype,"has",function(t){if(e(this,"has"),!r(t))return!1;var n=t[this._id];return!(!n||n[0]!==t)}),n(i.prototype,"set",function(t,o){if(e(this,"set"),!r(t))throw new TypeError("Invalid value used as weak map key");var i=t[this._id];return i&&i[0]===t?(i[1]=o,this):(n(t,this._id,[t,o]),this)}),n(i,"_polyfill",!0),i}()}function r(e){return Object(e)===e}}function l(){!function(e){var t=Date.now?Date.now():+new Date,r=e.performance||{},o=[],i={},a=function(e,t){for(var n=0,r=o.length,i=[];n<r;n++)o[n][e]==t&&i.push(o[n]);return i},u=function(e,t){for(var n,r=o.length;r--;)(n=o[r]).entryType!=e||void 0!==t&&n.name!=t||o.splice(r,1)};r.now||(r.now=r.webkitNow||r.mozNow||r.msNow||function(){return(Date.now?Date.now():+new Date)-t}),r.mark||(r.mark=r.webkitMark||function(e){var t={name:e,entryType:"mark",startTime:r.now(),duration:0};o.push(t),i[e]=t}),r.measure||(r.measure=r.webkitMeasure||function(e,t,n){var a,u;if(void 0!==n&&void 0===i[n])throw new SyntaxError("Failed to execute 'measure' on 'Performance': The mark '"+n+"' does not exist.");if(void 0!==t&&void 0===i[t])throw new SyntaxError("Failed to execute 'measure' on 'Performance': The mark '"+t+"' does not exist.");a=i[t]?i[t].startTime:0,u=i[n]?i[n].startTime:r.now(),o.push({name:e,entryType:"measure",startTime:a,duration:u-a})}),r.getEntriesByType||(r.getEntriesByType=r.webkitGetEntriesByType||function(e){return a("entryType",e)}),r.getEntriesByName||(r.getEntriesByName=r.webkitGetEntriesByName||function(e){return a("name",e)}),r.clearMarks||(r.clearMarks=r.webkitClearMarks||function(e){u("mark",e)}),r.clearMeasures||(r.clearMeasures=r.webkitClearMeasures||function(e){u("measure",e)}),e.performance=r,"function"==typeof define&&n.amdO&&define("performance",[],function(){return r})}(self),u(),c("undefined"!=typeof self?self:"undefined"!=typeof window?window:this)}var f=3,p=4;function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function d(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}var m=function(){return e=function e(t,n,r,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(),i.isSupported()&&("cdApi"in window?t.autoStart(a):window.bcClient=this._createProxyInterface(t,o,r,n,a))},t=[{key:"_createProxyInterface",value:function(e,t,n,r,o){return{start:function(i,a,u,s){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:f,l=t.resolve(i,a,c),p=n.mapStartupConfigurations(l,s);r.attachCdApi(window),e.manualStart(p,l,o,void 0,u)},stop:function(){e.stop()},pause:function(){e.pause()},resume:function(){e.resume()},updateCustomerSessionID:function(t){e.updateCustomerSessionID(t)},changeContext:function(t){e.changeContext(t)},startNewSession:function(t){e.startNewSession(t)},setCoordinatesMasking:function(t){e.setCoordinatesMasking(t)},setCustomerBrand:function(t){e.setCustomerBrand(t)}}}}],t&&y(e.prototype,t),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function g(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}var _=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"attachCdApi",value:function(e){var t=this.createCdApi(e);e.cdApi=t,e.cdApi.listenToEvents()}},{key:"createCdApi",value:function(e){return{_eventListeners:{},onMessage:function(e){var t=this._eventListeners[e.data.type];if(t)for(var n=0;n<t.length;n++)t[n](e.data.event)},listenToEvents:function(){e.addEventListener?e.addEventListener("message",this.onMessage.bind(this),!0):e.attachEvent("onmessage",this.onMessage.bind(this))},registerSessionNumberChange:function(t){function n(e){var n=e.data;"SNumNotification"===n.type&&t(n.cdSNum)}e.addEventListener?e.addEventListener("message",n,!0):e.attachEvent("onmessage",n)},addEventListener:function(e,t){var n=this._eventListeners[e];n||(n=[],this._eventListeners[e]=n),n.push(t)},removeEventListener:function(e,t){var n=this._eventListeners[e];if(n)for(var r=0;r<n.length;r++)if(n[r]===t){n.splice(r,1);break}},changeContext:function(t){e.postMessage({type:"ContextChange",context:t},e.location.href)},startNewSession:function(t){e.postMessage({type:"ResetSession",resetReason:"customerApi",csid:t},e.location.href)},pauseCollection:function(){e.postMessage({type:"cdChangeState",toState:"pause"},e.location.href)},resumeCollection:function(){e.postMessage({type:"cdChangeState",toState:"run"},e.location.href)},sendMetadata:function(t){e.postMessage({type:"cdCustomerMetadata",data:t},e.location.href)},setCustomerSessionId:function(t){e.postMessage({type:"cdSetCsid",csid:t},e.location.href)},setCustomerBrand:function(t){e.postMessage({type:"cdSetCustomerBrand",brand:t},e.location.href)}}}}],t&&b(e.prototype,t),n&&b(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),w="resetSessionApiThreshold",S="dataWupDispatchRateSettings",E="logWupDispatchRateSettings",k="enableMinifiedLogUri",T="serverCommunicationSettings",P="collectKeyRegionValue",O="crossDomainsList",C="crossDomainsTimeout",j="isMutationObserver",R="isEnabled",M="collectCustomElementAttribute",B="customElementAttribute",A="enableFramesProcessing",x="enableSameSiteNoneAndSecureCookies",D="logAddress",I="isCaptureKeyEvents",L="locationEventsTimeoutMsec",F="heartBeatMessageInterval",N="isMotionAroundTouchEnabled",U="motionPaddingAroundTouchMSec",W="isMotionOnSessionStart",G="motionPaddingOnSessionStartMSec",H="isScrollCollect",Q="gyroEventsSamplePeriod",z="accelerometerEventsSamplePeriod",V="orientationEventsSamplePeriod",K="stateChangeEnabled",q="logLevel",J="enableCustomElementsProcessing",Y="keyEventsMaskSpecialChars",X="collectSelectElementBlurAndFocusEvents",Z="allowedUnmaskedValuesList",$="enableUnmaskedValues",ee="cdsNumExpirationTime",te="enableCoordinatesMasking",ne="maskElementsAttributes",re="parentElementSelector",oe="childElementWithCustomAttribute",ie="elementDataAttribute",ae="customButtons",ue="enableElementHierarchy",se="enableElementCategory",ce="agentType",le="collectionMode",fe="enableWupMessagesHashing",pe="enableStartupCustomerSessionId",he="offloadFontsCollectionEnabled",ye="mutationMaxChunkSize",de="mutationChunkDelayMs",me="passwordIdMaskingList",ve="elementUniqueIDConfiguration",be="fontCollection",ge="useLegacyZeroTimeout";function _e(e){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Se(r.key),r)}}function Se(e){var t=function(e,t){if("object"!=_e(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_e(t)?t:t+""}var Ee=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._customElementAttribute=t?t[B]:null,this._attributesToMask=t?t[ne]:null,this._keyEventsMaskSpecialChars=t?t[Y]:null},(t=[{key:"getCustomElementAttribute",value:function(){return this._customElementAttribute}},{key:"getAttributesToMask",value:function(){return this._attributesToMask}},{key:"getKeyEventsMaskSpecialChars",value:function(){return this._keyEventsMaskSpecialChars}}])&&we(e.prototype,t),n&&we(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pe(r.key),r)}}function Pe(e){var t=function(e,t){if("object"!=ke(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ke(t)?t:t+""}var Oe=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._parentElementSelector=t?t[re]:null,this._childElementWithCustomAttribute=t?t[oe]:null,this._elementDataAttribute=t?t[ie]:null,this._customButtons=t?t[ae]:null},(t=[{key:"getParentElementSelector",value:function(){return this._parentElementSelector}},{key:"getChildElementWithCustomAttribute",value:function(){return this._childElementWithCustomAttribute}},{key:"getElementDataAttribute",value:function(){return this._elementDataAttribute}},{key:"getCustomButtons",value:function(){return this._customButtons}}])&&Te(e.prototype,t),n&&Te(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),Ce="wupServerURL",je="logServerURL",Re="enableMinifiedLogUri",Me="enableFramesProcessing",Be="enableCustomElementsProcessing",Ae="enableSameSiteNoneAndSecureCookies",xe="serverURL",De="customerID",Ie="useUrlWorker",Le="workerUrl",Fe="clientSettings",Ne="collectionSettings",Ue="elementSettings",We="isWupServerURLProxy",Ge="customInputElementSettings",He="mode",Qe="enableStartupCustomerSessionId",ze="mutationMaxChunkSize",Ve="mutationChunkDelayMs",Ke="isFlutterApp",qe="enableMinifiedWupUri",Je="maxShadowDepth",Ye="iframeLoadingTimeout",Xe="elementCategories",Ze="elementAttributes",$e="enableMathDetect",et="enableBrowserDisplayDetect",tt="enableGraphCard",nt="useLegacyZeroTimeout",rt={PRIMARY:"primary",SECONDARY:"secondary"};Object.freeze(rt);var ot={FULL:"full",LEAN:"lean"};Object.freeze(ot);var it=10,at=20,ut=30,st=40;function ct(e){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ct(e)}function lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ht(r.key),r)}}function pt(e,t,n){return t&&ft(e.prototype,t),n&&ft(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ht(e){var t=function(e,t){if("object"!=ct(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ct(t)?t:t+""}var yt=function(){return pt(function e(){lt(this,e)},null,[{key:"setLogger",value:function(e){this._logger=e}},{key:"attachSessionIdentifiers",value:function(e){if(this._logger)return this._logger.attachSessionIdentifiers(e)}},{key:"isDebug",value:function(){if(this._logger)return this._logger.isDebug()}},{key:"error",value:function(e,t){this._logger&&this._logger.error(e,t||null)}},{key:"warn",value:function(e,t){this._logger&&this._logger.warn(e,t||null)}},{key:"trace",value:function(e){this._logger&&this._logger.trace(e)}},{key:"debug",value:function(e){this._logger&&this._logger.debug(e)}},{key:"info",value:function(e){this._logger&&this._logger.info(e)}}])}(),dt=function(){return pt(function e(t,n){lt(this,e),this._logBridge=t,this._logLevel=n||at,this._sessionIdentifiers={}},[{key:"attachSessionIdentifiers",value:function(e){Object.assign(this._sessionIdentifiers,e)}},{key:"trace",value:function(e){this._sendToLogBridge(e,it)}},{key:"debug",value:function(e){this._sendToLogBridge(e,it)}},{key:"info",value:function(e){this._sendToLogBridge(e,at)}},{key:"warn",value:function(e,t){this._sendToLogBridge(e,ut,t)}},{key:"error",value:function(e,t){this._sendToLogBridge(e,st,t)}},{key:"isDebug",value:function(){return this._logLevel===it}},{key:"updateLogConfig",value:function(e){this._logLevel=e.get(q)||this._logLevel,this._logBridge.setLogLevel(this._logLevel),this._logBridge.clearLogEntriesByLogLevel(this._logLevel)}},{key:"_sendToLogBridge",value:function(e,t,n){t>=this._logLevel&&(n&&n.stack&&(e+=" ;stack: ".concat(n.stack)),this._logBridge.log(e,t,this._sessionIdentifiers))}}])}();function mt(e){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mt(e)}function vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bt(r.key),r)}}function bt(e){var t=function(e,t){if("object"!=mt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=mt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mt(t)?t:t+""}var gt=function(){return e=function e(t){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._elementSettings=new Ee(null==t?void 0:t[Ue]),this._customInputElementSettings=new Oe(null==t?void 0:t[Ge]),this._agentType=this._validateAgentType(null==t||null===(n=t[He])||void 0===n?void 0:n.agentType),this._collectionMode=this._setAgentCollectionMode(null==t||null===(r=t[He])||void 0===r?void 0:r.collectionMode)},(t=[{key:"getElementSettings",value:function(){return this._elementSettings}},{key:"getCustomInputElementSettings",value:function(){return this._customInputElementSettings}},{key:"getAgentType",value:function(){return this._agentType}},{key:"getAgentMode",value:function(){return this._collectionMode}},{key:"_setAgentCollectionMode",value:function(e){return this._agentType===rt.PRIMARY?ot.FULL:this._validateAgentMode(e)}},{key:"_validateAgentType",value:function(e){if(Object.values(rt).includes(e))return e;var t=rt.PRIMARY;return void 0!==e&&yt.warn("Invalid agent type: ".concat(e,". Defaulting to ").concat(t," agent type.")),t}},{key:"_validateAgentMode",value:function(e){if(Object.values(ot).includes(e))return e;var t=ot.LEAN;return void 0!==e&&yt.warn("Invalid collection mode: ".concat(e,". Defaulting to ").concat(t," collection mode.")),t}}])&&vt(e.prototype,t),n&&vt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function _t(e){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_t(e)}function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,St(r.key),r)}}function St(e){var t=function(e,t){if("object"!=_t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_t(t)?t:t+""}var Et=function(){return e=function e(t,n,r,o,i,a,u,s,c,l,f,p,h,y,d,m,v,b,g,_,w,S,E,k,T,P,O,C){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._wupServerURL=t,this._logServerURL=n,this._enableFramesProcessing=r,this._enableCustomElementsProcessing=o,this._enableSameSiteNoneAndSecureCookies=i,this._useUrlWorker=a,this._workerUrl=u,this._isWupServerURLProxy=s,this._clientSettings=c,this._collectionSettings=l||new gt,this._enableStartupCustomerSessionId=f,this._mutationMaxChunkSize=p||0,this._mutationChunkDelayMs=h||100,this._passwordIdMaskingList=y,this._enableUnmaskedValues=d||!1,this._allowedUnmaskedValuesList=m||[],this._enableCoordinatesMasking=v||!1,this._isFlutterApp=b||!1,this._enableMinifiedWupUri=void 0===g||g,this._enableMinifiedLogUri=void 0!==_&&_,this._maxShadowDepth=w||0,this._iframeLoadingTimeout=S||5e3,this._elementCategories=E,this._elementAttributes=k,this._enableMathDetect=T,this._enableBrowserDisplayDetect=P,this._enableGraphCard=O,this._useLegacyZeroTimeout=C},(t=[{key:"getWupServerURL",value:function(){return this._wupServerURL}},{key:"getLogServerURL",value:function(){return this._logServerURL}},{key:"isMinifiedLogUriEnabled",value:function(){return this._enableMinifiedLogUri}},{key:"getEnableFramesProcessing",value:function(){return this._enableFramesProcessing}},{key:"getEnableCustomElementsProcessing",value:function(){return this._enableCustomElementsProcessing}},{key:"getEnableSameSiteNoneAndSecureCookies",value:function(){return this._enableSameSiteNoneAndSecureCookies}},{key:"getUseUrlWorker",value:function(){return this._useUrlWorker}},{key:"getWorkerUrl",value:function(){return this._workerUrl}},{key:"getIsWupServerURLProxy",value:function(){return this._isWupServerURLProxy}},{key:"getClientSettings",value:function(){return this._clientSettings}},{key:"getCollectionSettings",value:function(){return this._collectionSettings}},{key:"getEnableStartupCustomerSessionId",value:function(){return this._enableStartupCustomerSessionId}},{key:"getMutationMaxChunkSize",value:function(){return this._mutationMaxChunkSize}},{key:"getMutationChunkDelayMs",value:function(){return this._mutationChunkDelayMs}},{key:"getPasswordIdMaskingList",value:function(){return this._passwordIdMaskingList}},{key:"isUnmaskedValuesEnabled",value:function(){return this._enableUnmaskedValues}},{key:"getAllowedUnmaskedValuesList",value:function(){return this._allowedUnmaskedValuesList}},{key:"isCoordinatesMaskingEnabled",value:function(){return this._enableCoordinatesMasking}},{key:"isFlutterApp",value:function(){return this._isFlutterApp}},{key:"isMinifiedWupUriEnabled",value:function(){return this._enableMinifiedWupUri}},{key:"getMaxShadowDepth",value:function(){return this._maxShadowDepth}},{key:"getIframeLoadingTimeout",value:function(){return this._iframeLoadingTimeout}},{key:"getElementCategories",value:function(){return this._elementCategories}},{key:"getElementAttributes",value:function(){return this._elementAttributes}},{key:"isMathDetectEnabled",value:function(){return this._enableMathDetect}},{key:"isBrowserDisplayDetectEnabled",value:function(){return this._enableBrowserDisplayDetect}},{key:"isGraphCardEnabled",value:function(){return this._enableGraphCard}},{key:"getUseLegacyZeroTimeout",value:function(){return this._useLegacyZeroTimeout}}])&&wt(e.prototype,t),n&&wt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function kt(e){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kt(e)}function Tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pt(r.key),r)}}function Pt(e){var t=function(e,t){if("object"!=kt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=kt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kt(t)?t:t+""}var Ot=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"mapStartupConfigurations",value:function(e,t){return new Et(e,t[je],t[Me],t[Be],t[Ae],t[Ie]||!1,t[Le]||"",t[We]||!1,t[Fe],new gt(t[Ne]),t[Qe],t[ze]||0,t[Ve]||100,t[me],t[$]||!1,t[Z]||[],t[te]||!1,t[Ke]||!1,void 0===t[qe]||t[qe],void 0!==t[Re]&&t[Re],t[Je]||0,t[Ye]||5e3,t[Xe],t[Ze],void 0===t[$e]||t[$e],void 0===t[et]||t[et],void 0===t[tt]||t[tt],void 0===t[nt]||t[nt])}}])&&Tt(e.prototype,t),n&&Tt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),Ct="api/v4/wup",jt="client/v3.1/web/wup",Rt=[Ct,jt,"wup"];function Mt(e){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mt(e)}function Bt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return At(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?At(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Dt(r.key),r)}}function Dt(e){var t=function(e,t){if("object"!=Mt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Mt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Mt(t)?t:t+""}var It=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"resolve",value:function(e,t,n){var r=new URL(e),o=r.pathname,i=Rt,a="";n===p?a="/".concat(Ct):n===f&&(a="/".concat(jt));var u,s=o,c=Bt(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=o.indexOf("/"+l);if(-1!==h){s=o.substring(0,h);break}}}catch(e){c.e(e)}finally{c.f()}return r.pathname=s.replace(/\/+$/,"")+a,t?r.searchParams.set("cid",t):r.searchParams.has("cid"),r.toString()}}])&&xt(e.prototype,t),n&&xt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Lt(e){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lt(e)}function Ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nt(r.key),r)}}function Nt(e){var t=function(e,t){if("object"!=Lt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Lt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lt(t)?t:t+""}var Ut,Wt=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},n=[{key:"create",value:function(){if(self.XMLHttpRequest&&Object.prototype.hasOwnProperty.call(XMLHttpRequest.prototype,"withCredentials"))return new XMLHttpRequest;if(self.XDomainRequest)return new XDomainRequest;if(!self.XMLHttpRequest)throw new Error("There is no supported http request object");return new XMLHttpRequest}}],(t=null)&&Ft(e.prototype,t),n&&Ft(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),Gt=60,Ht=1,Qt=44640,zt=1,Vt=0,Kt=-1;function qt(e){return qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qt(e)}function Jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xt(r.key),r)}}function Yt(e,t,n){return(t=Xt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xt(e){var t=function(e,t){if("object"!=qt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qt(t)?t:t+""}var Zt,$t,en,tn=(Zt=null,function(e,t,n){var r=function(){return t};if(t.toString().indexOf("[native code]")>-1)n(r());else{var o=0,i=function(){if(Zt.contentWindow){for(var t=Zt.contentWindow,a=e.split("."),u=t,s=0;s<a.length;s++)u=u[a[s]];n(u)}else o<45?(setTimeout(i,o),o++):n(r())};Zt||((Zt=document.createElement("IFRAME")).setAttribute("sandbox","allow-same-origin"),Zt.style.display="none",document.documentElement.appendChild(Zt)),i()}}),nn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"isUndefinedNull",value:function(e){return null==e||void 0===e}},{key:"isBoolean",value:function(e){return"boolean"==typeof e}},{key:"isNumber",value:function(e){return"number"==typeof e}},{key:"addEventListener",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.isPassiveSupported?e.addEventListener(t,n,{capture:r,passive:o,once:i}):e.addEventListener?e.addEventListener(t,n,r):e.attachEvent("on"+t,n)}},{key:"removeEventListener",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent("on"+t,n)}},{key:"hasProtocol",value:function(e){return e.toLowerCase().startsWith("http://")||e.toLowerCase().startsWith("https://")}},{key:"clearTextFromNumbers",value:function(e){return e?e.replace(/(\d)/g,"*"):""}},{key:"getDropDownListValues",value:function(e,t){for(var n=[],r=0;r<e.length;r++){var o=e.options[r].text||e.options[r].value||"";n.push(t.maskText(o,e.id))}return n}},{key:"getDocUrl",value:function(){var t=window.location;return t.protocol+"//"+t.hostname+(t.port?":"+t.port:"")+e.clearTextFromNumbers(t.pathname)}},{key:"getHash",value:function(e){for(var t=0,n=0,r=e.length;n<r;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}},{key:"getTruncatedHash",value:function(e,t){return e?this.murmurhash3(e).toString().substring(t):""}},{key:"getDigestMethod",value:function(e){return"SHA-256"===e&&window.crypto.subtle&&window.crypto.subtle.digest?window.crypto.subtle.digest.bind(crypto.subtle):null}},{key:"digest_sha256",value:function(t){var n=e.getDigestMethod("SHA-256"),r=(new TextEncoder).encode(t);return n?n("SHA-256",r).then(function(e){return Array.from(new Uint8Array(e)).map(function(e){return e.toString(16).padStart(2,"0")}).join("")}).catch(function(){return""}):new Promise(function(e){e("")})}},{key:"murmurhash3",value:function(e,t){var n,r,o,i,a=3&e.length,u=e.length-a;n=t;var s=3432918353,c=461845907;for(i=0;i<u;)o=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24,++i,n=27492+(65535&(r=5*(65535&(n=(n^=o=(65535&(o=(o=(65535&o)*s+(((o>>>16)*s&65535)<<16)&4294967295)<<15|o>>>17))*c+(((o>>>16)*c&65535)<<16)&4294967295)<<13|n>>>19))+((5*(n>>>16)&65535)<<16)&4294967295))+(((r>>>16)+58964&65535)<<16);switch(o=0,a){case 3:o^=(255&e.charCodeAt(i+2))<<16;break;case 2:o^=(255&e.charCodeAt(i+1))<<8;break;case 1:n^=o=(65535&(o=(o=(65535&(o^=255&e.charCodeAt(i)))*s+(((o>>>16)*s&65535)<<16)&4294967295)<<15|o>>>17))*c+(((o>>>16)*c&65535)<<16)&4294967295}return n^=e.length,n=2246822507*(65535&(n^=n>>>16))+((2246822507*(n>>>16)&65535)<<16)&4294967295,n=3266489909*(65535&(n^=n>>>13))+((3266489909*(n>>>16)&65535)<<16)&4294967295,(n^=n>>>16)>>>0}},{key:"generateUUID",value:function(){var t=e.dateNow();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)})}},{key:"convertToArrayByMap",value:function(e,t){for(var n=[null],r=0,o=e.length;r<o;r++)n[r+1]=t[e[r]];return n}},{key:"getPostUrl",value:function(e,t,n,r,o,i,a){var u=Wt.create();u instanceof self.XMLHttpRequest?(u.open(t,e,!0),void 0!==a&&(u.timeout=a),u.withCredentials=!1!==i,"POST"===t&&u.setRequestHeader("Content-Type","application/json; charset=utf-8"),u.onreadystatechange=function(){if(4===u.readyState){if(204===u.status)return;200===u.status?r&&r(u.responseText):o&&o(u.responseText)}},u.ontimeout=function(){o&&o("timeout",n)},u.send(n)):(u.onload=function(){r&&r(u.responseText)},u.onerror=function(){o&&o()},u.onprogress=function(){},u.ontimeout=function(){},u.open(t,e,!0),setTimeout(function(){u.send(n)},0))}},{key:"minutesToMilliseconds",value:function(e){return 60*e*1e3}},{key:"cutDecimalPointDigits",value:function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}}],(n=null)&&Jt(t.prototype,n),r&&Jt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();Ut=nn,Yt(nn,"scriptVersion","2.49.1.3466.50354bd"),Yt(nn,"isPassiveSupported",function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}()),Yt(nn,"dateNow",Date.now),Yt(nn,"setZeroTimeout",($t=[],en="Window_"+Ut.generateUUID(),Ut.addEventListener(window,"message",function(e){e.data===en&&(e.stopPropagation&&e.stopPropagation(),e.returnValue&&(e.returnValue=!1),e.cancelBubble&&(e.cancelBubble=!0),$t.shift()())},!0),function(e){$t.push(e),window.postMessage(en,self.location.href)})),Yt(nn,"asyncCall",function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=this;Ut.setZeroTimeout(function(){o.apply(e||window,n)})}),Yt(nn,"asyncTimeoutCall",function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=this;setTimeout(function(){o.apply(e||window,n)},0)}),Yt(nn,"StorageUtils",{counter:0,getAndUpdateEventSequenceNumber:function(){return this.counter++},deserialize:function(e){if("string"!=typeof e)return null;try{return JSON.parse(e)}catch(t){return e||null}},getFromLocalStorage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;try{var n=this.deserialize(window.localStorage.getItem(e));return n?n.exp&&Ut.dateNow()-n.time>n.exp?(this.removeFromLocalStorage(e),null):void 0===t||t?n.val:n:null}catch(e){return null}},saveToLocalStorage:function(e,t,n){var r={val:t};n&&(r.exp=n,r.time=Ut.dateNow());try{window.localStorage.setItem(e,JSON.stringify(r))}catch(e){return null}return r},removeFromLocalStorage:function(e){try{window.localStorage.removeItem(e)}catch(e){return null}},setExpirationInLocalStorage:function(e,t){var n=this.getFromLocalStorage(e);return""===n||null===n?zt:this.saveToLocalStorage(e,n,t)?Vt:Kt},getFromSessionStorage:function(e){try{var t=this.deserialize(window.sessionStorage.getItem(e));return t||null}catch(e){return null}},saveToSessionStorage:function(e,t){try{return t?(window.sessionStorage.setItem(e,JSON.stringify(t)),t):window.sessionStorage.removeItem(e)}catch(e){return null}},removeFromSessionStorage:function(e){try{window.sessionStorage.removeItem(e)}catch(e){return null}},getCookie:function(e){var t=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie);return t?decodeURIComponent(t[1]):""},setCookie:function(e,t,n,r){var o="";if(n){var i=new Date;i.setTime(i.getTime()+n),o="; expires="+i.toUTCString()}for(var a=0,u=location.hostname,s=u.split("."),c="",l=!1;a<=s.length-1&&!l;)"localhost"===(u=s.slice(-1-++a).join("."))?c="":""!==u&&(c="; domain=."+u),l=this.setCookieWithAttributes(e,t,o,c,r);return l||(c="",l=this.setCookieWithAttributes(e,t,o,c,r)),l},setCookieWithAttributes:function(e,t,n,r,o){var i=encodeURIComponent(e)+"="+encodeURIComponent(t)+n+r+"; path=/;";return document.cookie=o?i+" ".concat("SameSite=None;"," ").concat("Secure"):i,this.getCookie(e)===t},setExpirationInCookie:function(e,t){var n=this.getCookie(e);return""===n||null===n?zt:this.setCookie(e,n,t)?Vt:Kt},removeCookie:function(e){try{document.cookie=e+"=; Max-Age=0"}catch(e){return null}},validateBcId:function(e){return/^([0-9]{13,}-)?[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)?e:null}}),Yt(nn,"getNativeWindowFn",tn),Yt(nn,"JQueryUtils",{isJQueryAvailable:function(){return void 0!==window.jQuery},addEventListener:function(e,t,n){jQuery(e).on(t,n)},removeEventListener:function(e,t,n){jQuery(e).off(t,n)}}),Date.now?tn("Date.now",Date.now,function(e){nn.dateNow=e}):nn.dateNow=function(){return(new Date).getTime()};var rn="startNewSessionCommand",on="resumeSessionCommand",an="changeContextCommand",un="updateCsidCommand",sn="updatePsidCommand",cn="updateLogUrl",ln="sendDataCommand",fn="sendLogCommand",pn="updateBrandCommand",hn="stateUpdateFromStorage",yn="setAgentTypeCommand",dn="updateAgentIdCommand",mn="enableWupMessagesHashingCommand",vn="updateSDKState",bn={stopped:"stopped",starting:"starting",started:"started",paused:"paused",faulted:"faulted"},gn=n(512),_n=n.n(gn);function wn(){return _n()('/*! For license information please see worker.js.LICENSE.txt */\n!function(){var t={9:function(t,e,r){var n;t.exports=(n=r(21),function(t){var e=n,r=e.lib,i=r.WordArray,o=r.Hasher,s=e.algo,a=[],u=[];!function(){function e(e){for(var r=t.sqrt(e),n=2;n<=r;n++)if(!(e%n))return!1;return!0}function r(t){return 4294967296*(t-(0|t))|0}for(var n=2,i=0;i<64;)e(n)&&(i<8&&(a[i]=r(t.pow(n,.5))),u[i]=r(t.pow(n,1/3)),i++),n++}();var f=[],c=s.SHA256=o.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],c=r[5],l=r[6],h=r[7],d=0;d<64;d++){if(d<16)f[d]=0|t[e+d];else{var p=f[d-15],y=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,v=f[d-2],g=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;f[d]=y+f[d-7]+g+f[d-16]}var m=n&i^n&o^i&o,b=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),_=h+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&c^~a&l)+u[d]+f[d];h=l,l=c,c=a,a=s+_|0,s=o,o=i,i=n,n=_+(b+m)|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+a|0,r[5]=r[5]+c|0,r[6]=r[6]+l|0,r[7]=r[7]+h|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return r[i>>>5]|=128<<24-i%32,r[14+(i+64>>>9<<4)]=t.floor(n/4294967296),r[15+(i+64>>>9<<4)]=n,e.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=o._createHelper(c),e.HmacSHA256=o._createHmacHelper(c)}(Math),n.SHA256)},19:function(t,e,r){var n,i,o,s,a,u,f,c,l;t.exports=(l=r(21),r(9),r(25),i=(n=l).lib,o=i.Base,s=i.WordArray,a=n.algo,u=a.SHA256,f=a.HMAC,c=a.PBKDF2=o.extend({cfg:o.extend({keySize:4,hasher:u,iterations:25e4}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var r=this.cfg,n=f.create(r.hasher,t),i=s.create(),o=s.create([1]),a=i.words,u=o.words,c=r.keySize,l=r.iterations;a.length<c;){var h=n.update(e).finalize(o);n.reset();for(var d=h.words,p=d.length,y=h,v=1;v<l;v++){y=n.finalize(y),n.reset();for(var g=y.words,m=0;m<p;m++)d[m]^=g[m]}i.concat(h),u[0]++}return i.sigBytes=4*c,i}}),n.PBKDF2=function(t,e,r){return c.create(r).compute(t,e)},l.PBKDF2)},21:function(t,e,r){var n;t.exports=(n=n||function(t,e){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==r.g&&r.g.crypto&&(n=r.g.crypto),!n)try{n=r(477)}catch(t){}var i=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function t(){}return function(e){var r;return t.prototype=e,r=new t,t.prototype=null,r}}(),s={},a=s.lib={},u=a.Base={extend:function(t){var e=o(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},f=a.WordArray=u.extend({init:function(t,r){t=this.words=t||[],this.sigBytes=r!=e?r:4*t.length},toString:function(t){return(t||l).stringify(this)},concat:function(t){var e=this.words,r=t.words,n=this.sigBytes,i=t.sigBytes;if(this.clamp(),n%4)for(var o=0;o<i;o++){var s=r[o>>>2]>>>24-o%4*8&255;e[n+o>>>2]|=s<<24-(n+o)%4*8}else for(var a=0;a<i;a+=4)e[n+a>>>2]=r[a>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,r=this.sigBytes;e[r>>>2]&=4294967295<<32-r%4*8,e.length=t.ceil(r/4)},clone:function(){var t=u.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],r=0;r<t;r+=4)e.push(i());return new f.init(e,t)}}),c=s.enc={},l=c.Hex={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;i<r;i++){var o=e[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new f.init(r,e/2)}},h=c.Latin1={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;i<r;i++){var o=e[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new f.init(r,e)}},d=c.Utf8={stringify:function(t){try{return decodeURIComponent(escape(h.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return h.parse(unescape(encodeURIComponent(t)))}},p=a.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=d.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var r,n=this._data,i=n.words,o=n.sigBytes,s=this.blockSize,a=o/(4*s),u=(a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*s,c=t.min(4*u,o);if(u){for(var l=0;l<u;l+=s)this._doProcessBlock(i,l);r=i.splice(0,u),n.sigBytes-=c}return new f.init(r,c)},clone:function(){var t=u.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),y=(a.Hasher=p.extend({cfg:u.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,r){return new t.init(r).finalize(e)}},_createHmacHelper:function(t){return function(e,r){return new y.HMAC.init(t,r).finalize(e)}}}),s.algo={});return s}(Math),n)},25:function(t,e,r){var n,i,o,s;t.exports=(n=r(21),o=(i=n).lib.Base,s=i.enc.Utf8,void(i.algo.HMAC=o.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=s.parse(e));var r=t.blockSize,n=4*r;e.sigBytes>n&&(e=t.finalize(e)),e.clamp();for(var i=this._oKey=e.clone(),o=this._iKey=e.clone(),a=i.words,u=o.words,f=0;f<r;f++)a[f]^=1549556828,u[f]^=909522486;i.sigBytes=o.sigBytes=n,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,r=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(r))}})))},56:function(t,e,r){var n;t.exports=(n=r(21),function(){var t=n,e=t.lib,r=e.WordArray,i=e.Hasher,o=t.algo,s=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),a=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),c=r.create([0,1518500249,1859775393,2400959708,2840853838]),l=r.create([1352829926,1548603684,1836072691,2053994217,0]),h=o.RIPEMD160=i.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r=0;r<16;r++){var n=e+r,i=t[n];t[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o,h,b,_,w,S,k,E,x,B,C,R=this._hash.words,P=c.words,A=l.words,I=s.words,T=a.words,M=u.words,O=f.words;for(S=o=R[0],k=h=R[1],E=b=R[2],x=_=R[3],B=w=R[4],r=0;r<80;r+=1)C=o+t[e+I[r]]|0,C+=r<16?d(h,b,_)+P[0]:r<32?p(h,b,_)+P[1]:r<48?y(h,b,_)+P[2]:r<64?v(h,b,_)+P[3]:g(h,b,_)+P[4],C=(C=m(C|=0,M[r]))+w|0,o=w,w=_,_=m(b,10),b=h,h=C,C=S+t[e+T[r]]|0,C+=r<16?g(k,E,x)+A[0]:r<32?v(k,E,x)+A[1]:r<48?y(k,E,x)+A[2]:r<64?p(k,E,x)+A[3]:d(k,E,x)+A[4],C=(C=m(C|=0,O[r]))+B|0,S=B,B=x,x=m(E,10),E=k,k=C;C=R[1]+b+x|0,R[1]=R[2]+_+B|0,R[2]=R[3]+w+S|0,R[3]=R[4]+o+k|0,R[4]=R[0]+h+E|0,R[0]=C},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;e[n>>>5]|=128<<24-n%32,e[14+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(e.length+1),this._process();for(var i=this._hash,o=i.words,s=0;s<5;s++){var a=o[s];o[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return i},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});function d(t,e,r){return t^e^r}function p(t,e,r){return t&e|~t&r}function y(t,e,r){return(t|~e)^r}function v(t,e,r){return t&r|e&~r}function g(t,e,r){return t^(e|~r)}function m(t,e){return t<<e|t>>>32-e}t.RIPEMD160=i._createHelper(h),t.HmacRIPEMD160=i._createHmacHelper(h)}(Math),n.RIPEMD160)},73:function(t,e,r){var n;t.exports=(n=r(21),r(165),n.pad.AnsiX923={pad:function(t,e){var r=t.sigBytes,n=4*e,i=n-r%n,o=r+i-1;t.clamp(),t.words[o>>>2]|=i<<24-o%4*8,t.sigBytes+=i},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},n.pad.Ansix923)},124:function(t,e,r){var n;t.exports=(n=r(21),r(165),n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding)},128:function(t,e,r){var n;t.exports=(n=r(21),r(754),r(636),r(506),r(165),function(){var t=n,e=t.lib.BlockCipher,r=t.algo;const i=16,o=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],s=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var a={pbox:[],sbox:[]};function u(t,e){let r=e>>24&255,n=e>>16&255,i=e>>8&255,o=255&e,s=t.sbox[0][r]+t.sbox[1][n];return s^=t.sbox[2][i],s+=t.sbox[3][o],s}function f(t,e,r){let n,o=e,s=r;for(let e=0;e<i;++e)o^=t.pbox[e],s=u(t,o)^s,n=o,o=s,s=n;return n=o,o=s,s=n,s^=t.pbox[i],o^=t.pbox[i+1],{left:o,right:s}}function c(t,e,r){let n,o=e,s=r;for(let e=i+1;e>1;--e)o^=t.pbox[e],s=u(t,o)^s,n=o,o=s,s=n;return n=o,o=s,s=n,s^=t.pbox[1],o^=t.pbox[0],{left:o,right:s}}function l(t,e,r){for(let e=0;e<4;e++){t.sbox[e]=[];for(let r=0;r<256;r++)t.sbox[e][r]=s[e][r]}let n=0;for(let s=0;s<i+2;s++)t.pbox[s]=o[s]^e[n],n++,n>=r&&(n=0);let a=0,u=0,c=0;for(let e=0;e<i+2;e+=2)c=f(t,a,u),a=c.left,u=c.right,t.pbox[e]=a,t.pbox[e+1]=u;for(let e=0;e<4;e++)for(let r=0;r<256;r+=2)c=f(t,a,u),a=c.left,u=c.right,t.sbox[e][r]=a,t.sbox[e][r+1]=u;return!0}var h=r.Blowfish=e.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var t=this._keyPriorReset=this._key,e=t.words,r=t.sigBytes/4;l(a,e,r)}},encryptBlock:function(t,e){var r=f(a,t[e],t[e+1]);t[e]=r.left,t[e+1]=r.right},decryptBlock:function(t,e){var r=c(a,t[e],t[e+1]);t[e]=r.left,t[e+1]=r.right},blockSize:2,keySize:4,ivSize:2});t.Blowfish=e._createHelper(h)}(),n.Blowfish)},155:function(t,e,r){var n;t.exports=(n=r(21),r(165),n.pad.ZeroPadding={pad:function(t,e){var r=4*e;t.clamp(),t.sigBytes+=r-(t.sigBytes%r||r)},unpad:function(t){var e=t.words,r=t.sigBytes-1;for(r=t.sigBytes-1;r>=0;r--)if(e[r>>>2]>>>24-r%4*8&255){t.sigBytes=r+1;break}}},n.pad.ZeroPadding)},165:function(t,e,r){var n;t.exports=(n=r(21),r(506),void(n.lib.Cipher||function(t){var e=n,r=e.lib,i=r.Base,o=r.WordArray,s=r.BufferedBlockAlgorithm,a=e.enc,u=(a.Utf8,a.Base64),f=e.algo.EvpKDF,c=r.Cipher=s.extend({cfg:i.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,r){this.cfg=this.cfg.extend(r),this._xformMode=t,this._key=e,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?b:g}return function(e){return{encrypt:function(r,n,i){return t(n).encrypt(e,r,n,i)},decrypt:function(r,n,i){return t(n).decrypt(e,r,n,i)}}}}()}),l=(r.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),e.mode={}),h=r.BlockCipherMode=i.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),d=l.CBC=function(){var e=h.extend();function r(e,r,n){var i,o=this._iv;o?(i=o,this._iv=t):i=this._prevBlock;for(var s=0;s<n;s++)e[r+s]^=i[s]}return e.Encryptor=e.extend({processBlock:function(t,e){var n=this._cipher,i=n.blockSize;r.call(this,t,e,i),n.encryptBlock(t,e),this._prevBlock=t.slice(e,e+i)}}),e.Decryptor=e.extend({processBlock:function(t,e){var n=this._cipher,i=n.blockSize,o=t.slice(e,e+i);n.decryptBlock(t,e),r.call(this,t,e,i),this._prevBlock=o}}),e}(),p=(e.pad={}).Pkcs7={pad:function(t,e){for(var r=4*e,n=r-t.sigBytes%r,i=n<<24|n<<16|n<<8|n,s=[],a=0;a<n;a+=4)s.push(i);var u=o.create(s,n);t.concat(u)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},y=(r.BlockCipher=c.extend({cfg:c.cfg.extend({mode:d,padding:p}),reset:function(){var t;c.reset.call(this);var e=this.cfg,r=e.iv,n=e.mode;this._xformMode==this._ENC_XFORM_MODE?t=n.createEncryptor:(t=n.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==t?this._mode.init(this,r&&r.words):(this._mode=t.call(n,this,r&&r.words),this._mode.__creator=t)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t,e=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(e.pad(this._data,this.blockSize),t=this._process(!0)):(t=this._process(!0),e.unpad(t)),t},blockSize:4}),r.CipherParams=i.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}})),v=(e.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,r=t.salt;return(r?o.create([1398893684,1701076831]).concat(r).concat(e):e).toString(u)},parse:function(t){var e,r=u.parse(t),n=r.words;return 1398893684==n[0]&&1701076831==n[1]&&(e=o.create(n.slice(2,4)),n.splice(0,4),r.sigBytes-=16),y.create({ciphertext:r,salt:e})}},g=r.SerializableCipher=i.extend({cfg:i.extend({format:v}),encrypt:function(t,e,r,n){n=this.cfg.extend(n);var i=t.createEncryptor(r,n),o=i.finalize(e),s=i.cfg;return y.create({ciphertext:o,key:r,iv:s.iv,algorithm:t,mode:s.mode,padding:s.padding,blockSize:t.blockSize,formatter:n.format})},decrypt:function(t,e,r,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),t.createDecryptor(r,n).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),m=(e.kdf={}).OpenSSL={execute:function(t,e,r,n,i){if(n||(n=o.random(8)),i)s=f.create({keySize:e+r,hasher:i}).compute(t,n);else var s=f.create({keySize:e+r}).compute(t,n);var a=o.create(s.words.slice(e),4*r);return s.sigBytes=4*e,y.create({key:s,iv:a,salt:n})}},b=r.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:m}),encrypt:function(t,e,r,n){var i=(n=this.cfg.extend(n)).kdf.execute(r,t.keySize,t.ivSize,n.salt,n.hasher);n.iv=i.iv;var o=g.encrypt.call(this,t,e,i.key,n);return o.mixIn(i),o},decrypt:function(t,e,r,n){n=this.cfg.extend(n),e=this._parse(e,n.format);var i=n.kdf.execute(r,t.keySize,t.ivSize,e.salt,n.hasher);return n.iv=i.iv,g.decrypt.call(this,t,e,i.key,n)}})}()))},169:function(t,e,r){var n;t.exports=(n=r(21),r(165),n.mode.CFB=function(){var t=n.lib.BlockCipherMode.extend();function e(t,e,r,n){var i,o=this._iv;o?(i=o.slice(0),this._iv=void 0):i=this._prevBlock,n.encryptBlock(i,0);for(var s=0;s<r;s++)t[e+s]^=i[s]}return t.Encryptor=t.extend({processBlock:function(t,r){var n=this._cipher,i=n.blockSize;e.call(this,t,r,i,n),this._prevBlock=t.slice(r,r+i)}}),t.Decryptor=t.extend({processBlock:function(t,r){var n=this._cipher,i=n.blockSize,o=t.slice(r,r+i);e.call(this,t,r,i,n),this._prevBlock=o}}),t}(),n.mode.CFB)},193:function(t,e,r){var n;t.exports=(n=r(21),r(754),r(636),r(506),r(165),function(){var t=n,e=t.lib.StreamCipher,r=t.algo,i=r.RC4=e.extend({_doReset:function(){for(var t=this._key,e=t.words,r=t.sigBytes,n=this._S=[],i=0;i<256;i++)n[i]=i;i=0;for(var o=0;i<256;i++){var s=i%r,a=e[s>>>2]>>>24-s%4*8&255;o=(o+n[i]+a)%256;var u=n[i];n[i]=n[o],n[o]=u}this._i=this._j=0},_doProcessBlock:function(t,e){t[e]^=o.call(this)},keySize:8,ivSize:0});function o(){for(var t=this._S,e=this._i,r=this._j,n=0,i=0;i<4;i++){r=(r+t[e=(e+1)%256])%256;var o=t[e];t[e]=t[r],t[r]=o,n|=t[(t[e]+t[r])%256]<<24-8*i}return this._i=e,this._j=r,n}t.RC4=e._createHelper(i);var s=r.RC4Drop=i.extend({cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var t=this.cfg.drop;t>0;t--)o.call(this)}});t.RC4Drop=e._createHelper(s)}(),n.RC4)},240:function(t,e,r){var n;t.exports=(n=r(21),function(t){var e=n,r=e.lib,i=r.Base,o=r.WordArray,s=e.x64={};s.Word=i.extend({init:function(t,e){this.high=t,this.low=e}}),s.WordArray=i.extend({init:function(e,r){e=this.words=e||[],this.sigBytes=r!=t?r:8*e.length},toX32:function(){for(var t=this.words,e=t.length,r=[],n=0;n<e;n++){var i=t[n];r.push(i.high),r.push(i.low)}return o.create(r,this.sigBytes)},clone:function(){for(var t=i.clone.call(this),e=t.words=this.words.slice(0),r=e.length,n=0;n<r;n++)e[n]=e[n].clone();return t}})}(),n)},273:function(t,e,r){var n,i,o,s;function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}s=function(){return function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){if(o)return o(s,!0);var u=new Error("Cannot find module \'"+s+"\'");throw u.code="MODULE_NOT_FOUND",u}var f=r[s]={exports:{}};e[s][0].call(f.exports,function(t){var r=e[s][1][t];return i(r||t)},f,f.exports,t,e,r,n)}return r[s].exports}for(var o=void 0,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){r.encode=t("./encode").encode,r.decode=t("./decode").decode,r.Encoder=t("./encoder").Encoder,r.Decoder=t("./decoder").Decoder,r.createCodec=t("./ext").createCodec,r.codec=t("./codec").codec},{"./codec":10,"./decode":12,"./decoder":13,"./encode":15,"./encoder":16,"./ext":20}],2:[function(t,e,r){(function(t){function r(t){return t&&t.isBuffer&&t}e.exports=r(void 0!==t&&t)||r(this.Buffer)||r("undefined"!=typeof window&&window.Buffer)||this.Buffer}).call(this,t("buffer").Buffer)},{buffer:29}],3:[function(t,e,r){r.copy=function(t,e,r,n){var i;r||(r=0),n||0===n||(n=this.length),e||(e=0);var o=n-r;if(t===this&&r<e&&e<n)for(i=o-1;i>=0;i--)t[i+e]=this[i+r];else for(i=0;i<o;i++)t[i+e]=this[i+r];return o},r.toString=function(t,e,r){var n=this,i=0|e;r||(r=n.length);for(var o="",s=0;i<r;)(s=n[i++])<128?o+=String.fromCharCode(s):(192==(224&s)?s=(31&s)<<6|63&n[i++]:224==(240&s)?s=(15&s)<<12|(63&n[i++])<<6|63&n[i++]:240==(248&s)&&(s=(7&s)<<18|(63&n[i++])<<12|(63&n[i++])<<6|63&n[i++]),s>=65536?(s-=65536,o+=String.fromCharCode((s>>>10)+55296,56320+(1023&s))):o+=String.fromCharCode(s));return o},r.write=function(t,e){for(var r=this,n=e||(e|=0),i=t.length,o=0,s=0;s<i;)(o=t.charCodeAt(s++))<128?r[n++]=o:o<2048?(r[n++]=192|o>>>6,r[n++]=128|63&o):o<55296||o>57343?(r[n++]=224|o>>>12,r[n++]=128|o>>>6&63,r[n++]=128|63&o):(o=65536+(o-55296<<10|t.charCodeAt(s++)-56320),r[n++]=240|o>>>18,r[n++]=128|o>>>12&63,r[n++]=128|o>>>6&63,r[n++]=128|63&o);return n-e}},{}],4:[function(t,e,r){function n(t){return new Array(t)}var i=t("./bufferish");(r=e.exports=n(0)).alloc=n,r.concat=i.concat,r.from=function(t){if(!i.isBuffer(t)&&i.isView(t))t=i.Uint8Array.from(t);else if(i.isArrayBuffer(t))t=new Uint8Array(t);else{if("string"==typeof t)return i.from.call(r,t);if("number"==typeof t)throw new TypeError(\'"value" argument must not be a number\')}return Array.prototype.slice.call(t)}},{"./bufferish":8}],5:[function(t,e,r){function n(t){return new o(t)}var i=t("./bufferish"),o=i.global;(r=e.exports=i.hasBuffer?n(0):[]).alloc=i.hasBuffer&&o.alloc||n,r.concat=i.concat,r.from=function(t){if(!i.isBuffer(t)&&i.isView(t))t=i.Uint8Array.from(t);else if(i.isArrayBuffer(t))t=new Uint8Array(t);else{if("string"==typeof t)return i.from.call(r,t);if("number"==typeof t)throw new TypeError(\'"value" argument must not be a number\')}return o.from&&1!==o.from.length?o.from(t):new o(t)}},{"./bufferish":8}],6:[function(t,e,r){function n(t,e,r,n){var a=s.isBuffer(this),u=s.isBuffer(t);if(a&&u)return this.copy(t,e,r,n);if(f||a||u||!s.isView(this)||!s.isView(t))return o.copy.call(this,t,e,r,n);var c=r||null!=n?i.call(this,r,n):this;return t.set(c,e),c.length}function i(t,e){var r=this.slice||!f&&this.subarray;if(r)return r.call(this,t,e);var i=s.alloc.call(this,e-t);return n.call(this,i,0,t,e),i}var o=t("./buffer-lite");r.copy=n,r.slice=i,r.toString=function(t,e,r){return(!u&&s.isBuffer(this)?this.toString:o.toString).apply(this,arguments)},r.write=function(t){return function(){return(this[t]||o[t]).apply(this,arguments)}}("write");var s=t("./bufferish"),a=s.global,u=s.hasBuffer&&"TYPED_ARRAY_SUPPORT"in a,f=u&&!a.TYPED_ARRAY_SUPPORT},{"./buffer-lite":3,"./bufferish":8}],7:[function(t,e,r){function n(t){return new Uint8Array(t)}var i=t("./bufferish");(r=e.exports=i.hasArrayBuffer?n(0):[]).alloc=n,r.concat=i.concat,r.from=function(t){if(i.isView(t)){var e=t.byteOffset,n=t.byteLength;(t=t.buffer).byteLength!==n&&(t.slice?t=t.slice(e,e+n):(t=new Uint8Array(t)).byteLength!==n&&(t=Array.prototype.slice.call(t,e,e+n)))}else{if("string"==typeof t)return i.from.call(r,t);if("number"==typeof t)throw new TypeError(\'"value" argument must not be a number\')}return new Uint8Array(t)}},{"./bufferish":8}],8:[function(t,e,r){function n(t){return o(this).alloc(t)}function i(t){var e=3*t.length,r=n.call(this,e),i=g.write.call(r,t);return e!==i&&(r=g.slice.call(r,0,i)),r}function o(t){return h(t)?y:d(t)?v:l(t)?p:f?y:c?v:p}function s(){return!1}function a(t,e){return t="[object "+t+"]",function(r){return null!=r&&{}.toString.call(e?r[e]:r)===t}}var u=r.global=t("./buffer-global"),f=r.hasBuffer=u&&!!u.isBuffer,c=r.hasArrayBuffer="undefined"!=typeof ArrayBuffer,l=r.isArray=t("isarray");r.isArrayBuffer=c?function(t){return t instanceof ArrayBuffer||m(t)}:s;var h=r.isBuffer=f?u.isBuffer:s,d=r.isView=c?ArrayBuffer.isView||a("ArrayBuffer","buffer"):s;r.alloc=n,r.concat=function(t,e){e||(e=0,Array.prototype.forEach.call(t,function(t){e+=t.length}));var i=this!==r&&this||t[0],o=n.call(i,e),s=0;return Array.prototype.forEach.call(t,function(t){s+=g.copy.call(t,o,s)}),o},r.from=function(t){return"string"==typeof t?i.call(this,t):o(this).from(t)};var p=r.Array=t("./bufferish-array"),y=r.Buffer=t("./bufferish-buffer"),v=r.Uint8Array=t("./bufferish-uint8array"),g=r.prototype=t("./bufferish-proto"),m=a("ArrayBuffer")},{"./buffer-global":2,"./bufferish-array":4,"./bufferish-buffer":5,"./bufferish-proto":6,"./bufferish-uint8array":7,isarray:34}],9:[function(t,e,r){function n(t){return this instanceof n?(this.options=t,void this.init()):new n(t)}function i(t,e){return t&&e?function(){return t.apply(this,arguments),e.apply(this,arguments)}:t||e}function o(t){return new n(t)}var s=t("isarray");r.createCodec=o,r.install=function(t){for(var e in t)n.prototype[e]=i(n.prototype[e],t[e])},r.filter=function(t){return s(t)?function(t){function e(t,e){return e(t)}return t=t.slice(),function(r){return t.reduce(e,r)}}(t):t};var a=t("./bufferish");n.prototype.init=function(){var t=this.options;return t&&t.uint8array&&(this.bufferish=a.Uint8Array),this},r.preset=o({preset:!0})},{"./bufferish":8,isarray:34}],10:[function(t,e,r){t("./read-core"),t("./write-core"),r.codec={preset:t("./codec-base").preset}},{"./codec-base":9,"./read-core":22,"./write-core":25}],11:[function(t,e,r){function n(t){if(!(this instanceof n))return new n(t);if(t&&(this.options=t,t.codec)){var e=this.codec=t.codec;e.bufferish&&(this.bufferish=e.bufferish)}}r.DecodeBuffer=n;var i=t("./read-core").preset;t("./flex-buffer").FlexDecoder.mixin(n.prototype),n.prototype.codec=i,n.prototype.fetch=function(){return this.codec.decode(this)}},{"./flex-buffer":21,"./read-core":22}],12:[function(t,e,r){r.decode=function(t,e){var r=new n(e);return r.write(t),r.read()};var n=t("./decode-buffer").DecodeBuffer},{"./decode-buffer":11}],13:[function(t,e,r){function n(t){return this instanceof n?void o.call(this,t):new n(t)}r.Decoder=n;var i=t("event-lite"),o=t("./decode-buffer").DecodeBuffer;n.prototype=new o,i.mixin(n.prototype),n.prototype.decode=function(t){arguments.length&&this.write(t),this.flush()},n.prototype.push=function(t){this.emit("data",t)},n.prototype.end=function(t){this.decode(t),this.emit("end")}},{"./decode-buffer":11,"event-lite":31}],14:[function(t,e,r){function n(t){if(!(this instanceof n))return new n(t);if(t&&(this.options=t,t.codec)){var e=this.codec=t.codec;e.bufferish&&(this.bufferish=e.bufferish)}}r.EncodeBuffer=n;var i=t("./write-core").preset;t("./flex-buffer").FlexEncoder.mixin(n.prototype),n.prototype.codec=i,n.prototype.write=function(t){this.codec.encode(this,t)}},{"./flex-buffer":21,"./write-core":25}],15:[function(t,e,r){r.encode=function(t,e){var r=new n(e);return r.write(t),r.read()};var n=t("./encode-buffer").EncodeBuffer},{"./encode-buffer":14}],16:[function(t,e,r){function n(t){return this instanceof n?void o.call(this,t):new n(t)}r.Encoder=n;var i=t("event-lite"),o=t("./encode-buffer").EncodeBuffer;n.prototype=new o,i.mixin(n.prototype),n.prototype.encode=function(t){this.write(t),this.emit("data",this.read())},n.prototype.end=function(t){arguments.length&&this.encode(t),this.flush(),this.emit("end")}},{"./encode-buffer":14,"event-lite":31}],17:[function(t,e,r){r.ExtBuffer=function t(e,r){return this instanceof t?(this.buffer=n.from(e),void(this.type=r)):new t(e,r)};var n=t("./bufferish")},{"./bufferish":8}],18:[function(t,e,r){function n(e){return a||(a=t("./encode").encode),a(e)}function i(t){return t.valueOf()}function o(t){(t=RegExp.prototype.toString.call(t).split("/")).shift();var e=[t.pop()];return e.unshift(t.join("/")),e}function s(t){var e={};for(var r in l)e[r]=t[r];return e}r.setExtPackers=function(t){t.addExtPacker(14,Error,[s,n]),t.addExtPacker(1,EvalError,[s,n]),t.addExtPacker(2,RangeError,[s,n]),t.addExtPacker(3,ReferenceError,[s,n]),t.addExtPacker(4,SyntaxError,[s,n]),t.addExtPacker(5,TypeError,[s,n]),t.addExtPacker(6,URIError,[s,n]),t.addExtPacker(10,RegExp,[o,n]),t.addExtPacker(11,Boolean,[i,n]),t.addExtPacker(12,String,[i,n]),t.addExtPacker(13,Date,[Number,n]),t.addExtPacker(15,Number,[i,n]),"undefined"!=typeof Uint8Array&&(t.addExtPacker(17,Int8Array,c),t.addExtPacker(18,Uint8Array,c),t.addExtPacker(19,Int16Array,c),t.addExtPacker(20,Uint16Array,c),t.addExtPacker(21,Int32Array,c),t.addExtPacker(22,Uint32Array,c),t.addExtPacker(23,Float32Array,c),"undefined"!=typeof Float64Array&&t.addExtPacker(24,Float64Array,c),"undefined"!=typeof Uint8ClampedArray&&t.addExtPacker(25,Uint8ClampedArray,c),t.addExtPacker(26,ArrayBuffer,c),t.addExtPacker(29,DataView,c)),u.hasBuffer&&t.addExtPacker(27,f,u.from)};var a,u=t("./bufferish"),f=u.global,c=u.Uint8Array.from,l={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1}},{"./bufferish":8,"./encode":15}],19:[function(t,e,r){function n(e){return u||(u=t("./decode").decode),u(e)}function i(t){return RegExp.apply(null,t)}function o(t){return function(e){var r=new t;for(var n in l)r[n]=e[n];return r}}function s(t){return function(e){return new t(e)}}function a(t){return new Uint8Array(t).buffer}r.setExtUnpackers=function(t){t.addExtUnpacker(14,[n,o(Error)]),t.addExtUnpacker(1,[n,o(EvalError)]),t.addExtUnpacker(2,[n,o(RangeError)]),t.addExtUnpacker(3,[n,o(ReferenceError)]),t.addExtUnpacker(4,[n,o(SyntaxError)]),t.addExtUnpacker(5,[n,o(TypeError)]),t.addExtUnpacker(6,[n,o(URIError)]),t.addExtUnpacker(10,[n,i]),t.addExtUnpacker(11,[n,s(Boolean)]),t.addExtUnpacker(12,[n,s(String)]),t.addExtUnpacker(13,[n,s(Date)]),t.addExtUnpacker(15,[n,s(Number)]),"undefined"!=typeof Uint8Array&&(t.addExtUnpacker(17,s(Int8Array)),t.addExtUnpacker(18,s(Uint8Array)),t.addExtUnpacker(19,[a,s(Int16Array)]),t.addExtUnpacker(20,[a,s(Uint16Array)]),t.addExtUnpacker(21,[a,s(Int32Array)]),t.addExtUnpacker(22,[a,s(Uint32Array)]),t.addExtUnpacker(23,[a,s(Float32Array)]),"undefined"!=typeof Float64Array&&t.addExtUnpacker(24,[a,s(Float64Array)]),"undefined"!=typeof Uint8ClampedArray&&t.addExtUnpacker(25,s(Uint8ClampedArray)),t.addExtUnpacker(26,a),t.addExtUnpacker(29,[a,s(DataView)])),f.hasBuffer&&t.addExtUnpacker(27,s(c))};var u,f=t("./bufferish"),c=f.global,l={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1}},{"./bufferish":8,"./decode":12}],20:[function(t,e,r){t("./read-core"),t("./write-core"),r.createCodec=t("./codec-base").createCodec},{"./codec-base":9,"./read-core":22,"./write-core":25}],21:[function(t,e,r){function n(){if(!(this instanceof n))return new n}function i(){if(!(this instanceof i))return new i}function o(){throw new Error("method not implemented: write()")}function s(){throw new Error("method not implemented: fetch()")}function a(){return this.buffers&&this.buffers.length?(this.flush(),this.pull()):this.fetch()}function u(t){(this.buffers||(this.buffers=[])).push(t)}function f(){return(this.buffers||(this.buffers=[])).shift()}function c(t){return function(e){for(var r in t)e[r]=t[r];return e}}r.FlexDecoder=n,r.FlexEncoder=i;var l=t("./bufferish"),h=2048,d=65536,p="BUFFER_SHORTAGE";n.mixin=c({bufferish:l,write:function(t){var e=this.offset?l.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=e?t?this.bufferish.concat([e,t]):e:t,this.offset=0},fetch:s,flush:function(){for(;this.offset<this.buffer.length;){var t,e=this.offset;try{t=this.fetch()}catch(t){if(t&&t.message!=p)throw t;this.offset=e;break}this.push(t)}},push:u,pull:f,read:a,reserve:function(t){var e=this.offset,r=e+t;if(r>this.buffer.length)throw new Error(p);return this.offset=r,e},offset:0}),n.mixin(n.prototype),i.mixin=c({bufferish:l,write:o,fetch:function(){var t=this.start;if(t<this.offset){var e=this.start=this.offset;return l.prototype.slice.call(this.buffer,t,e)}},flush:function(){for(;this.start<this.offset;){var t=this.fetch();t&&this.push(t)}},push:u,pull:function(){var t=this.buffers||(this.buffers=[]),e=t.length>1?this.bufferish.concat(t):t[0];return t.length=0,e},read:a,reserve:function(t){var e=0|t;if(this.buffer){var r=this.buffer.length,n=0|this.offset,i=n+e;if(i<r)return this.offset=i,n;this.flush(),t=Math.max(t,Math.min(2*r,this.maxBufferSize))}return t=Math.max(t,this.minBufferSize),this.buffer=this.bufferish.alloc(t),this.start=0,this.offset=e,0},send:function(t){var e=t.length;if(e>this.minBufferSize)this.flush(),this.push(t);else{var r=this.reserve(e);l.prototype.copy.call(t,this.buffer,r)}},maxBufferSize:d,minBufferSize:h,offset:0,start:0}),i.mixin(i.prototype)},{"./bufferish":8}],22:[function(t,e,r){function n(){var t=this.options;return this.decode=function(t){var e=a.getReadToken(t);return function(t){var r=s(t),n=e[r];if(!n)throw new Error("Invalid type: "+(r?"0x"+r.toString(16):r));return n(t)}}(t),t&&t.preset&&o.setExtUnpackers(this),this}var i=t("./ext-buffer").ExtBuffer,o=t("./ext-unpacker"),s=t("./read-format").readUint8,a=t("./read-token"),u=t("./codec-base");u.install({addExtUnpacker:function(t,e){(this.extUnpackers||(this.extUnpackers=[]))[t]=u.filter(e)},getExtUnpacker:function(t){return(this.extUnpackers||(this.extUnpackers=[]))[t]||function(e){return new i(e,t)}},init:n}),r.preset=n.call(u.preset)},{"./codec-base":9,"./ext-buffer":17,"./ext-unpacker":19,"./read-format":23,"./read-token":24}],23:[function(t,e,r){function n(t,e){var r,n={},i=new Array(e),o=new Array(e),s=t.codec.decode;for(r=0;r<e;r++)i[r]=s(t),o[r]=s(t);for(r=0;r<e;r++)n[i[r]]=o[r];return n}function i(t,e){var r,n=new Map,i=new Array(e),o=new Array(e),s=t.codec.decode;for(r=0;r<e;r++)i[r]=s(t),o[r]=s(t);for(r=0;r<e;r++)n.set(i[r],o[r]);return n}function o(t,e){for(var r=new Array(e),n=t.codec.decode,i=0;i<e;i++)r[i]=n(t);return r}function s(t,e){var r=t.reserve(e),n=r+e;return R.toString.call(t.buffer,"utf-8",r,n)}function a(t,e){var r=t.reserve(e),n=r+e,i=R.slice.call(t.buffer,r,n);return C.from(i)}function u(t,e){var r=t.reserve(e),n=r+e,i=R.slice.call(t.buffer,r,n);return C.Uint8Array.from(i).buffer}function f(t,e){var r=t.reserve(e+1),n=t.buffer[r++],i=r+e,o=t.codec.getExtUnpacker(n);if(!o)throw new Error("Invalid ext type: "+(n?"0x"+n.toString(16):n));return o(R.slice.call(t.buffer,r,i))}function c(t){var e=t.reserve(1);return t.buffer[e]}function l(t){var e=t.reserve(1),r=t.buffer[e];return 128&r?r-256:r}function h(t){var e=t.reserve(2),r=t.buffer;return r[e++]<<8|r[e]}function d(t){var e=t.reserve(2),r=t.buffer,n=r[e++]<<8|r[e];return 32768&n?n-65536:n}function p(t){var e=t.reserve(4),r=t.buffer;return 16777216*r[e++]+(r[e++]<<16)+(r[e++]<<8)+r[e]}function y(t){var e=t.reserve(4),r=t.buffer;return r[e++]<<24|r[e++]<<16|r[e++]<<8|r[e]}function v(t,e){return function(r){var n=r.reserve(t);return e.call(r.buffer,n,A)}}function g(t){return new x(this,t).toNumber()}function m(t){return new B(this,t).toNumber()}function b(t){return new x(this,t)}function _(t){return new B(this,t)}function w(t){return k.read(this,t,!1,23,4)}function S(t){return k.read(this,t,!1,52,8)}var k=t("ieee754"),E=t("int64-buffer"),x=E.Uint64BE,B=E.Int64BE;r.getReadFormat=function(t){var e=C.hasArrayBuffer&&t&&t.binarraybuffer,r=t&&t.int64;return{map:P&&t&&t.usemap?i:n,array:o,str:s,bin:e?u:a,ext:f,uint8:c,uint16:h,uint32:p,uint64:v(8,r?b:g),int8:l,int16:d,int32:y,int64:v(8,r?_:m),float32:v(4,w),float64:v(8,S)}},r.readUint8=c;var C=t("./bufferish"),R=t("./bufferish-proto"),P="undefined"!=typeof Map,A=!0},{"./bufferish":8,"./bufferish-proto":6,ieee754:32,"int64-buffer":33}],24:[function(t,e,r){function n(t){var e,r=new Array(256);for(e=0;e<=127;e++)r[e]=i(e);for(e=128;e<=143;e++)r[e]=s(e-128,t.map);for(e=144;e<=159;e++)r[e]=s(e-144,t.array);for(e=160;e<=191;e++)r[e]=s(e-160,t.str);for(r[192]=i(null),r[193]=null,r[194]=i(!1),r[195]=i(!0),r[196]=o(t.uint8,t.bin),r[197]=o(t.uint16,t.bin),r[198]=o(t.uint32,t.bin),r[199]=o(t.uint8,t.ext),r[200]=o(t.uint16,t.ext),r[201]=o(t.uint32,t.ext),r[202]=t.float32,r[203]=t.float64,r[204]=t.uint8,r[205]=t.uint16,r[206]=t.uint32,r[207]=t.uint64,r[208]=t.int8,r[209]=t.int16,r[210]=t.int32,r[211]=t.int64,r[212]=s(1,t.ext),r[213]=s(2,t.ext),r[214]=s(4,t.ext),r[215]=s(8,t.ext),r[216]=s(16,t.ext),r[217]=o(t.uint8,t.str),r[218]=o(t.uint16,t.str),r[219]=o(t.uint32,t.str),r[220]=o(t.uint16,t.array),r[221]=o(t.uint32,t.array),r[222]=o(t.uint16,t.map),r[223]=o(t.uint32,t.map),e=224;e<=255;e++)r[e]=i(e-256);return r}function i(t){return function(){return t}}function o(t,e){return function(r){var n=t(r);return e(r,n)}}function s(t,e){return function(r){return e(r,t)}}var a=t("./read-format");r.getReadToken=function(t){var e=a.getReadFormat(t);return t&&t.useraw?function(t){var e,r=n(t).slice();for(r[217]=r[196],r[218]=r[197],r[219]=r[198],e=160;e<=191;e++)r[e]=s(e-160,t.bin);return r}(e):n(e)}},{"./read-format":23}],25:[function(t,e,r){function n(){var t=this.options;return this.encode=function(t){var e=s.getWriteType(t);return function(t,r){var n=e[a(r)];if(!n)throw new Error(\'Unsupported type "\'+a(r)+\'": \'+r);n(t,r)}}(t),t&&t.preset&&o.setExtPackers(this),this}var i=t("./ext-buffer").ExtBuffer,o=t("./ext-packer"),s=t("./write-type"),u=t("./codec-base");u.install({addExtPacker:function(t,e,r){function n(e){return r&&(e=r(e)),new i(e,t)}r=u.filter(r);var o=e.name;o&&"Object"!==o?(this.extPackers||(this.extPackers={}))[o]=n:(this.extEncoderList||(this.extEncoderList=[])).unshift([e,n])},getExtPacker:function(t){var e=this.extPackers||(this.extPackers={}),r=t.constructor,n=r&&r.name&&e[r.name];if(n)return n;for(var i=this.extEncoderList||(this.extEncoderList=[]),o=i.length,s=0;s<o;s++){var a=i[s];if(r===a[0])return a[1]}},init:n}),r.preset=n.call(u.preset)},{"./codec-base":9,"./ext-buffer":17,"./ext-packer":18,"./write-type":27}],26:[function(t,e,r){function n(){var t=v.slice();return t[196]=i(196),t[197]=o(197),t[198]=s(198),t[199]=i(199),t[200]=o(200),t[201]=s(201),t[202]=a(202,4,_.writeFloatBE||c,!0),t[203]=a(203,8,_.writeDoubleBE||l,!0),t[204]=i(204),t[205]=o(205),t[206]=s(206),t[207]=a(207,8,u),t[208]=i(208),t[209]=o(209),t[210]=s(210),t[211]=a(211,8,f),t[217]=i(217),t[218]=o(218),t[219]=s(219),t[220]=o(220),t[221]=s(221),t[222]=o(222),t[223]=s(223),t}function i(t){return function(e,r){var n=e.reserve(2),i=e.buffer;i[n++]=t,i[n]=r}}function o(t){return function(e,r){var n=e.reserve(3),i=e.buffer;i[n++]=t,i[n++]=r>>>8,i[n]=r}}function s(t){return function(e,r){var n=e.reserve(5),i=e.buffer;i[n++]=t,i[n++]=r>>>24,i[n++]=r>>>16,i[n++]=r>>>8,i[n]=r}}function a(t,e,r,n){return function(i,o){var s=i.reserve(e+1);i.buffer[s++]=t,r.call(i.buffer,o,s,n)}}function u(t,e){new p(this,e,t)}function f(t,e){new y(this,e,t)}function c(t,e){h.write(this,t,e,!1,23,4)}function l(t,e){h.write(this,t,e,!1,52,8)}var h=t("ieee754"),d=t("int64-buffer"),p=d.Uint64BE,y=d.Int64BE,v=t("./write-uint8").uint8,g=t("./bufferish"),m=g.global,b=g.hasBuffer&&"TYPED_ARRAY_SUPPORT"in m&&!m.TYPED_ARRAY_SUPPORT,_=g.hasBuffer&&m.prototype||{};r.getWriteToken=function(t){return t&&t.uint8array?function(){var t=n();return t[202]=a(202,4,c),t[203]=a(203,8,l),t}():b||g.hasBuffer&&t&&t.safe?function(){var t=v.slice();return t[196]=a(196,1,m.prototype.writeUInt8),t[197]=a(197,2,m.prototype.writeUInt16BE),t[198]=a(198,4,m.prototype.writeUInt32BE),t[199]=a(199,1,m.prototype.writeUInt8),t[200]=a(200,2,m.prototype.writeUInt16BE),t[201]=a(201,4,m.prototype.writeUInt32BE),t[202]=a(202,4,m.prototype.writeFloatBE),t[203]=a(203,8,m.prototype.writeDoubleBE),t[204]=a(204,1,m.prototype.writeUInt8),t[205]=a(205,2,m.prototype.writeUInt16BE),t[206]=a(206,4,m.prototype.writeUInt32BE),t[207]=a(207,8,u),t[208]=a(208,1,m.prototype.writeInt8),t[209]=a(209,2,m.prototype.writeInt16BE),t[210]=a(210,4,m.prototype.writeInt32BE),t[211]=a(211,8,f),t[217]=a(217,1,m.prototype.writeUInt8),t[218]=a(218,2,m.prototype.writeUInt16BE),t[219]=a(219,4,m.prototype.writeUInt32BE),t[220]=a(220,2,m.prototype.writeUInt16BE),t[221]=a(221,4,m.prototype.writeUInt32BE),t[222]=a(222,2,m.prototype.writeUInt16BE),t[223]=a(223,4,m.prototype.writeUInt32BE),t}():n()}},{"./bufferish":8,"./write-uint8":28,ieee754:32,"int64-buffer":33}],27:[function(t,e,r){var n=t("isarray"),i=t("int64-buffer"),o=i.Uint64BE,s=i.Int64BE,a=t("./bufferish"),u=t("./bufferish-proto"),f=t("./write-token"),c=t("./write-uint8").uint8,l=t("./ext-buffer").ExtBuffer,h="undefined"!=typeof Uint8Array,d="undefined"!=typeof Map,p=[];p[1]=212,p[2]=213,p[4]=214,p[8]=215,p[16]=216,r.getWriteType=function(t){function e(t,e){if(null===e)return r(t,e);if(b(e))return _(t,e);if(n(e))return function(t,e){var r=e.length,n=r<16?144+r:r<=65535?220:221;v[n](t,r);for(var i=t.codec.encode,o=0;o<r;o++)i(t,e[o])}(t,e);if(o.isUint64BE(e))return function(t,e){v[207](t,e.toArray())}(t,e);if(s.isInt64BE(e))return function(t,e){v[211](t,e.toArray())}(t,e);var i=t.codec.getExtPacker(e);return i&&(e=i(e)),e instanceof l?function(t,e){var r=e.buffer,n=r.length,i=p[n]||(n<255?199:n<=65535?200:201);v[i](t,n),c[e.type](t),t.send(r)}(t,e):void w(t,e)}function r(t,e){v[192](t,e)}function i(t,e){var r=e.length;v[r<255?196:r<=65535?197:198](t,r),t.send(e)}function y(t,e){var r=Object.keys(e),n=r.length;v[n<16?128+n:n<=65535?222:223](t,n);var i=t.codec.encode;r.forEach(function(r){i(t,r),i(t,e[r])})}var v=f.getWriteToken(t),g=t&&t.useraw,m=h&&t&&t.binarraybuffer,b=m?a.isArrayBuffer:a.isBuffer,_=m?function(t,e){i(t,new Uint8Array(e))}:i,w=d&&t&&t.usemap?function(t,e){if(!(e instanceof Map))return y(t,e);var r=e.size;v[r<16?128+r:r<=65535?222:223](t,r);var n=t.codec.encode;e.forEach(function(e,r,i){n(t,r),n(t,e)})}:y,S={boolean:function(t,e){v[e?195:194](t,e)},function:r,number:function(t,e){var r=0|e;return e!==r?void v[203](t,e):void v[-32<=r&&r<=127?255&r:0<=r?r<=255?204:r<=65535?205:206:-128<=r?208:-32768<=r?209:210](t,r)},object:g?function(t,r){return b(r)?function(t,e){var r=e.length,n=r<32?160+r:r<=65535?218:219;v[n](t,r),t.send(e)}(t,r):void e(t,r)}:e,string:function(t){return function(e,r){var n=r.length,i=5+3*n;e.offset=e.reserve(i);var o=e.buffer,s=t(n),a=e.offset+s;n=u.write.call(o,r,a);var f=t(n);if(s!==f){var c=a+f-s,l=a+n;u.copy.call(o,o,c,a,l)}v[1===f?160+n:f<=3?215+f:219](e,n),e.offset+=n}}(g?function(t){return t<32?1:t<=65535?3:5}:function(t){return t<32?1:t<=255?2:t<=65535?3:5}),symbol:r,undefined:r};return S}},{"./bufferish":8,"./bufferish-proto":6,"./ext-buffer":17,"./write-token":26,"./write-uint8":28,"int64-buffer":33,isarray:34}],28:[function(t,e,r){function n(t){return function(e){var r=e.reserve(1);e.buffer[r]=t}}for(var i=r.uint8=new Array(256),o=0;o<=255;o++)i[o]=n(o)},{}],29:[function(t,e,n){(function(e){"use strict";function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(t,e){if(r()<e)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=o.prototype:(null===t&&(t=new o(e)),t.length=e),t}function o(t,e,r){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(this,t)}return s(this,t,e,r)}function s(t,e,r,n){if("number"==typeof e)throw new TypeError(\'"value" argument must not be a number\');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("\'offset\' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("\'length\' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),o.TYPED_ARRAY_SUPPORT?(t=e).__proto__=o.prototype:t=f(t,e),t}(t,e,r,n):"string"==typeof e?function(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!o.isEncoding(r))throw new TypeError(\'"encoding" must be a valid string encoding\');var n=0|l(e,r),s=(t=i(t,n)).write(e,r);return s!==n&&(t=t.slice(0,s)),t}(t,e,r):function(t,e){if(o.isBuffer(e)){var r=0|c(e.length);return 0===(t=i(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?i(t,0):f(t,e);if("Buffer"===e.type&&F(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function a(t){if("number"!=typeof t)throw new TypeError(\'"size" argument must be a number\');if(t<0)throw new RangeError(\'"size" argument must not be negative\')}function u(t,e){if(a(e),t=i(t,e<0?0:0|c(e)),!o.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function f(t,e){var r=e.length<0?0:0|c(e.length);t=i(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function c(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function l(t,e){if(o.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return j(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return U(t).length;default:if(n)return j(t).length;e=(""+e).toLowerCase(),n=!0}}function h(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return B(this,e,r);case"utf8":case"utf-8":return k(this,e,r);case"ascii":return E(this,e,r);case"latin1":case"binary":return x(this,e,r);case"base64":return S(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function d(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function p(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=o.from(e,n)),o.isBuffer(e))return 0===e.length?-1:y(t,e,r,n,i);if("number"==typeof e)return e&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):y(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,r,n,i){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var s,a=1,u=t.length,f=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,u/=2,f/=2,r/=2}if(i){var c=-1;for(s=r;s<u;s++)if(o(t,s)===o(e,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===f)return c*a}else-1!==c&&(s-=s-c),c=-1}else for(r+f>u&&(r=u-f),s=r;s>=0;s--){for(var l=!0,h=0;h<f;h++)if(o(t,s+h)!==o(e,h)){l=!1;break}if(l)return s}return-1}function v(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[r+s]=a}return s}function g(t,e,r,n){return z(j(e,t.length-r),t,r,n)}function m(t,e,r,n){return z(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function b(t,e,r,n){return m(t,e,r,n)}function _(t,e,r,n){return z(U(e),t,r,n)}function w(t,e,r,n){return z(function(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function S(t,e,r){return 0===e&&r===t.length?N.fromByteArray(t):N.fromByteArray(t.slice(e,r))}function k(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,a,u,f=t[i],c=null,l=f>239?4:f>223?3:f>191?2:1;if(i+l<=r)switch(l){case 1:f<128&&(c=f);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&f)<<6|63&o)>127&&(c=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&f)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&f)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,l=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=l}return function(t){var e=t.length;if(e<=H)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=H));return r}(n)}function E(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function x(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function B(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=D(t[o]);return i}function C(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function R(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function P(t,e,r,n,i,s){if(!o.isBuffer(t))throw new TypeError(\'"buffer" argument must be a Buffer instance\');if(e>i||e<s)throw new RangeError(\'"value" argument is out of bounds\');if(r+n>t.length)throw new RangeError("Index out of range")}function A(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function I(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function T(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M(t,e,r,n,i){return i||T(t,0,r,4),L.write(t,e,r,n,23,4),r+4}function O(t,e,r,n,i){return i||T(t,0,r,8),L.write(t,e,r,n,52,8),r+8}function D(t){return t<16?"0"+t.toString(16):t.toString(16)}function j(t,e){e=e||1/0;for(var r,n=t.length,i=null,o=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function U(t){return N.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\\s+|\\s+$/g,"")}(t).replace(W,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}var N=t("base64-js"),L=t("ieee754"),F=t("isarray");n.Buffer=o,n.SlowBuffer=function(t){return+t!=t&&(t=0),o.alloc(+t)},n.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),n.kMaxLength=r(),o.poolSize=8192,o._augment=function(t){return t.__proto__=o.prototype,t},o.from=function(t,e,r){return s(null,t,e,r)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(t,e,r){return function(t,e,r,n){return a(e),e<=0?i(t,e):void 0!==r?"string"==typeof n?i(t,e).fill(r,n):i(t,e).fill(r):i(t,e)}(null,t,e,r)},o.allocUnsafe=function(t){return u(null,t)},o.allocUnsafeSlow=function(t){return u(null,t)},o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,s=Math.min(r,n);i<s;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!F(t))throw new TypeError(\'"list" argument must be an Array of Buffers\');if(0===t.length)return o.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=o.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var s=t[r];if(!o.isBuffer(s))throw new TypeError(\'"list" argument must be an Array of Buffers\');s.copy(n,i),i+=s.length}return n},o.byteLength=l,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},o.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?k(this,0,t):h.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t,e,r,n,i){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var s=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),u=Math.min(s,a),f=this.slice(n,i),c=t.slice(e,r),l=0;l<u;++l)if(f[l]!==c[l]){s=f[l],a=c[l];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},o.prototype.indexOf=function(t,e,r){return p(this,t,e,r,!0)},o.prototype.lastIndexOf=function(t,e,r){return p(this,t,e,r,!1)},o.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return v(this,t,e,r);case"utf8":case"utf-8":return g(this,t,e,r);case"ascii":return m(this,t,e,r);case"latin1":case"binary":return b(this,t,e,r);case"base64":return _(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var H=4096;o.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),o.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=o.prototype;else{var i=e-t;r=new o(i,void 0);for(var s=0;s<i;++s)r[s]=this[s+t]}return r},o.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},o.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},o.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},o.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),L.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),L.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),L.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),L.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||P(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},o.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||P(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},o.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,1,255,0),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},o.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):A(this,t,e,!1),e+2},o.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):I(this,t,e,!0),e+4},o.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},o.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);P(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s|0)-a&255;return e+r},o.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);P(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s|0)-a&255;return e+r},o.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,1,127,-128),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},o.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):A(this,t,e,!1),e+2},o.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):I(this,t,e,!0),e+4},o.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},o.prototype.writeFloatLE=function(t,e,r){return M(this,t,e,!0,r)},o.prototype.writeFloatBE=function(t,e,r){return M(this,t,e,!1,r)},o.prototype.writeDoubleLE=function(t,e,r){return O(this,t,e,!0,r)},o.prototype.writeDoubleBE=function(t,e,r){return O(this,t,e,!1,r)},o.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,s=n-r;if(this===t&&r<e&&e<n)for(i=s-1;i>=0;--i)t[i+e]=this[i+r];else if(s<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+s),e);return s},o.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var s;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(s=e;s<r;++s)this[s]=t;else{var a=o.isBuffer(t)?t:j(new o(t,n).toString()),u=a.length;for(s=0;s<r-e;++s)this[s+e]=a[s%u]}return this};var W=/[^+\\/0-9A-Za-z-_]/g}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":30,ieee754:32,isarray:34}],30:[function(t,e,r){"use strict";function n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function i(t){return s[t>>18&63]+s[t>>12&63]+s[t>>6&63]+s[63&t]}function o(t,e,r){for(var n,o=[],s=e;s<r;s+=3)n=(t[s]<<16)+(t[s+1]<<8)+t[s+2],o.push(i(n));return o.join("")}r.byteLength=function(t){return 3*t.length/4-n(t)},r.toByteArray=function(t){var e,r,i,o,s,f,c=t.length;s=n(t),f=new u(3*c/4-s),i=s>0?c-4:c;var l=0;for(e=0,r=0;e<i;e+=4,r+=3)o=a[t.charCodeAt(e)]<<18|a[t.charCodeAt(e+1)]<<12|a[t.charCodeAt(e+2)]<<6|a[t.charCodeAt(e+3)],f[l++]=o>>16&255,f[l++]=o>>8&255,f[l++]=255&o;return 2===s?(o=a[t.charCodeAt(e)]<<2|a[t.charCodeAt(e+1)]>>4,f[l++]=255&o):1===s&&(o=a[t.charCodeAt(e)]<<10|a[t.charCodeAt(e+1)]<<4|a[t.charCodeAt(e+2)]>>2,f[l++]=o>>8&255,f[l++]=255&o),f},r.fromByteArray=function(t){for(var e,r=t.length,n=r%3,i="",a=[],u=16383,f=0,c=r-n;f<c;f+=u)a.push(o(t,f,f+u>c?c:f+u));return 1===n?(e=t[r-1],i+=s[e>>2],i+=s[e<<4&63],i+="=="):2===n&&(e=(t[r-2]<<8)+t[r-1],i+=s[e>>10],i+=s[e>>4&63],i+=s[e<<2&63],i+="="),a.push(i),a.join("")};for(var s=[],a=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0;c<64;++c)s[c]=f[c],a[f.charCodeAt(c)]=c;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},{}],31:[function(t,e,r){!function(t){function r(t){for(var e in s)t[e]=s[e];return t}function n(t,e){var r,s=this;if(arguments.length){if(e){if(r=i(s,t,!0)){if(r=r.filter(function(t){return t!==e&&t.originalListener!==e}),!r.length)return n.call(s,t);s[o][t]=r}}else if((r=s[o])&&(delete r[t],!Object.keys(r).length))return n.call(s)}else delete s[o];return s}function i(t,e,r){if(!r||t[o]){var n=t[o]||(t[o]={});return n[e]||(n[e]=[])}}void 0!==e&&(e.exports=t);var o="listeners",s={on:function(t,e){return i(this,t).push(e),this},once:function(t,e){function r(){n.call(o,t,r),e.apply(this,arguments)}var o=this;return r.originalListener=e,i(o,t).push(r),o},off:n,emit:function(t,e){var r=this,n=i(r,t,!0);if(!n)return!1;var o=arguments.length;if(1===o)n.forEach(function(t){t.call(r)});else if(2===o)n.forEach(function(t){t.call(r,e)});else{var s=Array.prototype.slice.call(arguments,1);n.forEach(function(t){t.apply(r,s)})}return!!n.length}};r(t.prototype),t.mixin=r}(function t(){if(!(this instanceof t))return new t})},{}],32:[function(t,e,r){r.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,f=u>>1,c=-7,l=r?i-1:0,h=r?-1:1,d=t[e+l];for(l+=h,o=d&(1<<-c)-1,d>>=-c,c+=a;c>0;o=256*o+t[e+l],l+=h,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+t[e+l],l+=h,c-=8);if(0===o)o=1-f;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=f}return(d?-1:1)*s*Math.pow(2,o-n)},r.write=function(t,e,r,n,i,o){var s,a,u,f=8*o-i-1,c=(1<<f)-1,l=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+l>=1?h/u:h*Math.pow(2,1-l))*u>=2&&(s++,u/=2),s+l>=c?(a=0,s=c):s+l>=1?(a=(e*u-1)*Math.pow(2,i),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[r+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,f+=i;f>0;t[r+d]=255&s,d+=p,s/=256,f-=8);t[r+d-p]|=128*y}},{}],33:[function(t,e,r){(function(t){!function(e){function r(t,r,_){function k(t,e,r,n){return this instanceof k?function(t,e,r,n,i){g&&m&&(e instanceof m&&(e=new g(e)),n instanceof m&&(n=new g(n))),e||r||n||p?(s(e,r)||(i=r,n=e,r=0,e=new(p||Array)(8)),t.buffer=e,t.offset=r|=0,y!==a(n)&&("string"==typeof n?function(t,e,r,n){var i=0,o=r.length,s=0,a=0;"-"===r[0]&&i++;for(var u=i;i<o;){var f=parseInt(r[i++],n);if(!(f>=0))break;a=a*n+f,s=s*n+Math.floor(a/w),a%=w}u&&(s=~s,a?a=w-a:s++),x(t,e+C,s),x(t,e+R,a)}(e,r,n,i||10):s(n,i)?u(e,r,n,i):"number"==typeof i?(x(e,r+C,n),x(e,r+R,i)):n>0?M(e,r,n):n<0?O(e,r,n):u(e,r,b,0))):t.buffer=f(b,0)}(this,t,e,r,n):new k(t,e,r,n)}function E(){var t=this.buffer,e=this.offset,r=B(t,e+C),n=B(t,e+R);return _||(r|=0),r?r*w+n:n}function x(t,e,r){t[e+T]=255&r,r>>=8,t[e+I]=255&r,r>>=8,t[e+A]=255&r,r>>=8,t[e+P]=255&r}function B(t,e){return t[e+P]*S+(t[e+A]<<16)+(t[e+I]<<8)+t[e+T]}var C=r?0:4,R=r?4:0,P=r?0:3,A=r?1:2,I=r?2:1,T=r?3:0,M=r?c:h,O=r?l:d,D=k.prototype,j="is"+t,U="_"+j;return D.buffer=void 0,D.offset=0,D[U]=!0,D.toNumber=E,D.toString=function(t){var e=this.buffer,r=this.offset,n=B(e,r+C),i=B(e,r+R),o="",s=!_&&2147483648&n;for(s&&(n=~n,i=w-i),t=t||10;;){var a=n%t*w+i;if(n=Math.floor(n/t),i=Math.floor(a/t),o=(a%t).toString(t)+o,!n&&!i)break}return s&&(o="-"+o),o},D.toJSON=E,D.toArray=n,v&&(D.toBuffer=i),g&&(D.toArrayBuffer=o),k[j]=function(t){return!(!t||!t[U])},e[t]=k,k}function n(t){var e=this.buffer,r=this.offset;return p=null,!1!==t&&0===r&&8===e.length&&_(e)?e:f(e,r)}function i(e){var r=this.buffer,n=this.offset;if(p=v,!1!==e&&0===n&&8===r.length&&t.isBuffer(r))return r;var i=new v(8);return u(i,0,r,n),i}function o(t){var e=this.buffer,r=this.offset,n=e.buffer;if(p=g,!1!==t&&0===r&&n instanceof m&&8===n.byteLength)return n;var i=new g(8);return u(i,0,e,r),i.buffer}function s(t,e){var r=t&&t.length;return e|=0,r&&e+8<=r&&"string"!=typeof t[e]}function u(t,e,r,n){e|=0,n|=0;for(var i=0;i<8;i++)t[e++]=255&r[n++]}function f(t,e){return Array.prototype.slice.call(t,e,e+8)}function c(t,e,r){for(var n=e+8;n>e;)t[--n]=255&r,r/=256}function l(t,e,r){var n=e+8;for(r++;n>e;)t[--n]=255&-r^255,r/=256}function h(t,e,r){for(var n=e+8;e<n;)t[e++]=255&r,r/=256}function d(t,e,r){var n=e+8;for(r++;e<n;)t[e++]=255&-r^255,r/=256}var p,y="undefined",v=y!==a(t)&&t,g=y!==("undefined"==typeof Uint8Array?"undefined":a(Uint8Array))&&Uint8Array,m=y!==("undefined"==typeof ArrayBuffer?"undefined":a(ArrayBuffer))&&ArrayBuffer,b=[0,0,0,0,0,0,0,0],_=Array.isArray||function(t){return!!t&&"[object Array]"==Object.prototype.toString.call(t)},w=4294967296,S=16777216;r("Uint64BE",!0,!0),r("Int64BE",!0,!1),r("Uint64LE",!1,!0),r("Int64LE",!1,!1)}("object"==a(r)&&"string"!=typeof r.nodeName?r:this||{})}).call(this,t("buffer").Buffer)},{buffer:29}],34:[function(t,e,r){var n={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},{}]},{},[1])(1)},"object"==a(e)?t.exports=s():(i=[],void 0===(o="function"==typeof(n=s)?n.apply(e,i):n)||(t.exports=o))},298:function(t,e,r){var n;t.exports=(n=r(21),r(754),r(636),r(506),r(165),function(){var t=n,e=t.lib.StreamCipher,r=t.algo,i=[],o=[],s=[],a=r.Rabbit=e.extend({_doReset:function(){for(var t=this._key.words,e=this.cfg.iv,r=0;r<4;r++)t[r]=16711935&(t[r]<<8|t[r]>>>24)|4278255360&(t[r]<<24|t[r]>>>8);var n=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],i=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];for(this._b=0,r=0;r<4;r++)u.call(this);for(r=0;r<8;r++)i[r]^=n[r+4&7];if(e){var o=e.words,s=o[0],a=o[1],f=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=f>>>16|4294901760&c,h=c<<16|65535&f;for(i[0]^=f,i[1]^=l,i[2]^=c,i[3]^=h,i[4]^=f,i[5]^=l,i[6]^=c,i[7]^=h,r=0;r<4;r++)u.call(this)}},_doProcessBlock:function(t,e){var r=this._X;u.call(this),i[0]=r[0]^r[5]>>>16^r[3]<<16,i[1]=r[2]^r[7]>>>16^r[5]<<16,i[2]=r[4]^r[1]>>>16^r[7]<<16,i[3]=r[6]^r[3]>>>16^r[1]<<16;for(var n=0;n<4;n++)i[n]=16711935&(i[n]<<8|i[n]>>>24)|4278255360&(i[n]<<24|i[n]>>>8),t[e+n]^=i[n]},blockSize:4,ivSize:2});function u(){for(var t=this._X,e=this._C,r=0;r<8;r++)o[r]=e[r];for(e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<o[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<o[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<o[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<o[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<o[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<o[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<o[6]>>>0?1:0)|0,this._b=e[7]>>>0<o[7]>>>0?1:0,r=0;r<8;r++){var n=t[r]+e[r],i=65535&n,a=n>>>16,u=((i*i>>>17)+i*a>>>15)+a*a,f=((4294901760&n)*n|0)+((65535&n)*n|0);s[r]=u^f}t[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,t[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,t[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,t[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,t[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,t[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,t[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,t[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}t.Rabbit=e._createHelper(a)}(),n.Rabbit)},308:function(t,e,r){var n,i,o,s,a,u;t.exports=(u=r(21),r(9),i=(n=u).lib.WordArray,o=n.algo,s=o.SHA256,a=o.SHA224=s.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=s._doFinalize.call(this);return t.sigBytes-=4,t}}),n.SHA224=s._createHelper(a),n.HmacSHA224=s._createHmacHelper(a),u.SHA224)},372:function(t,e,r){var n;t.exports=(n=r(21),r(165),n.mode.CTRGladman=function(){var t=n.lib.BlockCipherMode.extend();function e(t){if(255&~(t>>24))t+=1<<24;else{var e=t>>16&255,r=t>>8&255,n=255&t;255===e?(e=0,255===r?(r=0,255===n?n=0:++n):++r):++e,t=0,t+=e<<16,t+=r<<8,t+=n}return t}function r(t){return 0===(t[0]=e(t[0]))&&(t[1]=e(t[1])),t}var i=t.Encryptor=t.extend({processBlock:function(t,e){var n=this._cipher,i=n.blockSize,o=this._iv,s=this._counter;o&&(s=this._counter=o.slice(0),this._iv=void 0),r(s);var a=s.slice(0);n.encryptBlock(a,0);for(var u=0;u<i;u++)t[e+u]^=a[u]}});return t.Decryptor=i,t}(),n.mode.CTRGladman)},380:function(t,e,r){var n;t.exports=(n=r(21),r(240),function(){var t=n,e=t.lib.Hasher,r=t.x64,i=r.Word,o=r.WordArray,s=t.algo;function a(){return i.create.apply(i,arguments)}var u=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],f=[];!function(){for(var t=0;t<80;t++)f[t]=a()}();var c=s.SHA512=e.extend({_doReset:function(){this._hash=new o.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],c=r[5],l=r[6],h=r[7],d=n.high,p=n.low,y=i.high,v=i.low,g=o.high,m=o.low,b=s.high,_=s.low,w=a.high,S=a.low,k=c.high,E=c.low,x=l.high,B=l.low,C=h.high,R=h.low,P=d,A=p,I=y,T=v,M=g,O=m,D=b,j=_,U=w,z=S,N=k,L=E,F=x,H=B,W=C,q=R,Y=0;Y<80;Y++){var Z,V,K=f[Y];if(Y<16)V=K.high=0|t[e+2*Y],Z=K.low=0|t[e+2*Y+1];else{var G=f[Y-15],X=G.high,Q=G.low,J=(X>>>1|Q<<31)^(X>>>8|Q<<24)^X>>>7,$=(Q>>>1|X<<31)^(Q>>>8|X<<24)^(Q>>>7|X<<25),tt=f[Y-2],et=tt.high,rt=tt.low,nt=(et>>>19|rt<<13)^(et<<3|rt>>>29)^et>>>6,it=(rt>>>19|et<<13)^(rt<<3|et>>>29)^(rt>>>6|et<<26),ot=f[Y-7],st=ot.high,at=ot.low,ut=f[Y-16],ft=ut.high,ct=ut.low;V=(V=(V=J+st+((Z=$+at)>>>0<$>>>0?1:0))+nt+((Z+=it)>>>0<it>>>0?1:0))+ft+((Z+=ct)>>>0<ct>>>0?1:0),K.high=V,K.low=Z}var lt,ht=U&N^~U&F,dt=z&L^~z&H,pt=P&I^P&M^I&M,yt=A&T^A&O^T&O,vt=(P>>>28|A<<4)^(P<<30|A>>>2)^(P<<25|A>>>7),gt=(A>>>28|P<<4)^(A<<30|P>>>2)^(A<<25|P>>>7),mt=(U>>>14|z<<18)^(U>>>18|z<<14)^(U<<23|z>>>9),bt=(z>>>14|U<<18)^(z>>>18|U<<14)^(z<<23|U>>>9),_t=u[Y],wt=_t.high,St=_t.low,kt=W+mt+((lt=q+bt)>>>0<q>>>0?1:0),Et=gt+yt;W=F,q=H,F=N,H=L,N=U,L=z,U=D+(kt=(kt=(kt=kt+ht+((lt+=dt)>>>0<dt>>>0?1:0))+wt+((lt+=St)>>>0<St>>>0?1:0))+V+((lt+=Z)>>>0<Z>>>0?1:0))+((z=j+lt|0)>>>0<j>>>0?1:0)|0,D=M,j=O,M=I,O=T,I=P,T=A,P=kt+(vt+pt+(Et>>>0<gt>>>0?1:0))+((A=lt+Et|0)>>>0<lt>>>0?1:0)|0}p=n.low=p+A,n.high=d+P+(p>>>0<A>>>0?1:0),v=i.low=v+T,i.high=y+I+(v>>>0<T>>>0?1:0),m=o.low=m+O,o.high=g+M+(m>>>0<O>>>0?1:0),_=s.low=_+j,s.high=b+D+(_>>>0<j>>>0?1:0),S=a.low=S+z,a.high=w+U+(S>>>0<z>>>0?1:0),E=c.low=E+L,c.high=k+N+(E>>>0<L>>>0?1:0),B=l.low=B+H,l.high=x+F+(B>>>0<H>>>0?1:0),R=h.low=R+q,h.high=C+W+(R>>>0<q>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[30+(n+128>>>10<<5)]=Math.floor(r/4294967296),e[31+(n+128>>>10<<5)]=r,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=e.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32});t.SHA512=e._createHelper(c),t.HmacSHA512=e._createHmacHelper(c)}(),n.SHA512)},396:function(t,e,r){var n;t.exports=(n=r(21),r(240),r(440),r(503),r(754),r(725),r(636),r(471),r(9),r(308),r(380),r(557),r(953),r(56),r(25),r(19),r(506),r(165),r(169),r(939),r(372),r(797),r(454),r(73),r(905),r(482),r(155),r(124),r(406),r(955),r(628),r(193),r(298),r(696),r(128),n)},406:function(t,e,r){var n,i,o,s;t.exports=(s=r(21),r(165),i=(n=s).lib.CipherParams,o=n.enc.Hex,n.format.Hex={stringify:function(t){return t.ciphertext.toString(o)},parse:function(t){var e=o.parse(t);return i.create({ciphertext:e})}},s.format.Hex)},440:function(t,e,r){var n;t.exports=(n=r(21),function(){if("function"==typeof ArrayBuffer){var t=n.lib.WordArray,e=t.init,r=t.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var r=t.byteLength,n=[],i=0;i<r;i++)n[i>>>2]|=t[i]<<24-i%4*8;e.call(this,n,r)}else e.apply(this,arguments)};r.prototype=t}}(),n.lib.WordArray)},454:function(t,e,r){var n,i;t.exports=(i=r(21),r(165),i.mode.ECB=((n=i.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),n.Decryptor=n.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),n),i.mode.ECB)},471:function(t,e,r){var n,i,o,s,a,u,f,c;t.exports=(c=r(21),i=(n=c).lib,o=i.WordArray,s=i.Hasher,a=n.algo,u=[],f=a.SHA1=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],f=0;f<80;f++){if(f<16)u[f]=0|t[e+f];else{var c=u[f-3]^u[f-8]^u[f-14]^u[f-16];u[f]=c<<1|c>>>31}var l=(n<<5|n>>>27)+a+u[f];l+=f<20?1518500249+(i&o|~i&s):f<40?1859775393+(i^o^s):f<60?(i&o|i&s|o&s)-1894007588:(i^o^s)-899497514,a=s,s=o,o=i<<30|i>>>2,i=n,n=l}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+a|0},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[14+(n+64>>>9<<4)]=Math.floor(r/4294967296),e[15+(n+64>>>9<<4)]=r,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=s.clone.call(this);return t._hash=this._hash.clone(),t}}),n.SHA1=s._createHelper(f),n.HmacSHA1=s._createHmacHelper(f),c.SHA1)},477:function(){},482:function(t,e,r){var n;t.exports=(n=r(21),r(165),n.pad.Iso97971={pad:function(t,e){t.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(t,e)},unpad:function(t){n.pad.ZeroPadding.unpad(t),t.sigBytes--}},n.pad.Iso97971)},503:function(t,e,r){var n;t.exports=(n=r(21),function(){var t=n,e=t.lib.WordArray,r=t.enc;function i(t){return t<<8&4278255360|t>>>8&16711935}r.Utf16=r.Utf16BE={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;i<r;i+=2){var o=e[i>>>2]>>>16-i%4*8&65535;n.push(String.fromCharCode(o))}return n.join("")},parse:function(t){for(var r=t.length,n=[],i=0;i<r;i++)n[i>>>1]|=t.charCodeAt(i)<<16-i%2*16;return e.create(n,2*r)}},r.Utf16LE={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],o=0;o<r;o+=2){var s=i(e[o>>>2]>>>16-o%4*8&65535);n.push(String.fromCharCode(s))}return n.join("")},parse:function(t){for(var r=t.length,n=[],o=0;o<r;o++)n[o>>>1]|=i(t.charCodeAt(o)<<16-o%2*16);return e.create(n,2*r)}}}(),n.enc.Utf16)},506:function(t,e,r){var n,i,o,s,a,u,f,c;t.exports=(c=r(21),r(471),r(25),i=(n=c).lib,o=i.Base,s=i.WordArray,a=n.algo,u=a.MD5,f=a.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:u,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var r,n=this.cfg,i=n.hasher.create(),o=s.create(),a=o.words,u=n.keySize,f=n.iterations;a.length<u;){r&&i.update(r),r=i.update(t).finalize(e),i.reset();for(var c=1;c<f;c++)r=i.finalize(r),i.reset();o.concat(r)}return o.sigBytes=4*u,o}}),n.EvpKDF=function(t,e,r){return f.create(r).compute(t,e)},c.EvpKDF)},557:function(t,e,r){var n,i,o,s,a,u,f,c;t.exports=(c=r(21),r(240),r(380),i=(n=c).x64,o=i.Word,s=i.WordArray,a=n.algo,u=a.SHA512,f=a.SHA384=u.extend({_doReset:function(){this._hash=new s.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var t=u._doFinalize.call(this);return t.sigBytes-=16,t}}),n.SHA384=u._createHelper(f),n.HmacSHA384=u._createHmacHelper(f),c.SHA384)},628:function(t,e,r){var n;t.exports=(n=r(21),r(754),r(636),r(506),r(165),function(){var t=n,e=t.lib,r=e.WordArray,i=e.BlockCipher,o=t.algo,s=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],c=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],l=o.DES=i.extend({_doReset:function(){for(var t=this._key.words,e=[],r=0;r<56;r++){var n=s[r]-1;e[r]=t[n>>>5]>>>31-n%32&1}for(var i=this._subKeys=[],o=0;o<16;o++){var f=i[o]=[],c=u[o];for(r=0;r<24;r++)f[r/6|0]|=e[(a[r]-1+c)%28]<<31-r%6,f[4+(r/6|0)]|=e[28+(a[r+24]-1+c)%28]<<31-r%6;for(f[0]=f[0]<<1|f[0]>>>31,r=1;r<7;r++)f[r]=f[r]>>>4*(r-1)+3;f[7]=f[7]<<5|f[7]>>>27}var l=this._invSubKeys=[];for(r=0;r<16;r++)l[r]=i[15-r]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(t,e,r){this._lBlock=t[e],this._rBlock=t[e+1],h.call(this,4,252645135),h.call(this,16,65535),d.call(this,2,858993459),d.call(this,8,16711935),h.call(this,1,1431655765);for(var n=0;n<16;n++){for(var i=r[n],o=this._lBlock,s=this._rBlock,a=0,u=0;u<8;u++)a|=f[u][((s^i[u])&c[u])>>>0];this._lBlock=s,this._rBlock=o^a}var l=this._lBlock;this._lBlock=this._rBlock,this._rBlock=l,h.call(this,1,1431655765),d.call(this,8,16711935),d.call(this,2,858993459),h.call(this,16,65535),h.call(this,4,252645135),t[e]=this._lBlock,t[e+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function h(t,e){var r=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=r,this._lBlock^=r<<t}function d(t,e){var r=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=r,this._rBlock^=r<<t}t.DES=i._createHelper(l);var p=o.TripleDES=i.extend({_doReset:function(){var t=this._key.words;if(2!==t.length&&4!==t.length&&t.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var e=t.slice(0,2),n=t.length<4?t.slice(0,2):t.slice(2,4),i=t.length<6?t.slice(0,2):t.slice(4,6);this._des1=l.createEncryptor(r.create(e)),this._des2=l.createEncryptor(r.create(n)),this._des3=l.createEncryptor(r.create(i))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=i._createHelper(p)}(),n.TripleDES)},636:function(t,e,r){var n;t.exports=(n=r(21),function(t){var e=n,r=e.lib,i=r.WordArray,o=r.Hasher,s=e.algo,a=[];!function(){for(var e=0;e<64;e++)a[e]=4294967296*t.abs(t.sin(e+1))|0}();var u=s.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var r=0;r<16;r++){var n=e+r,i=t[n];t[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,s=t[e+0],u=t[e+1],d=t[e+2],p=t[e+3],y=t[e+4],v=t[e+5],g=t[e+6],m=t[e+7],b=t[e+8],_=t[e+9],w=t[e+10],S=t[e+11],k=t[e+12],E=t[e+13],x=t[e+14],B=t[e+15],C=o[0],R=o[1],P=o[2],A=o[3];C=f(C,R,P,A,s,7,a[0]),A=f(A,C,R,P,u,12,a[1]),P=f(P,A,C,R,d,17,a[2]),R=f(R,P,A,C,p,22,a[3]),C=f(C,R,P,A,y,7,a[4]),A=f(A,C,R,P,v,12,a[5]),P=f(P,A,C,R,g,17,a[6]),R=f(R,P,A,C,m,22,a[7]),C=f(C,R,P,A,b,7,a[8]),A=f(A,C,R,P,_,12,a[9]),P=f(P,A,C,R,w,17,a[10]),R=f(R,P,A,C,S,22,a[11]),C=f(C,R,P,A,k,7,a[12]),A=f(A,C,R,P,E,12,a[13]),P=f(P,A,C,R,x,17,a[14]),C=c(C,R=f(R,P,A,C,B,22,a[15]),P,A,u,5,a[16]),A=c(A,C,R,P,g,9,a[17]),P=c(P,A,C,R,S,14,a[18]),R=c(R,P,A,C,s,20,a[19]),C=c(C,R,P,A,v,5,a[20]),A=c(A,C,R,P,w,9,a[21]),P=c(P,A,C,R,B,14,a[22]),R=c(R,P,A,C,y,20,a[23]),C=c(C,R,P,A,_,5,a[24]),A=c(A,C,R,P,x,9,a[25]),P=c(P,A,C,R,p,14,a[26]),R=c(R,P,A,C,b,20,a[27]),C=c(C,R,P,A,E,5,a[28]),A=c(A,C,R,P,d,9,a[29]),P=c(P,A,C,R,m,14,a[30]),C=l(C,R=c(R,P,A,C,k,20,a[31]),P,A,v,4,a[32]),A=l(A,C,R,P,b,11,a[33]),P=l(P,A,C,R,S,16,a[34]),R=l(R,P,A,C,x,23,a[35]),C=l(C,R,P,A,u,4,a[36]),A=l(A,C,R,P,y,11,a[37]),P=l(P,A,C,R,m,16,a[38]),R=l(R,P,A,C,w,23,a[39]),C=l(C,R,P,A,E,4,a[40]),A=l(A,C,R,P,s,11,a[41]),P=l(P,A,C,R,p,16,a[42]),R=l(R,P,A,C,g,23,a[43]),C=l(C,R,P,A,_,4,a[44]),A=l(A,C,R,P,k,11,a[45]),P=l(P,A,C,R,B,16,a[46]),C=h(C,R=l(R,P,A,C,d,23,a[47]),P,A,s,6,a[48]),A=h(A,C,R,P,m,10,a[49]),P=h(P,A,C,R,x,15,a[50]),R=h(R,P,A,C,v,21,a[51]),C=h(C,R,P,A,k,6,a[52]),A=h(A,C,R,P,p,10,a[53]),P=h(P,A,C,R,w,15,a[54]),R=h(R,P,A,C,u,21,a[55]),C=h(C,R,P,A,b,6,a[56]),A=h(A,C,R,P,B,10,a[57]),P=h(P,A,C,R,g,15,a[58]),R=h(R,P,A,C,E,21,a[59]),C=h(C,R,P,A,y,6,a[60]),A=h(A,C,R,P,S,10,a[61]),P=h(P,A,C,R,d,15,a[62]),R=h(R,P,A,C,_,21,a[63]),o[0]=o[0]+C|0,o[1]=o[1]+R|0,o[2]=o[2]+P|0,o[3]=o[3]+A|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;r[i>>>5]|=128<<24-i%32;var o=t.floor(n/4294967296),s=n;r[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r[14+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),e.sigBytes=4*(r.length+1),this._process();for(var a=this._hash,u=a.words,f=0;f<4;f++){var c=u[f];u[f]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return a},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});function f(t,e,r,n,i,o,s){var a=t+(e&r|~e&n)+i+s;return(a<<o|a>>>32-o)+e}function c(t,e,r,n,i,o,s){var a=t+(e&n|r&~n)+i+s;return(a<<o|a>>>32-o)+e}function l(t,e,r,n,i,o,s){var a=t+(e^r^n)+i+s;return(a<<o|a>>>32-o)+e}function h(t,e,r,n,i,o,s){var a=t+(r^(e|~n))+i+s;return(a<<o|a>>>32-o)+e}e.MD5=o._createHelper(u),e.HmacMD5=o._createHmacHelper(u)}(Math),n.MD5)},696:function(t,e,r){var n;t.exports=(n=r(21),r(754),r(636),r(506),r(165),function(){var t=n,e=t.lib.StreamCipher,r=t.algo,i=[],o=[],s=[],a=r.RabbitLegacy=e.extend({_doReset:function(){var t=this._key.words,e=this.cfg.iv,r=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],n=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(var i=0;i<4;i++)u.call(this);for(i=0;i<8;i++)n[i]^=r[i+4&7];if(e){var o=e.words,s=o[0],a=o[1],f=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=f>>>16|4294901760&c,h=c<<16|65535&f;for(n[0]^=f,n[1]^=l,n[2]^=c,n[3]^=h,n[4]^=f,n[5]^=l,n[6]^=c,n[7]^=h,i=0;i<4;i++)u.call(this)}},_doProcessBlock:function(t,e){var r=this._X;u.call(this),i[0]=r[0]^r[5]>>>16^r[3]<<16,i[1]=r[2]^r[7]>>>16^r[5]<<16,i[2]=r[4]^r[1]>>>16^r[7]<<16,i[3]=r[6]^r[3]>>>16^r[1]<<16;for(var n=0;n<4;n++)i[n]=16711935&(i[n]<<8|i[n]>>>24)|4278255360&(i[n]<<24|i[n]>>>8),t[e+n]^=i[n]},blockSize:4,ivSize:2});function u(){for(var t=this._X,e=this._C,r=0;r<8;r++)o[r]=e[r];for(e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<o[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<o[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<o[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<o[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<o[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<o[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<o[6]>>>0?1:0)|0,this._b=e[7]>>>0<o[7]>>>0?1:0,r=0;r<8;r++){var n=t[r]+e[r],i=65535&n,a=n>>>16,u=((i*i>>>17)+i*a>>>15)+a*a,f=((4294901760&n)*n|0)+((65535&n)*n|0);s[r]=u^f}t[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,t[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,t[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,t[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,t[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,t[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,t[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,t[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}t.RabbitLegacy=e._createHelper(a)}(),n.RabbitLegacy)},725:function(t,e,r){var n;t.exports=(n=r(21),function(){var t=n,e=t.lib.WordArray;function r(t,r,n){for(var i=[],o=0,s=0;s<r;s++)if(s%4){var a=n[t.charCodeAt(s-1)]<<s%4*2|n[t.charCodeAt(s)]>>>6-s%4*2;i[o>>>2]|=a<<24-o%4*8,o++}return e.create(i,o)}t.enc.Base64url={stringify:function(t,e){void 0===e&&(e=!0);var r=t.words,n=t.sigBytes,i=e?this._safe_map:this._map;t.clamp();for(var o=[],s=0;s<n;s+=3)for(var a=(r[s>>>2]>>>24-s%4*8&255)<<16|(r[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|r[s+2>>>2]>>>24-(s+2)%4*8&255,u=0;u<4&&s+.75*u<n;u++)o.push(i.charAt(a>>>6*(3-u)&63));var f=i.charAt(64);if(f)for(;o.length%4;)o.push(f);return o.join("")},parse:function(t,e){void 0===e&&(e=!0);var n=t.length,i=e?this._safe_map:this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var s=0;s<i.length;s++)o[i.charCodeAt(s)]=s}var a=i.charAt(64);if(a){var u=t.indexOf(a);-1!==u&&(n=u)}return r(t,n,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),n.enc.Base64url)},754:function(t,e,r){var n;t.exports=(n=r(21),function(){var t=n,e=t.lib.WordArray;function r(t,r,n){for(var i=[],o=0,s=0;s<r;s++)if(s%4){var a=n[t.charCodeAt(s-1)]<<s%4*2|n[t.charCodeAt(s)]>>>6-s%4*2;i[o>>>2]|=a<<24-o%4*8,o++}return e.create(i,o)}t.enc.Base64={stringify:function(t){var e=t.words,r=t.sigBytes,n=this._map;t.clamp();for(var i=[],o=0;o<r;o+=3)for(var s=(e[o>>>2]>>>24-o%4*8&255)<<16|(e[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|e[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<r;a++)i.push(n.charAt(s>>>6*(3-a)&63));var u=n.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(t){var e=t.length,n=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<n.length;o++)i[n.charCodeAt(o)]=o}var s=n.charAt(64);if(s){var a=t.indexOf(s);-1!==a&&(e=a)}return r(t,e,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.enc.Base64)},797:function(t,e,r){var n,i,o;t.exports=(o=r(21),r(165),o.mode.OFB=(n=o.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(t,e){var r=this._cipher,n=r.blockSize,i=this._iv,o=this._keystream;i&&(o=this._keystream=i.slice(0),this._iv=void 0),r.encryptBlock(o,0);for(var s=0;s<n;s++)t[e+s]^=o[s]}}),n.Decryptor=i,n),o.mode.OFB)},860:function(t,e){var r,n,i,o;function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}o=function(){return function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){if(o)return o(s,!0);var u=new Error("Cannot find module \'"+s+"\'");throw u.code="MODULE_NOT_FOUND",u}var f=r[s]={exports:{}};e[s][0].call(f.exports,function(t){return i(e[s][1][t]||t)},f,f.exports,t,e,r,n)}return r[s].exports}for(var o=void 0,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){"use strict";var n=t("./zlib/deflate"),i=t("./utils/common"),o=t("./utils/strings"),s=t("./zlib/messages"),a=t("./zlib/zstream"),u=Object.prototype.toString;function f(t){if(!(this instanceof f))return new f(t);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==r)throw new Error(s[r]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var c;if(c="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(r=n.deflateSetDictionary(this.strm,c)))throw new Error(s[r]);this._dict_set=!0}}function c(t,e){var r=new f(e);if(r.push(t,!0),r.err)throw r.msg||s[r.err];return r.result}f.prototype.push=function(t,e){var r,s,a=this.strm,f=this.options.chunkSize;if(this.ended)return!1;s=e===~~e?e:!0===e?4:0,"string"==typeof t?a.input=o.string2buf(t):"[object ArrayBuffer]"===u.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new i.Buf8(f),a.next_out=0,a.avail_out=f),1!==(r=n.deflate(a,s))&&0!==r)return this.onEnd(r),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(a.output,a.next_out))):this.onData(i.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==r);return 4===s?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==s||(this.onEnd(0),!(a.avail_out=0))},f.prototype.onData=function(t){this.chunks.push(t)},f.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Deflate=f,r.deflate=c,r.deflateRaw=function(t,e){return(e=e||{}).raw=!0,c(t,e)},r.gzip=function(t,e){return(e=e||{}).gzip=!0,c(t,e)}},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(t,e,r){"use strict";var n=t("./zlib/inflate"),i=t("./utils/common"),o=t("./utils/strings"),s=t("./zlib/constants"),a=t("./zlib/messages"),u=t("./zlib/zstream"),f=t("./zlib/gzheader"),c=Object.prototype.toString;function l(t){if(!(this instanceof l))return new l(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&!(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,e.windowBits);if(r!==s.Z_OK)throw new Error(a[r]);if(this.header=new f,n.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=o.string2buf(e.dictionary):"[object ArrayBuffer]"===c.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=n.inflateSetDictionary(this.strm,e.dictionary))!==s.Z_OK))throw new Error(a[r])}function h(t,e){var r=new l(e);if(r.push(t,!0),r.err)throw r.msg||a[r.err];return r.result}l.prototype.push=function(t,e){var r,a,u,f,l,h=this.strm,d=this.options.chunkSize,p=this.options.dictionary,y=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof t?h.input=o.binstring2buf(t):"[object ArrayBuffer]"===c.call(t)?h.input=new Uint8Array(t):h.input=t,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new i.Buf8(d),h.next_out=0,h.avail_out=d),(r=n.inflate(h,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&p&&(r=n.inflateSetDictionary(this.strm,p)),r===s.Z_BUF_ERROR&&!0===y&&(r=s.Z_OK,y=!1),r!==s.Z_STREAM_END&&r!==s.Z_OK)return this.onEnd(r),!(this.ended=!0);h.next_out&&(0!==h.avail_out&&r!==s.Z_STREAM_END&&(0!==h.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(u=o.utf8border(h.output,h.next_out),f=h.next_out-u,l=o.buf2string(h.output,u),h.next_out=f,h.avail_out=d-f,f&&i.arraySet(h.output,h.output,u,f,0),this.onData(l)):this.onData(i.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(y=!0)}while((0<h.avail_in||0===h.avail_out)&&r!==s.Z_STREAM_END);return r===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(h.avail_out=0))},l.prototype.onData=function(t){this.chunks.push(t)},l.prototype.onEnd=function(t){t===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Inflate=l,r.inflate=h,r.inflateRaw=function(t,e){return(e=e||{}).raw=!0,h(t,e)},r.ungzip=h},{"./utils/common":3,"./utils/strings":4,"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(t){for(var e,r,n=Array.prototype.slice.call(arguments,1);n.length;){var i=n.shift();if(i){if("object"!=s(i))throw new TypeError(i+"must be non-object");for(var o in i)e=i,r=o,Object.prototype.hasOwnProperty.call(e,r)&&(t[o]=i[o])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+n),i);else for(var o=0;o<n;o++)t[i+o]=e[r+o]},flattenChunks:function(t){var e,r,n,i,o,s;for(e=n=0,r=t.length;e<r;e++)n+=t[e].length;for(s=new Uint8Array(n),e=i=0,r=t.length;e<r;e++)o=t[e],s.set(o,i),i+=o.length;return s}},o={arraySet:function(t,e,r,n,i){for(var o=0;o<n;o++)t[i+o]=e[r+o]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(n)},{}],4:[function(t,e,r){"use strict";var n=t("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var s=new n.Buf8(256),a=0;a<256;a++)s[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function u(t,e){if(e<65534&&(t.subarray&&o||!t.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var r="",s=0;s<e;s++)r+=String.fromCharCode(t[s]);return r}s[254]=s[254]=1,r.string2buf=function(t){var e,r,i,o,s,a=t.length,u=0;for(o=0;o<a;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),u+=r<128?1:r<2048?2:r<65536?3:4;for(e=new n.Buf8(u),o=s=0;s<u;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),r<128?e[s++]=r:(r<2048?e[s++]=192|r>>>6:(r<65536?e[s++]=224|r>>>12:(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63),e[s++]=128|r>>>6&63),e[s++]=128|63&r);return e},r.buf2binstring=function(t){return u(t,t.length)},r.binstring2buf=function(t){for(var e=new n.Buf8(t.length),r=0,i=e.length;r<i;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){var r,n,i,o,a=e||t.length,f=new Array(2*a);for(r=n=0;r<a;)if((i=t[r++])<128)f[n++]=i;else if(4<(o=s[i]))f[n++]=65533,r+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&r<a;)i=i<<6|63&t[r++],o--;1<o?f[n++]=65533:i<65536?f[n++]=i:(i-=65536,f[n++]=55296|i>>10&1023,f[n++]=56320|1023&i)}return u(f,n)},r.utf8border=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;0<=r&&128==(192&t[r]);)r--;return r<0||0===r?e:r+s[t[r]]>e?r:e}},{"./common":3}],5:[function(t,e,r){"use strict";e.exports=function(t,e,r,n){for(var i=65535&t,o=t>>>16&65535,s=0;0!==r;){for(r-=s=2e3<r?2e3:r;o=o+(i=i+e[n++]|0)|0,--s;);i%=65521,o%=65521}return i|o<<16}},{}],6:[function(t,e,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(t,e,r){"use strict";var n=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e,r,i){var o=n,s=i+r;t^=-1;for(var a=i;a<s;a++)t=t>>>8^o[255&(t^e[a])];return-1^t}},{}],8:[function(t,e,r){"use strict";var n,i=t("../utils/common"),o=t("./trees"),s=t("./adler32"),a=t("./crc32"),u=t("./messages"),f=-2,c=258,l=262,h=113;function d(t,e){return t.msg=u[e],e}function p(t){return(t<<1)-(4<t?9:0)}function y(t){for(var e=t.length;0<=--e;)t[e]=0}function v(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(i.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function g(t,e){o._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,v(t.strm)}function m(t,e){t.pending_buf[t.pending++]=e}function b(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function _(t,e){var r,n,i=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,u=t.strstart>t.w_size-l?t.strstart-(t.w_size-l):0,f=t.window,h=t.w_mask,d=t.prev,p=t.strstart+c,y=f[o+s-1],v=f[o+s];t.prev_length>=t.good_match&&(i>>=2),a>t.lookahead&&(a=t.lookahead);do{if(f[(r=e)+s]===v&&f[r+s-1]===y&&f[r]===f[o]&&f[++r]===f[o+1]){o+=2,r++;do{}while(f[++o]===f[++r]&&f[++o]===f[++r]&&f[++o]===f[++r]&&f[++o]===f[++r]&&f[++o]===f[++r]&&f[++o]===f[++r]&&f[++o]===f[++r]&&f[++o]===f[++r]&&o<p);if(n=c-(p-o),o=p-c,s<n){if(t.match_start=e,a<=(s=n))break;y=f[o+s-1],v=f[o+s]}}}while((e=d[e&h])>u&&0!=--i);return s<=t.lookahead?s:t.lookahead}function w(t){var e,r,n,o,u,f,c,h,d,p,y=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=y+(y-l)){for(i.arraySet(t.window,t.window,y,y,0),t.match_start-=y,t.strstart-=y,t.block_start-=y,e=r=t.hash_size;n=t.head[--e],t.head[e]=y<=n?n-y:0,--r;);for(e=r=y;n=t.prev[--e],t.prev[e]=y<=n?n-y:0,--r;);o+=y}if(0===t.strm.avail_in)break;if(f=t.strm,c=t.window,h=t.strstart+t.lookahead,p=void 0,(d=o)<(p=f.avail_in)&&(p=d),r=0===p?0:(f.avail_in-=p,i.arraySet(c,f.input,f.next_in,p,h),1===f.state.wrap?f.adler=s(f.adler,c,p,h):2===f.state.wrap&&(f.adler=a(f.adler,c,p,h)),f.next_in+=p,f.total_in+=p,p),t.lookahead+=r,t.lookahead+t.insert>=3)for(u=t.strstart-t.insert,t.ins_h=t.window[u],t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+3-1])&t.hash_mask,t.prev[u&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=u,u++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<l&&0!==t.strm.avail_in)}function S(t,e){for(var r,n;;){if(t.lookahead<l){if(w(t),t.lookahead<l&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-l&&(t.match_length=_(t,r)),t.match_length>=3)if(n=o._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(g(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(g(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(g(t,!1),0===t.strm.avail_out)?1:2}function k(t,e){for(var r,n,i;;){if(t.lookahead<l){if(w(t),t.lookahead<l&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-l&&(t.match_length=_(t,r),t.match_length<=5&&(1===t.strategy||3===t.match_length&&4096<t.strstart-t.match_start)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){for(i=t.strstart+t.lookahead-3,n=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(g(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=o._tr_tally(t,0,t.window[t.strstart-1]))&&g(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(g(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(g(t,!1),0===t.strm.avail_out)?1:2}function E(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}function x(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),y(this.dyn_ltree),y(this.dyn_dtree),y(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),y(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),y(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function B(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:h,t.adler=2===e.wrap?0:1,e.last_flush=0,o._tr_init(e),0):d(t,f)}function C(t){var e,r=B(t);return 0===r&&((e=t.state).window_size=2*e.w_size,y(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),r}function R(t,e,r,n,o,s){if(!t)return f;var a=1;if(-1===e&&(e=6),n<0?(a=0,n=-n):15<n&&(a=2,n-=16),o<1||9<o||8!==r||n<8||15<n||e<0||9<e||s<0||4<s)return d(t,f);8===n&&(n=9);var u=new x;return(t.state=u).strm=t,u.wrap=a,u.gzhead=null,u.w_bits=n,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+3-1)/3),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=s,u.method=r,C(t)}n=[new E(0,0,0,0,function(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(w(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,g(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-l&&(g(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(g(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(g(t,!1),t.strm.avail_out),1)}),new E(4,4,8,4,S),new E(4,5,16,8,S),new E(4,6,32,32,S),new E(4,4,16,16,k),new E(8,16,32,32,k),new E(8,16,128,128,k),new E(8,32,128,256,k),new E(32,128,258,1024,k),new E(32,258,258,4096,k)],r.deflateInit=function(t,e){return R(t,e,8,15,8,0)},r.deflateInit2=R,r.deflateReset=C,r.deflateResetKeep=B,r.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?f:(t.state.gzhead=e,0):f},r.deflate=function(t,e){var r,i,s,u;if(!t||!t.state||5<e||e<0)return t?d(t,f):f;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&4!==e)return d(t,0===t.avail_out?-5:f);if(i.strm=t,r=i.last_flush,i.last_flush=e,42===i.status)if(2===i.wrap)t.adler=0,m(i,31),m(i,139),m(i,8),i.gzhead?(m(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),m(i,255&i.gzhead.time),m(i,i.gzhead.time>>8&255),m(i,i.gzhead.time>>16&255),m(i,i.gzhead.time>>24&255),m(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),m(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(m(i,255&i.gzhead.extra.length),m(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=a(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(m(i,0),m(i,0),m(i,0),m(i,0),m(i,0),m(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),m(i,3),i.status=h);else{var l=8+(i.w_bits-8<<4)<<8;l|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(l|=32),l+=31-l%31,i.status=h,b(i,l),0!==i.strstart&&(b(i,t.adler>>>16),b(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(s=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),v(t),s=i.pending,i.pending!==i.pending_buf_size));)m(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),v(t),s=i.pending,i.pending===i.pending_buf_size)){u=1;break}m(i,u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0)}while(0!==u);i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),0===u&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),v(t),s=i.pending,i.pending===i.pending_buf_size)){u=1;break}m(i,u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0)}while(0!==u);i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),0===u&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&v(t),i.pending+2<=i.pending_buf_size&&(m(i,255&t.adler),m(i,t.adler>>8&255),t.adler=0,i.status=h)):i.status=h),0!==i.pending){if(v(t),0===t.avail_out)return i.last_flush=-1,0}else if(0===t.avail_in&&p(e)<=p(r)&&4!==e)return d(t,-5);if(666===i.status&&0!==t.avail_in)return d(t,-5);if(0!==t.avail_in||0!==i.lookahead||0!==e&&666!==i.status){var _=2===i.strategy?function(t,e){for(var r;;){if(0===t.lookahead&&(w(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(g(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(g(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(g(t,!1),0===t.strm.avail_out)?1:2}(i,e):3===i.strategy?function(t,e){for(var r,n,i,s,a=t.window;;){if(t.lookahead<=c){if(w(t),t.lookahead<=c&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&0<t.strstart&&(n=a[i=t.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i]){s=t.strstart+c;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<s);t.match_length=c-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=o._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(g(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(g(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(g(t,!1),0===t.strm.avail_out)?1:2}(i,e):n[i.level].func(i,e);if(3!==_&&4!==_||(i.status=666),1===_||3===_)return 0===t.avail_out&&(i.last_flush=-1),0;if(2===_&&(1===e?o._tr_align(i):5!==e&&(o._tr_stored_block(i,0,0,!1),3===e&&(y(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),v(t),0===t.avail_out))return i.last_flush=-1,0}return 4!==e?0:i.wrap<=0?1:(2===i.wrap?(m(i,255&t.adler),m(i,t.adler>>8&255),m(i,t.adler>>16&255),m(i,t.adler>>24&255),m(i,255&t.total_in),m(i,t.total_in>>8&255),m(i,t.total_in>>16&255),m(i,t.total_in>>24&255)):(b(i,t.adler>>>16),b(i,65535&t.adler)),v(t),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?0:1)},r.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&e!==h&&666!==e?d(t,f):(t.state=null,e===h?d(t,-3):0):f},r.deflateSetDictionary=function(t,e){var r,n,o,a,u,c,l,h,d=e.length;if(!t||!t.state)return f;if(2===(a=(r=t.state).wrap)||1===a&&42!==r.status||r.lookahead)return f;for(1===a&&(t.adler=s(t.adler,e,d,0)),r.wrap=0,d>=r.w_size&&(0===a&&(y(r.head),r.strstart=0,r.block_start=0,r.insert=0),h=new i.Buf8(r.w_size),i.arraySet(h,e,d-r.w_size,r.w_size,0),e=h,d=r.w_size),u=t.avail_in,c=t.next_in,l=t.input,t.avail_in=d,t.next_in=0,t.input=e,w(r);r.lookahead>=3;){for(n=r.strstart,o=r.lookahead-2;r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+3-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++,--o;);r.strstart=n,r.lookahead=2,w(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=c,t.input=l,t.avail_in=u,r.wrap=a,0},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./messages":13,"./trees":14}],9:[function(t,e,r){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],10:[function(t,e,r){"use strict";e.exports=function(t,e){var r,n,i,o,s,a,u,f,c,l,h,d,p,y,v,g,m,b,_,w,S,k,E,x,B;r=t.state,n=t.next_in,x=t.input,i=n+(t.avail_in-5),o=t.next_out,B=t.output,s=o-(e-t.avail_out),a=o+(t.avail_out-257),u=r.dmax,f=r.wsize,c=r.whave,l=r.wnext,h=r.window,d=r.hold,p=r.bits,y=r.lencode,v=r.distcode,g=(1<<r.lenbits)-1,m=(1<<r.distbits)-1;t:do{p<15&&(d+=x[n++]<<p,p+=8,d+=x[n++]<<p,p+=8),b=y[d&g];e:for(;;){if(d>>>=_=b>>>24,p-=_,0==(_=b>>>16&255))B[o++]=65535&b;else{if(!(16&_)){if(!(64&_)){b=y[(65535&b)+(d&(1<<_)-1)];continue e}if(32&_){r.mode=12;break t}t.msg="invalid literal/length code",r.mode=30;break t}w=65535&b,(_&=15)&&(p<_&&(d+=x[n++]<<p,p+=8),w+=d&(1<<_)-1,d>>>=_,p-=_),p<15&&(d+=x[n++]<<p,p+=8,d+=x[n++]<<p,p+=8),b=v[d&m];r:for(;;){if(d>>>=_=b>>>24,p-=_,!(16&(_=b>>>16&255))){if(!(64&_)){b=v[(65535&b)+(d&(1<<_)-1)];continue r}t.msg="invalid distance code",r.mode=30;break t}if(S=65535&b,p<(_&=15)&&(d+=x[n++]<<p,(p+=8)<_&&(d+=x[n++]<<p,p+=8)),u<(S+=d&(1<<_)-1)){t.msg="invalid distance too far back",r.mode=30;break t}if(d>>>=_,p-=_,(_=o-s)<S){if(c<(_=S-_)&&r.sane){t.msg="invalid distance too far back",r.mode=30;break t}if(E=h,(k=0)===l){if(k+=f-_,_<w){for(w-=_;B[o++]=h[k++],--_;);k=o-S,E=B}}else if(l<_){if(k+=f+l-_,(_-=l)<w){for(w-=_;B[o++]=h[k++],--_;);if(k=0,l<w){for(w-=_=l;B[o++]=h[k++],--_;);k=o-S,E=B}}}else if(k+=l-_,_<w){for(w-=_;B[o++]=h[k++],--_;);k=o-S,E=B}for(;2<w;)B[o++]=E[k++],B[o++]=E[k++],B[o++]=E[k++],w-=3;w&&(B[o++]=E[k++],1<w&&(B[o++]=E[k++]))}else{for(k=o-S;B[o++]=B[k++],B[o++]=B[k++],B[o++]=B[k++],2<(w-=3););w&&(B[o++]=B[k++],1<w&&(B[o++]=B[k++]))}break}}break}}while(n<i&&o<a);n-=w=p>>3,d&=(1<<(p-=w<<3))-1,t.next_in=n,t.next_out=o,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=o<a?a-o+257:257-(o-a),r.hold=d,r.bits=p}},{}],11:[function(t,e,r){"use strict";var n=t("../utils/common"),i=t("./adler32"),o=t("./crc32"),s=t("./inffast"),a=t("./inftrees"),u=-2;function f(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function c(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function l(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(852),e.distcode=e.distdyn=new n.Buf32(592),e.sane=1,e.back=-1,0):u}function h(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,l(t)):u}function d(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?u:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,h(t))):u}function p(t,e){var r,n;return t?(n=new c,(t.state=n).window=null,0!==(r=d(t,e))&&(t.state=null),r):u}var y,v,g=!0;function m(t){if(g){var e;for(y=new n.Buf32(512),v=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(1,t.lens,0,288,y,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(2,t.lens,0,32,v,0,t.work,{bits:5}),g=!1}t.lencode=y,t.lenbits=9,t.distcode=v,t.distbits=5}function b(t,e,r,i){var o,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new n.Buf8(s.wsize)),i>=s.wsize?(n.arraySet(s.window,e,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i<(o=s.wsize-s.wnext)&&(o=i),n.arraySet(s.window,e,r-i,o,s.wnext),(i-=o)?(n.arraySet(s.window,e,r-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}r.inflateReset=h,r.inflateReset2=d,r.inflateResetKeep=l,r.inflateInit=function(t){return p(t,15)},r.inflateInit2=p,r.inflate=function(t,e){var r,c,l,h,d,p,y,v,g,_,w,S,k,E,x,B,C,R,P,A,I,T,M,O,D=0,j=new n.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return u;12===(r=t.state).mode&&(r.mode=13),d=t.next_out,l=t.output,y=t.avail_out,h=t.next_in,c=t.input,p=t.avail_in,v=r.hold,g=r.bits,_=p,w=y,T=0;t:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;g<16;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if(2&r.wrap&&35615===v){j[r.check=0]=255&v,j[1]=v>>>8&255,r.check=o(r.check,j,2,0),g=v=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&v)<<8)+(v>>8))%31){t.msg="incorrect header check",r.mode=30;break}if(8!=(15&v)){t.msg="unknown compression method",r.mode=30;break}if(g-=4,I=8+(15&(v>>>=4)),0===r.wbits)r.wbits=I;else if(I>r.wbits){t.msg="invalid window size",r.mode=30;break}r.dmax=1<<I,t.adler=r.check=1,r.mode=512&v?10:12,g=v=0;break;case 2:for(;g<16;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if(r.flags=v,8!=(255&r.flags)){t.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=v>>8&1),512&r.flags&&(j[0]=255&v,j[1]=v>>>8&255,r.check=o(r.check,j,2,0)),g=v=0,r.mode=3;case 3:for(;g<32;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}r.head&&(r.head.time=v),512&r.flags&&(j[0]=255&v,j[1]=v>>>8&255,j[2]=v>>>16&255,j[3]=v>>>24&255,r.check=o(r.check,j,4,0)),g=v=0,r.mode=4;case 4:for(;g<16;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}r.head&&(r.head.xflags=255&v,r.head.os=v>>8),512&r.flags&&(j[0]=255&v,j[1]=v>>>8&255,r.check=o(r.check,j,2,0)),g=v=0,r.mode=5;case 5:if(1024&r.flags){for(;g<16;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}r.length=v,r.head&&(r.head.extra_len=v),512&r.flags&&(j[0]=255&v,j[1]=v>>>8&255,r.check=o(r.check,j,2,0)),g=v=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(p<(S=r.length)&&(S=p),S&&(r.head&&(I=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,c,h,S,I)),512&r.flags&&(r.check=o(r.check,c,S,h)),p-=S,h+=S,r.length-=S),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===p)break t;for(S=0;I=c[h+S++],r.head&&I&&r.length<65536&&(r.head.name+=String.fromCharCode(I)),I&&S<p;);if(512&r.flags&&(r.check=o(r.check,c,S,h)),p-=S,h+=S,I)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===p)break t;for(S=0;I=c[h+S++],r.head&&I&&r.length<65536&&(r.head.comment+=String.fromCharCode(I)),I&&S<p;);if(512&r.flags&&(r.check=o(r.check,c,S,h)),p-=S,h+=S,I)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;g<16;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if(v!==(65535&r.check)){t.msg="header crc mismatch",r.mode=30;break}g=v=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=12;break;case 10:for(;g<32;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}t.adler=r.check=f(v),g=v=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=d,t.avail_out=y,t.next_in=h,t.avail_in=p,r.hold=v,r.bits=g,2;t.adler=r.check=1,r.mode=12;case 12:if(5===e||6===e)break t;case 13:if(r.last){v>>>=7&g,g-=7&g,r.mode=27;break}for(;g<3;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}switch(r.last=1&v,g-=1,3&(v>>>=1)){case 0:r.mode=14;break;case 1:if(m(r),r.mode=20,6!==e)break;v>>>=2,g-=2;break t;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=30}v>>>=2,g-=2;break;case 14:for(v>>>=7&g,g-=7&g;g<32;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if((65535&v)!=(v>>>16^65535)){t.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&v,g=v=0,r.mode=15,6===e)break t;case 15:r.mode=16;case 16:if(S=r.length){if(p<S&&(S=p),y<S&&(S=y),0===S)break t;n.arraySet(l,c,h,S,d),p-=S,h+=S,y-=S,d+=S,r.length-=S;break}r.mode=12;break;case 17:for(;g<14;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if(r.nlen=257+(31&v),v>>>=5,g-=5,r.ndist=1+(31&v),v>>>=5,g-=5,r.ncode=4+(15&v),v>>>=4,g-=4,286<r.nlen||30<r.ndist){t.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;g<3;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}r.lens[U[r.have++]]=7&v,v>>>=3,g-=3}for(;r.have<19;)r.lens[U[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,M={bits:r.lenbits},T=a(0,r.lens,0,19,r.lencode,0,r.work,M),r.lenbits=M.bits,T){t.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;B=(D=r.lencode[v&(1<<r.lenbits)-1])>>>16&255,C=65535&D,!((x=D>>>24)<=g);){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if(C<16)v>>>=x,g-=x,r.lens[r.have++]=C;else{if(16===C){for(O=x+2;g<O;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if(v>>>=x,g-=x,0===r.have){t.msg="invalid bit length repeat",r.mode=30;break}I=r.lens[r.have-1],S=3+(3&v),v>>>=2,g-=2}else if(17===C){for(O=x+3;g<O;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}g-=x,I=0,S=3+(7&(v>>>=x)),v>>>=3,g-=3}else{for(O=x+7;g<O;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}g-=x,I=0,S=11+(127&(v>>>=x)),v>>>=7,g-=7}if(r.have+S>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=30;break}for(;S--;)r.lens[r.have++]=I}}if(30===r.mode)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,M={bits:r.lenbits},T=a(1,r.lens,0,r.nlen,r.lencode,0,r.work,M),r.lenbits=M.bits,T){t.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,M={bits:r.distbits},T=a(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,M),r.distbits=M.bits,T){t.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===e)break t;case 20:r.mode=21;case 21:if(6<=p&&258<=y){t.next_out=d,t.avail_out=y,t.next_in=h,t.avail_in=p,r.hold=v,r.bits=g,s(t,w),d=t.next_out,l=t.output,y=t.avail_out,h=t.next_in,c=t.input,p=t.avail_in,v=r.hold,g=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;B=(D=r.lencode[v&(1<<r.lenbits)-1])>>>16&255,C=65535&D,!((x=D>>>24)<=g);){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if(B&&!(240&B)){for(R=x,P=B,A=C;B=(D=r.lencode[A+((v&(1<<R+P)-1)>>R)])>>>16&255,C=65535&D,!(R+(x=D>>>24)<=g);){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}v>>>=R,g-=R,r.back+=R}if(v>>>=x,g-=x,r.back+=x,r.length=C,0===B){r.mode=26;break}if(32&B){r.back=-1,r.mode=12;break}if(64&B){t.msg="invalid literal/length code",r.mode=30;break}r.extra=15&B,r.mode=22;case 22:if(r.extra){for(O=r.extra;g<O;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}r.length+=v&(1<<r.extra)-1,v>>>=r.extra,g-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;B=(D=r.distcode[v&(1<<r.distbits)-1])>>>16&255,C=65535&D,!((x=D>>>24)<=g);){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if(!(240&B)){for(R=x,P=B,A=C;B=(D=r.distcode[A+((v&(1<<R+P)-1)>>R)])>>>16&255,C=65535&D,!(R+(x=D>>>24)<=g);){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}v>>>=R,g-=R,r.back+=R}if(v>>>=x,g-=x,r.back+=x,64&B){t.msg="invalid distance code",r.mode=30;break}r.offset=C,r.extra=15&B,r.mode=24;case 24:if(r.extra){for(O=r.extra;g<O;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}r.offset+=v&(1<<r.extra)-1,v>>>=r.extra,g-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===y)break t;if(S=w-y,r.offset>S){if((S=r.offset-S)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=30;break}S>r.wnext?(S-=r.wnext,k=r.wsize-S):k=r.wnext-S,S>r.length&&(S=r.length),E=r.window}else E=l,k=d-r.offset,S=r.length;for(y<S&&(S=y),y-=S,r.length-=S;l[d++]=E[k++],--S;);0===r.length&&(r.mode=21);break;case 26:if(0===y)break t;l[d++]=r.length,y--,r.mode=21;break;case 27:if(r.wrap){for(;g<32;){if(0===p)break t;p--,v|=c[h++]<<g,g+=8}if(w-=y,t.total_out+=w,r.total+=w,w&&(t.adler=r.check=r.flags?o(r.check,l,w,d-w):i(r.check,l,w,d-w)),w=y,(r.flags?v:f(v))!==r.check){t.msg="incorrect data check",r.mode=30;break}g=v=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;g<32;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if(v!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=30;break}g=v=0}r.mode=29;case 29:T=1;break t;case 30:T=-3;break t;case 31:return-4;default:return u}return t.next_out=d,t.avail_out=y,t.next_in=h,t.avail_in=p,r.hold=v,r.bits=g,(r.wsize||w!==t.avail_out&&r.mode<30&&(r.mode<27||4!==e))&&b(t,t.output,t.next_out,w-t.avail_out)?(r.mode=31,-4):(_-=t.avail_in,w-=t.avail_out,t.total_in+=_,t.total_out+=w,r.total+=w,r.wrap&&w&&(t.adler=r.check=r.flags?o(r.check,l,w,t.next_out-w):i(r.check,l,w,t.next_out-w)),t.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0===_&&0===w||4===e)&&0===T&&(T=-5),T)},r.inflateEnd=function(t){if(!t||!t.state)return u;var e=t.state;return e.window&&(e.window=null),t.state=null,0},r.inflateGetHeader=function(t,e){var r;return t&&t.state&&2&(r=t.state).wrap?((r.head=e).done=!1,0):u},r.inflateSetDictionary=function(t,e){var r,n=e.length;return t&&t.state?0!==(r=t.state).wrap&&11!==r.mode?u:11===r.mode&&i(1,e,n,0)!==r.check?-3:b(t,e,n,n)?(r.mode=31,-4):(r.havedict=1,0):u},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,"./inftrees":12}],12:[function(t,e,r){"use strict";var n=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,r,u,f,c,l,h){var d,p,y,v,g,m,b,_,w,S=h.bits,k=0,E=0,x=0,B=0,C=0,R=0,P=0,A=0,I=0,T=0,M=null,O=0,D=new n.Buf16(16),j=new n.Buf16(16),U=null,z=0;for(k=0;k<=15;k++)D[k]=0;for(E=0;E<u;E++)D[e[r+E]]++;for(C=S,B=15;1<=B&&0===D[B];B--);if(B<C&&(C=B),0===B)return f[c++]=20971520,f[c++]=20971520,h.bits=1,0;for(x=1;x<B&&0===D[x];x++);for(C<x&&(C=x),k=A=1;k<=15;k++)if(A<<=1,(A-=D[k])<0)return-1;if(0<A&&(0===t||1!==B))return-1;for(j[1]=0,k=1;k<15;k++)j[k+1]=j[k]+D[k];for(E=0;E<u;E++)0!==e[r+E]&&(l[j[e[r+E]]++]=E);if(0===t?(M=U=l,m=19):1===t?(M=i,O-=257,U=o,z-=257,m=256):(M=s,U=a,m=-1),k=x,g=c,P=E=T=0,y=-1,v=(I=1<<(R=C))-1,1===t&&852<I||2===t&&592<I)return 1;for(;;){for(b=k-P,l[E]<m?(_=0,w=l[E]):l[E]>m?(_=U[z+l[E]],w=M[O+l[E]]):(_=96,w=0),d=1<<k-P,x=p=1<<R;f[g+(T>>P)+(p-=d)]=b<<24|_<<16|w,0!==p;);for(d=1<<k-1;T&d;)d>>=1;if(0!==d?(T&=d-1,T+=d):T=0,E++,0==--D[k]){if(k===B)break;k=e[r+l[E]]}if(C<k&&(T&v)!==y){for(0===P&&(P=C),g+=x,A=1<<(R=k-P);R+P<B&&!((A-=D[R+P])<=0);)R++,A<<=1;if(I+=1<<R,1===t&&852<I||2===t&&592<I)return 1;f[y=T&v]=C<<24|R<<16|g-c}}return 0!==T&&(f[g+T]=k-P<<24|64<<16),h.bits=C,0}},{"../utils/common":3}],13:[function(t,e,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],14:[function(t,e,r){"use strict";var n=t("../utils/common");function i(t){for(var e=t.length;0<=--e;)t[e]=0}var o=256,s=286,a=30,u=15,f=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],c=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],h=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],d=new Array(576);i(d);var p=new Array(60);i(p);var y=new Array(512);i(y);var v=new Array(256);i(v);var g=new Array(29);i(g);var m,b,_,w=new Array(a);function S(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function k(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function E(t){return t<256?y[t]:y[256+(t>>>7)]}function x(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function B(t,e,r){t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,x(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function C(t,e,r){B(t,r[2*e],r[2*e+1])}function R(t,e){for(var r=0;r|=1&t,t>>>=1,r<<=1,0<--e;);return r>>>1}function P(t,e,r){var n,i,o=new Array(16),s=0;for(n=1;n<=u;n++)o[n]=s=s+r[n-1]<<1;for(i=0;i<=e;i++){var a=t[2*i+1];0!==a&&(t[2*i]=R(o[a]++,a))}}function A(t){var e;for(e=0;e<s;e++)t.dyn_ltree[2*e]=0;for(e=0;e<a;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function I(t){8<t.bi_valid?x(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function T(t,e,r,n){var i=2*e,o=2*r;return t[i]<t[o]||t[i]===t[o]&&n[e]<=n[r]}function M(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&T(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!T(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function O(t,e,r){var n,i,s,a,u=0;if(0!==t.last_lit)for(;n=t.pending_buf[t.d_buf+2*u]<<8|t.pending_buf[t.d_buf+2*u+1],i=t.pending_buf[t.l_buf+u],u++,0===n?C(t,i,e):(C(t,(s=v[i])+o+1,e),0!==(a=f[s])&&B(t,i-=g[s],a),C(t,s=E(--n),r),0!==(a=c[s])&&B(t,n-=w[s],a)),u<t.last_lit;);C(t,256,e)}function D(t,e){var r,n,i,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,f=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<f;r++)0!==o[2*r]?(t.heap[++t.heap_len]=c=r,t.depth[r]=0):o[2*r+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[i]=0,t.opt_len--,a&&(t.static_len-=s[2*i+1]);for(e.max_code=c,r=t.heap_len>>1;1<=r;r--)M(t,o,r);for(i=f;r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],M(t,o,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,o[2*i]=o[2*r]+o[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,o[2*r+1]=o[2*n+1]=i,t.heap[1]=i++,M(t,o,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,n,i,o,s,a,f=e.dyn_tree,c=e.max_code,l=e.stat_desc.static_tree,h=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,y=e.stat_desc.max_length,v=0;for(o=0;o<=u;o++)t.bl_count[o]=0;for(f[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<573;r++)y<(o=f[2*f[2*(n=t.heap[r])+1]+1]+1)&&(o=y,v++),f[2*n+1]=o,c<n||(t.bl_count[o]++,s=0,p<=n&&(s=d[n-p]),a=f[2*n],t.opt_len+=a*(o+s),h&&(t.static_len+=a*(l[2*n+1]+s)));if(0!==v){do{for(o=y-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[y]--,v-=2}while(0<v);for(o=y;0!==o;o--)for(n=t.bl_count[o];0!==n;)c<(i=t.heap[--r])||(f[2*i+1]!==o&&(t.opt_len+=(o-f[2*i+1])*f[2*i],f[2*i+1]=o),n--)}}(t,e),P(o,c,t.bl_count)}function j(t,e,r){var n,i,o=-1,s=e[1],a=0,u=7,f=4;for(0===s&&(u=138,f=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=s,s=e[2*(n+1)+1],++a<u&&i===s||(a<f?t.bl_tree[2*i]+=a:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=i,(a=0)===s?(u=138,f=3):i===s?(u=6,f=3):(u=7,f=4))}function U(t,e,r){var n,i,o=-1,s=e[1],a=0,u=7,f=4;for(0===s&&(u=138,f=3),n=0;n<=r;n++)if(i=s,s=e[2*(n+1)+1],!(++a<u&&i===s)){if(a<f)for(;C(t,i,t.bl_tree),0!=--a;);else 0!==i?(i!==o&&(C(t,i,t.bl_tree),a--),C(t,16,t.bl_tree),B(t,a-3,2)):a<=10?(C(t,17,t.bl_tree),B(t,a-3,3)):(C(t,18,t.bl_tree),B(t,a-11,7));o=i,(a=0)===s?(u=138,f=3):i===s?(u=6,f=3):(u=7,f=4)}}i(w);var z=!1;function N(t,e,r,i){var o,s,a;B(t,0+(i?1:0),3),s=e,a=r,I(o=t),x(o,a),x(o,~a),n.arraySet(o.pending_buf,o.window,s,a,o.pending),o.pending+=a}r._tr_init=function(t){z||(function(){var t,e,r,n,i,o=new Array(16);for(n=r=0;n<28;n++)for(g[n]=r,t=0;t<1<<f[n];t++)v[r++]=n;for(v[r-1]=n,n=i=0;n<16;n++)for(w[n]=i,t=0;t<1<<c[n];t++)y[i++]=n;for(i>>=7;n<a;n++)for(w[n]=i<<7,t=0;t<1<<c[n]-7;t++)y[256+i++]=n;for(e=0;e<=u;e++)o[e]=0;for(t=0;t<=143;)d[2*t+1]=8,t++,o[8]++;for(;t<=255;)d[2*t+1]=9,t++,o[9]++;for(;t<=279;)d[2*t+1]=7,t++,o[7]++;for(;t<=287;)d[2*t+1]=8,t++,o[8]++;for(P(d,287,o),t=0;t<a;t++)p[2*t+1]=5,p[2*t]=R(t,5);m=new S(d,f,257,s,u),b=new S(p,c,0,a,u),_=new S(new Array(0),l,0,19,7)}(),z=!0),t.l_desc=new k(t.dyn_ltree,m),t.d_desc=new k(t.dyn_dtree,b),t.bl_desc=new k(t.bl_tree,_),t.bi_buf=0,t.bi_valid=0,A(t)},r._tr_stored_block=N,r._tr_flush_block=function(t,e,r,n){var i,s,a=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<o;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),D(t,t.l_desc),D(t,t.d_desc),a=function(t){var e;for(j(t,t.dyn_ltree,t.l_desc.max_code),j(t,t.dyn_dtree,t.d_desc.max_code),D(t,t.bl_desc),e=18;3<=e&&0===t.bl_tree[2*h[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=i&&(i=s)):i=s=r+5,r+4<=i&&-1!==e?N(t,e,r,n):4===t.strategy||s===i?(B(t,2+(n?1:0),3),O(t,d,p)):(B(t,4+(n?1:0),3),function(t,e,r,n){var i;for(B(t,e-257,5),B(t,r-1,5),B(t,n-4,4),i=0;i<n;i++)B(t,t.bl_tree[2*h[i]+1],3);U(t,t.dyn_ltree,e-1),U(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),O(t,t.dyn_ltree,t.dyn_dtree)),A(t),n&&I(t)},r._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(v[r]+o+1)]++,t.dyn_dtree[2*E(e)]++),t.last_lit===t.lit_bufsize-1},r._tr_align=function(t){var e;B(t,2,3),C(t,256,d),16===(e=t).bi_valid?(x(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{"../utils/common":3}],15:[function(t,e,r){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/":[function(t,e,r){"use strict";var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=n},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},{},[])("/")},"object"==s(e)?t.exports=o():(n=[],void 0===(i="function"==typeof(r=o)?r.apply(e,n):r)||(t.exports=i))},905:function(t,e,r){var n;t.exports=(n=r(21),r(165),n.pad.Iso10126={pad:function(t,e){var r=4*e,i=r-t.sigBytes%r;t.concat(n.lib.WordArray.random(i-1)).concat(n.lib.WordArray.create([i<<24],1))},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},n.pad.Iso10126)},939:function(t,e,r){var n,i,o;t.exports=(o=r(21),r(165),o.mode.CTR=(n=o.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(t,e){var r=this._cipher,n=r.blockSize,i=this._iv,o=this._counter;i&&(o=this._counter=i.slice(0),this._iv=void 0);var s=o.slice(0);r.encryptBlock(s,0),o[n-1]=o[n-1]+1|0;for(var a=0;a<n;a++)t[e+a]^=s[a]}}),n.Decryptor=i,n),o.mode.CTR)},953:function(t,e,r){var n;t.exports=(n=r(21),r(240),function(t){var e=n,r=e.lib,i=r.WordArray,o=r.Hasher,s=e.x64.Word,a=e.algo,u=[],f=[],c=[];!function(){for(var t=1,e=0,r=0;r<24;r++){u[t+5*e]=(r+1)*(r+2)/2%64;var n=(2*t+3*e)%5;t=e%5,e=n}for(t=0;t<5;t++)for(e=0;e<5;e++)f[t+5*e]=e+(2*t+3*e)%5*5;for(var i=1,o=0;o<24;o++){for(var a=0,l=0,h=0;h<7;h++){if(1&i){var d=(1<<h)-1;d<32?l^=1<<d:a^=1<<d-32}128&i?i=i<<1^113:i<<=1}c[o]=s.create(a,l)}}();var l=[];!function(){for(var t=0;t<25;t++)l[t]=s.create()}();var h=a.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var t=this._state=[],e=0;e<25;e++)t[e]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(t,e){for(var r=this._state,n=this.blockSize/2,i=0;i<n;i++){var o=t[e+2*i],s=t[e+2*i+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),(R=r[i]).high^=s,R.low^=o}for(var a=0;a<24;a++){for(var h=0;h<5;h++){for(var d=0,p=0,y=0;y<5;y++)d^=(R=r[h+5*y]).high,p^=R.low;var v=l[h];v.high=d,v.low=p}for(h=0;h<5;h++){var g=l[(h+4)%5],m=l[(h+1)%5],b=m.high,_=m.low;for(d=g.high^(b<<1|_>>>31),p=g.low^(_<<1|b>>>31),y=0;y<5;y++)(R=r[h+5*y]).high^=d,R.low^=p}for(var w=1;w<25;w++){var S=(R=r[w]).high,k=R.low,E=u[w];E<32?(d=S<<E|k>>>32-E,p=k<<E|S>>>32-E):(d=k<<E-32|S>>>64-E,p=S<<E-32|k>>>64-E);var x=l[f[w]];x.high=d,x.low=p}var B=l[0],C=r[0];for(B.high=C.high,B.low=C.low,h=0;h<5;h++)for(y=0;y<5;y++){var R=r[w=h+5*y],P=l[w],A=l[(h+1)%5+5*y],I=l[(h+2)%5+5*y];R.high=P.high^~A.high&I.high,R.low=P.low^~A.low&I.low}R=r[0];var T=c[a];R.high^=T.high,R.low^=T.low}},_doFinalize:function(){var e=this._data,r=e.words,n=(this._nDataBytes,8*e.sigBytes),o=32*this.blockSize;r[n>>>5]|=1<<24-n%32,r[(t.ceil((n+1)/o)*o>>>5)-1]|=128,e.sigBytes=4*r.length,this._process();for(var s=this._state,a=this.cfg.outputLength/8,u=a/8,f=[],c=0;c<u;c++){var l=s[c],h=l.high,d=l.low;h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),f.push(d),f.push(h)}return new i.init(f,a)},clone:function(){for(var t=o.clone.call(this),e=t._state=this._state.slice(0),r=0;r<25;r++)e[r]=e[r].clone();return t}});e.SHA3=o._createHelper(h),e.HmacSHA3=o._createHmacHelper(h)}(Math),n.SHA3)},955:function(t,e,r){var n;t.exports=(n=r(21),r(754),r(636),r(506),r(165),function(){var t=n,e=t.lib.BlockCipher,r=t.algo,i=[],o=[],s=[],a=[],u=[],f=[],c=[],l=[],h=[],d=[];!function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var r=0,n=0;for(e=0;e<256;e++){var p=n^n<<1^n<<2^n<<3^n<<4;p=p>>>8^255&p^99,i[r]=p,o[p]=r;var y=t[r],v=t[y],g=t[v],m=257*t[p]^16843008*p;s[r]=m<<24|m>>>8,a[r]=m<<16|m>>>16,u[r]=m<<8|m>>>24,f[r]=m,m=16843009*g^65537*v^257*y^16843008*r,c[p]=m<<24|m>>>8,l[p]=m<<16|m>>>16,h[p]=m<<8|m>>>24,d[p]=m,r?(r=y^t[t[t[g^y]]],n^=t[t[n]]):r=n=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],y=r.AES=e.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,r=t.sigBytes/4,n=4*((this._nRounds=r+6)+1),o=this._keySchedule=[],s=0;s<n;s++)s<r?o[s]=e[s]:(f=o[s-1],s%r?r>6&&s%r==4&&(f=i[f>>>24]<<24|i[f>>>16&255]<<16|i[f>>>8&255]<<8|i[255&f]):(f=i[(f=f<<8|f>>>24)>>>24]<<24|i[f>>>16&255]<<16|i[f>>>8&255]<<8|i[255&f],f^=p[s/r|0]<<24),o[s]=o[s-r]^f);for(var a=this._invKeySchedule=[],u=0;u<n;u++){if(s=n-u,u%4)var f=o[s];else f=o[s-4];a[u]=u<4||s<=4?f:c[i[f>>>24]]^l[i[f>>>16&255]]^h[i[f>>>8&255]]^d[i[255&f]]}}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,s,a,u,f,i)},decryptBlock:function(t,e){var r=t[e+1];t[e+1]=t[e+3],t[e+3]=r,this._doCryptBlock(t,e,this._invKeySchedule,c,l,h,d,o),r=t[e+1],t[e+1]=t[e+3],t[e+3]=r},_doCryptBlock:function(t,e,r,n,i,o,s,a){for(var u=this._nRounds,f=t[e]^r[0],c=t[e+1]^r[1],l=t[e+2]^r[2],h=t[e+3]^r[3],d=4,p=1;p<u;p++){var y=n[f>>>24]^i[c>>>16&255]^o[l>>>8&255]^s[255&h]^r[d++],v=n[c>>>24]^i[l>>>16&255]^o[h>>>8&255]^s[255&f]^r[d++],g=n[l>>>24]^i[h>>>16&255]^o[f>>>8&255]^s[255&c]^r[d++],m=n[h>>>24]^i[f>>>16&255]^o[c>>>8&255]^s[255&l]^r[d++];f=y,c=v,l=g,h=m}y=(a[f>>>24]<<24|a[c>>>16&255]<<16|a[l>>>8&255]<<8|a[255&h])^r[d++],v=(a[c>>>24]<<24|a[l>>>16&255]<<16|a[h>>>8&255]<<8|a[255&f])^r[d++],g=(a[l>>>24]<<24|a[h>>>16&255]<<16|a[f>>>8&255]<<8|a[255&c])^r[d++],m=(a[h>>>24]<<24|a[f>>>16&255]<<16|a[c>>>8&255]<<8|a[255&l])^r[d++],t[e]=y,t[e+1]=v,t[e+2]=g,t[e+3]=m},keySize:8});t.AES=e._createHelper(y)}(),n.AES)}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,r),o.exports}r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,n(i.key),i)}}function n(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,r||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==t(r)?r:r+""}var i=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._pairs=[],this.size=0},(r=[{key:"has",value:function(t){return this._indexOf(t)>-1}},{key:"get",value:function(t){var e=this._indexOf(t);if(e>-1)return this._pairs[e][1]}},{key:"set",value:function(t,e){var r=this._indexOf(t);r>-1?this._pairs[r][1]=e:(this._pairs.push([t,e]),this.size++)}},{key:"delete",value:function(t){var e=this._indexOf(t);return e>-1&&(this._pairs.splice(e,1),this.size--,!0)}},{key:"forEach",value:function(t){for(var e=0;e<this._pairs.length;e++)t(this._pairs[e][1],this._pairs[e][0])}},{key:"clear",value:function(){this._pairs=[]}},{key:"_indexOf",value:function(t){for(var e=0;e<this._pairs.length;e++)if(this._pairs[e][0]===t)return e;return-1}}])&&e(t.prototype,r),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}(),o=function(){return new(self.Map||i)};function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function u(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}var f=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._set=[],this.size=0},(e=[{key:"add",value:function(t){return this._set.push(t),this.size++,this}},{key:"has",value:function(t){return this._set.indexOf(t)>-1}},{key:"delete",value:function(t){for(var e=0;e<this._set.length;e++)if(this._set[e]===t)return this._set.splice(e,1),this.size--,!0;return!1}},{key:"forEach",value:function(t){for(var e=0;e<this._set.length;e++)t(this._set[e])}},{key:"clear",value:function(){this._set=[]}}])&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),c=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=new(self.Set||f),r=0;r<t.length;r++)e.add(t[r]);return e};function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,d(n.key),n)}}function d(t){var e=function(t,e){if("object"!=l(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==l(e)?e:e+""}var p=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._msgListeners=o()},e=[{key:"setMessagingPort",value:function(t){var e=this;this._messagePort=t,t.setonmessage(function(t){var r=t.data,n=[],i=e._msgListeners.get(r.msgType);i&&i.forEach(function(t){t.callback(r.data),t.isOneTime&&n.push(t)}),n.forEach(function(t){i.delete(t)})})}},{key:"sendAsync",value:function(t,e,r,n,i){n&&r&&this.addMessageListener(r,n,i),this._messagePort.postMessage({msgType:t,data:e})}},{key:"addMessageListener",value:function(t,e,r){var n=null;this._msgListeners.has(t)?n=this._msgListeners.get(t):(n=c(),this._msgListeners.set(t,n)),n.add({callback:e,isOneTime:r})}}],e&&h(t.prototype,e),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),y="dataWupDispatchRateSettings",v="logWupDispatchRateSettings",g="forceDynamicDataWupDispatchSettings",m="wupStatisticsLogIntervalMs",b="serverCommunicationSettings",_="wupResponseTimeout",w="wupMessageRequestTimeout",S="logMessageRequestTimeout",k="crossDomainsList",E="logLevel",x="allowedUnmaskedValuesList",B="wupMessageNumToRetry",C="wupMessageRetryInterval",R="wupIncrementalGrowthBetweenFailures",P="wupMaxIntervalBetweenFailures",A="logMessageNumToRetry",I="logMessageRetryInterval",T="logIncrementalGrowthBetweenFailures",M="logMaxIntervalBetweenFailures",O="NewSessionStartedEvent",D="ConfigurationLoadedEvent",j="ServerStateUpdatedEvent",U="HeartBeatStatusEvent",z="ServerRestoredMuidEvent",N="ServerNewAgentIdEvent",L=10,F=20,H=30,W=40;function q(t){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function Y(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=q(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==q(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Z={V1_ONLY:"0",DUAL_COLLECTION_V1_PRIORITY:"1",DUAL_COLLECTION_V2_PRIORITY:"2",V2_ONLY:"3",isValid:function(t){return Object.values(Z).includes(t)},getDescription:function(t){return Y(Y(Y(Y({},Z.V1_ONLY,"Only V1 collector is active"),Z.DUAL_COLLECTION_V1_PRIORITY,"Both collectors active, V1 is primary"),Z.DUAL_COLLECTION_V2_PRIORITY,"Both collectors active, V2 is primary"),Z.V2_ONLY,"Only V2 collector is active")[t]||"Unknown stage"}},V=Z;function K(t){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(t)}function G(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,X(n.key),n)}}function X(t){var e=function(t,e){if("object"!=K(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==K(e)?e:e+""}var Q={defaultDynamicWupDispatchRateConfiguration:{type:"dynamic"},defaultIncrementalWupDispatchRateConfiguration:{type:"incremental",initialRateValueMs:500,incrementStepMs:500,incrementStopMs:5e3,incrementStartWupSendCount:20}},J=["keyEventsMaskSpecialChars","passwordIdMaskingList","maskElementsAttributes",x,"enableUnmaskedValues","enableCoordinatesMasking"],$=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._requireParseFields=o(),this._requireParseFields.set(y,y),this._requireParseFields.set(v,v),this._requireParseFields.set(k,k),this._requireParseFields.set(x,x),this._requireParseFields.set(b,b),this._configurationList={},this.configDefault={logLevel:F,isCrossdomain:!1,isGfxRendering:!1,isAudioDetectFeature:!1,enableEmuidFeature:!1,crossDomainsList:[],crossDomainsTimeout:5e3,orientationEventsSamplePeriod:300,orientationEventsThreshold:1,stateChangeEnabled:!1,accelerometerEventsSamplePeriod:0,dataQPassWorkerInterval:500,gyroEventsSamplePeriod:0,gyroEventsThreshold:.3,isContextPropsFeature:!0,isEnabled:!0,isResetEveryLoad:!1,isScrollCollect:!0,isVMDetection:!0,isAudioDetection:!1,wupStatisticsLogIntervalMs:3e4,heartBeatMessageInterval:5e3,resetSessionApiThreshold:2e4,wupMessageRequestTimeout:5e3,logMessageRequestTimeout:5e3,slaveChannelHandshakeTimeout:6e4,slaveAliveMessageInterval:100,forceDynamicDataWupDispatchSettings:!0,dataWupDispatchRateSettings:Q.defaultDynamicWupDispatchRateConfiguration,logWupDispatchRateSettings:{type:"constant",initialRateValueMs:2500},serverCommunicationSettings:{queueLoadThreshold:100},collectKeyRegionValue:!1,isMutationObserver:!0,collectCustomElementAttribute:!0,isCaptureKeyEvents:!1,locationEventsTimeoutMsec:1e4,isMotionAroundTouchEnabled:!0,motionPaddingAroundTouchMSec:3e3,isMotionOnSessionStart:!0,motionPaddingOnSessionStartMSec:2e4,keyEventsMaskSpecialChars:!1,collectSelectElementBlurAndFocusEvents:!1,enableUnmaskedValues:!1,allowedUnmaskedValuesList:[],wupMessageNumToRetry:5,wupMessageRetryInterval:1e3,wupIncrementalGrowthBetweenFailures:3500,wupMaxIntervalBetweenFailures:16e3,logMessageNumToRetry:5,logMessageRetryInterval:1e3,logIncrementalGrowthBetweenFailures:3500,logMaxIntervalBetweenFailures:16e3,cdsNumExpirationTime:60,enableCoordinatesMasking:!1,acknowledgeDataDispatchingRate:3e3,passwordIdMaskingList:[],isFontWidthFeature:!1,isFontMathFeature:!1,isFontEmojiFeature:!1,isStorageFeature:!1,isKeyboardLayoutFeature:!1,isScreenHighResFeature:!1,isBatteryStatusFeature:!1,isNavigatorFeature:!1,isWebglFeature:!1,isWebRTCFeature:!1,isSpeechVoicesFeature:!1,isDRMFeature:!1,isBrowserExtensionsFeature:!1,isAdblockerListsFeature:!1,isAudioDetectFeature2:!1,elementUniqueIDConfiguration:{componentsFormat:"{tagName}_{index}_{id}_{className}_{ariaLabel}_{containerInfo}_{hierarchyPath}",hierarchyFormat:"{tagName}_{index}",enabledTags:["input","textarea","button","select","div","span"]},offloadFontsCollectionEnabled:!0,fontCollection:JSON.stringify({migrationMode:V.V1_ONLY,v2:{batchSize:5,timeoutGap:0}}),enableElementHierarchy:!1,enableElementCategory:!0,isCPUFeature:!1},this.loadConfigurations(this.configDefault)},(e=[{key:"isConfigurationUpdatedFromServer",value:function(){return!this._isDefaultConfiguration}},{key:"loadConfigurations",value:function(t,e){var r=this;t&&(this._isDefaultConfiguration=t===this.configDefault,Object.keys(t).forEach(function(n){if(e||r._isDefaultConfiguration||!J.includes(n)){var i=t[n];if(r._requireParseFields.has(n)){var o=r._tryParseConfigurationValue(i);o&&(i=o)}r._configurationList[n]=i}}))}},{key:"get",value:function(t){return this._configurationList[t]}},{key:"set",value:function(t,e){this._configurationList[t]=e}},{key:"getAll",value:function(){return this._configurationList}},{key:"_tryParseConfigurationValue",value:function(t){if("string"!=typeof t)return null;try{return JSON.parse(t)}catch(t){}return null}}])&&G(t.prototype,e),r&&G(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function tt(t){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tt(t)}function et(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rt(n.key),n)}}function rt(t){var e=function(t,e){if("object"!=tt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tt(e)?e:e+""}var nt=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._listeners=[]},(e=[{key:"subscribe",value:function(t){this._listeners.push(t)}},{key:"publish",value:function(t){for(var e=0,r=this._listeners.length;e<r;e++)this._listeners[e](t)}},{key:"unsubscribe",value:function(t){for(var e=0,r=this._listeners.length;e<r;e++)if(t===this._listeners[e]){this._listeners.splice(e,1);break}}}])&&et(t.prototype,e),r&&et(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function it(t){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},it(t)}function ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function st(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ut(n.key),n)}}function at(t,e,r){return e&&st(t.prototype,e),r&&st(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ut(t){var e=function(t,e){if("object"!=it(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=it(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==it(e)?e:e+""}var ft=function(){return at(function t(){ot(this,t)},null,[{key:"setLogger",value:function(t){this._logger=t}},{key:"attachSessionIdentifiers",value:function(t){if(this._logger)return this._logger.attachSessionIdentifiers(t)}},{key:"isDebug",value:function(){if(this._logger)return this._logger.isDebug()}},{key:"error",value:function(t,e){this._logger&&this._logger.error(t,e||null)}},{key:"warn",value:function(t,e){this._logger&&this._logger.warn(t,e||null)}},{key:"trace",value:function(t){this._logger&&this._logger.trace(t)}},{key:"debug",value:function(t){this._logger&&this._logger.debug(t)}},{key:"info",value:function(t){this._logger&&this._logger.info(t)}}])}(),ct=function(){return at(function t(e,r){ot(this,t),this._logBridge=e,this._logLevel=r||F,this._sessionIdentifiers={}},[{key:"attachSessionIdentifiers",value:function(t){Object.assign(this._sessionIdentifiers,t)}},{key:"trace",value:function(t){this._sendToLogBridge(t,L)}},{key:"debug",value:function(t){this._sendToLogBridge(t,L)}},{key:"info",value:function(t){this._sendToLogBridge(t,F)}},{key:"warn",value:function(t,e){this._sendToLogBridge(t,H,e)}},{key:"error",value:function(t,e){this._sendToLogBridge(t,W,e)}},{key:"isDebug",value:function(){return this._logLevel===L}},{key:"updateLogConfig",value:function(t){this._logLevel=t.get(E)||this._logLevel,this._logBridge.setLogLevel(this._logLevel),this._logBridge.clearLogEntriesByLogLevel(this._logLevel)}},{key:"_sendToLogBridge",value:function(t,e,r){e>=this._logLevel&&(r&&r.stack&&(t+=" ;stack: ".concat(r.stack)),this._logBridge.log(t,e,this._sessionIdentifiers))}}])}();function lt(t){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lt(t)}function ht(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dt(n.key),n)}}function dt(t){var e=function(t,e){if("object"!=lt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lt(e)?e:e+""}var pt=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.onServerStateUpdated=new nt,this.reset()},e=[{key:"getSts",value:function(){return this._sts}},{key:"getStd",value:function(){return this._std}},{key:"getSid",value:function(){return this._sid}},{key:"setCid",value:function(t){this._cid=t}},{key:"getCid",value:function(){return this._cid}},{key:"getCsid",value:function(){return this._csid}},{key:"getPsid",value:function(){return this._psid}},{key:"getMuid",value:function(){return this._muid}},{key:"getContextName",value:function(){return this._contextName}},{key:"getRequestId",value:function(){return this._requestId}},{key:"getWupDispatchRate",value:function(){return this._wupDispatchRate}},{key:"getBrand",value:function(){return this._brand}},{key:"setSts",value:function(t){this._sts=t}},{key:"setStd",value:function(t){this._std=t}},{key:"setSid",value:function(t){this._sid=t}},{key:"setCsid",value:function(t){this._csid=t}},{key:"setPsid",value:function(t){this._psid=t}},{key:"setMuid",value:function(t){this._muid=t||null}},{key:"setOtt",value:function(t){this._ott=t}},{key:"getOtt",value:function(){return this._ott}},{key:"setContextName",value:function(t){this._contextName=t}},{key:"setRequestId",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._requestId=t,e&&this._publish(),this._requestId}},{key:"setWupDispatchRate",value:function(t){t?this._wupDispatchRate=t:ft.warn("Wup dispatch rate of ".concat(t," is invalid. Ignoring update"))}},{key:"setBrand",value:function(t){this._brand=t}},{key:"setAgentType",value:function(t){this._agent_type=t}},{key:"getAgentType",value:function(){return this._agent_type}},{key:"setAgentId",value:function(t){this._agent_id=t}},{key:"getAgentId",value:function(){return this._agent_id}},{key:"markConfigurationRequested",value:function(){this._hasConfiguration?ft.warn("We already have configuration. Ignoring the attempt to mark a pending configuration request."):this._hasPendingConfigurationRequest=!0}},{key:"markConfigurationReceived",value:function(){this._hasConfiguration?ft.warn("Marking that we received configuration although we already received configuration from the server. We shouldn\'t have received it again."):this._hasPendingConfigurationRequest||ft.warn("Marking that we received configurations although we didn\'t have a pending request for configurations."),this._hasPendingConfigurationRequest=!1,this._hasConfiguration=!0}},{key:"getHasConfiguration",value:function(){return this._hasConfiguration}},{key:"getHasPendingConfigurationRequest",value:function(){return this._hasPendingConfigurationRequest}},{key:"incrementRequestId",value:function(){return this._requestId++,this._publish(),this._requestId}},{key:"resetRequestId",value:function(){this._requestId=0}},{key:"reset",value:function(){this._ott=null,this._sts=null,this._std=null,this._sid=null,this._cid=null,this._csid=null,this._muid=null,this._contextName=null,this._requestId=0,this._wupDispatchRate=5e3,this._hasConfiguration=!1,this._hasPendingConfigurationRequest=!1,this._brand=null,this._agent_type=null,this._agent_id=null,this._baseServerUrl=null,this._protocolType=null,this._shouldMinifyUri=!1}},{key:"setBaseServerUrl",value:function(t){this._baseServerUrl=t}},{key:"getBaseServerUrl",value:function(){return this._baseServerUrl}},{key:"setProtocolType",value:function(t){this._protocolType=t}},{key:"setShouldMinifyUri",value:function(t){this._shouldMinifyUri=t}},{key:"getShouldMinifyUri",value:function(){return this._shouldMinifyUri}},{key:"getProtocolType",value:function(){return this._protocolType}},{key:"_publish",value:function(){this.onServerStateUpdated.publish({requestId:this._requestId,sid:this._sid,sts:this._sts,std:this._std,ott:this._ott})}}],e&&ht(t.prototype,e),r&&ht(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function yt(t){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt(t)}function vt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gt(n.key),n)}}function gt(t){var e=function(t,e){if("object"!=yt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=yt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yt(e)?e:e+""}var mt=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"build",value:function(t){return t.getInternalMessage()}}])&&vt(t.prototype,e),r&&vt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function bt(t){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bt(t)}function _t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wt(n.key),n)}}function wt(t){var e=function(t,e){if("object"!=bt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bt(e)?e:e+""}var St=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._buffer=[]},(e=[{key:"hasItems",value:function(){return this.length()>0}},{key:"length",value:function(){return this._buffer.length}},{key:"enqueue",value:function(t){this._buffer.push(t)}},{key:"enqueueToHead",value:function(t){this._buffer.unshift(t)}},{key:"dequeue",value:function(){return this._buffer.shift()}},{key:"getItem",value:function(t){return this._buffer[t]}}])&&_t(t.prototype,e),r&&_t(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function kt(t){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kt(t)}function Et(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xt(n.key),n)}}function xt(t){var e=function(t,e){if("object"!=kt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kt(e)?e:e+""}var Bt,Ct,Rt,Pt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return e=t,n=[{key:"addEventListener",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.isPassiveSupported?t.addEventListener(e,r,{capture:n,passive:i,once:o}):t.addEventListener?t.addEventListener(e,r,n):t.attachEvent("on"+e,r)}},{key:"removeEventListener",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.removeEventListener?t.removeEventListener(e,r,n):t.detachEvent("on"+e,r)}},{key:"outerHTML",value:function(t){return t.outerHTML||(new XMLSerializer).serializeToString(t)}},{key:"onDocumentBody",value:function(t,e){t.document.body?e():window.addEventListener?window.addEventListener("DOMContentLoaded",e,!0):window.attachEvent("onload",e)}},{key:"onPageLoad",value:function(e,r){t.addEventListener(e,"load",r,!0),(e.contentWindow&&"complete"===e.contentWindow.document.readyState||e.document&&"complete"===e.document.readyState)&&r()}},{key:"awaitWindowDocumentReady",value:function(t){var e=this;return new Promise(function(r,n){try{e.onWindowDocumentReady(t,function(){r()})}catch(t){n(t)}})}},{key:"onWindowDocumentReady",value:function(e,r){var n=window.addEventListener?"DOMContentLoaded":"load";if("complete"===e.document.readyState||"interactive"===e.document.readyState)r();else{var i=function(){t.removeEventListener(e,n,i,!0),r()};t.addEventListener(e,n,i,!0)}}},{key:"isWindowDocumentReady",value:function(t){return t&&"complete"===t.document.readyState}},{key:"canAccessIFrame",value:function(t){var e=null;try{e=(t.contentDocument||t.contentWindow.document).body.innerHTML}catch(t){}return null!==e}},{key:"matches",value:function(t,e){var r=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector||function(t){var e=this.document||this.ownerDocument;if(!e)return!1;for(var r=e.querySelectorAll(t),n=r.length;--n>=0&&(r.item?r.item(n):r[n])!==this;);return n>-1};return r.call(t,e)}},{key:"isWebWorkerFetchSupported",value:function(){var t="Request"in self,e="fetch"in self;if(!t)return!1;var r="keepalive"in Request.prototype;return e&&r}},{key:"isSubtleCryptoSupported",value:function(){return"SubtleCrypto"in self}}],(r=null)&&Et(e.prototype,r),n&&Et(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();Bt=Pt,Ct="isPassiveSupported",Rt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}(),(Ct=xt(Ct))in Bt?Object.defineProperty(Bt,Ct,{value:Rt,enumerable:!0,configurable:!0,writable:!0}):Bt[Ct]=Rt;var At="X-h",It=r(396),Tt=r.n(It);function Mt(t){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mt(t)}function Ot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Dt(n.key),n)}}function Dt(t){var e=function(t,e){if("object"!=Mt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Mt(e)?e:e+""}var jt=function(){return function(t,e,r){return e&&Ot(t.prototype,e),r&&Ot(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},null,[{key:"hashSha256",value:function(t,e){if(!Pt.isSubtleCryptoSupported())return ft.info("HashService: SubtleCrypto is not supported using fallback hashing"),void e(null,Tt().SHA256(t).toString(Tt().enc.Hex));var r=(new TextEncoder).encode(t);crypto.subtle.digest("SHA-256",r).then(function(t){var r=Array.from(new Uint8Array(t)).map(function(t){return t.toString(16).padStart(2,"0")}).join("");e(null,r)}).catch(function(t){e(t)})}}])}(),Ut="api/v4/wup",zt="client/v3.1/web/wup",Nt="POST";function Lt(t){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lt(t)}function Ft(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ht(n.key),n)}}function Ht(t){var e=function(t,e){if("object"!=Lt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Lt(e)?e:e+""}var Wt=function(){return function(t,e,r){return e&&Ft(t.prototype,e),r&&Ft(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,r,n,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._requestBodyBuilder=e,this.updateSettings(r),this._workerUtils=n,this._acceptNoResponse=o,this._messageDescriptor=s,this.retryMessage=i,this._dataQueue=new St,this._awaitingServerResponse=!1,this._currentSentItem=null,this._sendRetryTimeoutId=null,this._shouldRetryToSendMessage=!1,this._messageIdentifier=0,this._enableRequestBodyHashing=!1,this._isPaused=!1},[{key:"updateSettings",value:function(t){this._queueLoadThershold=t.queueLoadThreshold}},{key:"getRetryMessage",value:function(){return this.retryMessage}},{key:"updateEnableWupMessagesHashing",value:function(t){this._enableRequestBodyHashing=t}},{key:"sendMessage",value:function(t,e,r,n,i,o,s,a){var u=this;this._enqueueMessage(t,e,r,n,function(t){u._onMessageSendSuccess(t,i)},function(t,e,r){u._onMessageSendFailure(t,e,r,o,s)},a)}},{key:"flush",value:function(){this._flushData()}},{key:"setIsPaused",value:function(t){this._isPaused=t}},{key:"isReadyToSendData",value:function(){return!this._isPaused}},{key:"_onMessageSendSuccess",value:function(t,e){this._awaitingServerResponse=!1,this._currentSentItem=null,this._shouldRetryToSendMessage=!1,this.retryMessage.restartMessageSettings(),e(t),this._processNextQueueItem()}},{key:"_onMessageSendFailure",value:function(t,e,r,n,i){if(!this._currentSentItem)return ft.error("An unexpected error has occurred while handling a ".concat(this._messageDescriptor," message send failure. Could not find sent item value. Moving to next queued item")),void this._processNextQueueItem();ft.warn("Failed sending ".concat(this._messageDescriptor," message #").concat(this._currentSentItem.identifier,". ").concat(this._buildFailureLog(t,e,r))),this._awaitingServerResponse=!1;var o=0===this._currentSentItem.maxNumberOfSendAttempts;!this._isPaused&&this.retryMessage.shouldReMessage(o)?(this._shouldRetryToSendMessage=!0,ft.info("Trying to send ".concat(this._messageDescriptor," message #").concat(this._currentSentItem.identifier," again. Number of send failures is ").concat(this.retryMessage.getNumberOfSendFailures())),this._prepareMessageForSendRetry(),n&&n(this.retryMessage.getNumberOfSendFailures())):(this._shouldRetryToSendMessage=!1,this.retryMessage.restartMessageSettings(),ft.warn("Discarding ".concat(this._messageDescriptor," message #").concat(this._currentSentItem.identifier," after ").concat(this.retryMessage.getNumberOfSendFailures()," failed send attempts.")),n&&n(this.retryMessage.getNumberOfSendFailures()),this._currentSentItem=null,i&&i(t),this._processNextQueueItem())}},{key:"_enqueueMessage",value:function(t,e,r,n,i,o,s){this._dataQueue.enqueue({identifier:this._messageIdentifier++,messageToSend:t,onSuccess:i,onError:o,timeout:e,maxNumberOfSendAttempts:r,serverUrl:s}),this._shouldRetryToSendMessage||(this._clearRetryTimeout(),n&&this._flushData(),this._awaitingServerResponse||this._processNextQueueItem(n))}},{key:"_processNextQueueItem",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._dataQueue.hasItems()||!r){var n=null;r?(n=this._dataQueue.dequeue(),this._currentSentItem=n):n=this._currentSentItem;var i=this._requestBodyBuilder.build(n.messageToSend,e);this._enableRequestBodyHashing?jt.hashSha256(i,function(r,o){r?ft.error(r):t._sendProcessedQueueItem(i,n,e,o)}):this._sendProcessedQueueItem(i,n,e)}}},{key:"_sendProcessedQueueItem",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(Pt.isWebWorkerFetchSupported()&&r){var i=new Headers;n&&i.append(At,n);var o={method:Nt,headers:i,body:t,keepalive:!0};this._sendWithFetch(o,e.serverUrl)}else this._sendWithXMLHttpRequest(t,e,n);this._checkQueueLength()}},{key:"_sendWithFetch",value:function(t,e){this._currentSentItem=null,self.fetch(e,t),ft.info("Flush data was sent by fetch")}},{key:"_sendWithXMLHttpRequest",value:function(t,e,r){this._awaitingServerResponse=!0,this._workerUtils.getPostUrl(e.serverUrl,Nt,t,e.onSuccess,e.onError,this._acceptNoResponse,e.timeout,r)}},{key:"_checkQueueLength",value:function(){this._dataQueue.length()>this._queueLoadThershold&&ft.warn("Data queue has ".concat(this._dataQueue.length()," items in queue. Might indicate slow\\\\unstable communication issues."))}},{key:"_flushData",value:function(){for(;this._dataQueue.hasItems();)this._processNextQueueItem(!0)}},{key:"_prepareMessageForSendRetry",value:function(){var t=this;this._clearRetryTimeout(),this.retryMessage.updateRetryInterval();var e=this.retryMessage.getNextInterval();this._sendRetryTimeoutId=setTimeout(function(){t._processNextQueueItem(!1,!1)},e)}},{key:"_clearRetryTimeout",value:function(){this._sendRetryTimeoutId&&clearTimeout(this._sendRetryTimeoutId)}},{key:"_buildFailureLog",value:function(t,e,r){var n="";return t&&(n+="Response Text: ".concat(t,".")),e&&(n+="Status: ".concat(e,".")),r&&(n+="Status Text: ".concat(r,".")),n}}])}();function qt(t){return qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qt(t)}function Yt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zt(n.key),n)}}function Zt(t){var e=function(t,e){if("object"!=qt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qt(e)?e:e+""}var Vt=function(){return function(t,e,r){return e&&Yt(t.prototype,e),r&&Yt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},[{key:"setData",value:function(t){this._data=t}},{key:"getInternalMessage",value:function(){return this._data}}])}();function Kt(t){return Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kt(t)}function Gt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xt(n.key),n)}}function Xt(t){var e=function(t,e){if("object"!=Kt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Kt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Kt(e)?e:e+""}var Qt=function(){return function(t,e,r){return e&&Gt(t.prototype,e),r&&Gt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataPacker=e},[{key:"build",value:function(t){var e=new Vt;return e.setData(this._dataPacker.pack(t)),e}}])}(),Jt=self.btoa?self.btoa.bind(self):function(t){for(var e,r,n=String(t),i="",o=0,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.charAt(0|o)||(s="=",o%1);i+=s.charAt(63&e>>8-o%1*8)){if((r=n.charCodeAt(o+=3/4))>255)throw new Error("\'btoa\' failed: The string to be encoded contains characters outside of the Latin1 range.");e=e<<8|r}return i};function $t(t){return $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$t(t)}function te(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ee(n.key),n)}}function ee(t){var e=function(t,e){if("object"!=$t(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$t(e)?e:e+""}var re=r(273),ne=r(860),ie=function(){return function(t,e,r){return e&&te(t.prototype,e),r&&te(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._compressData=function(t){var e=re.encode(t);return e=ne.deflateRaw(e,{to:"string"}),Jt(e)}},[{key:"pack",value:function(t){return this._getCompressedData(t)}},{key:"_getCompressedData",value:function(t){return this._compressData(t)}}])}(),oe=5,se=1,ae=1e3,ue=1e3,fe=100,ce=1e4,le=3500,he=0,de=1e4,pe=16e3,ye=100,ve=3e5;function ge(t){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ge(t)}function me(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,be(n.key),n)}}function be(t){var e=function(t,e){if("object"!=ge(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ge(e)?e:e+""}var _e=function(){return function(t,e,r){return e&&me(t.prototype,e),r&&me(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,r,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.messageNumToRetry=e,this.messageRetryInterval=r,this.incrementalGrowthBetweenFailures=n,this.maxIntervalBetweenFailures=i,this.init()},[{key:"init",value:function(){this._validateReMessageSettings()}},{key:"getMessageNumToRetry",value:function(){return this.messageNumToRetry}},{key:"getMessageRetryInterval",value:function(){return this.messageRetryInterval}},{key:"getMaxIntervalBetweenFailures",value:function(){return this.maxIntervalBetweenFailures}},{key:"getIncrementalGrowthBetweenFailures",value:function(){return this.incrementalGrowthBetweenFailures}},{key:"_validateReMessageSettings",value:function(){var t="The provided configuration is invalid, it must be  ";if(isNaN(this.messageNumToRetry))ft.warn("".concat(t," a number. setting to default: ").concat(oe)),this.messageNumToRetry=oe;else{var e=parseInt(this.messageNumToRetry);this.messageNumToRetry=e}(this.messageNumToRetry<se||this.messageNumToRetry>ae)&&(ft.warn("messageNumToRetry - ".concat(t," in the following range: \\n            ").concat(se," - ").concat(ae," setting to default: ").concat(oe)),this.messageNumToRetry=oe),(this.messageRetryInterval<fe||this.messageRetryInterval>ce)&&(ft.warn("messageRetryInterval - ".concat(t," in the following range: \\n            [").concat(fe," - ").concat(ce,"], \\n            setting to default: ").concat(ue)),this.messageRetryInterval=ue),(this.incrementalGrowthBetweenFailures<he||this.incrementalGrowthBetweenFailures>de)&&(ft.warn("incrementalGrowthBetweenFailures - ".concat(t," in the following range: \\n            [").concat(he," - ").concat(de,"],\\n                setting to default: ").concat(le)),this.incrementalGrowthBetweenFailures=le),(this.maxIntervalBetweenFailures<ye||this.maxIntervalBetweenFailures>ve)&&(ft.warn("maxIntervalBetweenFailures - ".concat(t," in the following range: \\n            [").concat(ye," - ").concat(ve,"]\\n                setting to default: ").concat(pe)),this.maxIntervalBetweenFailures=pe),this.maxIntervalBetweenFailures<this.messageRetryInterval&&(ft.warn(" maxIntervalBetweenFailures - ".concat(t," greater than minimum interval: \\n            [").concat(ye,"], setting to defaults:\\n                ").concat(pe)),this.maxIntervalBetweenFailures=pe,this.messageRetryInterval=ue)}}])}();function we(t){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},we(t)}function Se(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ke(n.key),n)}}function ke(t){var e=function(t,e){if("object"!=we(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=we(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==we(e)?e:e+""}var Ee=function(){return function(t,e,r){return e&&Se(t.prototype,e),r&&Se(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.logMessageNumToRetry=e.get(A),this.logMessageRetryInterval=e.get(I),this.logIncrementalGrowthBetweenFailures=e.get(T),this.logMaxIntervalBetweenFailures=e.get(M)},[{key:"createReMessageSettings",value:function(){return new _e(this.logMessageNumToRetry,this.logMessageRetryInterval,this.logIncrementalGrowthBetweenFailures,this.logMaxIntervalBetweenFailures)}}])}();function xe(t){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xe(t)}function Be(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ce(n.key),n)}}function Ce(t){var e=function(t,e){if("object"!=xe(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xe(e)?e:e+""}var Re=function(){return function(t,e,r){return e&&Be(t.prototype,e),r&&Be(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._serverCommunicator=e,this._logMessageBuilder=r,this._configurationRepository=n,this._serverUrl=null,this._MESSAGE_SEND_RETRIES=5,this._requestTimeout=this._configurationRepository.get(S)},[{key:"setServerUrl",value:function(t){this._serverUrl=t}},{key:"setIsPaused",value:function(t){this._serverCommunicator.setIsPaused(t)}},{key:"sendData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._serverUrl){var r=this._logMessageBuilder.build(t);this._serverCommunicator.sendMessage(r,this._requestTimeout,this._serverCommunicator.getRetryMessage().getMessageNumToRetry(),e,this._onSendDataSuccess.bind(this),null,this._onSendDataFailure.bind(this),this._serverUrl),e&&this._serverCommunicator.flush()}else ft.error("Cannot send log message: server URL is not set")}},{key:"isReady",value:function(){return this._serverCommunicator.isReadyToSendData()}},{key:"setRequestTimeout",value:function(t){this._requestTimeout=t}},{key:"setConfigurationLogMessage",value:function(){this._configurationWraperLogMessage=new Ee(this._configurationRepository),this._reLogMessageSettings=this._configurationWraperLogMessage.createReMessageSettings(),this._serverCommunicator.getRetryMessage().updateSettings(this._reLogMessageSettings)}},{key:"_onSendDataSuccess",value:function(){}},{key:"_onSendDataFailure",value:function(t){ft.warn("Failed sending log message. Error: ".concat(t,"."))}}])}();function Pe(t){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pe(t)}function Ae(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ie(n.key),n)}}function Ie(t){var e=function(t,e){if("object"!=Pe(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Pe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Pe(e)?e:e+""}var Te=function(){return function(t,e,r){return e&&Ae(t.prototype,e),r&&Ae(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._statisticsLogIntervalMs=e,this.resetCounters(),this._setPeriodicStatisticsLog()},[{key:"getSentWupsCount",value:function(){return this._sentWupsCount}},{key:"incrementSentWupCount",value:function(){this._sentWupsCount++,this._sentWupsInCurrentIntervalCount++}},{key:"updateSettings",value:function(t){this._statisticsLogIntervalMs=t,this._setPeriodicStatisticsLog()}},{key:"resetCounters",value:function(){this._sentWupsCount=0,this._sentWupsInCurrentIntervalCount=0}},{key:"stop",value:function(){this._stopPeriodicStatisticsLog()}},{key:"_writeStatisticsLog",value:function(){0!==this._sentWupsInCurrentIntervalCount&&(ft.debug("Sent ".concat(this._sentWupsInCurrentIntervalCount," wup in the last ").concat(this._statisticsLogIntervalMs," ms. Sent a total of ").concat(this._sentWupsCount," in the session")),this._sentWupsInCurrentIntervalCount=0)}},{key:"_stopPeriodicStatisticsLog",value:function(){this._periodicLogIntervalId&&clearInterval(this._periodicLogIntervalId)}},{key:"_setPeriodicStatisticsLog",value:function(){this._stopPeriodicStatisticsLog(),this._periodicLogIntervalId=setInterval(this._writeStatisticsLog.bind(this),this._statisticsLogIntervalMs)}}])}(),Me="incremental",Oe="constant",De="dynamic";function je(t){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},je(t)}function Ue(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ze(n.key),n)}}function ze(t){var e=function(t,e){if("object"!=je(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=je(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==je(e)?e:e+""}var Ne=function(){return function(t,e,r){return e&&Ue(t.prototype,e),r&&Ue(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.updateSettings(e)},[{key:"getRate",value:function(){return this._currentRate}},{key:"updateSettings",value:function(t){if(t.type!==Oe)throw new Error("Invalid settings provided to constant calculator");this._currentRate=t.initialRateValueMs}}])}();function Le(t){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Le(t)}function Fe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,He(n.key),n)}}function He(t){var e=function(t,e){if("object"!=Le(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Le(e)?e:e+""}var We=function(){return function(t,e,r){return e&&Fe(t.prototype,e),r&&Fe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._wupStatisticsService=r,this.updateSettings(e)},[{key:"getRate",value:function(){if(this._wupStatisticsService.getSentWupsCount()<this._incrementStartWupSendCount)return this._currentRate;var t=this._currentRate+this._incrementStepMs;return t<=this._incrementStopMs&&(this._currentRate=t),this._currentRate}},{key:"updateSettings",value:function(t){if(t.type!==Me)throw new Error("Invalid settings provided to incremental calculator");this._currentRate=t.initialRateValueMs,this._incrementStepMs=t.incrementStepMs,this._incrementStopMs=t.incrementStopMs,this._incrementStartWupSendCount=t.incrementStartWupSendCount}}])}();function qe(t){return qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qe(t)}function Ye(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ze(n.key),n)}}function Ze(t){var e=function(t,e){if("object"!=qe(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qe(e)?e:e+""}var Ve=function(){return function(t,e,r){return e&&Ye(t.prototype,e),r&&Ye(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._wupServerSessionState=e},[{key:"getRate",value:function(){return this._wupServerSessionState.getWupDispatchRate()}},{key:"updateSettings",value:function(){}}])}();function Ke(t){return Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ke(t)}function Ge(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xe(n.key),n)}}function Xe(t){var e=function(t,e){if("object"!=Ke(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ke(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ke(e)?e:e+""}var Qe=function(){return function(t,e,r){return e&&Ge(t.prototype,e),r&&Ge(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._wupStatisticsService=e,this._wupServerSessionState=r},[{key:"create",value:function(t){if(t.type===Oe)return new Ne(t);if(t.type===Me)return new We(t,this._wupStatisticsService);if(t.type===De)return new Ve(this._wupServerSessionState);throw new Error("Unsupported dispatch rate type ".concat(t.type))}}])}();function Je(t){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Je(t)}function $e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tr(n.key),n)}}function tr(t){var e=function(t,e){if("object"!=Je(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Je(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Je(e)?e:e+""}var er=function(){return function(t,e,r){return e&&$e(t.prototype,e),r&&$e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,r,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._serverClient=e,this._aggregator=r,this._wupDispatchRateCalculatorFactory=n,this._wupDispatchRateSettings=i,this._wupDispatchRateCalculator=this._wupDispatchRateCalculatorFactory.create(this._wupDispatchRateSettings),this._sendToServerInterval=this._wupDispatchRateCalculator.getRate(),this._setDispatchInterval(this._sendToServerInterval)},[{key:"add",value:function(t){this._aggregator.add(t)}},{key:"sendIfRequired",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0===this._sendToServerInterval||t)&&this._sendToServer(t)}},{key:"updateByConfig",value:function(t){t&&(t.type!==this._wupDispatchRateSettings.type?this._wupDispatchRateCalculator=this._wupDispatchRateCalculatorFactory.create(t):this._wupDispatchRateCalculator.updateSettings(t),this._sendToServerInterval=this._wupDispatchRateCalculator.getRate(),this._setDispatchInterval(this._sendToServerInterval),this._wupDispatchRateSettings=t)}},{key:"scheduleNextDispatching",value:function(){var t=this._wupDispatchRateCalculator.getRate();t!==this._sendToServerInterval&&(this._sendToServerInterval=t,this._setDispatchInterval(this._sendToServerInterval))}},{key:"_sendToServer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];ft.debug("Sending a message to the server"),this._serverClient.isReady()?this._aggregator.isEmpty()||(this._serverClient.sendData(this._aggregator.take(),t),this.scheduleNextDispatching()):ft.info("".concat(this._serverClient.constructor.name," is not ready. Message will not be sent to server"))}},{key:"_setDispatchInterval",value:function(t){this._sendIntervalId&&(clearInterval(this._sendIntervalId),this._sendIntervalId=null),0!==t&&(this._sendIntervalId=setInterval(this._sendToServer.bind(this),t))}}])}();function rr(t){return rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rr(t)}function nr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ir(n.key),n)}}function ir(t){var e=function(t,e){if("object"!=rr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=rr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rr(e)?e:e+""}var or=function(){return function(t,e,r){return e&&nr(t.prototype,e),r&&nr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.reset()},[{key:"setLogLevel",value:function(t){this._logLevel=t}},{key:"add",value:function(t){var e=t.data;if(!e)throw new Error("Unable to add log message. Missing data field");(!e.level||e.level>=this._logLevel)&&this._Q.push(e)}},{key:"take",value:function(){var t=this._Q;return this.reset(),t}},{key:"reset",value:function(){this._Q=[],this.setLogLevel(void 0===this._logLevel?F:this._logLevel)}},{key:"isEmpty",value:function(){return 0===this._Q.length}},{key:"filterOutByLogLevel",value:function(t){this._Q=this._Q.filter(function(e,r,n){return e.level>=t})}}])}();function sr(t){return sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sr(t)}function ar(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ur(n.key),n)}}function ur(t){var e=function(t,e){if("object"!=sr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=sr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sr(e)?e:e+""}var fr=function(){return function(t,e,r){return e&&ar(t.prototype,e),r&&ar(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataDispatcher=e},[{key:"process",value:function(t){if(!t)throw new Error("Invalid message received for processing.");var e=!1;if(Array.isArray(t))for(var r=0,n=t.length;r<n;r++)e=this._processSingleMessage(t[r])||e;else e=this._processSingleMessage(t)||e;this._dataDispatcher.sendIfRequired(e)}},{key:"_processSingleMessage",value:function(t){if(this._isEmptyFlushMessage(t))return!0;var e=!1;if(t.shouldFlush&&(e=!0),!this._isDataValid(t)){var r="Received a message with invalid structure. Missing eventName or Data fields";throw ft.error(r),new Error(r)}return this._dataDispatcher.add(t),e}},{key:"_isEmptyFlushMessage",value:function(t){return"flushData"===t.eventName}},{key:"_isDataValid",value:function(t){return t.eventName&&t.data}}])}(),cr="js";function lr(t){return lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lr(t)}function hr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dr(n.key),n)}}function dr(t){var e=function(t,e){if("object"!=lr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lr(e)?e:e+""}var pr=function(){return function(t,e,r){return e&&hr(t.prototype,e),r&&hr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageStruct={ds:cr}},[{key:"getDataSource",value:function(){return this._messageStruct.ds}},{key:"getSid",value:function(){return this._messageStruct.cdsnum}},{key:"setSid",value:function(t){this._messageStruct.cdsnum=t}},{key:"getCsid",value:function(){return this._messageStruct.csid}},{key:"setCsid",value:function(t){this._messageStruct.csid=t}},{key:"getPsid",value:function(){return this._messageStruct.psid}},{key:"setPsid",value:function(t){this._messageStruct.psid=t}},{key:"getMuid",value:function(){return this._messageStruct.muid}},{key:"setMuid",value:function(t){this._messageStruct.muid=t}},{key:"getContextName",value:function(){return this._messageStruct.context_name}},{key:"setContextName",value:function(t){this._messageStruct.context_name=t}},{key:"getRequestId",value:function(){return this._messageStruct.requestId}},{key:"setRequestId",value:function(t){this._messageStruct.requestId=t}},{key:"getSts",value:function(){return this._messageStruct.sts}},{key:"setSts",value:function(t){this._messageStruct.sts=t}},{key:"getStd",value:function(){return this._messageStruct.std}},{key:"setStd",value:function(t){this._messageStruct.std=t}},{key:"setFlush",value:function(t){this._messageStruct.f=t}},{key:"getConfigurationName",value:function(){return this._messageStruct.c}},{key:"setConfigurationName",value:function(t){this._messageStruct.c=t}},{key:"getData",value:function(){return this._messageStruct.d}},{key:"setData",value:function(t){this._messageStruct.d=t}},{key:"getInternalMessage",value:function(){return this._messageStruct}},{key:"setOtt",value:function(t){this._messageStruct.ott=t}},{key:"getOtt",value:function(){return this._messageStruct.ott}},{key:"setAgentType",value:function(t){this._messageStruct.agent_type=t}},{key:"getAgentType",value:function(){return this._messageStruct.agent_type}},{key:"setAgentId",value:function(t){this._messageStruct.agent_id=t}},{key:"getAgentId",value:function(){return this._messageStruct.agent_id}}])}();function yr(t){return yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yr(t)}function vr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gr(n.key),n)}}function gr(t){var e=function(t,e){if("object"!=yr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=yr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yr(e)?e:e+""}var mr=function(){return function(t,e,r){return e&&vr(t.prototype,e),r&&vr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._wupServerSessionState=e,this._dataPacker=r},[{key:"build",value:function(t,e){var r=new pr;this._updateDataWithBrand(e),r.setSid(this._wupServerSessionState.getSid()),r.setCsid(this._wupServerSessionState.getCsid()),r.setPsid(this._wupServerSessionState.getPsid()),r.setMuid(this._wupServerSessionState.getMuid()),r.setContextName(this._wupServerSessionState.getContextName()),r.setRequestId(this._wupServerSessionState.getRequestId()),r.setAgentType(this._wupServerSessionState.getAgentType()),r.setAgentId(this._wupServerSessionState.getAgentId()),this._wupServerSessionState.getSts()&&this._wupServerSessionState.getStd()&&(r.setSts(this._wupServerSessionState.getSts()),r.setStd(this._wupServerSessionState.getStd()));var n=this._wupServerSessionState.getOtt();return n&&r.setOtt(n),t===cr?r.setConfigurationName(t):r.setData([this._dataPacker.pack(e)]),r}},{key:"_updateDataWithBrand",value:function(t){var e=this._wupServerSessionState.getBrand();e&&(t.static_fields||(t.static_fields=[]),t.static_fields.push(["brand",e]))}}])}();function br(t){return br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},br(t)}function _r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wr(n.key),n)}}function wr(t){var e=function(t,e){if("object"!=br(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=br(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==br(e)?e:e+""}var Sr=function(){return function(t,e,r){return e&&_r(t.prototype,e),r&&_r(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._wupServerSessionState=e},[{key:"build",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.setSid(this._wupServerSessionState.getSid()),t.setSts(this._wupServerSessionState.getSts()),t.setStd(this._wupServerSessionState.getStd()),t.setOtt(this._wupServerSessionState.getOtt()),e&&t.setFlush(cr),JSON.stringify(t.getInternalMessage())}}])}(),kr="ConfigurationLoadedEvent",Er="NewSessionStartedEvent",xr="WupDispatchRateUpdatedEvent",Br="ServerStateUpdatedEvent",Cr="ServerRestoredMuidEvent",Rr="ServerNewAgentIdEvent",Pr="WorkerSystemStatusEvent";function Ar(t){return Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ar(t)}function Ir(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tr(n.key),n)}}function Tr(t){var e=function(t,e){if("object"!=Ar(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ar(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ar(e)?e:e+""}var Mr=function(){return function(t,e,r){return e&&Ir(t.prototype,e),r&&Ir(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._wupServerSessionState=e,this._messageBus=r,this._configurationRepository=n},[{key:"process",value:function(t,e){var r=!1;e&&(this._wupServerSessionState.markConfigurationReceived(),this._configurationRepository.loadConfigurations(t),r=!0),t.sts&&this._wupServerSessionState.setSts(t.sts),t.std&&this._wupServerSessionState.setStd(t.std),t.ott&&this._wupServerSessionState.setOtt(t.ott),t.reset_session&&t.new_sid&&this._wupServerSessionState.setSid(t.new_sid),t.rmd&&(this._wupServerSessionState.setMuid(t.rmd),this._messageBus.publish(Cr,t.rmd)),t.agent_id&&(this._wupServerSessionState.setAgentId(t.agent_id),this._messageBus.publish(Rr,t.agent_id)),this._messageBus.publish(Br,{requestId:this._wupServerSessionState.getRequestId(),sid:this._wupServerSessionState.getSid(),sts:this._wupServerSessionState.getSts(),std:this._wupServerSessionState.getStd(),ott:this._wupServerSessionState.getOtt()}),r&&this._messageBus.publish(kr,this._configurationRepository),t.reset_session&&(t.new_sid?this._messageBus.publish(Er,t.new_sid):ft.warn("Received a reset session flag from the server without a new sid. Ignoring reset.")),t.nextWupInterval?t.nextWupInterval!==this._wupServerSessionState.getWupDispatchRate()&&(this._wupServerSessionState.setWupDispatchRate(t.nextWupInterval),this._messageBus.publish(xr,this._wupServerSessionState.getWupDispatchRate())):ft.warn("Received an invalid nextWupInterval value of ".concat(t.nextWupInterval,". Ignoring value."))}}])}(),Or="701",Dr="702",jr="703",Ur="704";function zr(t){return zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zr(t)}function Nr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Fr(n.key),n)}}function Lr(t,e,r){return e&&Nr(t.prototype,e),r&&Nr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fr(t){var e=function(t,e){if("object"!=zr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zr(e)?e:e+""}var Hr="oK",Wr="Error",qr=Lr(function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.category=e,this.status=r});function Yr(t){return Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yr(t)}function Zr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vr(n.key),n)}}function Vr(t){var e=function(t,e){if("object"!=Yr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Yr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Yr(e)?e:e+""}var Kr=function(){return function(t,e,r){return e&&Zr(t.prototype,e),r&&Zr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.wupMessageNumToRetry=e.get(B),this.wupMessageRetryInterval=e.get(C),this.wupIncrementalGrowthBetweenFailures=e.get(R),this.wupMaxIntervalBetweenFailures=e.get(P)},[{key:"createReMessageSettings",value:function(){return new _e(this.wupMessageNumToRetry,this.wupMessageRetryInterval,this.wupIncrementalGrowthBetweenFailures,this.wupMaxIntervalBetweenFailures)}}])}(),Gr={PRIMARY:"primary",SECONDARY:"secondary"};function Xr(t,e,r,n){var i;return n?(i=3===e?"v3.1":"v4",i+="/"+function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(11*Math.random())+10,r="",n=0;n<e;n++){r+=t[Math.floor(Math.random()*t.length)]}return r}()):(i=3===e?zt:Ut,i+="?cid="+r),t+"/"+i}function Qr(t){return Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qr(t)}function Jr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$r(n.key),n)}}function $r(t){var e=function(t,e){if("object"!=Qr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Qr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qr(e)?e:e+""}Object.freeze(Gr);var tn=function(){return function(t,e,r){return e&&Jr(t.prototype,e),r&&Jr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,r,n,i,o,s,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._serverCommunicator=e,this._wupMessageBuilder=r,this._wupServerSessionState=n,this._wupStatisticsService=i,this._wupResponseProcessor=o,this._configurationRepository=s,this._msgBus=a,this._INFINITE_MESSAGE_SEND_RETRIES=0,this._retryMessage=this._serverCommunicator.getRetryMessage(),this._MESSAGE_SEND_RETRIES=this._configurationRepository.get(B),this._requestTimeout=this._configurationRepository.get(w)},[{key:"startNewSession",value:function(t,e,r,n,i,o,s,a){this._validateCommonSessionRelatedParameters(o,a),this._wupServerSessionState.setRequestId(0),this._wupServerSessionState.setBrand(null),this._sendSessionMessage(null,t,e,r,n,i,o,s,a,null,this._wupServerSessionState.getRequestId())}},{key:"_sendSessionMessage",value:function(t,e,r,n,i,o,s,a,u,f,c){var l=this;this._initSession(t,e,r,n,i,o,s,a,u,f,c);var h=this._createStaticFieldsPart(),d=!this._wupServerSessionState.getHasConfiguration()&&!this._wupServerSessionState.getHasPendingConfigurationRequest();d&&this._wupServerSessionState.markConfigurationRequested();var p=this._wupMessageBuilder.build(d?cr:"0",h),y=Xr(u,r,e,n);this._serverCommunicator.sendMessage(p,this._requestTimeout,d?this._INFINITE_MESSAGE_SEND_RETRIES:this._MESSAGE_SEND_RETRIES,!1,function(t){l._onSendDataSuccess(t,d)},this._onSendDataRetryFailure.bind(this),this._onSendDataFailure.bind(this),y)}},{key:"resumeSession",value:function(t,e,r,n,i,o,s,a,u,f){this._validateResumeSessionRelatedParameters(t,s,u);var c=f&&f.requestId?this._wupServerSessionState.setRequestId(f.requestId+1):this._wupServerSessionState.setRequestId(0);this._sendSessionMessage(t,e,r,n,i,o,s,a,u,f,c)}},{key:"sendData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this._wupServerSessionState.getOtt(),n=this._wupServerSessionState.getProtocolType(),i=4===n,o=3===n,s=this._wupServerSessionState.getSts()&&this._wupServerSessionState.getStd();if(r&&i||s&&o)this._sendMessage(t,e);else{var a=i?"ott":"sts or std";ft.error("Unable to send data. ".concat(a," is undefined"))}}},{key:"setRequestTimeout",value:function(t){this._requestTimeout=t}},{key:"setConfigurationWupMessage",value:function(){this._configurationWrapperWupMessage=new Kr(this._configurationRepository),this._reWupMessageSettings=this._configurationWrapperWupMessage.createReMessageSettings(),this._retryMessage.updateSettings(this._reWupMessageSettings)}},{key:"_initSession",value:function(t,e,r,n,i,o,s,a,u,f,c){ft.debug("Initializing session. wupUrl:".concat(u,", sid:").concat(t)),this._wupServerSessionState.setBaseServerUrl(u),this._wupServerSessionState.setSid(t),this._wupServerSessionState.setCid(e),this._wupServerSessionState.setCsid(i),this._wupServerSessionState.setPsid(o),this._wupServerSessionState.setMuid(s),this._wupServerSessionState.setProtocolType(r),this._wupServerSessionState.setShouldMinifyUri(n),this._wupServerSessionState.setContextName(a||""),this._wupServerSessionState.setRequestId(c,!1),f?(this._wupServerSessionState.setSts(f.sts),this._wupServerSessionState.setStd(f.std),this._wupServerSessionState.setOtt(f.ott)):(ft.info("Resetting server state of server communicator. Deleting sts and std"),this._wupServerSessionState.setSts(null),this._wupServerSessionState.setStd(null),this._wupServerSessionState.setOtt(null),this._wupStatisticsService.resetCounters())}},{key:"updateCsid",value:function(t){var e=this._wupServerSessionState.incrementRequestId()||0;this._wupServerSessionState.setCsid(t);var r={static_fields:[]};r.static_fields.push(["requestId",e],["contextId",this._wupServerSessionState.getContextName()],["sessionId",this._wupServerSessionState.getSid()],["customerSessionId",this._wupServerSessionState.getCsid()],["partnerSessionId",this._wupServerSessionState.getPsid()],["muid",this._wupServerSessionState.getMuid()]),this._sendMessage(r)}},{key:"updatePsid",value:function(t){var e=this._wupServerSessionState.incrementRequestId()||0;this._wupServerSessionState.setPsid(t);var r={static_fields:[]};r.static_fields.push(["requestId",e],["contextId",this._wupServerSessionState.getContextName()],["sessionId",this._wupServerSessionState.getSid()],["customerSessionId",this._wupServerSessionState.getCsid()],["partnerSessionId",this._wupServerSessionState.getPsid()],["muid",this._wupServerSessionState.getMuid()]),this._sendMessage(r)}},{key:"updateBrand",value:function(t){this._wupServerSessionState.setBrand(t)}},{key:"isReady",value:function(){var t=this._serverCommunicator.isReadyToSendData();if(4===this._wupServerSessionState.getProtocolType())return!(!t||!this._wupServerSessionState.getOtt());var e=this._wupServerSessionState.getStd()&&this._wupServerSessionState.getSts();return!(!t||!e)}},{key:"_validateResumeSessionRelatedParameters",value:function(t,e,r){if(!t)throw new Error("Invalid sid parameter ".concat(t,". Unable to start new session"));this._validateCommonSessionRelatedParameters(e,r)}},{key:"_validateCommonSessionRelatedParameters",value:function(t,e){if(!t&&this._wupServerSessionState.getAgentType()!==Gr.SECONDARY)throw new Error("Invalid muid parameter ".concat(t,". Unable to start new session"));if(!e)throw new Error("Invalid serverAddress parameter ".concat(e,". Unable to start new session"))}},{key:"_createStaticFieldsPart",value:function(){var t={static_fields:[]};return t.static_fields.push(["requestId",this._wupServerSessionState.getRequestId()],["contextId",this._wupServerSessionState.getContextName()],["sessionId",this._wupServerSessionState.getSid()],["customerSessionId",this._wupServerSessionState.getCsid()],["partnerSessionId",this._wupServerSessionState.getPsid()],["muid",this._wupServerSessionState.getMuid()]),t}},{key:"_sendMessage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this._wupMessageBuilder.build("0",t),n=Xr(this._wupServerSessionState.getBaseServerUrl(),this._wupServerSessionState.getProtocolType(),this._wupServerSessionState.getCid(),this._wupServerSessionState.getShouldMinifyUri());this._serverCommunicator.sendMessage(r,this._requestTimeout,this._MESSAGE_SEND_RETRIES,e,this._onSendDataSuccess.bind(this),this._onSendDataRetryFailure.bind(this),this._onSendDataFailure.bind(this),n)}},{key:"_onSendDataSuccess",value:function(t,e){e=e||!1,this._publishWorkerSystemStatus(Ur,Hr),this._publishWorkerSystemStatus(Ur,Hr),this._handleSuccessResponse(t,e),this._wupStatisticsService.incrementSentWupCount()}},{key:"_onSendDataRetryFailure",value:function(t){t===this._MESSAGE_SEND_RETRIES&&this._publishWorkerSystemStatus(Ur,Wr)}},{key:"_onSendDataFailure",value:function(){}},{key:"_handleSuccessResponse",value:function(t,e){var r=e?Dr:jr;try{var n=JSON.parse(t);this._wupResponseProcessor.process(n,e),this._publishWorkerSystemStatus(r,Hr)}catch(t){this._publishWorkerSystemStatus(r,Wr);var i="Failed to parse message from server: ".concat(t.message);ft.error(i,t)}}},{key:"_publishWorkerSystemStatus",value:function(t,e){this._msgBus.publish(Pr,new qr(t,e))}}])}();function en(t){return en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},en(t)}function rn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nn(n.key),n)}}function nn(t){var e=function(t,e){if("object"!=en(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=en(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==en(e)?e:e+""}var on=function(){return function(t,e,r){return e&&rn(t.prototype,e),r&&rn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._wupServerSessionState=e,this.reset()},[{key:"add",value:function(t){var e=t.eventName,r=t.data;if(!e)throw new Error("Unable to add data message. Missing eventName field");if(!r)throw new Error("Unable to add data message. Missing data field");this._isEmpty=!1,this._dataObj[e]=this._dataObj[e]||[],this._dataObj[e].push(r)}},{key:"take",value:function(){this._isEmpty||this._dataObj.static_fields.push(["requestId",this._wupServerSessionState.incrementRequestId()]);var t=this._dataObj;return this.reset(),t}},{key:"reset",value:function(){this._isEmpty=!0,this._dataObj=this.getFreshDataObj()}},{key:"isEmpty",value:function(){return this._isEmpty}},{key:"getFreshDataObj",value:function(){return{static_fields:[],key_events:[],mouse_events:[]}}}])}();function sn(t){return sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sn(t)}function an(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,un(n.key),n)}}function un(t){var e=function(t,e){if("object"!=sn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=sn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sn(e)?e:e+""}var fn=function(){return function(t,e,r){return e&&an(t.prototype,e),r&&an(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,r,n,i,o,s,a,u,f){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._wupStatisticsService=r,this._dataDispatcher=n,this._logDataDispatcher=i,this._serverCommunicator=o,this._wupServerClient=s,this._logServerClient=a,this._logger=u,this._mainCommunicator=f,this._messageBus.subscribe(kr,this._handle.bind(this))},[{key:"_handle",value:function(t){this._wupStatisticsService.updateSettings(t.get(m));var e=t.get(g)?Q.defaultDynamicWupDispatchRateConfiguration:t.get(y);this._dataDispatcher.updateByConfig(e),this._logDataDispatcher.updateByConfig(t.get(v)),this._serverCommunicator.updateSettings(t.get(b)),this._logger.updateLogConfig(t),this._wupServerClient.setRequestTimeout(t.get(w)||t.get(_)),this._logServerClient.setRequestTimeout(t.get(S)),this._wupServerClient.setConfigurationWupMessage(),this._logServerClient.setConfigurationLogMessage(),this._mainCommunicator.sendAsync(D,t.getAll())}}])}();function cn(t){return cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cn(t)}function ln(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hn(n.key),n)}}function hn(t){var e=function(t,e){if("object"!=cn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=cn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cn(e)?e:e+""}var dn=function(){return function(t,e,r){return e&&ln(t.prototype,e),r&&ln(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._logger=r,this._mainCommunicator=n,this._messageBus.subscribe(Er,this._handle.bind(this))},[{key:"_handle",value:function(t){this._logger.info("Worker received a new session id ".concat(t," from server.")),this._mainCommunicator.sendAsync(O,t)}}])}();function pn(t){return pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pn(t)}function yn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vn(n.key),n)}}function vn(t){var e=function(t,e){if("object"!=pn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=pn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pn(e)?e:e+""}var gn=function(){return function(t,e,r){return e&&yn(t.prototype,e),r&&yn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._logger=r,this._mainCommunicator=n,this._messageBus.subscribe(Br,this._handle.bind(this))},[{key:"_handle",value:function(t){this._logger.debug("Worker received an updated server state."),this._mainCommunicator.sendAsync(j,t)}}])}();function mn(t){return mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mn(t)}function bn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_n(n.key),n)}}function _n(t){var e=function(t,e){if("object"!=mn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mn(e)?e:e+""}var wn=function(){return function(t,e,r){return e&&bn(t.prototype,e),r&&bn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._dataDispatcher=r,this._logger=n,this._messageBus.subscribe(xr,this._handle.bind(this))},[{key:"_handle",value:function(t){this._logger.info("Worker received a wup dispatch rate ".concat(t," from server.")),this._dataDispatcher.scheduleNextDispatching()}}])}(),Sn="startNewSessionCommand",kn="resumeSessionCommand",En="changeContextCommand",xn="updateCsidCommand",Bn="updatePsidCommand",Cn="updateLogUrl",Rn="sendDataCommand",Pn="sendLogCommand",An="updateBrandCommand",In="stateUpdateFromStorage",Tn="setAgentTypeCommand",Mn="updateAgentIdCommand",On="enableWupMessagesHashingCommand",Dn="updateSDKState";function jn(t){return jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jn(t)}function Un(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zn(n.key),n)}}function zn(t){var e=function(t,e){if("object"!=jn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=jn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jn(e)?e:e+""}var Nn=function(){return function(t,e,r){return e&&Un(t.prototype,e),r&&Un(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,r,n,i,o,s,a,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._mainCommunicator=e,this._wupServerClient=r,this._logServerClient=n,this._configurationRepository=i,this._messageProcessor=o,this._logMessageProcessor=s,this._wupServerSessionState=a,this._dataServerCommunicator=u},[{key:"start",value:function(){ft.debug("Starting Worker Service"),this._mainCommunicator.addMessageListener(Sn,this._onStartNewSessionCommand.bind(this)),this._mainCommunicator.addMessageListener(kn,this._onResumeSessionCommand.bind(this)),this._mainCommunicator.addMessageListener(En,this._onChangeContextCommand.bind(this)),this._mainCommunicator.addMessageListener(xn,this._onUpdateCsidCommand.bind(this)),this._mainCommunicator.addMessageListener(Bn,this._onUpdatePsidCommand.bind(this)),this._mainCommunicator.addMessageListener(Cn,this._onUpdateLogUrlCommand.bind(this)),this._mainCommunicator.addMessageListener(Rn,this._onSendDataCommand.bind(this)),this._mainCommunicator.addMessageListener(Pn,this._onSendLogCommand.bind(this)),this._mainCommunicator.addMessageListener(An,this._onUpdateBrandCommand.bind(this)),this._mainCommunicator.addMessageListener(Tn,this._setSessionAgentType.bind(this)),this._mainCommunicator.addMessageListener(Mn,this._onUpdateAgentId.bind(this)),this._mainCommunicator.addMessageListener(On,this._setWupMessagesHashing.bind(this))}},{key:"_onStartNewSessionCommand",value:function(t){this._wupServerClient.startNewSession(t.cid,t.protocolType,t.minifiedUri,t.csid,t.psid,t.muid,t.contextName,t.serverAddress)}},{key:"_onResumeSessionCommand",value:function(t){this._wupServerClient.resumeSession(t.cdsnum,t.cid,t.protocolType,t.minifiedUri,t.csid,t.psid,t.muid,t.contextName,t.serverAddress,t.serverState)}},{key:"_onChangeContextCommand",value:function(t){ft.debug("Worker received a ChangeContextCommand from main."),this._wupServerSessionState.setContextName(t.contextName)}},{key:"_onUpdateCsidCommand",value:function(t){ft.debug("Worker received an UpdateCsidCommand from main. CSID: ".concat(t.csid,".")),this._wupServerClient.updateCsid(t.csid)}},{key:"_onUpdatePsidCommand",value:function(t){ft.debug("Worker received an UpdatePsidCommand from main. PSID: ".concat(t.psid,".")),this._wupServerClient.updatePsid(t.psid)}},{key:"_onUpdateLogUrlCommand",value:function(t){ft.attachSessionIdentifiers(t.sessionIdentifiers),this._logServerClient.setServerUrl(t.logAddress)}},{key:"_onSendDataCommand",value:function(t){this._messageProcessor.process(t)}},{key:"_onSendLogCommand",value:function(t){this._logMessageProcessor.process(t)}},{key:"_onUpdateBrandCommand",value:function(t){this._wupServerClient.updateBrand(t.brand)}},{key:"_setSessionAgentType",value:function(t){this._wupServerSessionState.setAgentType(t.agentType)}},{key:"_onUpdateAgentId",value:function(t){this._wupServerSessionState.setAgentId(t.agentId)}},{key:"_setWupMessagesHashing",value:function(t){this._dataServerCommunicator.updateEnableWupMessagesHashing(t.enableWupMessagesHashing)}}])}();function Ln(t){return Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ln(t)}function Fn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Hn(n.key),n)}}function Hn(t){var e=function(t,e){if("object"!=Ln(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ln(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ln(e)?e:e+""}var Wn=function(){return function(t,e,r){return e&&Fn(t.prototype,e),r&&Fn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},null,[{key:"create",value:function(){if(self.XMLHttpRequest&&Object.prototype.hasOwnProperty.call(XMLHttpRequest.prototype,"withCredentials"))return new XMLHttpRequest;if(self.XDomainRequest)return new XDomainRequest;if(!self.XMLHttpRequest)throw new Error("There is no supported http request object");return new XMLHttpRequest}}])}();function qn(t){return qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qn(t)}function Yn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zn(n.key),n)}}function Zn(t){var e=function(t,e){if("object"!=qn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qn(e)?e:e+""}var Vn=function(){return function(t,e,r){return e&&Yn(t.prototype,e),r&&Yn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},null,[{key:"isUndefinedNull",value:function(t){return null==t||void 0===t}},{key:"getPostUrl",value:function(t,e,r,n,i,o,s,a){var u=Wn.create();try{u instanceof self.XMLHttpRequest?(u.open(e,t,!0),u.timeout=s||12e3,a&&u.setRequestHeader(At,a),u.onload=function(){200===u.status||204===u.status&&o?n&&n(u.responseText):i&&i(u.responseText,u.status,u.statusText)},u.onerror=function(){i&&i(u.responseText,u.status,u.statusText)},u.ontimeout=function(){i&&i("timeout")},u.onabort=function(){i&&i("abort")},u.send(r)):(u.onload=function(){n&&u.responseText&&n(u.responseText)},u.onerror=function(){i&&i(u.responseText,u.status,u.statusText)},u.onprogress=function(){},u.ontimeout=function(){i&&i("timeout")},u.open(e,t,!0),a&&u.setRequestHeader(At,a),u.timeout=s||12e3,setTimeout(function(){u.send(r)},0))}catch(t){throw t}}}])}();function Kn(t){return Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kn(t)}function Gn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xn(n.key),n)}}function Xn(t){var e=function(t,e){if("object"!=Kn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Kn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Kn(e)?e:e+""}var Qn=function(){return function(t,e,r){return e&&Gn(t.prototype,e),r&&Gn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._mainCommunicator=e,this._messageBus=r,this._logger=n,this.errors={},this._messageBus.subscribe(Pr,this._handle.bind(this))},[{key:"_handle",value:function(t){this._logger.debug("Sending new HeartBeatStatusEvent - ".concat(t.category,", ").concat(t.status)),this._mainCommunicator.sendAsync(U,t)}}])}();function Jn(t){return Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jn(t)}function $n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function ti(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$n(Object(r),!0).forEach(function(e){ei(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$n(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function ei(t,e,r){return(e=ni(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ri(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ni(n.key),n)}}function ni(t){var e=function(t,e){if("object"!=Jn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Jn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Jn(e)?e:e+""}var ii=function(){return function(t,e,r){return e&&ri(t.prototype,e),r&&ri(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sn=0,this.url=r,this.logAggregator=e,this.msgPrefix=n},[{key:"log",value:function(t,e,r){this.logAggregator.add({eventName:"log",data:ti(ti({msg:this.msgPrefix+t},r),{},{url:this.url,level:e,sn:this.sn++})})}},{key:"setLogLevel",value:function(t){this.logAggregator instanceof or&&this.logAggregator.setLogLevel(t)}},{key:"clearLogEntriesByLogLevel",value:function(t){this.logAggregator.filterOutByLogLevel(t)}}])}();function oi(t){return oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oi(t)}function si(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ai(n.key),n)}}function ai(t){var e=function(t,e){if("object"!=oi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=oi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==oi(e)?e:e+""}var ui=function(){return function(t,e,r){return e&&si(t.prototype,e),r&&si(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.currentMessageNumberOfSendFailures=0,this.reMessageSettings=e,this.currentInterval=this.getMessageRetryInterval()},[{key:"restartMessageSettings",value:function(){this.currentMessageNumberOfSendFailures=0,this.currentInterval=this.getMessageRetryInterval()}},{key:"updateSettings",value:function(t){this.reMessageSettings=t}},{key:"updateAllSettings",value:function(t){t.init(),this.reMessageSettings=t}},{key:"getNumberOfSendFailures",value:function(){return this.currentMessageNumberOfSendFailures}},{key:"getNextInterval",value:function(){return this.currentInterval}},{key:"getMessageNumToRetry",value:function(){return this.reMessageSettings.getMessageNumToRetry()}},{key:"getMessageRetryInterval",value:function(){return this.reMessageSettings.getMessageRetryInterval()}},{key:"getMaxIntervalBetweenFailures",value:function(){return this.reMessageSettings.getMaxIntervalBetweenFailures()}},{key:"getIncrementalGrowthBetweenFailures",value:function(){return this.reMessageSettings.getIncrementalGrowthBetweenFailures()}},{key:"_incrementNumberOfSendFailures",value:function(){this.currentMessageNumberOfSendFailures++}},{key:"shouldReMessage",value:function(t){return t||this.getNumberOfSendFailures()<this.getMessageNumToRetry()}},{key:"updateRetryInterval",value:function(){var t=this.currentInterval+this.currentMessageNumberOfSendFailures*this.getIncrementalGrowthBetweenFailures();t>this.getMaxIntervalBetweenFailures()?this.currentInterval=this.getMaxIntervalBetweenFailures():this.currentInterval=t,this._incrementNumberOfSendFailures()}}])}();function fi(t){return fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fi(t)}function ci(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,li(n.key),n)}}function li(t){var e=function(t,e){if("object"!=fi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fi(e)?e:e+""}var hi=function(){return function(t,e,r){return e&&ci(t.prototype,e),r&&ci(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._mainCommunicator=r,this._messageBus.subscribe(Cr,this._handler.bind(this),!0)},[{key:"_handler",value:function(t){this._mainCommunicator.sendAsync(z,t)}}])}();function di(t){return di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},di(t)}function pi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yi(n.key),n)}}function yi(t){var e=function(t,e){if("object"!=di(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=di(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==di(e)?e:e+""}var vi=function(){return function(t,e,r){return e&&pi(t.prototype,e),r&&pi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._mainCommunicator=e,this._wupServerSessionState=r,this._logServerClient=n,this._mainCommunicator.addMessageListener(In,this._handle.bind(this)),this._mainCommunicator.addMessageListener(Dn,this._handleStateChanged.bind(this))},[{key:"_handle",value:function(t){null!=t&&t.requestId&&(null!=t&&t.ott||null!=t&&t.sts)&&(this._wupServerSessionState.setRequestId(t.requestId,!1),this._wupServerSessionState.setOtt(t.ott),this._wupServerSessionState.setSts(t.sts),this._wupServerSessionState.setStd(t.std))}},{key:"_handleStateChanged",value:function(t){this._logServerClient.setIsPaused(t.SDK_state)}}])}();function gi(t){return gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gi(t)}function mi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bi(n.key),n)}}function bi(t){var e=function(t,e){if("object"!=gi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gi(e)?e:e+""}var _i=function(){return function(t,e,r){return e&&mi(t.prototype,e),r&&mi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._mainCommunicator=r,this._messageBus.subscribe(Rr,this._handle.bind(this))},[{key:"_handle",value:function(t){this._mainCommunicator.sendAsync(N,t)}}])}();function wi(t){return wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wi(t)}function Si(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ki(n.key),n)}}function ki(t){var e=function(t,e){if("object"!=wi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wi(e)?e:e+""}var Ei=function(){return function(t,e,r){return e&&Si(t.prototype,e),r&&Si(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._mainCommunicator=e,this._msgBus=r,this._eventHandlers=[]},[{key:"loadSystem",value:function(){var t=this;this._configurationRepository=new $,this._wupServerSessionState=new pt,this._logRequestBodyBuilder=new mt,this._configurationWrapperLogMessage=new Ee(this._configurationRepository),this._logReMessageSettings=this._configurationWrapperLogMessage.createReMessageSettings(),this._logRetryMessage=new ui(this._logReMessageSettings),this._logServerCommunicator=new Wt(this._logRequestBodyBuilder,this._configurationRepository.get(b),Vn,this._logRetryMessage,!0,"log"),this._logMessageBuilder=new Qt(new ie),this._logServerClient=new Re(this._logServerCommunicator,this._logMessageBuilder,this._configurationRepository),this._wupStatisticsService=new Te(this._configurationRepository.get(m)),this._wupDispatchRateCalculatorFactory=new Qe(this._wupStatisticsService,this._wupServerSessionState);var e=new or;this._logDataDispatcher=new er(this._logServerClient,e,this._wupDispatchRateCalculatorFactory,this._configurationRepository.get(v));var r=new ii(e,"worker");this._logMessageProcessor=new fr(this._logDataDispatcher);var n=new ct(r);ft.setLogger(n),this._wupMessageBuilder=new mr(this._wupServerSessionState,new ie),this._wupRequestBodyBuilder=new Sr(this._wupServerSessionState),this._configurationWrapperWupMessage=new Kr(this._configurationRepository),this._wupReMessageSettings=this._configurationWrapperWupMessage.createReMessageSettings(),this._wupRetryMessage=new ui(this._wupReMessageSettings),this._dataServerCommunicator=new Wt(this._wupRequestBodyBuilder,this._configurationRepository.get(b),Vn,this._wupRetryMessage,!1,"wup"),this._wupResponseProcessor=new Mr(this._wupServerSessionState,this._msgBus,this._configurationRepository),this._wupServerClient=new tn(this._dataServerCommunicator,this._wupMessageBuilder,this._wupServerSessionState,this._wupStatisticsService,this._wupResponseProcessor,this._configurationRepository,this._msgBus);var i=this._configurationRepository.get(g)?Q.defaultDynamicWupDispatchRateConfiguration:this._configurationRepository.get(y);this._dataDispatcher=new er(this._wupServerClient,new on(this._wupServerSessionState),this._wupDispatchRateCalculatorFactory,i),this._messageProcessor=new fr(this._dataDispatcher),this._eventHandlers.push(new fn(this._msgBus,this._wupStatisticsService,this._dataDispatcher,this._logDataDispatcher,this._dataServerCommunicator,this._wupServerClient,this._logServerClient,n,this._mainCommunicator)),this._eventHandlers.push(new dn(this._msgBus,n,this._mainCommunicator)),this._eventHandlers.push(new gn(this._msgBus,n,this._mainCommunicator)),this._eventHandlers.push(new wn(this._msgBus,this._dataDispatcher,n)),this._eventHandlers.push(new Qn(this._mainCommunicator,this._msgBus,n)),this._eventHandlers.push(new hi(this._msgBus,this._mainCommunicator)),this._eventHandlers.push(new vi(this._mainCommunicator,this._wupServerSessionState,this._logServerClient)),this._eventHandlers.push(new _i(this._msgBus,this._mainCommunicator)),this._wupServerSessionState.onServerStateUpdated.subscribe(function(e){t._mainCommunicator.sendAsync(j,e)}),this._workerService=new Nn(this._mainCommunicator,this._wupServerClient,this._logServerClient,this._configurationRepository,this._messageProcessor,this._logMessageProcessor,this._wupServerSessionState,this._dataServerCommunicator),this._workerService.start(),ft.info("Loaded worker")}}])}();function xi(t){return xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xi(t)}function Bi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ci(n.key),n)}}function Ci(t){var e=function(t,e){if("object"!=xi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xi(e)?e:e+""}var Ri=function(){return function(t,e,r){return e&&Bi(t.prototype,e),r&&Bi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.subscribers=o()},[{key:"subscribe",value:function(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!1;this.subscribers.has(t)?(r=this.subscribers.get(t))&&r.forEach(function(t){e===t.handler&&(i=!0)}):(r=c(),this.subscribers.set(t,r)),i||r.add({handler:e,isOneTime:n})}},{key:"unsubscribe",value:function(t,e){if(t&&this.subscribers.has(t)){var r=this.subscribers.get(t);r&&r.forEach(function(t){e===t.handler&&r.delete(t)}),0===r.size&&this.subscribers.delete(t)}}},{key:"publish",value:function(t,e){if(!t)throw new Error("invalid argument messageType must be defined");this._notifySubscribers(t,e)}},{key:"_notifySubscribers",value:function(t,e){var r=this.subscribers.get(t);r&&r.forEach(function(t){t.handler(e),t.isOneTime&&r.delete(t)})}}])}(),Pi=Ri;function Ai(t){return Ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ai(t)}function Ii(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ti(n.key),n)}}function Ti(t){var e=function(t,e){if("object"!=Ai(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ai(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ai(e)?e:e+""}var Mi=function(){return function(t,e,r){return e&&Ii(t.prototype,e),r&&Ii(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._portNativeWorker=e},[{key:"postMessage",value:function(){this._portNativeWorker.postMessage.apply(this._portNativeWorker,arguments)}},{key:"close",value:function(){this._portNativeWorker.terminate()}},{key:"setonmessage",value:function(t){this._portNativeWorker.onmessage=t}}])}();function Oi(t){return Oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oi(t)}function Di(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ji(n.key),n)}}function ji(t){var e=function(t,e){if("object"!=Oi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Oi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Oi(e)?e:e+""}var Ui=function(){return function(t,e,r){return e&&Di(t.prototype,e),r&&Di(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},[{key:"start",value:function(){var t=new p,e=new Pi,r=new Ei(t,e);this._loadWorkerSystem(t,e,r,new Mi(self))}},{key:"_loadWorkerSystem",value:function(t,e,r,n){try{t.setMessagingPort(n),r.loadSystem(),e.publish(Pr,new qr(Or,Hr))}catch(t){e.publish(Pr,new qr(Or,Wr))}}}])}();function zi(t){return zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zi(t)}function Ni(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Li(n.key),n)}}function Li(t){var e=function(t,e){if("object"!=zi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zi(e)?e:e+""}var Fi=function(){return function(t,e,r){return e&&Ni(t.prototype,e),r&&Ni(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=self,"undefined"==typeof TextEncoder&&(e.TextEncoder=function(){},TextEncoder.prototype.encode=function(t){for(var e=[],r=0;r<t.length;r++){var n=t.charCodeAt(r);n<128?e.push(n):n<2048?e.push(192|n>>6,128|63&n):n<55296||n>=57344?e.push(224|n>>12,128|n>>6&63,128|63&n):(r++,n=65536+((1023&n)<<10|1023&t.charCodeAt(r)),e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return new Uint8Array(e)})},[{key:"start",value:function(){(new Ui).start()}}])}();(new Fi).start()}()}();',"Worker",void 0,void 0)}function Sn(e){return Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sn(e)}function En(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kn(r.key),r)}}function kn(e){var t=function(e,t){if("object"!=Sn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Sn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Sn(t)?t:t+""}var Tn=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._portNativeWorker=t},t=[{key:"postMessage",value:function(){this._portNativeWorker.postMessage.apply(this._portNativeWorker,arguments)}},{key:"close",value:function(){this._portNativeWorker.terminate()}},{key:"setonmessage",value:function(e){this._portNativeWorker.onmessage=e}}],t&&En(e.prototype,t),n&&En(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Pn(e){return Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pn(e)}function On(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Cn(r.key),r)}}function Cn(e){var t=function(e,t){if("object"!=Pn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Pn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pn(t)?t:t+""}var jn=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nativeWorker=t,this.port=new Tn(this._nativeWorker)},(t=[{key:"close",value:function(){this.port.close()}}])&&On(e.prototype,t),n&&On(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Rn(e){return Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rn(e)}function Mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bn(r.key),r)}}function Bn(e){var t=function(e,t){if("object"!=Rn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Rn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Rn(t)?t:t+""}var An=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._useUrlWorker=t,this._workerUrl=n},t=[{key:"create",value:function(){return this._useUrlWorker?this._createWorkerFromUrl():this._createInlineWorker()}},{key:"_createInlineWorker",value:function(){var e=new wn;return yt.info("Created a dedicated worker."),new jn(e)}},{key:"_createWorkerFromUrl",value:function(){try{var e=new Worker(this._workerUrl);return yt.info("Created worker from url - ".concat(this._workerUrl)),new jn(e)}catch(e){throw yt.error("Failed to construct worker from url."),e}}}],t&&Mn(e.prototype,t),n&&Mn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function xn(e){return xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xn(e)}function Dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,In(r.key),r)}}function In(e){var t=function(e,t){if("object"!=xn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=xn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xn(t)?t:t+""}var Ln=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._pairs=[],this.size=0},(t=[{key:"has",value:function(e){return this._indexOf(e)>-1}},{key:"get",value:function(e){var t=this._indexOf(e);if(t>-1)return this._pairs[t][1]}},{key:"set",value:function(e,t){var n=this._indexOf(e);n>-1?this._pairs[n][1]=t:(this._pairs.push([e,t]),this.size++)}},{key:"delete",value:function(e){var t=this._indexOf(e);return t>-1&&(this._pairs.splice(t,1),this.size--,!0)}},{key:"forEach",value:function(e){for(var t=0;t<this._pairs.length;t++)e(this._pairs[t][1],this._pairs[t][0])}},{key:"clear",value:function(){this._pairs=[]}},{key:"_indexOf",value:function(e){for(var t=0;t<this._pairs.length;t++)if(this._pairs[t][0]===e)return t;return-1}}])&&Dn(e.prototype,t),n&&Dn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),Fn=function(){return new(self.Map||Ln)};function Nn(e){return Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nn(e)}function Un(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Wn(r.key),r)}}function Wn(e){var t=function(e,t){if("object"!=Nn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Nn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Nn(t)?t:t+""}var Gn=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._set=[],this.size=0},(t=[{key:"add",value:function(e){return this._set.push(e),this.size++,this}},{key:"has",value:function(e){return this._set.indexOf(e)>-1}},{key:"delete",value:function(e){for(var t=0;t<this._set.length;t++)if(this._set[t]===e)return this._set.splice(t,1),this.size--,!0;return!1}},{key:"forEach",value:function(e){for(var t=0;t<this._set.length;t++)e(this._set[t])}},{key:"clear",value:function(){this._set=[]}}])&&Un(e.prototype,t),n&&Un(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),Hn=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new(self.Set||Gn),n=0;n<e.length;n++)t.add(e[n]);return t};function Qn(e){return Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qn(e)}function zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Vn(r.key),r)}}function Vn(e){var t=function(e,t){if("object"!=Qn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Qn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Qn(t)?t:t+""}var Kn=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._msgListeners=Fn()},t=[{key:"setMessagingPort",value:function(e){var t=this;this._messagePort=e,e.setonmessage(function(e){var n=e.data,r=[],o=t._msgListeners.get(n.msgType);o&&o.forEach(function(e){e.callback(n.data),e.isOneTime&&r.push(e)}),r.forEach(function(e){o.delete(e)})})}},{key:"sendAsync",value:function(e,t,n,r,o){r&&n&&this.addMessageListener(n,r,o),this._messagePort.postMessage({msgType:e,data:t})}},{key:"addMessageListener",value:function(e,t,n){var r=null;this._msgListeners.has(e)?r=this._msgListeners.get(e):(r=Hn(),this._msgListeners.set(e,r)),r.add({callback:t,isOneTime:n})}}],t&&zn(e.prototype,t),n&&zn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function qn(e){return qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qn(e)}function Jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yn(r.key),r)}}function Yn(e){var t=function(e,t){if("object"!=qn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qn(t)?t:t+""}var Xn=function(){return e=function e(t,n,r,o,i,a){var u,s,c,l=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u=this,c="BC",(s=Yn(s="_dataOrigin"))in u?Object.defineProperty(u,s,{value:c,enumerable:!0,configurable:!0,writable:!0}):u[s]=c,this._serverWorkerCommunicator=n,this._contextManager=r,this._passToWorkerInterval=a||0,this._intervalConfigKey=o,this._msgToWorker=i,this._Q=[],this._passToWorkerInterval&&(this._intervalId=setInterval(this._sendQToServerWorker.bind(this),this._passToWorkerInterval)),t.addEventListener(window,"beforeunload",function(){l._onUnload()},!0)},(t=[{key:"addToQueue",value:function(e,t,n,r){(n=!(null!=n&&!0!==n))&&t.push&&(t[0]=this._contextManager.contextHash),0!==this._passToWorkerInterval?(this._Q.push({eventName:e,data:t,shouldFlush:r,origin:this._dataOrigin}),r&&this._sendQToServerWorker()):this._serverWorkerCommunicator.sendAsync(this._msgToWorker,{eventName:e,data:t,shouldFlush:r,origin:this._dataOrigin})}},{key:"updateWithConfig",value:function(e){var t=e.get(this._intervalConfigKey);void 0!==t&&t!==this._passToWorkerInterval&&(this._passToWorkerInterval=t,clearInterval(this._intervalId),this._intervalId=null,0!==this._passToWorkerInterval&&(this._intervalId=setInterval(this._sendQToServerWorker.bind(this),this._passToWorkerInterval)))}},{key:"flushAllMessages",value:function(){this._Q.push({eventName:"flushData"}),this._sendQToServerWorker()}},{key:"registerOnPreSendToWorker",value:function(e){this._onPreSendToWorker=e}},{key:"_sendQToServerWorker",value:function(){try{this._onPreSendToWorker&&this._onPreSendToWorker(),this._Q.length&&(this._serverWorkerCommunicator.sendAsync(this._msgToWorker,this._Q),this._Q=[])}catch(e){yt.error("Failed sending data to worker. ".concat(e)),this._sendQInSingleMessagesToServerWorker()}}},{key:"appendData",value:function(e,t){this._Q.push({eventName:e,data:t,shouldFlush:!1,origin:this._dataOrigin})}},{key:"_sendQInSingleMessagesToServerWorker",value:function(){for(var e=0;e<this._Q.length;e++)try{this._serverWorkerCommunicator.sendAsync(this._msgToWorker,this._Q[e])}catch(e){yt.error("Failed sending single message data to worker. ".concat(e))}this._Q=[]}},{key:"_onUnload",value:function(){this.flushAllMessages()}},{key:"filterOut",value:function(e){this._Q=this._Q.filter(e)}}])&&Jn(e.prototype,t),n&&Jn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Zn(e){return Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zn(e)}function $n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,er(r.key),r)}}function er(e){var t=function(e,t){if("object"!=Zn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Zn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zn(t)?t:t+""}var tr=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._perfDataQ=t,this._now=window.performance&&window.performance.now?window.performance.now.bind(window.performance):nn.dateNow.bind(Date),this._monitors=Fn()},t=[{key:"startMonitor",value:function(e){yt.debug("PerfMonitor:startMonitor on ".concat(e)),this._monitors.set(e,this._now())}},{key:"stopMonitor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main";if(this._monitors.has(e)){var n=this._now()-this._monitors.get(e);this._perfDataQ.addToQueue("perf",{orig:t,name:e,val:n}),yt.debug("PerfMonitor:stopMonitor on ".concat(e,": time = ").concat(n)),this._monitors.delete(e)}}},{key:"cancelMonitor",value:function(e){yt.debug("PerfMonitor:cancelMonitor on ".concat(e)),this._monitors.has(e)&&this._monitors.delete(e)}},{key:"reportMonitor",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main";yt.debug("PerfMonitor:reportMonitor on ".concat(e)),this._perfDataQ.addToQueue("perf",{orig:n,name:e,val:t})}}],t&&$n(e.prototype,t),n&&$n(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function nr(e){return nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nr(e)}function rr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,or(r.key),r)}}function or(e){var t=function(e,t){if("object"!=nr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nr(t)?t:t+""}var ir=function(){return e=function e(t,n,r,o,i){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:200;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._mutationObserver=t,this._siteMapKey=o,this._keyUrl=o+"_isUrlNonMasked",this._stopOnFirstMappingMatch=a,this._siteMap=null,this._observers=[],this._utils=n,this._domUtils=r,this._onMatchCB=i,this._maxMappings=u,this._maxTriggers=10},(t=[{key:"updateObserver",value:function(e){this._onMatchCB=e}},{key:"_observeChange",value:function(e,t){if(e)try{var n=window.document.querySelector(e);if(n){var r=new this._mutationObserver(function(e){e.length>0&&t()});r.observe(n,{childList:!0,characterData:!0,attributes:!0,subtree:!0}),this._observers.push(r)}else yt.error("Selector:".concat(JSON.stringify(e)," not found on page. Check ").concat(this._siteMapKey," configuration"))}catch(e){yt.error("SiteMapper._observeChange: ".concat(e.message),e)}}},{key:"initTracking",value:function(){var e=this,t=function(){try{for(var t=0;t<e._siteMap.mappings.length;t++){var n=e._siteMap.mappings[t];if(!n.url||e._url.indexOf(n.url)>-1)if(n.selector){var r=window.document.querySelector(n.selector);if(r)if(n.byText){if((void 0!==r.innerText&&-1!==r.innerText.indexOf(n.byText)||r.value===n.byText||r.textContent===n.byText)&&(e._onMatchCB(n),e._stopOnFirstMappingMatch))return}else if(e._onMatchCB(n),e._stopOnFirstMappingMatch)return}else if(e._url.indexOf(n.url)>-1&&(e._onMatchCB(n),e._stopOnFirstMappingMatch))return}}catch(e){yt.error("SiteMapper:testQuerySelector failed. ex: ".concat(e.message),e)}};if(!this._siteMap){var n=this._utils.StorageUtils.getFromSessionStorage(this._siteMapKey);n&&n.triggers.length<=this._maxTriggers&&n.mappings.length<=this._maxMappings&&(this._siteMap=n),this._isNonMaskedUrl=this._utils.StorageUtils.getFromSessionStorage(this._keyUrl)}this._siteMap&&(this._url=this._isNonMaskedUrl?window.document.location.href:this._utils.getDocUrl(),this._domUtils.onDocumentBody(window,function(){e._mutationObserver&&e._siteMap.triggers.forEach(function(n){(!n.url||e._url.indexOf(n.url)>-1)&&e._observeChange(n.selector,t)}),t()}))}},{key:"onConfigUpdate",value:function(e){try{if(!this._siteMap&&e.get(this._siteMapKey)){this.stopTracking();var t=e.get(this._siteMapKey)&&JSON.parse(e.get(this._siteMapKey));this._isNonMaskedUrl=e.get("useNonMaskedUrlInMappings"),t&&t.triggers.length<=this._maxTriggers&&t.mappings.length<=this._maxMappings?(this._siteMap=t,this._utils.StorageUtils.saveToSessionStorage(this._siteMapKey,this._siteMap),this._utils.StorageUtils.saveToSessionStorage(this._keyUrl,this._isNonMaskedUrl),this.initTracking()):yt.warn("Configuration ".concat(this._siteMapKey," contains an illegal amount of triggers or mappings. Max Allowed Triggers: ").concat(this._maxTriggers,", ")+"Max Allowed Mappings: ".concat(this._maxMappings))}}catch(e){yt.error("An error occurred while loading ".concat(this._siteMapKey," configuration. Make sure the configuration value is valid. ").concat(e.message),e)}}},{key:"stopTracking",value:function(){for(var e=0;e<this._observers.length;e++)this._observers[e].disconnect();this._observers=[],this._siteMap=null}}])&&rr(e.prototype,t),n&&rr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function ar(e){return ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ar(e)}function ur(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sr(r.key),r)}}function sr(e){var t=function(e,t){if("object"!=ar(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ar(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ar(t)?t:t+""}var cr=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._listeners=[]},(t=[{key:"subscribe",value:function(e){this._listeners.push(e)}},{key:"publish",value:function(e){for(var t=0,n=this._listeners.length;t<n;t++)this._listeners[t](e)}},{key:"unsubscribe",value:function(e){for(var t=0,n=this._listeners.length;t<n;t++)if(e===this._listeners[t]){this._listeners.splice(t,1);break}}}])&&ur(e.prototype,t),n&&ur(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function lr(e){return lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lr(e)}function fr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pr(r.key),r)}}function pr(e){var t=function(e,t){if("object"!=lr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=lr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lr(t)?t:t+""}var hr=function(){return e=function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._utils=t,this._storageUtilsWrapper=o,this._contextSiteMapper=n,this.contextName="",this.referrer="",this.historyLen=-1,this.onContextChange=new cr,this._contextSiteMapper.updateObserver(this.onSiteMapperMatch.bind(this)),this._workerComm=r,this._contextIdKey="cdContextId",this.randomValue=Math.floor(1e6*Math.random())},(t=[{key:"contextData",value:function(){return{contextId:this.contextId,contextHash:this.contextHash,url:this.url,name:this.contextName,referrer:this.referrer,hLength:this.historyLen,timestamp:this.timestamp}}},{key:"getContextName",value:function(){return this.contextName}},{key:"setContext",value:function(e){this.contextName=e.name,this._genContext(),this.url=e.url,this.referrer=e.referrer,this.historyLen=e.hLength,this.timestamp=e.timestamp,this._publishContext()}},{key:"changeContext",value:function(e){e?e!==this.contextName?(this.contextName=e,this._updateContext(),this._publishContext(),yt.info("Context changed to ".concat(e," and Context hash its ").concat(this.contextHash))):yt.warn("Received context ".concat(e," but this is already the current context. Aborting operation.")):yt.error("Received an invalid context name ".concat(e,". Aborting context change operation"))}},{key:"onSiteMapperMatch",value:function(e){e.contextName!==this.contextName&&this.changeContext(e.contextName)}},{key:"_updateContext",value:function(){this._genContext(),this.url=this._utils.getDocUrl(),this.referrer=this._utils.clearTextFromNumbers(document.referrer),this.historyLen=window.history.length,this.timestamp=this._utils.dateNow()}},{key:"_genContext",value:function(){this.contextId=this._storageUtilsWrapper.getCookie(this._contextIdKey),this.contextId&&!isNaN(this.contextId)||(this.contextId=this._storageUtilsWrapper.getFromLocalStorage(this._contextIdKey),this.contextId&&!isNaN(this.contextId)||(this.contextId=0)),this.contextId=parseInt(this.contextId);var e=this.contextId+1;this._storageUtilsWrapper.saveToLocalStorage(this._contextIdKey,e)||yt.error("Failed saving contextId ".concat(this.contextId," to local storage.")),this._storageUtilsWrapper.setCookie(this._contextIdKey,e.toString())||yt.error("Failed saving contextId ".concat(this.contextId," to cookie.")),this.contextHash=this._toInt32Hash(this.contextId)}},{key:"_toInt32Hash",value:function(e){var t=e^=this.randomValue;return t=73244475*((t=73244475*(t>>>16^t))>>>16^t),4294967295&(t^=t>>>16)}},{key:"_publishContext",value:function(){var e={contextName:this.contextName};this._workerComm.sendAsync(an,e),this.onContextChange.publish(this.contextData())}},{key:"initContextHandling",value:function(){this._contextSiteMapper.initTracking()}},{key:"clearContextHandling",value:function(){this._contextSiteMapper.stopTracking()}},{key:"onConfigUpdate",value:function(e){this._contextSiteMapper.onConfigUpdate(e)}},{key:"onSessionReset",value:function(){this._publishContext()}}])&&fr(e.prototype,t),n&&fr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function yr(e){return yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yr(e)}function dr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mr(r.key),r)}}function mr(e){var t=function(e,t){if("object"!=yr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=yr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yr(t)?t:t+""}var vr=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cdUtils=t,this._scriptName=n,this._cdUtils.addEventListener(window,"error",this._handleException.bind(this))},(t=[{key:"_handleException",value:function(e){if(this._scriptName&&this._scriptName===e.filename){var t=this._buildErrorMessage(e);yt.error("caught unhandled exception. ".concat(t))}}},{key:"_buildErrorMessage",value:function(e){if(!e.error)return e.message;var t=e.error.toString(),n=e.error.stack?e.error.stack:"";return"".concat(t,", Line: ").concat(e.lineno,", Column: ").concat(e.colno,". Stacktrace: ").concat(n)}}])&&dr(e.prototype,t),n&&dr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function br(e){return br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},br(e)}function gr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_r(r.key),r)}}function _r(e){var t=function(e,t){if("object"!=br(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=br(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==br(t)?t:t+""}var wr=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subscribers=Fn()},t=[{key:"subscribe",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!1;this.subscribers.has(e)?(n=this.subscribers.get(e))&&n.forEach(function(e){t===e.handler&&(o=!0)}):(n=Hn(),this.subscribers.set(e,n)),o||n.add({handler:t,isOneTime:r})}},{key:"unsubscribe",value:function(e,t){if(e&&this.subscribers.has(e)){var n=this.subscribers.get(e);n&&n.forEach(function(e){t===e.handler&&n.delete(e)}),0===n.size&&this.subscribers.delete(e)}}},{key:"publish",value:function(e,t){if(!e)throw new Error("invalid argument messageType must be defined");this._notifySubscribers(e,t)}},{key:"_notifySubscribers",value:function(e,t){var n=this.subscribers.get(e);n&&n.forEach(function(e){e.handler(t),e.isOneTime&&n.delete(e)})}}],t&&gr(e.prototype,t),n&&gr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),Sr=wr;function Er(e){return Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Er(e)}function kr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Tr(r.key),r)}}function Tr(e){var t=function(e,t){if("object"!=Er(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Er(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Er(t)?t:t+""}var Pr=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=new URL(t);if(this._cid=n.searchParams.get("cid"),!this._cid)throw new Error("cid was not found on provided url.")},(t=[{key:"get",value:function(){return this._cid}}])&&kr(e.prototype,t),n&&kr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),Or="NewSessionStartedEvent",Cr="ConfigurationLoadedEvent",jr="ServerStateUpdatedEvent",Rr="HeartBeatStatusEvent",Mr="ServerRestoredMuidEvent",Br="ServerNewAgentIdEvent";function Ar(e){return Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ar(e)}function xr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Dr(r.key),r)}}function Dr(e){var t=function(e,t){if("object"!=Ar(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ar(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ar(t)?t:t+""}var Ir=function(){return e=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._workerComm=t,this._utils=n,this._currState=null,this._agentIdService=r,t.addMessageListener(jr,this._onStateUpdateFromWorker.bind(this)),t.addMessageListener(Br,this._onNewAgentIdFromWorker.bind(this)),n.addEventListener(window,"storage",this._onStateUpdateFromStorage.bind(this),!0)},t=[{key:"getServerState",value:function(e){if(this._utils.isUndefinedNull(e))throw new Error("Invalid sid param of ".concat(e));return this._currState=this._currState||this._utils.StorageUtils.getFromLocalStorage("cdSrvrState"),this._currState&&this._currState.sid!==e?null:this._currState}},{key:"onSessionIdChange",value:function(){this._utils.StorageUtils.removeFromLocalStorage("cdSrvrState"),this._currState=null}},{key:"_onStateUpdateFromWorker",value:function(e){this._updateServerState(e)}},{key:"_updateServerState",value:function(e){this._currState=e,this._utils.StorageUtils.saveToLocalStorage("cdSrvrState",e)}},{key:"_onStateUpdateFromStorage",value:function(e){if(e&&e.storageArea&&e.storageArea.cdSrvrState){var t=JSON.parse(e.storageArea.cdSrvrState);this._workerComm.sendAsync(hn,{requestId:t.val.requestId,sts:t.val.sts,std:t.val.std,ott:t.val.ott})}}},{key:"_onNewAgentIdFromWorker",value:function(e){this._agentIdService.set(e)}}],t&&xr(e.prototype,t),n&&xr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Lr(e){return Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lr(e)}function Fr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Lr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Lr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nr={V1_ONLY:"0",DUAL_COLLECTION_V1_PRIORITY:"1",DUAL_COLLECTION_V2_PRIORITY:"2",V2_ONLY:"3",isValid:function(e){return Object.values(Nr).includes(e)},getDescription:function(e){return Fr(Fr(Fr(Fr({},Nr.V1_ONLY,"Only V1 collector is active"),Nr.DUAL_COLLECTION_V1_PRIORITY,"Both collectors active, V1 is primary"),Nr.DUAL_COLLECTION_V2_PRIORITY,"Both collectors active, V2 is primary"),Nr.V2_ONLY,"Only V2 collector is active")[e]||"Unknown stage"}},Ur=Nr;function Wr(e){return Wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wr(e)}function Gr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Hr(r.key),r)}}function Hr(e){var t=function(e,t){if("object"!=Wr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Wr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Wr(t)?t:t+""}var Qr={defaultDynamicWupDispatchRateConfiguration:{type:"dynamic"},defaultIncrementalWupDispatchRateConfiguration:{type:"incremental",initialRateValueMs:500,incrementStepMs:500,incrementStopMs:5e3,incrementStartWupSendCount:20}},zr=[Y,me,ne,Z,$,te],Vr=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._requireParseFields=Fn(),this._requireParseFields.set(S,S),this._requireParseFields.set(E,E),this._requireParseFields.set(O,O),this._requireParseFields.set(Z,Z),this._requireParseFields.set(T,T),this._configurationList={},this.configDefault={logLevel:at,isCrossdomain:!1,isGfxRendering:!1,isAudioDetectFeature:!1,enableEmuidFeature:!1,crossDomainsList:[],crossDomainsTimeout:5e3,orientationEventsSamplePeriod:300,orientationEventsThreshold:1,stateChangeEnabled:!1,accelerometerEventsSamplePeriod:0,dataQPassWorkerInterval:500,gyroEventsSamplePeriod:0,gyroEventsThreshold:.3,isContextPropsFeature:!0,isEnabled:!0,isResetEveryLoad:!1,isScrollCollect:!0,isVMDetection:!0,isAudioDetection:!1,wupStatisticsLogIntervalMs:3e4,heartBeatMessageInterval:5e3,resetSessionApiThreshold:2e4,wupMessageRequestTimeout:5e3,logMessageRequestTimeout:5e3,slaveChannelHandshakeTimeout:6e4,slaveAliveMessageInterval:100,forceDynamicDataWupDispatchSettings:!0,dataWupDispatchRateSettings:Qr.defaultDynamicWupDispatchRateConfiguration,logWupDispatchRateSettings:{type:"constant",initialRateValueMs:2500},serverCommunicationSettings:{queueLoadThreshold:100},collectKeyRegionValue:!1,isMutationObserver:!0,collectCustomElementAttribute:!0,isCaptureKeyEvents:!1,locationEventsTimeoutMsec:1e4,isMotionAroundTouchEnabled:!0,motionPaddingAroundTouchMSec:3e3,isMotionOnSessionStart:!0,motionPaddingOnSessionStartMSec:2e4,keyEventsMaskSpecialChars:!1,collectSelectElementBlurAndFocusEvents:!1,enableUnmaskedValues:!1,allowedUnmaskedValuesList:[],wupMessageNumToRetry:5,wupMessageRetryInterval:1e3,wupIncrementalGrowthBetweenFailures:3500,wupMaxIntervalBetweenFailures:16e3,logMessageNumToRetry:5,logMessageRetryInterval:1e3,logIncrementalGrowthBetweenFailures:3500,logMaxIntervalBetweenFailures:16e3,cdsNumExpirationTime:60,enableCoordinatesMasking:!1,acknowledgeDataDispatchingRate:3e3,passwordIdMaskingList:[],isFontWidthFeature:!1,isFontMathFeature:!1,isFontEmojiFeature:!1,isStorageFeature:!1,isKeyboardLayoutFeature:!1,isScreenHighResFeature:!1,isBatteryStatusFeature:!1,isNavigatorFeature:!1,isWebglFeature:!1,isWebRTCFeature:!1,isSpeechVoicesFeature:!1,isDRMFeature:!1,isBrowserExtensionsFeature:!1,isAdblockerListsFeature:!1,isAudioDetectFeature2:!1,elementUniqueIDConfiguration:{componentsFormat:"{tagName}_{index}_{id}_{className}_{ariaLabel}_{containerInfo}_{hierarchyPath}",hierarchyFormat:"{tagName}_{index}",enabledTags:["input","textarea","button","select","div","span"]},offloadFontsCollectionEnabled:!0,fontCollection:JSON.stringify({migrationMode:Ur.V1_ONLY,v2:{batchSize:5,timeoutGap:0}}),enableElementHierarchy:!1,enableElementCategory:!0,isCPUFeature:!1},this.loadConfigurations(this.configDefault)},(t=[{key:"isConfigurationUpdatedFromServer",value:function(){return!this._isDefaultConfiguration}},{key:"loadConfigurations",value:function(e,t){var n=this;e&&(this._isDefaultConfiguration=e===this.configDefault,Object.keys(e).forEach(function(r){if(t||n._isDefaultConfiguration||!zr.includes(r)){var o=e[r];if(n._requireParseFields.has(r)){var i=n._tryParseConfigurationValue(o);i&&(o=i)}n._configurationList[r]=o}}))}},{key:"get",value:function(e){return this._configurationList[e]}},{key:"set",value:function(e,t){this._configurationList[e]=t}},{key:"getAll",value:function(){return this._configurationList}},{key:"_tryParseConfigurationValue",value:function(e){if("string"!=typeof e)return null;try{return JSON.parse(e)}catch(e){}return null}}])&&Gr(e.prototype,t),n&&Gr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),Kr="touchEvent",qr="keyEvent",Jr="ConfigurationLoadedEvent",Yr="NewSessionStartedEvent",Xr="ApiContextChangeEvent",Zr="ApiResetSessionEvent",$r="ApiCustomerMetadataEvent",eo="ApiChangeStateEvent",to="ApiSetCsidEvent",no="ApiSetPsidEvent",ro="ApiSetCustomerBrand",oo="ServerRestoredMuidEvent",io="StateChangedEvent",ao="MutationSingleEvent",uo="MutationAddedNodes",so="MutationRemovedNodes",co="StandardInputEvent",lo="StandardInputFocusEvent",fo="StandardInputBlurEvent",po="StandardOnClickEvent",ho="StandardOnSelectEvent",yo="ElementFocusEvent",mo="ElementBlurEvent",vo="StandardOnFormSubmitEvent",bo="SyntheticInputMaskEvent",go="CutEvent",_o="CopyEvent",wo="PasteEvent",So="DeviceOrientationEvent",Eo="BeforeInstallPromptEvent",ko="FocusEvent",To="BlurEvent",Po="ResizeEvent",Oo="DOMContentLoadedEvent",Co="VisibilityChangeEvent",jo="ScrollEvent",Ro="WindowMessageEvent",Mo="CustomElementDetectedEvent",Bo="CustomElementInaccessible",Ao="CustomElementSubmitted",xo="BrowserContextAdded",Do="CustomInputElement",Io={ElementsEvent:"BCTrackerElementsEvent",ElementEventsEvent:"BCTrackerElementEventsEvent",KeyEvent:"BCTrackerKeyEvent",TouchEvent:"BCTrackerTouchEvent",MouseEvent:"BCTrackerMouseEvent"};function Lo(e){return Lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lo(e)}function Fo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,No(r.key),r)}}function No(e){var t=function(e,t){if("object"!=Lo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Lo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lo(t)?t:t+""}var Uo=function(){return e=function e(t,n,r,o,i){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!r)throw new Error("messageBus param must be defined");this._configurationLoadedCallback=null,this._utils=t,this._configurationRepository=n,this._messageBus=r,this._cidCache=o,i&&i.addMessageListener(Cr,this._onConfigurationLoadedEvent.bind(this))},(t=[{key:"updateLogUrlToWorker",value:function(e,t,n){var r=this._configurationRepository.get(D);if(this._isValidLogUrl(r)){if(this._configurationRepository.get(k)){var o=new URL(r);r=o.protocol+"//"+o.host}var i={cid:this._cidCache.get(),sid:e,csid:t,ds:"js",sdkVer:this._utils.scriptVersion};yt.attachSessionIdentifiers(i);var a={logAddress:r,sessionIdentifiers:i};n.sendAsync(cn,a)}}},{key:"_isValidLogUrl",value:function(e){try{return new URL(e),!0}catch(e){return!1}}},{key:"setConfigurationLoadedCallback",value:function(e){this._configurationLoadedCallback=e}},{key:"_onConfigurationLoadedEvent",value:function(e){this._configurationRepository.loadConfigurations(e),this._configurationLoadedCallback&&this._configurationLoadedCallback(this._configurationRepository.get(R)),this._messageBus.publish(Jr,this._configurationRepository)}}])&&Fo(e.prototype,t),n&&Fo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Wo(e){return Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wo(e)}function Go(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ho(r.key),r)}}function Ho(e){var t=function(e,t){if("object"!=Wo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Wo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Wo(t)?t:t+""}var Qo=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"startFeature",value:function(){}},{key:"stopFeature",value:function(){}},{key:"updateFeatureConfig",value:function(){}},{key:"sendToQueue",value:function(){}},{key:"getEventTimestamp",value:function(){return nn.dateNow()}},{key:"getTimestampFromEvent",value:function(e){return e.timeStamp?nn.cutDecimalPointDigits(e.timeStamp,3):0}}],t&&Go(e.prototype,t),n&&Go(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),zo={false:0,true:1,undefined:2,null:2},Vo={Enter:13,ArrowUp:38,ArrowDown:40,ArrowLeft:37,ArrowRight:39,Escape:27," ":32,Control:17,Alt:18,Tab:9,Shift:16,CapsLock:20,Meta:91,Backspace:8,Home:36,End:35,Insert:45,Delete:46,PageUp:33,PageDown:34,PrintScreen:44,NumLock:144,Clear:144,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,10:121,F11:122,F12:123};function Ko(e){return Ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ko(e)}function qo(e){return function(e){if(Array.isArray(e))return Jo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Jo(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jo(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Yo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xo(r.key),r)}}function Xo(e){var t=function(e,t){if("object"!=Ko(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ko(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ko(t)?t:t+""}var Zo=-1e3,$o=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._configurationRepository=t,this._attributesToMask=this._configurationRepository.get(ne),this.maskedCodeMapping={original:function(e,t,n){return{code:e,charCode:t,key:n}},numpadKey:function(e){return{code:"Numpad",charCode:96,key:e}},letter:function(){return{code:"Key",charCode:65,key:"A"}},digit:function(){return{code:"Digit",charCode:49,key:"1"}},specialChar:function(){return{code:"SpecialChar",charCode:42,key:"*"}},other:function(){return{code:"Other",charCode:66,key:"B"}},masked:function(){return{code:"Masked",charCode:"a".charCodeAt(0),key:"a"}}},this.digitMaskValue="1",this.letterMaskValueLowerCase="a",this.unicodeMaskValue="B",this.specialCharMaskValue="*",this.customPasswordMaskValue="a",this.specialConfigurationChars=new Set([",","."," ","@",";",":","-","+","$"]),this.specialChars=new Set(["_","!","%","^","&","*","#","(",")","=","{","}","[","]","’","\\","|","/","?",">","<","~",'"',"±","§","'"]),this.lettersSet=new Set(qo(Array(26)).map(function(e,t){return String.fromCharCode(65+t)}).concat(qo(Array(26)).map(function(e,t){return String.fromCharCode(97+t)})).concat(qo(Array(27)).map(function(e,t){return String.fromCharCode(1488+t)}))),this.digitsSet=new Set(qo(Array(10)).map(function(e,t){return String(t)})),this.cjkNumbersSet=new Set(["〇","一","二","三","四","五","六","七","八","九","十","百","千","万","零","壹","貳","贰","參","叁","肆","伍","陸","陆","柒","捌","玖","拾","佰","仟","萬","〡","〢","〣","〤","〥","〦","〧","〨","〩","〸","〹","〺"]),this.allowedUnmaskedChars=new Set([",",".","@",";",":","-","+","$"," "]),this.allowedMaskedChars=new Set(["a","1","*"])},t=[{key:"maskKey",value:function(e,t,n){if(this._isPasswordMaskedElementId(n))return this.maskedCodeMapping.masked();if(Vo[e]){var r=Vo[e];return this.maskedCodeMapping.original(t,r,e)}return this._isANumberOrDigit(e)?t.includes("Numpad")?this.maskedCodeMapping.numpadKey("1"):this.maskedCodeMapping.digit():this._isALetter(e)?this.maskedCodeMapping.letter():!this._configurationRepository.get(Y)&&this.specialConfigurationChars.has(e)?this.maskedCodeMapping.original(t,e.charCodeAt(0),e):this.specialChars.has(e)||this.specialConfigurationChars.has(e)?t.includes("Numpad")?this.maskedCodeMapping.numpadKey("*"):this.maskedCodeMapping.specialChar():this.maskedCodeMapping.other()}},{key:"getKeyFromLegacyProperties",value:function(e){var t=e.keyCode||e.which;return 0===t||void 0===t?"":String.fromCharCode(t)}},{key:"_isALetter",value:function(e){return/^[a-zA-Z]$/.test(e)||this._isJapaneseOrChineseLetter(e)||this._isHebrewLetter(e)}},{key:"_isANumberOrDigit",value:function(e){return/[0-9]/.test(e)||this.cjkNumbersSet.has(e)}},{key:"_isJapaneseOrChineseLetter",value:function(e){return this._isCJKUnifiedIdeographs(e)||this._isCJKUnifiedIdeographsExtenA(e)||this._isCJKUnifiedIdeographsExtenB(e)||this._isSmallKatakanaLetter(e)}},{key:"_isCJKUnifiedIdeographsExtenB",value:function(e){return/[\u3041-\u309F]/.test(e)}},{key:"_isSmallKatakanaLetter",value:function(e){return/[\u30A1-\u30FF]/.test(e)}},{key:"_isCJKUnifiedIdeographsExtenA",value:function(e){return/[\u3400-\u4DB5]/.test(e)}},{key:"_isCJKUnifiedIdeographs",value:function(e){return/[\u4E00-\u9FCC]/.test(e)}},{key:"_isHebrewLetter",value:function(e){return/[\u05D0-\u05EA]/.test(e)}},{key:"_isPasswordMaskedElementId",value:function(e){var t=this._configurationRepository.get(me);return void 0!==e&&Array.isArray(t)&&t.includes(e)}},{key:"getDropDownListValues",value:function(e){for(var t=[],n=0;n<e.length;n++){var r=e.options[n].text||e.options[n].value||"";t.push(this.maskText(r,e.id))}return t}},{key:"maskText",value:function(e,t){var n=this;if(!e)return"";if(this._isPasswordMaskedElementId(t))return e.replace(/./g,this.customPasswordMaskValue);var r=qo(e).map(function(e){return n.digitsSet.has(e)?n.digitMaskValue:n.lettersSet.has(e)?n.letterMaskValueLowerCase:n.cjkNumbersSet.has(e)?n.digitMaskValue:n.specialChars.has(e)?n.specialCharMaskValue:n.allowedUnmaskedChars.has(e)?e:n.unicodeMaskValue}).join("");return this._configurationRepository.get(Y)?r=qo(r).map(function(e){return n.allowedUnmaskedChars.has(e)?n.specialCharMaskValue:e}).map(function(e){return n.allowedMaskedChars.has(e)?e:n.unicodeMaskValue}).join(""):r}},{key:"maskAbsoluteIfRequired",value:function(e,t){return""!==e&&this._shouldMask(e)?this.maskText(e,t):e}},{key:"shouldMaskCoordinates",value:function(){return this._configurationRepository.get(te)}},{key:"_shouldMask",value:function(e){var t=this;return void 0!==this._attributesToMask&&this._attributesToMask.some(function(n){return t._isConformsRegex(n.regexPattern,e)||n.name.toLowerCase()===(null==e?void 0:e.toLowerCase())})}},{key:"_isConformsRegex",value:function(e,t){try{if(new RegExp(e).test(t))return yt.debug("The string ".concat(t," matches the pattern ").concat(e,".")),!0}catch(e){yt.error("Invalid regex pattern: ".concat(e))}return yt.debug("The string ".concat(t," does not match the pattern. ").concat(e,".")),!1}}],t&&Yo(e.prototype,t),n&&Yo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function ei(e){return ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ei(e)}function ti(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ni(r.key),r)}}function ni(e){var t=function(e,t){if("object"!=ei(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ei(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ei(t)?t:t+""}function ri(e,t,n){return t=ii(t),function(e,t){if(t&&("object"==ei(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,oi()?Reflect.construct(t,n||[],ii(e).constructor):t.apply(e,n))}function oi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(oi=function(){return!!e})()}function ii(e){return ii=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ii(e)}function ai(e,t){return ai=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ai(e,t)}var ui={configKey:"isTouchEvents",isDefault:!0,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!0,runInSlave:!0,runInLean:!0,runInUns:!1,isRunning:!1,instance:null},si={pointerdown:"touchstart",pointerup:"touchend",pointermove:"touchmove",MSPointerDown:"touchstart",MSPointerUp:"touchend",MSPointerMove:"touchmove"},ci={touchstart:0,touchmove:1,touchend:2,touchcancel:3},li=["eventSequence","timestamp","eventType","isTrusted","elementHash","clientX","clientY","touchIndex","touchSizeMajor","touchSizeMinor","pageX","pageY","screenX","screenY","relativeTime","touchPressure"],fi=function(e){function t(e,n,r,o,i,a){var u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(u=ri(this,t))._utils=e,u._dataQ=r,u._elements=n,u._msgBus=o,u._onAllBrowsersTouchEventBinded=u._onAllBrowsersTouchEvent.bind(u),u._maskingService=i,u._maxShadowDepth=a.getMaxShadowDepth(),u._iframeLoadingTimeout=a.getIframeLoadingTimeout(),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ai(e,t)}(t,e),n=t,r=[{key:"startFeature",value:function(e){this._bind(e)}},{key:"stopFeature",value:function(e){this._unbind(e)}},{key:"_addToCommunicationQueue",value:function(e,t,n,r){e!==ci.touchstart&&e!==ci.touchend||this._msgBus.publish(Kr,{action:e});var o=this.getEventTimestamp(r),i=zo[r.isTrusted],a=this._elements.getElementHashFromEvent(r),u=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();this._utils.isUndefinedNull(e)&&(e=-1),this._utils.isUndefinedNull(t)&&(t=-1);var s=this.getTimestampFromEvent(r);this._dataQ.addToQueue("touch_events",this._utils.convertToArrayByMap(li,{eventSequence:u,timestamp:o,eventType:e,isTrusted:i,elementHash:a,clientX:this._maskingService.shouldMaskCoordinates()?Zo:n.clientX?Math.round(n.clientX):0,clientY:this._maskingService.shouldMaskCoordinates()?Zo:n.clientY?Math.round(n.clientY):0,touchIndex:t,touchSizeMajor:n.radiusX?2*n.radiusX:0,touchSizeMinor:n.radiusY?2*n.radiusY:0,pageX:this._maskingService.shouldMaskCoordinates()?Zo:n.pageX||0,pageY:this._maskingService.shouldMaskCoordinates()?Zo:n.pageY||0,screenX:this._maskingService.shouldMaskCoordinates()?Zo:n.screenX||0,screenY:this._maskingService.shouldMaskCoordinates()?Zo:n.screenY||0,relativeTime:s,touchPressure:n.force||-1}))}},{key:"_bind",value:function(e){var t,n=this,r=e.getDocument();if(window.TouchEvent?t=["touchstart","touchmove","touchend","touchcancel"]:window.PointerEvent&&(t=["pointerdown","pointermove","pointerup"]),this._listeningToEvents=t,this._listeningToEvents)for(var o=function(t){n._utils.addEventListener(r,n._listeningToEvents[t],n._onAllBrowsersTouchEventBinded),e.collectAllElementsBySelectorAsync("iframe",n._maxShadowDepth,n._iframeLoadingTimeout).then(function(e){e.forEach(function(e){e&&e.contentDocument&&n._utils.addEventListener(e.contentDocument,n._listeningToEvents[t],n._onAllBrowsersTouchEventBinded)})})},i=0;i<this._listeningToEvents.length;i++)o(i)}},{key:"_unbind",value:function(e){var t=this,n=e.getDocument();if(this._listeningToEvents)for(var r=function(r){t._utils.removeEventListener(n,t._listeningToEvents[r],t._onAllBrowsersTouchEventBinded),e.collectAllElementsBySelectorAsync("iframe",t._maxShadowDepth,t._iframeLoadingTimeout).then(function(e){e.forEach(function(e){e&&e.contentDocument&&t._utils.removeEventListener(e.contentDocument,t._listeningToEvents[r],t._onAllBrowsersTouchEventBinded)})})},o=0;o<this._listeningToEvents.length;o++)r(o)}},{key:"_onAllBrowsersTouchEvent",value:function(e){return this._onIeTouchEvent(e),this._onTouchEvent(e),!0}},{key:"_onTouchEvent",value:function(e){if((null===e.pointerType||void 0===e.pointerType)&&void 0!==e.changedTouches)for(var t=ci[e.type],n=0;n<e.changedTouches.length;n++){var r=e.changedTouches[n],o=r.identifier%1e4;this._addToCommunicationQueue(t,o,r,e)}}},{key:"_onIeTouchEvent",value:function(e){if(null!=e.pointerType&&("touch"===e.pointerType||"pen"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_TOUCH||e.pointerType===e.MSPOINTER_TYPE_PEN)){var t=si[e.type]||"touchcancel",n=e.pointerId?e.pointerId%1e4:0,r=ci[t];this._addToCommunicationQueue(r,n,e,e)}}}],o=[{key:"getDefaultSettings",value:function(){return ui}}],r&&ti(n.prototype,r),o&&ti(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Qo);function pi(e){return pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pi(e)}function hi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,yi(r.key),r)}}function yi(e){var t=function(e,t){if("object"!=pi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pi(t)?t:t+""}var di={true:1,false:0,undefined:-1},mi=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._elementList=new WeakMap},(t=[{key:"update",value:function(e,t){this._elementList.set(e,t)}},{key:"compare",value:function(e,t){return di[t===this._elementList.get(e)]}}])&&hi(e.prototype,t),n&&hi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),vi={IntlBackslash:"0",Digit1:"0",Digit2:"0",Digit3:"0",Digit4:"1",Digit5:"1",Digit6:"1",Digit7:"1",Digit8:"2",Digit9:"2",Digit0:"2",KeyQ:"3",KeyW:"3",KeyE:"3",KeyA:"3",KeyS:"3",KeyD:"3",KeyZ:"3",KeyX:"3",KeyC:"3",KeyR:"4",KeyT:"4",KeyF:"4",KeyG:"4",KeyV:"4",KeyB:"4",KeyY:"5",KeyU:"5",KeyH:"5",KeyJ:"5",KeyN:"5",KeyM:"5",KeyI:"6",KeyO:"6",KeyP:"6",KeyK:"6",KeyL:"6",Comma:"6",Period:"6",Semicolon:"7",Minus:"7",Equal:"7",Slash:"7",BracketLeft:"7",Backslash:"7",BracketRight:"7",Quote:"7",NumLock:"8",NumpadDivide:"8",NumpadMultiply:"8",NumpadSubtract:"8",NumpadAdd:"8",NumpadEnter:"8",NumpadDecimal:"8",Numpad0:"8",Numpad1:"8",Numpad2:"8",Numpad3:"8",Numpad4:"8",Numpad5:"8",Numpad6:"8",Numpad7:"8",Numpad8:"8",Numpad9:"8"};function bi(e){return bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bi(e)}function gi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_i(r.key),r)}}function _i(e){var t=function(e,t){if("object"!=bi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=bi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bi(t)?t:t+""}function wi(e,t,n){return t=Ei(t),function(e,t){if(t&&("object"==bi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Si()?Reflect.construct(t,n||[],Ei(e).constructor):t.apply(e,n))}function Si(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Si=function(){return!!e})()}function Ei(e){return Ei=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ei(e)}function ki(e,t){return ki=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ki(e,t)}var Ti={configKey:"isKeyEvents",isDefault:!0,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!0,runInSlave:!0,runInLean:!0,runInUns:!1,isRunning:!1,instance:null},Pi={keyup:0,keydown:1,keypress:2},Oi=["eventSequence","timestamp","eventType","isTrusted","elementHash","charCode","character","keyComboType","isCtrl","isShift","isAlt","isMetaKey","keyLocation","code","key","isRepeat","keyRegion","relativeTime","isSameKey"],Ci=function(e){function t(e,n,r,o,i,a,u,s){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(c=wi(this,t))._configurationRepository=e,c._utils=n,c._elements=r,c._dataQueue=o,c._msgBus=i,c._sameCharService=a,c._maskingService=u,c._maxShadowDepth=s.getMaxShadowDepth(),c._iframeLoadingTimeout=s.getIframeLoadingTimeout(),c.comboCodes=["c","v","a","x","z","p","s"],c._onKeyEvent=c._onKeyEvent.bind(c),c._useCaptureEvents=c._configurationRepository.get(I),c._listeners=[],c._listenedDocuments=new WeakSet,c}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ki(e,t)}(t,e),n=t,r=[{key:"startFeature",value:function(e){var t=this;try{var n=e.getDocument();this._bind(n,this._onKeyEvent,this._useCaptureEvents),e.collectAllElementsBySelectorAsync("iframe",this._maxShadowDepth,this._iframeLoadingTimeout).then(function(e){e.forEach(function(e){e&&e.contentDocument&&t._bind(e.contentDocument,t._onKeyEvent,t._useCaptureEvents)})})}catch(e){yt.error("KeyEvents:startFeature failed, msg: ".concat(e.message),e)}}},{key:"stopFeature",value:function(e){var t=this;try{var n=e.getDocument();this._unbind(n),e.collectAllElementsBySelectorAsync("iframe",this._maxShadowDepth,this._iframeLoadingTimeout).then(function(e){e.forEach(function(e){e&&e.contentDocument&&t._unbind(e.contentDocument)})})}catch(e){yt.error("KeyEvents:stopFeature failed, msg: ".concat(e.message),e)}}},{key:"updateFeatureConfig",value:function(e){try{if(this._configurationRepository.get(I)!==this._useCaptureEvents){var t=e.getDocument(),n=this._configurationRepository.get(I);this._unbind(t),this._bind(t,this._onKeyEvent,n),this._useCaptureEvents=n}}catch(e){yt.error("KeyEvents:startFeature failed, msg: ".concat(e.message),e)}}},{key:"_bind",value:function(e,t,n){this._listenedDocuments.has(e)||(this._listenedDocuments.add(e),this._addListener(e,"keyup",t,n),this._addListener(e,"keydown",t,n),this._addListener(e,"keypress",t,n))}},{key:"_unbind",value:function(e){this._listenedDocuments.delete(e),this._removeAllListeners(e,"keyup"),this._removeAllListeners(e,"keydown"),this._removeAllListeners(e,"keypress")}},{key:"_addListener",value:function(e,t,n,r){e.addEventListener(t,n,r),this._listeners.push({target:e,type:t,handler:n,options:r})}},{key:"_removeAllListeners",value:function(e,t){this._listeners.filter(function(n){return n.target===e&&n.type===t}).forEach(function(e){e.target.removeEventListener(e.type,e.handler,e.options)}),this._listeners=this._listeners.filter(function(n){return!(n.target===e&&n.type===t)})}},{key:"_onKeyEvent",value:function(e){var t=Pi[e.type];t!==Pi.keydown&&t!==Pi.keyup||this._msgBus.publish(qr,{action:t}),this._handleKeyEvent(e,"key_events")}},{key:"_handleKeyEvent",value:function(e,t){var n=this._elements.getRealEventTarget(e).id,r=Pi[e.type];this._utils.isUndefinedNull(r)&&(r=-1);var o=this._utils.StorageUtils.getAndUpdateEventSequenceNumber(),i=this.getEventTimestamp(e),a=e.key||this._maskingService.getKeyFromLegacyProperties(e),u=e.code||"",s=this._maskingService.maskKey(a,u,n),c=s.key.length>1?"":s.key,l=this._elements.getElementHashFromEvent(e),f=this._getComboType(e,a),p=zo[e.isTrusted],h="Meta"===e.key||"OS"===e.key||"Win"===e.key||e.metaKey||91===e.keyCode||92===e.keyCode,y=this._configurationRepository.get(P)?this._getKeyRegion(u):"-1",d=this.getTimestampFromEvent(e),m=di.undefined;"keypress"===e.type&&(m=this._sameCharService.compare(e.target,e.key),this._sameCharService.update(e.target,e.key)),yt.isDebug()&&yt.trace("onKeyEvent: got event: ".concat(r,", at time:").concat(i,", key: ").concat(s.key,", code:").concat(s.code,", old charCode:").concat(s.charCode)),this._dataQueue.addToQueue(t,this._utils.convertToArrayByMap(Oi,{eventType:r,eventSequence:o,timestamp:i,charCode:s.charCode,character:c,elementHash:l,keyComboType:f,isTrusted:p,isCtrl:e.ctrlKey||!1,isShift:e.shiftKey||!1,isAlt:e.altKey||!1,isMetaKey:h||!1,keyLocation:e.location||0,code:s.code||"",key:s.key||"",location:e.location||"",isRepeat:e.repeat||!1,keyRegion:y,relativeTime:d,isSameKey:m}))}},{key:"_getKeyRegion",value:function(e){return vi[e]?vi[e]:"-1"}},{key:"_getComboType",value:function(e,t){return(e.ctrlKey||e.metaKey)&&void 0!==t?this.comboCodes.indexOf(t):-1}}],o=[{key:"getDefaultSettings",value:function(){return Ti}}],r&&gi(n.prototype,r),o&&gi(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Qo);function ji(e){return ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ji(e)}function Ri(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Mi(r.key),r)}}function Mi(e){var t=function(e,t){if("object"!=ji(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ji(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ji(t)?t:t+""}var Bi=function(){return e=function e(t,n,r,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._historyBuffer=[],this._isTouchInProgress=!1,this._touchStartCount=0,this._isPostTouch=!1,this._touchEndTime=0,this._sensorGateKeeper=i,this._dataQueue=n,this._configurationRepository=t,this._msgBus=r,this._utils=o,this._msgBus.subscribe(Kr,this._onTouch.bind(this)),this._msgBus.subscribe(qr,this._onTouch.bind(this)),this._isMotionAroundTouchEnabled=this._configurationRepository.get(N),this._aroundTouchInterval=this._configurationRepository.get(U)},(t=[{key:"addToQueue",value:function(e,t,n,r){var o=this._utils.dateNow();if(this._isPostTouch&&o-this._touchEndTime>this._aroundTouchInterval&&(yt.debug("SensorsDataQueue: stopped post touch events, time has passed (".concat(this._aroundTouchInterval," millisec)")),this._isPostTouch=!1),!this._isMotionAroundTouchEnabled||this._isTouchInProgress||this._isPostTouch||this._sensorGateKeeper.isOpen())this._dataQueue.addToQueue(e,t,n,r);else{this._historyBuffer.push({name:e,data:t,addCtxId:n,isImmediateWup:r,timestamp:o});for(var i=0,a=this._historyBuffer.length;i<a&&o-this._historyBuffer[0].timestamp>this._aroundTouchInterval;i++)this._historyBuffer.shift()}}},{key:"onConfigUpdate",value:function(){this._aroundTouchInterval=void 0!==this._configurationRepository.get(U)?this._configurationRepository.get(U):this._aroundTouchInterval,this._isMotionAroundTouchEnabled=void 0!==this._configurationRepository.get(N)?this._configurationRepository.get(N):this._isMotionAroundTouchEnabled}},{key:"_sendBuffer",value:function(){var e=this._utils.dateNow();yt.debug("sending history sensors buffer ts=".concat(e));for(var t=0,n=this._historyBuffer.length;t<n;t++)e-this._historyBuffer[t].timestamp<=this._aroundTouchInterval&&this._dataQueue.addToQueue(this._historyBuffer[t].name,this._historyBuffer[t].data,this._historyBuffer[t].addCtxId,this._historyBuffer[t].isImmediateWup);this._historyBuffer=[]}},{key:"_onTouch",value:function(e){return this._isMotionAroundTouchEnabled&&(this._isTouchInProgress||e.action!==ci.touchstart&&e.action!==Pi.keydown?e.action===ci.touchend||e.action===Pi.keyup?(this._touchStartCount--,this._touchStartCount<=0&&(this._isTouchInProgress=!1,this._isPostTouch=!0,this._touchEndTime=this._utils.dateNow(),yt.debug("stopped touch event in sensors data q ts=".concat(this._utils.dateNow())))):e.action!==ci.touchstart&&e.action!==Pi.keydown||this._touchStartCount++:(yt.debug("Started touch event in sensors data q ts=".concat(this._utils.dateNow())),this._isTouchInProgress=!0,this._touchStartCount=1,this._sendBuffer())),!1}}])&&Ri(e.prototype,t),n&&Ri(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Ai(e){return Ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ai(e)}function xi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Di(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Di(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Di(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ii(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Li(r.key),r)}}function Li(e){var t=function(e,t){if("object"!=Ai(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ai(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ai(t)?t:t+""}var Fi=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._weights={input:5,fieldset:4,form:3,textarea:3,label:2},this._interactiveElementsTag=["input","fieldset","textarea","label"],this._classlist=["container","wrapper","section","content","main-content","main_content"],this._containerTagName=["main","article","aside","div"]},t=[{key:"isElementVisible",value:function(e){if(!(e instanceof HTMLElement))return!1;if(e.hasAttribute("hidden"))return!1;var t=window.getComputedStyle(e);if("none"===t.display||"hidden"===t.visibility||0===parseFloat(t.opacity))return!1;var n=e.offsetWidth>0||e.offsetHeight>0,r=e.getClientRects().length>0;if(!n&&!r)return!1;for(var o=e.parentElement;o;){var i=window.getComputedStyle(o);if("none"===i.display||"hidden"===i.visibility||o.hasAttribute("hidden"))return!1;o=o.parentElement}return!0}},{key:"isInExcludedArea",value:function(e){for(var t=e;t;){if(t.tagName){var n=t.tagName.toLowerCase();if("footer"===n||"header"===n||"nav"===n)return!0}t=t.parentElement}return!1}},{key:"isContainer",value:function(e){var t=this,n=e.tagName.toLowerCase(),r=e.className.split(" "),o=e.getAttribute("aria-label")?"_".concat(e.getAttribute("aria-label")):"",i=Array.from(e.attributes).filter(function(e){return e.name.startsWith("data-")}).map(function(e){return"_".concat(e.name)});return!!this._containerTagName.includes(n)||r.some(function(e){return t._classlist.includes(e)})||e.hasAttribute("role")&&"region"===e.getAttribute("role")||o.length>0||i.length>0}},{key:"isCustomElement",value:function(e){return"string"==typeof e.localName&&e.localName.indexOf("-")>0}},{key:"calculateScore",value:function(e){var t=this._weights,n=0;return e.id&&e.id.includes("username")?n=20:e.name&&e.name.includes("username")&&(n=10),t[e.tagName.toLowerCase()]+n+("text"===e.type?10:0)}},{key:"findInteractiveArea",value:function(e){var t=this,n=e.querySelectorAll(this._interactiveElementsTag),r={};return n.forEach(function(e){var n,o;if(t.isElementVisible(e)&&!t.isInExcludedArea(e)){var i=e.parentElement,a="".concat(i.tagName,".").concat((null===(n=i.className)||void 0===n?void 0:n.split(" ")[0])||"");r[a]||(r[a]={score:0,parent:i,types:new Set}),r[a].types.add(e.tagName.toLowerCase()),r[a].score+=t.calculateScore(e),r[a].score+=null!==(o=e.id)&&void 0!==o&&o.includes("maincontent")?20:0,r[a].score-=e.disabled?20:0}}),Object.values(r).reduce(function(e,t){return t.score+2*t.types.size>e.score?t:e},{score:0}).parent}},{key:"findPotentialContainer",value:function(e){for(var t=e,n=null;t&&"body"!==t.tagName.toLowerCase();){if(this.isContainer(t)){var r;n=t;var o=null===(r=t)||void 0===r||null===(r=r.tagName)||void 0===r?void 0:r.toLowerCase(),i=t.className.split(" ");if("div"===o&&(i.includes("containerWrapper")||i.includes("container")))return t;if(this._containerTagName.includes(o)&&"div"!==o)return t}t=t.parentElement}return n}},{key:"interactiveContainer",value:function(){var e=this.findInteractiveArea(document);if(!e)return yt.info("No significant interactive area.");var t=this.findPotentialContainer(e);return t||void 0}},{key:"getUniqueElementId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;if(!e||!t)return"";var r=t.componentsFormat,o=t.hierarchyFormat;if(!t.isTagEnabled(e.tagName))return"-1";for(var i=this.findInteractiveArea(document),a=i?this.findPotentialContainer(i):null,u=a?"".concat(a.tagName.toLowerCase(),"_").concat(a.className||""):"",s=this._buildFullHierarchyPath(e,o,n),c={"{tagName}":e.tagName.toLowerCase(),"{index}":"[".concat(this._getSiblingIndex(e),"]"),"{id}":e.id||"","{className}":e.className||"","{ariaLabel}":e.getAttribute("aria-label")||"","{hierarchyPath}":s,"{containerInfo}":u},l=r,f=0,p=Object.entries(c);f<p.length;f++){var h=xi(p[f],2),y=h[0],d=h[1];l=l.replace(y,d)}return l=l.replace(/\{[^}]+\}/g,"").replace(/[_:]+/g,"_").replace(/(^_|_$)/g,"")}},{key:"_getSiblingIndex",value:function(e){var t;return String(Array.from((null===(t=e.parentNode)||void 0===t?void 0:t.children)||[]).indexOf(e))}},{key:"_buildFullHierarchyPath",value:function(e,t,n){for(var r=[],o=e.parentNode,i=0;o&&"body"!==(null===(a=o.tagName)||void 0===a?void 0:a.toLowerCase())&&i<n;){var a,u,s=null===(u=o.tagName)||void 0===u?void 0:u.toLowerCase(),c=this._getSiblingIndex(o),l=t.replace("{tagName}",s||"").replace("{index}",c>=0?"[".concat(c,"]"):""),f=[];o.id&&f.push(o.id),o.name&&f.push(o.name),o.className&&f.push(o.className),f.length>0&&(l+="".concat(f.join(""))),r.unshift(l),o=o.parentNode instanceof ShadowRoot?o.parentNode.host:o.parentElement,i++}return r.join("")}},{key:"getUniqueElementXpath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;if(!e)return"";for(var n=[],r=0;e&&r<t;){var o=e.tagName?e.tagName.toLowerCase():e.nodeName.toLowerCase();if(e.id)n.unshift("".concat(o,"#").concat(e.id));else{for(var i=1,a=e;a.previousElementSibling;)a=a.previousElementSibling,i++;n.unshift("".concat(o,":").concat(i))}e=e.assignedSlot?e.assignedSlot:e.parentNode instanceof ShadowRoot?e.parentNode.host:e.parentElement,r++}return n.join("/")}}],t&&Ii(e.prototype,t),n&&Ii(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),Ni=Object.freeze(new Fi);function Ui(e){return Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ui(e)}function Wi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gi(r.key),r)}}function Gi(e){var t=function(e,t){if("object"!=Ui(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ui(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ui(t)?t:t+""}var Hi=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.componentsFormat=t,this.hierarchyFormat=n,this.enabledTags=r}return t=e,r=[{key:"cleanFormat",value:function(e){return e?(e.match(/{[^}]+}|[:_]/g)||[]).join(""):""}},{key:"parse",value:function(t){try{if("string"==typeof t&&(t=JSON.parse(t)),"object"!==Ui(t)||null===t)throw new Error("Invalid configuration format");return new e(e.cleanFormat(t.componentsFormat),e.cleanFormat(t.hierarchyFormat),t.enabledTags)}catch(e){return yt.error("Failed to parse UniqueIDConfiguration:",e),null}}}],(n=[{key:"isTagEnabled",value:function(e){return"string"==typeof e&&this.enabledTags.length>0&&this.enabledTags.includes(e.toLowerCase())}}])&&Wi(t.prototype,n),r&&Wi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function Qi(e){return Qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qi(e)}function zi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Vi(r.key),r)}}function Vi(e){var t=function(e,t){if("object"!=Qi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Qi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Qi(t)?t:t+""}function Ki(e,t,n){return t=Ji(t),function(e,t){if(t&&("object"==Qi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,qi()?Reflect.construct(t,n||[],Ji(e).constructor):t.apply(e,n))}function qi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(qi=function(){return!!e})()}function Ji(e){return Ji=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ji(e)}function Yi(e,t){return Yi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yi(e,t)}var Xi=function(e){function t(e,n,r,o,i,a){var u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(u=Ki(this,t))._configurationRepository=e,u._utils=n,u._dataQueue=r,u._contextMgr=o,u._maskingService=i,u._categoryService=a,u._elementHashWMap=new WeakMap,u._collectPosition=!0,u._collectClassName=!0,u._collectTitle=!0,u._collectHref=!0,u._collectCustomElementAttribute=!0,u._customElementAttribute=u._configurationRepository.get(B),u._maxElemValLength=30,u._allowedUnmaskedValuesList=u._configurationRepository.get(Z),u._enableUnmaskedValues=u._configurationRepository.get($),u._enableElementHierarchy=u._configurationRepository.get(ue),u._enableElementCategory=u._configurationRepository.get(se),u._uniqueIDConfiguration=Hi.parse(u._configurationRepository.get(ve)),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yi(e,t)}(t,e),n=t,(r=[{key:"getElement",value:function(e){if(this._utils.isUndefinedNull(e)||e===document||e===document.body)return-1;var t=-1;if(this._elementHashWMap.has(e))t=this._elementHashWMap.get(e).hash;else{var n=Ni.getUniqueElementXpath(e);t=n?this._utils.getHash(n):-1,this._elementHashWMap.set(e,{hash:t,contextList:[this._contextMgr.contextName]}),this._sendElementToServer(e,t)}return t}},{key:"getElementHashFromEvent",value:function(e){var t=this.getRealEventTarget(e);return this.getElement(t)}},{key:"getRealEventTarget",value:function(e){var t=e.composedPath?e.composedPath():null;return t&&t.length>0?t[0]:e.target}},{key:"resendElementPerContext",value:function(e){if(this._elementHashWMap.has(e)){var t=this._elementHashWMap.get(e),n=t.hash;t.contextList.indexOf(this._contextMgr.contextName)<0&&(t.contextList.push(this._contextMgr.contextName),this._elementHashWMap.set(e,{hash:t.hash,contextList:t.contextList}),this._sendElementToServer(e,n))}else yt.error("received for resendElementPerContext bad element, not in hash map. id=".concat(e.id))}},{key:"isListed",value:function(e){return this._elementHashWMap.has(e)}},{key:"getElementData",value:function(e){return this._elementHashWMap.get(e)}},{key:"getElementContextList",value:function(e){return this._elementHashWMap.get(e).contextList}},{key:"_sendElementToServer",value:function(e,t){var n=this._collectPosition?e.getBoundingClientRect&&e.getBoundingClientRect():null,r=-1,o=-1,i=-1,a=-1;n&&(r=Math.round(n.left),o=Math.round(n.top),i=Math.round(n.right-n.left),a=Math.round(n.bottom-n.top));var u=this._maskingService.maskAbsoluteIfRequired(e.id,e.id),s=this._maskingService.maskAbsoluteIfRequired(e.name,e.id),c=this._collectClassName&&e.getAttribute&&this._verifyNoPrivateData(e.getAttribute("class"))||"",l=this._collectTitle&&this._verifyNoPrivateData(e.title)||"",f=this._verifyNoPrivateData(e.nodeName)||"",p=this._collectHref&&this._verifyNoPrivateData(e.href)||"";p.length>0&&(p=this._utils.clearTextFromNumbers(p));var h=this._collectCustomElementAttribute&&e.getAttribute&&this._verifyNoPrivateData(e.getAttribute(this._customElementAttribute))||"",y=this._maskingService.maskAbsoluteIfRequired(h,e.id),d="";"SELECT"===e.nodeName&&(d=this._utils.getDropDownListValues(e,this._maskingService).join(";"));var m=e.value||e.textContent||e.innerHTML||"",v="";this._enableUnmaskedValues&&Array.isArray(this._allowedUnmaskedValuesList)&&this._allowedUnmaskedValuesList.length>0&&this._allowedUnmaskedValuesList.forEach(function(e){"string"!=typeof e?yt.error("Unsupported allowedUnmaksedValuesList value was provided: ".concat(e.toString())):e.toLowerCase()===m.trim().toLowerCase()&&(v=e)}),m=m.length>this._maxElemValLength?"":this._maskingService.maskText(m,e.id);var b=this._utils.isUndefinedNull(e.checked)?-1:e.checked?1:0,g=this.getEventTimestamp(),_=this.enableElementHierarchy?Ni.getUniqueElementId(e,this._uniqueIDConfiguration):"",w=this._enableElementCategory?this._categoryService.categoryField(e):"";this._dataQueue.addToQueue("elements",[this._contextMgr.contextHash,t,f||"",u||"",s||"",e.type||"",r||0,o||0,i||0,a||0,c||"",p||"",l||"",e.alt||"",d||"",m||"",b,g,y||h,v,_,w],!1),yt.isDebug()&&yt.debug("adding element id:"+u+", name:"+s+", type:"+e.type+", width:"+i+", height:"+a+", left:"+r+", top:"+o+", hash: "+t)}},{key:"_verifyNoPrivateData",value:function(e){return/\d\d\d/.test(e)?this._utils.clearTextFromNumbers(e):e}},{key:"updateFeatureConfig",value:function(){this._collectPosition="boolean"==typeof this._configurationRepository.get("isElementsPosition")?this._configurationRepository.get("isElementsPosition"):this._collectPosition,this._collectClassName="boolean"==typeof this._configurationRepository.get("isElementsClassName")?this._configurationRepository.get("isElementsClassName"):this._collectClassName,this._collectTitle="boolean"==typeof this._configurationRepository.get("isElementsTitle")?this._configurationRepository.get("isElementsTitle"):this._collectTitle,this._collectHref="boolean"==typeof this._configurationRepository.get("isElementsHref")?this._configurationRepository.get("isElementsHref"):this._collectHref,this._collectCustomElementAttribute="boolean"==typeof this._configurationRepository.get(M)?this._configurationRepository.get(M):this._collectCustomElementAttribute,this._customElementAttribute="string"==typeof this._configurationRepository.get(B)?this._configurationRepository.get(B):this._customElementAttribute,this._maxElemValLength=this._configurationRepository.get("maxElValLen")?this._configurationRepository.get("maxElValLen"):this._maxElemValLength,this._allowedUnmaskedValuesList=this._configurationRepository.get("allowedUnmaskedValuesList")?this._configurationRepository.get("allowedUnmaskedValuesList"):this._allowedUnmaskedValuesList,this._enableUnmaskedValues=this._configurationRepository.get("enableUnmaskedValues")?this._configurationRepository.get("enableUnmaskedValues"):this._enableUnmaskedValues,this._enableElementHierarchy="boolean"==typeof this._configurationRepository.get(ue)?this._configurationRepository.get(ue):this._enableElementHierarchy,this._enableElementCategory="boolean"==typeof this._configurationRepository.get(se)?this._configurationRepository.get(se):this._enableElementCategory,this._uniqueIDConfiguration="string"==typeof this._configurationRepository.get(ve)?Hi.parse(this._configurationRepository.get(ve)):this._uniqueIDConfiguration}}])&&zi(n.prototype,r),o&&zi(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Qo),Zi="cd__rtcframe",$i="cd__fontDetectionFrame",ea="cd__frame__";function ta(e){return ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ta(e)}function na(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ra(r.key),r)}}function ra(e){var t=function(e,t){if("object"!=ta(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ta(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ta(t)?t:t+""}var oa=function(){return e=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._elementsMutationObserverFactory=t,this._configurationRepository=r,this._domUtils=n,this._windowMutationObservers=Fn(),this._loadedFrames=Fn(),this._framesToIgnore=Hn(),this._frameSelector="frame, iframe",this._frameLoadedCallback=this._onFrameLoad.bind(this),this.frameAdded=new cr,this.frameRemoved=new cr,this.frameInaccessible=new cr},(t=[{key:"frames",get:function(){var e=[];return this._loadedFrames.forEach(function(t,n){e.push(n)}),e}},{key:"start",value:function(e){var t=this;this._monitorWindow(e),this._findFrames(e.document).forEach(function(e){t._processNewFrame(e)})}},{key:"stop",value:function(){this._windowMutationObservers.forEach(function(e){e.disconnect()}),this._windowMutationObservers.clear(),this._loadedFrames.clear(),this._framesToIgnore.clear()}},{key:"addToIgnoreList",value:function(e){this._framesToIgnore.add(e)}},{key:"_monitorWindow",value:function(e){if(!this._windowMutationObservers.has(e)){var t=new this._elementsMutationObserverFactory.create(e,self.MutationObserver,this._configurationRepository);t.observe(e.document),t.nodeAdded.subscribe(this._processAddedNode.bind(this)),t.nodeRemoved.subscribe(this._processRemovedNode.bind(this)),this._windowMutationObservers.set(e,t)}}},{key:"_unMonitorWindow",value:function(e){var t=this._windowMutationObservers.get(e);t&&t.disconnect(),this._windowMutationObservers.delete(e)}},{key:"_processAddedNode",value:function(e){var t=this;if(this._domUtils.matches(e,this._frameSelector))this._processNewFrame(e);else{if(!e.hasChildNodes())return;this._findFrames(e).forEach(function(e){t._processNewFrame(e)})}}},{key:"_processNewFrame",value:function(e){this._framesToIgnore.has(e.id)||e.id.startsWith(ea)||this._loadedFrames.has(e)||(this._domUtils.addEventListener(e,"load",this._frameLoadedCallback),this._domUtils.canAccessIFrame(e)?this._domUtils.isWindowDocumentReady(e.contentWindow)&&this._addFrame(e):this.frameInaccessible.publish(e))}},{key:"_addFrame",value:function(e){var t=this;this._monitorWindow(e.contentWindow),this._findFrames(e.contentWindow.document).forEach(function(e){t._processNewFrame(e)}),this._loadedFrames.set(e,e.contentDocument),this.frameAdded.publish(e)}},{key:"_processRemovedNode",value:function(e){var t=this;if(this._domUtils.matches(e,this._frameSelector))this._removeFrame(e);else{if(!e.hasChildNodes())return;this._findFrames(e).forEach(function(e){t._removeFrame(e)})}}},{key:"_removeFrame",value:function(e){this._unMonitorWindow(e.contentWindow),this._domUtils.removeEventListener(e,"load",this._frameLoadedCallback),this._loadedFrames.delete(e)&&this.frameRemoved.publish(e)}},{key:"_onFrameLoad",value:function(e){var t=e.target;this._loadedFrames.has(t)&&this._removeFrame(t),this._processNewFrame(t)}},{key:"_findFrames",value:function(e){for(var t=[],n=[],r=e.querySelectorAll(this._frameSelector),o=0;o<r.length;o++)n.push(r[o]);for(var i=0;i<n.length;i++){var a,u=n[i];t.push(u),this._domUtils.canAccessIFrame(u)?(a=this._findFrames(u.contentWindow.document)).length>0&&(t=t.concat(a)):this.frameInaccessible.publish(u)}return t}}])&&na(e.prototype,t),n&&na(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function ia(e){return ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ia(e)}function aa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ua(r.key),r)}}function ua(e){var t=function(e,t){if("object"!=ia(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ia(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ia(t)?t:t+""}var sa=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"startFeatures",value:function(){}},{key:"startFeature",value:function(){}},{key:"stopFeatures",value:function(){}},{key:"stopFeature",value:function(){}},{key:"updateFeatureConfig",value:function(){}}])&&aa(e.prototype,t),n&&aa(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function ca(e){return ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ca(e)}function la(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return fa(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(fa(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,fa(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,fa(f,"constructor",c),fa(c,"constructor",s),s.displayName="GeneratorFunction",fa(c,o,"GeneratorFunction"),fa(f),fa(f,o,"Generator"),fa(f,r,function(){return this}),fa(f,"toString",function(){return"[object Generator]"}),(la=function(){return{w:i,m:p}})()}function fa(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}fa=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){fa(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},fa(e,t,n,r)}function pa(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ha(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ha(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function ha(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ya(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function da(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){ya(i,r,o,a,u,"next",e)}function u(e){ya(i,r,o,a,u,"throw",e)}a(void 0)})}}function ma(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,va(r.key),r)}}function va(e){var t=function(e,t){if("object"!=ca(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ca(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ca(t)?t:t+""}var ba=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.context=t||window.self},t=[{key:"Context",get:function(){return this.context}},{key:"getDocument",value:function(){return this.context.document}},{key:"collectAllElementsBySelectorAsync",value:(r=da(la().m(function e(t){var n,r,o,i,a,u,s,c,l=arguments;return la().w(function(e){for(;;)switch(e.n){case 0:return s=function(e){return new Promise(function(t,n){try{var r=e.contentDocument;if(r&&"complete"===r.readyState)return t();e.addEventListener("load",function(){return t()},{once:!0}),setTimeout(function(){return n(new Error("Iframe load timeout"))},o)}catch(e){n(e)}})},u=function(){return u=da(la().m(function e(n){var o,u,c,l,f,p,h,y,d=arguments;return la().w(function(e){for(;;)switch(e.n){case 0:if(o=d.length>1&&void 0!==d[1]?d[1]:0,n&&"function"==typeof n.querySelectorAll){e.n=1;break}return e.a(2);case 1:n.querySelectorAll(t).forEach(function(e){return i.push(e)}),u=n.querySelectorAll("*"),c=pa(u),e.p=2,c.s();case 3:if((l=c.n()).done){e.n=10;break}if(!((f=l.value).shadowRoot&&o<r)){e.n=4;break}return e.n=4,a(f.shadowRoot,o+1);case 4:if("IFRAME"!==f.tagName){e.n=9;break}return e.p=5,e.n=6,s(f);case 6:if(!(p=f.contentDocument)){e.n=7;break}return e.n=7,a(p,o);case 7:e.n=9;break;case 8:e.p=8,h=e.v,yt.warn("Skipped iframe:",h.message,f.title);case 9:e.n=3;break;case 10:e.n=12;break;case 11:e.p=11,y=e.v,c.e(y);case 12:return e.p=12,c.f(),e.f(12);case 13:return e.a(2)}},e,null,[[5,8],[2,11,12,13]])})),u.apply(this,arguments)},a=function(e){return u.apply(this,arguments)},r=l.length>1&&void 0!==l[1]?l[1]:0,o=l.length>2&&void 0!==l[2]?l[2]:5e3,i=[],c=(null===(n=this.getDocument)||void 0===n?void 0:n.call(this))||document,e.n=1,a(c);case 1:return e.a(2,i)}},e,this)})),function(e){return r.apply(this,arguments)})}],t&&ma(e.prototype,t),n&&ma(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r}();function ga(e){return ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ga(e)}function _a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wa(r.key),r)}}function wa(e){var t=function(e,t){if("object"!=ga(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ga(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ga(t)?t:t+""}function Sa(e,t,n){return t=ka(t),function(e,t){if(t&&("object"==ga(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ea()?Reflect.construct(t,n||[],ka(e).constructor):t.apply(e,n))}function Ea(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ea=function(){return!!e})()}function ka(e){return ka=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ka(e)}function Ta(e,t){return Ta=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ta(e,t)}var Pa=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Sa(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ta(e,t)}(t,e),n=t,(r=[{key:"getDocument",value:function(){return this.context.document||this.context.contentDocument}}])&&_a(n.prototype,r),o&&_a(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(ba);function Oa(e){return Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oa(e)}function Ca(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ja(r.key),r)}}function ja(e){var t=function(e,t){if("object"!=Oa(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Oa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Oa(t)?t:t+""}function Ra(e,t,n){return t=Ba(t),function(e,t){if(t&&("object"==Oa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ma()?Reflect.construct(t,n||[],Ba(e).constructor):t.apply(e,n))}function Ma(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ma=function(){return!!e})()}function Ba(e){return Ba=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ba(e)}function Aa(e,t){return Aa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Aa(e,t)}var xa=function(e){function t(e,n,r,o,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=Ra(this,t))._framesCache=e,a._framesDetector=n,a._framesDetector.frameAdded.subscribe(a._onFrameAdded.bind(a)),a._framesDetector.frameRemoved.subscribe(a._onFrameRemoved.bind(a)),a._framesDetector.frameInaccessible.subscribe(a._onFrameInaccessible.bind(a)),a._featuresList=[],a._domUtils=r,a._utils=o,a._framesDetector.addToIgnoreList(Zi),a._framesDetector.addToIgnoreList($i),a.callMethod=i?a._utils.asyncCall:a._utils.asyncTimeoutCall,a._framesDetector.start(window.self),a._buildFramesCache(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Aa(e,t)}(t,e),n=t,r=[{key:"startFeatures",value:function(e){try{if(this._buildFeaturesMap(e),0===this._featuresList.length)return;yt.debug("startFeatures:Running features on ".concat(this._framesCache.count," frames")),this._startFeaturesOnFrames(this._framesCache.contexts,e)}catch(e){yt.debug("Failed to start features in FrameHandler.startFeatures: ".concat(e.message),e)}}},{key:"startFeature",value:function(e){try{this._featuresList.push(e),e.isRunning=!0,this._startFeaturesOnFrames(this._framesCache.contexts,[e])}catch(e){yt.debug("Failed to start feature in FrameHandler.startFeature: ".concat(e.message),e)}}},{key:"stopFeatures",value:function(e){try{this._stopFeaturesOnFrames(e,this._framesCache.contexts)}catch(e){yt.debug("Failed to stop features in FrameHandler.stopFeatures: ".concat(e.message),e)}}},{key:"stopFeature",value:function(e){try{e.isRunning=!1,this._stopFeaturesOnFrames([e],this._framesCache.contexts)}catch(e){yt.debug("Failed to stop feature in FrameHandler.stopFeature: ".concat(e.message),e)}}},{key:"updateFeatureConfig",value:function(e){e.instance.updateFeatureConfig&&this._updateFeaturesConfigOnFrames([e],this._framesCache.contexts)}},{key:"_onFrameAdded",value:function(e){try{yt.debug("Frame:".concat(e.name,", id:").concat(e.id,". was loaded.")),this._framesCache.exists(e)?this._framesCache.unRegisterContextFeatures(e,this._featuresList):this._framesCache.add(e),this._startFeaturesOnFrames([e],this._featuresList)}catch(t){yt.warn("Failed to start features on frame ".concat(e.id,": ").concat(t.message),t)}}},{key:"_onFrameRemoved",value:function(e){try{yt.debug("Frame:".concat(e.name,", id:").concat(e.id,". was removed.")),this._stopFeaturesOnFrames(this._featuresList,[e])}catch(t){yt.warn("Failed to stop features on frame ".concat(e.id,": ").concat(t.message),t)}}},{key:"_onFrameInaccessible",value:function(e){yt.debug("Frame:".concat(e.name,", id:").concat(e.id,". was detected as inaccessible."))}},{key:"_buildFeaturesMap",value:function(e){var t=this;this._featuresList=[],e.forEach(function(e){t._featuresList.push(e)})}},{key:"_buildFramesCache",value:function(){var e=this;this._framesDetector.frames.forEach(function(t){e._framesCache.exists(t)||e._framesCache.add(t)})}},{key:"_startFeaturesOnFrames",value:function(e,t){var n=this;e.forEach(function(e){try{if(!n._domUtils.canAccessIFrame(e))return;for(var r=0;r<t.length;r++){var o=t[r];o.shouldRun&&!n._framesCache.hasFeature(e,o)&&(n._framesCache.registerContextFeature(e,o),n._domUtils.isWindowDocumentReady(e.contentWindow)&&(yt.debug("_startFeaturesOnFrames: run feature on frame:".concat(e.name,", id:").concat(e.id,". feature:").concat(o.configKey)),n.callMethod.call(n._runFeatureOnFrame,n,e,o),o.isRunning=!0))}}catch(t){yt.error("An error has occurred while starting features on frame ".concat(e.name," with id: ").concat(e.id,". Error: ").concat(t.message),t)}})}},{key:"_runFeatureOnFrame",value:function(e,t){try{this._domUtils.canAccessIFrame(e)?t.instance.startFeature(new Pa(e.contentWindow)):yt.debug("Not starting features on frame ".concat(e.name," with id: ").concat(e.id," as it is not accessible"))}catch(n){yt.error("An error has occurred while starting feature ".concat(t.configKey," on frame ").concat(e.name," with id: ").concat(e.id,". Error: ").concat(n.message),n)}}},{key:"_stopFeaturesOnFrames",value:function(e,t){var n=this;try{t.forEach(function(t){try{if(!n._domUtils.canAccessIFrame(t))return;if(t.contentWindow&&t.contentWindow.document)for(var r=0,o=e.length;r<o;r++)n._framesCache.hasFeature(t,e[r])&&n.callMethod.call(n._stopFeatureOnFrame,n,t,e[r]),e[r].isRunning=!1}catch(e){yt.error("An error has occurred while stopping features on frame ".concat(t.name," with id: ").concat(t.id,". Error: ").concat(e.message),e)}n._framesCache.exists(t)&&n._framesCache.unRegisterContextFeatures(t,e),n._framesCache.remove(t)})}catch(e){yt.warn("Failed stopping features on frames ".concat(e.message),e)}}},{key:"_stopFeatureOnFrame",value:function(e,t){try{this._domUtils.canAccessIFrame(e)?t.instance.stopFeature(new Pa(e.contentWindow)):yt.debug("Not stopping feature ".concat(t.configKey," on frame ").concat(e.name," with id: ").concat(e.id," as it is not accessible"))}catch(n){yt.error("An error has occurred while stopping feature ".concat(t.configKey," ").concat(func," on frame ").concat(e.name," with id: ").concat(e.id,". Error: ").concat(n.message),n)}}},{key:"_updateFeaturesConfigOnFrames",value:function(e,t){var n=this;t.forEach(function(t){try{if(!n._domUtils.canAccessIFrame(t))return;for(var r=0,o=e.length;r<o;r++)n._framesCache.hasFeature(t,e[r])&&n.callMethod.call(n._updateFeatureConfigOnFrame,n,t,e[r])}catch(e){yt.error("An error has occurred while updating features configuration on frame ".concat(t.name," with id: ").concat(t.id,". Error: ").concat(e.message),e)}})}},{key:"_updateFeatureConfigOnFrame",value:function(e,t){try{this._domUtils.canAccessIFrame(e)?t.instance.updateFeatureConfig(new Pa(e.contentWindow)):yt.debug("Not updating feature ".concat(t.configKey," config on frame ").concat(e.name," with id: ").concat(e.id," as it is not accessible"))}catch(n){yt.error("An error has occurred while updating feature ".concat(t.configKey," config on frame ").concat(e.name," with id: ").concat(e.id,". Error: ").concat(n.message),n)}}}],r&&Ca(n.prototype,r),o&&Ca(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(sa);function Da(e){return Da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Da(e)}function Ia(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,La(r.key),r)}}function La(e){var t=function(e,t){if("object"!=Da(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Da(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Da(t)?t:t+""}function Fa(e,t,n){return t=Ua(t),function(e,t){if(t&&("object"==Da(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Na()?Reflect.construct(t,n||[],Ua(e).constructor):t.apply(e,n))}function Na(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Na=function(){return!!e})()}function Ua(e){return Ua=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ua(e)}function Wa(e,t){return Wa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wa(e,t)}var Ga=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Fa(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wa(e,t)}(t,e),n=t,r&&Ia(n.prototype,r),o&&Ia(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(sa);function Ha(e){return Ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ha(e)}function Qa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,za(r.key),r)}}function za(e){var t=function(e,t){if("object"!=Ha(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ha(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ha(t)?t:t+""}var Va=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._contexts=Fn()},(t=[{key:"contexts",get:function(){var e=[];return this._contexts.forEach(function(t,n){e.push(n)}),e}},{key:"browserContexts",get:function(){var e=[];return this._contexts.forEach(function(t){e.push(t.browserContext)}),e}},{key:"count",get:function(){return this._contexts.size}},{key:"add",value:function(e){this._contexts.set(e,{registered:!0,features:Fn()})}},{key:"addBrowserContext",value:function(e){this._contexts.set(e.Context,{registered:!0,features:Fn(),browserContext:e})}},{key:"remove",value:function(e){this.exists(e)&&0===this._contexts.get(e).features.size&&this._contexts.delete(e)}},{key:"get",value:function(e){return this._contexts.get(e)}},{key:"exists",value:function(e){return this._contexts.has(e)&&this._contexts.get(e).registered}},{key:"registerContextFeature",value:function(e,t){this.exists(e)&&this._contexts.get(e).features.set(t.configKey,!0)}},{key:"unRegisterContextFeature",value:function(e,t){this.exists(e,t)&&this._contexts.get(e).features.delete(t.configKey)}},{key:"unRegisterContextFeatures",value:function(e,t){for(var n=0;n<t.length;n++){var r=t[n];this.unRegisterContextFeature(e,r)}}},{key:"hasFeature",value:function(e,t){return this.exists(e)&&this._contexts.get(e).features.has(t.configKey)}}])&&Qa(e.prototype,t),n&&Qa(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Ka(e){return Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ka(e)}function qa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ya(r.key),r)}}function Ja(e,t,n){return t&&qa(e.prototype,t),n&&qa(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ya(e){var t=function(e,t){if("object"!=Ka(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ka(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ka(t)?t:t+""}var Xa=Ja(function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.browserContext=t,this.removedNodes=n});function Za(e){return Za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Za(e)}function $a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tu(r.key),r)}}function eu(e,t,n){return t&&$a(e.prototype,t),n&&$a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function tu(e){var t=function(e,t){if("object"!=Za(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Za(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Za(t)?t:t+""}var nu=eu(function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.browserContext=t,this.addedNodes=n});function ru(e){return ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ru(e)}function ou(e){return function(e){if(Array.isArray(e))return iu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return iu(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iu(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function au(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,uu(r.key),r)}}function uu(e){var t=function(e,t){if("object"!=ru(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ru(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ru(t)?t:t+""}var su=function(){return e=function e(t,n,r){var o,i,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,i="ignoreNodeTypes",a=Hn([Node.COMMENT_NODE,Node.TEXT_NODE,Node.ATTRIBUTE_NODE,Node.CDATA_SECTION_NODE]),(i=uu(i))in o?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a,this._mutationObserver=new n(this._mutationObserved.bind(this,t)),this.nodesAdded=new cr,this.nodesRemoved=new cr,this.nodeAdded=new cr,this.nodeRemoved=new cr,this._configurationRepository=r,this.mutationQueue=[],this.processingQueue=!1},(t=[{key:"observe",value:function(e){this._mutationObserver.observe(e,{childList:!0,subtree:!0})}},{key:"disconnect",value:function(){this._mutationObserver.disconnect()}},{key:"_mutationObserved",value:function(e,t){var n,r,o,i=this,a=(null===(n=this._configurationRepository)||void 0===n?void 0:n.get(ye))||0,u=(null===(r=this._configurationRepository)||void 0===r?void 0:r.get(de))||100,s=t.filter(function(e){return"childList"===e.type&&[].concat(ou(e.addedNodes),ou(e.removedNodes)).some(function(e){return i._isValidNodeType(e)})});if(a&&s.length>a)for(var c=function(){var t=s.slice(l,l+Math.min(a,s.length-l));setTimeout(function(){t.forEach(function(t){i._processMutation(e,t)})},u)},l=0;l<s.length;l+=a)c();else(o=this.mutationQueue).push.apply(o,ou(s)),this.processingQueue||(this.processingQueue=!0,this.requestIdleCallbackSafe(function(){return i._processMutationQueue(e)}))}},{key:"_processMutationQueue",value:function(e){for(var t,n=this,r=(null===(t=this._configurationRepository)||void 0===t?void 0:t.get(ye))||50;this.mutationQueue.length>0;)this.mutationQueue.splice(0,r).forEach(function(t){return n._processMutation(e,t)});this.processingQueue=!1}},{key:"_processMutation",value:function(e,t){var n=this._processNodes(t.addedNodes,this.nodeAdded),r=this._processNodes(t.removedNodes,this.nodeRemoved);this._publishNodesMutationEvents(e,n,r)}},{key:"_publishNodesMutationEvents",value:function(e,t,n){var r=this;t.length>0&&this.requestIdleCallbackSafe(function(){return r.nodesAdded.publish(new nu(e,t))}),n.length>0&&this.requestIdleCallbackSafe(function(){return r.nodesRemoved.publish(new Xa(e,n))})}},{key:"_processNodes",value:function(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r];this._isValidNodeType(o)&&(n.push(o),t.publish(o))}return n}},{key:"_isValidNodeType",value:function(e){return!this.ignoreNodeTypes.has(e.nodeType)}},{key:"requestIdleCallbackSafe",value:function(e){return(window.requestIdleCallback||function(e){return setTimeout(function(){e({timeRemaining:function(){return 0},didTimeout:!0})},1)})(e)}}])&&au(e.prototype,t),n&&au(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function cu(e){return cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cu(e)}function lu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fu(r.key),r)}}function fu(e){var t=function(e,t){if("object"!=cu(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=cu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cu(t)?t:t+""}var pu=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"create",value:function(e,t,n){return new su(e,t,n)}}])&&lu(e.prototype,t),n&&lu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function hu(e){return hu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hu(e)}function yu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,du(r.key),r)}}function du(e){var t=function(e,t){if("object"!=hu(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=hu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hu(t)?t:t+""}var mu=function(){return e=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._configurationRepository=t,this._domUtils=n,this._utils=r},(t=[{key:"create",value:function(){var e=this._configurationRepository.get(A),t=this._configurationRepository.get(ge);if(e){var n=new Va,r=new oa(new pu,this._domUtils,this._configurationRepository);return new xa(n,r,this._domUtils,this._utils,t)}return new Ga}}])&&yu(e.prototype,t),n&&yu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function vu(e){return vu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vu(e)}function bu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gu(r.key),r)}}function gu(e){var t=function(e,t){if("object"!=vu(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=vu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vu(t)?t:t+""}var _u=function(){return e=function e(t,n,r,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._features=t,this._frameHandler=n,this._configurationRepository=r,this._domUtils=o,this._cdUtils=i,this._browserContextsCache=a,this.callMethod=this._configurationRepository.get(ge)?this._cdUtils.asyncCall:this._cdUtils.asyncTimeoutCall,this.buildFrameRelatedLists()},(t=[{key:"buildFrameRelatedLists",value:function(){this._frameRelatedDefaultFeatures=this._collectFrameRelated(this._features.getDefaultFeatures()),this._frameRelatedNonDefaultFeatures=this._collectFrameRelated(this._features.getNonDefaultFeatures())}},{key:"runDefault",value:function(){var e=this;yt.info("Running default features"),"complete"===document.readyState?this._runFeatures(this._features.getDefaultFeatures(),this._frameRelatedDefaultFeatures):window.addEventListener("load",function(){e._runFeatures(e._features.getDefaultFeatures(),e._frameRelatedDefaultFeatures)},{once:!0})}},{key:"stopDefault",value:function(){yt.info("Stopping default features"),this._stopFeatures(this._features.getDefaultFeatures(),this._frameRelatedDefaultFeatures)}},{key:"runPerSessionFeatures",value:function(){yt.info("Running per session features"),this._configurationRepository.isConfigurationUpdatedFromServer()?this._startFeatures(this._features.getPerSessionFeatures()):yt.info("We didn't receive configurations from the server yet. Skipping per session features start until configuration arrives.")}},{key:"stopPerSessionFeatures",value:function(){yt.info("Stopping per session features"),this._stopFeatures(this._features.getPerSessionFeatures())}},{key:"runNonDefault",value:function(){yt.info("Running non default features"),this._configurationRepository.isConfigurationUpdatedFromServer()?this._runFeatures(this._features.getNonDefaultFeatures(),this._frameRelatedNonDefaultFeatures):yt.info("We didn't receive configurations from the server yet. Skipping non default features start until configuration arrives.")}},{key:"stopNonDefault",value:function(){yt.info("Stopping non default features"),this._stopFeatures(this._features.getNonDefaultFeatures(),this._frameRelatedNonDefaultFeatures)}},{key:"runPerContextFeatures",value:function(e){yt.info("Running per context features"),this._configurationRepository.isConfigurationUpdatedFromServer()?(this._runFeatures(this._features.getPerContextFeatures()),"cd_auto"!==e.name&&this._frameRelatedDefaultFeatures&&this._frameHandler.startFeatures(this._frameRelatedDefaultFeatures)):yt.info("We didn't receive configurations from the server yet. Skipping per context features start until configuration arrives.")}},{key:"stopPerContextFeatures",value:function(){yt.info("Stopping per context features"),this._stopFeatures(this._features.getPerContextFeatures())}},{key:"stopAllFeatures",value:function(){yt.info("Stopping all features"),this.stopDefault(),this.stopNonDefault(),this.stopPerSessionFeatures(),this.stopPerContextFeatures()}},{key:"updateRunByConfig",value:function(e){yt.info("Updating features configuration"),this._updateFeatures(this._features.getDefaultFeatures(),e),this._updateFeatures(this._features.getNonDefaultFeatures(),e),this._updateFeatures(this._features.getPerContextFeatures(),e)}},{key:"runFeaturesOnBrowserContext",value:function(e){var t=this,n=this._features.getDefaultFeatures();n&&(this._browserContextsCache.unRegisterContextFeatures(e.Context,n),Object.keys(n).forEach(function(r){var o=n[r];o.shouldRun&&o.isFrameRelated&&(o.isRunning=!0,o.instance&&t.callMethod.call(o.instance.startFeature,o.instance,e))}))}},{key:"stopFeaturesOnBrowserContextRemove",value:function(e){var t=this,n=this._features.getDefaultFeatures();n&&(this._browserContextsCache.unRegisterContextFeatures(e.Context,n),Object.keys(n).forEach(function(r){var o=n[r];o.shouldRun&&o.isFrameRelated&&o.isRunning&&o.instance&&t.callMethod.call(o.instance.stopFeature,o.instance,e)}))}},{key:"_runFeatures",value:function(e,t){var n=this;e&&Object.keys(e).forEach(function(t){var r=e[t];r.shouldRun&&(n.callMethod.call(r.instance.startFeature,r.instance,new ba(window.self)),r.isRunning=!0)}),t&&(this._frameHandler.startFeatures(t),this._domUtils.onPageLoad(window,function(){n._frameHandler.startFeatures(t)}))}},{key:"_stopFeatures",value:function(e,t){var n=this;e&&Object.keys(e).forEach(function(t){var r=e[t];r.instance.stopFeature&&n.callMethod.call(r.instance.stopFeature,r.instance,new ba(window.self)),r.isRunning=!1}),t&&this._frameHandler.stopFeatures(t)}},{key:"_actOnFeature",value:function(e,t){e.isFrameRelated&&this._frameHandler[t](e),e.instance[t]&&this.callMethod.call(e.instance[t],e.instance,new ba(window.self))}},{key:"_startFeatures",value:function(e){var t=this;e&&Object.keys(e).forEach(function(n){var r=e[n],o=t._configurationRepository.get(r.configKey);"boolean"==typeof o&&(r.shouldRun=o),r.shouldRun&&(t._actOnFeature(r,"startFeature"),r.isRunning=!0)})}},{key:"_startFeatureOnBrowserContexts",value:function(e){var t=this;e.isFrameRelated&&this._browserContextsCache.browserContexts.forEach(function(n){e.shouldRun&&!t._browserContextsCache.hasFeature(n.Context,e)&&(t._browserContextsCache.registerContextFeature(n.Context,e),t.callMethod.call(e.instance.startFeature,e.instance,n),e.isRunning=!0)})}},{key:"_stopFeatureOnBrowserContexts",value:function(e){var t=this;e.isFrameRelated&&this._browserContextsCache.browserContexts.forEach(function(n){t._browserContextsCache.hasFeature(n.Context,e)&&t.callMethod.call(e.instance.stopFeature,e.instance,n),e.isRunning=!1,t._browserContextsCache.exists(n.Context)&&t._browserContextsCache.unRegisterContextFeature(n.Context,e),t._browserContextsCache.remove(n.Context)})}},{key:"_updateFeatureConfigOnBrowserContexts",value:function(e){var t=this;e.isFrameRelated&&this._browserContextsCache.browserContexts.forEach(function(n){t._browserContextsCache.hasFeature(n.Context,e)&&t.callMethod.call(e.instance.updateFeatureConfig,e.instance,n)})}},{key:"_updateFeatures",value:function(e,t){var n=this;e&&Object.keys(e).forEach(function(r){var o=e[r],i=t.get(o.configKey);"boolean"==typeof i&&(o.shouldRun=i),o.isRunning&&!o.shouldRun?(n._actOnFeature(o,"stopFeature"),n._stopFeatureOnBrowserContexts(o),o.isRunning=!1):!o.isRunning&&o.shouldRun&&(n._actOnFeature(o,"startFeature"),n._startFeatureOnBrowserContexts(o),o.isRunning=!0),o.isRunning&&(n._actOnFeature(o,"updateFeatureConfig"),n._updateFeatureConfigOnBrowserContexts(o))})}},{key:"_collectFrameRelated",value:function(e){var t=[];return e&&Object.keys(e).forEach(function(n){var r=e[n];r.isFrameRelated&&t.push(r)}),t}}])&&bu(e.prototype,t),n&&bu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function wu(e){return wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wu(e)}function Su(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Eu(r.key),r)}}function Eu(e){var t=function(e,t){if("object"!=wu(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=wu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wu(t)?t:t+""}var ku=0,Tu=1,Pu=function(){return e=function e(t,n,r,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._featureMgr=t,this._dataQ=r,this._configurationRepository=n,this._pauseResumeEnabled=n.get(K)||!1,this._sdkState=ku,this._stateService=o,this._workerComm=i},(t=[{key:"onResume",value:function(){this._sdkState===Tu?(yt.info("Resuming JS SDK"),this._featureMgr.updateRunByConfig(this._configurationRepository),this._sdkState=ku,this._stateService.updateState(bn.started)):yt.warn("PauseResumeManager:onResume - resume api called when SDK already running")}},{key:"onPause",value:function(){this._sdkState===ku?(yt.info("Pausing JS SDK"),this._featureMgr.stopAllFeatures(),this._sdkState=Tu,this._stateService.updateState(bn.paused)):yt.warn("Pause api called when SDK already paused")}},{key:"onStateChange",value:function(e){e.toState&&this._verifyApiAllowed(e.toState)&&("pause"===e.toState?(this.onPause(),this.updateSDKStateToWorker(Tu)):"run"===e.toState?(this.onResume(),this.updateSDKStateToWorker(ku)):yt.warn("stateChange api called with non valid toState: "+e.toState))}},{key:"updateSDKStateToWorker",value:function(e){var t={SDK_state:e};this._workerComm.sendAsync(vn,t)}},{key:"isCustomerApiEnabled",value:function(){return this._sdkState===ku}},{key:"_verifyApiAllowed",value:function(e){return!!this._pauseResumeEnabled||(this._dataQ.addToQueue("forbidden_api_call",[null,e]),!1)}},{key:"onConfigUpdate",value:function(){this._pauseResumeEnabled=this._configurationRepository.get(K)||!1,!1===this._configurationRepository.get("isEnabled")&&this.onPause()}}])&&Su(e.prototype,t),n&&Su(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),Ou="ContextChange",Cu="ResetSession",ju="cdCustomerMetadata",Ru="cdChangeState",Mu="cdSetCsid",Bu="cdSetPsid",Au="cdSetCustomerBrand";function xu(e){return xu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xu(e)}function Du(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Iu(r.key),r)}}function Iu(e){var t=function(e,t){if("object"!=xu(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=xu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xu(t)?t:t+""}var Lu=function(){return e=function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._pauseResumeMgr=t,this._messageBus=n,this._cdApiFacade=r,this._utils=o,this._createCommandToBusMessageMapping()},t=[{key:"enableApi",value:function(){yt.info("Enabling api calls"),this._onApiMessageBinded=this._onApiMessage.bind(this),this._utils.addEventListener(window,"message",this._onApiMessageBinded,!0)}},{key:"disableApi",value:function(){yt.info("Disabling api calls"),this._utils.removeEventListener(window,"message",this._onApiMessageBinded,!0)}},{key:"getCustomerSessionID",value:function(e){this._cdApiFacade.getCustomerSessionID(function(t){e(t)})}},{key:"getLogServerAddress",value:function(e){this._cdApiFacade.getLogServerAddress(function(t){e(t)})}},{key:"getServerAddress",value:function(e){this._cdApiFacade.getServerAddress(function(t){e(t)})}},{key:"getConfigurations",value:function(e){this._cdApiFacade.getConfigurations(function(t){e(t)})}},{key:"notifySessionReset",value:function(e){this._pauseResumeMgr.isCustomerApiEnabled()&&window.postMessage({type:"SNumNotification",cdSNum:e},window.location.href)}},{key:"isApiAvailable",value:function(e){return this._cdApiFacade.isApiAvailable(e)}},{key:"_onApiMessage",value:function(e){var t=e.data,n=t.type;if(void 0===n)try{n=(t=JSON.parse(t)).type}catch(e){}(n===Ru||this._pauseResumeMgr.isCustomerApiEnabled()&&this._apiCommandToBusMessageMapping[n])&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),this._messageBus.publish(this._apiCommandToBusMessageMapping[n],t))}},{key:"_createCommandToBusMessageMapping",value:function(){this._apiCommandToBusMessageMapping={},this._apiCommandToBusMessageMapping[Ou]=Xr,this._apiCommandToBusMessageMapping[Cu]=Zr,this._apiCommandToBusMessageMapping[ju]=$r,this._apiCommandToBusMessageMapping[Ru]=eo,this._apiCommandToBusMessageMapping[Mu]=to,this._apiCommandToBusMessageMapping[Bu]=no,this._apiCommandToBusMessageMapping[Au]=ro}}],t&&Du(e.prototype,t),n&&Du(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Fu(e){return Fu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fu(e)}function Nu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Uu(r.key),r)}}function Uu(e){var t=function(e,t){if("object"!=Fu(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Fu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fu(t)?t:t+""}var Wu=function(){return e=function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.muid=null,this._utils=t,this._storageUtilsWrapper=r,this._dataQ=n,this._configurationRepository=o,this.EXPIRATION=t.minutesToMilliseconds(525600)},(t=[{key:"initMuid",value:function(){var e=this._storageUtilsWrapper.getCookie("bmuid"),t=this._storageUtilsWrapper.getFromLocalStorage("bmuid");this.muid=e||t,this.muid=this._utils.StorageUtils.validateBcId(this.muid),this.muid||(this.muid=this._utils.dateNow()+"-"+this._utils.generateUUID().toUpperCase(),yt.info("Generated a new muid: ".concat(this.muid))),this._saveAndSendMuid(),yt.info("Muid is: ".concat(this.muid))}},{key:"updateMuid",value:function(e){e?(this.muid=e,this.muid=this._utils.StorageUtils.validateBcId(this.muid),this.muid?(this._saveAndSendMuid(),yt.info("Restored MUID is: ".concat(this.muid))):yt.warn("Invalid format of restored MUID")):yt.warn("MUID is not defined")}},{key:"_saveAndSendMuid",value:function(){this._setStorageAndCookieKey(),this._addMuidToQueue()}},{key:"_setStorageAndCookieKey",value:function(){this._storageUtilsWrapper.setCookie("bmuid",this.muid,this.EXPIRATION),this._storageUtilsWrapper.saveToLocalStorage("bmuid",this.muid)}},{key:"_addMuidToQueue",value:function(){this._dataQ.addToQueue("static_fields",["muid",this.muid],!1)}}])&&Nu(e.prototype,t),n&&Nu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Gu(e){return Gu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gu(e)}function Hu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qu(r.key),r)}}function Qu(e){var t=function(e,t){if("object"!=Gu(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Gu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Gu(t)?t:t+""}var zu=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._psid=null},(t=[{key:"get",value:function(){return this._psid}},{key:"set",value:function(e){if(void 0===e)throw new Error("Invalid psid value of undefined");this._psid=e}}])&&Hu(e.prototype,t),n&&Hu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Vu(e){return Vu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vu(e)}function Ku(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qu(r.key),r)}}function qu(e){var t=function(e,t){if("object"!=Vu(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Vu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Vu(t)?t:t+""}var Ju=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._psidCache=t,this._workerCommunicator=n},(t=[{key:"set",value:function(e){if(void 0===e)throw new Error("Invalid psid value of undefined");this._psidCache.set(e),this._workerCommunicator.sendAsync(sn,{psid:e})}}])&&Ku(e.prototype,t),n&&Ku(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Yu(e){return Yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yu(e)}function Xu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zu(r.key),r)}}function Zu(e){var t=function(e,t){if("object"!=Yu(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Yu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yu(t)?t:t+""}var $u=function(){return e=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sidKey="cdSNum",this._utils=t,this._storageUtilsWrapper=n,this.COOKIE_EXPIRATION_IN_MILLISECONDS=this.getExpirationTime(r)},(t=[{key:"onConfigUpdate",value:function(e){var t=this.getExpirationTime(e);this._setExpirationTime(t)&&(this.COOKIE_EXPIRATION_IN_MILLISECONDS=t)}},{key:"getExpirationTime",value:function(e){var t=e.get(ee);return this._utils.minutesToMilliseconds(this._validateCDSNumExpirationTime(t))}},{key:"_validateCDSNumExpirationTime",value:function(e){return e<Ht||e>Qt?Gt:e}},{key:"_setExpirationTime",value:function(e){return this._storageUtilsWrapper.setExpirationInCookie(this.sidKey,e)===Kt?(yt.warn("Failed set expiration time ".concat(e," in cookie.")),!1):this._storageUtilsWrapper.setExpirationInLocalStorage(this.sidKey,e)!==Kt||(yt.warn("Failed set expiration time ".concat(e," in local storage.")),this._storageUtilsWrapper.setExpirationInCookie(this.sidKey,this._utils.minutesToMilliseconds(Gt)),!1)}},{key:"get",value:function(){var e=this._storageUtilsWrapper.getCookie(this.sidKey),t=this._validateSid(e);if(!t){yt.info("Sid was not found in cookie. Trying to get it from the local storage.");var n=this._storageUtilsWrapper.getFromLocalStorage(this.sidKey);if(!(t=this._validateSid(n)))return yt.info("Sid was not found in local storage."),null}return t}},{key:"set",value:function(e){var t=e;(t=this._validateSid(t))?(this._storageUtilsWrapper.saveToLocalStorage(this.sidKey,t,this.COOKIE_EXPIRATION_IN_MILLISECONDS)||yt.error("Failed saving sid ".concat(e," to local storage.")),this._storageUtilsWrapper.setCookie(this.sidKey,t,this.COOKIE_EXPIRATION_IN_MILLISECONDS)||yt.error("Failed saving sid ".concat(e," to cookie."))):yt.error("Sid ".concat(e," is invalid. Will not save it."))}},{key:"_validateSid",value:function(e){return e||null}}])&&Xu(e.prototype,t),n&&Xu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function es(e){return es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},es(e)}function ts(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ns(r.key),r)}}function ns(e){var t=function(e,t){if("object"!=es(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=es(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==es(t)?t:t+""}var rs=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._csid=null},(t=[{key:"get",value:function(){return this._csid}},{key:"set",value:function(e){if(void 0===e)throw new Error("Invalid csid value of undefined");this._csid=e}}])&&ts(e.prototype,t),n&&ts(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function os(e){return os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},os(e)}function is(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,as(r.key),r)}}function as(e){var t=function(e,t){if("object"!=os(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=os(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==os(t)?t:t+""}var us=function(){return e=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._customerApi=t,this._csidCache=n,this._workerCommunicator=r},(t=[{key:"set",value:function(e){if(void 0===e)throw new Error("Invalid csid value of undefined");this._csidCache.set(e),this._workerCommunicator.sendAsync(un,{csid:e})}},{key:"get",value:function(e){this._customerApi.isApiAvailable("getCustomerSessionID")?this._getCsidWithRetries(0,e):yt.debug("getCustomerSessionID API is unavailable. Hopefully this is because the setCustomerSessionId API is being used")}},{key:"_getCsidWithRetries",value:function(e,t){var n=this;if(e>20&&this._customerApi.getCustomerSessionID)yt.error("Failed to get csid after all retries.");else try{this._customerApi.getCustomerSessionID(function(r){r?(yt.debug("Got csid after ".concat(e," retries. csid: ").concat(r)),n._csidCache.set(r),t()):setTimeout(n._getCsidWithRetries.bind(n,e+1,t),200)})}catch(n){setTimeout(this._getCsidWithRetries.bind(this,e+1,t),200)}}}])&&is(e.prototype,t),n&&is(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),ss={none:"none",init:"init",configuration:"config",configurationFromSlave:"configFromSlave",customerApi:"customerApi",pageTimeout:"timeout",unknown:"unknown"};function cs(e){return cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cs(e)}function ls(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fs(r.key),r)}}function fs(e){var t=function(e,t){if("object"!=cs(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=cs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cs(t)?t:t+""}var ps=function(){return e=function e(t,n,r,o,i,a,u,s,c,l,f,p,h,y,d,m,v,b,g,_){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._messageBus=t,this._configurationService=n,this._configurationRepository=r,this._utils=o,this._domUtils=i,this._workerComm=a,this._contextMgr=u,this._muidService=s,this._serverStateMgr=c,this._resetSessionSiteMapper=l,this._sidRepository=f,this._csidService=m,this._csidCache=v,this._serverAddress=p.get(),this._cidCache=h,this._protocolType=y.get(),this._minifiedWupUriEnabled=d,this._psidCache=b,this._brandService=g,this._agentIdService=_,this._agentType=r.get(ce),this._enableStartupCustomerSessionId=this._configurationRepository.get(pe),this.lastExternalResetCallTime=null,this.sessionId=null,this._resetSessionSiteMapper.updateObserver(this._onSiteMapperMatch.bind(this)),a.addMessageListener(Or,this._onNewSessionStartedEvent.bind(this)),this._setSessionStartupData()},t=[{key:"resumeOrStartSession",value:function(){var e=this._getSessionId();e?this._resumeSession(e):this._startNewSession()}},{key:"onConfigUpdate",value:function(e){this._resetSessionSiteMapper.onConfigUpdate(e),this._configurationRepository.get("logAddress")&&this._configurationService.updateLogUrlToWorker(this.sessionId,this._csidCache.get(),this._workerComm)}},{key:"resetSession",value:function(e){this.onResetSession(e)}},{key:"onResetSession",value:function(e){var t=e.resetReason?e.resetReason:ss.unknown;ss.hasOwnProperty(t)||(t=ss.customerApi),yt.info("Received a Reset Session event, reason: ".concat(t)),this._utils.dateNow()-this.lastExternalResetCallTime>this._configurationRepository.get(w)?(this._startNewSession(null==e?void 0:e.csid),this._configurationService.updateLogUrlToWorker(this.sessionId,this._csidCache.get(),this._workerComm),this.lastExternalResetCallTime=this._utils.dateNow()):yt.info("Ignoring external reset session call since resetSessionApiThreshold hasn't passed")}},{key:"startNewSession",value:function(){this._startNewSession()}},{key:"_startNewSession",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;yt.info("Starting a new session. Previous session was ".concat(this.sessionId)),this.sessionId=null,this._enableStartupCustomerSessionId?this._setOrFetchCsid(e):this._csidCache.set(e||null),this._psidCache.set(null),this._serverStateMgr.onSessionIdChange(),this._onStartedNewSession()}},{key:"_setOrFetchCsid",value:function(e){e?this._csidCache.set(e):this._csidService.get()}},{key:"_resumeSession",value:function(e){yt.info("Resuming an existing session with sid ".concat(e)),this.sessionId=e,this._saveSidToStorage(this.sessionId),this._handleBrandResume(),this._onResumedSession(),this._handleCsid()}},{key:"_getSessionId",value:function(){yt.info("Attempting to get sid from storage");var e=this._sidRepository.get();return e&&yt.info("Read sid ".concat(e," from storage")),e}},{key:"_saveSidToStorage",value:function(e){yt.info("Saving sid ".concat(e," to storage")),this._sidRepository.set(e)}},{key:"_onStartedNewSession",value:function(){var e;if(this._serverAddress){var t={serverAddress:this._serverAddress,csid:this._csidCache.get(),cid:this._cidCache.get(),protocolType:this._protocolType,minifiedUri:this._minifiedWupUriEnabled,psid:this._psidCache.get(),muid:null===(e=this._muidService)||void 0===e?void 0:e.muid,contextName:this._contextMgr.getContextName()};this._workerComm.sendAsync(rn,t),this._configurationService.updateLogUrlToWorker(this.sessionId,this._csidCache.get(),this._workerComm)}}},{key:"_onResumedSession",value:function(){var e;if(this._serverAddress){var t=this._serverStateMgr.getServerState(this.sessionId),n={serverAddress:this._serverAddress,csid:this._csidCache.get(),cid:this._cidCache.get(),protocolType:this._protocolType,minifiedUri:this._minifiedWupUriEnabled,psid:this._psidCache.get(),cdsnum:this.sessionId,muid:null===(e=this._muidService)||void 0===e?void 0:e.muid,contextName:this._contextMgr.getContextName(),serverState:t};this._workerComm.sendAsync(on,n),this._configurationService.updateLogUrlToWorker(this.sessionId,this._csidCache.get(),this._workerComm)}}},{key:"_handleCsid",value:function(){var e=this;this._domUtils.onDocumentBody(self,function(){yt.debug("SessionService:_sessionIdRegeneration, onDocumentBody callback: cdSNum: ".concat(e.sessionId)),e._csidService.get(function(){yt.info("Received csid from client. csid: ".concat(e._csidCache.get(),", sid:").concat(null==e?void 0:e.sessionId)),e._sendCsidToServer()})})}},{key:"_sendCsidToServer",value:function(){this._serverAddress&&(yt.info("Sending csid to worker. csid: ".concat(this._csidCache.get(),", sid:").concat(this.sessionId)),this._workerComm.sendAsync(un,{csid:this._csidCache.get()}),this._configurationService.updateLogUrlToWorker(this.sessionId,this._csidCache.get(),this._workerComm))}},{key:"_handleBrandResume",value:function(){this._brandService.update()}},{key:"_onSiteMapperMatch",value:function(){this.onResetSession({resetReason:ss.configuration})}},{key:"_onNewSessionStartedEvent",value:function(e){this.sessionId=e,this._saveSidToStorage(this.sessionId),this._configurationService.updateLogUrlToWorker(this.sessionId,this._csidCache.get(),this._workerComm),this._notifyNewSessionStarted(),this._agentType!==rt.SECONDARY&&this._handleCsid(),yt.info("A new session ".concat(e," has started"))}},{key:"_notifyNewSessionStarted",value:function(){this._messageBus.publish(Yr,this.sessionId)}},{key:"_setSessionStartupData",value:function(){this._workerComm.sendAsync(yn,{agentType:this._configurationRepository.get(ce)}),this._agentIdService.updateAgentIdWithServer()}}],t&&ls(e.prototype,t),n&&ls(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function hs(e){return hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hs(e)}function ys(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ds(r.key),r)}}function ds(e){var t=function(e,t){if("object"!=hs(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=hs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hs(t)?t:t+""}var ms=function(){return e=function e(t,n){var r,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,i=void 0,(o=ds(o="_dataQ"))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i,this._configurationRepository=t,this._dataQ=n,this._isEnabled=this._configurationRepository.get("isCustMetadata")},(t=[{key:"onCustomerMetadata",value:function(e){void 0!==this._isEnabled&&null!=this._isEnabled&&!0!==this._isEnabled||(yt.debug("HandleMetadata:onCustomerMetadata. data="+JSON.stringify(e.data)),e.data&&this._dataQ.addToQueue("customer_metadata",[null,e.data]))}},{key:"onConfigUpdate",value:function(){this._isEnabled=this._configurationRepository.get("isCustMetadata")}}])&&ys(e.prototype,t),n&&ys(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),vs="setupPort",bs="updateSlaveConf",gs="updateSlaveState";function _s(e){return _s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_s(e)}function ws(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ss(r.key),r)}}function Ss(e){var t=function(e,t){if("object"!=_s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_s(t)?t:t+""}var Es=function(){return e=function e(t,n,r,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._slaves=[],this._dataQ=t,this._configurationRepository=n,this._utils=r,this._logPerfDataQ=o,this._contextMgr=i,this._sessionService=a,this.onResetSessionTrigger=new cr,this.onMouseChallengeTrigger=new cr,this._msgRouter={dataFromSlave:this._onDataFromSlave,registerSlave:this._onRegisterSlave,logPerfSlave:this._onLogPerfSlave,updateMasterContext:this._onUpdateMasterContext,resetSessionTriggerFromSlave:this._onResetSessionTriggerFromSlave,mouseChallengeTriggerFromSlave:this._onMouseChallengeTriggerFromSlave,updateSlaveConf:this.onConfigUpdate}},t=[{key:"listen",value:function(){var e=this;yt.debug("SlaveListener:listen"),this._utils.addEventListener(window,"message",function(t){var n=t.data.msgType;n&&e._msgRouter[n]&&e._msgRouter[n].call(e,t)})}},{key:"sendToSlaves",value:function(e,t){yt.debug("SlaveListener:sendToSlaves"),this._slaves.forEach(function(n){n.port?n.port.postMessage({msgType:e,data:t}):n.source.postMessage({msgType:e,data:t},n.origin)})}},{key:"onConfigUpdate",value:function(){yt.debug("SlaveListener:onConfigUpdate, updating ".concat(this._slaves.length," slaves")),this.sendToSlaves(bs,this._configurationRepository.getAll())}},{key:"notifyStateChange",value:function(e){yt.info("SlaveListener:notifyStateChange, updating ".concat(this._slaves.length," slaves that the new state is ").concat(e.toState)),this.sendToSlaves(gs,e)}},{key:"_onDataFromSlave",value:function(e){var t=e.data;"flushData"!==t.data.eventName&&(this._isScriptVersionMessage(t)?t.data.eventName&&this._dataQ.addToQueue(t.data.eventName,t.data.data,!1):t.data.eventName&&this._dataQ.addToQueue(t.data.eventName,t.data.data))}},{key:"_isScriptVersionMessage",value:function(e){return"static_fields"===e.data.eventName&&"dataFromSlave"===e.msgType&&e.data&&e.data.data&&("slave_version_client"===e.data.data[0]||"device_source"===e.data.data[0])}},{key:"_onRegisterSlave",value:function(e){var t=this;if(e.data.useMessageChannelForSlaveComm){var n=new MessageChannel;this._slaves.push({source:e.source,origin:e.origin,port:n.port1}),e.source.postMessage({msgType:vs,isNative:!0},e.origin,[n.port2]),n.port1.onmessage=function(e){var n=e.data.msgType;n&&t._msgRouter[n]&&t._msgRouter[n].call(t,e)}}else this._slaves.push({source:e.source,origin:e.origin}),e.source.postMessage({msgType:"updateSlaveConf",isNative:!0,data:this._configurationRepository.getAll()},e.origin)}},{key:"_onLogPerfSlave",value:function(e){var t=e.data;"flushData"!==t.data.eventName&&t.data.eventName&&this._logPerfDataQ.addToQueue(t.data.eventName,t.data.data)}},{key:"_onUpdateMasterContext",value:function(e){yt.debug("SlaveListener:_onUpdateMasterContext");var t=e.data;this._contextMgr.setContext(t.data)}},{key:"_onResetSessionTriggerFromSlave",value:function(e){yt.debug("SlaveListener:_onResetSessionTriggerFromSlave");var t=e.data;this.onResetSessionTrigger.publish(t.data)}},{key:"_onMouseChallengeTriggerFromSlave",value:function(e){yt.debug("SlaveListener:_onMouseChallengeTriggerFromSlave");var t=e.data;this.onMouseChallengeTrigger.publish(t.data)}}],t&&ws(e.prototype,t),n&&ws(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function ks(e){return ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ks(e)}function Ts(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ps(r.key),r)}}function Ps(e){var t=function(e,t){if("object"!=ks(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ks(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ks(t)?t:t+""}var Os=function(){return e=function e(t,n,r,o,i,a,u,s,c,l,f,p,h,y,d,m,v,b,g){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._features=t,this._configurationRepository=n,this._utils=r,this._elements=o,this._mutationObserver=i,this._dataQ=a,this._devDebugDataQueue=u,this._sessionService=c,this._muidService=l,this._muidEncryptedService=f,this._perfMonitor=p,this._sensorDataQ=h,this._msgBus=y,this._cidCache=d,this._sameCharService=m,this._maskingService=v,this._configurations=s,this._contextMgr=b,this._fontTimingService=g},t=[{key:"buildFeatures",value:function(){var e,t=this;(e=this._features.list)&&Object.keys(e).forEach(function(n){var r=e[n];try{r.init.apply(t)}catch(t){var o=r.name||n;yt.error('Failed to initialize feature "'.concat(o,'": ').concat(t.message,"\nStack: ").concat(t.stack)),delete e[n]}})}}],t&&Ts(e.prototype,t),n&&Ts(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Cs(e){return Cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cs(e)}function js(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Rs(r.key),r)}}function Rs(e){var t=function(e,t){if("object"!=Cs(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Cs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Cs(t)?t:t+""}var Ms=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._contextMgr=t,this._dataQ=n,this._contextMgr.onContextChange.subscribe(this.sendContextToServer.bind(this)),this.handleContextChange({context:"cd_auto"})},(t=[{key:"handleContextChange",value:function(e){this._contextMgr.changeContext(e.context||e.activityType)}},{key:"sendContextToServer",value:function(e){e&&this._dataQ.addToQueue("contextChange",[null,e.url,e.name,e.timestamp,e.referrer,e.hLength])}}])&&js(e.prototype,t),n&&js(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Bs(e){return Bs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bs(e)}function As(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xs(r.key),r)}}function xs(e){var t=function(e,t){if("object"!=Bs(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Bs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Bs(t)?t:t+""}Ms.apiName="ContextChange";var Ds=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._messageBus=t,this._state=bn.stopped},(t=[{key:"getState",value:function(){return this._state}},{key:"updateState",value:function(e){var t=bn[e];if(!t)throw new Error("Unknown state ".concat(e));this._state=t,this._messageBus.publish(io,{state:t})}}])&&As(e.prototype,t),n&&As(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),Is="cdNewSessionStartedEvent",Ls="cdStateChangedEvent",Fs="cdHeartbeat",Ns="RestoredMuidEvent";function Us(e){return Us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Us(e)}function Ws(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gs(r.key),r)}}function Gs(e){var t=function(e,t){if("object"!=Us(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Us(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Us(t)?t:t+""}var Hs=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"publishNewSessionStartedEvent",value:function(e){window.postMessage({type:Is,event:{sessionID:e}},window.location.href)}},{key:"publishStateChangedEvent",value:function(e){window.postMessage({type:Ls,event:{state:e}},window.location.href)}},{key:"publishRestoredMuidEvent",value:function(e){window.postMessage({type:Ns,event:{muid:e}},window.location.href)}}])&&Ws(e.prototype,t),n&&Ws(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Qs(e){return Qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qs(e)}function zs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Vs(r.key),r)}}function Vs(e){var t=function(e,t){if("object"!=Qs(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Qs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Qs(t)?t:t+""}var Ks=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._messageBus=t,this._contextMgr=n,this._messageBus.subscribe(Xr,this._handle.bind(this))},(t=[{key:"_handle",value:function(e){this._contextMgr.changeContext(e.context||e.activityType)}}])&&zs(e.prototype,t),n&&zs(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function qs(e){return qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qs(e)}function Js(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ys(r.key),r)}}function Ys(e){var t=function(e,t){if("object"!=qs(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qs(t)?t:t+""}var Xs=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._messageBus=t,this._sessionService=n,this._messageBus.subscribe(Zr,this._handle.bind(this))},(t=[{key:"_handle",value:function(e){this._sessionService.onResetSession(e)}}])&&Js(e.prototype,t),n&&Js(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Zs(e){return Zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zs(e)}function $s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ec(r.key),r)}}function ec(e){var t=function(e,t){if("object"!=Zs(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Zs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zs(t)?t:t+""}var tc=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._messageBus=t,this._handleMetadata=n,this._messageBus.subscribe($r,this._handle.bind(this))},(t=[{key:"_handle",value:function(e){this._handleMetadata.onCustomerMetadata(e)}}])&&$s(e.prototype,t),n&&$s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function nc(e){return nc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nc(e)}function rc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oc(r.key),r)}}function oc(e){var t=function(e,t){if("object"!=nc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nc(t)?t:t+""}var ic=function(){return e=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._messageBus=t,this._pauseResumeManager=n,this._slaveListener=r,this._messageBus.subscribe(eo,this._handle.bind(this))},(t=[{key:"_handle",value:function(e){this._pauseResumeManager.onStateChange(e),this._slaveListener.notifyStateChange(e)}}])&&rc(e.prototype,t),n&&rc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function ac(e){return ac="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ac(e)}function uc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sc(r.key),r)}}function sc(e){var t=function(e,t){if("object"!=ac(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ac(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ac(t)?t:t+""}var cc=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._messageBus=t,this._csidService=n,this._messageBus.subscribe(to,this._handle.bind(this))},(t=[{key:"_handle",value:function(e){e.csid?this._csidService.set(e.csid):yt.warn("Received an invalid csid of ".concat(e.csid,". Ignoring api call"))}}])&&uc(e.prototype,t),n&&uc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function lc(e){return lc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lc(e)}function fc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pc(r.key),r)}}function pc(e){var t=function(e,t){if("object"!=lc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=lc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lc(t)?t:t+""}var hc=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._messageBus=t,this._psidService=n,this._messageBus.subscribe(no,this._handle.bind(this))},(t=[{key:"_handle",value:function(e){e.psid?this._psidService.set(e.psid):yt.warn("Received an invalid psid of ".concat(e.psid,". Ignoring api call"))}}])&&fc(e.prototype,t),n&&fc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function yc(e){return yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yc(e)}function dc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mc(r.key),r)}}function mc(e){var t=function(e,t){if("object"!=yc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=yc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yc(t)?t:t+""}var vc=function(){return e=function e(t,n,r,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._messageBus=t,this._featureService=n,this._customerApiBridge=r,this._contextMgr=o,this._clientEventService=i,this._sessionInfoService=a,this._messageBus.subscribe(Yr,this._handle.bind(this))},(t=[{key:"_handle",value:function(e){this._sessionInfoService.markStartTime(),this._featureService.runPerSessionFeatures(),this._customerApiBridge.notifySessionReset(e),this._contextMgr.onSessionReset(),this._clientEventService.publishNewSessionStartedEvent(e)}}])&&dc(e.prototype,t),n&&dc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function bc(e){return bc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bc(e)}function gc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_c(r.key),r)}}function _c(e){var t=function(e,t){if("object"!=bc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=bc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bc(t)?t:t+""}var wc=function(){return e=function e(t,n,r,o,i,a,u,s,c,l,f,p,h,y,d,m){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._messageBus=t,this._featureService=n,this._dataQ=r,this._pauseResumeMgr=o,this._handleMetadata=i,this._logger=a,this._contextMgr=u,this._sessionService=s,this._sensorDataQ=c,this._slaveListener=l,this._stateService=f,this._performanceMonitor=p,this._heartBeatMessageService=h,this._sensorGateKeeper=y,this._sidRepository=d,this._coordinatesMaskingConfigurationUpdater=m,this._messageBus.subscribe(Jr,this._handle.bind(this))},(t=[{key:"_handle",value:function(e){yt.info("Configurations were loaded from the server."),this._performanceMonitor.stopMonitor("t.timeTillServerConfig"),this._featureService.updateRunByConfig(e),this._dataQ.updateWithConfig(e),this._pauseResumeMgr.onConfigUpdate(e),this._handleMetadata.onConfigUpdate(e),this._logger.updateLogConfig(e),this._contextMgr.onConfigUpdate(e),this._sessionService.onConfigUpdate(e),this._sensorDataQ.onConfigUpdate(e),this._slaveListener.onConfigUpdate(e),this._heartBeatMessageService.updateConfig(e),this._sensorGateKeeper.configure(),this._sidRepository.onConfigUpdate(e),this._coordinatesMaskingConfigurationUpdater.onConfigUpdate(e),this._stateService.updateState(bn.started),yt.info("Successfully configured system")}}])&&gc(e.prototype,t),n&&gc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Sc(e){return Sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sc(e)}function Ec(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kc(r.key),r)}}function kc(e){var t=function(e,t){if("object"!=Sc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Sc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Sc(t)?t:t+""}var Tc=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._messageBus=t,this._clientEventService=n,this._messageBus.subscribe(io,this._handle.bind(this))},(t=[{key:"_handle",value:function(e){yt.info("SDK state changed to ".concat(e.state)),this._clientEventService.publishStateChangedEvent(e.state)}}])&&Ec(e.prototype,t),n&&Ec(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Pc(e){return Pc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pc(e)}function Oc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Cc(r.key),r)}}function Cc(e){var t=function(e,t){if("object"!=Pc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Pc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pc(t)?t:t+""}var jc=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._messageBus=t,this._brandService=n,this._messageBus.subscribe(ro,this._handle.bind(this))},(t=[{key:"_handle",value:function(e){e.brand?this._brandService.set(e.brand):yt.warn("Received an empty brand name. Ignoring the API call")}}])&&Oc(e.prototype,t),n&&Oc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Rc(e){return Rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rc(e)}function Mc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bc(r.key),r)}}function Bc(e){var t=function(e,t){if("object"!=Rc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Rc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Rc(t)?t:t+""}var Ac,xc,Dc,Ic=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"addEventListener",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.isPassiveSupported?e.addEventListener(t,n,{capture:r,passive:o,once:i}):e.addEventListener?e.addEventListener(t,n,r):e.attachEvent("on"+t,n)}},{key:"removeEventListener",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent("on"+t,n)}},{key:"outerHTML",value:function(e){return e.outerHTML||(new XMLSerializer).serializeToString(e)}},{key:"onDocumentBody",value:function(e,t){e.document.body?t():window.addEventListener?window.addEventListener("DOMContentLoaded",t,!0):window.attachEvent("onload",t)}},{key:"onPageLoad",value:function(t,n){e.addEventListener(t,"load",n,!0),(t.contentWindow&&"complete"===t.contentWindow.document.readyState||t.document&&"complete"===t.document.readyState)&&n()}},{key:"awaitWindowDocumentReady",value:function(e){var t=this;return new Promise(function(n,r){try{t.onWindowDocumentReady(e,function(){n()})}catch(e){r(e)}})}},{key:"onWindowDocumentReady",value:function(t,n){var r=window.addEventListener?"DOMContentLoaded":"load";if("complete"===t.document.readyState||"interactive"===t.document.readyState)n();else{var o=function(){e.removeEventListener(t,r,o,!0),n()};e.addEventListener(t,r,o,!0)}}},{key:"isWindowDocumentReady",value:function(e){return e&&"complete"===e.document.readyState}},{key:"canAccessIFrame",value:function(e){var t=null;try{t=(e.contentDocument||e.contentWindow.document).body.innerHTML}catch(e){}return null!==t}},{key:"matches",value:function(e,t){var n=e.matches||e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(e){var t=this.document||this.ownerDocument;if(!t)return!1;for(var n=t.querySelectorAll(e),r=n.length;--r>=0&&(n.item?n.item(r):n[r])!==this;);return r>-1};return n.call(e,t)}},{key:"isWebWorkerFetchSupported",value:function(){var e="Request"in self,t="fetch"in self;if(!e)return!1;var n="keepalive"in Request.prototype;return t&&n}},{key:"isSubtleCryptoSupported",value:function(){return"SubtleCrypto"in self}}],(n=null)&&Mc(t.prototype,n),r&&Mc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function Lc(e){return Lc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lc(e)}function Fc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nc(r.key),r)}}function Nc(e){var t=function(e,t){if("object"!=Lc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Lc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lc(t)?t:t+""}Ac=Ic,xc="isPassiveSupported",Dc=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}(),(xc=Bc(xc))in Ac?Object.defineProperty(Ac,xc,{value:Dc,enumerable:!0,configurable:!0,writable:!0}):Ac[xc]=Dc;var Uc=function(){return function(e,t,n){return t&&Fc(e.prototype,t),n&&Fc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){(t=Nc(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"_dataOrigin","BC"),this._heartBeatErrorsState=n,this._heartBeatPostMessageInterval=r,t.addMessageListener(Rr,this._handle.bind(this))},[{key:"start",value:function(){this._clear(),this._periodicPostMessageIntervalId=setInterval(this._postHeartBeatMessage.bind(this),this._heartBeatPostMessageInterval)}},{key:"stop",value:function(){this._clear()}},{key:"updateConfig",value:function(e){this._heartBeatPostMessageInterval=e.get(F),this.start()}},{key:"_clear",value:function(){this._periodicPostMessageIntervalId&&clearInterval(this._periodicPostMessageIntervalId)}},{key:"_handle",value:function(e){this._heartBeatErrorsState.updateState(e)}},{key:"_postHeartBeatMessage",value:function(){this._heartBeatErrorsState.hasErrors()?window.postMessage({type:Fs,data:this._heartBeatErrorsState.getErrors(),origin:this._dataOrigin},window.location.href):window.postMessage({type:Fs,data:"Ok",origin:this._dataOrigin},window.location.href)}}])}();var Wc="oK",Gc="Error";function Hc(e){return Hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hc(e)}function Qc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zc(r.key),r)}}function zc(e){var t=function(e,t){if("object"!=Hc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Hc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Hc(t)?t:t+""}var Vc=function(){return function(e,t,n){return t&&Qc(e.prototype,t),n&&Qc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errors={}},[{key:"updateState",value:function(e){var t=e.category,n=e.status;this._isErrorRecovery(t,n)?(yt.info("Received heart beat recovery event",e),delete this.errors[t]):this._isNewError(t,n)&&(yt.info("Received heart beat error event",e),this.errors[t]=t)}},{key:"_isErrorRecovery",value:function(e,t){return void 0!==this.errors[e]&&t===Wc}},{key:"_isNewError",value:function(e,t){return void 0===this.errors[e]&&t===Gc}},{key:"getErrors",value:function(){var e=this;return Object.keys(this.errors).map(function(t){return"ERROR(".concat(e.errors[t],")")})}},{key:"hasErrors",value:function(){return Object.keys(this.errors).length>0}}])}();function Kc(e){return Kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kc(e)}function qc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Jc(r.key),r)}}function Jc(e){var t=function(e,t){if("object"!=Kc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Kc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Kc(t)?t:t+""}var Yc=function(){return function(e,t,n){return t&&qc(e.prototype,t),n&&qc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.markStartTime()},[{key:"markStartTime",value:function(){this.startTime=nn.dateNow()}},{key:"getStartTime",value:function(){return this.startTime}}])}();function Xc(e){return Xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xc(e)}function Zc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$c(r.key),r)}}function $c(e){var t=function(e,t){if("object"!=Xc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Xc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xc(t)?t:t+""}var el=function(){return function(e,t,n){return t&&Zc(e.prototype,t),n&&Zc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.configurationRepository=n,this.sessionInfoService=t,this.isMotionOnSessionStart=this.configurationRepository.get(W),this.motionPaddingOnSessionStartMSec=this.configurationRepository.get(G)},[{key:"configure",value:function(){this.isMotionOnSessionStart=this.configurationRepository.get(W),this.motionPaddingOnSessionStartMSec=this.configurationRepository.get(G),this.isMotionOnSessionStart&&yt.info("Motion on session start is enabled, collecting motion events for ".concat(this.motionPaddingOnSessionStartMSec/1e3," seconds."))}},{key:"isOpen",value:function(){return this.isMotionOnSessionStart&&nn.dateNow()-this.motionPaddingOnSessionStartMSec<this.sessionInfoService.getStartTime()}}])}();function tl(e){return tl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tl(e)}function nl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rl(r.key),r)}}function rl(e){var t=function(e,t){if("object"!=tl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tl(t)?t:t+""}function ol(e,t,n){return t=al(t),function(e,t){if(t&&("object"==tl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,il()?Reflect.construct(t,n||[],al(e).constructor):t.apply(e,n))}function il(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(il=function(){return!!e})()}function al(e){return al=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},al(e)}function ul(e,t){return ul=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ul(e,t)}var sl=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ol(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ul(e,t)}(t,e),function(e,t,n){return t&&nl(e.prototype,t),n&&nl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"getDocument",value:function(){return this.context.shadowRoot}}])}(ba);function cl(e){return cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cl(e)}function ll(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fl(r.key),r)}}function fl(e){var t=function(e,t){if("object"!=cl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=cl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cl(t)?t:t+""}function pl(e,t,n){return t=yl(t),function(e,t){if(t&&("object"==cl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,hl()?Reflect.construct(t,n||[],yl(e).constructor):t.apply(e,n))}function hl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(hl=function(){return!!e})()}function yl(e){return yl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yl(e)}function dl(e,t){return dl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dl(e,t)}var ml=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),pl(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dl(e,t)}(t,e),function(e,t,n){return t&&ll(e.prototype,t),n&&ll(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"getDocument",value:function(){return this.context}}])}(ba);function vl(e){return vl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vl(e)}function bl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gl(r.key),r)}}function gl(e){var t=function(e,t){if("object"!=vl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=vl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vl(t)?t:t+""}var _l=function(){return function(e,t,n){return t&&bl(e.prototype,t),n&&bl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._windowMutationObservers=t,this._messageBus=n,this._configurationRepository=r,this._messageBus.subscribe(xo,this._processNewContext.bind(this)),this._elementsMutationObserverFactory=new pu},[{key:"_processNewContext",value:function(e){this.monitorWindow(e)}},{key:"monitorWindow",value:function(e){if(!this._windowMutationObservers.has(e)){var t=this._elementsMutationObserverFactory.create(e,self.MutationObserver,this._configurationRepository);t.observe(e.getDocument()),t.nodesAdded.subscribe(this._nodesAddedMutationObserved.bind(this)),t.nodesRemoved.subscribe(this._nodesRemovedMutationObserved.bind(this)),this._windowMutationObservers.set(e,t)}}},{key:"unMonitorWindow",value:function(e){var t=this._windowMutationObservers.get(e);t&&(t.nodesAdded.unsubscribe(this._nodesAddedMutationObserved.bind(this)),t.nodesRemoved.unsubscribe(this._nodesRemovedMutationObserved.bind(this)),t.disconnect()),this._windowMutationObservers.delete(e)}},{key:"_nodesAddedMutationObserved",value:function(e){this._messageBus.publish(uo,e)}},{key:"_nodesRemovedMutationObserved",value:function(e){this._messageBus.publish(so,e)}}])}();function wl(e){return wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wl(e)}function Sl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kl(r.key),r)}}function El(e,t,n){return t&&Sl(e.prototype,t),n&&Sl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function kl(e){var t=function(e,t){if("object"!=wl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=wl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wl(t)?t:t+""}var Tl="added",Pl="removed",Ol=El(function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.browserContext=t,this.message=n});function Cl(e){return Cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cl(e)}function jl(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return Rl(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(Rl(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,Rl(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,Rl(f,"constructor",c),Rl(c,"constructor",s),s.displayName="GeneratorFunction",Rl(c,o,"GeneratorFunction"),Rl(f),Rl(f,o,"Generator"),Rl(f,r,function(){return this}),Rl(f,"toString",function(){return"[object Generator]"}),(jl=function(){return{w:i,m:p}})()}function Rl(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Rl=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){Rl(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},Rl(e,t,n,r)}function Ml(e){return function(e){if(Array.isArray(e))return Bl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Bl(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bl(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Al(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function xl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Dl(r.key),r)}}function Dl(e){var t=function(e,t){if("object"!=Cl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Cl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Cl(t)?t:t+""}var Il=function(){return function(e,t,n){return t&&xl(e.prototype,t),n&&xl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._domUtils=t,this._messageBus=n,this._loadedCustomElements=Fn(),this._windowMutationObservers=Fn(),this._messageBus.subscribe(uo,this._processAddedNodes.bind(this)),this._messageBus.subscribe(so,this._processRemovedNodes.bind(this)),this._messageBus.subscribe(Ao,this._processSubmittedCustomElement.bind(this)),this._browserContextMutationObserver=new _l(this._windowMutationObservers,this._messageBus,r),this.customElementCache=new WeakMap},[{key:"customElements",get:function(){var e=[];return this._loadedCustomElements.forEach(function(t,n){e.push(n)}),e}},{key:"hasCustomElement",value:function(e){return!!this._loadedCustomElements.has(e)}},{key:"addCustomElementToLoadedList",value:function(e,t){this._loadedCustomElements.set(e,t)}},{key:"start",value:function(e){var t=this;this._browserContextMutationObserver.monitorWindow(e),this._findCustomElementsInBrowserContext(e.getDocument()).then(function(e){e.forEach(function(e){t._processNewElement(e)})})}},{key:"stop",value:function(){this.customElementCache=new WeakMap,this._windowMutationObservers.forEach(function(e){e.disconnect()})}},{key:"_processSubmittedCustomElement",value:function(e){this._loadedCustomElements.has(e)||this._addCustomElement(e,new ml(e),"closed")}},{key:"_processNewElement",value:function(e){this._loadedCustomElements.has(e)||(null!=e.shadowRoot?this._addCustomElement(e,new sl(e)):this._messageBus.publish(Bo,e))}},{key:"_addCustomElement",value:function(e,t){"open"===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"open")&&this._browserContextMutationObserver.monitorWindow(t),this._loadedCustomElements.set(e,t),this._messageBus.publish(Mo,new Ol(t,Tl))}},{key:"_removeCustomElement",value:function(e){var t=this._loadedCustomElements.get(e);this._browserContextMutationObserver.unMonitorWindow(e.shadowRoot),this._loadedCustomElements.delete(e)&&this._messageBus.publish(Mo,new Ol(t,Pl))}},{key:"_processAddedNodes",value:function(e){var t=this;e.addedNodes.forEach(function(e){if(e.nodeType===Node.ELEMENT_NODE){var n=e.shadowRoot?e.shadowRoot:e.ownerDocument;t._processNewElement(e),t._findCustomElementsInBrowserContext(n).then(function(e){e.forEach(function(e){t._processNewElement(e)})})}})}},{key:"_processRemovedNodes",value:function(e){for(var t=this,n=e.removedNodes,r=[],o=0;o<n.length;o++){var i=n[o];i.hasChildNodes()?this._findCustomElementsInBrowserContext(i).then(function(e){e.length>0&&(r=r.concat(e))}):this._isCustomElement(i)&&i.shadowRoot&&r.push(i)}0!==r.length&&r.forEach(function(e){t._removeCustomElement(e)})}},{key:"_isCustomElement",value:function(e){if(!e||"string"!=typeof e.localName)return!1;if(this.customElementCache.has(e))return this.customElementCache.get(e);var t=e.localName.includes("-");return this.customElementCache.set(e,t),t}},{key:"_findCustomElementsInBrowserContext",value:(e=jl().m(function e(t){var n,r,o,i=this;return jl().w(function(e){for(;;)switch(e.n){case 0:if(n=new Set,0!==(r=t.querySelectorAll("*")).length){e.n=1;break}return e.a(2,Ml(n));case 1:return o=[],r.forEach(function(e){if(i._isCustomElement(e))if(n.add(e),e.shadowRoot){var t=i._findCustomElementsInBrowserContext(e.shadowRoot).then(function(e){e.forEach(function(e){return n.add(e)})});o.push(t)}else i._messageBus.publish(Bo,e)}),e.n=2,Promise.all(o);case 2:return e.a(2,Ml(n))}},e)}),t=function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Al(i,r,o,a,u,"next",e)}function u(e){Al(i,r,o,a,u,"throw",e)}a(void 0)})},function(e){return t.apply(this,arguments)})}]);var e,t}();function Ll(e){return Ll="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ll(e)}function Fl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nl(r.key),r)}}function Nl(e){var t=function(e,t){if("object"!=Ll(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ll(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ll(t)?t:t+""}var Ul=function(){return function(e,t,n){return t&&Fl(e.prototype,t),n&&Fl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._browserContextsCache=t,this._messageBus=r,this._featureService=n,this._messageBus.subscribe(Mo,this._handle.bind(this))},[{key:"_handle",value:function(e){var t=e.browserContext,n=e.message;n===Tl?this._handleCustomElementAdded(t):n===Pl&&this._handleCustomElementRemoved(t)}},{key:"_handleCustomElementAdded",value:function(e){this._browserContextsCache.exists(e.Context)||this._browserContextsCache.addBrowserContext(e),this._featureService.runFeaturesOnBrowserContext(e)}},{key:"_handleCustomElementRemoved",value:function(e){this._featureService.stopFeaturesOnBrowserContextRemove(e),this._browserContextsCache.remove(e.Context)}}])}();function Wl(e){return Wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wl(e)}function Gl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Hl(r.key),r)}}function Hl(e){var t=function(e,t){if("object"!=Wl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Wl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Wl(t)?t:t+""}var Ql=function(){return function(e,t,n){return t&&Gl(e.prototype,t),n&&Gl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._configurationRepository=t,this._startUpConfigurations=n},[{key:"loadStartUpConfigurations",value:function(){var e,t;this._setConfigurationOrDefault(D,this._startUpConfigurations.getLogServerURL(),null),this._setConfigurationOrDefault(k,this._startUpConfigurations.isMinifiedLogUriEnabled(),!1),this._setConfigurationOrDefault(A,this._startUpConfigurations.getEnableFramesProcessing(),!0),this._setConfigurationOrDefault(J,this._startUpConfigurations.getEnableCustomElementsProcessing(),!1),this._setConfigurationOrDefault(B,this._startUpConfigurations.getCollectionSettings().getElementSettings().getCustomElementAttribute(),"data-automation-id"),this._setConfigurationOrDefault(x,this._startUpConfigurations.getEnableSameSiteNoneAndSecureCookies(),!0),this._setConfigurationOrDefault(ne,this._startUpConfigurations.getCollectionSettings().getElementSettings().getAttributesToMask(),[]),this._setConfigurationOrDefault(re,this._startUpConfigurations.getCollectionSettings().getCustomInputElementSettings().getParentElementSelector(),""),this._setConfigurationOrDefault(oe,this._startUpConfigurations.getCollectionSettings().getCustomInputElementSettings().getChildElementWithCustomAttribute(),""),this._setConfigurationOrDefault(ie,this._startUpConfigurations.getCollectionSettings().getCustomInputElementSettings().getElementDataAttribute(),""),this._setConfigurationOrDefault(ae,this._startUpConfigurations.getCollectionSettings().getCustomInputElementSettings().getCustomButtons(),[]),this._setConfigurationOrDefault(ce,this._startUpConfigurations.getCollectionSettings().getAgentType(),rt.PRIMARY),this._setConfigurationOrDefault(le,this._startUpConfigurations.getCollectionSettings().getAgentMode(),ot.FULL),this._setConfigurationOrDefault(Y,this._startUpConfigurations.getCollectionSettings().getElementSettings().getKeyEventsMaskSpecialChars(),!1),this._setConfigurationOrDefault(fe,null===(e=this._startUpConfigurations.getClientSettings())||void 0===e?void 0:e.enableWupMessagesHashing,!1),this._setConfigurationOrDefault(te,null===(t=this._startUpConfigurations.getClientSettings())||void 0===t?void 0:t.enableCoordinatesMasking,!1),this._setConfigurationOrDefault(pe,this._startUpConfigurations.getEnableStartupCustomerSessionId(),!1),this._setNumberConfigurationOrDefault(ye,this._startUpConfigurations.getMutationMaxChunkSize(),0),this._setNumberConfigurationOrDefault(de,this._startUpConfigurations.getMutationChunkDelayMs(),100),this._setConfigurationOrDefault(me,this._startUpConfigurations.getPasswordIdMaskingList(),[]),this._setConfigurationOrDefault($,this._startUpConfigurations.isUnmaskedValuesEnabled(),!1),this._setConfigurationOrDefault(Z,this._startUpConfigurations.getAllowedUnmaskedValuesList(),[]),this._setConfigurationOrDefault(ge,this._startUpConfigurations.getUseLegacyZeroTimeout(),[])}},{key:"_setConfigurationOrDefault",value:function(e,t,n){nn.isUndefinedNull(t)?this._configurationRepository.set(e,n):this._configurationRepository.set(e,t)}},{key:"_setNumberConfigurationOrDefault",value:function(e,t,n){nn.isNumber(t)?this._configurationRepository.set(e,t):this._configurationRepository.set(e,n)}}])}();function zl(e){return zl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zl(e)}function Vl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Kl(r.key),r)}}function Kl(e){var t=function(e,t){if("object"!=zl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=zl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zl(t)?t:t+""}var ql=function(){return function(e,t,n){return t&&Vl(e.prototype,t),n&&Vl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.reset()},[{key:"setLogLevel",value:function(e){this._logLevel=e}},{key:"add",value:function(e){var t=e.data;if(!t)throw new Error("Unable to add log message. Missing data field");(!t.level||t.level>=this._logLevel)&&this._Q.push(t)}},{key:"take",value:function(){var e=this._Q;return this.reset(),e}},{key:"reset",value:function(){this._Q=[],this.setLogLevel(void 0===this._logLevel?at:this._logLevel)}},{key:"isEmpty",value:function(){return 0===this._Q.length}},{key:"filterOutByLogLevel",value:function(e){this._Q=this._Q.filter(function(t,n,r){return t.level>=e})}}])}();function Jl(e){return Jl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jl(e)}function Yl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Xl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yl(Object(n),!0).forEach(function(t){Zl(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yl(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Zl(e,t,n){return(t=ef(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ef(r.key),r)}}function ef(e){var t=function(e,t){if("object"!=Jl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Jl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Jl(t)?t:t+""}var tf=function(){return function(e,t,n){return t&&$l(e.prototype,t),n&&$l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sn=0,this.url=n,this.logAggregator=t,this.msgPrefix=r},[{key:"log",value:function(e,t,n){this.logAggregator.add({eventName:"log",data:Xl(Xl({msg:this.msgPrefix+e},n),{},{url:this.url,level:t,sn:this.sn++})})}},{key:"setLogLevel",value:function(e){this.logAggregator instanceof ql&&this.logAggregator.setLogLevel(e)}},{key:"clearLogEntriesByLogLevel",value:function(e){this.logAggregator.filterOutByLogLevel(e)}}])}();function nf(e){return nf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nf(e)}function rf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,of(r.key),r)}}function of(e){var t=function(e,t){if("object"!=nf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nf(t)?t:t+""}function af(e,t,n){return t=sf(t),function(e,t){if(t&&("object"==nf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,uf()?Reflect.construct(t,n||[],sf(e).constructor):t.apply(e,n))}function uf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(uf=function(){return!!e})()}function sf(e){return sf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sf(e)}function cf(e,t){return cf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cf(e,t)}var lf=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),af(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cf(e,t)}(t,e),function(e,t,n){return t&&rf(e.prototype,t),n&&rf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"add",value:function(e){this.addToQueue(e.eventName,e.data)}},{key:"filterOutByLogLevel",value:function(e){this.filterOut(function(t){return t.data.level>=e})}}])}(Xn);function ff(e){return ff="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ff(e)}function pf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hf(r.key),r)}}function hf(e){var t=function(e,t){if("object"!=ff(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ff(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ff(t)?t:t+""}var yf=function(){return function(e,t,n){return t&&pf(e.prototype,t),n&&pf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isSecureSameSite=n.get(x),this._utils=t},[{key:"getCookie",value:function(e){return this._utils.StorageUtils.getCookie(e)}},{key:"setCookie",value:function(e,t,n){return this._utils.StorageUtils.setCookie(e,t,n,this.isSecureSameSite)}},{key:"setExpirationInCookie",value:function(e,t){return this._utils.StorageUtils.setExpirationInCookie(e,t)}},{key:"getFromLocalStorage",value:function(e){return this._utils.StorageUtils.getFromLocalStorage(e)}},{key:"saveToLocalStorage",value:function(e,t,n){return this._utils.StorageUtils.saveToLocalStorage(e,t,n)}},{key:"setExpirationInLocalStorage",value:function(e,t){return this._utils.StorageUtils.setExpirationInLocalStorage(e,t)}},{key:"removeFromLocalStorage",value:function(e){return this._utils.StorageUtils.removeFromLocalStorage(e)}},{key:"removeCookie",value:function(e){return this._utils.StorageUtils.removeCookie(e)}}])}();function df(e){return df="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},df(e)}function mf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vf(r.key),r)}}function vf(e){var t=function(e,t){if("object"!=df(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=df(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==df(t)?t:t+""}var bf=function(){return function(e,t,n){return t&&mf(e.prototype,t),n&&mf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._workerCommunicator=t,this._brandRepository=n},[{key:"set",value:function(e){this._validateBrand(e)&&(this._brandRepository.set(e),this._workerCommunicator.sendAsync(pn,{brand:e}))}},{key:"update",value:function(){var e=this._brandRepository.get();e&&this.set(e)}},{key:"_validateBrand",value:function(e){return e.length>200?(yt.warn("The received brand name length is greater than 200. It is illegal. Ignoring the API call"),!1):!!/^[a-zA-Z0-9.\-,_ ]+$/.test(e)||(yt.warn("The received brand contains illegal characters. The legal characters are: A-Za-z0-9.-,_ and space. Ignoring the API call"),!1)}}])}();function gf(e){return gf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gf(e)}function _f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wf(r.key),r)}}function wf(e){var t=function(e,t){if("object"!=gf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=gf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gf(t)?t:t+""}var Sf=function(){return function(e,t,n){return t&&_f(e.prototype,t),n&&_f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.brandKey="brand",this._utils=t,this._storageUtilsWrapper=n,this.COOKIE_EXPIRATION_IN_MILLISECONDS=this._utils.minutesToMilliseconds(525600)},[{key:"get",value:function(){var e=this._storageUtilsWrapper.getCookie(this.brandKey),t=this._validateBrand(e);if(!t){yt.debug("Brand was not found in cookie. Trying to get it from the local storage.");var n=this._storageUtilsWrapper.getFromLocalStorage(this.brandKey);if(!(t=this._validateBrand(n)))return yt.debug("Brand was not found in local storage."),null}return t}},{key:"set",value:function(e){var t=this._validateBrand(e);t?(this._storageUtilsWrapper.saveToLocalStorage(this.brandKey,t)||yt.error("Failed saving brand ".concat(e," to local storage.")),this._storageUtilsWrapper.setCookie(this.brandKey,t,this.COOKIE_EXPIRATION_IN_MILLISECONDS)||yt.error("Failed saving brand ".concat(e," to cookie."))):yt.error("Brand ".concat(e," is invalid. Will not save it."))}},{key:"_validateBrand",value:function(e){return e||null}}])}();function Ef(e){return Ef="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ef(e)}function kf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Tf(r.key),r)}}function Tf(e){var t=function(e,t){if("object"!=Ef(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ef(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ef(t)?t:t+""}var Pf=function(){return function(e,t,n){return t&&kf(e.prototype,t),n&&kf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._messageBus=t,this._muidService=n,this._clientEventService=r,this._workerCommunicator=o,this._messageBus.subscribe(oo,this._handler.bind(this),!0),this._workerCommunicator.addMessageListener(Mr,this._publish.bind(this),!0)},[{key:"_handler",value:function(e){var t;null===(t=this._muidService)||void 0===t||t.updateMuid(e),this._clientEventService.publishRestoredMuidEvent(e)}},{key:"_publish",value:function(e){this._messageBus.publish(oo,e)}}])}();function Of(e){return Of="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Of(e)}function Cf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jf(r.key),r)}}function jf(e){var t=function(e,t){if("object"!=Of(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Of(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Of(t)?t:t+""}var Rf=function(){return function(e,t,n){return t&&Cf(e.prototype,t),n&&Cf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._configurationRepository=t},[{key:"onConfigUpdate",value:function(e){var t=e.get(te);this._setConfigurationKey(t)}},{key:"updateConfig",value:function(e){this._handleConfigurationUpdate(e)}},{key:"_handleConfigurationUpdate",value:function(e){nn.isBoolean(e)?(yt.info("Set coordinates masking API was called, is enabled: ".concat(e)),this._setConfigurationKey(e)):yt.warn("Invalid argument type: ".concat(e))}},{key:"_setConfigurationKey",value:function(e){this._configurationRepository.set(te,e)}}])}();function Mf(e){return Mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mf(e)}function Bf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Af(r.key),r)}}function Af(e){var t=function(e,t){if("object"!=Mf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Mf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Mf(t)?t:t+""}var xf="cdAgentId",Df=function(){return function(e,t,n){return t&&Bf(e.prototype,t),n&&Bf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._storageUtilsWrapper=t,this._agentId=null,this._loadAgentIdFromStorage()},[{key:"get",value:function(){return this._agentId}},{key:"set",value:function(e){if(!e||"string"!=typeof e)throw new Error("Invalid agentId value");this._agentId=e,this._saveAgentIdToStorage()}},{key:"_saveAgentIdToStorage",value:function(){this._storageUtilsWrapper.saveToLocalStorage(xf,this._agentId)}},{key:"_loadAgentIdFromStorage",value:function(){this._agentId=this._storageUtilsWrapper.getFromLocalStorage(xf)||null}}])}();function If(e){return If="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},If(e)}function Lf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ff(r.key),r)}}function Ff(e){var t=function(e,t){if("object"!=If(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=If(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==If(t)?t:t+""}var Nf=function(){return function(e,t,n){return t&&Lf(e.prototype,t),n&&Lf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._agentIdCache=t,this._serverWorkerCommunicator=n},[{key:"updateAgentIdWithServer",value:function(){var e=this._agentIdCache.get();this._serverWorkerCommunicator.sendAsync(dn,{agentId:e})}},{key:"set",value:function(e){if(!e)throw new Error("Invalid agentId value of undefined");this._agentIdCache.set(e)}}])}();function Uf(e){return Uf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uf(e)}function Wf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Gf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wf(Object(n),!0).forEach(function(t){Yf(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wf(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Hf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xf(r.key),r)}}function zf(e,t,n){return t&&Qf(e.prototype,t),n&&Qf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vf(e,t,n){return t=qf(t),function(e,t){if(t&&("object"==Uf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Kf()?Reflect.construct(t,n||[],qf(e).constructor):t.apply(e,n))}function Kf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Kf=function(){return!!e})()}function qf(e){return qf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qf(e)}function Jf(e,t){return Jf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Jf(e,t)}function Yf(e,t,n){return(t=Xf(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xf(e){var t=function(e,t){if("object"!=Uf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Uf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Uf(t)?t:t+""}var Zf={configKey:"isElementsEvent",isDefault:!0,shouldRunPerContext:!0,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!0,runInUns:!1,runInSlave:!0,runInLean:!0,isRunning:!1,instance:null},$f={input:0,initial:1,focus:2,blur:3,change:4,click:5,submit:6},ep=["eventSequence","timestamp","eventType","isTrusted","elementHash","length","elementValues","selected","hashedValue","relativeTime"],tp=function(e){function t(e){var n;return Hf(this,t),Yf(n=Vf(this,t),"mutationMessageHandler",function(e){var t,r;e.browserContext&&(n._inputEvents.addOnLoadInputData(e.browserContext,!0),n._inputEvents.bind(e.browserContext),n._clickEvents.addOnLoadInputData(e.browserContext,!0),n._clickEvents.bind(e.browserContext),n._selectElementEvents.bind(e.browserContext),n._formEvents.bind(e.browserContext),null===(t=n._customInputEvents)||void 0===t||t.addOnLoadInputData(e.browserContext,!0),null===(r=n._customInputEvents)||void 0===r||r.bind(e.browserContext))}),Yf(n,"startFeature",function(e){var t,r;n._inputEvents.addOnLoadInputData(e,!1),n._inputEvents.bind(e),n._clickEvents.addOnLoadInputData(e,!1),n._clickEvents.bind(e),n._selectElementEvents.bind(e),null===(t=n._customInputEvents)||void 0===t||t.addOnLoadInputData(e,!1),null===(r=n._customInputEvents)||void 0===r||r.bind(e),n._formEvents.bind(e),n._configurationRepository.get(j)&&n._mutationEmitter&&(n._mutationEmitter.startObserver(e),n._jQueryElementListenerSiteMapper.initTracking())}),Yf(n,"_onSiteMapperMatch",function(e){var t=e.selector;if(t)try{var r=window.document.querySelector(t);if(!r)return void yt.error("ElementEvents._onSiteMapperMatch - selector:".concat(JSON.stringify(t)," not found on page"));n._domUtils.matches(r,n._inputSelectors)?n._jqueryEventHandler.bindInputEvents(r):n._domUtils.matches(r,n._onClickSelectors)?n._jqueryEventHandler.bindOnClickEvents(r):n._domUtils.matches(r,n._onSelectSelectors)?n._jqueryEventHandler.bindOnChangeEvents(r):n._domUtils.matches(r,n._onFormSelectors)?n._jqueryEventHandler.bindOnFormsEvents(r):yt.error("ElementEvents._onSiteMapperMatch - Unable to match the element with selector:\n                ".concat(JSON.stringify(t)," to any selectors group. Aborting jQuery element listening process."))}catch(e){yt.error("ElementEvents._onSiteMapperMatch - ".concat(e.message),e)}else yt.warn("ElementEvents._onSiteMapperMatch - No selector defined for match. Aborting jQuery element listening process.")}),n._configurationRepository=e.configurationRepository,n._utils=e.utils,n._domUtils=e.domUtils,n._dataQ=e.dataQ,n._elements=e.elements,n._jQueryElementListenerSiteMapper=e.jQueryElementListenerSiteMapper,n._jQueryElementListenerSiteMapper.updateObserver(n._onSiteMapperMatch),n._messageBus=e.messageBus,n._mutationEmitter=e.mutationEmitter,n._messageBus.subscribe(ao,n.mutationMessageHandler),n._StandardInputEventsEmitter=e.StandardInputEventsEmitter,n._SyntheticMaskInputEventsHandler=e.SyntheticMaskInputEventsHandler,n._SyntheticAutotabInputEventsHandler=e.SyntheticAutotabInputEventsHandler,n._maskingService=e.maskingService,n._inputEvents=new e.InputEvents(n._elements,n.sendToQueue.bind(n),n._utils,n._messageBus,n._StandardInputEventsEmitter,n._SyntheticMaskInputEventsHandler,n._SyntheticAutotabInputEventsHandler,n._maskingService,e.maxShadowDepth,e.iframeLoadingTimeout),n._inputSelectors=e.inputSelectors,n._StandardOnClickEventsEmitter=e.StandardOnClickEventsEmitter,n._configurationRepository.get(re)&&n._configurationRepository.get(oe)&&n._configurationRepository.get(ie)&&(n._StandardCustomInputEmitter=e.StandardCustomInputEmitter,n._inputElementSettings={parentElementSelector:n._configurationRepository.get(re),childElementWithCustomAttribute:n._configurationRepository.get(oe),elementDataAttribute:n._configurationRepository.get(ie),customButtons:n._configurationRepository.get(ae)},n._customInputEvents=new e.CustomInputEvents(n._elements,n.sendToQueue.bind(n),n._utils,n._messageBus,n._StandardCustomInputEmitter,n._maskingService,n.inputElementSettings=n._inputElementSettings)),n._clickEvents=new e.ClickEvents(n.sendToQueue.bind(n),n._utils,n._messageBus,n._configurationRepository,n._StandardOnClickEventsEmitter,n._maskingService,n._elements,e.maxShadowDepth,e.iframeLoadingTimeout),n._onClickSelectors=e.onClickSelectors,n._StandardOnChangeEventsEmitter=e.StandardOnChangeEventsEmitter,n._elementFocusEventEmitter=e.ElementFocusEventsEmitter,n._elementBlurEventEmitter=e.ElementBlurEventsEmitter,n._selectElementEvents=new e.SelectElementEvents(n.sendToQueue.bind(n),n._utils,n._messageBus,n._StandardOnChangeEventsEmitter,n._elementFocusEventEmitter,n._elementBlurEventEmitter,n._configurationRepository,n._maskingService,e.maxShadowDepth,e.iframeLoadingTimeout),n._onSelectSelectors=e.onSelectSelectors,n._StandardOnFormEventsEmitter=e.StandardOnFormEventsEmitter,n._formEvents=new e.FormEvents(n.sendToQueue.bind(n),n._messageBus,n._StandardOnFormEventsEmitter,e.maxShadowDepth,e.iframeLoadingTimeout),n._onFormSelectors=e.onFormSelectors,n._jqueryEventHandler=e.JqueryElementsHandler,n._maxElemValLength=200,n._hashTruncationLength=n._configurationRepository.get("elementHashTruncationLength")||2,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jf(e,t)}(t,e),zf(t,[{key:"stopFeature",value:function(e){var t;this._inputEvents.unbind(e),this._clickEvents.unbind(e),this._selectElementEvents.unbind(e),null===(t=this._customInputEvents)||void 0===t||t.unbind(e),this._formEvents.unbind(e),this._jQueryElementListenerSiteMapper.stopTracking(),this._mutationEmitter.stopObserver(e)}},{key:"updateFeatureConfig",value:function(e){this._configurationRepository.get("isMutationObserver")&&this._mutationEmitter&&(this._mutationEmitter.startObserver(e),this._jQueryElementListenerSiteMapper.onConfigUpdate(this._configurationRepository)),this._hashTruncationLength=void 0!==this._configurationRepository.get("elementHashTruncationLength")?this._configurationRepository.get("elementHashTruncationLength"):this._hashTruncationLength,this._elements.updateFeatureConfig(),this._selectElementEvents.updateSettings(e)}},{key:"sendToQueue",value:function(e,t){var n=zo[e.isTrusted],r=this.getEventTimestamp(e),o=this.getTimestampFromEvent(e),i=$f[e.type];this._utils.isUndefinedNull(i)&&(i=-1);var a=this._elements.getElementHashFromEvent(e),u=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();(t=t||{}).elementValues&&t.elementValues.length>this._maxElemValLength&&(t.elementValues="");var s=Gf(Gf({},t),{eventType:i,eventSequence:u,timestamp:r,elementHash:a,isTrusted:n,hashedValue:"",relativeTime:o});this._dataQ.addToQueue("element_events",this._utils.convertToArrayByMap(ep,s),!0)}}],[{key:"getDefaultSettings",value:function(){return Zf}},{key:"Builder",get:function(){var e=function(){return zf(function e(t,n,r,o,i,a){Hf(this,e),this.configurationRepository=t,this.utils=n,this.domUtils=r,this.elements=o,this.dataQ=i,this.maxShadowDepth=a.getMaxShadowDepth(),this.iframeLoadingTimeout=a.getIframeLoadingTimeout()},[{key:"withMessageBus",value:function(e){return this.messageBus=e,this}},{key:"withMutationEmitter",value:function(e){return this.mutationEmitter=e,this}},{key:"withjQueryElementListenerSiteMapper",value:function(e){return this.jQueryElementListenerSiteMapper=e,this}},{key:"withjQueryElementsHandler",value:function(e){return this.JqueryElementsHandler=e,this}},{key:"withInputEvents",value:function(e,t,n){return this.InputEvents=e,this.inputSelectors=t,this.maskingService=n,this}},{key:"withStandardInputEventsEmitter",value:function(e){return this.StandardInputEventsEmitter=e,this}},{key:"withSyntheticMaskInputEventsHandler",value:function(e){return this.SyntheticMaskInputEventsHandler=e,this}},{key:"withSyntheticAutotabInputEventsHandler",value:function(e){return this.SyntheticAutotabInputEventsHandler=e,this}},{key:"withClickEvents",value:function(e,t){return this.ClickEvents=e,this.onClickSelectors=t,this}},{key:"withStandardOnClickEventsEmitter",value:function(e){return this.StandardOnClickEventsEmitter=e,this}},{key:"withSelectElementEvents",value:function(e,t){return this.SelectElementEvents=e,this.onSelectSelectors=t,this}},{key:"withStandardOnChangeEventsEmitter",value:function(e){return this.StandardOnChangeEventsEmitter=e,this}},{key:"withElementFocusEventsEmitter",value:function(e){return this.ElementFocusEventsEmitter=e,this}},{key:"withElementBlurEventsEmitter",value:function(e){return this.ElementBlurEventsEmitter=e,this}},{key:"withFormEvents",value:function(e,t){return this.FormEvents=e,this.onFormSelectors=t,this}},{key:"withStandardOnFormEventsEmitter",value:function(e){return this.StandardOnFormEventsEmitter=e,this}},{key:"withCustomInputEventEmitter",value:function(e,t){return this.CustomInputEvents=e,this.StandardCustomInputEmitter=t,this}},{key:"build",value:function(){return new t(this)}}])}();return e}}])}(Qo),np=tp;function rp(e){return rp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rp(e)}function op(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ip(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pp(r.key),r)}}function ap(e,t,n){return t&&ip(e.prototype,t),n&&ip(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function up(e,t,n){return t=cp(t),function(e,t){if(t&&("object"==rp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,sp()?Reflect.construct(t,n||[],cp(e).constructor):t.apply(e,n))}function sp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(sp=function(){return!!e})()}function cp(e){return cp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cp(e)}function lp(e,t){return lp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},lp(e,t)}function fp(e,t,n){return(t=pp(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pp(e){var t=function(e,t){if("object"!=rp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=rp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rp(t)?t:t+""}var hp={configKey:"isClipboardEvent",isDefault:!0,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!0,runInUns:!1,runInSlave:!0,runInLean:!0,isRunning:!1,instance:null},yp={copy:0,paste:1,cut:2},dp=["eventSequence","timestamp","clipboardEventType","elementHash","copiedText"],mp=function(e){function t(e){var n;return op(this,t),fp(n=up(this,t),"startFeature",function(e){try{var t=e.getDocument();n._cutEventEmitter.start(t),n._copyEventEmitter.start(t),n._pasteEventEmitter.start(t),e.collectAllElementsBySelectorAsync("iframe",n._maxShadowDepth,n._iframeLoadingTimeout).then(function(e){e.forEach(function(e){e&&e.contentDocument&&(n._cutEventEmitter.start(e.contentDocument),n._copyEventEmitter.start(e.contentDocument),n._pasteEventEmitter.start(e.contentDocument))})}),n._messageBus.subscribe(go,n._handleClipboardEvent),n._messageBus.subscribe(_o,n._handleClipboardEvent),n._messageBus.subscribe(wo,n._handleClipboardEvent)}catch(e){yt.error("Failed starting the ClipboardEvents feature. msg: ".concat(e.message),e)}}),fp(n,"_handleClipboardEvent",function(e){n._sendToQueue(e)}),fp(n,"_sendToQueue",function(e){try{var t=n.getEventTimestamp(e),r=n._elements.getElementHashFromEvent(e),o=n._utils.StorageUtils.getAndUpdateEventSequenceNumber(),i=e.clipboardData?e.clipboardData.getData("text"):window.clipboardData?window.clipboardData.getData("text"):"";""!==(i=i||"")&&(i=i.replace(/[\d]/g,"1").replace(/[a-zA-Z]/g,"a").replace(/[^a-zA-Z\d]/g,"*"));var a=yp[e.type];n._utils.isUndefinedNull(a)&&(a=-1),n._dataQueue.addToQueue("clipboard_events",n._utils.convertToArrayByMap(dp,{eventSequence:o,timestamp:t,elementHash:r,copiedText:i,clipboardEventType:a}))}catch(e){yt.error("Failed handling ClipboardEvent. msg: ".concat(e.message),e)}}),n._utils=e.utils,n._dataQueue=e.dataQueue,n._elements=e.elements,n._messageBus=e.messageBus,n._cutEventEmitter=e.cutEventEmitter,n._copyEventEmitter=e.copyEventEmitter,n._pasteEventEmitter=e.pasteEventEmitter,n._maxShadowDepth=e.maxShadowDepth,n._iframeLoadingTimeout=e.iframeLoadingTimeout,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lp(e,t)}(t,e),ap(t,[{key:"stopFeature",value:function(e){var t=this;try{var n=e.getDocument();this._cutEventEmitter.stop(n),this._copyEventEmitter.stop(n),this._pasteEventEmitter.stop(n),e.collectAllElementsBySelectorAsync("iframe",this._maxShadowDepth,this._iframeLoadingTimeout).then(function(e){e.forEach(function(e){e&&e.contentDocument&&(t._cutEventEmitter.stop(e.contentDocument),t._copyEventEmitter.stop(e.contentDocument),t._pasteEventEmitter.stop(e.contentDocument))})}),this._messageBus.unsubscribe(go,this._handleClipboardEvent),this._messageBus.unsubscribe(_o,this._handleClipboardEvent),this._messageBus.unsubscribe(wo,this._handleClipboardEvent)}catch(e){yt.error("Failed stopping the ClipboardEvents feature. msg: ".concat(e.message),e)}}}],[{key:"getDefaultSettings",value:function(){return hp}},{key:"Builder",get:function(){return function(){return ap(function e(t,n,r,o){op(this,e),this.utils=t,this.dataQueue=r,this.elements=n,this.maxShadowDepth=o.getMaxShadowDepth(),this.iframeLoadingTimeout=o.getIframeLoadingTimeout()},[{key:"withMessageBus",value:function(e){return this.messageBus=e,this}},{key:"withCutEventEmitter",value:function(e){return this.cutEventEmitter=e,this}},{key:"withCopyEventEmitter",value:function(e){return this.copyEventEmitter=e,this}},{key:"withPasteEventEmitter",value:function(e){return this.pasteEventEmitter=e,this}},{key:"build",value:function(){return new t(this)}}])}()}}])}(Qo),vp=mp;function bp(e){return bp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bp(e)}function gp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kp(r.key),r)}}function _p(e,t,n){return t=Sp(t),function(e,t){if(t&&("object"==bp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,wp()?Reflect.construct(t,n||[],Sp(e).constructor):t.apply(e,n))}function wp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(wp=function(){return!!e})()}function Sp(e){return Sp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Sp(e)}function Ep(e,t){return Ep=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ep(e,t)}function kp(e){var t=function(e,t){if("object"!=bp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=bp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bp(t)?t:t+""}var Tp={configKey:"isOrientationEvents",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},Pp=function(e){function t(e,n,r,o,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){(t=kp(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(a=_p(this,t),"_handleDeviceOrientationEvent",function(e){var t=a._utils.dateNow();if(e&&t-a._lastTime>a._samplePeriod){var n=e.absolute||!1,r=a._utils.isUndefinedNull(e.alpha)?0:a._utils.cutDecimalPointDigits(e.alpha,4),o=a._utils.isUndefinedNull(e.beta)?0:a._utils.cutDecimalPointDigits(e.beta,4),i=a._utils.isUndefinedNull(e.gamma)?0:a._utils.cutDecimalPointDigits(e.gamma,4);if(r!==a._lastAlpha||o!==a._lastBeta||i!==a._lastGamma){yt.isDebug()&&yt.debug("OrientationEvents:_onOrientationEvent, sending data: timestamp: ".concat(t,"\n                alpha,betta,gamma: ").concat(r,",").concat(o,",").concat(i,",prevTime:").concat(a._lastTime)),a._lastTime=t,a._lastAlpha=r,a._lastBeta=o,a._lastGamma=i;var u=a._utils.StorageUtils.getAndUpdateEventSequenceNumber();a._dataQ.addToQueue("orientation_events",[null,u,t,n,r,o,i])}}}),a._dataQ=r,a._configurationRepository=e,a._utils=n,a._samplePeriod=a._configurationRepository.get(V)||0,a._lastAlpha=0,a._lastBeta=0,a._lastGamma=0,a._lastTime=0,a._messageBus=o,a._deviceOrientationEventEmitter=i,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ep(e,t)}(t,e),function(e,t,n){return t&&gp(e.prototype,t),n&&gp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:function(){window.DeviceOrientationEvent&&(this._deviceOrientationEventEmitter.start(),this._messageBus.subscribe(So,this._handleDeviceOrientationEvent))}},{key:"stopFeature",value:function(){window.DeviceOrientationEvent&&(this._deviceOrientationEventEmitter.stop(),this._messageBus.unsubscribe(So,this._handleDeviceOrientationEvent))}},{key:"updateFeatureConfig",value:function(){var e=this._configurationRepository.get(V);this._samplePeriod=void 0!==e?e:this._samplePeriod}}],[{key:"getDefaultSettings",value:function(){return Tp}}])}(Qo),Op=Pp;function Cp(e){return Cp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cp(e)}function jp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xp(r.key),r)}}function Rp(e,t,n){return t=Bp(t),function(e,t){if(t&&("object"==Cp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Mp()?Reflect.construct(t,n||[],Bp(e).constructor):t.apply(e,n))}function Mp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Mp=function(){return!!e})()}function Bp(e){return Bp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bp(e)}function Ap(e,t){return Ap=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ap(e,t)}function xp(e){var t=function(e,t){if("object"!=Cp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Cp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Cp(t)?t:t+""}var Dp={configKey:"isBeforeInstallPrompt",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!1,isFrameRelated:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},Ip=["eventSequence","timestamp","platforms","relativeTime"],Lp=function(e){function t(e,n,r,o){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){(t=xp(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(i=Rp(this,t),"_onBeforeInstallPrompt",function(e){var t=i._utils.StorageUtils.getAndUpdateEventSequenceNumber(),n=i.getEventTimestamp(),r=i.getTimestampFromEvent(e),o=e.platforms?e.platforms.join(","):"";i._dataQueue.addToQueue("before_install_prompt",i._utils.convertToArrayByMap(Ip,{eventSequence:t,timestamp:n,platforms:o,relativeTime:r}))}),i._messageBus=r,i._eventEmitter=o,i._dataQueue=e,i._utils=n,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ap(e,t)}(t,e),function(e,t,n){return t&&jp(e.prototype,t),n&&jp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:function(){this._eventEmitter.start(window),this._messageBus.subscribe(Eo,this._onBeforeInstallPrompt)}},{key:"stopFeature",value:function(){this._eventEmitter.stop(window),this._messageBus.unsubscribe(Eo,this._onBeforeInstallPrompt)}}],[{key:"getDefaultSettings",value:function(){return Dp}}])}(Qo),Fp=Lp;function Np(e){return Np="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Np(e)}function Up(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qp(r.key),r)}}function Gp(e,t,n){return t&&Wp(e.prototype,t),n&&Wp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hp(e,t,n){return t=zp(t),function(e,t){if(t&&("object"==Np(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Qp()?Reflect.construct(t,n||[],zp(e).constructor):t.apply(e,n))}function Qp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Qp=function(){return!!e})()}function zp(e){return zp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zp(e)}function Vp(e,t){return Vp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vp(e,t)}function Kp(e,t,n){return(t=qp(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qp(e){var t=function(e,t){if("object"!=Np(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Np(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Np(t)?t:t+""}var Jp={configKey:"isWindowEvents",isDefault:!0,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},Yp={DOMContentLoaded:0,scroll:1,resize:2,focus:3,blur:4,tabFocus:5,tabBlur:6},Xp=["eventSequence","timestamp","eventType","isTrusted","screenWidth","screenHeight","clientWidth","clientHeight","documentWidth","documentHeight","scrollTop","scrollLeft","windowInnerWidth","windowInnerHeight","windowOuterWidth","windowOuterHeight"],Zp=function(e){function t(e){var n;return Up(this,t),Kp(n=Hp(this,t),"startFeature",function(e){try{n._resizeEventEmitter.start(e.Context),n._messageBus.subscribe(Po,n._onWindowEvent),n._focusEventEmitter.start(e.Context),n._messageBus.subscribe(ko,n._onWindowEvent),n._blurEventEmitter.start(e.Context),n._messageBus.subscribe(To,n._onWindowEvent),n._domContentLoadedEventEmitter.start(e.getDocument()),n._messageBus.subscribe(Oo,n._onWindowEvent),n._visibilityChangeEventEmitter.start(e.getDocument()),n._messageBus.subscribe(Co,n._onWindowEvent),n._configurationRepository.get(H)&&(n._scrollEventEmitter.start(e.Context),n._messageBus.subscribe(jo,n._onWindowEvent))}catch(e){yt.error("Failed starting the WindowEventCollector. msg: ".concat(e.message),e)}}),Kp(n,"stopFeature",function(e){try{n._resizeEventEmitter.stop(e.Context),n._messageBus.unsubscribe(Po,n._onWindowEvent),n._focusEventEmitter.stop(e.Context),n._messageBus.unsubscribe(ko,n._onWindowEvent),n._blurEventEmitter.stop(e.Context),n._messageBus.unsubscribe(To,n._onWindowEvent),n._domContentLoadedEventEmitter.stop(e.getDocument()),n._messageBus.unsubscribe(Oo,n._onWindowEvent),n._visibilityChangeEventEmitter.stop(e.getDocument()),n._messageBus.unsubscribe(Co,n._onWindowEvent),n._configurationRepository.get(H)&&(n._scrollEventEmitter.stop(e.Context),n._messageBus.unsubscribe(jo,n._onWindowEvent))}catch(e){yt.error("Failed stopping the ClipboardEvents feature. msg: ".concat(e.message),e)}}),Kp(n,"updateFeatureConfig",function(e){n._configurationRepository.get(H)?n._configurationRepository.get(H)&&(n._scrollEventEmitter.start(e.Context),n._messageBus.subscribe(jo,n._onWindowEvent)):(n._scrollEventEmitter.stop(e.Context),n._messageBus.unsubscribe(jo,n._onWindowEvent))}),Kp(n,"_onWindowEvent",function(e){try{n._sendToQueue(e)}catch(e){yt.error("An error has occurred while sending window event. ".concat(e.message),e)}}),Kp(n,"_sendToQueue",function(e){if(!e)throw new Error("Invalid window event received.");var t,r=zo[void 0];"DOMContentLoaded"===e.type?t=(new Date).getTime():(t=n.getEventTimestamp(e),r=zo[e.isTrusted]),yt.isDebug()&&(yt.trace("got event "+e.type+" at time "+t),yt.trace("adding to queue - screen(width,height): "+screen.width+","+screen.height+" window(width,height): "+window.innerWidth+","+window.innerHeight));var o=n._utils.StorageUtils.getAndUpdateEventSequenceNumber(),i="visibilitychange"!==e.type?e.type:"hidden"===document.visibilityState?"tabBlur":"tabFocus",a=Yp[i];null!=a&&void 0!==a||(a=-1),n._dataQueue.addToQueue("window_events",n._utils.convertToArrayByMap(Xp,{eventType:a,eventSequence:o,timestamp:t,screenWidth:screen.width?Math.round(screen.width):-1,screenHeight:screen.height?Math.round(screen.height):-1,clientWidth:window.innerWidth?Math.round(window.innerWidth):-1,clientHeight:window.innerHeight?Math.round(window.innerHeight):-1,documentWidth:document.body&&document.body.clientWidth?Math.round(document.body.clientWidth):-1,documentHeight:document.body&&document.body.clientHeight?Math.round(document.body.clientHeight):-1,scrollTop:document.body&&document.body.scrollTop?Math.round(document.body.scrollTop):0,scrollLeft:document.body&&document.body.scrollLeft?Math.round(document.body.scrollLeft):0,windowInnerWidth:window.innerWidth?Math.round(window.innerWidth):-1,windowInnerHeight:window.innerHeight?Math.round(window.innerHeight):-1,windowOuterWidth:window.outerWidth?Math.round(window.outerWidth):-1,windowOuterHeight:window.outerHeight?Math.round(window.outerHeight):-1,isTrusted:r}))}),n._configurationRepository=e.configurationRepository,n._utils=e.utils,n._dataQueue=e.dataQueue,n._messageBus=e.messageBus,n._focusEventEmitter=e.focusEventEmitter,n._blurEventEmitter=e.blurEventEmitter,n._resizeEventEmitter=e.resizeEventEmitter,n._domContentLoadedEventEmitter=e.domContentLoadedEventEmitter,n._visibilityChangeEventEmitter=e.visibilityChangeEventEmitter,n._scrollEventEmitter=e.scrollEventEmitter,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vp(e,t)}(t,e),Gp(t,null,[{key:"getDefaultSettings",value:function(){return Jp}},{key:"Builder",get:function(){return function(){return Gp(function e(t,n,r){Up(this,e),this.configurationRepository=t,this.utils=n,this.dataQueue=r},[{key:"withMessageBus",value:function(e){return this.messageBus=e,this}},{key:"withFocusEventEmitter",value:function(e){return this.focusEventEmitter=e,this}},{key:"withBlurEventEmitter",value:function(e){return this.blurEventEmitter=e,this}},{key:"withResizeEventEmitter",value:function(e){return this.resizeEventEmitter=e,this}},{key:"withDOMContentLoadedEventEmitter",value:function(e){return this.domContentLoadedEventEmitter=e,this}},{key:"withVisibilityChangeEventEmitter",value:function(e){return this.visibilityChangeEventEmitter=e,this}},{key:"withScrollEventEmitter",value:function(e){return this.scrollEventEmitter=e,this}},{key:"build",value:function(){return new t(this)}}])}()}}])}(Qo);function $p(e){return $p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$p(e)}function eh(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return th(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(th(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,th(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,th(f,"constructor",c),th(c,"constructor",s),s.displayName="GeneratorFunction",th(c,o,"GeneratorFunction"),th(f),th(f,o,"Generator"),th(f,r,function(){return this}),th(f,"toString",function(){return"[object Generator]"}),(eh=function(){return{w:i,m:p}})()}function th(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}th=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){th(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},th(e,t,n,r)}function nh(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function rh(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){nh(i,r,o,a,u,"next",e)}function u(e){nh(i,r,o,a,u,"throw",e)}a(void 0)})}}function oh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ih(r.key),r)}}function ih(e){var t=function(e,t){if("object"!=$p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$p(t)?t:t+""}function ah(e,t,n){return t=sh(t),function(e,t){if(t&&("object"==$p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,uh()?Reflect.construct(t,n||[],sh(e).constructor):t.apply(e,n))}function uh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(uh=function(){return!!e})()}function sh(e){return sh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sh(e)}function ch(e,t){return ch=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ch(e,t)}var lh="granted",fh="accelerometer",ph="gyroscope",hh={configKey:"isAccelerometerEvents",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},yh=function(e){function t(e,n,r){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window.navigator,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=ah(this,t))._configurationRepository=e,o._utils=n,o._dataQueue=r,o._storageUtils=o._utils.StorageUtils,o._navigator=i,o._window=a,o._samplePeriod=o._configurationRepository.get(z)||0,o._samplePeriodGyro=o._configurationRepository.get(Q)||0,o._lastAccelerometerData={x:0,y:0,z:0,time:0},o._lastGyroData={alpha:0,beta:0,gamma:0,time:0},o._hasAccelerometerPermission=!1,o._hasGyroscopePermission=!1,o._onAccelerometerventFunc=o._onAccelerometerEvent.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ch(e,t)}(t,e),function(e,t,n){return t&&oh(e.prototype,t),n&&oh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"_checkPermissions",value:(r=rh(eh().m(function e(){var t,n,r,o,i;return eh().w(function(e){for(;;)switch(e.n){case 0:if(null!==(t=this._navigator.permissions)&&void 0!==t&&t.query){e.n=1;break}return this._hasAccelerometerPermission=!0,this._hasGyroscopePermission=!0,yt.debug("Permissions API not available, defaulting to allowed access"),e.a(2);case 1:return e.p=1,e.n=2,this._navigator.permissions.query({name:fh});case 2:n=e.v,this._hasAccelerometerPermission=n.state===lh,e.n=4;break;case 3:e.p=3,o=e.v,yt.warn("Failed to check accelerometer permission:",o),this._hasAccelerometerPermission=!0;case 4:return e.p=4,e.n=5,this._navigator.permissions.query({name:ph});case 5:r=e.v,this._hasGyroscopePermission=r.state===lh,e.n=7;break;case 6:e.p=6,i=e.v,yt.warn("Failed to check gyroscope permission:",i),this._hasGyroscopePermission=!0;case 7:this._hasAccelerometerPermission||this._hasGyroscopePermission||yt.warn("Both accelerometer and gyroscope permissions are denied");case 8:return e.a(2)}},e,this,[[4,6],[1,3]])})),function(){return r.apply(this,arguments)})},{key:"_processAccelerometerData",value:function(e,t){if(e&&!(t-this._lastAccelerometerData.time<=this._samplePeriod)){var n=this._utils.isUndefinedNull(e.x)?-1:this._utils.cutDecimalPointDigits(e.x,4),r=this._utils.isUndefinedNull(e.y)?-1:this._utils.cutDecimalPointDigits(e.y,4),o=this._utils.isUndefinedNull(e.z)?-1:this._utils.cutDecimalPointDigits(e.z,4);if(n!==this._lastAccelerometerData.x||r!==this._lastAccelerometerData.y||o!==this._lastAccelerometerData.z){var i=this._storageUtils.getAndUpdateEventSequenceNumber();this._lastAccelerometerData={x:n,y:r,z:o,time:t},this._dataQueue.addToQueue("accelerometer_events",[null,i,t,n,r,o]),yt.isDebug()&&yt.debug("Accelerometer data: timestamp:".concat(t," x,y,z:").concat(n,",").concat(r,",").concat(o))}}}},{key:"_processGyroData",value:function(e,t,n){if(e&&!(n-this._lastGyroData.time<=this._samplePeriodGyro)){var r=this._utils.isUndefinedNull(e.alpha)?0:this._utils.cutDecimalPointDigits(e.alpha,4),o=this._utils.isUndefinedNull(e.beta)?0:this._utils.cutDecimalPointDigits(e.beta,4),i=this._utils.isUndefinedNull(e.gamma)?0:this._utils.cutDecimalPointDigits(e.gamma,4);if(r!==this._lastGyroData.alpha||o!==this._lastGyroData.beta||i!==this._lastGyroData.gamma){var a=this._storageUtils.getAndUpdateEventSequenceNumber();this._lastGyroData={alpha:r,beta:o,gamma:i,time:n},this._dataQueue.addToQueue("gyro_events",[null,a,n,t,r,o,i]),yt.isDebug()&&yt.debug("Gyro data: timestamp:".concat(n," alpha,beta,gamma:").concat(r,",").concat(o,",").concat(i))}}}},{key:"_onAccelerometerEvent",value:function(e){if(!e)return!0;var t=this._utils.dateNow();return this._hasAccelerometerPermission&&e.accelerationIncludingGravity&&this._processAccelerometerData(e.accelerationIncludingGravity,t),this._hasGyroscopePermission&&e.rotationRate&&this._processGyroData(e.rotationRate,e.absolute||!1,t),!0}},{key:"startFeature",value:(n=rh(eh().m(function e(){return eh().w(function(e){for(;;)switch(e.n){case 0:if(this._window.DeviceMotionEvent){e.n=1;break}return yt.debug("DeviceMotionEvent not supported in this environment"),e.a(2);case 1:return e.n=2,this._checkPermissions();case 2:this._hasAccelerometerPermission||this._hasGyroscopePermission?(this._utils.addEventListener(this._window,"devicemotion",this._onAccelerometerventFunc),yt.debug("Device motion event listener added successfully")):yt.warn("Device motion event listener not added due to missing permissions");case 3:return e.a(2)}},e,this)})),function(){return n.apply(this,arguments)})},{key:"stopFeature",value:function(){this._window.DeviceMotionEvent&&(this._utils.removeEventListener(this._window,"devicemotion",this._onAccelerometerventFunc),yt.debug("Device motion event listener removed"))}},{key:"updateFeatureConfig",value:function(){var e=this._configurationRepository.get(z),t=this._configurationRepository.get(Q);void 0!==e&&(this._samplePeriod=e),void 0!==t&&(this._samplePeriodGyro=t),yt.debug("Updated sample periods - Accelerometer: ".concat(this._samplePeriod,", Gyro: ").concat(this._samplePeriodGyro))}}],[{key:"getDefaultSettings",value:function(){return hh}}]);var n,r}(Qo);function dh(e){return dh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dh(e)}function mh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vh(r.key),r)}}function vh(e){var t=function(e,t){if("object"!=dh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=dh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dh(t)?t:t+""}function bh(e,t,n){return t=_h(t),function(e,t){if(t&&("object"==dh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,gh()?Reflect.construct(t,n||[],_h(e).constructor):t.apply(e,n))}function gh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(gh=function(){return!!e})()}function _h(e){return _h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_h(e)}function wh(e,t){return wh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wh(e,t)}var Sh=["clientX","clientY"],Eh=["screenX","screenY"],kh=function(e,t,n){function r(e,t){var r=t[n[0]]-e[n[0]],o=t[n[1]]-e[n[1]];return Math.sqrt(r*r+o*o)}return{getScale:function(){return r(e[0],e[1])/r(t[0],t[1])},getFocusPoint:function(){return t=e[1],r=e[0],{x:(t[n[0]]+r[n[0]])/2,y:(t[n[1]]+r[n[1]])/2};var t,r}}},Th={pointerdown:0,pointermove:1,pointerup:2},Ph={configKey:"isPinchZoomEvents",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!0,runInSlave:!0,runInLean:!0,runInUns:!1,isRunning:!1,instance:null},Oh=["eventSequence","timestamp","focusX","focusY","scaleFactor"],Ch=function(e){function t(e,n,r,o,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=bh(this,t))._utils=e,a._dataQ=r,a._elements=n,a._msgBus=o,a._evGesturesCache=[],a._prevEventDiff=-1,a._prevEvGestureSet=[],a._prevTouchEvents=[],a._onAllBrowsersPinchZoomEventBinded=a._onAllBrowsersPinchZoomEvent.bind(a),a._maxShadowDepth=i.getMaxShadowDepth(),a._iframeLoadingTimeout=i.getIframeLoadingTimeout(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wh(e,t)}(t,e),function(e,t,n){return t&&mh(e.prototype,t),n&&mh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:function(e){this._bind(e)}},{key:"stopFeature",value:function(e){this._unbind(e)}},{key:"_addToCommunicationQueue",value:function(e,t,n,r){e!==Th.pointerdown&&e!==Th.pointerup||this._msgBus.publish("pinchEvent",{action:e});var o=this.getEventTimestamp(r),i=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();this._dataQ.addToQueue("pinch_events",this._utils.convertToArrayByMap(Oh,{eventSequence:i,timestamp:o,focusX:n.x,focusY:n.y,scaleFactor:t}))}},{key:"_bind",value:function(e){var t,n=this,r=e.getDocument();if(window.PointerEvent?t=["pointerdown","pointermove","pointerup"]:window.TouchEvent&&(t=["touchstart","touchend","touchcancel","touchmove"]),this._listeningToEvents=t,this._listeningToEvents)for(var o=function(t){n._utils.addEventListener(r,n._listeningToEvents[t],n._onAllBrowsersPinchZoomEventBinded,!1,!1),e.collectAllElementsBySelectorAsync("iframe",n._maxShadowDepth,n._iframeLoadingTimeout).then(function(e){e.forEach(function(e){e&&e.contentDocument&&n._utils.addEventListener(e.contentDocument,n._listeningToEvents[t],n._onAllBrowsersPinchZoomEventBinded,!1,!1)})})},i=0;i<this._listeningToEvents.length;i++)o(i)}},{key:"_unbind",value:function(e){var t=this,n=e.getDocument();if(this._listeningToEvents)for(var r=function(r){t._utils.removeEventListener(n,t._listeningToEvents[r],t._onAllBrowsersPinchZoomEventBinded),e.collectAllElementsBySelectorAsync("iframe",t._maxShadowDepth,t._iframeLoadingTimeout).then(function(e){e.forEach(function(e){e&&e.contentDocument&&t._utils.removeEventListener(e.contentDocument,t._listeningToEvents[r],t._onAllBrowsersPinchZoomEventBinded)})})},o=0;o<this._listeningToEvents.length;o++)r(o);this._evGesturesCache=[],this._prevEventDiff=-1}},{key:"_onAllBrowsersPinchZoomEvent",value:function(e){switch(e.type){case"pointerdown":this._onPointerDownEvent(e);break;case"pointermove":this._onPointerMoveEvent(e);break;case"pointerup":this._onPointerUpEvent(e);break;case"touchstart":this._onTouchStartEvent(e);break;case"touchend":this._onTouchEndEvent();break;case"touchmove":this._onTouchMoveEvent(e)}return!0}},{key:"_onPointerDownEvent",value:function(e){this._evGesturesCache.push(e)}},{key:"_onPointerMoveEvent",value:function(e){for(var t=0;t<this._evGesturesCache.length;t++)if(e.pointerId===this._evGesturesCache[t].pointerId){this._evGesturesCache[t]=e;break}if(2===this._evGesturesCache.length&&this._evGesturesCache[0].pointerId!==this._evGesturesCache[1].pointerId){var n=Math.abs(this._evGesturesCache[0].clientX-this._evGesturesCache[1].clientX);if(this._prevEventDiff>0&&(this._prevEventDiff,this._prevEventDiff,2===this._prevEvGestureSet.length)){var r=kh(this._evGesturesCache,this._prevEvGestureSet,Sh),o=r.getScale();this._addToCommunicationQueue(Th[e.type],o,r.getFocusPoint(),e)}this._prevEventDiff=n,this._prevEvGestureSet=this._evGesturesCache.slice(0)}else this._evGesturesCache.length>2&&(this._evGesturesCache=[],this._prevEvGestureSet=[])}},{key:"_onPointerUpEvent",value:function(e){for(var t=0;t<this._evGesturesCache.length;t++)if(this._evGesturesCache[t].pointerId===e.pointerId){this._evGesturesCache.splice(t,1);break}this._evGesturesCache.length<2&&(this._prevEventDiff=-1,this._prevEvGestureSet=[])}},{key:"_onTouchStartEvent",value:function(e){this._prevTouchEvents[0]=e.touches.item(0),this._prevTouchEvents[1]=e.touches.item(1)}},{key:"_onTouchEndEvent",value:function(){this._prevTouchEvents=[]}},{key:"_onTouchMoveEvent",value:function(e){if(2===e.touches.length){if(2===this._prevTouchEvents.length){var t=[e.touches.item(0),e.touches.item(1)],n=kh(t,this._prevTouchEvents.splice(0),Eh),r=n.getScale();this._addToCommunicationQueue(Th[e.type],r,n.getFocusPoint(),e)}this._prevTouchEvents[0]=e.touches.item(0),this._prevTouchEvents[1]=e.touches.item(1)}}}],[{key:"getDefaultSettings",value:function(){return Ph}}])}(Qo);function jh(e){return jh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jh(e)}function Rh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Mh(r.key),r)}}function Mh(e){var t=function(e,t){if("object"!=jh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=jh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jh(t)?t:t+""}function Bh(e,t,n){return t=xh(t),function(e,t){if(t&&("object"==jh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ah()?Reflect.construct(t,n||[],xh(e).constructor):t.apply(e,n))}function Ah(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ah=function(){return!!e})()}function xh(e){return xh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xh(e)}function Dh(e,t){return Dh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Dh(e,t)}var Ih={load:0},Lh={configKey:"isScriptExecuteEve",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},Fh=["eventSequence","timestamp","eventType","scriptId","namespaceURI","outerHTML","scriptSource","scriptType"],Nh=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Bh(this,t))._onScriptExecuteEventFunc=r._onScriptExecuteEvent.bind(r),r._dataQueue=n,r._utils=e,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dh(e,t)}(t,e),function(e,t,n){return t&&Rh(e.prototype,t),n&&Rh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"_onScriptExecuteEvent",value:function(e){if(e&&e.target&&("load"!==e.type||"script"===e.target.nodeName.toLowerCase()))try{var t=this.getEventTimestamp(e),n=this._utils.StorageUtils.getAndUpdateEventSequenceNumber(),r=Ih[e.type];this._utils.isUndefinedNull(r)&&(r=-1),yt.isDebug()&&yt.trace("got event "+e.type+", "+r+", scriptSrc: "+e.target.src+" at time "+t),this._dataQueue.addToQueue("script_events",this._utils.convertToArrayByMap(Fh,{eventSequence:n,timestamp:t,eventType:r,scriptId:e.target.id||"",namespaceURI:e.target.namespaceURI||"",outerHTML:e.target.outerHTML||"",scriptSource:e.target.src||"",scriptType:e.target.type||""}))}catch(e){yt.error("error on getScriptExecuteEvent ".concat(e.toString()))}}},{key:"startFeature",value:function(){this._utils.addEventListener(document,"load",this._onScriptExecuteEventFunc,!0)}},{key:"stopFeature",value:function(){this._utils.removeEventListener(document,"load",this._onScriptExecuteEventFunc,!0)}}],[{key:"getDefaultSettings",value:function(){return Lh}}])}(Qo);function Uh(e){return Uh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uh(e)}function Wh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gh(r.key),r)}}function Gh(e){var t=function(e,t){if("object"!=Uh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Uh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Uh(t)?t:t+""}function Hh(e,t,n){return t=zh(t),function(e,t){if(t&&("object"==Uh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Qh()?Reflect.construct(t,n||[],zh(e).constructor):t.apply(e,n))}function Qh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Qh=function(){return!!e})()}function zh(e){return zh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zh(e)}function Vh(e,t){return Vh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vh(e,t)}var Kh={configKey:"isNetInfoEvents",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},qh=["eventSequence","timestamp","connectionType","effectiveType","downlinkMax","downlink","rtt","isSaveData"],Jh=function(e){function t(e,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:navigator.connection||navigator.mozConnection||navigator.webkitConnection;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Hh(this,t))._dataQueue=n,r._utils=e,r._connection=o,r._boundOnChangeNetworkInfo=r.onChangeNetworkInfo.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vh(e,t)}(t,e),function(e,t,n){return t&&Wh(e.prototype,t),n&&Wh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"onChangeNetworkInfo",value:function(){yt.debug("NetInfoEvents:onChangeNetworkInfo");var e=this._utils.isUndefinedNull(this._connection.saveData)?"":this._connection.saveData.toString(),t=this.getEventTimestamp(),n=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();this._dataQueue.addToQueue("net_info_events",this._utils.convertToArrayByMap(qh,{eventSequence:n,timestamp:t,connectionType:this._connection.type?this._connection.type:"",effectiveType:this._connection.effectiveType?this._connection.effectiveType:"",downlinkMax:this._connection.downlinkMax?this._connection.downlinkMax.toString():"",downlink:this._connection.downlink?this._connection.downlink.toString():"",rtt:this._connection.rtt?this._connection.rtt.toString():"",isSaveData:e}))}},{key:"startFeature",value:function(){this._connection&&(this._connection.addEventListener("change",this._boundOnChangeNetworkInfo,!0),this.onChangeNetworkInfo())}},{key:"stopFeature",value:function(){this._connection&&this._connection.removeEventListener("change",this._boundOnChangeNetworkInfo,!0)}}],[{key:"getDefaultSettings",value:function(){return Kh}}])}(Qo);function Yh(e){return Yh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yh(e)}function Xh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zh(r.key),r)}}function Zh(e){var t=function(e,t){if("object"!=Yh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Yh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yh(t)?t:t+""}function $h(e,t,n){return t=ty(t),function(e,t){if(t&&("object"==Yh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ey()?Reflect.construct(t,n||[],ty(e).constructor):t.apply(e,n))}function ey(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ey=function(){return!!e})()}function ty(e){return ty=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ty(e)}function ny(e,t){return ny=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ny(e,t)}var ry={configKey:"isDeviceOrientationEvents",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},oy={undefined:0,"portrait-primary":1,"landscape-primary":2,"portrait-secondary":3,"landscape-secondary":4},iy=["eventSequence","timestamp","orientation"],ay=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=$h(this,t))._dataQ=n,r._utils=e,r._onDeviceOrientationEventFunc=r._onDeviceOrientationEvent.bind(r),screen.mozOrientation&&screen.addEventListener?(r._eventTarget=screen,r._eventName="mozorientationchange"):screen.msOrientation&&screen.addEventListener?(r._eventTarget=screen,r._eventName="msorientationchange"):(r._eventTarget=window,r._eventName="orientationchange"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ny(e,t)}(t,e),function(e,t,n){return t&&Xh(e.prototype,t),n&&Xh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:function(){this._utils.addEventListener(this._eventTarget,this._eventName,this._onDeviceOrientationEventFunc),this._handleDeviceOrientationEvent(screen)}},{key:"stopFeature",value:function(){this._utils.removeEventListener(this._eventTarget,this._eventName,this._onDeviceOrientationEventFunc)}},{key:"_onDeviceOrientationEvent",value:function(e){var t;t=e&&e.target?e.target.screen||e.target:screen,this._handleDeviceOrientationEvent(t)}},{key:"_handleDeviceOrientationEvent",value:function(e){var t=e.mozOrientation||e.msOrientation||e.orientation;if(void 0!==t){var n=t.type||t,r=oy[n];if(void 0!==r){if(this._lastDeviceOrientationType!==r){var o=this.getEventTimestamp(),i=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();this._lastDeviceOrientationType=r,yt.trace("onDeviceOrientationEvent: Orientation changed to ".concat(r," at time ").concat(o)),this._dataQ.addToQueue("screen_orientation",this._utils.convertToArrayByMap(iy,{eventSequence:i,timestamp:o,orientation:r}))}}else yt.error("onDeviceOrientationEvent: Unknown orientation ".concat(n," value."))}else yt.debug("onDeviceOrientationEvent: Unable to find orientation data.")}}],[{key:"getDefaultSettings",value:function(){return ry}}])}(Qo);function uy(e){return uy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uy(e)}function sy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cy(r.key),r)}}function cy(e){var t=function(e,t){if("object"!=uy(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=uy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==uy(t)?t:t+""}function ly(e,t,n){return t=py(t),function(e,t){if(t&&("object"==uy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,fy()?Reflect.construct(t,n||[],py(e).constructor):t.apply(e,n))}function fy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(fy=function(){return!!e})()}function py(e){return py=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},py(e)}function hy(e,t){return hy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hy(e,t)}var yy={configKey:"isTapEvents",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!0,runInSlave:!0,runInLean:!0,runInUns:!1,isRunning:!1,instance:null},dy=["eventSequence","timestamp","screenX","screenY","pageX","pageY","clientX","clientY","isTrusted","elementHash","touchIndex","touchSizeMajor","touchSizeMinor"],my=["eventSequence","timestamp","screenX","screenY","pageX","pageY","clientX","clientY","isTrusted","elementHash","touchIndex","touchSizeMajor","touchSizeMinor"],vy=function(e){function t(e,n,r,o,i,a){var u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(u=ly(this,t))._configurationRepository=e,u._utils=n,u._dataQ=o,u._elements=r,u._activeTouchActions={},u._maskingService=i,u._tapMaxSlop=u._configurationRepository.get("tapEventsTapMaxSlop")||20,u._longPressTimeout=u._configurationRepository.get("tapEventsLongPressTimeout")||500,u._handleStartEventBind=u._handleStartEvent.bind(u),u._handleMoveEventBind=u._handleMoveEvent.bind(u),u._handleEndEventBind=u._handleEndEvent.bind(u),u._handleCancelEventBind=u._handleCancelEvent.bind(u),u._eventDefinitions=t.getSupportedTouchEvents(),u._maxShadowDepth=a.getMaxShadowDepth(),u._iframeLoadingTimeout=a.getIframeLoadingTimeout(),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hy(e,t)}(t,e),function(e,t,n){return t&&sy(e.prototype,t),n&&sy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:function(e){this._bind(e)}},{key:"stopFeature",value:function(e){this._unbind(e)}},{key:"updateFeatureConfig",value:function(){this._tapMaxSlop=void 0!==this._configurationRepository.get("tapEventsTapMaxSlop")?this._configurationRepository.get("tapEventsTapMaxSlop"):this._tapMaxSlop,this._longPressTimeout=void 0!==this._configurationRepository.get("tapEventsLongPressTimeout")?this._configurationRepository.get("tapEventsLongPressTimeout"):this._longPressTimeout}},{key:"_bind",value:function(e){var t=this;if(this._eventDefinitions){var n=e.getDocument();this._addEventListeners(n),e.collectAllElementsBySelectorAsync("iframe",this._maxShadowDepth,this._iframeLoadingTimeout).then(function(e){e.forEach(function(e){e&&e.contentDocument&&t._addEventListeners(e.contentDocument)})})}else yt.debug("TapEvents:_bind - No event definitions. Might be a legacy browser. Aborting bind operation.")}},{key:"_addEventListeners",value:function(e){this._utils.addEventListener(e,this._eventDefinitions.startEvent,this._handleStartEventBind),this._utils.addEventListener(e,this._eventDefinitions.moveEvent,this._handleMoveEventBind),this._utils.addEventListener(e,this._eventDefinitions.endEvent,this._handleEndEventBind),this._utils.addEventListener(e,this._eventDefinitions.cancelEvent,this._handleCancelEventBind)}},{key:"_unbind",value:function(e){var t=this;if(this._eventDefinitions){var n=e.getDocument();this._removeEventListeners(n),e.collectAllElementsBySelectorAsync("iframe",this._maxShadowDepth,this._iframeLoadingTimeout).then(function(e){e.forEach(function(e){e&&e.contentDocument&&t._removeEventListeners(e.contentDocument)})})}}},{key:"_removeEventListeners",value:function(e){this._utils.removeEventListener(e,this._eventDefinitions.startEvent,this._handleStartEventBind),this._utils.removeEventListener(e,this._eventDefinitions.moveEvent,this._handleMoveEventBind),this._utils.removeEventListener(e,this._eventDefinitions.endEvent,this._handleEndEventBind),this._utils.removeEventListener(e,this._eventDefinitions.cancelEvent,this._handleCancelEventBind)}},{key:"_handleStartEvent",value:function(e){for(var t=this._getEventData(e),n=0;n<t.length;n++)this._activeTouchActions[t[n].identifier]={startTime:this.getEventTimestamp(),startX:t[n].touchData.pageX,startY:t[n].touchData.pageY,offsetX:0,offsetY:0}}},{key:"_handleMoveEvent",value:function(e){for(var t=this._getEventData(e),n=0;n<t.length;n++){var r=this._activeTouchActions[t[n].identifier];r&&(r.offsetX=Math.abs(t[n].touchData.pageX-r.startX),r.offsetY=Math.abs(t[n].touchData.pageY-r.startY))}}},{key:"_handleEndEvent",value:function(e){for(var t=this._getEventData(e),n=0;n<t.length;n++){var r=this._activeTouchActions[t[n].identifier];r&&(r.offsetX<this._tapMaxSlop&&r.offsetY<this._tapMaxSlop&&(this.getEventTimestamp()-r.startTime<this._longPressTimeout?this._sendEvent("tap_events",dy,t[n].identifier,t[n].touchData,t[n].eventArgs):this._sendEvent("longpress_events",my,t[n].identifier,t[n].touchData,t[n].eventArgs)),delete this._activeTouchActions[t[n].identifier])}}},{key:"_handleCancelEvent",value:function(e){for(var t=this._getEventData(e),n=0;n<t.length;n++)delete this._activeTouchActions[t[n].identifier]}},{key:"_getEventData",value:function(e){if(void 0!==e.changedTouches){for(var t=[],n=0;n<e.changedTouches.length;n++){var r=e.changedTouches[n],o=r.identifier;t.push({identifier:o,touchData:r,eventArgs:e})}return t}if(null!=e.pointerType&&("touch"===e.pointerType||"pen"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_TOUCH||e.pointerType===e.MSPOINTER_TYPE_PEN))return[{identifier:e.pointerId?e.pointerId:0,touchData:e,eventArgs:e}];return[]}},{key:"_sendEvent",value:function(e,t,n,r,o){var i=this.getEventTimestamp(),a=zo[o.isTrusted],u=this._elements.getElementHashFromEvent(o),s=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();this._utils.isUndefinedNull(n)&&(n=0),this._dataQ.addToQueue(e,this._utils.convertToArrayByMap(t,{eventSequence:s,timestamp:i,screenX:this._maskingService.shouldMaskCoordinates()?Zo:r.screenX?Math.round(r.screenX):0,screenY:this._maskingService.shouldMaskCoordinates()?Zo:r.screenY?Math.round(r.screenY):0,pageX:this._maskingService.shouldMaskCoordinates()?Zo:r.pageX||0,pageY:this._maskingService.shouldMaskCoordinates()?Zo:r.pageY||0,clientX:this._maskingService.shouldMaskCoordinates()?Zo:r.clientX||0,clientY:this._maskingService.shouldMaskCoordinates()?Zo:r.clientY||0,isTrusted:a,elementHash:u,touchIndex:n%1e4,touchSizeMajor:r.radiusX?2*r.radiusX:0,touchSizeMinor:r.radiusY?2*r.radiusY:0}))}}],[{key:"getDefaultSettings",value:function(){return yy}},{key:"getSupportedTouchEvents",value:function(){return window.TouchEvent?{startEvent:"touchstart",moveEvent:"touchmove",endEvent:"touchend",cancelEvent:"touchcancel"}:window.PointerEvent?{startEvent:"pointerdown",moveEvent:"pointermove",endEvent:"pointerup",cancelEvent:"pointercancel"}:void yt.debug("TapEvents:_createEventsToListenList - No touch support for browser.")}}])}(Qo);function by(e){return by="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},by(e)}function gy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_y(r.key),r)}}function _y(e){var t=function(e,t){if("object"!=by(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=by(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==by(t)?t:t+""}function wy(e,t,n){return t=Ey(t),function(e,t){if(t&&("object"==by(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Sy()?Reflect.construct(t,n||[],Ey(e).constructor):t.apply(e,n))}function Sy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Sy=function(){return!!e})()}function Ey(e){return Ey=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ey(e)}function ky(e,t){return ky=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ky(e,t)}var Ty={configKey:"isStorageEvents",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!1,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},Py=0,Oy=["eventSequence","timestamp","keys","action","tabsOpened"],Cy=function(e){function t(e,n,r,o){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=wy(this,t))._utils=e,i._dataQ=r,i._elements=n,i._msgBus=o,i._onAllStorageEventBinded=i._onAllStorageEvent.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ky(e,t)}(t,e),function(e,t,n){return t&&gy(e.prototype,t),n&&gy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:function(e){this._bind(e)}},{key:"stopFeature",value:function(e){this._unbind(e)}},{key:"_addToCommunicationQueue",value:function(e,t,n,r,o){e===Py&&this._msgBus.publish("storageEvent",{action:e});var i=this.getEventTimestamp(o),a=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();this._dataQ.addToQueue("storage_events",this._utils.convertToArrayByMap(Oy,{eventSequence:a,timestamp:i,keys:t,action:n,tabsOpened:r}))}},{key:"_bind",value:function(e){var t,n=e.Context;if((n.localStorage||n.sessionStorage)&&(t=["storage"]),this._listeningToEvents=t,this._listeningToEvents.length>0)for(var r=0;r<this._listeningToEvents.length;r++)this._utils.addEventListener(n,this._listeningToEvents[r],this._onAllStorageEventBinded,!0)}},{key:"_unbind",value:function(e){if(this._listeningToEvents)for(var t=0;t<this._listeningToEvents.length;t++)this._utils.removeEventListener(e.Context,this._listeningToEvents[t],this._onAllStorageEventBinded,!0)}},{key:"_onAllStorageEvent",value:function(e){if("storage"===e.type)this._onStorageEvent(e);return!0}},{key:"_onStorageEvent",value:function(e){var t=!1,n=null,r=null;null===e.key&&(n=null),"string"==typeof e.key&&null===e.newValue?(n=e.key,r="delete"):(n=e.key,r="update");var o=this._utils.StorageUtils.getFromLocalStorage("cdTabList");o&&"object"===by(o[0])&&(t=!0),t=t?1:0,this._addToCommunicationQueue(e.type,n,r,t,e)}}],[{key:"getDefaultSettings",value:function(){return Ty}}])}(Qo);function jy(e){return jy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jy(e)}function Ry(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,My(r.key),r)}}function My(e){var t=function(e,t){if("object"!=jy(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=jy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jy(t)?t:t+""}function By(e,t,n){return t=xy(t),function(e,t){if(t&&("object"==jy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ay()?Reflect.construct(t,n||[],xy(e).constructor):t.apply(e,n))}function Ay(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ay=function(){return!!e})()}function xy(e){return xy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xy(e)}function Dy(e,t){return Dy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Dy(e,t)}var Iy={configKey:"isPrintEvents",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!1,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},Ly=1,Fy=0,Ny=["eventSequence","timestamp","printDialogState"],Uy=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=By(this,t))._utils=e,r._dataQueue=n,r._addToEventQueueFunc=r._addToEventQueue.bind(r),r._myAfterPrintFunc=r._myAfterPrint.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dy(e,t)}(t,e),function(e,t,n){return t&&Ry(e.prototype,t),n&&Ry(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"_myAfterPrint",value:function(){this._addToEventQueueFunc(Fy),window.removeEventListener("focus",this._myAfterPrintFunc)}},{key:"_onBeforePrintEvent",value:function(){this._addToEventQueueFunc(Ly),this._utils.addEventListener(window,"focus",this._myAfterPrintFunc.bind(this))}},{key:"_addToEventQueue",value:function(e){var t=this.getEventTimestamp(),n=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();this._dataQueue.addToQueue("print_events",this._utils.convertToArrayByMap(Ny,{eventSequence:n,timestamp:t,printDialogState:e}))}},{key:"startFeature",value:function(){this._utils.addEventListener(window,"beforeprint",this._onBeforePrintEvent.bind(this))}},{key:"stopFeature",value:function(){this._utils.removeEventListener(window,"beforeprint",this._onBeforePrintEvent.bind(this),!0)}}],[{key:"getDefaultSettings",value:function(){return Iy}}])}(Qo);function Wy(e){return Wy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wy(e)}function Gy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Hy(r.key),r)}}function Hy(e){var t=function(e,t){if("object"!=Wy(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Wy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Wy(t)?t:t+""}function Qy(e,t,n){return t=Vy(t),function(e,t){if(t&&("object"==Wy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,zy()?Reflect.construct(t,n||[],Vy(e).constructor):t.apply(e,n))}function zy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(zy=function(){return!!e})()}function Vy(e){return Vy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vy(e)}function Ky(e,t){return Ky=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ky(e,t)}var qy={configKey:"isLightSensor",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!1,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},Jy=["eventSequence","timestamp","illuminance"],Yy=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Qy(this,t))._dataQueue=e,o._utils=n,o._configurationRepository=r,o._eventThreshold=o._configurationRepository.get("lightSensorEventThreshold")||5e3,o._lastTime=0,o.onReadingSensorBoundble=o._onReadingSensor.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ky(e,t)}(t,e),function(e,t,n){return t&&Gy(e.prototype,t),n&&Gy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"_onReadingSensor",value:function(){var e=this.getEventTimestamp();if(e-this._lastTime>this._eventThreshold){var t=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();this._lastTime=e,this._dataQueue.addToQueue("ambient_light_level",this._utils.convertToArrayByMap(Jy,{eventSequence:t,timestamp:e,illuminance:this._sensor.illuminance}))}}},{key:"startFeature",value:function(){window.AmbientLightSensor?(yt.info("AmbientLightSensor exists and collected"),this._sensor=new AmbientLightSensor,this._sensor.addEventListener("reading",this.onReadingSensorBoundble,!0),this._sensor.addEventListener("error",t._onSensorError,!0),this._sensor.start()):yt.debug("LightSensor does not exist, not collecting")}},{key:"stopFeature",value:function(){this._sensor&&(this._sensor.removeEventListener("reading",this.onReadingSensorBoundble,!0),this._sensor.removeEventListener("error",t._onSensorError,!0),this._sensor.stop(),this._sensor=null)}},{key:"updateFeatureConfig",value:function(){this._eventThreshold=this._configurationRepository.get("lightSensorEventThreshold")?this._configurationRepository.get("lightSensorEventThreshold"):this._eventThreshold}}],[{key:"getDefaultSettings",value:function(){return qy}},{key:"_onSensorError",value:function(e){yt.debug("Error connecting LightSensor ".concat(e.error))}}])}(Qo);function Xy(e){return Xy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xy(e)}function Zy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,od(r.key),r)}}function $y(e,t,n){return t=td(t),function(e,t){if(t&&("object"==Xy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ed()?Reflect.construct(t,n||[],td(e).constructor):t.apply(e,n))}function ed(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ed=function(){return!!e})()}function td(e){return td=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},td(e)}function nd(e,t){return nd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nd(e,t)}function rd(e,t,n){return(t=od(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function od(e){var t=function(e,t){if("object"!=Xy(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Xy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xy(t)?t:t+""}var id={configKey:"isMouseEvents",isDefault:!0,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!0,runInSlave:!0,runInLean:!0,runInUns:!1,isRunning:!1,instance:null},ad={mousemove:0,mousedown:1,mouseup:2,click:3,dblclick:4,mouseleave:5,mouseenter:6,wheel:7,mouseout:8,mouseover:9},ud=["eventSequence","timestamp","eventType","isTrusted","elementHash","pageX","pageY","screenX","screenY","button","wheelDelta","clientX","clientY","eventDetail","buttonNew","relativeTime"],sd=function(e){function t(e,n,r,o,i,a){var u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),rd(u=$y(this,t),"_lastButton",void 0),rd(u,"_getMouseEvent",function(e){var t=e.which;"mouseup"===e.type?u._lastButton=t:"click"===e.type&&0===t&&(t=u._lastButton);var n=ad[e.type];u._utils.isUndefinedNull(n)&&(n=-1);var r=e.deltaY||e.deltaX||e.deltaZ||e.wheelDelta||0,o=u.getTimestampFromEvent(e);u._dataQueue.addToQueue("mouse_events",[null,u._utils.StorageUtils.getAndUpdateEventSequenceNumber(),u.getEventTimestamp(e),n,zo[e.isTrusted],"mousemove"===e.type?0:u._elements.getElementHashFromEvent(e),u._maskingService.shouldMaskCoordinates()?Zo:u._roundCoordinate(e.pageX),u._maskingService.shouldMaskCoordinates()?Zo:u._roundCoordinate(e.pageY),u._maskingService.shouldMaskCoordinates()?Zo:u._roundCoordinate(e.screenX),u._maskingService.shouldMaskCoordinates()?Zo:u._roundCoordinate(e.screenY),null==t?-1:t,Math.round(r),u._maskingService.shouldMaskCoordinates()?Zo:u._roundCoordinate(e.clientX),u._maskingService.shouldMaskCoordinates()?Zo:u._roundCoordinate(e.clientY),e.detail||0,null===e.button||void 0===e.button?-1:e.button,o])}),u._utils=e,u._domUtils=n,u._elements=r,u._dataQueue=o,u._maskingService=i,u._maxShadowDepth=a.getMaxShadowDepth(),u._iframeLoadingTimeout=a.getIframeLoadingTimeout(),u._listenedDocuments=new WeakSet,u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nd(e,t)}(t,e),function(e,t,n){return t&&Zy(e.prototype,t),n&&Zy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:function(e){var t=this;try{var n=e.getDocument();this._addEventListeners(e,n),e.collectAllElementsBySelectorAsync("iframe",this._maxShadowDepth,this._iframeLoadingTimeout).then(function(n){n.forEach(function(n){n&&n.contentDocument&&t._addEventListeners(e,n.contentDocument)})})}catch(e){yt.error("MouseEvents:startFeature failed. msg: ".concat(e.message),e)}}},{key:"stopFeature",value:function(e){var t=this;try{var n=e.getDocument();this._removeEventListeners(n),e.collectAllElementsBySelectorAsync("iframe",this._maxShadowDepth,this._iframeLoadingTimeout).then(function(e){e.forEach(function(e){e&&e.contentDocument&&t._removeEventListeners(e.contentDocument)})})}catch(e){yt.error("MouseEvents:stopFeature failed. msg: ".concat(e.message),e)}}},{key:"_addEventListeners",value:function(e,t){var n=this;this._listenedDocuments.has(t)||(this._listenedDocuments.add(t),this._domUtils.addEventListener(t,"mousemove",this._getMouseEvent,!0),this._domUtils.addEventListener(t,"mousedown",this._getMouseEvent,!0),this._domUtils.addEventListener(t,"mouseup",this._getMouseEvent,!0),this._domUtils.addEventListener(t,"click",this._getMouseEvent,!0),this._domUtils.addEventListener(t,"dblclick",this._getMouseEvent,!0),this._isIE=!!t.documentMode||/edge/.test(window.navigator.userAgent.toLowerCase()),this._isIE?this._domUtils.onDocumentBody(e.Context,function(){n._domUtils.addEventListener(t.body,"mouseleave",n._getMouseEvent),n._domUtils.addEventListener(t.body,"mouseenter",n._getMouseEvent)}):(this._domUtils.addEventListener(t,"mouseleave",this._getMouseEvent),this._domUtils.addEventListener(t,"mouseenter",this._getMouseEvent)),this._domUtils.addEventListener(t,"wheel",this._getMouseEvent,!0))}},{key:"_removeEventListeners",value:function(e){this._listenedDocuments.delete(e),this._domUtils.removeEventListener(e,"mousemove",this._getMouseEvent,!0),this._domUtils.removeEventListener(e,"mousedown",this._getMouseEvent,!0),this._domUtils.removeEventListener(e,"mouseup",this._getMouseEvent,!0),this._domUtils.removeEventListener(e,"click",this._getMouseEvent,!0),this._domUtils.removeEventListener(e,"dblclick",this._getMouseEvent,!0),this._isIE?(this._domUtils.removeEventListener(e.body,"mouseleave",this._getMouseEvent),this._domUtils.removeEventListener(e.body,"mouseenter",this._getMouseEvent)):(this._domUtils.removeEventListener(e,"mouseleave",this._getMouseEvent),this._domUtils.removeEventListener(e,"mouseenter",this._getMouseEvent)),this._domUtils.removeEventListener(e,"wheel",this._getMouseEvent,!0)}},{key:"_roundCoordinate",value:function(e){return e?Math.round(e):-1}}],[{key:"getDefaultSettings",value:function(){return id}}])}(Qo);function cd(e){return cd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cd(e)}function ld(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fd(r.key),r)}}function fd(e){var t=function(e,t){if("object"!=cd(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=cd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cd(t)?t:t+""}function pd(e,t,n){return t=yd(t),function(e,t){if(t&&("object"==cd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,hd()?Reflect.construct(t,n||[],yd(e).constructor):t.apply(e,n))}function hd(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(hd=function(){return!!e})()}function yd(e){return yd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yd(e)}function dd(e,t){return dd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dd(e,t)}var md={configKey:"isTabsEvents",isDefault:!0,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},vd=0,bd=1,gd=2,_d=["eventSequence","timestamp","type","id","href","referrer","currentTabsList"],wd=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=pd(this,t))._utils=e,r._currState=null,r._dataQueue=n,r._tabData={id:"",openTabTS:0},r._onUnloadTabBinded=r._onUnloadTab.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dd(e,t)}(t,e),function(e,t,n){return t&&ld(e.prototype,t),n&&ld(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:function(){yt.info("Starting tab events feature"),this._initTabInfo(),window.addEventListener("beforeunload",this._onUnloadTabBinded)}},{key:"stopFeature",value:function(){yt.info("Stopping tab events feature"),window.removeEventListener("beforeunload",this._onUnloadTabBinded)}},{key:"_initTabInfo",value:function(){var e=this._utils.StorageUtils.getFromLocalStorage("cdTabList");e||(e=[]);var t=vd;this._tabData=this._utils.StorageUtils.getFromSessionStorage("cdTabData")||this._tabData.id,this._tabData||(this._updateTabData(),t=bd);for(var n=-1,r=0,o=e.length;r<o;r++)if(e[r][0]===this._tabData.id){n=r;break}-1!==n&&n!==e.length||(e.push([this._tabData.id,this._tabData.openTabTS]),this._utils.StorageUtils.saveToLocalStorage("cdTabList",e),yt.debug("added tab to list. "+this._tabData.id+", tab index="+e.length));var i=this._utils.getDocUrl(),a=this._utils.StorageUtils.getAndUpdateEventSequenceNumber(),u=JSON.stringify(e);this._dataQueue.addToQueue("tab_events",this._utils.convertToArrayByMap(_d,{eventSequence:a,timestamp:this._tabData.openTabTS,type:t,id:this._tabData.id||"",href:i||"",referrer:this._utils.clearTextFromNumbers(document.referrer),currentTabsList:u||""}))}},{key:"_onUnloadTab",value:function(){var e=this._utils.StorageUtils.getFromLocalStorage("cdTabList");e||(e=[]);var t=this.getEventTimestamp(),n=this._utils.StorageUtils.getAndUpdateEventSequenceNumber(),r=this._utils.getDocUrl(),o=gd,i=JSON.stringify(e);yt.debug("removing tab from list. id:".concat(this._tabData.id,", timestamp:").concat(t)),this._dataQueue.addToQueue("tab_events",this._utils.convertToArrayByMap(_d,{eventSequence:n,timestamp:t,type:o,id:this._tabData.id||"",href:r||"",referrer:this._utils.clearTextFromNumbers(document.referrer),currentTabsList:i||""}),!0,!0);for(var a=0,u=e.length;a<u;a++)if(e[a][0]===this._tabData.id){e.splice(a,1);break}this._utils.StorageUtils.saveToLocalStorage("cdTabList",e)}},{key:"_updateTabData",value:function(){this._tabData={},this._tabData={id:this._utils.generateUUID(),openTabTS:this.getEventTimestamp()},yt.debug("initialize tab data: id:".concat(this._tabData.id,", timestamp:").concat(this._tabData.openTabTS)),this._utils.StorageUtils.saveToSessionStorage("cdTabData",this._tabData)}}],[{key:"getDefaultSettings",value:function(){return md}}])}(Qo);function Sd(e){return Sd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sd(e)}function Ed(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jd(r.key),r)}}function kd(e,t,n){return t=Pd(t),function(e,t){if(t&&("object"==Sd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Td()?Reflect.construct(t,n||[],Pd(e).constructor):t.apply(e,n))}function Td(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Td=function(){return!!e})()}function Pd(e){return Pd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pd(e)}function Od(e,t){return Od=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Od(e,t)}function Cd(e,t,n){return(t=jd(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jd(e){var t=function(e,t){if("object"!=Sd(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Sd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Sd(t)?t:t+""}var Rd={configKey:"isLocationEvents",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},Md=["eventSequence","timestamp","longitude","latitude","accuracy","speed","provider"],Bd=function(e){function t(e,n,r){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window.navigator;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Cd(o=kd(this,t),"_subscribeForLocationEvents",function(){o._unsubscribeFromLocationEvents(),o._watcherID=o._navigator.geolocation.watchPosition(o._onGeoLocationPositionEvent,o._onGeoLocationPositionError),o._clearLocationEventsTimeout(),o._locationEventsTimeoutID=setTimeout(function(){o._unsubscribeFromLocationEvents()})}),Cd(o,"_unsubscribeFromLocationEvents",function(){o._clearLocationEventsTimeout(),o._watcherID&&(o._navigator.geolocation.clearWatch(o._watcherID),o._watcherID=null)}),Cd(o,"_onGeoLocationPositionEvent",function(e){o._sendData(e)}),Cd(o,"_onGeoLocationPositionError",function(e){yt.warn("Failed getting geolocation with code ".concat(e.code,". ").concat(e.message))}),o._configurationRepository=r,o._locationEventsTimeoutMsec=o._configurationRepository.get(L),o._utils=n,o._dataQ=e,o._navigator=i,o._watcherID=null,o._locationEventsTimeoutID=null,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Od(e,t)}(t,e),function(e,t,n){return t&&Ed(e.prototype,t),n&&Ed(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:function(){this._subscribeForLocationIfPermissionGranted()}},{key:"stopFeature",value:function(){this._unsubscribeFromLocationEvents()}},{key:"updateFeatureConfig",value:function(){try{this._configurationRepository.get(L)!==this._locationEventsTimeoutMsec&&(this._locationEventsTimeoutMsec=this._configurationRepository.get(L))}catch(e){yt.error("LocationEvents: updateFeatureConfig failed, msg: ".concat(e.message),e)}}},{key:"_subscribeForLocationIfPermissionGranted",value:function(){var e=this;this._navigator.permissions&&this._navigator.permissions.query&&this._navigator.permissions.query({name:"geolocation"}).then(function(t){"granted"===t.state?e._subscribeForLocationEvents():yt.info("location permission is denied. Location data will not be collected")}).catch(function(e){yt.error("Failed querying for geolocation permission. ".concat(e.message))})}},{key:"_clearLocationEventsTimeout",value:function(){this._locationEventsTimeoutID&&clearTimeout(this._locationEventsTimeoutID),this._locationEventsTimeoutID=null}},{key:"_sendData",value:function(e){var t=e.coords,n=this._utils.StorageUtils.getAndUpdateEventSequenceNumber(),r=this.getEventTimestamp();this._dataQ.addToQueue("location_events",this._utils.convertToArrayByMap(Md,{eventSequence:n,timestamp:r,longitude:t.longitude||-1,latitude:t.latitude||-1,accuracy:t.accuracy||-1,speed:t.speed||-1,provider:""}))}}],[{key:"getDefaultSettings",value:function(){return Rd}}])}(Qo);function Ad(e){return Ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ad(e)}function xd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gd(r.key),r)}}function Dd(e,t,n){return t=Nd(t),function(e,t){if(t&&("object"==Ad(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Id()?Reflect.construct(t,n||[],Nd(e).constructor):t.apply(e,n))}function Id(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Id=function(){return!!e})()}function Ld(e,t,n,r){var o=Fd(Nd(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}function Fd(){return Fd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Nd(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Fd.apply(null,arguments)}function Nd(e){return Nd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nd(e)}function Ud(e,t){return Ud=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ud(e,t)}function Wd(e,t,n){return(t=Gd(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gd(e){var t=function(e,t){if("object"!=Ad(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ad(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ad(t)?t:t+""}var Hd=function(e){function t(e,n,r,o,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Wd(a=Dd(this,t),"_collectEventElement",function(e){var t=a._utils.StorageUtils.getAndUpdateEventSequenceNumber(),n=a.getEventTimestamp(),r=a.getTimestampFromEvent(e),o=a._maskingService.maskText(e.elementValue,e.elementId),i=$f[e.eventType];o&&o.length>a._maxElemValLength&&(o=""),a._dataQueue.addToQueue("element_events",a._utils.convertToArrayByMap(ep,{eventSequence:t,timestamp:n,eventType:i,isTrusted:-1,elementHash:e.hashCode,length:o.length,elementValues:o,selected:-1,hashedValue:"",relativeTime:r}))}),Wd(a,"_collectElement",function(e){if(!a._utils.isUndefinedNull(e.hashCode)&&!a._elementWMap.has(e.hashCode)){a._elementWMap.add(e.hashCode);var t=a._maskingService.maskAbsoluteIfRequired(e.elementId,e.elementId);a._dataQueue.addToQueue("elements",[a._contextMgr.contextHash,e.hashCode,"",t||"","",e.widgetType||"",e.dxPosition||0,e.dyPosition||0,e.widthElement||0,e.heightElement||0,"","","","","","",0,e.timeStamp,"","",""])}}),a._msgBus=e,a._dataQueue=n,a._utils=r,a._contextMgr=o,a._maskingService=i,a._elementWMap=new Set,a._maxElemValLength=200,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ud(e,t)}(t,e),function(e,t,n){return t&&xd(e.prototype,t),n&&xd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:function(){Ld(t,"startFeature",this,3)([]),this._msgBus.subscribe(Io.ElementEventsEvent,this._collectEventElement),this._msgBus.subscribe(Io.ElementsEvent,this._collectElement)}},{key:"stopFeature",value:function(){this._msgBus.unsubscribe(Io.ElementEventsEvent,this._collectEventElement),this._msgBus.unsubscribe(Io.ElementsEvent,this._collectElement),Ld(t,"stopFeature",this,3)([])}}])}(Qo);function Qd(e){return Qd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qd(e)}function zd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zd(r.key),r)}}function Vd(e,t,n){return t=Yd(t),function(e,t){if(t&&("object"==Qd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Kd()?Reflect.construct(t,n||[],Yd(e).constructor):t.apply(e,n))}function Kd(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Kd=function(){return!!e})()}function qd(e,t,n,r){var o=Jd(Yd(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}function Jd(){return Jd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Yd(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Jd.apply(null,arguments)}function Yd(e){return Yd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Yd(e)}function Xd(e,t){return Xd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xd(e,t)}function Zd(e){var t=function(e,t){if("object"!=Qd(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Qd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Qd(t)?t:t+""}var $d=function(e){function t(e,n,r,o){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){(t=Zd(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(i=Vd(this,t),"_onKeyEvent",function(e){var t=i._utils.StorageUtils.getAndUpdateEventSequenceNumber(),n=i.getEventTimestamp(),r=e.char,o=i._maskingService.maskKey(r,"",e.elementId),a=o.key.length>1?"":o.key,u=i.getTimestampFromEvent(e);i._dataQueue.addToQueue("key_events",i._utils.convertToArrayByMap(Oi,{eventSequence:t,timestamp:n,eventType:2,isTrusted:-1,elementHash:e.hashCode,charCode:o.charCode,character:a,keyComboType:-1,isCtrl:!1,isShift:!1,isAlt:!1,isMetaKey:!1,keyLocation:0,code:o.code||"",key:o.key||"",isRepeat:!1,keyRegion:"-1",relativeTime:u,isSameKey:-1}))}),i._msgBus=e,i._dataQueue=n,i._utils=r,i._maskingService=o,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xd(e,t)}(t,e),function(e,t,n){return t&&zd(e.prototype,t),n&&zd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:function(){qd(t,"startFeature",this,3)([]),this._msgBus.subscribe(Io.KeyEvent,this._onKeyEvent)}},{key:"stopFeature",value:function(){this._msgBus.unsubscribe(Io.KeyEvent,this._onKeyEvent),qd(t,"stopFeature",this,3)([])}}])}(Qo);function em(e){return em="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},em(e)}function tm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sm(r.key),r)}}function nm(e,t,n){return t=am(t),function(e,t){if(t&&("object"==em(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,rm()?Reflect.construct(t,n||[],am(e).constructor):t.apply(e,n))}function rm(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(rm=function(){return!!e})()}function om(e,t,n,r){var o=im(am(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}function im(){return im="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=am(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},im.apply(null,arguments)}function am(e){return am=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},am(e)}function um(e,t){return um=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},um(e,t)}function sm(e){var t=function(e,t){if("object"!=em(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=em(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==em(t)?t:t+""}var cm={onTapDown:0,onTapUp:2},lm=function(e){function t(e,n,r,o){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){(t=sm(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(i=nm(this,t),"_onTouchEvent",function(e){var t=cm[e.touchState];t!==cm.onTapDown&&t!==cm.onTapUp||i._msgBus.publish(Kr,{action:t});var n=i.getEventTimestamp(),r=i._utils.StorageUtils.getAndUpdateEventSequenceNumber(),o=i.getTimestampFromEvent(e);i._utils.isUndefinedNull(t)&&(t=-1),i._dataQueue.addToQueue("touch_events",i._utils.convertToArrayByMap(li,{eventSequence:r,timestamp:n,eventType:t,isTrusted:-1,elementHash:e.hashCode,clientX:i._maskingService.shouldMaskCoordinates()?Zo:e.x?Math.round(e.x):0,clientY:i._maskingService.shouldMaskCoordinates()?Zo:e.y?Math.round(e.y):0,touchIndex:e.pointer,touchSizeMajor:e.radiusMajor?2*e.radiusMajor:0,touchSizeMinor:e.radiusMinor?2*e.radiusMinor:0,pageX:0,pageY:0,screenX:0,screenY:0,relativeTime:o,touchPressure:e.pressure||-1}))}),i._msgBus=e,i._dataQueue=n,i._utils=r,i._maskingService=o,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&um(e,t)}(t,e),function(e,t,n){return t&&tm(e.prototype,t),n&&tm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:function(){om(t,"startFeature",this,3)([]),this._msgBus.subscribe(Io.TouchEvent,this._onTouchEvent)}},{key:"stopFeature",value:function(){this._msgBus.unsubscribe(Io.TouchEvent,this._onTouchEvent),om(t,"stopFeature",this,3)([])}}])}(Qo);function fm(e){return fm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fm(e)}function pm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gm(r.key),r)}}function hm(e,t,n){return t=vm(t),function(e,t){if(t&&("object"==fm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ym()?Reflect.construct(t,n||[],vm(e).constructor):t.apply(e,n))}function ym(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ym=function(){return!!e})()}function dm(e,t,n,r){var o=mm(vm(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}function mm(){return mm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=vm(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},mm.apply(null,arguments)}function vm(e){return vm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vm(e)}function bm(e,t){return bm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bm(e,t)}function gm(e){var t=function(e,t){if("object"!=fm(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fm(t)?t:t+""}var _m={mousemove:0,onTapDown:1,onTapUp:2},wm=function(e){function t(e,n,r,o,i,a){var u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){(t=gm(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(u=hm(this,t),"_onMouseEvent",function(e){var t=_m[e.type],n=u.getTimestampFromEvent(e);u._dataQueue.addToQueue("mouse_events",u._utils.convertToArrayByMap(ud,{eventSequence:u._utils.StorageUtils.getAndUpdateEventSequenceNumber(),timestamp:u.getEventTimestamp(),eventType:t,isTrusted:"mousemove"===e.type?zo[e.isTrusted]:-1,elementHash:"mousemove"===e.type?0:e.hashCode,pageX:u._resolveCoordinate(e.type,e.pageX),pageY:u._resolveCoordinate(e.type,e.pageY),screenX:u._maskingService.shouldMaskCoordinates()?Zo:u._roundCoordinate(e.screenX),screenY:u._maskingService.shouldMaskCoordinates()?Zo:u._roundCoordinate(e.screenY),button:0,wheelDelta:0,clientX:u._resolveCoordinate(e.type,e.clientX),clientY:u._resolveCoordinate(e.type,e.clientY),eventDetail:"mousemove"===e.type&&e.detail||0,buttonNew:0,relativeTime:n}))}),u._msgBus=e,u._dataQueue=n,u._utils=r,u._maskingService=o,u._domUtils=i,u._maxShadowDepth=a.getMaxShadowDepth(),u._iframeLoadingTimeout=a.getIframeLoadingTimeout(),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bm(e,t)}(t,e),function(e,t,n){return t&&pm(e.prototype,t),n&&pm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:function(e){var n=this;dm(t,"startFeature",this,3)([]);try{var r=e.getDocument();this._domUtils.addEventListener(r,"mousemove",this._onMouseEvent,!0),e.collectAllElementsBySelectorAsync("iframe",this._maxShadowDepth,this._iframeLoadingTimeout).then(function(e){e.forEach(function(e){n._domUtils.addEventListener(e.contentDocument,"mousemove",n._onMouseEvent,!0)})}),this._msgBus.subscribe(Io.MouseEvent,this._onMouseEvent)}catch(e){yt.error("MouseEvents:startFeature failed. msg: ".concat(e.message),e)}}},{key:"stopFeature",value:function(e){var n=this;try{var r=e.getDocument();this._domUtils.removeEventListener(r,"mousemove",this._onMouseEvent,!0),e.collectAllElementsBySelectorAsync("iframe",this._maxShadowDepth,this._iframeLoadingTimeout).then(function(e){e.forEach(function(e){n._domUtils.removeEventListener(e.contentDocument,"mousemove",n._onMouseEvent,!0)})}),this._msgBus.unsubscribe(Io.MouseEvent,this._onMouseEvent)}catch(e){yt.error("MouseEvents:stopFeature failed. msg: ".concat(e.message),e)}dm(t,"stopFeature",this,3)([])}},{key:"_resolveCoordinate",value:function(e,t){return"mousemove"===e?this._maskingService.shouldMaskCoordinates()?Zo:this._roundCoordinate(t):0}},{key:"_roundCoordinate",value:function(e){return e?Math.round(e):-1}}])}(Qo);function Sm(e){return Sm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sm(e)}function Em(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return km(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(km(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,km(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,km(f,"constructor",c),km(c,"constructor",s),s.displayName="GeneratorFunction",km(c,o,"GeneratorFunction"),km(f),km(f,o,"Generator"),km(f,r,function(){return this}),km(f,"toString",function(){return"[object Generator]"}),(Em=function(){return{w:i,m:p}})()}function km(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}km=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){km(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},km(e,t,n,r)}function Tm(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Pm(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Tm(i,r,o,a,u,"next",e)}function u(e){Tm(i,r,o,a,u,"throw",e)}a(void 0)})}}function Om(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Cm(r.key),r)}}function Cm(e){var t=function(e,t){if("object"!=Sm(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Sm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Sm(t)?t:t+""}function jm(e,t,n){return t=Mm(t),function(e,t){if(t&&("object"==Sm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Rm()?Reflect.construct(t,n||[],Mm(e).constructor):t.apply(e,n))}function Rm(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Rm=function(){return!!e})()}function Mm(e){return Mm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mm(e)}function Bm(e,t){return Bm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Bm(e,t)}var Am={configKey:"isBatteryStatusFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!1,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},xm=["eventSequence","timestamp","chargeLevel","isCharging","powerSource"],Dm=function(e){function t(e,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.navigator;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=jm(this,t))._dataQueue=e,r._utils=n,r._storageUtils=n.StorageUtils,r._navigator=o,r._battery=null,r._onLevelChangeEventFunc=r._onLevelChangeEventFunc.bind(r),r._onChargingChangeEventFunc=r._onChargingChangeEventFunc.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bm(e,t)}(t,e),function(e,t,n){return t&&Om(e.prototype,t),n&&Om(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:(r=Pm(Em().m(function e(){var t;return Em().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,this.getBatteryManager();case 1:return this._battery=e.v,this._setupEventListeners(),e.n=2,this._sendData();case 2:e.n=4;break;case 3:e.p=3,t=e.v,yt.error("Failed to start battery status collector: ".concat(t.message||t));case 4:return e.a(2)}},e,this,[[0,3]])})),function(){return r.apply(this,arguments)})},{key:"stopFeature",value:function(){this._cleanupEventListeners(),this._battery=null}},{key:"_setupEventListeners",value:function(){this._battery&&(this._battery.addEventListener("levelchange",this._onLevelChangeEventFunc),this._battery.addEventListener("chargingchange",this._onChargingChangeEventFunc))}},{key:"_cleanupEventListeners",value:function(){this._battery&&(this._battery.removeEventListener("levelchange",this._onLevelChangeEventFunc),this._battery.removeEventListener("chargingchange",this._onChargingChangeEventFunc))}},{key:"getBatteryManager",value:(n=Pm(Em().m(function e(){var t;return Em().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,this._navigator.getBattery();case 1:return e.a(2,e.v);case 2:throw e.p=2,t=e.v,new Error("Failed to get battery manager: ".concat(t.message||t));case 3:return e.a(2)}},e,this,[[0,2]])})),function(){return n.apply(this,arguments)})},{key:"_onLevelChangeEventFunc",value:function(e){this._sendData(e.currentTarget)}},{key:"_onChargingChangeEventFunc",value:function(e){this._sendData(e.currentTarget)}},{key:"_sendData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._battery;if(e){var t=this._storageUtils.getAndUpdateEventSequenceNumber(),n=this._utils.dateNow();this._dataQueue.addToQueue("battery_status",this._utils.convertToArrayByMap(xm,{eventSequence:t,timestamp:n,chargeLevel:e.level,isCharging:e.charging,powerSource:0}))}}}],[{key:"getDefaultSettings",value:function(){return Am}}]);var n,r}(Qo);function Im(e){return Im="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Im(e)}function Lm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fm(r.key),r)}}function Fm(e){var t=function(e,t){if("object"!=Im(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Im(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Im(t)?t:t+""}var Nm=function(){return function(e,t,n){return t&&Lm(e.prototype,t),n&&Lm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},[{key:"validateParams",value:function(){throw new Error("_validateParams should be overridden")}},{key:"buildQueueMessage",value:function(){throw new Error("buildQueueMessage should be overridden")}},{key:"validateMessage",value:function(){throw new Error("_validateMessage should be overridden")}},{key:"getName",value:function(){throw new Error("_getName should be overridden")}}])}();function Um(e){return Um="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Um(e)}function Wm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gm(r.key),r)}}function Gm(e){var t=function(e,t){if("object"!=Um(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Um(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Um(t)?t:t+""}function Hm(e,t,n){return t=zm(t),function(e,t){if(t&&("object"==Um(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Qm()?Reflect.construct(t,n||[],zm(e).constructor):t.apply(e,n))}function Qm(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Qm=function(){return!!e})()}function zm(e){return zm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zm(e)}function Vm(e,t){return Vm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vm(e,t)}var Km=function(e){function t(e,n,r,o,i,a,u){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=Hm(this,t)).validateParams(e,n,r,o,i,a,u),s.isChrome=e,s.isFirefox=n,s.isEdge=r,s.isIE=o,s.isSafari=i,s.isOpera=a,s.isBlink=u,s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vm(e,t)}(t,e),function(e,t,n){return t&&Wm(e.prototype,t),n&&Wm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e,t,n,r,o,i,a){"boolean"==typeof e&&"boolean"==typeof t&&"boolean"==typeof n&&"boolean"==typeof r&&"boolean"==typeof o&&"boolean"==typeof i&&"boolean"==typeof a||yt.warn("wrong type in Per, BrowserDetectContract, parameters. isChrome : {expected: boolean, received: ".concat(Um(e),"},\n            isFirefox : {expected: boolean, received: ").concat(Um(t),"},isEdge : {expected: boolean, received: ").concat(Um(n),"},isIE : {expected: boolean, received: ").concat(Um(r),"},\n            isSafari : {expected: boolean, received: ").concat(Um(o),"},isOpera : {expected: boolean, received: ").concat(Um(i),"} ,isBlink : {expected: boolean, received: ").concat(Um(a),"}"))}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),[this.isChrome,this.isFirefox,this.isEdge,this.isIE,this.isSafari,this.isOpera,this.isBlink]];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&Array.isArray(e[1])&&7===e[1].length||yt.warn("BrowserDetect - Contract verification failed")}},{key:"getName",value:function(){return"browser_spoofing"}}])}(Nm);function qm(e){return qm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qm(e)}function Jm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ym(r.key),r)}}function Ym(e){var t=function(e,t){if("object"!=qm(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qm(t)?t:t+""}function Xm(e,t,n){return t=$m(t),function(e,t){if(t&&("object"==qm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Zm()?Reflect.construct(t,n||[],$m(e).constructor):t.apply(e,n))}function Zm(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Zm=function(){return!!e})()}function $m(e){return $m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$m(e)}function ev(e,t){return ev=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ev(e,t)}var tv={configKey:"isBrowserDetect",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!0,isFrameRelated:!1,runInUns:!0,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},nv=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Xm(this,t))._dataQ=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ev(e,t)}(t,e),function(e,t,n){return t&&Jm(e.prototype,t),n&&Jm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:function(){var e=!1,t=!1,n=!1,r=!1,o=!1,i=!1,a=!1;if(this.doesUserAagentDataExists())navigator.userAgentData.brands.forEach(function(r){"Google Chrome"===r.brand&&(e=!0),"Opera"===r.brand&&(t=!0),"Microsoft Edge"===r.brand&&(i=!0),"Firefox"===r.brand&&(n=!0)}),navigator.userAgentData.platform&&(r="macOS"===navigator.userAgentData.platform&&!e&&!i&&!t&&/Safari/.test(navigator.userAgent)),a=e||t;else{var u=navigator.userAgent;t=/OPR|Opera/.test(u),n=/Firefox/.test(u),r=/Safari/.test(u)&&/Apple Computer/.test(navigator.vendor),o=/MSIE|Trident/.test(u),i=/Edg/.test(u),a=((e=/Chrome/.test(u)&&!i&&!t&&/Google Inc/.test(navigator.vendor))||t)&&!!window.CSS}var s=new Km(e,n,i,o,r,t,a).buildQueueMessage();this._dataQ.addToQueue("static_fields",s,!1)}},{key:"doesUserAagentDataExists",value:function(){return navigator.userAgentData&&navigator.userAgentData.brands&&navigator.userAgentData.brands.length>0}}],[{key:"getDefaultSettings",value:function(){return tv}}])}(Qo);function rv(e){return rv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rv(e)}function ov(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,iv(r.key),r)}}function iv(e){var t=function(e,t){if("object"!=rv(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=rv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rv(t)?t:t+""}function av(e,t,n){return t=sv(t),function(e,t){if(t&&("object"==rv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,uv()?Reflect.construct(t,n||[],sv(e).constructor):t.apply(e,n))}function uv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(uv=function(){return!!e})()}function sv(e){return sv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sv(e)}function cv(e,t){return cv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cv(e,t)}var lv=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=av(this,t)).validateParams(e),n.scriptVersion=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cv(e,t)}(t,e),function(e,t,n){return t&&ov(e.prototype,t),n&&ov(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e){"string"==typeof e||yt.warn(" wrong type in VersionClient, BrowserProps parameters. scriptVersion : {expected: string, received: ".concat(rv(e),"}"))}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),this.scriptVersion];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&"string"==typeof e[1]||yt.warn("version_client, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"version_client"}}])}(Nm);function fv(e){return fv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fv(e)}function pv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hv(r.key),r)}}function hv(e){var t=function(e,t){if("object"!=fv(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fv(t)?t:t+""}function yv(e,t,n){return t=mv(t),function(e,t){if(t&&("object"==fv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,dv()?Reflect.construct(t,n||[],mv(e).constructor):t.apply(e,n))}function dv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(dv=function(){return!!e})()}function mv(e){return mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mv(e)}function vv(e,t){return vv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vv(e,t)}var bv=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=yv(this,t)).validateParams(e),n.source=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vv(e,t)}(t,e),function(e,t,n){return t&&pv(e.prototype,t),n&&pv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e){"string"==typeof e||yt.warn(" wrong type in DeviceSource, BrowserProps parameters. source : {expected: string, received: ".concat(fv(e),"}"))}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),this.source];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&"string"==typeof e[1]||yt.warn("device_source, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"device_source"}}])}(Nm);function gv(e){return gv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gv(e)}function _v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wv(r.key),r)}}function wv(e){var t=function(e,t){if("object"!=gv(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=gv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gv(t)?t:t+""}function Sv(e,t,n){return t=kv(t),function(e,t){if(t&&("object"==gv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ev()?Reflect.construct(t,n||[],kv(e).constructor):t.apply(e,n))}function Ev(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ev=function(){return!!e})()}function kv(e){return kv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kv(e)}function Tv(e,t){return Tv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Tv(e,t)}var Pv=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Sv(this,t)).validateParams(e),n.platform=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tv(e,t)}(t,e),function(e,t,n){return t&&_v(e.prototype,t),n&&_v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e){"string"==typeof e||yt.warn(" wrong type in OS, BrowserProps parameters. platform : {expected: string, received: ".concat(gv(e),"}"))}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),this.platform];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&"string"==typeof e[1]||yt.warn("os, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"os"}}])}(Nm);function Ov(e){return Ov="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ov(e)}function Cv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jv(r.key),r)}}function jv(e){var t=function(e,t){if("object"!=Ov(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ov(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ov(t)?t:t+""}function Rv(e,t,n){return t=Bv(t),function(e,t){if(t&&("object"==Ov(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Mv()?Reflect.construct(t,n||[],Bv(e).constructor):t.apply(e,n))}function Mv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Mv=function(){return!!e})()}function Bv(e){return Bv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bv(e)}function Av(e,t){return Av=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Av(e,t)}var xv=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Rv(this,t)).validateParams(e),n.version=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Av(e,t)}(t,e),function(e,t,n){return t&&Cv(e.prototype,t),n&&Cv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e){"number"==typeof e||null===e||yt.warn(" wrong type in OSVersion, BrowserProps parameters. version : {expected: number, received: ".concat(Ov(e),"}"))}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),this.version];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&("number"==typeof e[1]||null===e[1])||yt.warn("os_version, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"os_version"}}])}(Nm);function Dv(e){return Dv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dv(e)}function Iv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Lv(r.key),r)}}function Lv(e){var t=function(e,t){if("object"!=Dv(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Dv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Dv(t)?t:t+""}function Fv(e,t,n){return t=Uv(t),function(e,t){if(t&&("object"==Dv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Nv()?Reflect.construct(t,n||[],Uv(e).constructor):t.apply(e,n))}function Nv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Nv=function(){return!!e})()}function Uv(e){return Uv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Uv(e)}function Wv(e,t){return Wv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wv(e,t)}var Gv=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Fv(this,t)).validateParams(e),n.osName=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wv(e,t)}(t,e),function(e,t,n){return t&&Iv(e.prototype,t),n&&Iv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e){"string"==typeof e||yt.warn(" wrong type in OSFamily, BrowserProps parameters. osName : {expected: string, received: ".concat(Dv(e),"}"))}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),this.osName];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&"string"==typeof e[1]||yt.warn("os_family, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"os_family"}}])}(Nm);function Hv(e){return Hv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hv(e)}function Qv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zv(r.key),r)}}function zv(e){var t=function(e,t){if("object"!=Hv(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Hv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Hv(t)?t:t+""}function Vv(e,t,n){return t=qv(t),function(e,t){if(t&&("object"==Hv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Kv()?Reflect.construct(t,n||[],qv(e).constructor):t.apply(e,n))}function Kv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Kv=function(){return!!e})()}function qv(e){return qv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qv(e)}function Jv(e,t){return Jv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Jv(e,t)}var Yv=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Vv(this,t)).validateParams(e,n),r.pointer=e,r.hover=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jv(e,t)}(t,e),function(e,t,n){return t&&Qv(e.prototype,t),n&&Qv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e,t){!("number"!=typeof e||1!==e&&2!==e&&3!==e&&4!==e&&5!==e||"number"!=typeof t||1!==t&&2!==t&&3!==t&&4!==t&&5!==t)||yt.warn(" wrong type in InputMech, BrowserProps parameters. pointer : {expected: number, received: ".concat(Hv(e),"}, hover : {expected: number, received: ").concat(Hv(t),"}"))}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),[this.pointer,this.hover]];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&Array.isArray(e[1])&&2===e[1].length||yt.warn("input_mech, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"input_mech"}}])}(Nm);function Xv(e){return Xv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xv(e)}function Zv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$v(r.key),r)}}function $v(e){var t=function(e,t){if("object"!=Xv(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Xv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xv(t)?t:t+""}function eb(e,t,n){return t=nb(t),function(e,t){if(t&&("object"==Xv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,tb()?Reflect.construct(t,n||[],nb(e).constructor):t.apply(e,n))}function tb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(tb=function(){return!!e})()}function nb(e){return nb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nb(e)}function rb(e,t){return rb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rb(e,t)}var ob=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=eb(this,t)).validateParams(e),n.hardwareConcurrency=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rb(e,t)}(t,e),function(e,t,n){return t&&Zv(e.prototype,t),n&&Zv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e){"number"==typeof e||yt.warn("wrong type in cores, BrowserProps parameters. hardwareConcurrency : {expected: number, received: ".concat(Xv(e),"}"))}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),this.hardwareConcurrency];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&"number"==typeof e[1]||yt.warn("cores,BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"cores"}}])}(Nm);function ib(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ab(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ab(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function ab(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ub(e){return ub="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ub(e)}function sb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cb(r.key),r)}}function cb(e){var t=function(e,t){if("object"!=ub(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ub(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ub(t)?t:t+""}function lb(e,t,n){return t=pb(t),function(e,t){if(t&&("object"==ub(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,fb()?Reflect.construct(t,n||[],pb(e).constructor):t.apply(e,n))}function fb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(fb=function(){return!!e})()}function pb(e){return pb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pb(e)}function hb(e,t){return hb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hb(e,t)}var yb=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=lb(this,t)).validateParams(e),n.plugins=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hb(e,t)}(t,e),function(e,t,n){return t&&sb(e.prototype,t),n&&sb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e){Array.isArray(e)&&this._eachPluginIsValid(e)||yt.warn(" wrong type in plugins, BrowserProps parameters. plugins : {expected: [[...string]], received: ".concat(ub(e),"}"))}},{key:"_eachPluginIsValid",value:function(e){var t,n=!0,r=!0,o=!0,i=ib(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(Array.isArray(a)){4!==a.length&&(o=!1);var u,s=ib(a);try{for(s.s();!(u=s.n()).done;){"string"!=typeof u.value&&(r=!1)}}catch(e){s.e(e)}finally{s.f()}}else n=!1}}catch(e){i.e(e)}finally{i.f()}return n&&o&&r}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),this.plugins];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&Array.isArray(e[1])||yt.warn("plugins, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"plugins"}}])}(Nm);function db(e){return db="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},db(e)}function mb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vb(r.key),r)}}function vb(e){var t=function(e,t){if("object"!=db(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=db(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==db(t)?t:t+""}function bb(e,t,n){return t=_b(t),function(e,t){if(t&&("object"==db(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,gb()?Reflect.construct(t,n||[],_b(e).constructor):t.apply(e,n))}function gb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(gb=function(){return!!e})()}function _b(e){return _b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_b(e)}function wb(e,t){return wb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wb(e,t)}var Sb=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=bb(this,t)).validateParams(e),n.userAgent=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wb(e,t)}(t,e),function(e,t,n){return t&&mb(e.prototype,t),n&&mb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e){"string"==typeof e||yt.warn("wrong type in JsUa, BrowserProps parameters. userAgent : {expected: string, received: ".concat(db(e),"}"))}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),this.userAgent];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&"string"==typeof e[1]||yt.warn("js_ua, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"js_ua"}}])}(Nm);function Eb(e){return Eb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eb(e)}function kb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Tb(r.key),r)}}function Tb(e){var t=function(e,t){if("object"!=Eb(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Eb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Eb(t)?t:t+""}function Pb(e,t,n){return t=Cb(t),function(e,t){if(t&&("object"==Eb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ob()?Reflect.construct(t,n||[],Cb(e).constructor):t.apply(e,n))}function Ob(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ob=function(){return!!e})()}function Cb(e){return Cb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Cb(e)}function jb(e,t){return jb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jb(e,t)}var Rb=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Pb(this,t)).validateParams(e),n.tz=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jb(e,t)}(t,e),function(e,t,n){return t&&kb(e.prototype,t),n&&kb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e){"number"==typeof e||yt.warn("wrong type in TimeZone, BrowserProps parameters. tz : {expected: string, received: ".concat(Eb(e),"}"))}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),this.tz];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&"number"==typeof e[1]||yt.warn("time_zone, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"time_zone"}}])}(Nm);function Mb(e){return Mb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mb(e)}function Bb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ab(r.key),r)}}function Ab(e){var t=function(e,t){if("object"!=Mb(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Mb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Mb(t)?t:t+""}function xb(e,t,n){return t=Ib(t),function(e,t){if(t&&("object"==Mb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Db()?Reflect.construct(t,n||[],Ib(e).constructor):t.apply(e,n))}function Db(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Db=function(){return!!e})()}function Ib(e){return Ib=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ib(e)}function Lb(e,t){return Lb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Lb(e,t)}var Fb=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=xb(this,t)).validateParams(e),n.isCookie=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lb(e,t)}(t,e),function(e,t,n){return t&&Bb(e.prototype,t),n&&Bb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e){"boolean"==typeof e||yt.warn("wrong type in CookieEnabled, BrowserProps parameters. isCookie : {expected: boolean, received: ".concat(Mb(e),"}"))}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),this.isCookie];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&"boolean"==typeof e[1]||yt.warn("CookieEnabled,BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"cookie_enabled"}}])}(Nm);function Nb(e){return Nb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nb(e)}function Ub(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Wb(r.key),r)}}function Wb(e){var t=function(e,t){if("object"!=Nb(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Nb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Nb(t)?t:t+""}function Gb(e,t,n){return t=Qb(t),function(e,t){if(t&&("object"==Nb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Hb()?Reflect.construct(t,n||[],Qb(e).constructor):t.apply(e,n))}function Hb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Hb=function(){return!!e})()}function Qb(e){return Qb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qb(e)}function zb(e,t){return zb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zb(e,t)}var Vb=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Gb(this,t)).validateParams(e),n.memory=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zb(e,t)}(t,e),function(e,t,n){return t&&Ub(e.prototype,t),n&&Ub(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e){"number"==typeof e&&(.25===e||.5===e||1===e||2===e||4===e||8===e||0===e)||yt.warn("wrong type in DeviceMemoryBrowser, BrowserProps parameters. memory : {expected: number in {0.25, 0.5, 1, 2, 4, 8, 0} received: type:".concat(Nb(e)," value:").concat(e,"}"))}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),this.memory];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&"number"==typeof e[1]||yt.warn("device_memory, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"device_memory"}}])}(Nm);function Kb(e){return Kb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kb(e)}function qb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Jb(r.key),r)}}function Jb(e){var t=function(e,t){if("object"!=Kb(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Kb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Kb(t)?t:t+""}function Yb(e,t,n){return t=Zb(t),function(e,t){if(t&&("object"==Kb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Xb()?Reflect.construct(t,n||[],Zb(e).constructor):t.apply(e,n))}function Xb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Xb=function(){return!!e})()}function Zb(e){return Zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Zb(e)}function $b(e,t){return $b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$b(e,t)}var eg=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Yb(this,t)).validateParams(e),n.language=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$b(e,t)}(t,e),function(e,t,n){return t&&qb(e.prototype,t),n&&qb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e){"string"==typeof e||yt.warn(" wrong type in Lang, BrowserProps parameters. language : {expected: string, received: ".concat(Kb(e),"}"))}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),this.language];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&"string"==typeof e[1]||yt.warn("main_lang, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"main_lang"}}])}(Nm);function tg(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ng(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ng(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function ng(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function rg(e){return rg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rg(e)}function og(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ig(r.key),r)}}function ig(e){var t=function(e,t){if("object"!=rg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=rg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rg(t)?t:t+""}function ag(e,t,n){return t=sg(t),function(e,t){if(t&&("object"==rg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ug()?Reflect.construct(t,n||[],sg(e).constructor):t.apply(e,n))}function ug(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ug=function(){return!!e})()}function sg(e){return sg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sg(e)}function cg(e,t){return cg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cg(e,t)}var lg=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ag(this,t)).validateParams(e),n.languagesList=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cg(e,t)}(t,e),function(e,t,n){return t&&og(e.prototype,t),n&&og(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e){Array.isArray(e)&&this._eachLangIsValid(e)||yt.warn(" wrong type in LanguagesList, BrowserProps parameters. languagesList : {expected: [...string], received: ".concat(rg(e),"}"))}},{key:"_eachLangIsValid",value:function(e){var t,n=!0,r=tg(e);try{for(r.s();!(t=r.n()).done;){"string"!=typeof t.value&&(n=!1)}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),this.languagesList];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&Array.isArray(e[1])||yt.warn("languages, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"languages"}}])}(Nm);function fg(e){return fg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fg(e)}function pg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hg(r.key),r)}}function hg(e){var t=function(e,t){if("object"!=fg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fg(t)?t:t+""}function yg(e,t,n){return t=mg(t),function(e,t){if(t&&("object"==fg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,dg()?Reflect.construct(t,n||[],mg(e).constructor):t.apply(e,n))}function dg(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(dg=function(){return!!e})()}function mg(e){return mg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mg(e)}function vg(e,t){return vg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vg(e,t)}var bg=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=yg(this,t)).validateParams(e),n.buildID=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vg(e,t)}(t,e),function(e,t,n){return t&&pg(e.prototype,t),n&&pg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e){void 0!==e&&"string"==typeof e||yt.warn("The buildID is either undefined or of a wrong type. Expected string, received: ".concat(fg(e)))}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),this.buildID];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&"string"==typeof e[1]||yt.warn("navigator_build_id, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"navigator_build_id"}}])}(Nm);function gg(e){return gg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gg(e)}function _g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wg(r.key),r)}}function wg(e){var t=function(e,t){if("object"!=gg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=gg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gg(t)?t:t+""}function Sg(e,t,n){return t=kg(t),function(e,t){if(t&&("object"==gg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Eg()?Reflect.construct(t,n||[],kg(e).constructor):t.apply(e,n))}function Eg(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Eg=function(){return!!e})()}function kg(e){return kg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kg(e)}function Tg(e,t){return Tg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Tg(e,t)}var Pg=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Sg(this,t)).validateParams(e),n.maxTouchPoints=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tg(e,t)}(t,e),function(e,t,n){return t&&_g(e.prototype,t),n&&_g(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e){void 0!==e&&"number"==typeof e||yt.warn("wrong type in MaxTouchPointsContract parameters. Expected: number, received: ".concat(gg(e)))}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),this.maxTouchPoints];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&"number"==typeof e[1]||yt.warn("navigator_max_touch_points, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"navigator_max_touch_points"}}])}(Nm);function Og(e){return Og="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Og(e)}function Cg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jg(r.key),r)}}function jg(e){var t=function(e,t){if("object"!=Og(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Og(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Og(t)?t:t+""}function Rg(e,t,n){return t=Bg(t),function(e,t){if(t&&("object"==Og(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Mg()?Reflect.construct(t,n||[],Bg(e).constructor):t.apply(e,n))}function Mg(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Mg=function(){return!!e})()}function Bg(e){return Bg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bg(e)}function Ag(e,t){return Ag=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ag(e,t)}var xg=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Rg(this,t)).validateParams(e),n.math=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ag(e,t)}(t,e),function(e,t,n){return t&&Cg(e.prototype,t),n&&Cg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e){"string"==typeof e||yt.warn("wrong type in MathDetect parameters. renderer: {expected: string, received: ".concat(Og(e),"}"))}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),this.math];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&"string"==typeof e[1]||yt.warn("MathDetect - Contract verification failed")}},{key:"getName",value:function(){return"math_detect"}}])}(Nm);function Dg(e){return Dg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dg(e)}function Ig(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Lg(r.key),r)}}function Lg(e){var t=function(e,t){if("object"!=Dg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Dg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Dg(t)?t:t+""}function Fg(e,t,n){return t=Ug(t),function(e,t){if(t&&("object"==Dg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ng()?Reflect.construct(t,n||[],Ug(e).constructor):t.apply(e,n))}function Ng(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ng=function(){return!!e})()}function Ug(e){return Ug=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ug(e)}function Wg(e,t){return Wg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wg(e,t)}var Gg=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Fg(this,t)).validateParams(e),n.browserDisplay=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wg(e,t)}(t,e),function(e,t,n){return t&&Ig(e.prototype,t),n&&Ig(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e){"string"==typeof e||yt.warn("wrong type in BrowserDisplay, BrowserProps parameters. BrowserDisplay : {expected: string, received: ".concat(Dg(e),"}"))}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),this.browserDisplay];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&"string"==typeof e[1]||yt.warn("TransparencyReduced, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"browser_display_detect"}}])}(Nm);function Hg(e){return Hg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hg(e)}function Qg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zg(r.key),r)}}function zg(e){var t=function(e,t){if("object"!=Hg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Hg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Hg(t)?t:t+""}function Vg(e,t,n){return t=qg(t),function(e,t){if(t&&("object"==Hg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Kg()?Reflect.construct(t,n||[],qg(e).constructor):t.apply(e,n))}function Kg(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Kg=function(){return!!e})()}function qg(e){return qg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qg(e)}function Jg(e,t){return Jg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Jg(e,t)}var Yg={configKey:"collectBrowserProps",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!0,isFrameRelated:!1,runInUns:!0,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},Xg=function(e){function t(e,n,r,o,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=Vg(this,t))._dataQ=e,a._pointerHoverDetector=n,a._utils=r,a._configurationRepository=o,a._configurations=i,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jg(e,t)}(t,e),function(e,t,n){return t&&Qg(e.prototype,t),n&&Qg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:function(){var e=this;yt.info("Collecting Browser Props");var n=new lv(this._utils.scriptVersion).buildQueueMessage();this._dataQ.addToQueue("static_fields",n,!1);var r=new bv("js").buildQueueMessage();this._dataQ.addToQueue("static_fields",r,!1),yt.info("SDK Version is ".concat(this._utils.scriptVersion));var o=t.getLanguage();if(o){this._configurationRepository.get("browserPropsShouldHashLanguageField")&&(yt.debug("Hashing language field according to configuration"),o=this._utils.getHash(o).toString());var i=new eg(o).buildQueueMessage();this._dataQ.addToQueue("static_fields",i,!1)}var a=new Pv(t.getAvailablePlatform(window.navigator)).buildQueueMessage();this._dataQ.addToQueue("static_fields",a,!1);var u=t.getOperatingSystem(),s=new xv(u.version).buildQueueMessage();this._dataQ.addToQueue("static_fields",s,!1);var c=new Gv(u.name).buildQueueMessage();this._dataQ.addToQueue("static_fields",c,!1);var l=this._pointerHoverDetector.getPointerHover(),f=new Yv(l.pointer,l.hover).buildQueueMessage();this._dataQ.addToQueue("static_fields",f,!1);var p=new ob(window.navigator.hardwareConcurrency||0).buildQueueMessage();if(this._dataQ.addToQueue("static_fields",p,!1),navigator.languages){var h=navigator.languages;this._configurationRepository.get("browserPropsShouldHashLanguageField")&&(yt.debug("Hashing languages field according to configuration"),h=Array.from(h,function(t){return e._utils.getHash(t).toString()}));var y=new lg(h).buildQueueMessage();this._dataQ.addToQueue("static_fields",y,!1)}var d=t.getPlugins();if(d&&d.length>0){var m=new yb(d).buildQueueMessage();this._dataQ.addToQueue("static_fields",m,!1)}var v=new Sb(navigator.userAgent).buildQueueMessage();this._dataQ.addToQueue("static_fields",v,!1);var b=-1*(new Date).getTimezoneOffset(),g=new Rb(b).buildQueueMessage();this._dataQ.addToQueue("static_fields",g,!1);var _=t.checkCookie(),w=new Fb(_).buildQueueMessage();this._dataQ.addToQueue("static_fields",w,!1);var S=navigator.deviceMemory||0,E=new Vb(S).buildQueueMessage();this._dataQ.addToQueue("static_fields",E,!1);var k=navigator.buildID;if(k){var T=new bg(k).buildQueueMessage();this._dataQ.addToQueue("static_fields",T,!1)}var P=navigator.maxTouchPoints,O=new Pg(P).buildQueueMessage();if(this._dataQ.addToQueue("static_fields",O,!1),this._configurations.isBrowserDisplayDetectEnabled()){var C="".concat(t.isTransparencyReduced(),",\n            ").concat(t.isMotionReduced(),",\n            ").concat(t.getColorGamut(),",\n            ").concat(t.areColorsForced(),",\n            ").concat(t.areColorsInverted(),",\n            ").concat(t.isHDR(),",\n            ").concat(t.getMonochromeDepth()),j=new Gg(C).buildQueueMessage();this._dataQ.addToQueue("static_fields",j,!1)}if(this._configurations.isMathDetectEnabled()){var R=t.getMathFingerprint(),M=new xg(R).buildQueueMessage();this._dataQ.addToQueue("static_fields",M,!1)}yt.info("Browser Props collected")}}],[{key:"getDefaultSettings",value:function(){return Yg}},{key:"getLanguage",value:function(){if(navigator){if(navigator.language)return navigator.language;if(navigator.userLanguage)return navigator.userLanguage}}},{key:"getMonochromeDepth",value:function(){if(matchMedia("(min-monochrome: 0)").matches)for(var e=0;e<=100;++e)if(matchMedia("(max-monochrome: ".concat(e,")")).matches)return e}},{key:"isHDR",value:function(){var e=function(e){return matchMedia("(dynamic-range: ".concat(e,")")).matches};return e("high")?"high":e("standard")?"standard":"undefined"}},{key:"areColorsInverted",value:function(){var e=function(e){return matchMedia("(inverted-colors: ".concat(e,")")).matches};return e("inverted")?"inverted":e("none")?"none":"undefined"}},{key:"areColorsForced",value:function(){var e=function(e){return matchMedia("(forced-colors: ".concat(e,")")).matches};return e("active")?"active":e("none")?"none":"undefined"}},{key:"getColorGamut",value:function(){for(var e=0,t=["rec2020","p3","srgb"];e<t.length;e++){var n=t[e];if(matchMedia("(color-gamut: ".concat(n,")")).matches)return n}return"undefined"}},{key:"isMotionReduced",value:function(){var e=function(e){return matchMedia("(prefers-reduced-motion: ".concat(e,")")).matches};return e("reduce")?"reduce":e("no-preference")?"no-preference":"undefined"}},{key:"isTransparencyReduced",value:function(){var e=function(e){return matchMedia("(prefers-reduced-transparency: ".concat(e,")")).matches};return e("reduce")?"reduce":e("no-preference")?"no-preference":"undefined"}},{key:"getMathFingerprint",value:function(){return[Math.acos(.12312423423423424),Math.acosh(1e308),Math.asin(.12312423423423424),Math.asinh(1),Math.atan(.5),Math.atanh(.5),Math.sin(-1e300),Math.sinh(1),Math.cos(10.000000000123),Math.cosh(1),Math.tan(-1e300),Math.tanh(1),Math.exp(1),Math.expm1(1),Math.log1p(10),Math.pow(Math.PI,-100)].join("|")}},{key:"getPlugins",value:function(){try{var e=[];if(window.navigator.plugins&&window.navigator.plugins.length>0)for(var n=0,r=window.navigator.plugins.length;n<r;n++)e.push([window.navigator.plugins[n].name,window.navigator.plugins[n].filename,window.navigator.plugins[n].description,window.navigator.plugins[n].version?window.navigator.plugins[n].version:""]);else if(window.navigator.mimeTypes&&window.navigator.mimeTypes.length>0)for(var o=0;o<window.navigator.mimeTypes.length;o++)e.push([window.navigator.mimeTypes[o].type,"",window.navigator.mimeTypes[o].description,""]);var i=t.isActiveXAndFlashEnabled;return t.augmentWithFlashInIE(e,window.navigator.plugins,i),e}catch(e){yt.warn("getPlugins error: ".concat(e.message),e)}}},{key:"checkCookie",value:function(){var e=navigator.cookieEnabled;return e||(this._utils.StorageUtils.setCookie("testcookie","1",6e4),e=-1!==document.cookie.indexOf("testcookie")),e}},{key:"getOperatingSystem",value:function(){for(var e,n,r=[{name:"Windows Phone",value:"Windows Phone",version:"OS"},{name:"Windows",value:"Win",version:"NT"},{name:"iPhone",value:"iPhone",version:"OS"},{name:"iPad",value:"iPad",version:"OS"},{name:"Kindle",value:"Silk",version:"Silk"},{name:"Android",value:"Android",version:"Android"},{name:"PlayBook",value:"PlayBook",version:"OS"},{name:"BlackBerry",value:"BlackBerry",version:"/"},{name:"Macintosh",value:"Mac",version:"OS X"},{name:"Linux",value:"Linux",version:"rv"},{name:"Palm",value:"Palm",version:"PalmOS"}],o=[t.getAvailablePlatform(window.navigator),navigator.userAgent].join(" "),i="",a="Unknown",u=0;u<r.length;u++)if(new RegExp(r[u].value,"i").test(o)){if(e=new RegExp(r[u].version+"[- /:;]([\\d._]+)","i"),n=o.match(e)){n[1]&&(n=n[1]),n=n.split(/[._]+/);for(var s=0;s<n.length;s++)i+=0===s?n[s]+".":n[s]}a=r[u].name;break}return{version:parseFloat(i)||null,name:a}}},{key:"isActiveXAndFlashEnabled",value:function(){try{return Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(e){return!1}}},{key:"getAvailablePlatform",value:function(e){return"platform"in e?e.platform:"userAgentData"in e?e.userAgentData.platform:null}},{key:"augmentWithFlashInIE",value:function(e,t,n){if("[object PluginArray]"===Object.prototype.toString.call(t))return e;return n()&&e.push(["Flash32_32_0_0_238.ocx",2,"Shockwave Flash","32.0.0.238"]),e}}])}(Qo);function Zg(e){return Zg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zg(e)}function $g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,e_(r.key),r)}}function e_(e){var t=function(e,t){if("object"!=Zg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Zg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zg(t)?t:t+""}function t_(e,t,n){return t=r_(t),function(e,t){if(t&&("object"==Zg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,n_()?Reflect.construct(t,n||[],r_(e).constructor):t.apply(e,n))}function n_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(n_=function(){return!!e})()}function r_(e){return r_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r_(e)}function o_(e,t){return o_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o_(e,t)}var i_=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=t_(this,t)).validateParams(e),n.dnt=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o_(e,t)}(t,e),function(e,t,n){return t&&$g(e.prototype,t),n&&$g(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e){"number"==typeof e&&(0===e||1===e||2===e)||yt.warn("wrong type in DoNotTrackContract parameters. dnt : {expected: number in {0,1,2}, received: type: ".concat(Zg(e),", value: ").concat(e))}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),this.dnt];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&"number"==typeof e[1]||yt.warn("DoNotTrack - Contract verification failed")}},{key:"getName",value:function(){return"dnt"}}])}(Nm);function a_(e){return a_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a_(e)}function u_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s_(r.key),r)}}function s_(e){var t=function(e,t){if("object"!=a_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a_(t)?t:t+""}function c_(e,t,n){return t=f_(t),function(e,t){if(t&&("object"==a_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,l_()?Reflect.construct(t,n||[],f_(e).constructor):t.apply(e,n))}function l_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l_=function(){return!!e})()}function f_(e){return f_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f_(e)}function p_(e,t){return p_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p_(e,t)}var h_={configKey:"isDoNotTrack",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!0,isFrameRelated:!1,runInUns:!0,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},y_=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=c_(this,t))._dataQ=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p_(e,t)}(t,e),function(e,t,n){return t&&u_(e.prototype,t),n&&u_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:function(){var e=navigator.doNotTrack;void 0===e&&void 0===(e=window.doNotTrack)&&(e=navigator.msDoNotTrack);var t=new i_(e=null===e||"unspecified"===e||"0"===e?0:"1"===e?1:2).buildQueueMessage();this._dataQ.addToQueue("static_fields",t,!1)}}],[{key:"getDefaultSettings",value:function(){return h_}}])}(Qo);function d_(e){return d_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d_(e)}function m_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v_(r.key),r)}}function v_(e){var t=function(e,t){if("object"!=d_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=d_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d_(t)?t:t+""}function b_(e,t,n){return t=__(t),function(e,t){if(t&&("object"==d_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,g_()?Reflect.construct(t,n||[],__(e).constructor):t.apply(e,n))}function g_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(g_=function(){return!!e})()}function __(e){return __=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},__(e)}function w_(e,t){return w_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w_(e,t)}var S_=function(e){function t(e,n,r,o){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=b_(this,t)).validateParams(e,n,r,o),i.renderer=e,i.vendor=n,i.version=r,i.supportedExtensions=o,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w_(e,t)}(t,e),function(e,t,n){return t&&m_(e.prototype,t),n&&m_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e,t,n,r){"string"==typeof e&&"string"==typeof t&&"string"==typeof n&&"string"==typeof r||yt.warn("wrong type in GraphicDetectContract parameters. renderer: {expected: string, received: ".concat(d_(e),"}, vendor: {expected: string, received: ").concat(d_(t),"},\n            version: {expected: string, received: ").concat(d_(n),"}, supportedExtensions: {expected: string, received: ").concat(d_(r),"}"))}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),[this.renderer,this.vendor,this.version,this.supportedExtensions]];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&Array.isArray(e[1])&&4===e[1].length||yt.warn("GraphicDetect - Contract verification failed")}},{key:"getName",value:function(){return"grph_card"}}])}(Nm);function E_(e){return E_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E_(e)}function k_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T_(r.key),r)}}function T_(e){var t=function(e,t){if("object"!=E_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=E_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E_(t)?t:t+""}function P_(e,t,n){return t=C_(t),function(e,t){if(t&&("object"==E_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,O_()?Reflect.construct(t,n||[],C_(e).constructor):t.apply(e,n))}function O_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(O_=function(){return!!e})()}function C_(e){return C_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C_(e)}function j_(e,t){return j_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j_(e,t)}var R_={configKey:"isVMDetection",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!0,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},M_=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=P_(this,t))._dataQ=e,r._configurations=n,r.canvasId="cd_canvas",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j_(e,t)}(t,e),function(e,t,n){return t&&k_(e.prototype,t),n&&k_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:function(){try{this._configurations&&this._configurations.isGraphCardEnabled()&&this._getMappedRenderInfo()}catch(e){yt.error("Failed collecting Graphic Card information. ".concat(e))}}},{key:"_getMappedRenderInfo",value:function(){yt.info("Collecting Graphic Card props");var e={renderer:"unknown",vendor:"",version:"unknown",supportedExtensions:""};if(window.WebGLRenderingContext||window.WebGL2RenderingContext){var t=document.createElement("canvas");t.id=this.canvasId;var n=t.getContext("experimental-webgl");if(n){var r=n.getExtension("WEBGL_debug_renderer_info");if(null!=r){e.renderer=n.getParameter(r.UNMASKED_RENDERER_WEBGL),e.vendor=n.getParameter(r.UNMASKED_VENDOR_WEBGL),e.supportedExtensions=n.getSupportedExtensions().join(",");if(e.renderer.indexOf("Intel")>-1&&e.renderer.indexOf("HD Graphics")>-1){var o=e.renderer.match(/\d+/g);if(o){var i=o[0];i>500&&i<599&&(e.version="SKL (6th gen core)"),i>5300&&i<6999&&(e.version="BDW (5th gen core)")}}}}}var a=new S_(e.renderer,e.vendor,e.version,e.supportedExtensions).buildQueueMessage();this._dataQ.addToQueue("static_fields",a,!1),yt.info("Graphic Card props collected")}}],[{key:"getDefaultSettings",value:function(){return R_}}])}(Qo);function B_(e){return B_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B_(e)}function A_(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return x_(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x_(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function x_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function D_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,I_(r.key),r)}}function I_(e){var t=function(e,t){if("object"!=B_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=B_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==B_(t)?t:t+""}function L_(e,t,n){return t=N_(t),function(e,t){if(t&&("object"==B_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,F_()?Reflect.construct(t,n||[],N_(e).constructor):t.apply(e,n))}function F_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(F_=function(){return!!e})()}function N_(e){return N_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},N_(e)}function U_(e,t){return U_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},U_(e,t)}var W_=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=L_(this,t)).validateParams(e),n.mediaDevices=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U_(e,t)}(t,e),function(e,t,n){return t&&D_(e.prototype,t),n&&D_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e){Array.isArray(e)&&this._eachDeviceIsValid(e)||yt.warn(" wrong type in MediaDevicesContract parameters. mediaDevices : {expected: [[...string]], received: ".concat(e,"}"))}},{key:"_eachDeviceIsValid",value:function(e){var t,n=!0,r=!0,o=!0,i=A_(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(Array.isArray(a)){4!==a.length&&(o=!1);var u,s=A_(a);try{for(s.s();!(u=s.n()).done;){"string"!=typeof u.value&&(r=!1)}}catch(e){s.e(e)}finally{s.f()}}else n=!1}}catch(e){i.e(e)}finally{i.f()}return n&&o&&r}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),this.mediaDevices];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&Array.isArray(e[1])||yt.warn("MediaDevices - Contract verification failed")}},{key:"getName",value:function(){return"media_devices"}}])}(Nm);function G_(e){return G_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G_(e)}function H_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Q_(r.key),r)}}function Q_(e){var t=function(e,t){if("object"!=G_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=G_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==G_(t)?t:t+""}function z_(e,t,n){return t=K_(t),function(e,t){if(t&&("object"==G_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,V_()?Reflect.construct(t,n||[],K_(e).constructor):t.apply(e,n))}function V_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(V_=function(){return!!e})()}function K_(e){return K_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},K_(e)}function q_(e,t){return q_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},q_(e,t)}var J_={configKey:"isMediaDevices",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!0,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},Y_=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.navigator;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=z_(this,t))._dataQ=e,n._navigator=r,n._metric="MediaDevicesFeature",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q_(e,t)}(t,e),function(e,t,n){return t&&H_(e.prototype,t),n&&H_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:function(){var e=this;this._navigator.mediaDevices&&this._navigator.mediaDevices.enumerateDevices&&this._navigator.mediaDevices.enumerateDevices().then(function(t){var n=[];t.forEach(function(e){var t=[e.kind||"",e.label||"",e.deviceId||"",e.groupId||""];n.push(t)});var r=new W_(n).buildQueueMessage();e._dataQ.addToQueue("static_fields",r,!1)}).catch(function(t){e.cancelMonitor(e._metric),yt.error("MediaDevicesFeature:startFeature failed to enumerateDevices: ".concat(t.message))})}}],[{key:"getDefaultSettings",value:function(){return J_}}])}(Qo);function X_(e){return X_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X_(e)}function Z_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$_(r.key),r)}}function $_(e){var t=function(e,t){if("object"!=X_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=X_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==X_(t)?t:t+""}function ew(e,t,n){return t=nw(t),function(e,t){if(t&&("object"==X_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,tw()?Reflect.construct(t,n||[],nw(e).constructor):t.apply(e,n))}function tw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(tw=function(){return!!e})()}function nw(e){return nw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nw(e)}function rw(e,t){return rw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rw(e,t)}var ow=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ew(this,t)).validateParams(e,n),r.per=e,r.state=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rw(e,t)}(t,e),function(e,t,n){return t&&Z_(e.prototype,t),n&&Z_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e,t){"string"==typeof e&&"number"==typeof t||yt.warn("wrong type in Per, UserPermissionContract, parameters. per : {expected: string, received: ".concat(X_(e),"}, state : {expected: number, received: ").concat(X_(t),"}"))}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),this.state];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&"number"==typeof e[1]||yt.warn("per, UserPermissionContract - Contract verification failed")}},{key:"getName",value:function(){return"per_".concat(this.per)}}])}(Nm);function iw(e){return iw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iw(e)}function aw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,uw(r.key),r)}}function uw(e){var t=function(e,t){if("object"!=iw(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=iw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==iw(t)?t:t+""}function sw(e,t,n){return t=lw(t),function(e,t){if(t&&("object"==iw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,cw()?Reflect.construct(t,n||[],lw(e).constructor):t.apply(e,n))}function cw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(cw=function(){return!!e})()}function lw(e){return lw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lw(e)}function fw(e,t){return fw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fw(e,t)}var pw=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=sw(this,t)).validateParams(e),n.persistent=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fw(e,t)}(t,e),function(e,t,n){return t&&aw(e.prototype,t),n&&aw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e){"number"==typeof e||yt.warn("wrong type in PerStorage , UserPermissionContract, parameters. persistent : {expected: number, received: ".concat(iw(e),"}"))}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),this.persistent];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&"number"==typeof e[1]||yt.warn("per_storage, UserPermissionContract - Contract verification failed")}},{key:"getName",value:function(){return"per_storage"}}])}(Nm);function hw(e){return hw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hw(e)}function yw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dw(r.key),r)}}function dw(e){var t=function(e,t){if("object"!=hw(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=hw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hw(t)?t:t+""}function mw(e,t,n){return t=bw(t),function(e,t){if(t&&("object"==hw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,vw()?Reflect.construct(t,n||[],bw(e).constructor):t.apply(e,n))}function vw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(vw=function(){return!!e})()}function bw(e){return bw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bw(e)}function gw(e,t){return gw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gw(e,t)}var _w=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=mw(this,t)).validateParams(e,n),r.kind=e,r.perm=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gw(e,t)}(t,e),function(e,t,n){return t&&yw(e.prototype,t),n&&yw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e,t){"string"==typeof e&&"number"==typeof t||yt.warn("wrong type in PerKind , UserPermissionContract, parameters. kind : {expected: string, received: ".concat(hw(e),"}, perm : {expected: number, received: ").concat(hw(t),"}"))}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),this.perm];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&"number"==typeof e[1]||yt.warn("PerKind, UserPermissionContract - Contract verification failed")}},{key:"getName",value:function(){return"per_".concat(this.kind)}}])}(Nm);function ww(e){return ww="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ww(e)}function Sw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ew(r.key),r)}}function Ew(e){var t=function(e,t){if("object"!=ww(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ww(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ww(t)?t:t+""}function kw(e,t,n){return t=Pw(t),function(e,t){if(t&&("object"==ww(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Tw()?Reflect.construct(t,n||[],Pw(e).constructor):t.apply(e,n))}function Tw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Tw=function(){return!!e})()}function Pw(e){return Pw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pw(e)}function Ow(e,t){return Ow=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ow(e,t)}var Cw={configKey:"isUserPermissions",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!0,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},jw=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.navigator;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=kw(this,t))._permDefs={granted:1,prompt:2,denied:3,true:1,false:3},n._permissions=["geolocation","midi","notifications","push"],n._dataQ=e,n._navigator=r,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ow(e,t)}(t,e),function(e,t,n){return t&&Sw(e.prototype,t),n&&Sw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:function(){this._reportQueryPermissions(),this._reportStoragePermission(),this._reportMicCameraPermissions()}},{key:"_reportQueryPermissions",value:function(){var e=this;if(this._navigator.permissions&&this._navigator.permissions.query)for(var t=yt,n=function(){var n=e._permissions[r];e._navigator.permissions.query({name:n}).then(function(t){var r=e._permDefs[t.state]||-1,o=new ow(n,r).buildQueueMessage();e._dataQ.addToQueue("static_fields",o,!1)}).catch(function(e){t.debug("Failed querying for ".concat(n," permissions ").concat(e.message))})},r=0;r<this._permissions.length;r++)n()}},{key:"_reportStoragePermission",value:function(){var e=this;this._navigator.storage&&this._navigator.storage.persisted&&this._navigator.storage.persisted().then(function(t){var n=new pw(e._permDefs[t]||-1).buildQueueMessage();e._dataQ.addToQueue("static_fields",n,!1)}).catch(function(e){yt.debug("Failed to check storage persisted: ".concat(e.message))})}},{key:"_reportMicCameraPermissions",value:function(){var e=this,t={audio:!1,video:!1};this._navigator.mediaDevices&&this._navigator.mediaDevices.enumerateDevices&&this._navigator.mediaDevices.enumerateDevices().then(function(n){n.forEach(function(n){if(!((a=n.kind).includes("audio")&&t.audio||a.includes("video")&&t.video)){var r=function(e){return e.includes("audio")?(t.audio=!0,"audio"):e.includes("video")?(t.video=!0,"video"):void 0}(n.kind),o=""!==n.label?e._permDefs.granted:e._permDefs.denied,i=new _w(r,o).buildQueueMessage();e._dataQ.addToQueue("static_fields",i,!1)}var a})}).catch(function(e){yt.debug("UserPermissions:startFeature failed to enumerateDevices: ".concat(e.message))})}}],[{key:"getDefaultSettings",value:function(){return Cw}}])}(Qo);function Rw(e){return Rw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rw(e)}function Mw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bw(r.key),r)}}function Bw(e){var t=function(e,t){if("object"!=Rw(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Rw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Rw(t)?t:t+""}function Aw(e,t,n){return t=Dw(t),function(e,t){if(t&&("object"==Rw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,xw()?Reflect.construct(t,n||[],Dw(e).constructor):t.apply(e,n))}function xw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(xw=function(){return!!e})()}function Dw(e){return Dw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Dw(e)}function Iw(e,t){return Iw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Iw(e,t)}var Lw=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Aw(this,t)).validateParams(e),n.isPrivate=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Iw(e,t)}(t,e),function(e,t,n){return t&&Mw(e.prototype,t),n&&Mw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e){"boolean"==typeof e||yt.warn("wrong type in IsPrivateBrowsingContract parameters. isPrivate : {expected: boolean, received: ".concat(Rw(e),"}"))}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),this.isPrivate];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&"boolean"==typeof e[1]||yt.warn("IsPrivateBrowsing - Contract verification failed")}},{key:"getName",value:function(){return"is_private_browsing"}}])}(Nm);function Fw(e){return Fw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fw(e)}function Nw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Uw(r.key),r)}}function Uw(e){var t=function(e,t){if("object"!=Fw(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Fw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fw(t)?t:t+""}function Ww(e,t,n){return t=Hw(t),function(e,t){if(t&&("object"==Fw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Gw()?Reflect.construct(t,n||[],Hw(e).constructor):t.apply(e,n))}function Gw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Gw=function(){return!!e})()}function Hw(e){return Hw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hw(e)}function Qw(e,t){return Qw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qw(e,t)}var zw={configKey:"isPrivateBrowsing",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!0,isFrameRelated:!1,runInUns:!0,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},Vw=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ww(this,t))._dataQ=e,r._privateBrowsingDetector=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qw(e,t)}(t,e),function(e,t,n){return t&&Nw(e.prototype,t),n&&Nw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:function(){var e=this;this._privateBrowsingDetector.detectPrivateMode(function(t){var n=new Lw(t).buildQueueMessage();e._dataQ.addToQueue("static_fields",n,!1)})}}],[{key:"getDefaultSettings",value:function(){return zw}}])}(Qo);function Kw(e){return Kw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kw(e)}function qw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Jw(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jw(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Yw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xw(r.key),r)}}function Xw(e){var t=function(e,t){if("object"!=Kw(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Kw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Kw(t)?t:t+""}function Zw(e,t,n){return t=eS(t),function(e,t){if(t&&("object"==Kw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,$w()?Reflect.construct(t,n||[],eS(e).constructor):t.apply(e,n))}function $w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return($w=function(){return!!e})()}function eS(e){return eS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},eS(e)}function tS(e,t){return tS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tS(e,t)}var nS=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Zw(this,t)).validateParams(e,n),r.dataType=e,r.fontList=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tS(e,t)}(t,e),function(e,t,n){return t&&Yw(e.prototype,t),n&&Yw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e,t){if(!(Array.isArray(t)&&2===t.length&&Object.values(rS).includes(e)))throw yt.warn("Invalid parameters in FontsDetectionContract. \n                dataType: {expected: ".concat(Object.keys(rS).join(", "),", received: ").concat(e,"},\n                fontList: {expected: tuple [string, array], received: ").concat(JSON.stringify(t),"}")),new Error("Invalid parameters provided to FontsDetectionContract.")}},{key:"buildQueueMessage",value:function(){var e;if(this.dataType===rS.V1_ONLY)e=this.fontList[0].join(",");else if(this.dataType===rS.V2_ONLY)e=this.fontList[1];else{if(this.dataType!==rS.V1_AND_V2)throw new Error("Invalid dataType: ".concat(this.dataType));e=[this.fontList[0].join(","),this.fontList[1]]}var t=[this.getName(),[this.dataType,e]];return this.validateMessage(t),t}},{key:"validateMessage",value:function(e){var t="string"==typeof e[0],n=qw(e[1]||[],2),r=n[0],o=n[1],i=!1;if(r===rS.V1_ONLY?i="string"==typeof o:r===rS.V2_ONLY?i=Array.isArray(o)&&o.every(function(e){return"string"==typeof e}):r===rS.V1_AND_V2&&(i=Array.isArray(o)&&2===o.length&&"string"==typeof o[0]&&Array.isArray(o[1])&&o[1].every(function(e){return"string"==typeof e})),!t||!i)throw yt.warn("FontsDetectionContract - Queue message validation failed."),yt.debug("Invalid message: ".concat(JSON.stringify(e))),new Error("Invalid message structure.")}},{key:"getName",value:function(){return"fonts"}}])}(Nm),rS=Object.freeze({V1_ONLY:"v1",V2_ONLY:"v2",V1_AND_V2:"v1+v2"}),oS=Object.freeze({VERSION1:"VERSION1",VERSION2:"VERSION2"});function iS(e){return iS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iS(e)}function aS(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return uS(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(uS(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,uS(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,uS(f,"constructor",c),uS(c,"constructor",s),s.displayName="GeneratorFunction",uS(c,o,"GeneratorFunction"),uS(f),uS(f,o,"Generator"),uS(f,r,function(){return this}),uS(f,"toString",function(){return"[object Generator]"}),(aS=function(){return{w:i,m:p}})()}function uS(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}uS=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){uS(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},uS(e,t,n,r)}function sS(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function cS(e,t,n){return(t=fS(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fS(r.key),r)}}function fS(e){var t=function(e,t){if("object"!=iS(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=iS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==iS(t)?t:t+""}var pS=function(){return function(e,t,n){return t&&lS(e.prototype,t),n&&lS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._storageUtils=t,this._versionKeys=cS(cS({},oS.VERSION1,"detectedFonts_2.1.5"),oS.VERSION2,"detectedFonts_3")},[{key:"saveFonts",value:(e=aS().m(function e(t,n){var r;return aS().w(function(e){for(;;)switch(e.n){case 0:return r=this._getKeyByVersion(n),yt.debug("[FONTS-COLLECTOR][".concat(n,"] Saving fonts to localStorage under key: ").concat(r)),e.n=1,this._storageUtils.saveToLocalStorage(r,t);case 1:return e.a(2)}},e,this)}),t=function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){sS(i,r,o,a,u,"next",e)}function u(e){sS(i,r,o,a,u,"throw",e)}a(void 0)})},function(e,n){return t.apply(this,arguments)})},{key:"getStoredFonts",value:function(e){var t=this._getKeyByVersion(e),n=this._storageUtils.getFromLocalStorage(t);return yt.debug("[FONTS-COLLECTOR][".concat(e,"] Retrieved fonts from localStorage under key ").concat(t,": ").concat(n)),n}},{key:"_getKeyByVersion",value:function(e){var t=this._versionKeys[e];if(!t)throw new Error("Unsupported font version type: ".concat(e));return t}}]);var e,t}(),hS=n(837),yS=n.n(hS),dS=n(521),mS=n.n(dS);function vS(e){return vS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vS(e)}function bS(e,t,n){return(t=_S(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_S(r.key),r)}}function _S(e){var t=function(e,t){if("object"!=vS(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=vS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vS(t)?t:t+""}var wS=function(){return function(e,t,n){return t&&gS(e.prototype,t),n&&gS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fontVersions=bS(bS({},oS.VERSION1,yS()),oS.VERSION2,mS())},[{key:"getFontsByVersion",value:function(e){if(this.fontVersions[e])return this.fontVersions[e];throw new Error("Invalid version type. Use one of: ".concat(Object.keys(oS).join(", ")))}}])}(),SS=wS;function ES(e){return ES="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ES(e)}function kS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,TS(r.key),r)}}function TS(e){var t=function(e,t){if("object"!=ES(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ES(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ES(t)?t:t+""}var PS="span",OS=function(){return function(e,t,n){return t&&kS(e.prototype,t),n&&kS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._domUtils=t,this._baseFonts=["rat-fonts","monospace","sans-serif","serif"],this._testString="mmmmmmmmmmlli",this._testSize="72px",this._chunkSize=30,this._defaultWidth={},this._defaultHeight={},this._body=null,this._iframe=null,this._spanArray=null,this._allFontsDiffs=[]},[{key:"release",value:function(){this._body&&this._iframe&&this._body.removeChild(this._iframe),this._iframe=null,this._spanArray=null,this._allFontsDiffs=[]}},{key:"init",value:function(){var e=this;return new Promise(function(t,n){try{e.initCallback(t)}catch(e){n(e)}})}},{key:"initCallback",value:function(e){var t=this;if(this._body=document.body,!this._body)return"";this._iframe=document.createElement("iframe"),this._iframe.setAttribute("sandbox","allow-same-origin"),this._iframe.id=$i,this._iframe.style.visibility="hidden",this._iframe.style.zIndex="-1",this._iframe.style.width=0,this._iframe.style.height=0,this._iframe.style.position="absolute",this._iframe.style.top="-9999px",this._iframe.style.left="-9999px",this._iframe.style.border="none",this._iframe.style.margin="0",this._iframe.style.padding="0",this._iframe.style.overflow="hidden",this._body.appendChild(this._iframe),this._iframe.contentDocument.body||(this._iframe.style.width=null,this._iframe.style.height=null,this._iframe.contentDocument.appendChild(document.createElement("body"))),this._domUtils.onWindowDocumentReady(this._iframe.contentWindow,function(){t._createCalculationElements(e)})}},{key:"_createCalculationElements",value:function(e){var t=document.createElement("span");t.style.fontSize=this._testSize,t.style.visibility="hidden",t.style.position="absolute",t.style.zIndex="-1",t.style.lineHeight="normal",t.innerHTML=this._testString;for(var n=0;n<this._baseFonts.length;n++)t.style.fontFamily=this._baseFonts[n],this._iframe.contentDocument.body.appendChild(t),this._defaultWidth[this._baseFonts[n]]=t.offsetWidth,this._defaultHeight[this._baseFonts[n]]=t.offsetHeight,this._iframe.contentDocument.body.removeChild(t);yt.debug("FontsScanner:init - base fonts width: \n                ".concat(this._baseFonts[0],":").concat(this._defaultWidth[this._baseFonts[0]],";\n                ").concat(this._baseFonts[1],":").concat(this._defaultWidth[this._baseFonts[1]],";\n                ").concat(this._baseFonts[2],":").concat(this._defaultWidth[this._baseFonts[2]],";\n                ").concat(this._baseFonts[3],":").concat(this._defaultWidth[this._baseFonts[3]])),yt.debug("FontsScanner:init - base fonts height: \n                ".concat(this._baseFonts[0],":").concat(this._defaultHeight[this._baseFonts[0]],";\n                ").concat(this._baseFonts[1],":").concat(this._defaultHeight[this._baseFonts[1]],";\n                ").concat(this._baseFonts[2],":").concat(this._defaultHeight[this._baseFonts[2]],";\n                ").concat(this._baseFonts[3],":").concat(this._defaultHeight[this._baseFonts[3]])),this._createSpanArray(),e()}},{key:"_createSpanArray",value:function(){var e=document.createElement("div");e.id="currentDiv",e.style.position="absolute",e.style.visibility="hidden";for(var t=0;t<this._chunkSize;t++){var n=document.createElement("span");n.style.lineHeight="normal",n.style.position="absolute",n.style.zIndex="-1",n.style.fontSize=this._testSize,n.innerHTML=this._testString,e.appendChild(n);var r=document.createElement("br");e.appendChild(r)}this._iframe.contentDocument.body.appendChild(e),this._spanArray=e}},{key:"getAllFontsDiffs",value:function(){return this._allFontsDiffs}}])}();function CS(e){return CS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CS(e)}function jS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,RS(r.key),r)}}function RS(e){var t=function(e,t){if("object"!=CS(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=CS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==CS(t)?t:t+""}function MS(e,t,n){return t=AS(t),function(e,t){if(t&&("object"==CS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,BS()?Reflect.construct(t,n||[],AS(e).constructor):t.apply(e,n))}function BS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(BS=function(){return!!e})()}function AS(e){return AS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},AS(e)}function xS(e,t){return xS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xS(e,t)}var DS=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),MS(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xS(e,t)}(t,e),function(e,t,n){return t&&jS(e.prototype,t),n&&jS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"scan",value:function(e,t){var n=this;return this.init().then(function(){return new Promise(function(r,o){try{n.detectCallback(e,t,r)}catch(e){o(e)}})}).catch(function(e){return Promise.reject(e)})}},{key:"detectCallback",value:function(e,t,n){var r=this,o=[],i=0,a=0;if(!this._spanArray)return n(o),o;var u=this._spanArray.getElementsByTagName(PS),s=this._defaultWidth[t],c=this._defaultHeight[t],l=function(e){e.forEach(function(e){var t=Math.abs(e.offsetWidth-s),n=Math.abs(e.offsetHeight-c);r._allFontsDiffs.push([e.id,t,n]),(t>1||n>1)&&(o[i]=e.id,i++)})};e.forEach(function(e){a>=r._chunkSize&&(a=0,l(Array.from(u))),u[a].style.fontFamily=e+","+t,u[a].id=e,a++}),a<this._chunkSize&&l(Array.from(u).slice(0,a)),n(o)}}])}(OS);function IS(e){return IS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},IS(e)}function LS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,FS(r.key),r)}}function FS(e){var t=function(e,t){if("object"!=IS(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=IS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==IS(t)?t:t+""}function NS(e,t,n){return t=WS(t),function(e,t){if(t&&("object"==IS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,US()?Reflect.construct(t,n||[],WS(e).constructor):t.apply(e,n))}function US(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(US=function(){return!!e})()}function WS(e){return WS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},WS(e)}function GS(e,t){return GS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},GS(e,t)}var HS=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=NS(this,t,[e]))._getElementOffsetTask=n._getElementOffsetTask.bind(n),n._lastChunck=!0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GS(e,t)}(t,e),function(e,t,n){return t&&LS(e.prototype,t),n&&LS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"scan",value:function(e,t){var n=this;return this.init().then(function(){return new Promise(function(r,o){try{n.detectCallback(e,t,r)}catch(e){o(e)}})}).catch(function(e){return Promise.reject(e)})}},{key:"detectCallback",value:function(e,t,n){if(!this._spanArray)return n([]),[];var r,o,i,a,u,s,c,l,f=this._spanArray.getElementsByTagName(PS),p=(r=0,o=Math.min(e.length,this._chunkSize),i=f,a=r,u=[],s=n,c=e,l=t,{next:function(){var e=null;return a<o?(e=i[a],a++,e):null},reset:function(){a=0},addFont:function(e){u.push(e)},runCallback:function(){s(u)},getFontsArray:function(){return c},getFontFamily:function(){return l},getAvailableFonts:function(){return u}});this._lastChunck=!0,this._applyFontsToSpanElements(p,0)}},{key:"_applyFontsToSpanElements",value:function(e,t){var n=this;yt.trace("[FONTS-COLLECTOR][VERSION1] Checking font ".concat(t,"."));for(var r=e.next(),o=e.getFontsArray(),i=e.getFontFamily();null!==r&&t<o.length;)r.style.fontFamily=o[t]+", "+i,r.id=o[t],t++,r=e.next();if(e.reset(),t>=o.length){if(this._lastChunck)return this._lastChunck=!1,window.setTimeout(function(){n._getElementOffsetTask(e,t)},0);e.runCallback()}else window.setTimeout(function(){n._getElementOffsetTask(e,t)},0)}},{key:"_getElementOffsetTask",value:function(e,t){var n=this,r=e.getFontFamily(),o=this._defaultWidth[r],i=this._defaultHeight[r],a=e.next();if(a&&a.offsetWidth){var u=Math.abs(a.offsetWidth-o),s=Math.abs(a.offsetHeight-i);this._allFontsDiffs.push([a.id,u,s]),(u>1||s>1)&&e.addFont(a.id),window.setTimeout(function(){n._getElementOffsetTask(e,t)},0)}else e.reset(),this._applyFontsToSpanElements(e,t)}},{key:"isSupported",value:function(){return!0}}])}(OS);function QS(e){return QS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QS(e)}function zS(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return VS(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?VS(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function VS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function KS(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return qS(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(qS(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,qS(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,qS(f,"constructor",c),qS(c,"constructor",s),s.displayName="GeneratorFunction",qS(c,o,"GeneratorFunction"),qS(f),qS(f,o,"Generator"),qS(f,r,function(){return this}),qS(f,"toString",function(){return"[object Generator]"}),(KS=function(){return{w:i,m:p}})()}function qS(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}qS=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){qS(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},qS(e,t,n,r)}function JS(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function YS(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){JS(i,r,o,a,u,"next",e)}function u(e){JS(i,r,o,a,u,"throw",e)}a(void 0)})}}function XS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ZS(r.key),r)}}function ZS(e){var t=function(e,t){if("object"!=QS(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=QS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==QS(t)?t:t+""}var $S=function(){return function(e,t,n){return t&&XS(e.prototype,t),n&&XS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){var n=t.utils,r=t.domUtils,o=t.detector,i=void 0===o?null:o,a=t.batchSize,u=void 0===a?10:a,s=t.timeoutGap,c=void 0===s?0:s;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!n)throw new Error("The 'utils' parameter is required.");if(!r)throw new Error("The 'domUtils' parameter is required.");this._logsTag="[FONTS-COLLECTOR][BATCH-FONT-SCANNER]",this._utils=n,this._domUtils=r,this.detector=i,this.batchSize=u,this.timeoutGap=c,this._hasReleased=!1},[{key:"release",value:(n=YS(KS().m(function e(){return KS().w(function(e){for(;;)switch(e.n){case 0:if(this._hasReleased=!0,!this.detector||"function"!=typeof this.detector.release){e.n=1;break}return e.n=1,this.detector.release();case 1:return e.a(2)}},e,this)})),function(){return n.apply(this,arguments)})},{key:"scan",value:(t=YS(KS().m(function e(t){var n,r,o,i,a,u,s,c,l,f;return KS().w(function(e){for(;;)switch(e.n){case 0:if(!this._hasReleased){e.n=1;break}throw new Error("BatchFontScanner has been released and cannot be used.");case 1:if(Array.isArray(t)){e.n=2;break}throw new TypeError("The 'fonts' parameter must be an array.");case 2:if(0!==t.length){e.n=3;break}return e.a(2,[]);case 3:n=[],r=this._createBatchIndices(t.length,this.batchSize),o=zS(r),e.p=4,o.s();case 5:if((i=o.n()).done){e.n=9;break}if(a=i.value,u=a.start,s=a.end,!this._hasReleased){e.n=6;break}throw new Error("BatchFontScanner was released during scanning. Operation aborted.");case 6:return c=performance.now(),e.n=7,this._processBatch(t.slice(u,s),n);case 7:if(l=performance.now()-c,yt.trace("".concat(this._logsTag," Batch processed (").concat(u,"-").concat(s,") in ").concat(l.toFixed(2),"ms.")),!(s<t.length)){e.n=8;break}return e.n=8,this._delay(this.timeoutGap);case 8:e.n=5;break;case 9:e.n=11;break;case 10:e.p=10,f=e.v,o.e(f);case 11:return e.p=11,o.f(),e.f(11);case 12:if(!this._hasReleased){e.n=13;break}throw new Error("BatchFontScanner was released after scanning. Operation aborted.");case 13:return e.a(2,n)}},e,this,[[4,10,11,12]])})),function(e){return t.apply(this,arguments)})},{key:"_processBatch",value:(e=YS(KS().m(function e(t,n){var r,o,i,a,u,s;return KS().w(function(e){for(;;)switch(e.n){case 0:r=zS(t),e.p=1,r.s();case 2:if((o=r.n()).done){e.n=7;break}if(i=o.value,!this._hasReleased){e.n=3;break}throw new Error("BatchFontScanner was released during batch processing. Operation aborted.");case 3:return e.p=3,e.n=4,null===(a=this.detector)||void 0===a?void 0:a.detect(i);case 4:e.v&&n.push(i),e.n=6;break;case 5:e.p=5,u=e.v,yt.error('Error detecting font "'.concat(i,'":'),u);case 6:e.n=2;break;case 7:e.n=9;break;case 8:e.p=8,s=e.v,r.e(s);case 9:return e.p=9,r.f(),e.f(9);case 10:return e.a(2)}},e,this,[[3,5],[1,8,9,10]])})),function(t,n){return e.apply(this,arguments)})},{key:"_createBatchIndices",value:function(e,t){return Array.from({length:Math.ceil(e/t)},function(n,r){return{start:r*t,end:Math.min((r+1)*t,e)}})}},{key:"_delay",value:function(e){return new Promise(function(t){return setTimeout(t,e)})}}]);var e,t,n}();function eE(e){return eE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eE(e)}function tE(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=rE(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function nE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||rE(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rE(e,t){if(e){if("string"==typeof e)return oE(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oE(e,t):void 0}}function oE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function iE(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return aE(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(aE(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,aE(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,aE(f,"constructor",c),aE(c,"constructor",s),s.displayName="GeneratorFunction",aE(c,o,"GeneratorFunction"),aE(f),aE(f,o,"Generator"),aE(f,r,function(){return this}),aE(f,"toString",function(){return"[object Generator]"}),(iE=function(){return{w:i,m:p}})()}function aE(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}aE=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){aE(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},aE(e,t,n,r)}function uE(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function sE(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){uE(i,r,o,a,u,"next",e)}function u(e){uE(i,r,o,a,u,"throw",e)}a(void 0)})}}function cE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lE(r.key),r)}}function lE(e){var t=function(e,t){if("object"!=eE(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=eE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eE(t)?t:t+""}var fE=function(){return function(e,t,n){return t&&cE(e.prototype,t),n&&cE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){var n=t.detector,r=void 0===n?null:n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!r)throw new Error("The 'detector' parameter is required.");this._logsTag="[FONTS-COLLECTOR][LINEAR-FONT-SCANNER]",this.detector=r,this._hasReleased=!1},[{key:"release",value:(t=sE(iE().m(function e(){return iE().w(function(e){for(;;)switch(e.n){case 0:if(this._hasReleased=!0,!this.detector||"function"!=typeof this.detector.release){e.n=1;break}return e.n=1,this.detector.release();case 1:return e.a(2)}},e,this)})),function(){return t.apply(this,arguments)})},{key:"scan",value:(e=sE(iE().m(function e(t){var n,r,o,i,a,u,s,c,l,f,p,h,y;return iE().w(function(e){for(;;)switch(e.n){case 0:if(!this._hasReleased){e.n=1;break}throw new Error("LinearFontScanner has been released and cannot be used.");case 1:if(Array.isArray(t)){e.n=2;break}throw new TypeError("The 'fonts' parameter must be an array.");case 2:if(0!==t.length){e.n=3;break}return e.a(2,[]);case 3:if(n=[],yt.trace("".concat(this._logsTag," Starting linear scan of ").concat(t.length," fonts.")),r=performance.now(),!this.detector.detectBatch){e.n=5;break}return e.n=4,this.detector.detectBatch(t);case 4:for(o=e.v,i=0,a=Object.entries(o);i<a.length;i++)u=nE(a[i],2),s=u[0],u[1]&&n.push(s);e.n=15;break;case 5:c=tE(t),e.p=6,c.s();case 7:if((l=c.n()).done){e.n=12;break}if(f=l.value,!this._hasReleased){e.n=8;break}throw new Error("LinearFontScanner was released during scanning. Operation aborted.");case 8:return e.p=8,e.n=9,this.detector.detect(f);case 9:e.v&&n.push(f),e.n=11;break;case 10:e.p=10,h=e.v,yt.error("".concat(this._logsTag,' Error detecting font "').concat(f,'":'),h);case 11:e.n=7;break;case 12:e.n=14;break;case 13:e.p=13,y=e.v,c.e(y);case 14:return e.p=14,c.f(),e.f(14);case 15:if(p=performance.now()-r,yt.trace("".concat(this._logsTag," Linear scan completed in ").concat(p.toFixed(2),"ms. Detected ").concat(n.length," fonts.")),!this._hasReleased){e.n=16;break}throw new Error("LinearFontScanner was released after scanning. Operation aborted.");case 16:return e.a(2,n)}},e,this,[[8,10],[6,13,14,15]])})),function(t){return e.apply(this,arguments)})}]);var e,t}();function pE(e){return pE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pE(e)}function hE(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return yE(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(yE(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,yE(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,yE(f,"constructor",c),yE(c,"constructor",s),s.displayName="GeneratorFunction",yE(c,o,"GeneratorFunction"),yE(f),yE(f,o,"Generator"),yE(f,r,function(){return this}),yE(f,"toString",function(){return"[object Generator]"}),(hE=function(){return{w:i,m:p}})()}function yE(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}yE=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){yE(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},yE(e,t,n,r)}function dE(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function mE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vE(r.key),r)}}function vE(e){var t=function(e,t){if("object"!=pE(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pE(t)?t:t+""}var bE=function(){return function(e,t,n){return t&&mE(e.prototype,t),n&&mE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},[{key:"detect",value:(e=hE().m(function e(t,n){return hE().w(function(e){for(;;)switch(e.n){case 0:throw new Error('Method "checkFontList" must be implemented.');case 1:return e.a(2)}},e)}),t=function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){dE(i,r,o,a,u,"next",e)}function u(e){dE(i,r,o,a,u,"throw",e)}a(void 0)})},function(e,n){return t.apply(this,arguments)})},{key:"release",value:function(){throw new Error('Method "release" must be implemented.')}},{key:"isSupported",value:function(){throw new Error('Method "isSupported" must be implemented.')}}]);var e,t}();function gE(e){return gE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gE(e)}function _E(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return wE(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(wE(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,wE(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,wE(f,"constructor",c),wE(c,"constructor",s),s.displayName="GeneratorFunction",wE(c,o,"GeneratorFunction"),wE(f),wE(f,o,"Generator"),wE(f,r,function(){return this}),wE(f,"toString",function(){return"[object Generator]"}),(_E=function(){return{w:i,m:p}})()}function wE(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}wE=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){wE(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},wE(e,t,n,r)}function SE(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function EE(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){SE(i,r,o,a,u,"next",e)}function u(e){SE(i,r,o,a,u,"throw",e)}a(void 0)})}}function kE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,TE(r.key),r)}}function TE(e){var t=function(e,t){if("object"!=gE(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=gE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gE(t)?t:t+""}function PE(e,t,n){return t=CE(t),function(e,t){if(t&&("object"==gE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,OE()?Reflect.construct(t,n||[],CE(e).constructor):t.apply(e,n))}function OE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(OE=function(){return!!e})()}function CE(e){return CE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},CE(e)}function jE(e,t){return jE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jE(e,t)}var RE=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=PE(this,t))._domUtils=e,n._testText="AaBb123!@# אבגד אبت 你好世 あア अआऋИΔ สวั อา რუც კзءλ ⵍ 𐌄 фغ😀✔",n._fontSize="48px",n._canvas=null,n._context=null,n._fallbackWidth=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jE(e,t)}(t,e),function(e,t,n){return t&&kE(e.prototype,t),n&&kE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"detect",value:(o=EE(_E().m(function e(t){var n;return _E().w(function(e){for(;;)switch(e.n){case 0:if(!this._hasReleased){e.n=1;break}throw new Error("CanvasFontDetector has been released and is no longer usable. Please create a new instance to use the detector.");case 1:if(this._initialized){e.n=2;break}return e.n=2,this._initialize();case 2:return this._context.font="".concat(this._fontSize,' "').concat(t,'", non-existed-fallback'),n=this._context.measureText(this._testText).width,e.a(2,n!==this._fallbackWidth)}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"release",value:(r=EE(_E().m(function e(){return _E().w(function(e){for(;;)switch(e.n){case 0:this._hasReleased=!0,this._canvas=null,this._context=null,this._fallbackWidth=null;case 1:return e.a(2)}},e,this)})),function(){return r.apply(this,arguments)})},{key:"isSupported",value:function(){try{var e=document.createElement("canvas");return Boolean(e.getContext&&e.getContext("2d"))}catch(e){return!1}}},{key:"_initialize",value:(n=EE(_E().m(function e(){return _E().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this._domUtils.awaitWindowDocumentReady(window);case 1:this._canvas=document.createElement("canvas"),this._context=this._canvas.getContext("2d",{alpha:!1,desynchronized:!0}),this._context.textBaseline="alphabetic",this._context.direction="ltr",this._context.imageSmoothingEnabled=!1,this._context.font="".concat(this._fontSize,' "non-existed-font", non-existed-fallback'),this._fallbackWidth=this._context.measureText(this._testText).width,this._initialized=!0;case 2:return e.a(2)}},e,this)})),function(){return n.apply(this,arguments)})}]);var n,r,o}(bE);function ME(e){return ME="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ME(e)}function BE(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=xE(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function AE(e){return function(e){if(Array.isArray(e))return DE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xE(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xE(e,t){if(e){if("string"==typeof e)return DE(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?DE(e,t):void 0}}function DE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function IE(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return LE(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(LE(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,LE(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,LE(f,"constructor",c),LE(c,"constructor",s),s.displayName="GeneratorFunction",LE(c,o,"GeneratorFunction"),LE(f),LE(f,o,"Generator"),LE(f,r,function(){return this}),LE(f,"toString",function(){return"[object Generator]"}),(IE=function(){return{w:i,m:p}})()}function LE(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}LE=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){LE(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},LE(e,t,n,r)}function FE(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function NE(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){FE(i,r,o,a,u,"next",e)}function u(e){FE(i,r,o,a,u,"throw",e)}a(void 0)})}}function UE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zE(r.key),r)}}function WE(e,t,n){return t=HE(t),function(e,t){if(t&&("object"==ME(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,GE()?Reflect.construct(t,n||[],HE(e).constructor):t.apply(e,n))}function GE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(GE=function(){return!!e})()}function HE(e){return HE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},HE(e)}function QE(e,t){return QE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},QE(e,t)}function zE(e){var t=function(e,t){if("object"!=ME(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ME(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ME(t)?t:t+""}var VE=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=WE(this,t))._workers=[],e._initialized=!1,e._detectionPromises=new Map,e._nextId=0,e._workerUrl=null,e._workerPercentage=.5,e._currentWorkerIndex=0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QE(e,t)}(t,e),function(e,t,n){return t&&UE(e.prototype,t),n&&UE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"detect",value:(i=NE(IE().m(function e(t){var n=this;return IE().w(function(e){for(;;)switch(e.n){case 0:if(!this._hasReleased){e.n=1;break}throw new Error("WorkerFontDetector has been released and is no longer usable.");case 1:if(this._initialized){e.n=2;break}return e.n=2,this._initialize();case 2:return e.a(2,new Promise(function(e,r){var o=n._nextId++;n._detectionPromises.set(o,{resolve:e,reject:r});var i=n._workers[n._currentWorkerIndex];n._currentWorkerIndex=(n._currentWorkerIndex+1)%n._workers.length,i.postMessage({type:"detect",fontName:t,id:o})}))}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"detectBatch",value:(o=NE(IE().m(function e(t){var n,r,o,i,a,u=this;return IE().w(function(e){for(;;)switch(e.n){case 0:if(!this._hasReleased){e.n=1;break}throw new Error("WorkerFontDetector has been released and is no longer usable.");case 1:if(Array.isArray(t)&&0!==t.length){e.n=2;break}return e.a(2,{});case 2:if(this._initialized){e.n=3;break}return e.n=3,this._initialize();case 3:for(n=Math.ceil(t.length/this._workers.length),r=[],o=0;o<t.length;o+=n)r.push(t.slice(o,o+n));return i=r.map(function(e,t){return new Promise(function(n,r){var o=u._nextId++;u._detectionPromises.set(o,{resolve:n,reject:r}),u._workers[t].postMessage({type:"detectBatch",fontNames:e,id:o})})}),e.n=4,Promise.all(i);case 4:return a=e.v,e.a(2,Object.assign.apply(Object,[{}].concat(AE(a))))}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"release",value:(r=NE(IE().m(function e(){var t,n,r;return IE().w(function(e){for(;;)switch(e.n){case 0:t=BE(this._workers);try{for(t.s();!(n=t.n()).done;)(r=n.value)&&r.terminate()}catch(e){t.e(e)}finally{t.f()}this._workers=[],this._workerUrl&&(URL.revokeObjectURL(this._workerUrl),this._workerUrl=null),this._hasReleased=!0,this._detectionPromises.forEach(function(e){return e.reject(new Error("Detector released"))}),this._detectionPromises.clear();case 1:return e.a(2)}},e,this)})),function(){return r.apply(this,arguments)})},{key:"isSupported",value:function(){return!!window.Worker&&"undefined"!=typeof OffscreenCanvas}},{key:"_initialize",value:(n=NE(IE().m(function e(){var n=this;return IE().w(function(e){for(;;)if(0===e.n)return e.a(2,new Promise(function(e,r){try{var o=new Blob([t.WORKER_SOURCE],{type:"application/javascript"});n._workerUrl=URL.createObjectURL(o);for(var i=navigator.hardwareConcurrency||4,a=Math.max(1,Math.floor(i*n._workerPercentage)),u=0,s=a,c=0;c<a;c++){var l=new Worker(n._workerUrl);n._workers.push(l),l.onmessage=function(t){var r=t.data,o=r.type,i=r.id,a=r.result,c=r.error;"ready"===o?++u===s&&(n._initialized=!0,e()):"result"===o||"batchResult"===o?n._detectionPromises.has(i)&&(n._detectionPromises.get(i).resolve(a),n._detectionPromises.delete(i)):"error"===o&&n._detectionPromises.has(i)&&(n._detectionPromises.get(i).reject(new Error(c)),n._detectionPromises.delete(i))},l.onerror=function(e){n._initialized||r(e),n._detectionPromises.forEach(function(t){return t.reject(e)}),n._detectionPromises.clear(),n.release()}}}catch(e){r(e)}}))},e)})),function(){return n.apply(this,arguments)})}]);var n,r,o,i}(bE);function KE(e){return KE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KE(e)}function qE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,JE(r.key),r)}}function JE(e){var t=function(e,t){if("object"!=KE(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=KE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==KE(t)?t:t+""}!function(e,t,n){(t=zE(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(VE,"WORKER_SOURCE","\n        let canvas;\n        let context;\n        let fallbackWidth = null;\n\n        self.onmessage = function(event) {\n            const { type, fontName, fontNames, id } = event.data;\n            if (type === 'detect') {\n                try {\n                    if (!canvas) {\n                        initialize();\n                    }\n                    const isAvailable = detectFont(fontName);\n                    self.postMessage({ type: 'result', id, result: isAvailable });\n                } catch (e) {\n                    self.postMessage({ type: 'error', id, error: e.message });\n                }\n            } else if (type === 'detectBatch') {\n                try {\n                    if (!canvas) {\n                        initialize();\n                    }\n                    const results = detectFontsBatch(fontNames);\n                    self.postMessage({ type: 'batchResult', id, result: results });\n                } catch (e) {\n                    self.postMessage({ type: 'error', id, error: e.message });\n                }\n            }\n        };\n\n        function initialize() {\n            canvas = new OffscreenCanvas(100, 100);\n            context = canvas.getContext('2d', { alpha: false, desynchronized: true });\n            if (!context) {\n                throw new Error('Failed to get 2D context from OffscreenCanvas.');\n            }\n            context.textBaseline = 'alphabetic';\n            context.direction = 'ltr';\n            context.imageSmoothingEnabled = false;\n            \n            // Cache the fallback width once during initialization\n            const testText = \"AaBb123!@# אבגד אبت 你好世 あア अआऋИΔ สวั อา რუც კзءλ ⵍ 𐌄 фغ😀✔\";\n            const fontSize = '48px';\n            context.font = `${fontSize} \"non-existed-font\", non-existed-fallback`;\n            fallbackWidth = context.measureText(testText).width;\n        }\n\n        function detectFont(fontName) {\n            const testText = \"AaBb123!@# אבגד אبت 你好世 あア अआऋИΔ สวั อา რუც კзءλ ⵍ 𐌄 фغ😀✔\";\n            const fontSize = '48px';\n            context.font = `${fontSize} \"${fontName}\", non-existed-fallback`;\n            const testWidth = context.measureText(testText).width;\n            return testWidth !== fallbackWidth;\n        }\n\n        function detectFontsBatch(fontNames) {\n            const testText = \"AaBb123!@# אבגד אبت 你好世 あア अआऋИΔ สวั อา რუც კзءλ ⵍ 𐌄 фغ😀✔\";\n            const fontSize = '48px';\n            \n            const results = {};\n            for (const fontName of fontNames) {\n                context.font = `${fontSize} \"${fontName}\", non-existed-fallback`;\n                const testWidth = context.measureText(testText).width;\n                results[fontName] = testWidth !== fallbackWidth;\n            }\n            return results;\n        }\n\n        self.postMessage({ type: 'ready' });\n    ");var YE=function(){return function(e,t,n){return t&&qE(e.prototype,t),n&&qE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new Error("domUtils is required for FontDetectorProvider.");this._domUtils=t,this._logsTag="[FONTS-COLLECTOR]"},[{key:"getBestDetector",value:function(){for(var e=this,t=0,n=[{detector:function(){return new VE},name:"WorkerFontDetector"},{detector:function(){return new RE(e._domUtils)},name:"CanvasFontDetector"}];t<n.length;t++){var r=n[t],o=r.detector,i=r.name;try{var a=o();if(a.isSupported())return yt.info("".concat(this._logsTag," Using ").concat(i)),a}catch(e){yt.error("".concat(this._logsTag," ").concat(i," failed:"),e)}}throw new Error("[FontDetectorProvider] No suitable font detection implementation is supported in this environment.")}}])}();function XE(e){return XE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XE(e)}function ZE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$E(r.key),r)}}function $E(e){var t=function(e,t){if("object"!=XE(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=XE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==XE(t)?t:t+""}var ek=function(){return function(e,t,n){return t&&ZE(e.prototype,t),n&&ZE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},[{key:"resolve",value:function(e){var t,n,r,o,i=e.utils,a=e.domUtils,u=e.configurationRepository,s=e.fontVersion,c=e.fontDetector,l=void 0===c?null:c;if(s===oS.VERSION1)return u.get(he)?new HS(a):new DS(a);var f=new YE(a),p=JSON.parse(u.get(be)||"{}"),h=null!=l?l:f.getBestDetector();if(h instanceof VE)return new fE({detector:h});var y=null!==(t=null==p||null===(n=p.v2)||void 0===n?void 0:n.batchSize)&&void 0!==t?t:10,d=null!==(r=null==p||null===(o=p.v2)||void 0===o?void 0:o.timeoutGap)&&void 0!==r?r:0;return new $S({utils:i,domUtils:a,detector:h,batchSize:y,timeoutGap:d})}}])}(),tk=ek;function nk(e){return nk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nk(e)}function rk(e){return function(e){if(Array.isArray(e))return ak(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ik(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ok(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||ik(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ik(e,t){if(e){if("string"==typeof e)return ak(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ak(e,t):void 0}}function ak(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function uk(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return sk(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(sk(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,sk(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,sk(f,"constructor",c),sk(c,"constructor",s),s.displayName="GeneratorFunction",sk(c,o,"GeneratorFunction"),sk(f),sk(f,o,"Generator"),sk(f,r,function(){return this}),sk(f,"toString",function(){return"[object Generator]"}),(uk=function(){return{w:i,m:p}})()}function sk(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}sk=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){sk(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},sk(e,t,n,r)}function ck(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function lk(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){ck(i,r,o,a,u,"next",e)}function u(e){ck(i,r,o,a,u,"throw",e)}a(void 0)})}}function fk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pk(r.key),r)}}function pk(e){var t=function(e,t){if("object"!=nk(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nk(t)?t:t+""}var hk=function(){return function(e,t,n){return t&&fk(e.prototype,t),n&&fk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n,r,o,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new Error("CDUtils instance is required.");if(!n)throw new Error("DOMUtils instance is required.");if(!r)throw new Error("DataQueue instance is required.");if(!o)throw new Error("ConfigurationRepository instance is required.");if(!Object.values(oS).includes(i))throw new Error("Invalid font version type. Use one of: ".concat(Object.keys(oS).join(", ")));this._logsTag="[FONTS-COLLECTOR][".concat(i,"]"),this._utils=t,this._domUtils=n,this._dataQueue=r,this._configRepo=o,this._fontVersion=i,this._fontScanner=null!=a?a:(new tk).resolve({utils:t,domUtils:n,configurationRepository:o,fontVersion:i,fontDetector:c}),this._fontsProvider=u||new SS,this._fontCache=s||new pS(t.StorageUtils),this._fontCacheExpiration=864e5,this._fontTimingService=l},[{key:"collectFonts",value:(t=lk(uk().m(function e(){var t,n,r,o,i,a,u,s,c,l,f,p,h,y;return uk().w(function(e){for(;;)switch(e.n){case 0:if(yt.info("".concat(this._logsTag," Starting font collection.")+" | Font version: ".concat(this._fontVersion)),r=this._fontCache.getStoredFonts(this._fontVersion),o=null!==(t=null==r?void 0:r.installedFonts)&&void 0!==t?t:r,i=null!==(n=null==r?void 0:r.scannedAt)&&void 0!==n?n:-1,yt.debug("".concat(this._logsTag," Cached fonts retrieved: ").concat(JSON.stringify(o))),e.p=1,a=Date.now()-i>this._fontCacheExpiration,!o||a){e.n=2;break}return yt.info("".concat(this._logsTag," Font collection complete using valid cache.")),e.a(2,o);case 2:return e.n=3,this._scanForInstalledFonts();case 3:if(u=e.v,s=u.installedFonts,c=u.scannedAt,l=u.scanTime,f=u.totalFontsScanned,p=u.totalFontsFound,!this._collectorHasStopped){e.n=4;break}return e.a(2);case 4:return h=this._utils.getHash(JSON.stringify(s)),yt.debug("".concat(this._logsTag," Detected fonts: ").concat(JSON.stringify(s)," | Hash: ").concat(h," | Count: ").concat(p)),e.n=5,this._fontCache.saveFonts({installedFonts:s,scannedAt:c},this._fontVersion);case 5:return yt.debug("".concat(this._logsTag," Font cache updated with new fonts.")),yt.info("".concat(this._logsTag," Font collection complete. Scan time: ").concat(l,"ms. Total Fonts Scanned: ").concat(f," Total Installed Fonts: ").concat(s.length)),e.a(2,s);case 6:return e.p=6,y=e.v,yt.error("".concat(this._logsTag," Error during font collection:"),y),e.a(2,o||[])}},e,this,[[1,6]])})),function(){return t.apply(this,arguments)})},{key:"release",value:function(){this._collectorHasStopped=!0,this._fontScanner.release()}},{key:"_scanForInstalledFonts",value:(e=lk(uk().m(function e(){var t,n,r,o,i,a,u,s,c,l,f;return uk().w(function(e){for(;;)switch(e.n){case 0:yt.info("".concat(this._logsTag," Starting font scanning process.")),t=Date.now(),n=this._fontsProvider.getFontsByVersion(this._fontVersion),r=[],o=0,i=Object.entries(n);case 1:if(!(o<i.length)){e.n=4;break}return a=ok(i[o],2),u=a[0],s=a[1],e.n=2,this._fontScanner.scan(s,u);case 2:c=e.v,r.push.apply(r,rk(c));case 3:o++,e.n=1;break;case 4:return l=Date.now()-t,f=Object.values(n).reduce(function(e,t){return e+t.length},0),this._fontTimingService&&this._fontTimingService.recordFontScan({scanTime:l,totalFontsScanned:f,totalFontsFound:r.length,fontVersion:this._fontVersion,scannedAt:Date.now()}),e.a(2,{installedFonts:r,scanTime:l,scannedAt:Date.now(),totalFontsScanned:f,totalFontsFound:r.length})}},e,this)})),function(){return e.apply(this,arguments)})}]);var e,t}();function yk(e){return yk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yk(e)}function dk(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return mk(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(mk(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,mk(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,mk(f,"constructor",c),mk(c,"constructor",s),s.displayName="GeneratorFunction",mk(c,o,"GeneratorFunction"),mk(f),mk(f,o,"Generator"),mk(f,r,function(){return this}),mk(f,"toString",function(){return"[object Generator]"}),(dk=function(){return{w:i,m:p}})()}function mk(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}mk=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){mk(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},mk(e,t,n,r)}function vk(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function bk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gk(r.key),r)}}function gk(e){var t=function(e,t){if("object"!=yk(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=yk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yk(t)?t:t+""}function _k(e,t,n){return t=Sk(t),function(e,t){if(t&&("object"==yk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,wk()?Reflect.construct(t,n||[],Sk(e).constructor):t.apply(e,n))}function wk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(wk=function(){return!!e})()}function Sk(e){return Sk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Sk(e)}function Ek(e,t){return Ek=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ek(e,t)}var kk={configKey:"isFonts",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!0,isFrameRelated:!1,runInUns:!0,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},Tk=function(e){function t(e,n,r,o){var i,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=_k(this,t))._logsTag="[FONTS-COLLECTOR][MAIN]",!e)throw new Error("CDUtils instance is required.");if(!n)throw new Error("DOMUtils instance is required.");if(!r)throw new Error("DataQueue instance is required.");if(!o)throw new Error("ConfigurationRepository instance is required.");return i._utils=e,i._domUtils=n,i._dataQueue=r,i._configRepo=o,i._v1Collector=a,i._v2Collector=u,i._fontTimingService=s,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ek(e,t)}(t,e),function(e,t,n){return t&&bk(e.prototype,t),n&&bk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:(n=dk().m(function e(){var t,n,r,o,i,a,u,s,c,l;return dk().w(function(e){for(;;)switch(e.n){case 0:if(yt.info("".concat(this._logsTag," Starting font feature.")),!this._isMobileDevice()){e.n=1;break}return yt.info("".concat(this._logsTag," Mobile phone has detected. aborting font detection.")),e.a(2);case 1:if(this._v1Collector||(this._v1Collector=new hk(this._utils,this._domUtils,this._dataQueue,this._configRepo,oS.VERSION1,null,null,null,null,this._fontTimingService)),this._v2Collector||(this._v2Collector=new hk(this._utils,this._domUtils,this._dataQueue,this._configRepo,oS.VERSION2,null,null,null,null,this._fontTimingService)),n=this._configRepo.get(be)||"{}",r=JSON.parse(n),yt.info("".concat(this._logsTag," Font collection config: ").concat(JSON.stringify(r))),(o=null!==(t=r.migrationMode)&&void 0!==t?t:Ur.DUAL_COLLECTION_V1_PRIORITY)!==Ur.V1_ONLY){e.n=3;break}return e.n=2,this._v1Collector.collectFonts();case 2:return i=e.v,this._enqueueFontData(rS.V1_ONLY,[i,null]),e.a(2);case 3:if(o!==Ur.DUAL_COLLECTION_V1_PRIORITY){e.n=6;break}return e.n=4,this._v1Collector.collectFonts();case 4:return a=e.v,this._enqueueFontData(rS.V1_ONLY,[a,null]),e.n=5,this._v2Collector.collectFonts();case 5:u=e.v,this._enqueueFontData(rS.V1_AND_V2,[a,u]);case 6:if(o!==Ur.DUAL_COLLECTION_V2_PRIORITY){e.n=9;break}return e.n=7,this._v2Collector.collectFonts();case 7:return s=e.v,this._enqueueFontData(rS.V2_ONLY,[null,s]),e.n=8,this._v1Collector.collectFonts();case 8:c=e.v,this._enqueueFontData(rS.V1_AND_V2,[c,s]);case 9:if(o!==Ur.V2_ONLY){e.n=11;break}return e.n=10,this._v2Collector.collectFonts();case 10:l=e.v,this._enqueueFontData(rS.V2_ONLY,[null,l]);case 11:return e.a(2)}},e,this)}),r=function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function a(e){vk(i,r,o,a,u,"next",e)}function u(e){vk(i,r,o,a,u,"throw",e)}a(void 0)})},function(){return r.apply(this,arguments)})},{key:"stopFeature",value:function(){var e,t;yt.info("".concat(this._logsTag," Stopping font feature.")),this._collectorHasStopped=!0,null===(e=this._v1Collector)||void 0===e||e.release(),null===(t=this._v2Collector)||void 0===t||t.release(),this._v1Collector=null,this._v2Collector=null}},{key:"_enqueueFontData",value:function(e,t){if(!this._collectorHasStopped){if(!t)throw Error("IllegalState fonts undefined");var n=new nS(e,t).buildQueueMessage();this._dataQueue.addToQueue("static_fields",n,!1),yt.debug("".concat(this._logsTag," Fonts enqueued: ").concat(JSON.stringify(t)))}}},{key:"_isMobileDevice",value:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}}],[{key:"getDefaultSettings",value:function(){return kk}}]);var n,r}(Qo);function Pk(e){return Pk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pk(e)}function Ok(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ck(r.key),r)}}function Ck(e){var t=function(e,t){if("object"!=Pk(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Pk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pk(t)?t:t+""}function jk(e,t,n){return t=Mk(t),function(e,t){if(t&&("object"==Pk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Rk()?Reflect.construct(t,n||[],Mk(e).constructor):t.apply(e,n))}function Rk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Rk=function(){return!!e})()}function Mk(e){return Mk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mk(e)}function Bk(e,t){return Bk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Bk(e,t)}var Ak=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=jk(this,t)).validateParams(e,n,r),o.winding=e,o.text=n,o.geometry=r,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bk(e,t)}(t,e),function(e,t,n){return t&&Ok(e.prototype,t),n&&Ok(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e,t,n){if(!("boolean"==typeof e&&"string"==typeof t&&"string"==typeof n)){var r="wrong type in GfxRenderingContract parameters. winding: {expected: boolean, received: ".concat(Pk(e),"}, text: {expected: string, received: ").concat(Pk(t),"},\n            geometry: {expected: string, received: ").concat(Pk(n),"}");yt.warn(r)}}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),[this.winding,this.text,this.geometry]];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&Array.isArray(e[1])&&3===e[1].length||yt.warn("GfxRendering - Contract verification failed")}},{key:"getName",value:function(){return"gfx"}}])}(Nm);function xk(e){return xk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xk(e)}function Dk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ik(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ik(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ik(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Lk(e,t,n){return t=Nk(t),function(e,t){if(t&&("object"==xk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Fk()?Reflect.construct(t,n||[],Nk(e).constructor):t.apply(e,n))}function Fk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Fk=function(){return!!e})()}function Nk(e){return Nk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nk(e)}function Uk(e,t){return Uk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Uk(e,t)}function Wk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Hk(r.key),r)}}function Gk(e,t,n){return t&&Wk(e.prototype,t),n&&Wk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hk(e){var t=function(e,t){if("object"!=xk(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=xk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xk(t)?t:t+""}function Qk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var zk={configKey:"isGfxRendering",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInUns:!1,runInSlave:!0,runInLean:!0,isRunning:!1,instance:null},Vk=256,Kk=256,qk="0",Jk=Gk(function e(){Qk(this,e),this.winding=!1,this.text="",this.geometry=""}),Yk=function(e){function t(e,n){var r;return Qk(this,t),(r=Lk(this,t))._dataQ=e,r._utils=n,r._metric="GFX",r.canvasElement=null,r.canvasContext=null,r._addToQueueAndCleanUp=r.addToQueueAndCleanUp.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uk(e,t)}(t,e),Gk(t,[{key:"startFeature",value:function(){this.initCanvasAndContext(),this.isCanvas2DSupported(this.canvasElement,this.canvasContext)&&this.generateCanvasData()}},{key:"addToQueueAndCleanUp",value:function(e){var t=new Ak(e.winding,e.text,e.geometry).buildQueueMessage();this._dataQ.addToQueue("static_fields",t,!1),this.cleanUp()}},{key:"initCanvasAndContext",value:function(){null!==this.canvasElement&&null!==this.canvasContext||(this.canvasElement=document.createElement("canvas"),this.canvasContext=this.buildCanvasContext(this.canvasElement))}},{key:"cleanUp",value:function(){this.canvasContext=null,this.canvasElement=null}},{key:"generateCanvasData",value:function(){var e=this,t=new Jk;t.winding=this.hasWinding(this.canvasContext),this.renderTextImage(this.canvasElement,this.canvasContext);var n=this.canvasToText(this.canvasElement),r=this.canvasToText(this.canvasElement);0===n.length||0===r.length||n!==r?(t.text=qk,t.geometry=qk,this._addToQueueAndCleanUp(t)):this.hashCanvasText(n).then(function(n){return t.text=n||qk,e.renderGeometryImage(e.canvasElement,e.canvasContext),e.hashCanvasText(e.canvasToText(e.canvasElement))}).then(function(n){t.geometry=n||qk,e._addToQueueAndCleanUp(t)})}},{key:"buildCanvasContext",value:function(e){return e.width=1,e.height=1,e.getContext("2d")}},{key:"isCanvas2DSupported",value:function(e,t){return!(!t||!e.toDataURL)}},{key:"renderTextImage",value:function(e,t){e.width=320,e.height=120;var n=t.createLinearGradient(0,0,320,120);n.addColorStop(0,"#f60"),n.addColorStop(1,"#069"),t.fillStyle=n,t.fillRect(0,0,320,120),t.textBaseline="alphabetic",t.fillStyle="#fff",t.font="11pt Times New Roman";var r="DHO YbmPx KTGUL CQrSfJ iNvZAEW ".concat(String.fromCharCode(55357,56835)," 😄 💩 ⚓ ↔");t.fillText(r,2,15),t.save(),t.translate(4,45),t.rotate(.1),t.font="18pt Arial",t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(r,0,0),t.restore(),t.font="14pt Georgia",t.shadowColor="rgba(0, 0, 0, 0.5)",t.shadowBlur=2,t.shadowOffsetX=1,t.shadowOffsetY=1,t.fillStyle="#ff0",t.save(),t.transform(1,.1,0,1,0,0),t.fillText(r,2,75),t.restore(),t.shadowColor="transparent";var o=t.createPattern(this.createPatternCanvas(),"repeat");t.font="16pt Verdana",t.fillStyle=o,t.fillText(r,2,100)}},{key:"createPatternCanvas",value:function(){var e=document.createElement("canvas");e.width=20,e.height=20;var t=e.getContext("2d");return t.fillStyle="#f00",t.fillRect(0,0,10,10),t.fillStyle="#00f",t.fillRect(10,10,10,10),e}},{key:"renderGeometryImage",value:function(e,t){e.width=Vk,e.height=Kk;var n=t.createRadialGradient(128,128,0,128,128,128);n.addColorStop(0,"#f2f"),n.addColorStop(.5,"#2ff"),n.addColorStop(1,"#ff2"),t.fillStyle=n,t.fillRect(0,0,Vk,Kk),t.globalCompositeOperation="multiply";for(var r=0,o=[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]];r<o.length;r++){var i=Dk(o[r],3),a=i[0],u=i[1],s=i[2];t.fillStyle=a,t.beginPath(),t.arc(u,s,40,0,2*Math.PI,!0),t.closePath(),t.fill()}t.globalCompositeOperation="screen",t.fillStyle="#f9c",t.beginPath(),t.arc(60,60,60,0,2*Math.PI,!0),t.arc(60,60,20,0,2*Math.PI,!0),t.fill("evenodd"),t.globalCompositeOperation="difference",t.beginPath(),t.moveTo(20,20),t.bezierCurveTo(40,40,60,40,80,20),t.strokeStyle="#0f0",t.lineWidth=3,t.stroke(),t.globalCompositeOperation="luminosity";for(var c=0;c<5;c++)t.beginPath(),t.moveTo(0,50*c),t.lineTo(Vk,50*c),t.strokeStyle="rgba(255, 255, 255, ".concat(.2+.1*c,")"),t.stroke()}},{key:"canvasToText",value:function(e){try{return e.toDataURL().split(",")[1]}catch(e){return""}}},{key:"hashCanvasText",value:function(e){return this._utils.digest_sha256(e).then(function(e){return e}).catch(function(){return""})}},{key:"hasWinding",value:function(e){return e.rect(0,0,10,10),e.rect(2,2,6,6),!e.isPointInPath(5,5,"evenodd")}}],[{key:"getDefaultSettings",value:function(){return zk}}])}(Qo);function Xk(e){return Xk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xk(e)}function Zk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$k(r.key),r)}}function $k(e){var t=function(e,t){if("object"!=Xk(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Xk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xk(t)?t:t+""}function eT(e,t,n){return t=nT(t),function(e,t){if(t&&("object"==Xk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,tT()?Reflect.construct(t,n||[],nT(e).constructor):t.apply(e,n))}function tT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(tT=function(){return!!e})()}function nT(e){return nT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nT(e)}function rT(e,t){return rT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rT(e,t)}var oT=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=eT(this,t)).validateParams(e),n.acoustic=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rT(e,t)}(t,e),function(e,t,n){return t&&Zk(e.prototype,t),n&&Zk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e){"string"==typeof e||yt.warn("wrong type in AudioDetect parameters. renderer: {expected: string, received: ".concat(Xk(e),"}"))}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),this.acoustic];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&"string"==typeof e[1]||yt.warn("AudioDetect - Contract verification failed")}},{key:"getName",value:function(){return"audio_detect"}}])}(Nm);function iT(e){return iT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iT(e)}function aT(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return uT(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(uT(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,uT(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,uT(f,"constructor",c),uT(c,"constructor",s),s.displayName="GeneratorFunction",uT(c,o,"GeneratorFunction"),uT(f),uT(f,o,"Generator"),uT(f,r,function(){return this}),uT(f,"toString",function(){return"[object Generator]"}),(aT=function(){return{w:i,m:p}})()}function uT(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}uT=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){uT(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},uT(e,t,n,r)}function sT(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function cT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lT(r.key),r)}}function lT(e){var t=function(e,t){if("object"!=iT(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=iT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==iT(t)?t:t+""}function fT(e,t,n){return t=hT(t),function(e,t){if(t&&("object"==iT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,pT()?Reflect.construct(t,n||[],hT(e).constructor):t.apply(e,n))}function pT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(pT=function(){return!!e})()}function hT(e){return hT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hT(e)}function yT(e,t){return yT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yT(e,t)}var dT={configKey:"isAudioDetectFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInUns:!1,runInSlave:!0,runInLean:!0,isRunning:!1,instance:null},mT=1,vT=5e3,bT=44100,gT="triangle",_T=1e4,wT={threshold:-50,knee:40,ratio:12,attack:0,release:.25},ST=500,ET=3,kT=4500,TT=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=fT(this,t))._dataQ=e,r._utils=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yT(e,t)}(t,e),function(e,t,n){return t&&cT(e.prototype,t),n&&cT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:function(){yt.info("Starting Audio Detection Feature");try{this._collectAudioFingerprintInfo()}catch(e){yt.error("Failed to collect audio information: ".concat(e))}}},{key:"_collectAudioFingerprintInfo",value:function(){var e=this;yt.info("Collecting audio properties"),this._getAudioFingerprint().then(function(t){return e._utils.digest_sha256(t)}).then(function(t){var n=new oT(t).buildQueueMessage();e._dataQ.addToQueue("static_fields",n,!1),yt.info("Audio properties collected successfully")}).catch(function(e){yt.error("Error collecting audio information: ".concat(e))})}},{key:"_getAudioFingerprint",value:(n=aT().m(function e(){var t,n,r,o,i;return aT().w(function(e){for(;;)switch(e.n){case 0:if(e.p=0,t=window.OfflineAudioContext||window.webkitOfflineAudioContext){e.n=1;break}throw new Error("AudioContext is not supported");case 1:return n=new t(mT,vT,bT),r=n.createOscillator(),o=n.createDynamicsCompressor(),r.type=gT,r.frequency.value=_T,o.threshold.value=wT.threshold,o.knee.value=wT.knee,o.ratio.value=wT.ratio,o.attack.value=wT.attack,o.release.value=wT.release,r.connect(o),o.connect(n.destination),r.start(0),e.a(2,this._renderAudio(n).then(function(e){return e.getChannelData(0).subarray(kT).toString()}));case 2:throw e.p=2,i=e.v,yt.error("Error initializing audio fingerprint: ".concat(i)),i;case 3:return e.a(2)}},e,this,[[0,2]])}),r=function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function a(e){sT(i,r,o,a,u,"next",e)}function u(e){sT(i,r,o,a,u,"throw",e)}a(void 0)})},function(){return r.apply(this,arguments)})},{key:"_renderAudio",value:function(e){var t=ST,n=ET,r=0;return new Promise(function(o,i){var a=function(){try{var u=e.startRendering();"running"===e.state?o(u):"suspended"!==e.state||document.hidden||(++r<n?setTimeout(a,t):i(new Error("Audio context suspended")))}catch(e){i(e)}};a()})}}],[{key:"getDefaultSettings",value:function(){return dT}}]);var n,r}(Qo);function PT(e){return PT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PT(e)}function OT(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return CT(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(CT(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,CT(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,CT(f,"constructor",c),CT(c,"constructor",s),s.displayName="GeneratorFunction",CT(c,o,"GeneratorFunction"),CT(f),CT(f,o,"Generator"),CT(f,r,function(){return this}),CT(f,"toString",function(){return"[object Generator]"}),(OT=function(){return{w:i,m:p}})()}function CT(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}CT=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){CT(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},CT(e,t,n,r)}function jT(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=MT(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function RT(e){return function(e){if(Array.isArray(e))return BT(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||MT(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function MT(e,t){if(e){if("string"==typeof e)return BT(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?BT(e,t):void 0}}function BT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function AT(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function xT(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){AT(i,r,o,a,u,"next",e)}function u(e){AT(i,r,o,a,u,"throw",e)}a(void 0)})}}function DT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function IT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DT(Object(n),!0).forEach(function(t){LT(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DT(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function LT(e,t,n){return(t=NT(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,NT(r.key),r)}}function NT(e){var t=function(e,t){if("object"!=PT(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=PT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==PT(t)?t:t+""}function UT(e,t,n){return t=GT(t),function(e,t){if(t&&("object"==PT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,WT()?Reflect.construct(t,n||[],GT(e).constructor):t.apply(e,n))}function WT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(WT=function(){return!!e})()}function GT(e){return GT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},GT(e)}function HT(e,t){return HT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},HT(e,t)}var QT={sampleRate:44100,cloneCount:4e4,stabilizationPrecision:6.2,targetSampleIndex:3395,signals:[{type:"square",frequency:1e3,detune:0,phase:0,harmonics:[{frequency:2e3,amplitude:.3},{frequency:3e3,amplitude:.2}]},{type:"sine",frequency:2e3,detune:0,phase:0,modulation:{frequency:5,depth:.1}},{type:"triangle",frequency:3e3,detune:0,phase:0,formants:[{frequency:500,bandwidth:50},{frequency:1500,bandwidth:100}]},{type:"sawtooth",frequency:4e3,detune:0,phase:0,resonance:{frequency:6e3,Q:10}}],compressor:{threshold:-70,knee:40,ratio:12,attack:0,release:.25,makeupGain:0,bypass:!1},filters:[{type:"allpass",frequency:5.239622852977861,Q:.1,gain:0},{type:"highpass",frequency:20,Q:1,gain:0},{type:"lowpass",frequency:2e4,Q:1,gain:0}],analysis:{fftSize:2048,smoothingTimeConstant:.8,minDecibels:-100,maxDecibels:-30,spectralPeaks:10,phaseAnalysis:!0,harmonicDetection:!0},browserOptimizations:{safari:{loopStartOffset:1e-11,loopEndOffset:1e-11,retryAttempts:3},chrome:{useWorklet:!1,bufferSize:4096},firefox:{useSharedArrayBuffer:!1,audioWorkletSupport:!1}}},zT={configKey:"isAudioDetectFeature2",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},VT=function(e){function t(e,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=UT(this,t),!e)throw new Error("DataQueue is required");if(!n)throw new Error("Utils is required");r._dataQ=e,r._utils=n;var i=o.audioContext||{};if(r._AudioContext=i.regular||window.AudioContext||window.webkitAudioContext,r._OfflineAudioContext=i.offline||window.OfflineAudioContext||window.webkitOfflineAudioContext,!r._AudioContext||!r._OfflineAudioContext)throw new Error("AudioContext constructors are required");if(r._performance=o.performance||window.performance,!r._performance)throw new Error("Performance API is required");return r._audioConfig=o.audioConfig||IT({},QT),r._featureSettings=o.featureSettings||IT({},zT),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HT(e,t)}(t,e),function(e,t,n){return t&&FT(e.prototype,t),n&&FT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:function(){yt.info("Starting Advanced Audio Detection Feature 2");try{this._collectAudioFingerprintInfo()}catch(e){yt.error("Failed to collect audio information: ".concat(e))}}},{key:"_collectAudioFingerprintInfo",value:function(){var e=this;yt.info("Collecting advanced audio properties (method 2)"),this._getAdvancedAudioFingerprint().then(function(t){return e._utils.digest_sha256(t.toString())}).then(function(t){e._dataQ.addToQueue("static_fields",["audio_detect2",t],!1),yt.info("Advanced audio properties collected successfully (method 2) "+t)}).catch(function(e){yt.error("Error collecting audio information: ".concat(e))})}},{key:"_getAdvancedAudioFingerprint",value:(u=xT(OT().m(function e(){var t,n,r,o,i,a,u,s,c,l,f,p,h=this;return OT().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,this._getAudioContextInfo();case 1:return t=e.v,e.n=2,Promise.all([this._getBaseSignal(this._OfflineAudioContext)].concat(RT(this._audioConfig.signals.map(function(e){return h._getAdvancedSignal(e)}))));case 2:n=e.v,r=[],o=jT(n),e.p=3,o.s();case 4:if((i=o.n()).done){e.n=7;break}if(!(a=i.value)){e.n=6;break}return e.n=5,this._applyAdvancedProcessing(a);case 5:(u=e.v)&&u.buffer&&u.metrics&&r.push({buffer:u.buffer,metrics:u.metrics});case 6:e.n=4;break;case 7:e.n=9;break;case 8:e.p=8,f=e.v,o.e(f);case 9:return e.p=9,o.f(),e.f(9);case 10:if(0!==r.length){e.n=11;break}throw new Error("No valid processed signals");case 11:return e.n=12,this._combineSignalsAdvanced(r.map(function(e){return e.buffer}));case 12:return s=e.v,c=this._generateCompositeFingerprint(s,r.map(function(e){return e.metrics}),t),l=this._stabilizeAdvanced(c,t),e.a(2,this._stabilize(l,this._audioConfig.stabilizationPrecision));case 13:throw e.p=13,p=e.v,yt.error("Error in advanced audio fingerprinting: ".concat(p)),p;case 14:return e.a(2)}},e,this,[[3,8,9,10],[0,13]])})),function(){return u.apply(this,arguments)})},{key:"_getAudioContextInfo",value:(a=xT(OT().m(function e(){var t,n,r,o,i,a,u,s;return OT().w(function(e){for(;;)if(0===e.n){for(t=new this._AudioContext,n={sampleRate:t.sampleRate,baseLatency:t.baseLatency||0,maxChannelCount:t.destination.maxChannelCount,state:t.state,supportedSampleRates:[],supportedChannelCounts:[],browser:this._browserInfo},r=0,o=[8e3,11025,16e3,22050,24e3,32e3,44100,48e3,88200,96e3];r<o.length;r++){i=o[r];try{a=new this._AudioContext({sampleRate:i}),n.supportedSampleRates.push(i),"function"==typeof a.close&&a.close()}catch(e){}}for(u=1;u<=32;u*=2)try{(s=new this._AudioContext).createChannelMerger(u),n.supportedChannelCounts.push(u),"function"==typeof s.close&&s.close()}catch(e){}return"function"==typeof t.close&&t.close(),e.a(2,n)}},e,this)})),function(){return a.apply(this,arguments)})},{key:"_getBaseSignal",value:(i=xT(OT().m(function e(t){var n,r,o,i;return OT().w(function(e){for(;;)switch(e.n){case 0:return n=new t(1,this._audioConfig.targetSampleIndex+1,this._audioConfig.sampleRate),(r=n.createOscillator()).type="square",r.frequency.value=1e3,(o=n.createDynamicsCompressor()).threshold.value=-70,o.knee.value=40,o.ratio.value=12,o.attack.value=0,o.release.value=.25,(i=n.createBiquadFilter()).type="allpass",i.frequency.value=5.239622852977861,i.Q.value=.1,r.connect(o),o.connect(i),i.connect(n.destination),r.start(0),e.n=1,this._renderAudio(n);case 1:return e.a(2,e.v)}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"_getAdvancedSignal",value:(o=xT(OT().m(function e(t){var n,r,o,i,a,u,s,c,l;return OT().w(function(e){for(;;)switch(e.n){case 0:return n=new this._OfflineAudioContext(1,this._audioConfig.targetSampleIndex+1,this._audioConfig.sampleRate),(r=n.createOscillator()).type=t.type,r.frequency.value=t.frequency,0!==t.detune&&(r.detune.value=t.detune),o=this._createAdvancedCompressor(n),i=this._createFilterChain(n),(a=r).connect(o),a=o,i.forEach(function(e){a.connect(e),a=e}),t.harmonics&&(u=n.createGain(),a.connect(u),t.harmonics.forEach(function(e){var t=n.createOscillator();t.type="sine",t.frequency.value=e.frequency,t.connect(u,0,0),u.gain.value=e.amplitude,t.start(0)}),a=u),t.modulation&&((s=n.createOscillator()).type="sine",s.frequency.value=t.modulation.frequency,(c=n.createGain()).gain.value=t.modulation.depth,s.connect(c),c.connect(r.frequency),s.start(0)),t.formants&&t.formants.forEach(function(e){var t=n.createBiquadFilter();t.type="bandpass",t.frequency.value=e.frequency,t.Q.value=e.frequency/e.bandwidth,a.connect(t),a=t}),t.resonance&&((l=n.createBiquadFilter()).type="peaking",l.frequency.value=t.resonance.frequency,l.Q.value=t.resonance.Q,l.gain.value=6,a.connect(l),a=l),a.connect(n.destination),r.start(0),e.n=1,this._renderAudio(n);case 1:return e.a(2,e.v)}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"_createAdvancedCompressor",value:function(e){var t=e.createDynamicsCompressor(),n=this._audioConfig.compressor;return t.threshold.value=n.threshold,t.knee.value=n.knee,t.ratio.value=n.ratio,t.attack.value=n.attack,t.release.value=n.release,t.makeupGain&&(t.makeupGain.value=n.makeupGain),t}},{key:"_createFilterChain",value:function(e){return this._audioConfig.filters.map(function(t){var n=e.createBiquadFilter();return n.type=t.type,n.frequency.value=t.frequency,n.Q.value=t.Q,n.gain.value=t.gain,n})}},{key:"_applyAdvancedProcessing",value:(r=xT(OT().m(function e(t){var n,r,o,i,a,u;return OT().w(function(e){for(;;)switch(e.n){case 0:if(n=new this._AudioContext,t instanceof AudioBuffer){e.n=1;break}throw new Error("Invalid audio signal: expected AudioBuffer");case 1:return(r=n.createAnalyser()).fftSize=this._audioConfig.analysis.fftSize,r.smoothingTimeConstant=this._audioConfig.analysis.smoothingTimeConstant,r.minDecibels=this._audioConfig.analysis.minDecibels,r.maxDecibels=this._audioConfig.analysis.maxDecibels,(o=n.createBufferSource()).buffer=t,o.connect(r),r.connect(n.destination),o.start(0),i=new Float32Array(r.frequencyBinCount),a=new Float32Array(r.frequencyBinCount),r.getFloatFrequencyData(i),r.getFloatTimeDomainData(a),u={spectral:this._analyzeSpectralData(i),phase:this._analyzePhaseData(a),dynamic:this._analyzeDynamicRange(i),harmonic:this._analyzeHarmonicContent(i,a),temporal:this._analyzeTemporalCharacteristics(a)},e.a(2,{buffer:t,metrics:u})}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"_analyzeSpectralData",value:function(e){var t={peaks:[],centroid:0,spread:0,skewness:0,kurtosis:0};if(!e||0===e.length)return t;for(var n=1;n<e.length-1;n++)e[n]>e[n-1]&&e[n]>e[n+1]&&t.peaks.push({index:n,magnitude:e[n]});t.peaks.sort(function(e,t){return t.magnitude-e.magnitude}),t.peaks=t.peaks.slice(0,this._audioConfig.analysis.spectralPeaks);for(var r=0,o=0,i=0;i<e.length;i++){var a=Math.pow(10,e[i]/20);r+=i*a,o+=a}if(o>0&&(t.centroid=r/o),o>0){for(var u=0,s=0;s<e.length;s++){var c=Math.pow(10,e[s]/20);u+=Math.pow(s-t.centroid,2)*c}t.spread=Math.sqrt(u/o)}return t}},{key:"_analyzePhaseData",value:function(e){var t={zeroCrossings:0,phaseVariance:0,phaseCoherence:0};if(!e||0===e.length)return t;for(var n=e[0],r=1;r<e.length;r++)(n<0&&e[r]>=0||n>=0&&e[r]<0)&&t.zeroCrossings++,n=e[r];var o=e.reduce(function(e,t){return e+t},0)/e.length;if(t.phaseVariance=e.reduce(function(e,t){return e+Math.pow(t-o,2)},0)/e.length,e.length>1){for(var i=0,a=1;a<e.length;a++){var u=Math.abs(e[a]-e[a-1]);i+=Math.cos(u)}t.phaseCoherence=i/(e.length-1)}return t}},{key:"_analyzeDynamicRange",value:function(e){var t={crestFactor:0,dynamicRange:0,compressionRatio:0};if(!e||0===e.length)return t;var n=e.map(function(e){return Math.pow(10,e/20)}).filter(function(e){return e>0});if(0===n.length)return t;var r=Math.sqrt(n.reduce(function(e,t){return e+t*t},0)/n.length),o=Math.max.apply(Math,RT(n));if(r>0){t.crestFactor=o/r;var i=Math.min.apply(Math,RT(n));t.dynamicRange=20*Math.log10(o/i)}return t}},{key:"_analyzeHarmonicContent",value:function(e,t){var n={totalHarmonicDistortion:0,harmonicSpectrum:0};if(!e||0===e.length)return n;var r=e.map(function(e){return Math.pow(10,e/20)}),o=Math.max.apply(Math,RT(r)),i=r.filter(function(e,t){return t>0&&e>.1*o}).reduce(function(e,t){return e+t*t},0);return n.totalHarmonicDistortion=o>0?Math.sqrt(i)/o:0,n}},{key:"_analyzeTemporalCharacteristics",value:function(e){var t={attackTime:0,decayTime:0,sustainLevel:0};if(!e||0===e.length)return t;var n=this._calculateEnvelope(e);if(n.length>0){for(var r=.9*Math.max.apply(Math,RT(n)),o=0,i=0;i<n.length;i++)if(n[i]>=r){o=i;break}t.attackTime=o/this._audioConfig.sampleRate}return t}},{key:"_calculateEnvelope",value:function(e){for(var t=[],n=Math.max(1,Math.floor(.001*e.length)),r=0;r<e.length;r+=n){var o=e.slice(r,Math.min(r+n,e.length)),i=Math.sqrt(o.reduce(function(e,t){return e+t*t},0)/o.length);t.push(i)}return t}},{key:"_combineSignalsAdvanced",value:(n=xT(OT().m(function e(t){var n,r,o,i,a,u,s,c,l,f;return OT().w(function(e){for(;;)switch(e.n){case 0:if(Array.isArray(t)&&0!==t.length){e.n=1;break}throw new Error("Invalid signals array");case 1:for(n=new this._OfflineAudioContext(1,this._audioConfig.targetSampleIndex+1,this._audioConfig.sampleRate),r=n.createBuffer(1,n.length,n.sampleRate),o=r.getChannelData(0),i=t.map(function(e,t){return 1-.1*t}),a=i.reduce(function(e,t){return e+t},0),u=0;u<o.length;u++){for(s=0,c=0;c<t.length;c++)l=t[c],f=l.getChannelData(0),u<f.length&&(s+=f[u]*i[c]);o[u]=s/a}return e.a(2,r)}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"_generateCompositeFingerprint",value:function(e,t,n){var r=this,o=this._hashSignal(e.getChannelData(0)),i=t.reduce(function(e,t,n){var o=1+.1*n,i=r._hashSpectralMetrics(t.spectral||{}),a=r._hashPhaseMetrics(t.phase||{}),u=r._hashDynamicMetrics(t.dynamic||{}),s=r._hashHarmonicMetrics(t.harmonic||{}),c=r._hashTemporalMetrics(t.temporal||{}),l=r._combineHashes([i,a,u,s,c]),f=Math.floor(l*o);return r._combineHashes([e,f])},0),a=this._hashContextInfo(n);return this._combineHashes([o,i,a])}},{key:"_hashSignal",value:function(e){if(!e||!e.length)return 0;var t=0;return[1,10,50,100].forEach(function(n){for(var r=0;r<e.length;r+=n){var o=e[r]||0,i=1+r/e.length*.5;t=(t<<5)-t+o*i,t&=t}}),t}},{key:"_hashSpectralMetrics",value:function(e){var t=0;return Array.isArray(e.peaks)&&e.peaks.forEach(function(e){e&&"object"===PT(e)&&(t=((t=(t<<5)-t+(e.index||0))<<5)-t+(e.magnitude||0))}),(t=((t=((t=((t=(t<<5)-t+(e.centroid||0))<<5)-t+(e.spread||0))<<5)-t+(e.skewness||0))<<5)-t+(e.kurtosis||0))&t}},{key:"_hashPhaseMetrics",value:function(e){var t=0;return(t=((t=((t=(t<<5)-t+(e.zeroCrossings||0))<<5)-t+(e.phaseVariance||0))<<5)-t+(e.phaseCoherence||0))&t}},{key:"_hashDynamicMetrics",value:function(e){var t=0;return(t=((t=((t=(t<<5)-t+(e.crestFactor||0))<<5)-t+(e.dynamicRange||0))<<5)-t+(e.compressionRatio||0))&t}},{key:"_hashHarmonicMetrics",value:function(e){var t=0;return(t=((t=(t<<5)-t+(e.totalHarmonicDistortion||0))<<5)-t+(e.harmonicSpectrum||0))&t}},{key:"_hashTemporalMetrics",value:function(e){var t=0;return(t=((t=((t=(t<<5)-t+(e.attackTime||0))<<5)-t+(e.decayTime||0))<<5)-t+(e.sustainLevel||0))&t}},{key:"_hashContextInfo",value:function(e){var t=0;return t=((t=((t=((t=((t=(t<<5)-t+e.sampleRate)<<5)-t+e.baseLatency)<<5)-t+e.maxChannelCount)<<5)-t+this._hashString(e.state))<<5)-t+this._hashString(e.browser),e.supportedSampleRates.forEach(function(e){t=(t<<5)-t+e}),e.supportedChannelCounts.forEach(function(e){t=(t<<5)-t+e}),t&t}},{key:"_hashString",value:function(e){var t=0;"string"!=typeof e&&(e=String(e));for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}},{key:"_combineHashes",value:function(e){return e.reduce(function(e,t){return(e=(e<<5)-e+t)&e},0)}},{key:"_stabilizeAdvanced",value:function(e,t){var n=e;return n=((n=(n<<5)-n+this._hashContextInfo(t))<<5)-n+this._hashBrowserQuirks(t),n&=n}},{key:"_hashBrowserQuirks",value:function(e){var t=0;return(t=((t=((t=(t<<5)-t+this._hashString(e.browser))<<5)-t+e.baseLatency)<<5)-t+e.maxChannelCount)&t}},{key:"_stabilize",value:function(e,t){if(0===e)return e;var n=Math.floor(Math.log10(Math.abs(e)))-Math.floor(t)+1,r=Math.pow(10,-n)*(10*t%10||1);return Math.round(e*r)/r}},{key:"_renderAudio",value:function(e){var t=this;return new Promise(function(n,r){var o,i=0,a=(null===(o=t._audioConfig.browserOptimizations[t._browserInfo])||void 0===o?void 0:o.retryAttempts)||3,u=function(){try{e.oncomplete=function(e){n(e.renderedBuffer)},e.onstatechange=function(){"suspended"===e.state&&e.resume()};var t=e.startRendering();if(t&&t instanceof Promise)return t.then(function(){n(t)}).catch(r)}catch(e){++i<a?setTimeout(u,100):r(e)}};u()})}}],[{key:"getDefaultSettings",value:function(){return IT({},zT)}}]);var n,r,o,i,a,u}(Qo);function KT(e){return KT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KT(e)}function qT(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return JT(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(JT(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,JT(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,JT(f,"constructor",c),JT(c,"constructor",s),s.displayName="GeneratorFunction",JT(c,o,"GeneratorFunction"),JT(f),JT(f,o,"Generator"),JT(f,r,function(){return this}),JT(f,"toString",function(){return"[object Generator]"}),(qT=function(){return{w:i,m:p}})()}function JT(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}JT=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){JT(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},JT(e,t,n,r)}function YT(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function XT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ZT(r.key),r)}}function ZT(e){var t=function(e,t){if("object"!=KT(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=KT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==KT(t)?t:t+""}function $T(e,t,n){return t=tP(t),function(e,t){if(t&&("object"==KT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,eP()?Reflect.construct(t,n||[],tP(e).constructor):t.apply(e,n))}function eP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(eP=function(){return!!e})()}function tP(e){return tP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tP(e)}function nP(e,t){return nP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nP(e,t)}var rP={configKey:"enableEmuidFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},oP=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=$T(this,t))._encryptedMuidService=n,r._dataQ=e,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nP(e,t)}(t,e),function(e,t,n){return t&&XT(e.prototype,t),n&&XT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:(n=qT().m(function e(){var t;return qT().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this._encryptedMuidService.getEncryptedMuid();case 1:(t=e.v)&&this._dataQ.addToQueue("static_fields",["emuid",t],!1);case 2:return e.a(2)}},e,this)}),r=function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function a(e){YT(i,r,o,a,u,"next",e)}function u(e){YT(i,r,o,a,u,"throw",e)}a(void 0)})},function(){return r.apply(this,arguments)})}],[{key:"getDefaultSettings",value:function(){return rP}}]);var n,r}(Qo);function iP(e){return iP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iP(e)}function aP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,uP(r.key),r)}}function uP(e){var t=function(e,t){if("object"!=iP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=iP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==iP(t)?t:t+""}function sP(e,t,n){return t=lP(t),function(e,t){if(t&&("object"==iP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,cP()?Reflect.construct(t,n||[],lP(e).constructor):t.apply(e,n))}function cP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(cP=function(){return!!e})()}function lP(e){return lP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lP(e)}function fP(e,t){return fP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fP(e,t)}var pP={configKey:"isNavigatorFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!0,runInLean:!1,isRunning:!1,instance:null},hP=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.navigator;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=sP(this,t))._dataQ=e,n._navigator=r,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fP(e,t)}(t,e),function(e,t,n){return t&&aP(e.prototype,t),n&&aP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:function(){try{var e,t={oscpu:this._navigator.oscpu||null,pdfViewerEnabled:this._navigator.pdfViewerEnabled||null,webdriver:this._navigator.webdriver||null,userAgentData:this._navigator.userAgentData||null,appVersion:this._navigator.appVersion||null,platform:this._navigator.platform||null,vendor:this._navigator.vendor||null,productSub:this._navigator.productSub||null,vendorSub:this._navigator.vendorSub||null,onLine:this._navigator.onLine||null,getHighEntropyValues:Boolean(null===(e=this._navigator.userAgentData)||void 0===e?void 0:e.getHighEntropyValues),prototype:Object.getOwnPropertyNames(Object.getPrototypeOf(this._navigator))};yt.debug("NavigatorFeature: Collected navigator data",t),this._dataQ.addToQueue("static_fields",["navigator_oscpu",t.oscpu],!1),this._dataQ.addToQueue("static_fields",["navigator_pdfViewerEnabled",t.pdfViewerEnabled],!1),this._dataQ.addToQueue("static_fields",["navigator_webdriver",t.webdriver],!1),this._dataQ.addToQueue("static_fields",["navigator_userAgentData",t.userAgentData],!1),this._dataQ.addToQueue("static_fields",["navigator_appVersion",t.appVersion],!1),this._dataQ.addToQueue("static_fields",["navigator_platform",t.platform],!1),this._dataQ.addToQueue("static_fields",["navigator_vendor",t.vendor],!1),this._dataQ.addToQueue("static_fields",["navigator_productSub",t.productSub],!1),this._dataQ.addToQueue("static_fields",["navigator_vendorSub",t.vendorSub],!1),this._dataQ.addToQueue("static_fields",["navigator_onLine",t.onLine],!1),this._dataQ.addToQueue("static_fields",["navigator_getHighEntropyValues",t.getHighEntropyValues],!1),this._dataQ.addToQueue("static_fields",["navigator_prototype",t.prototype],!1)}catch(e){yt.error("NavigatorFeature: Error collecting navigator data",e)}}}],[{key:"getDefaultSettings",value:function(){return pP}}])}(Qo),yP={abpIndo:["#Iklan-Melayang","#Kolom-Iklan-728","#SidebarIklan-wrapper",'a[title="7naga poker" i]','[title="ALIENBOLA" i]'],abpvn:["#quangcaomb",".i-said-no-thing-can-stop-me-warning.dark",".quangcao",'[href^="https://r88.vn/"]','[href^="https://zbet.vn/"]'],adBlockFinland:[".mainostila",".sponsorit",".ylamainos",'a[href*="/clickthrgh.asp?"]','a[href^="https://app.readpeak.com/ads"]'],adBlockPersian:["#navbar_notice_50",'a[href^="http://g1.v.fwmrm.net/ad/"]',".kadr",'TABLE[width="140px"]',"#divAgahi"],adBlockWarningRemoval:["#adblock_message",".adblockInfo",".deadblocker-header-bar",".no-ad-reminder","#AdBlockDialog"],adGuardAnnoyances:['amp-embed[type="zen"]',".hs-sosyal","#cookieconsentdiv",'div[class^="app_gdpr"]',".as-oil"],adGuardBase:["#ad-fullbanner2-billboard-outer",".stky-ad-footer",".BetterJsPopOverlay","#ad_300X250","#bannerfloat22"],adGuardChinese:['#piao_div_0[style*="width:140px;"]','a[href*=".ttz5.cn"]','a[href*=".yabovip2027.com/"]',".tm3all2h4b","#duilian_left"],adGuardFrench:["#anAdScGp300x25",'a[href*=".kfiopkln.com/"]','a[href^="https://jsecoin.com/o/?"]','a[href^="https://www.clickadu.com/?"]',".bandeauClosePub"],adGuardGerman:[".banneritemwerbung_head_1",".boxstartwerbung",".werbung3",'a[href^="http://www.eis.de/index.phtml?refid="]','a[href^="https://www.tipico.com/?affiliateId="]'],adGuardJapanese:["#kauli_yad_1",".adArticleSidetile",".ads_entrymore",'a[href^="http://ad2.trafficgate.net/"]','a[href^="http://www.rssad.jp/"]'],adGuardMobile:["amp-auto-ads","#mgid_iframe",".amp_ad","amp-sticky-ad",".plugin-blogroll"],adGuardRussian:['a[href^="https://ya-distrib.ru/r/"]','a[href^="https://ad.letmeads.com/"]',".reclama",'div[id^="smi2adblock"]','div[id^="AdFox_banner_"]'],adGuardSocial:['a[href^="//www.stumbleupon.com/submit?url="]','a[href^="//telegram.me/share/url?"]',".etsy-tweet","#inlineShare",".popup-social"],adGuardSpanishPortuguese:["#barraPublicidade","#Publicidade","#publiEspecial","#queTooltip",'[href^="http://ads.glispa.com/"]'],adGuardTrackingProtection:['amp-embed[type="taboola"]',"#qoo-counter",'a[href^="http://click.hotlog.ru/"]','a[href^="http://hitcounter.ru/top/stat.php"]','a[href^="http://top.mail.ru/jump"]'],adGuardTurkish:["#backkapat","#reklami",'a[href^="http://adserv.ontek.com.tr/"]','a[href^="http://izlenzi.com/campaign/"]','a[href^="http://www.installads.net/"]'],bulgarian:["td#freenet_table_ads","#newAd","#ea_intext_div",".lapni-pop-over","#xenium_hot_offers"],easyList:["#adlabelheader","#anAdScGame300x250","#adTakeOverLeft","#ad_LargeRec01","#adundergame"],easyListChina:['a[href*=".wensixuetang.com/"]','A[href*="/hth107.com/"]','.appguide-wrap[onclick*="bcebos.com"]',".frontpageAdvM","#taotaole"],easyListCookie:["#Button_Cookie","#CWCookie","#CookieCon","#DGPR","#PnlCookie"],easyListCzechSlovak:["#onlajny-stickers","#reklamni-box",".reklama-megaboard",".sklik",'[id^="sklikReklama"]'],easyListDutch:["#advertentie","#vipAdmarktBannerBlock",".adstekst",'a[href^="http://adserver.webads.nl/adclick/"]',"#semilo-lrectangle"],easyListGermany:["#nativendo-hometop",'a[href^="http://www.kontakt-vermittler.de/?wm="]',"#gwerbung",'a[href^="https://marketing.net.brillen.de/"]',".werbenbox"],easyListItaly:[".box_adv_annunci",".sb-box-pubbliredazionale",'a[href^="http://affiliazioniads.snai.it/"]','a[href^="https://adserver.html.it/"]','a[href^="https://affiliazioniads.snai.it/"]'],easyListLithuania:[".reklamos_tarpas",".reklamos_nuorodos",'img[alt="Reklaminis skydelis"]','img[alt="Dedikuoti.lt serveriai"]','img[alt="Hostingas Serveriai.lt"]'],estonian:['A[href*="http://pay4results24.eu"]'],fanboyAnnoyances:["#feedback-tab","#taboola-below-article",".feedburnerFeedBlock",".widget-feedburner-counter",'[title="Subscribe to our blog"]'],fanboyAntiFacebook:[".util-bar-module-firefly-visible"],fanboyEnhancedTrackers:[".open.pushModal","#issuem-leaky-paywall-articles-zero-remaining-nag",'div[style*="box-shadow: rgb(136, 136, 136) 0px 0px 12px; color: "]','div[class$="-hide"][zoompage-fontsize][style="display: block;"]',".BlockNag__Card"],fanboySocial:[".td-tags-and-social-wrapper-box",".twitterContainer",".youtube-social",'a[title^="Like us on Facebook"]','img[alt^="Share on Digg"]'],frellwitSwedish:['a[href*="casinopro.se"][target="_blank"]','a[href*="doktor-se.onelink.me"]',"article.category-samarbete","div.holidAds","ul.adsmodern"],greekAdBlock:['A[href*="adman.otenet.gr/click?"]','A[href*="http://axiabanners.exodus.gr/"]','A[href*="http://interactive.forthnet.gr/click?"]',"DIV.agores300","TABLE.advright"],hungarian:['A[href*="ad.eval.hu"]','A[href*="ad.netmedia.hu"]','A[href*="daserver.ultraweb.hu"]',"#cemp_doboz",".optimonk-iframe-container"],iDontCareAboutCookies:['.alert-info[data-block-track*="CookieNotice"]',".ModuleTemplateCookieIndicator",".o--cookies--container",".cookie-msg-info-container","#cookies-policy-sticky"],icelandicAbp:['A[href^="/framework/resources/forms/ads.aspx"]'],latvian:['a[href="http://www.salidzini.lv/"][style="display: block; width: 120px; height: 40px; overflow: hidden; position: relative;"]','a[href="http://www.salidzini.lv/"][style="display: block; width: 88px; height: 31px; overflow: hidden; position: relative;"]'],listKr:['a[href*="//kingtoon.slnk.kr"]','a[href*="//playdsb.com/kr"]',"div.logly-lift-adz",'div[data-widget_id="ml6EJ074"]',"ins.daum_ddn_area"],listeAr:[".geminiLB1Ad",".right-and-left-sponsers",'a[href*=".aflam.info"]','a[href*="booraq.org"]','a[href*="dubizzle.com/ar/?utm_source="]'],listeFr:['a[href^="http://promo.vador.com/"]',"#adcontainer_recherche",'a[href*="weborama.fr/fcgi-bin/"]',".site-pub-interstitiel",'div[id^="crt-"][data-criteo-id]'],officialPolish:["#ceneo-placeholder-ceneo-12",'[href^="https://aff.sendhub.pl/"]','a[href^="http://advmanager.techfun.pl/redirect/"]','a[href^="http://www.trizer.pl/?utm_source"]',"div#skapiec_ad"],ro:['a[href^="//afftrk.altex.ro/Counter/Click"]','a[href^="/magazin/"]','a[href^="https://blackfridaysales.ro/trk/shop/"]','a[href^="https://event.2performant.com/events/click"]','a[href^="https://l.profitshare.ro/"]'],ruAd:['a[href*="//febrare.ru/"]','a[href*="//utimg.ru/"]','a[href*="://chikidiki.ru"]',"#pgeldiz",".yandex-rtb-block"],thaiAds:["a[href*=macau-uta-popup]","#ads-google-middle_rectangle-group",".ads300s",".bumq",".img-kosana"],webAnnoyancesUltralist:["#mod-social-share-2","#social-tools",".ctpl-fullbanner",".zergnet-recommend",".yt.btn-link.btn-md.btn"]};function dP(e){return dP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dP(e)}function mP(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=gP(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function vP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||gP(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bP(e){return function(e){if(Array.isArray(e))return _P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||gP(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gP(e,t){if(e){if("string"==typeof e)return _P(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_P(e,t):void 0}}function _P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function wP(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return SP(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(SP(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,SP(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,SP(f,"constructor",c),SP(c,"constructor",s),s.displayName="GeneratorFunction",SP(c,o,"GeneratorFunction"),SP(f),SP(f,o,"Generator"),SP(f,r,function(){return this}),SP(f,"toString",function(){return"[object Generator]"}),(wP=function(){return{w:i,m:p}})()}function SP(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}SP=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){SP(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},SP(e,t,n,r)}function EP(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function kP(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){EP(i,r,o,a,u,"next",e)}function u(e){EP(i,r,o,a,u,"throw",e)}a(void 0)})}}function TP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,PP(r.key),r)}}function PP(e){var t=function(e,t){if("object"!=dP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=dP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dP(t)?t:t+""}function OP(e,t,n){return t=jP(t),function(e,t){if(t&&("object"==dP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,CP()?Reflect.construct(t,n||[],jP(e).constructor):t.apply(e,n))}function CP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(CP=function(){return!!e})()}function jP(e){return jP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jP(e)}function RP(e,t){return RP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},RP(e,t)}var MP={configKey:"isAdblockerListsFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},BP=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=OP(this,t))._dataQueue=e,n.debug=r.debug||!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RP(e,t)}(t,e),function(e,t,n){return t&&TP(e.prototype,t),n&&TP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:(o=kP(wP().m(function e(){var t,n;return wP().w(function(e){for(;;)switch(e.n){case 0:return yt.debug("Starting ad blocker lists detection"),e.p=1,e.n=2,this.detectActiveAdblockLists();case 2:t=e.v,this._sendData(t),e.n=4;break;case 3:e.p=3,n=e.v,yt.error("Error detecting ad blocker lists:",n);case 4:return e.a(2)}},e,this,[[1,3]])})),function(){return o.apply(this,arguments)})},{key:"stopFeature",value:function(){}},{key:"canRunDetection",value:function(){return!0}},{key:"_sendData",value:function(e){this._dataQueue.addToQueue("static_fields",["adblock_lists",e],!1)}},{key:"detectActiveAdblockLists",value:(r=kP(wP().m(function e(){var t,n,r,o,i,a,u,s,c,l,f,p,h,y,d;return wP().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,n=(t=[]).concat.apply(t,bP(Object.values(yP))),e.n=1,this.getBlockedSelectors(n);case 1:for(r=e.v,o=[],i=0,a=Object.entries(yP);i<a.length;i++){u=vP(a[i],2),s=u[0],c=u[1],l=0,f=mP(c);try{for(f.s();!(p=f.n()).done;)h=p.value,r.has(h)?(l++,yt.trace('Selector "'.concat(h,'" is blocked for filter "').concat(s,'".'))):yt.trace('Selector "'.concat(h,'" is not blocked for filter "').concat(s,'".'))}catch(e){f.e(e)}finally{f.f()}l>=2&&(o.push(s),yt.trace('Filter "'.concat(s,'" is considered active.')))}return y=o.sort(),yt.debug("Active ad blocker lists: "+y),e.a(2,y);case 2:return e.p=2,d=e.v,yt.error("Error in detectActiveAdblockLists:",d),e.a(2,[])}},e,this,[[0,2]])})),function(){return r.apply(this,arguments)})},{key:"getBlockedSelectors",value:(n=kP(wP().m(function e(t){var n,r,o,i,a,u,s,c,l,f,p;return wP().w(function(e){for(;;)switch(e.n){case 0:for((n=document.createElement("iframe")).style.position="absolute",n.style.width="0",n.style.height="0",n.style.opacity="0",document.body.appendChild(n),e.p=1,(r=n.contentDocument||n.contentWindow.document).body||(o=r.createElement("body"),r.documentElement.appendChild(o)),i=r.createElement("div"),a=new Array(t.length),u=new Set,s=0;s<t.length;s++)c=this.selectorToElement(t[s],r),(l=r.createElement("div")).appendChild(c),i.appendChild(l),a[s]=c;return r.body.appendChild(i),e.n=2,new Promise(function(e){return setTimeout(e,200)});case 2:for(f=0;f<t.length;f++)a[f].offsetParent||u.add(t[f]);return e.a(2,u);case 3:return e.p=3,p=e.v,yt.error("Error in getBlockedSelectors:",p),e.a(2,new Set);case 4:return e.p=4,n.parentNode&&n.parentNode.removeChild(n),e.f(4);case 5:return e.a(2)}},e,this,[[1,3,4,5]])})),function(e){return n.apply(this,arguments)})},{key:"selectorToElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n=vP(this.parseSimpleCssSelector(e),2),r=n[0],o=n[1],i=t.createElement(r||"div");for(var a in o)o.hasOwnProperty(a)&&i.setAttribute(a,o[a].join(" "));return i}},{key:"parseSimpleCssSelector",value:function(e){var t=/^\s*([a-z-]*)(.*)$/i.exec(e);if(!t){var n="Unexpected syntax '".concat(e,"'");throw new Error(n)}for(var r,o=t[1]||void 0,i={},a=/([.:#][\w-]+|\[.+?\])/gi,u=function(e,t){i[e]||(i[e]=[]),i[e].push(t)};null!==(r=a.exec(t[2]));){var s=r[0];switch(s[0]){case".":u("class",s.slice(1));break;case"#":u("id",s.slice(1));break;case"[":var c=/^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(s);if(!c)throw new Error(errorMessage);u(c[1],c[4]||c[5]||"");break;default:throw new Error(errorMessage)}}return[o,i]}}],[{key:"getDefaultSettings",value:function(){return MP}}]);var n,r,o}(Qo);function AP(e,t){var n=e[0]>>>16,r=65535&e[0],o=e[1]>>>16,i=65535&e[1],a=t[0]>>>16,u=65535&t[0],s=t[1]>>>16,c=0,l=0,f=0,p=0;f+=(p+=i+(65535&t[1]))>>>16,p&=65535,l+=(f+=o+s)>>>16,f&=65535,c+=(l+=r+u)>>>16,l&=65535,c+=n+a,c&=65535,e[0]=c<<16|l,e[1]=f<<16|p}function xP(e,t){var n=e[0]>>>16,r=65535&e[0],o=e[1]>>>16,i=65535&e[1],a=t[0]>>>16,u=65535&t[0],s=t[1]>>>16,c=65535&t[1],l=0,f=0,p=0,h=0;p+=(h+=i*c)>>>16,h&=65535,f+=(p+=o*c)>>>16,p&=65535,f+=(p+=i*s)>>>16,p&=65535,l+=(f+=r*c)>>>16,f&=65535,l+=(f+=o*s)>>>16,f&=65535,l+=(f+=i*u)>>>16,f&=65535,l+=n*c+r*s+o*u+i*a,l&=65535,e[0]=l<<16|f,e[1]=p<<16|h}function DP(e,t){var n=e[0];32===(t%=64)?(e[0]=e[1],e[1]=n):t<32?(e[0]=n<<t|e[1]>>>32-t,e[1]=e[1]<<t|n>>>32-t):(t-=32,e[0]=e[1]<<t|n>>>32-t,e[1]=n<<t|e[1]>>>32-t)}function IP(e,t){0!==(t%=64)&&(t<32?(e[0]=e[1]>>>32-t,e[1]=e[1]<<t):(e[0]=e[1]<<t-32,e[1]=0))}function LP(e,t){e[0]^=t[0],e[1]^=t[1]}var FP=[4283543511,3981806797],NP=[3301882366,444984403];function UP(e){var t=[0,e[0]>>>1];LP(e,t),xP(e,FP),t[1]=e[0]>>>1,LP(e,t),xP(e,NP),t[1]=e[0]>>>1,LP(e,t)}var WP=[2277735313,289559509],GP=[1291169091,658871167],HP=[0,5],QP=[0,1390208809],zP=[0,944331445];function VP(e,t){var n=function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r>127)return(new TextEncoder).encode(e);t[n]=r}return t}(e);t=t||0;var r,o=[0,n.length],i=o[1]%16,a=o[1]-i,u=[0,t],s=[0,t],c=[0,0],l=[0,0];for(r=0;r<a;r+=16)c[0]=n[r+4]|n[r+5]<<8|n[r+6]<<16|n[r+7]<<24,c[1]=n[r]|n[r+1]<<8|n[r+2]<<16|n[r+3]<<24,l[0]=n[r+12]|n[r+13]<<8|n[r+14]<<16|n[r+15]<<24,l[1]=n[r+8]|n[r+9]<<8|n[r+10]<<16|n[r+11]<<24,xP(c,WP),DP(c,31),xP(c,GP),LP(u,c),DP(u,27),AP(u,s),xP(u,HP),AP(u,QP),xP(l,GP),DP(l,33),xP(l,WP),LP(s,l),DP(s,31),AP(s,u),xP(s,HP),AP(s,zP);c[0]=0,c[1]=0,l[0]=0,l[1]=0;var f=[0,0];switch(i){case 15:f[1]=n[r+14],IP(f,48),LP(l,f);case 14:f[1]=n[r+13],IP(f,40),LP(l,f);case 13:f[1]=n[r+12],IP(f,32),LP(l,f);case 12:f[1]=n[r+11],IP(f,24),LP(l,f);case 11:f[1]=n[r+10],IP(f,16),LP(l,f);case 10:f[1]=n[r+9],IP(f,8),LP(l,f);case 9:f[1]=n[r+8],LP(l,f),xP(l,GP),DP(l,33),xP(l,WP),LP(s,l);case 8:f[1]=n[r+7],IP(f,56),LP(c,f);case 7:f[1]=n[r+6],IP(f,48),LP(c,f);case 6:f[1]=n[r+5],IP(f,40),LP(c,f);case 5:f[1]=n[r+4],IP(f,32),LP(c,f);case 4:f[1]=n[r+3],IP(f,24),LP(c,f);case 3:f[1]=n[r+2],IP(f,16),LP(c,f);case 2:f[1]=n[r+1],IP(f,8),LP(c,f);case 1:f[1]=n[r],LP(c,f),xP(c,WP),DP(c,31),xP(c,GP),LP(u,c)}return LP(u,o),LP(s,o),AP(u,s),AP(s,u),UP(u),UP(s),AP(u,s),AP(s,u),("00000000"+(u[0]>>>0).toString(16)).slice(-8)+("00000000"+(u[1]>>>0).toString(16)).slice(-8)+("00000000"+(s[0]>>>0).toString(16)).slice(-8)+("00000000"+(s[1]>>>0).toString(16)).slice(-8)}function KP(e){return KP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KP(e)}function qP(e,t,n){return t=YP(t),function(e,t){if(t&&("object"==KP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,JP()?Reflect.construct(t,n||[],YP(e).constructor):t.apply(e,n))}function JP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(JP=function(){return!!e})()}function YP(e){return YP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},YP(e)}function XP(e,t){return XP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},XP(e,t)}function ZP(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return $P(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):($P(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,$P(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,$P(f,"constructor",c),$P(c,"constructor",s),s.displayName="GeneratorFunction",$P(c,o,"GeneratorFunction"),$P(f),$P(f,o,"Generator"),$P(f,r,function(){return this}),$P(f,"toString",function(){return"[object Generator]"}),(ZP=function(){return{w:i,m:p}})()}function $P(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}$P=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){$P(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},$P(e,t,n,r)}function eO(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function tO(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){eO(i,r,o,a,u,"next",e)}function u(e){eO(i,r,o,a,u,"throw",e)}a(void 0)})}}function nO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,iO(r.key),r)}}function oO(e,t,n){return t&&rO(e.prototype,t),n&&rO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function iO(e){var t=function(e,t){if("object"!=KP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=KP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==KP(t)?t:t+""}var aO=function(){return oO(function e(){nO(this,e),this.contextNames=["webgl2","experimental-webgl2","webgl","experimental-webgl","moz-webgl","webkit-3d","webgl2-compute"],this.data={},this.availableContexts=[],this._hashCache={json:null,image:null},this._initialized=!1},[{key:"start",value:(n=tO(ZP().m(function e(){var t;return ZP().w(function(e){for(;;)switch(e.n){case 0:if(!this._initialized){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,this._initializeContexts();case 2:this._computeHashes(),this._initialized=!0,e.n=4;break;case 3:throw e.p=3,t=e.v,yt.debug("Error during WebGL fingerprinting:",t),t;case 4:return e.a(2)}},e,this,[[1,3]])})),function(){return n.apply(this,arguments)})},{key:"_initializeContexts",value:(t=tO(ZP().m(function e(){var t,n=this;return ZP().w(function(e){for(;;)switch(e.n){case 0:return t=this.contextNames.map(function(){var e=tO(ZP().m(function e(t){var r,o;return ZP().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,n.getContextData(t);case 1:(r=e.v)&&(n.availableContexts.push(t),n.data[t]=r),e.n=3;break;case 2:e.p=2,o=e.v,yt.debug("Error retrieving context data for ".concat(t,":"),o);case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}()),e.n=1,Promise.all(t);case 1:yt.debug("WebGL fingerprint data:",this.data);case 2:return e.a(2)}},e,this)})),function(){return t.apply(this,arguments)})},{key:"_computeHashes",value:function(){this.jsonString=JSON.stringify(this.data),this._hashCache.json=VP(this.jsonString),this._hashCache.image=this.availableContexts.length>0?this.computeImageHash():null}},{key:"jsonHash",get:function(){return this._hashCache.json}},{key:"imageHash",get:function(){return this._hashCache.image}},{key:"getContextData",value:(e=tO(ZP().m(function e(t){var n=this;return ZP().w(function(e){for(;;)if(0===e.n)return e.a(2,new Promise(function(e){try{var r,o=document.createElement("canvas");o.width=256,o.height=128,o.style=null!==(r=o.style)&&void 0!==r?r:{},o.style.backgroundColor="#555",o.style.borderRadius="4px";var i=o.getContext(t);if(!i)return void e(null);var a={},u=i.getContextAttributes();u&&Object.keys(u).length>0&&(a.contextAttributes=u),a.drawingBufferColorSpace=i.drawingBufferColorSpace,a.unpackColorSpace=i.unpackColorSpace;var s=i.getExtension("WEBGL_debug_renderer_info");s&&(a.UNMASKED_RENDERER_WEBGL=i.getParameter(s.UNMASKED_RENDERER_WEBGL),a.UNMASKED_VENDOR_WEBGL=i.getParameter(s.UNMASKED_VENDOR_WEBGL)),a.VERTEX_SHADER_PRECISION=n.getShaderPrecision(i,i.VERTEX_SHADER),a.FRAGMENT_SHADER_PRECISION=n.getShaderPrecision(i,i.FRAGMENT_SHADER);var c=i.getExtension("WEBGL_draw_buffers");a.MAX_DRAW_BUFFERS_WEBGL=c?i.getParameter(c.MAX_DRAW_BUFFERS_WEBGL):null;var l=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic");a.MAX_TEXTURE_MAX_ANISOTROPY_EXT=l?i.getParameter(l.MAX_TEXTURE_MAX_ANISOTROPY_EXT):null,a.MAX_TEXTURE_IMAGE_UNITS=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),a.MAX_VERTEX_TEXTURE_IMAGE_UNITS=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),a.MAX_COMBINED_TEXTURE_IMAGE_UNITS=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS),a.ALIASED_LINE_WIDTH_RANGE=i.getParameter(i.ALIASED_LINE_WIDTH_RANGE),a.ALIASED_POINT_SIZE_RANGE=i.getParameter(i.ALIASED_POINT_SIZE_RANGE),a.SAMPLES=i.getParameter(i.SAMPLES),a.RENDERER=i.getParameter(i.RENDERER),a.VENDOR=i.getParameter(i.VENDOR),a.VERSION=i.getParameter(i.VERSION),a.SHADING_LANGUAGE_VERSION=i.getParameter(i.SHADING_LANGUAGE_VERSION),a.MAX_CUBE_MAP_TEXTURE_SIZE=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),a.MAX_TEXTURE_SIZE=i.getParameter(i.MAX_TEXTURE_SIZE),a.MAX_RENDERBUFFER_SIZE=i.getParameter(i.MAX_RENDERBUFFER_SIZE),a.DEPTH_BITS=i.getParameter(i.DEPTH_BITS),a.STENCIL_BITS=i.getParameter(i.STENCIL_BITS),a.MAX_VERTEX_ATTRIBS=i.getParameter(i.MAX_VERTEX_ATTRIBS),a.MAX_VIEWPORT_DIMS=i.getParameter(i.MAX_VIEWPORT_DIMS),a.MAX_FRAGMENT_UNIFORM_VECTORS=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),a.MAX_VERTEX_UNIFORM_VECTORS=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS);var f=i.getSupportedExtensions();a.extensions=f?f.sort():[],e(a)}catch(n){yt.debug("Error in getContextData for ".concat(t,":"),n),e(null)}}))},e)})),function(t){return e.apply(this,arguments)})},{key:"getShaderPrecision",value:function(e,t){try{var n=e.getShaderPrecisionFormat(t,e.HIGH_FLOAT),r=e.getShaderPrecisionFormat(t,e.MEDIUM_FLOAT),o=0!==n.precision?n:r;return{rangeMin:o.rangeMin,rangeMax:o.rangeMax,precision:o.precision}}catch(e){return null}}},{key:"computeImageHash",value:function(){if(0===this.availableContexts.length)return null;var e=this.availableContexts[0],t=document.createElement("canvas");t.width=512,t.height=256;var n=t.getContext(e);if(!n)return null;var r={program:null,vertexShader:null,fragmentShader:null,buffer:null};try{n.viewport(0,0,t.width,t.height);var o=function(e,t){var r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),n.getShaderParameter(r,n.COMPILE_STATUS)||yt.debug((e===n.VERTEX_SHADER?"Vertex":"Fragment")+" shader error:",n.getShaderInfoLog(r)),r},i=n.createProgram();r.program=i;var a=o(n.VERTEX_SHADER,"\n        attribute vec2 attrVertex;\n        attribute vec4 attrColor;\n        varying vec4 varyinColor;\n        uniform mat4 transform;\n        void main(){\n          varyinColor = attrColor;\n          gl_Position = transform * vec4(attrVertex, 0.0, 1.0);\n        }\n      ");r.vertexShader=a;var u=o(n.FRAGMENT_SHADER,"\n        precision mediump float;\n        varying vec4 varyinColor;\n        void main(){\n          gl_FragColor = varyinColor;\n        }\n      ");r.fragmentShader=u,n.attachShader(i,a),n.attachShader(i,u),n.linkProgram(i),n.getProgramParameter(i,n.LINK_STATUS)||yt.debug("Program link error:",n.getProgramInfoLog(i)),n.useProgram(i);var s=n.getAttribLocation(i,"attrVertex"),c=n.getAttribLocation(i,"attrColor"),l=n.getUniformLocation(i,"transform");n.enableVertexAttribArray(s),n.enableVertexAttribArray(c),n.uniformMatrix4fv(l,!1,new Float32Array([1.5,0,0,0,0,1.5,0,0,0,0,1,0,.5,0,0,1]));var f=[-.25,0],p=128,h=[];h.push(f[0],f[1],1,.7,0,1);for(var y=0;y<p;y++){var d=(45+y/p*270)/360*2*Math.PI,m=(45+(y+1)/p*270)/360*2*Math.PI;h.push(f[0]+.5*Math.cos(d),f[1]+.5*Math.sin(d),2,1-y/p,0,1),h.push(f[0]+.5*Math.cos(m),f[1]+.5*Math.sin(m),1,1-(y+1)/p,0,1)}var v=[.2,.2,.8,.2,.2,1,.8,.2,.2,.8,.8,1,.2,.8,.5,.5,.2,1,.8,.2,.2,.8,.8,1,.8,.8,.8,.8,.8,1,.2,.8,.5,.5,.2,1],b=new Float32Array([].concat(h,v)),g=n.createBuffer();r.buffer=g,n.bindBuffer(n.ARRAY_BUFFER,g),n.bufferData(n.ARRAY_BUFFER,b,n.STATIC_DRAW),n.vertexAttribPointer(s,2,n.FLOAT,!1,24,0),n.vertexAttribPointer(c,4,n.FLOAT,!1,24,8),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT);var _=h.length/6;n.drawArrays(n.LINE_STRIP,0,_);var w=v.length/6;n.drawArrays(n.TRIANGLES,_,w);var S=new Uint8Array(t.width*t.height*4);try{n.readPixels(0,0,t.width,t.height,n.RGBA,n.UNSIGNED_BYTE,S)}catch(e){return"gl.readPixels: "+e}var E=function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,o=0;o<r;o++)t+=String.fromCharCode(n[o]);return btoa(t)}(S.buffer);return VP(E+(n.getParameter(n.VENDOR)||"")+(n.getParameter(n.RENDERER)||"")+(n.getSupportedExtensions()||[]).join(","))}catch(e){return yt.debug("Error computing WebGL image hash:",e),null}finally{this._cleanupWebGLResources(n,r)}}},{key:"_cleanupWebGLResources",value:function(e,t){if(e)try{t.vertexShader&&e.deleteShader(t.vertexShader),t.fragmentShader&&e.deleteShader(t.fragmentShader),t.program&&e.deleteProgram(t.program),t.buffer&&e.deleteBuffer(t.buffer)}catch(e){yt.debug("Error cleaning up WebGL resources:",e)}}}]);var e,t,n}(),uO={configKey:"isWebglFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!0,runInLean:!1,isRunning:!1,instance:null},sO=function(e){function t(e){var n;return nO(this,t),(n=qP(this,t))._dataQ=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XP(e,t)}(t,e),oO(t,[{key:"startFeature",value:(n=tO(ZP().m(function e(){var t,n;return ZP().w(function(e){for(;;)switch(e.n){case 0:return t=new aO,e.p=1,e.n=2,t.start();case 2:yt.debug("WebGL JSON Hash:"+t.jsonHash),yt.debug("WebGL Image Hash:"+t.imageHash),this._dataQ.addToQueue("static_fields",["webgl",[t.jsonHash,t.imageHash]],!1),e.n=4;break;case 3:e.p=3,n=e.v,yt.debug("Error in WebGL fingerprinting:",n);case 4:return e.a(2)}},e,this,[[1,3]])})),function(){return n.apply(this,arguments)})}],[{key:"getDefaultSettings",value:function(){return uO}}]);var n}(Qo);function cO(e){return cO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cO(e)}function lO(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return fO(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(fO(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,fO(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,fO(f,"constructor",c),fO(c,"constructor",s),s.displayName="GeneratorFunction",fO(c,o,"GeneratorFunction"),fO(f),fO(f,o,"Generator"),fO(f,r,function(){return this}),fO(f,"toString",function(){return"[object Generator]"}),(lO=function(){return{w:i,m:p}})()}function fO(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}fO=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){fO(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},fO(e,t,n,r)}function pO(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function hO(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){pO(i,r,o,a,u,"next",e)}function u(e){pO(i,r,o,a,u,"throw",e)}a(void 0)})}}function yO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dO(r.key),r)}}function dO(e){var t=function(e,t){if("object"!=cO(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=cO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cO(t)?t:t+""}function mO(e,t,n){return t=bO(t),function(e,t){if(t&&("object"==cO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,vO()?Reflect.construct(t,n||[],bO(e).constructor):t.apply(e,n))}function vO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(vO=function(){return!!e})()}function bO(e){return bO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bO(e)}function gO(e,t){return gO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gO(e,t)}var _O=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=mO(this,t))._dataQ=e,n.peer=null,n.timeoutId=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gO(e,t)}(t,e),function(e,t,n){return t&&yO(e.prototype,t),n&&yO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:(r=hO(lO().m(function e(){var t,n;return lO().w(function(e){for(;;)switch(e.n){case 0:return yt.info("Starting WebRTCDataCollector"),e.p=1,e.n=2,this.gatherIceCandidates();case 2:t=e.v,this.sendData(t),e.n=4;break;case 3:e.p=3,n=e.v,yt.error("WebRTCDataCollector failed:",n),this.sendData([]);case 4:return e.p=4,this.cleanup(),e.f(4);case 5:return e.a(2)}},e,this,[[1,3,4,5]])})),function(){return r.apply(this,arguments)})},{key:"gatherIceCandidates",value:(n=hO(lO().m(function e(){var t=this;return lO().w(function(e){for(;;)if(0===e.n)return e.a(2,new Promise(function(e){var n=[],r=!1;t.peer=new RTCPeerConnection({iceServers:[{urls:"stun:stunserver.stunprotocol.org"},{urls:"stun:stun.l.google.com:19302"}]}),t.peer.onicecandidate=function(t){if(t.candidate){var o=t.candidate;n.push({address:String(o.address),port:String(o.port),tcpType:String(o.tcpType),type:String(o.type),protocol:String(o.protocol),url:String(o.url),relatedAddress:String(o.relatedAddress),relatedPort:String(o.relatedPort),candidate:String(o.candidate),sdpMid:String(o.sdpMid),sdpMLineIndex:String(o.sdpMLineIndex)}),yt.debug("ICE candidate found: ".concat(o.type," ").concat(o.protocol," ").concat(o.address,":").concat(o.port))}else yt.debug("ICE candidate gathering complete - no more candidates"),r=!0,e(n)},t.peer.onicecandidateerror=function(e){yt.warn("ICE candidate error:",e.errorText,e.errorCode)},t.peer.onicegatheringstatechange=function(){var o,i;yt.debug("ICE gathering state changed:",null===(o=t.peer)||void 0===o?void 0:o.iceGatheringState),"complete"===(null===(i=t.peer)||void 0===i?void 0:i.iceGatheringState)&&(r=!0,e(n))},t.timeoutId=setTimeout(function(){r||(yt.warn("ICE candidate gathering timed out after 900ms"),e(n))},900),t.peer.createDataChannel("data"),t.peer.createOffer().then(function(e){return t.peer.setLocalDescription(e)}).catch(function(t){yt.error("Error creating offer:",t),e(n)})}))},e)})),function(){return n.apply(this,arguments)})},{key:"cleanup",value:function(){if(this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.peer){try{this.peer.close(),yt.debug("WebRTC peer connection closed")}catch(e){yt.warn("Error closing peer connection:",e)}this.peer=null}}},{key:"sendData",value:function(e){yt.info("Sending ".concat(e.length," ICE candidates")),this._dataQ.addToQueue("static_fields",["webrtc",e],!1)}}],[{key:"getDefaultSettings",value:function(){return{configKey:"isWebRTCFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!0,runInLean:!1,isRunning:!1,instance:null}}}]);var n,r}(Qo),wO=_O;function SO(e){return SO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SO(e)}function EO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kO(r.key),r)}}function kO(e){var t=function(e,t){if("object"!=SO(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=SO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==SO(t)?t:t+""}function TO(e,t,n){return t=OO(t),function(e,t){if(t&&("object"==SO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,PO()?Reflect.construct(t,n||[],OO(e).constructor):t.apply(e,n))}function PO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(PO=function(){return!!e})()}function OO(e){return OO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},OO(e)}function CO(e,t){return CO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},CO(e,t)}var jO={configKey:"isSpeechVoicesFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!0,runInLean:!1,isRunning:!1,instance:null},RO=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=TO(this,t))._dataQ=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CO(e,t)}(t,e),function(e,t,n){return t&&EO(e.prototype,t),n&&EO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:function(){speechSynthesis.addEventListener("voiceschanged",this.processVoices.bind(this)),speechSynthesis.pending||this.processVoices()}},{key:"processVoices",value:function(){var e=speechSynthesis.getVoices().map(function(e){return{def:e.default,lang:e.lang,localService:e.localService,name:e.name,voiceURI:e.voiceURI}});if(0!==e.length){var t=VP(JSON.stringify(e));yt.debug("SpeechVoices - Voice hash:"+t),this._dataQ.addToQueue("static_fields",["speech_voices",t],!1)}}}],[{key:"getDefaultSettings",value:function(){return jO}}])}(Qo),MO=RO;function BO(e){return BO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BO(e)}function AO(e,t,n){return t=DO(t),function(e,t){if(t&&("object"==BO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,xO()?Reflect.construct(t,n||[],DO(e).constructor):t.apply(e,n))}function xO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(xO=function(){return!!e})()}function DO(e){return DO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},DO(e)}function IO(e,t){return IO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},IO(e,t)}function LO(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return FO(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(FO(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,FO(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,FO(f,"constructor",c),FO(c,"constructor",s),s.displayName="GeneratorFunction",FO(c,o,"GeneratorFunction"),FO(f),FO(f,o,"Generator"),FO(f,r,function(){return this}),FO(f,"toString",function(){return"[object Generator]"}),(LO=function(){return{w:i,m:p}})()}function FO(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}FO=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){FO(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},FO(e,t,n,r)}function NO(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function UO(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){NO(i,r,o,a,u,"next",e)}function u(e){NO(i,r,o,a,u,"throw",e)}a(void 0)})}}function WO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,HO(r.key),r)}}function GO(e,t,n){return t&&WO(e.prototype,t),n&&WO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function HO(e){var t=function(e,t){if("object"!=BO(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=BO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==BO(t)?t:t+""}function QO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var zO={configKey:"isBrowserExtensionsFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},VO="ad_blocker",KO="password_manager",qO="crypto_wallet",JO="developer_tool",YO="grammar_writing",XO="dark_mode",ZO="other",$O=GO(function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ZO,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.8;QO(this,e),this.name=t,this.detection=n,this.category=r,this.reliability=o}),eC=function(){return GO(function e(t,n){QO(this,e),this._window=t,this._document=n,this.extensions=this._initializeExtensions(),this._detectionCache=new Map},[{key:"_initializeExtensions",value:function(){return[new $O("Ad Blocker",this._detectAdBlocker.bind(this),VO,.9),new $O("LastPass",this._detectLastPass.bind(this),KO,.85),new $O("1Password",this._detect1Password.bind(this),KO,.85),new $O("MetaMask",this._detectMetaMask.bind(this),qO,.95),new $O("Coinbase Wallet",this._detectCoinbaseWallet.bind(this),qO,.95),new $O("WalletConnect Wallet",this._detectWalletConnect.bind(this),qO,.95),new $O("Trust Wallet",this._detectTrustWallet.bind(this),qO,.95),new $O("Phantom Wallet",this._detectPhantomWallet.bind(this),qO,.95),new $O("Binance Wallet",this._detectBinanceWallet.bind(this),qO,.95),new $O("Brave Wallet",this._detectBraveWallet.bind(this),qO,.9),new $O("Apple Pay",this._detectApplePay.bind(this),qO,.9),new $O("Google Pay",this._detectGooglePay.bind(this),qO,.9),new $O("React Developer Tools",this._detectReactDevTools.bind(this),JO,.95),new $O("Vue.js DevTools",this._detectVueDevTools.bind(this),JO,.95),new $O("Redux DevTools",this._detectReduxDevTools.bind(this),JO,.95),new $O("Angular DevTools",this._detectAngularDevTools.bind(this),JO,.95),new $O("Svelte DevTools",this._detectSvelteDevTools.bind(this),JO,.95),new $O("Grammarly",this._detectGrammarly.bind(this),YO,.9),new $O("Dark Reader",this._detectDarkReader.bind(this),XO,.85),new $O("Super Dark Mode",this._detectSuperDarkMode.bind(this),XO,.85),new $O("Adobe Acrobat",this._detectAdobeAcrobat.bind(this),ZO,.8)]}},{key:"detectExtension",value:(E=UO(LO().m(function e(t){var n,r;return LO().w(function(e){for(;;)switch(e.n){case 0:if(!this._detectionCache.has(t.name)){e.n=1;break}return e.a(2,this._detectionCache.get(t.name));case 1:return e.p=1,e.n=2,t.detection();case 2:return n=e.v,this._detectionCache.set(t.name,n),e.a(2,n);case 3:return e.p=3,r=e.v,yt.debug("Error detecting ".concat(t.name,": ").concat(r.message)),e.a(2,!1)}},e,this,[[1,3]])})),function(e){return E.apply(this,arguments)})},{key:"scan",value:(S=UO(LO().m(function e(){var t,n,r=this;return LO().w(function(e){for(;;)switch(e.n){case 0:return t=this.extensions.map(function(){var e=UO(LO().m(function e(t){var n,o;return LO().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,r.detectExtension(t);case 1:return n=e.v,e.a(2,{name:t.name,detected:n,category:t.category,reliability:t.reliability});case 2:return e.p=2,o=e.v,yt.debug("Failed to detect ".concat(t.name,": ").concat(o.message)),e.a(2,{name:t.name,detected:!1,category:t.category,reliability:t.reliability})}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}()),e.n=1,Promise.all(t);case 1:return n=e.v,e.a(2,n.filter(function(e){return e.detected}).sort(function(e,t){return t.reliability-e.reliability}).map(function(e){return e.name}))}},e,this)})),function(){return S.apply(this,arguments)})},{key:"_detectAdBlocker",value:(w=UO(LO().m(function e(){var t,n,r,o;return LO().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,(t=this._document.createElement("div")).className="pub_300x250 ad_unit adsbox",t.style.cssText="height:50px;width:50px;position:absolute;left:-9999px;top:-9999px;z-index:-1;opacity:0;display:block;",this._document.body.appendChild(t),n=this._window.getComputedStyle(t),r="none"===n.display||"hidden"===n.visibility||0===t.offsetHeight||0===t.offsetWidth,this._document.body.removeChild(t),e.a(2,r);case 1:return e.p=1,o=e.v,yt.debug("Ad blocker detection error: ".concat(o.message)),e.a(2,!1)}},e,this,[[0,1]])})),function(){return w.apply(this,arguments)})},{key:"_detectLastPass",value:(_=UO(LO().m(function e(){return LO().w(function(e){for(;;)if(0===e.n)return e.a(2,this._document.querySelectorAll("[data-lastpass-icon-root]").length>0)},e,this)})),function(){return _.apply(this,arguments)})},{key:"_detect1Password",value:(g=UO(LO().m(function e(){var t;return LO().w(function(e){for(;;)if(0===e.n)return e.a(2,(null===(t=JSON.stringify(this._window._sentryDebugIds))||void 0===t?void 0:t.includes("aeblfdkhhhdcdjpifhhbdiojplfjncoa"))||!!this._document.querySelector(".onepassword-fill-button"))},e,this)})),function(){return g.apply(this,arguments)})},{key:"_detectMetaMask",value:(b=UO(LO().m(function e(){return LO().w(function(e){for(;;)if(0===e.n)return e.a(2,!!this._window.ethereum&&this._window.ethereum.isMetaMask)},e,this)})),function(){return b.apply(this,arguments)})},{key:"_detectCoinbaseWallet",value:(v=UO(LO().m(function e(){return LO().w(function(e){for(;;)if(0===e.n)return e.a(2,!!this._window.ethereum&&this._window.ethereum.isCoinbaseWallet)},e,this)})),function(){return v.apply(this,arguments)})},{key:"_detectWalletConnect",value:(m=UO(LO().m(function e(){return LO().w(function(e){for(;;)if(0===e.n)return e.a(2,!!this._window.ethereum&&this._window.ethereum.isWalletConnect)},e,this)})),function(){return m.apply(this,arguments)})},{key:"_detectTrustWallet",value:(d=UO(LO().m(function e(){return LO().w(function(e){for(;;)if(0===e.n)return e.a(2,!!this._window.ethereum&&this._window.ethereum.isTrust)},e,this)})),function(){return d.apply(this,arguments)})},{key:"_detectPhantomWallet",value:(y=UO(LO().m(function e(){return LO().w(function(e){for(;;)if(0===e.n)return e.a(2,!!this._window.solana&&this._window.solana.isPhantom)},e,this)})),function(){return y.apply(this,arguments)})},{key:"_detectBinanceWallet",value:(h=UO(LO().m(function e(){return LO().w(function(e){for(;;)if(0===e.n)return e.a(2,!!this._window.BinanceChain&&!0===this._window.BinanceChain.isBinanceChain)},e,this)})),function(){return h.apply(this,arguments)})},{key:"_detectBraveWallet",value:(p=UO(LO().m(function e(){return LO().w(function(e){for(;;)if(0===e.n)return e.a(2,!(!this._window.navigator.brave||!this._window.navigator.brave.isBrave))},e,this)})),function(){return p.apply(this,arguments)})},{key:"_detectApplePay",value:(f=UO(LO().m(function e(){var t;return LO().w(function(e){for(;;)switch(e.n){case 0:if(!(t=!!this._window.ApplePaySession&&"function"==typeof this._window.ApplePaySession.canMakePayments)){e.n=2;break}return e.n=1,this._window.ApplePaySession.canMakePayments();case 1:t=e.v;case 2:return e.a(2,t)}},e,this)})),function(){return f.apply(this,arguments)})},{key:"_detectGooglePay",value:(l=UO(LO().m(function e(){return LO().w(function(e){for(;;)if(0===e.n)return e.a(2,!!(this._window.google&&this._window.google.payments&&this._window.google.payments.api))},e,this)})),function(){return l.apply(this,arguments)})},{key:"_detectReactDevTools",value:(c=UO(LO().m(function e(){return LO().w(function(e){for(;;)if(0===e.n)return e.a(2,!!this._window.__REACT_DEVTOOLS_GLOBAL_HOOK__)},e,this)})),function(){return c.apply(this,arguments)})},{key:"_detectVueDevTools",value:(s=UO(LO().m(function e(){return LO().w(function(e){for(;;)if(0===e.n)return e.a(2,!!this._window.__VUE_DEVTOOLS_GLOBAL_HOOK__)},e,this)})),function(){return s.apply(this,arguments)})},{key:"_detectReduxDevTools",value:(u=UO(LO().m(function e(){return LO().w(function(e){for(;;)if(0===e.n)return e.a(2,!!this._window.__REDUX_DEVTOOLS_EXTENSION__)},e,this)})),function(){return u.apply(this,arguments)})},{key:"_detectAngularDevTools",value:(a=UO(LO().m(function e(){return LO().w(function(e){for(;;)if(0===e.n)return e.a(2,!!this._window.ng)},e,this)})),function(){return a.apply(this,arguments)})},{key:"_detectSvelteDevTools",value:(i=UO(LO().m(function e(){return LO().w(function(e){for(;;)if(0===e.n)return e.a(2,!!this._window.__SVELTE_DEVTOOLS_GLOBAL_HOOK__)},e,this)})),function(){return i.apply(this,arguments)})},{key:"_detectGrammarly",value:(o=UO(LO().m(function e(){var t,n=this;return LO().w(function(e){for(;;)if(0===e.n)return t=["grammarly-extension","grammarly-desktop-integration","grammarly-mirror","grammarly-popups","grammarly-extension-vbars","grammarly-extension-vbar-cad","grammarly-extension-vbars-feedback-form"],e.a(2,t.some(function(e){return null!==n._document.querySelector(e)}))},e)})),function(){return o.apply(this,arguments)})},{key:"_detectDarkReader",value:(r=UO(LO().m(function e(){return LO().w(function(e){for(;;)if(0===e.n)return e.a(2,this._detectDarkModeExtension(50))},e,this)})),function(){return r.apply(this,arguments)})},{key:"_detectSuperDarkMode",value:(n=UO(LO().m(function e(){return LO().w(function(e){for(;;)if(0===e.n)return e.a(2,this._detectDarkModeExtension(5))},e,this)})),function(){return n.apply(this,arguments)})},{key:"_detectDarkModeExtension",value:(t=UO(LO().m(function e(t){var n,r,o,i,a;return LO().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,(n=this._document.createElement("div")).style.cssText="background-color:#ffffff;width:100px;height:100px;position:absolute;top:-9999px;left:-9999px;z-index:-1;visibility:hidden;opacity:0;",this._document.body.appendChild(n),e.n=1,new Promise(function(e){return setTimeout(e,500)});case 1:return r=this._window.getComputedStyle(n),o=r.backgroundColor,this._document.body.removeChild(n),i="rgb(0, 0, 0)"===o||function(){var e=o.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return!!e&&(parseInt(e[1],10)+parseInt(e[2],10)+parseInt(e[3],10))/3<t}(),e.a(2,i);case 2:return e.p=2,a=e.v,yt.debug("Dark mode detection error: ".concat(a.message)),e.a(2,!1)}},e,this,[[0,2]])})),function(e){return t.apply(this,arguments)})},{key:"_detectAdobeAcrobat",value:(e=UO(LO().m(function e(){var t;return LO().w(function(e){for(;;)if(0===e.n)return e.a(2,"true"===(null===(t=this._window)||void 0===t||null===(t=t.sessionStorage)||void 0===t?void 0:t.getItem("adobeCleanFontAdded")))},e,this)})),function(){return e.apply(this,arguments)})}]);var e,t,n,r,o,i,a,u,s,c,l,f,p,h,y,d,m,v,b,g,_,w,S,E}(),tC=function(e){function t(e,n,r,o){var i,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return QO(this,t),(i=AO(this,t))._configurationRepository=e,i._domUtils=r,i._utils=n,i._dataQueue=o,i._regularExtensionsScanner=a||new eC(window,document),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IO(e,t)}(t,e),GO(t,[{key:"startFeature",value:(n=UO(LO().m(function e(){var t,n;return LO().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,this._regularExtensionsScanner.scan();case 1:(t=e.v).length>0?(yt.info("Detected browser extensions: ".concat(t.join(", "))),this._sendData(t)):(yt.info("No browser extensions detected"),this._sendData([])),e.n=3;break;case 2:e.p=2,n=e.v,yt.error("Failed to detect browser extensions: ".concat(n.message)),this._sendData([]);case 3:return e.a(2)}},e,this,[[0,2]])})),function(){return n.apply(this,arguments)})},{key:"_sendData",value:function(e){this._dataQueue.addToQueue("static_fields",["browser_extensions",["v1",e]],!1)}}],[{key:"getDefaultSettings",value:function(){return zO}}]);var n}(Qo);function nC(e){return nC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nC(e)}function rC(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return oC(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(oC(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,oC(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,oC(f,"constructor",c),oC(c,"constructor",s),s.displayName="GeneratorFunction",oC(c,o,"GeneratorFunction"),oC(f),oC(f,o,"Generator"),oC(f,r,function(){return this}),oC(f,"toString",function(){return"[object Generator]"}),(rC=function(){return{w:i,m:p}})()}function oC(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}oC=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){oC(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},oC(e,t,n,r)}function iC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return aC(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aC(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function uC(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function sC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cC(r.key),r)}}function cC(e){var t=function(e,t){if("object"!=nC(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nC(t)?t:t+""}function lC(e,t,n){return t=pC(t),function(e,t){if(t&&("object"==nC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,fC()?Reflect.construct(t,n||[],pC(e).constructor):t.apply(e,n))}function fC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(fC=function(){return!!e})()}function pC(e){return pC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pC(e)}function hC(e,t){return hC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hC(e,t)}var yC=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=lC(this,t))._dataQ=e,n.drmData={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hC(e,t)}(t,e),function(e,t,n){return t&&sC(e.prototype,t),n&&sC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"hashDRMData",value:function(e){return VP(JSON.stringify(e))}},{key:"startFeature",value:(n=rC().m(function e(){var t,n,r,o,i,a,u,s,c;return rC().w(function(e){for(;;)switch(e.n){case 0:t={widevine:"com.widevine.alpha",playready:"com.microsoft.playready",fairplay:"com.apple.fairplay",clearkey:"org.w3.clearkey"},n=[{initDataTypes:["cenc"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"'}]}],r=0,o=Object.entries(t);case 1:if(!(r<o.length)){e.n=6;break}return i=iC(o[r],2),a=i[0],u=i[1],e.p=2,e.n=3,navigator.requestMediaKeySystemAccess(u,n);case 3:s=e.v,this.drmData[a]={supported:!0,keySystem:u,sessionTypes:s.getConfiguration().sessionTypes,videoCapabilities:s.getConfiguration().videoCapabilities,audioCapabilities:s.getConfiguration().audioCapabilities},e.n=5;break;case 4:e.p=4,e.v,this.drmData[a]={supported:!1};case 5:r++,e.n=1;break;case 6:c=this.hashDRMData(this.drmData),this.sendData(this.drmData),yt.debug("DRMDataCollector - DRM Data"),yt.debug(this.drmData),yt.debug(c);case 7:return e.a(2)}},e,this,[[2,4]])}),r=function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function a(e){uC(i,r,o,a,u,"next",e)}function u(e){uC(i,r,o,a,u,"throw",e)}a(void 0)})},function(){return r.apply(this,arguments)})},{key:"sendData",value:function(e){this._dataQ.addToQueue("static_fields",["drm",e],!1)}}],[{key:"getDefaultSettings",value:function(){return{configKey:"isDRMFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null}}}]);var n,r}(Qo),dC=yC;function mC(e){return mC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mC(e)}function vC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bC(r.key),r)}}function bC(e){var t=function(e,t){if("object"!=mC(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=mC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mC(t)?t:t+""}function gC(e,t,n){return t=wC(t),function(e,t){if(t&&("object"==mC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_C()?Reflect.construct(t,n||[],wC(e).constructor):t.apply(e,n))}function _C(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_C=function(){return!!e})()}function wC(e){return wC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wC(e)}function SC(e,t){return SC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},SC(e,t)}var EC=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=gC(this,t)).validateParams(e,n),r.usage=e,r.quota=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SC(e,t)}(t,e),function(e,t,n){return t&&vC(e.prototype,t),n&&vC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e,t){"number"==typeof e&&"number"==typeof t||yt.warn("wrong type in StorageEstimate parameters. usage : {expected: number, received: ".concat(mC(e),"}, quota : {expected: number, received: ").concat(mC(t),"}"))}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),[this.usage,this.quota]];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&Array.isArray(e[1])&&2===e[1].length||yt.warn("StorageEstimate - Contract verification failed")}},{key:"getName",value:function(){return"storage_estimate"}}])}(Nm);function kC(e){return kC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kC(e)}function TC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,PC(r.key),r)}}function PC(e){var t=function(e,t){if("object"!=kC(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=kC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kC(t)?t:t+""}function OC(e,t,n){return t=jC(t),function(e,t){if(t&&("object"==kC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,CC()?Reflect.construct(t,n||[],jC(e).constructor):t.apply(e,n))}function CC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(CC=function(){return!!e})()}function jC(e){return jC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jC(e)}function RC(e,t){return RC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},RC(e,t)}var MC=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=OC(this,t)).validateParams(e),n.directoryName=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RC(e,t)}(t,e),function(e,t,n){return t&&TC(e.prototype,t),n&&TC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e){"string"==typeof e||yt.warn("wrong type in StorageDirectory parameters. directoryName : {expected: string, received: ".concat(kC(e),"}"))}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),this.directoryName];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&"string"==typeof e[1]||yt.warn("StorageDirectory - Contract verification failed")}},{key:"getName",value:function(){return"storage_directory"}}])}(Nm);function BC(e){return BC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BC(e)}function AC(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return xC(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(xC(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,xC(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,xC(f,"constructor",c),xC(c,"constructor",s),s.displayName="GeneratorFunction",xC(c,o,"GeneratorFunction"),xC(f),xC(f,o,"Generator"),xC(f,r,function(){return this}),xC(f,"toString",function(){return"[object Generator]"}),(AC=function(){return{w:i,m:p}})()}function xC(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}xC=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){xC(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},xC(e,t,n,r)}function DC(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function IC(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){DC(i,r,o,a,u,"next",e)}function u(e){DC(i,r,o,a,u,"throw",e)}a(void 0)})}}function LC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,FC(r.key),r)}}function FC(e){var t=function(e,t){if("object"!=BC(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=BC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==BC(t)?t:t+""}function NC(e,t,n){return t=WC(t),function(e,t){if(t&&("object"==BC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,UC()?Reflect.construct(t,n||[],WC(e).constructor):t.apply(e,n))}function UC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(UC=function(){return!!e})()}function WC(e){return WC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},WC(e)}function GC(e,t){return GC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},GC(e,t)}var HC={configKey:"isStorageFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!0,runInLean:!0,isRunning:!1,instance:null},QC=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=NC(this,t))._dataQ=e,r._devDebugDataQueue=n,r._storageManager=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GC(e,t)}(t,e),function(e,t,n){return t&&LC(e.prototype,t),n&&LC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:(a=IC(AC().m(function e(){var t;return AC().w(function(e){for(;;)switch(e.n){case 0:return yt.info("Starting Storage Feature"),this._initializeStorageManager(),e.p=1,e.n=2,this._collectStorageEstimateInfo();case 2:return e.n=3,this._collectStorageDirectoryInfo();case 3:e.n=5;break;case 4:e.p=4,t=e.v,yt.error("Error in Storage Feature: ".concat(t.message||t));case 5:return e.a(2)}},e,this,[[1,4]])})),function(){return a.apply(this,arguments)})},{key:"_initializeStorageManager",value:function(){this._storageManager||(this._storageManager=this.getStorageManager())}},{key:"getStorageManager",value:function(){return"undefined"!=typeof navigator&&navigator.storage?navigator.storage:null}},{key:"_collectStorageEstimateInfo",value:(i=IC(AC().m(function e(){var t,n,r,o;return AC().w(function(e){for(;;)switch(e.n){case 0:return yt.info("Collecting storage estimate properties"),e.p=1,e.n=2,this._getStorageEstimateInfo();case 2:t=e.v,this._isValidStorageEstimate(t)?(n=new EC(t.usage,t.quota),r=n.buildQueueMessage(),this._dataQ.addToQueue("static_fields",r,!1)):yt.warn("Invalid storage estimate data received"),e.n=4;break;case 3:throw e.p=3,o=e.v,yt.error("Error collecting storage estimate information: ".concat(o.message||o)),o;case 4:return e.a(2)}},e,this,[[1,3]])})),function(){return i.apply(this,arguments)})},{key:"_isValidStorageEstimate",value:function(e){return e&&"number"==typeof e.usage&&"number"==typeof e.quota&&e.usage>=0&&e.quota>=0}},{key:"_getStorageEstimateInfo",value:(o=IC(AC().m(function e(){var t,n;return AC().w(function(e){for(;;)switch(e.n){case 0:if(e.p=0,this._storageManager){e.n=1;break}throw yt.error("StorageManager is not initialized or unavailable."),new Error("StorageManager is not initialized or unavailable.");case 1:return e.n=2,this._storageManager.estimate();case 2:return t=e.v,e.a(2,{quota:t.quota,usage:t.usage});case 3:throw e.p=3,n=e.v,yt.error("Failed to get storage estimate: ".concat(n.message||n)),n;case 4:return e.a(2)}},e,this,[[0,3]])})),function(){return o.apply(this,arguments)})},{key:"_collectStorageDirectoryInfo",value:(r=IC(AC().m(function e(){var t,n,r,o;return AC().w(function(e){for(;;)switch(e.n){case 0:return yt.info("Collecting storage directory properties"),e.p=1,e.n=2,this._getStorageDirectoryInfo();case 2:t=e.v,this._isValidDirectoryName(t)?(n=new MC(t),r=n.buildQueueMessage(),this._devDebugDataQueue.addToQueue("static_fields",r,!1)):yt.warn("Invalid storage directory data received"),e.n=4;break;case 3:throw e.p=3,o=e.v,yt.error("Error collecting storage directory information: ".concat(o.message||o)),o;case 4:return e.a(2)}},e,this,[[1,3]])})),function(){return r.apply(this,arguments)})},{key:"_isValidDirectoryName",value:function(e){return void 0!==e&&"string"==typeof e}},{key:"_getStorageDirectoryInfo",value:(n=IC(AC().m(function e(){var t,n;return AC().w(function(e){for(;;)switch(e.n){case 0:if(e.p=0,this._storageManager){e.n=1;break}throw yt.error("StorageManager is not initialized or unavailable."),new Error("StorageManager is not initialized or unavailable.");case 1:return e.n=2,this._storageManager.getDirectory();case 2:return t=e.v,e.a(2,t.name);case 3:throw e.p=3,n=e.v,yt.error("Failed to get storage directory: ".concat(n.message||n)),n;case 4:return e.a(2)}},e,this,[[0,3]])})),function(){return n.apply(this,arguments)})}],[{key:"getDefaultSettings",value:function(){return HC}}]);var n,r,o,i,a}(Qo);function zC(e){return zC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zC(e)}function VC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,KC(r.key),r)}}function KC(e){var t=function(e,t){if("object"!=zC(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=zC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zC(t)?t:t+""}function qC(e,t,n){return t=YC(t),function(e,t){if(t&&("object"==zC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,JC()?Reflect.construct(t,n||[],YC(e).constructor):t.apply(e,n))}function JC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(JC=function(){return!!e})()}function YC(e){return YC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},YC(e)}function XC(e,t){return XC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},XC(e,t)}var ZC=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=qC(this,t)).validateParams(e),n.keyboardLayout=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XC(e,t)}(t,e),function(e,t,n){return t&&VC(e.prototype,t),n&&VC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e){"string"==typeof e||yt.warn("wrong type in KeyboardLayout parameters. keyboardLayout : {expected: string, received: ".concat(zC(e),"}"))}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),this.keyboardLayout];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&"string"==typeof e[1]||yt.warn("KeyboardLayout - Contract verification failed")}},{key:"getName",value:function(){return"keyboard_layout"}}])}(Nm);function $C(e){return $C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$C(e)}function ej(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return tj(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(tj(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,tj(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,tj(f,"constructor",c),tj(c,"constructor",s),s.displayName="GeneratorFunction",tj(c,o,"GeneratorFunction"),tj(f),tj(f,o,"Generator"),tj(f,r,function(){return this}),tj(f,"toString",function(){return"[object Generator]"}),(ej=function(){return{w:i,m:p}})()}function tj(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}tj=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){tj(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},tj(e,t,n,r)}function nj(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function rj(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){nj(i,r,o,a,u,"next",e)}function u(e){nj(i,r,o,a,u,"throw",e)}a(void 0)})}}function oj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ij(r.key),r)}}function ij(e){var t=function(e,t){if("object"!=$C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$C(t)?t:t+""}function aj(e,t,n){return t=sj(t),function(e,t){if(t&&("object"==$C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,uj()?Reflect.construct(t,n||[],sj(e).constructor):t.apply(e,n))}function uj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(uj=function(){return!!e})()}function sj(e){return sj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sj(e)}function cj(e,t){return cj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cj(e,t)}var lj={configKey:"isKeyboardLayoutFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!0,runInLean:!0,isRunning:!1,instance:null},fj=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=aj(this,t))._dataQ=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cj(e,t)}(t,e),function(e,t,n){return t&&oj(e.prototype,t),n&&oj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:(o=rj(ej().m(function e(){return ej().w(function(e){for(;;)switch(e.n){case 0:return yt.info("Starting Keyboard Layout Feature"),e.n=1,this._collectKeyboardLayoutInfo();case 1:return e.a(2)}},e,this)})),function(){return o.apply(this,arguments)})},{key:"getKeyboard",value:function(){return"undefined"!=typeof navigator&&navigator.keyboard?navigator.keyboard:null}},{key:"_collectKeyboardLayoutInfo",value:(r=rj(ej().m(function e(){var t,n,r,o;return ej().w(function(e){for(;;)switch(e.n){case 0:return yt.info("Collecting keyboard layout properties"),e.p=1,e.n=2,this._getKeyboardLayoutInfo();case 2:t=e.v,n=new ZC(t),r=n.buildQueueMessage(),this._dataQ.addToQueue("static_fields",r,!1),e.n=4;break;case 3:e.p=3,o=e.v,yt.error("Error collecting keyboard layout information: ".concat(o));case 4:return e.a(2)}},e,this,[[1,3]])})),function(){return r.apply(this,arguments)})},{key:"_getKeyboardLayoutInfo",value:(n=rj(ej().m(function e(){var t,n,r;return ej().w(function(e){for(;;)switch(e.n){case 0:if(t=this.getKeyboard()){e.n=1;break}throw Error("Could not find keyboard layout");case 1:return e.n=2,t.getLayoutMap();case 2:return n=e.v,r=Array.from(n.values()).join(""),e.a(2,VP(r))}},e,this)})),function(){return n.apply(this,arguments)})}],[{key:"getDefaultSettings",value:function(){return lj}}]);var n,r,o}(Qo);function pj(e){return pj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pj(e)}function hj(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return yj(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(yj(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,yj(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,yj(f,"constructor",c),yj(c,"constructor",s),s.displayName="GeneratorFunction",yj(c,o,"GeneratorFunction"),yj(f),yj(f,o,"Generator"),yj(f,r,function(){return this}),yj(f,"toString",function(){return"[object Generator]"}),(hj=function(){return{w:i,m:p}})()}function yj(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}yj=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){yj(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},yj(e,t,n,r)}function dj(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function mj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vj(r.key),r)}}function vj(e){var t=function(e,t){if("object"!=pj(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pj(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pj(t)?t:t+""}function bj(e,t,n){return t=_j(t),function(e,t){if(t&&("object"==pj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,gj()?Reflect.construct(t,n||[],_j(e).constructor):t.apply(e,n))}function gj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(gj=function(){return!!e})()}function _j(e){return _j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_j(e)}function wj(e,t){return wj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wj(e,t)}var Sj={configKey:"isFontEmojiFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!0,runInLean:!0,isRunning:!1,instance:null},Ej=function(e){function t(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.g.window,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.g.document,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:yt;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=bj(this,t))._dataQ=e,r._window=o,r._document=i,r._logger=a,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wj(e,t)}(t,e),function(e,t,n){return t&&mj(e.prototype,t),n&&mj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"_getBoundingBox",value:function(e,t){var n=e.getBoundingClientRect(),r={};["x","y","left","right","bottom","height","top","width"].forEach(function(e){e in n&&(r[e]=n[e])});var o=t.getComputedStyle(e,null).getPropertyValue("font-family");return r.font=o,r}},{key:"_renderEmojis",value:function(){var e=Array.from({length:80},function(e,t){return String.fromCodePoint(128512+t)}).join(""),t=this._document.createElement("span");t.style.whiteSpace="nowrap",t.innerHTML=e,this._document.body.append(t);var n=this._getBoundingBox(t,this._window);return t.remove(),n}},{key:"startFeature",value:(r=hj().m(function e(){var t;return hj().w(function(e){for(;;)switch(e.n){case 0:try{t=this._renderEmojis(),this._dataQ.addToQueue("static_fields",["font_emoji_info",t],!1)}catch(e){this._logger.error("Failed to collect emoji font information",e)}case 1:return e.a(2)}},e,this)}),o=function(){var e=this,t=arguments;return new Promise(function(n,o){var i=r.apply(e,t);function a(e){dj(i,n,o,a,u,"next",e)}function u(e){dj(i,n,o,a,u,"throw",e)}a(void 0)})},function(){return o.apply(this,arguments)})}],[{key:"getDefaultSettings",value:function(){return Sj}}]);var r,o}(Qo);function kj(e){return kj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kj(e)}function Tj(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return Pj(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(Pj(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,Pj(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,Pj(f,"constructor",c),Pj(c,"constructor",s),s.displayName="GeneratorFunction",Pj(c,o,"GeneratorFunction"),Pj(f),Pj(f,o,"Generator"),Pj(f,r,function(){return this}),Pj(f,"toString",function(){return"[object Generator]"}),(Tj=function(){return{w:i,m:p}})()}function Pj(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Pj=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){Pj(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},Pj(e,t,n,r)}function Oj(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Cj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jj(r.key),r)}}function jj(e){var t=function(e,t){if("object"!=kj(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=kj(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kj(t)?t:t+""}function Rj(e,t,n){return t=Bj(t),function(e,t){if(t&&("object"==kj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Mj()?Reflect.construct(t,n||[],Bj(e).constructor):t.apply(e,n))}function Mj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Mj=function(){return!!e})()}function Bj(e){return Bj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bj(e)}function Aj(e,t){return Aj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Aj(e,t)}var xj={configKey:"isFontMathFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!0,runInLean:!0,isRunning:!1,instance:null},Dj=function(e){function t(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.g.window,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.g.document,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:yt;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Rj(this,t))._dataQ=e,r._window=o,r._document=i,r._logger=a,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Aj(e,t)}(t,e),function(e,t,n){return t&&Cj(e.prototype,t),n&&Cj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"_getBoundingBox",value:function(e,t){try{var n=e.getBoundingClientRect(),r={};["x","y","left","right","bottom","height","top","width"].forEach(function(e){e in n&&(r[e]=n[e])});var o=t.getComputedStyle(e,null).getPropertyValue("font-family");return r.font=o,r}catch(e){return this._logger.error("Failed to get bounding box",e),null}}},{key:"_renderMathFormulas",value:function(){try{var e="<mrow><munderover><mmultiscripts><mo>∏</mo>";[["𝔈","υ","τ","ρ","σ"],["𝔇","π","ο","ν","ξ"],["𝔄","δ","γ","α","β"],["𝔅","θ","η","ε","ζ"],["𝔉","ω","ψ","ϕ","χ"],["ℭ","μ","λ","ι","κ"]].forEach(function(t){var n,r,o,i,a;e+=(n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],"<mmultiscripts><mi>".concat(n,"</mi><mi>").concat(r,"</mi><mi>").concat(o,"</mi>\n                        <mprescripts></mprescripts><mi>").concat(i,"</mi><mi>").concat(a,"</mi></mmultiscripts>"))}),e+="</munderover></mrow>";var t=this._document.createElement("math");t.style.whiteSpace="nowrap",t.innerHTML=e,this._document.body.append(t);var n=this._getBoundingBox(t,this._window);return t.remove(),n}catch(e){return this._logger.error("Failed to render math formulas",e),null}}},{key:"startFeature",value:(r=Tj().m(function e(){var t;return Tj().w(function(e){for(;;)switch(e.n){case 0:try{(t=this._renderMathFormulas())&&this._dataQ.addToQueue("static_fields",["font_math_info",t],!1)}catch(e){this._logger.error("Failed to collect math font information",e)}case 1:return e.a(2)}},e,this)}),o=function(){var e=this,t=arguments;return new Promise(function(n,o){var i=r.apply(e,t);function a(e){Oj(i,n,o,a,u,"next",e)}function u(e){Oj(i,n,o,a,u,"throw",e)}a(void 0)})},function(){return o.apply(this,arguments)})}],[{key:"getDefaultSettings",value:function(){return xj}}]);var r,o}(Qo);function Ij(e){return Ij="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ij(e)}function Lj(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return Fj(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(Fj(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,Fj(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,Fj(f,"constructor",c),Fj(c,"constructor",s),s.displayName="GeneratorFunction",Fj(c,o,"GeneratorFunction"),Fj(f),Fj(f,o,"Generator"),Fj(f,r,function(){return this}),Fj(f,"toString",function(){return"[object Generator]"}),(Lj=function(){return{w:i,m:p}})()}function Fj(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Fj=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){Fj(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},Fj(e,t,n,r)}function Nj(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Uj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Wj(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wj(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Gj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Hj(r.key),r)}}function Hj(e){var t=function(e,t){if("object"!=Ij(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ij(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ij(t)?t:t+""}function Qj(e,t,n){return t=Vj(t),function(e,t){if(t&&("object"==Ij(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,zj()?Reflect.construct(t,n||[],Vj(e).constructor):t.apply(e,n))}function zj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(zj=function(){return!!e})()}function Vj(e){return Vj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vj(e)}function Kj(e,t){return Kj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kj(e,t)}var qj={configKey:"isFontWidthFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!0,runInLean:!0,isRunning:!1,instance:null},Jj=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.document,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.devicePixelRatio;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Qj(this,t))._dataQ=e,n._document=r,n._devicePixelRatio=o,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kj(e,t)}(t,e),function(e,t,n){return t&&Gj(e.prototype,t),n&&Gj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"_measureFontWidths",value:function(){var e=this,t={default:[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]};function n(e,t,n){t.style.width="".concat(n,"px"),t.style.webkitTextSizeAdjust=t.style.textSizeAdjust="none",this._isZoomNeeded()?t.style.zoom="".concat(1/this._devicePixelRatio):this._isZoomResetNeeded()&&(t.style.zoom="reset");var r=e.createElement("div");r.textContent=Array.from({length:n/20|0},function(){return"word"}).join(" "),t.appendChild(r)}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3,n=this._document.createElement("iframe");this._document.body.appendChild(n);var r=n.contentDocument;r.open(),r.write('<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1"></head><body></body></html>'),r.close();var o=e(r,r.body,t);return this._document.body.removeChild(n),o}.call(this,function(r,o,i){return n.call(e,r,o,i),function(e,n){for(var r={},o={},i=function(){var t=Uj(u[a],2),o=t[0],i=t[1][0]||{},s=e.createElement("span");s.textContent="mmMwWLliI0fiflO&1",s.style.whiteSpace="nowrap",Object.entries(i).forEach(function(e){var t=Uj(e,2),n=t[0],r=t[1];void 0!==r&&(s.style[n]=r)}),r[o]=s,n.append(e.createElement("br"),s)},a=0,u=Object.entries(t);a<u.length;a++)i();return Object.keys(t).forEach(function(e){o[e]=r[e].getBoundingClientRect().width}),o}(r,o)})}},{key:"_isZoomNeeded",value:function(){return!0}},{key:"_isZoomResetNeeded",value:function(){return!1}},{key:"startFeature",value:(n=Lj().m(function e(){var t;return Lj().w(function(e){for(;;)switch(e.n){case 0:try{t=this._measureFontWidths(),this._dataQ.addToQueue("static_fields",["font_width_info",t],!1)}catch(e){yt.error("Failed to collect font width information",e)}case 1:return e.a(2)}},e,this)}),r=function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function a(e){Nj(i,r,o,a,u,"next",e)}function u(e){Nj(i,r,o,a,u,"throw",e)}a(void 0)})},function(){return r.apply(this,arguments)})}],[{key:"getDefaultSettings",value:function(){return qj}}]);var n,r}(Qo);function Yj(e){return Yj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yj(e)}function Xj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zj(r.key),r)}}function Zj(e){var t=function(e,t){if("object"!=Yj(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Yj(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yj(t)?t:t+""}function $j(e,t,n){return t=tR(t),function(e,t){if(t&&("object"==Yj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,eR()?Reflect.construct(t,n||[],tR(e).constructor):t.apply(e,n))}function eR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(eR=function(){return!!e})()}function tR(e){return tR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tR(e)}function nR(e,t){return nR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nR(e,t)}var rR=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=$j(this,t)).validateParams(e),n.isHighRes=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nR(e,t)}(t,e),function(e,t,n){return t&&Xj(e.prototype,t),n&&Xj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"validateParams",value:function(e){"boolean"==typeof e||yt.warn("wrong type in ScreenHighRes parameters. isHighRes : {expected: boolean, received: ".concat(Yj(e),"}"))}},{key:"buildQueueMessage",value:function(){var e=[this.getName(),this.isHighRes];return this.validateMessage(e),e}},{key:"validateMessage",value:function(e){"string"==typeof e[0]&&"boolean"==typeof e[1]||yt.warn("ScreenHighRes - Contract verification failed")}},{key:"getName",value:function(){return"screen_high_res"}}])}(Nm);function oR(e){return oR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oR(e)}function iR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,aR(r.key),r)}}function aR(e){var t=function(e,t){if("object"!=oR(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=oR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oR(t)?t:t+""}function uR(e,t,n){return t=cR(t),function(e,t){if(t&&("object"==oR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,sR()?Reflect.construct(t,n||[],cR(e).constructor):t.apply(e,n))}function sR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(sR=function(){return!!e})()}function cR(e){return cR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cR(e)}function lR(e,t){return lR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},lR(e,t)}var fR={configKey:"isScreenHighResFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!0,runInLean:!0,isRunning:!1,instance:null},pR=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=uR(this,t))._dataQ=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lR(e,t)}(t,e),function(e,t,n){return t&&iR(e.prototype,t),n&&iR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:function(){yt.info("Starting Screen High Resolution Feature");var e=t.getScreenHighResInfo(),n=new rR(e).buildQueueMessage();this._dataQ.addToQueue("static_fields",n,!1)}}],[{key:"getDefaultSettings",value:function(){return fR}},{key:"getScreenHighResInfo",value:function(){var e=t.getMediaQueryList("(-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2), (min-resolution: 192dpi)");return!!e&&e.matches}},{key:"getMediaQueryList",value:function(e){return"undefined"!=typeof window&&"function"==typeof window.matchMedia?window.matchMedia(e):null}}])}(Qo);function hR(e){return hR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hR(e)}function yR(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return dR(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(dR(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,dR(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,dR(f,"constructor",c),dR(c,"constructor",s),s.displayName="GeneratorFunction",dR(c,o,"GeneratorFunction"),dR(f),dR(f,o,"Generator"),dR(f,r,function(){return this}),dR(f,"toString",function(){return"[object Generator]"}),(yR=function(){return{w:i,m:p}})()}function dR(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}dR=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){dR(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},dR(e,t,n,r)}function mR(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function vR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bR(r.key),r)}}function bR(e){var t=function(e,t){if("object"!=hR(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=hR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hR(t)?t:t+""}function gR(e,t,n){return t=wR(t),function(e,t){if(t&&("object"==hR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_R()?Reflect.construct(t,n||[],wR(e).constructor):t.apply(e,n))}function _R(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_R=function(){return!!e})()}function wR(e){return wR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wR(e)}function SR(e,t){return SR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},SR(e,t)}var ER={configKey:"isHeapFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},kR=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.performance,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=gR(this,t))._dataQ=e,n._performance=r,n._logger=o,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SR(e,t)}(t,e),function(e,t,n){return t&&vR(e.prototype,t),n&&vR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"collectHeapData",value:function(){var e={timestamp:Date.now()};try{if(this._performance&&this._performance.memory){var t=this._performance.memory,n=t.usedJSHeapSize,r=t.totalJSHeapSize,o=t.jsHeapSizeLimit;void 0!==n&&(e.usedJSHeapSize=n),void 0!==r&&(e.totalJSHeapSize=r),void 0!==o&&(e.jsHeapSizeLimit=o)}}catch(e){this._logger&&this._logger.debug("HeapCollector - Error collecting heap data:",e)}return e}},{key:"startFeature",value:(n=yR().m(function e(){var t;return yR().w(function(e){for(;;)switch(e.n){case 0:this._logger&&this._logger.info("HeapCollector - Starting heap data collection");try{t=this.collectHeapData(),this._logger&&this._logger.debug("HeapCollector - Heap Data collected: "+JSON.stringify(t)),this.sendData(t)}catch(e){this._logger&&this._logger.error("HeapCollector - Error during data collection:",e)}case 1:return e.a(2)}},e,this)}),r=function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function a(e){mR(i,r,o,a,u,"next",e)}function u(e){mR(i,r,o,a,u,"throw",e)}a(void 0)})},function(){return r.apply(this,arguments)})},{key:"sendData",value:function(e){this._dataQ.addToQueue("static_fields",["heap",e],!1)}}],[{key:"getDefaultSettings",value:function(){return ER}}]);var n,r}(Qo),TR=kR;function PR(e){return PR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PR(e)}function OR(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return CR(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(CR(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,CR(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,CR(f,"constructor",c),CR(c,"constructor",s),s.displayName="GeneratorFunction",CR(c,o,"GeneratorFunction"),CR(f),CR(f,o,"Generator"),CR(f,r,function(){return this}),CR(f,"toString",function(){return"[object Generator]"}),(OR=function(){return{w:i,m:p}})()}function CR(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}CR=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){CR(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},CR(e,t,n,r)}function jR(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function RR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,MR(r.key),r)}}function MR(e){var t=function(e,t){if("object"!=PR(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=PR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==PR(t)?t:t+""}var BR=function(){return function(e,t,n){return t&&RR(e.prototype,t),n&&RR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._logger=t,this._typedArrayFactory=n||{createFloat32Array:function(e){return new Float32Array(e)},createUint8Array:function(e){return new Uint8Array(e)},createUint32Array:function(e){return new Uint32Array(e)},createBigInt64Array:function(e){return new BigInt64Array(e)}}},[{key:"_getNaNSignByte",value:function(){try{var e=this._typedArrayFactory.createFloat32Array(1),t=this._typedArrayFactory.createUint8Array(e.buffer);return e[0]=1/0,e[0]=e[0]-e[0],120===this._typedArrayFactory.createUint8Array(this._typedArrayFactory.createUint32Array([305419896]).buffer)[0]?t[3]:t[0]}catch(e){return void(this._logger&&this._logger.debug("ArchitectureDetectorService - Error getting NaN sign byte:",e))}}},{key:"_getPointerSize",value:function(){try{return this._typedArrayFactory.createBigInt64Array(1),64}catch(e){return 32}}},{key:"_getEndianness",value:function(){try{return 120===this._typedArrayFactory.createUint8Array(this._typedArrayFactory.createUint32Array([305419896]).buffer)[0]}catch(e){return void(this._logger&&this._logger.debug("ArchitectureDetectorService - Error detecting endianness:",e))}}},{key:"detectArchitecture",value:(e=OR().m(function e(){var t,n,r,o;return OR().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,t=this._getNaNSignByte(),n=this._getPointerSize(),r=this._getEndianness(),e.a(2,{signByte:t,pointerSize:n,isLittleEndian:r});case 1:return e.p=1,o=e.v,this._logger&&this._logger.debug("ArchitectureDetectorService - Error detecting architecture:",o),e.a(2,{signByte:void 0,pointerSize:void 0,isLittleEndian:void 0,error:o.message})}},e,this,[[0,1]])}),t=function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){jR(i,r,o,a,u,"next",e)}function u(e){jR(i,r,o,a,u,"throw",e)}a(void 0)})},function(){return t.apply(this,arguments)})}]);var e,t}(),AR=BR;function xR(e){return xR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xR(e)}function DR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,IR(r.key),r)}}function IR(e){var t=function(e,t){if("object"!=xR(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=xR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xR(t)?t:t+""}var LR={1:63.66,2:9.925,3:5.841,4:4.604,5:4.032,6:3.707,7:3.499,8:3.355,9:3.25,10:3.169,11:3.106,12:3.055,13:3.012,14:2.977,15:2.947,16:2.921,17:2.898,18:2.878,19:2.861,20:2.845,21:2.831,22:2.819,23:2.807,24:2.797,25:2.787,26:2.779,27:2.771,28:2.763,29:2.756,30:2.75,32:2.738,34:2.728,36:2.719,38:2.712,40:2.704,42:2.698,44:2.692,46:2.687,48:2.682,50:2.678,55:2.668,60:2.66,65:2.654,70:2.648,80:2.639,100:2.626,150:2.609,200:2.601},FR=function(){return function(e,t,n){return t&&DR(e.prototype,t),n&&DR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.performance=window.performance||Date,this.performance.now||(this.performance.now=this.performance.webkitNow?this.performance.webkitNow:function(){return+new Date});try{var t=new Blob(['"use strict";self.onmessage=function(e){for(var n=e.data;n;)n--;self.postMessage(null)};'],{type:"application/javascript"});this.workloadUrl=URL.createObjectURL(t)}catch(e){yt.debug("CoreEstimatorService - Cannot create blob worker"),this.workloadUrl=""}},[{key:"getCoreCount",value:function(){var e=this;return new Promise(function(t){try{if("undefined"==typeof Worker||!e.workloadUrl)return t(1);var n,r=[],o=[];e._iterate(function(t,i){e._measure(r,t,20,function(r){if(1===t)Array.prototype.push.apply(o,r),n=e._analyse(o),i(!0);else{var a=e._analyse(r),u=a.uvariance/a.size,s=n.uvariance/n.size,c=(a.mean-n.mean)/Math.sqrt(u+s),l=Math.pow(u+s,2)/(Math.pow(a.uvariance,2)/(Math.pow(a.size,2)*(a.size-1))+Math.pow(n.uvariance,2)/(Math.pow(n.size,2)*(n.size-1)));i(e._accept(c,l))}})},function(n){r.forEach(function(e){return e.terminate()}),URL.revokeObjectURL(e.workloadUrl),t(n)})}catch(e){yt.debug("CoreEstimatorService - Error in getCoreCount:",e),t(1)}})}},{key:"_measure",value:function(e,t,n,r){for(var o=this,i=[],a=e.length;a<t;a++)e.push(new Worker(this.workloadUrl));this._loop(function(a){for(var u,s=t,c=0;c<t;c++)e[c].onmessage=function(){--s||(n--,i.push(o.performance.now()-u),n?a():r(i))};for(var l=0;l<t;l++)e[l].postMessage(4194304);u=o.performance.now()})}},{key:"_loop",value:function(e){!function t(){e(t)}()}},{key:"_iterate",value:function(e,t){var n=1,r=1/0,o=function(a){e(1,function(){e(a,function(e){if(e)n=a,o(2*a);else{if(r=a,1===n)return t(n);i(3*n/2,n/4)}})})},i=function(o,a){e(1,function(){e(o,function(e){return e?(n=o,o+=a):(r=o,o-=a),r-n===1?t(n):a?void i(o,a>>1):t(r-1)})})};o(2)}},{key:"_analyse",value:function(e){var t=e.length;if(!t)return null;for(var n=1/0,r=-1/0,o=0,i=0,a=0;a<t;a++){var u=e[a];u<n&&(n=u),u>r&&(r=u),o+=u,i+=Math.pow(u,2)}var s=o/t,c=Math.pow(s,2),l=0;return t>1&&(l=(i-t*c)/(t-1)),{size:t,mean:s,uvariance:l}}},{key:"_accept",value:function(e,t){var n=Object.keys(LR),r=n.reduce(function(e,n){return t<n?e:n}),o=n.reduce(function(e,n){return t>n?e:n}),i=o-r;return e<this._linear(LR[r],LR[o],(t-r)/i)}},{key:"_linear",value:function(e,t,n){return e+(t-e)*n}}])}(),NR=FR;function UR(e){return UR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UR(e)}function WR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return GR(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?GR(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function HR(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return QR(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(QR(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,QR(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,QR(f,"constructor",c),QR(c,"constructor",s),s.displayName="GeneratorFunction",QR(c,o,"GeneratorFunction"),QR(f),QR(f,o,"Generator"),QR(f,r,function(){return this}),QR(f,"toString",function(){return"[object Generator]"}),(HR=function(){return{w:i,m:p}})()}function QR(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}QR=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){QR(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},QR(e,t,n,r)}function zR(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function VR(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){zR(i,r,o,a,u,"next",e)}function u(e){zR(i,r,o,a,u,"throw",e)}a(void 0)})}}function KR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qR(r.key),r)}}function qR(e){var t=function(e,t){if("object"!=UR(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=UR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==UR(t)?t:t+""}function JR(e,t,n){return t=XR(t),function(e,t){if(t&&("object"==UR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,YR()?Reflect.construct(t,n||[],XR(e).constructor):t.apply(e,n))}function YR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(YR=function(){return!!e})()}function XR(e){return XR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},XR(e)}function ZR(e,t){return ZR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ZR(e,t)}var $R={configKey:"isCPUFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},eM=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=JR(this,t))._dataQ=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZR(e,t)}(t,e),function(e,t,n){return t&&KR(e.prototype,t),n&&KR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"detectArchitecture",value:(o=VR(HR().m(function e(){var t,n;return HR().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,t=new AR,e.n=1,t.detectArchitecture();case 1:return e.a(2,e.v);case 2:return e.p=2,n=e.v,yt.debug("CPUDataCollector - Error detecting architecture:",n),e.a(2,{signByte:void 0,pointerSize:void 0,isLittleEndian:void 0,error:n.message})}},e,null,[[0,2]])})),function(){return o.apply(this,arguments)})},{key:"detectAvailableCores",value:(r=VR(HR().m(function e(){var t,n;return HR().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,t=new NR,e.n=1,t.getCoreCount();case 1:return e.a(2,e.v);case 2:return e.p=2,n=e.v,yt.debug("CPUDataCollector - Error detecting available cores:",n),e.a(2,1)}},e,null,[[0,2]])})),function(){return r.apply(this,arguments)})},{key:"startFeature",value:(n=VR(HR().m(function e(){var t,n,r,o,i,a;return HR().w(function(e){for(;;)switch(e.n){case 0:return yt.info("CPUDataCollector - Starting CPU data collection"),e.p=1,e.n=2,Promise.all([this.detectArchitecture(),this.detectAvailableCores()]);case 2:t=e.v,n=WR(t,2),r=n[0],o=n[1],i={architecture:r,availableCores:o},yt.debug("CPUDataCollector - CPU Data collected: "+JSON.stringify(i)),this.sendData(i),e.n=4;break;case 3:e.p=3,a=e.v,yt.error("CPUDataCollector - Error during data collection:",a);case 4:return e.a(2)}},e,this,[[1,3]])})),function(){return n.apply(this,arguments)})},{key:"sendData",value:function(e){this._dataQ.addToQueue("static_fields",["cpu",e],!1)}}],[{key:"getDefaultSettings",value:function(){return $R}}]);var n,r,o}(Qo),tM=eM;function nM(e){return nM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nM(e)}function rM(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return oM(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(oM(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,oM(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,oM(f,"constructor",c),oM(c,"constructor",s),s.displayName="GeneratorFunction",oM(c,o,"GeneratorFunction"),oM(f),oM(f,o,"Generator"),oM(f,r,function(){return this}),oM(f,"toString",function(){return"[object Generator]"}),(rM=function(){return{w:i,m:p}})()}function oM(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}oM=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){oM(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},oM(e,t,n,r)}function iM(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function aM(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){iM(i,r,o,a,u,"next",e)}function u(e){iM(i,r,o,a,u,"throw",e)}a(void 0)})}}function uM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sM(r.key),r)}}function sM(e){var t=function(e,t){if("object"!=nM(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nM(t)?t:t+""}var cM=function(){return function(e,t,n){return t&&uM(e.prototype,t),n&&uM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.log,r=t.document,o=t.performance,i=t.math;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._log=n||yt,this._document=r||window.document,this._performance=o||window.performance,this._math=i||Math,this.contextTypes=["webgl2"]},[{key:"collectWebGLTiming",value:(t=aM(rM().m(function e(){var t,n,r,o;return rM().w(function(e){for(;;)switch(e.n){case 0:if(e.p=0,(t=this._document.createElement("canvas")).width=256,t.height=128,n=t.getContext("webgl2")){e.n=1;break}return e.a(2,{});case 1:return e.n=2,this.runUniformMatrixBenchmark(n);case 2:return r=e.v,e.a(2,r.results.totalTime);case 3:return e.p=3,o=e.v,this._log.debug("WebGLTimingService - Error collecting WebGL timing:",o),e.a(2,{})}},e,this,[[0,3]])})),function(){return t.apply(this,arguments)})},{key:"runUniformMatrixBenchmark",value:(e=aM(rM().m(function e(t){var n,r,o,i,a,u,s,c,l,f,p,h,y,d;return rM().w(function(e){for(;;)switch(e.n){case 0:if(n={iterations:1e3,matrixCount:15,results:{}},e.p=1,r=this.createTestMatrices(n.matrixCount),o=this.createSimpleShaderProgram(t)){e.n=2;break}throw new Error("Failed to create shader program");case 2:for(t.useProgram(o),i=t.getUniformLocation(o,"u_matrix"),a=0;a<10;a++)for(u=0;u<r.length;u++)t.uniformMatrix4fv(i,!1,r[u]);for(s=this._performance.now(),c=0;c<n.iterations;c++)for(l=0;l<r.length;l++)t.uniformMatrix4fv(i,!1,r[l]);f=this._performance.now(),p=f-s,h=n.iterations*n.matrixCount,y=h/p*1e3,n.results={totalTime:p,operationsPerSecond:y},t.deleteProgram(o),e.n=4;break;case 3:e.p=3,d=e.v,this._log.debug("WebGLTimingService - Error running uniformMatrix benchmark:",d),n.results={error:d.message,totalTime:0,operationsPerSecond:0};case 4:return e.a(2,n)}},e,this,[[1,3]])})),function(t){return e.apply(this,arguments)})},{key:"createTestMatrices",value:function(e){for(var t=[],n=0;n<e;n++){var r=new Float32Array(16),o=n/e*this._math.PI*2,i=this._math.cos(o),a=this._math.sin(o);r[0]=i,r[1]=0,r[2]=a,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=-a,r[9]=0,r[10]=i,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,t.push(r)}return t}},{key:"createSimpleShaderProgram",value:function(e){try{var t=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(t,"\n        attribute vec4 a_position;\n        uniform mat4 u_matrix;\n        void main() {\n          gl_Position = u_matrix * a_position;\n        }\n      "),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))return this._log.debug("WebGLTimingService - Vertex shader compilation failed:",e.getShaderInfoLog(t)),e.deleteShader(t),null;var n=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(n,"\n        precision mediump float;\n        void main() {\n          gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\n        }\n      "),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))return this._log.debug("WebGLTimingService - Fragment shader compilation failed:",e.getShaderInfoLog(n)),e.deleteShader(t),e.deleteShader(n),null;var r=e.createProgram();return e.attachShader(r,t),e.attachShader(r,n),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS)?(e.deleteShader(t),e.deleteShader(n),r):(this._log.debug("WebGLTimingService - Program linking failed:",e.getProgramInfoLog(r)),e.deleteShader(t),e.deleteShader(n),e.deleteProgram(r),null)}catch(e){return this._log.debug("WebGLTimingService - Error creating shader program:",e),null}}}]);var e,t}(),lM=cM;function fM(e){return fM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fM(e)}function pM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hM(r.key),r)}}function hM(e){var t=function(e,t){if("object"!=fM(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fM(t)?t:t+""}var yM=function(){return function(e,t,n){return t&&pM(e.prototype,t),n&&pM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._performance=t||window.performance,this._log=n||yt},[{key:"collectBrowserTiming",value:function(){try{var e=this.collectNavigationTiming(),t=this.collectResourceTiming(),n=this.collectPaintTiming(),r=this.collectPerformanceTiming(),o=this.collectBrowserCapabilities();return{domContentLoadedTime:e.domContentLoadedTime,loadCompleteTime:e.loadCompleteTime,firstPaintTime:n.firstPaintTime,firstContentfulPaintTime:n.firstContentfulPaintTime,averageResourceLoadTime:t.averageLoadTime,resourceCount:t.count,timeOrigin:r.timeOrigin,performanceNow:r.now,navigationStart:r.navigationStart,browserProcessingTime:o.processingTime,memoryUsage:o.memoryUsage}}catch(e){return this._log.debug("BrowserTimingService - Error collecting browser timing:",e),this.getFallbackResult()}}},{key:"collectNavigationTiming",value:function(){try{var e=0,t=0;if(this._performance.getEntriesByType){var n=this._performance.getEntriesByType("navigation");if(n.length>0){var r=n[0];e=r.domContentLoadedEventEnd-r.startTime,t=r.loadEventEnd-r.startTime}}else if(this._performance.timing){var o=this._performance.timing;e=o.domContentLoadedEventEnd-o.navigationStart,t=o.loadEventEnd-o.navigationStart}return{domContentLoadedTime:e||0,loadCompleteTime:t||0}}catch(e){return this._log.debug("BrowserTimingService - Error collecting navigation timing:",e),{domContentLoadedTime:0,loadCompleteTime:0}}}},{key:"collectResourceTiming",value:function(){try{var e=0,t=0;if(this._performance.getEntriesByType){var n=this._performance.getEntriesByType("resource");if(n.length>0)e=n.reduce(function(e,t){return e+t.duration},0)/n.length,t=n.length}return{averageLoadTime:e||0,count:t||0}}catch(e){return this._log.debug("BrowserTimingService - Error collecting resource timing:",e),{averageLoadTime:0,count:0}}}},{key:"collectPaintTiming",value:function(){try{var e=0,t=0;if(this._performance.getEntriesByType){var n=this._performance.getEntriesByType("paint");if(n.length>0){var r=n.find(function(e){return"first-paint"===e.name}),o=n.find(function(e){return"first-contentful-paint"===e.name});r&&(e=r.startTime),o&&(t=o.startTime)}}return{firstPaintTime:e||0,firstContentfulPaintTime:t||0}}catch(e){return this._log.debug("BrowserTimingService - Error collecting paint timing:",e),{firstPaintTime:0,firstContentfulPaintTime:0}}}},{key:"collectPerformanceTiming",value:function(){try{return{timeOrigin:this._performance.timeOrigin||0,now:this._performance.now(),navigationStart:this._performance.timing?this._performance.timing.navigationStart:0}}catch(e){return this._log.debug("BrowserTimingService - Error collecting performance timing:",e),{timeOrigin:0,now:0,navigationStart:0}}}},{key:"collectBrowserCapabilities",value:function(){try{for(var e=this._performance.now(),t=0;t<1e5;t++)Math.sqrt(t);var n=this._performance.now()-e,r=0;return this._performance.memory&&(r=this._performance.memory.usedJSHeapSize/1024/1024),{processingTime:n,memoryUsage:r}}catch(e){return this._log.debug("BrowserTimingService - Error collecting browser capabilities:",e),{processingTime:0,memoryUsage:0}}}},{key:"getFallbackResult",value:function(){return{domContentLoadedTime:0,loadCompleteTime:0,firstPaintTime:0,firstContentfulPaintTime:0,averageResourceLoadTime:0,resourceCount:0,timeOrigin:0,performanceNow:0,navigationStart:0,browserProcessingTime:0,memoryUsage:0}}}])}(),dM=yM;function mM(e){return mM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mM(e)}function vM(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return bM(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(bM(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,bM(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,bM(f,"constructor",c),bM(c,"constructor",s),s.displayName="GeneratorFunction",bM(c,o,"GeneratorFunction"),bM(f),bM(f,o,"Generator"),bM(f,r,function(){return this}),bM(f,"toString",function(){return"[object Generator]"}),(vM=function(){return{w:i,m:p}})()}function bM(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}bM=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){bM(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},bM(e,t,n,r)}function gM(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _M(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_M(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function wM(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function SM(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){wM(i,r,o,a,u,"next",e)}function u(e){wM(i,r,o,a,u,"throw",e)}a(void 0)})}}function EM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kM(r.key),r)}}function kM(e){var t=function(e,t){if("object"!=mM(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=mM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mM(t)?t:t+""}var TM=function(){return function(e,t,n){return t&&EM(e.prototype,t),n&&EM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.performance,r=t.log,o=t.worker,i=t.blob,a=t.url;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._performance=n||window.performance||Date,this._performance.now||(this._performance.now=this._performance.webkitNow?this._performance.webkitNow:function(){return+new Date}),this._log=r||yt,this._Worker=o||window.Worker,this._Blob=i||window.Blob,this._URL=a||window.URL},[{key:"runBenchmarks",value:(a=SM(vM().m(function e(){var t,n,r,o,i,a,u,s;return vM().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,Promise.all([this.basicBenchmark(),this.integerBenchmark(),this.floatBenchmark(),this.memoryBenchmark(),this.cryptoBenchmark()]);case 1:return t=e.v,n=gM(t,5),r=n[0],o=n[1],i=n[2],a=n[3],u=n[4],e.a(2,{basicOpsPerMs:r.opsPerMs,integerOpsPerMs:o.opsPerMs,floatOpsPerMs:i.opsPerMs,memoryOpsPerMs:a.opsPerMs,cryptoOpsPerMs:u.opsPerMs});case 2:return e.p=2,s=e.v,this._log.debug("CPUTimingService - Error running benchmarks:",s),e.a(2,this.getFallbackResult())}},e,this,[[0,2]])})),function(){return a.apply(this,arguments)})},{key:"basicBenchmark",value:(i=SM(vM().m(function e(){var t;return vM().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,this.runWorkerBenchmark("\n        self.onmessage = function(e) {\n          try {\n            const startTime = performance.now();\n            let result = 0;\n            for (let i = 0; i < 5000000; i++) {\n              result += Math.sqrt(i);\n            }\n            const executionTime = performance.now() - startTime;\n            \n            self.postMessage({ \n              success: true, \n              executionTime: executionTime,\n              operations: 5000000,\n              opsPerMs: Number((5000000 / executionTime).toPrecision(16))\n            });\n          } catch (error) {\n            self.postMessage({ success: false, error: error.message });\n          }\n        };\n      ");case 1:return e.a(2,e.v);case 2:return e.p=2,t=e.v,this._log.debug("CPUTimingService - Error in basic benchmark:",t),e.a(2,{executionTime:0,operations:0,opsPerMs:0})}},e,this,[[0,2]])})),function(){return i.apply(this,arguments)})},{key:"integerBenchmark",value:(o=SM(vM().m(function e(){var t;return vM().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,this.runWorkerBenchmark("\n        self.onmessage = function(e) {\n          try {\n            const startTime = performance.now();\n            let result = 0;\n            for (let i = 0; i < 10000000; i++) {\n              result = (result + i) * 31 | 0;\n            }\n            const executionTime = performance.now() - startTime;\n            \n            self.postMessage({ \n              success: true, \n              executionTime: executionTime,\n              operations: 10000000,\n              opsPerMs: Number((10000000 / executionTime).toPrecision(16))\n            });\n          } catch (error) {\n            self.postMessage({ success: false, error: error.message });\n          }\n        };\n      ");case 1:return e.a(2,e.v);case 2:return e.p=2,t=e.v,this._log.debug("CPUTimingService - Error in integer benchmark:",t),e.a(2,{executionTime:0,operations:0,opsPerMs:0})}},e,this,[[0,2]])})),function(){return o.apply(this,arguments)})},{key:"floatBenchmark",value:(r=SM(vM().m(function e(){var t;return vM().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,this.runWorkerBenchmark("\n        self.onmessage = function(e) {\n          try {\n            const startTime = performance.now();\n            let result = 0.1;\n            for (let i = 0; i < 5000000; i++) {\n              result += Math.sin(result) + Math.cos(i);\n            }\n            const executionTime = performance.now() - startTime;\n            \n            self.postMessage({ \n              success: true, \n              executionTime: executionTime,\n              operations: 5000000,\n              opsPerMs: Number((5000000 / executionTime).toPrecision(16))\n            });\n          } catch (error) {\n            self.postMessage({ success: false, error: error.message });\n          }\n        };\n      ");case 1:return e.a(2,e.v);case 2:return e.p=2,t=e.v,this._log.debug("CPUTimingService - Error in float benchmark:",t),e.a(2,{executionTime:0,operations:0,opsPerMs:0})}},e,this,[[0,2]])})),function(){return r.apply(this,arguments)})},{key:"memoryBenchmark",value:(n=SM(vM().m(function e(){var t;return vM().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,this.runWorkerBenchmark("\n        self.onmessage = function(e) {\n          try {\n            const startTime = performance.now();\n            const arr = new Uint32Array(1000000);\n            \n            // Sequential write\n            for (let i = 0; i < arr.length; i++) {\n              arr[i] = i;\n            }\n            \n            // Sequential read\n            let sum = 0;\n            for (let i = 0; i < arr.length; i++) {\n              sum += arr[i];\n            }\n            \n            const executionTime = performance.now() - startTime;\n            \n            self.postMessage({ \n              success: true, \n              executionTime: executionTime,\n              operations: arr.length * 2, // write + read\n              opsPerMs: Number(((arr.length * 2) / executionTime).toPrecision(16))\n            });\n          } catch (error) {\n            self.postMessage({ success: false, error: error.message });\n          }\n        };\n      ");case 1:return e.a(2,e.v);case 2:return e.p=2,t=e.v,this._log.debug("CPUTimingService - Error in memory benchmark:",t),e.a(2,{executionTime:0,operations:0,opsPerMs:0})}},e,this,[[0,2]])})),function(){return n.apply(this,arguments)})},{key:"cryptoBenchmark",value:(t=SM(vM().m(function e(){var t;return vM().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,this.runWorkerBenchmark("\n        self.onmessage = function(e) {\n          try {\n            const startTime = performance.now();\n            let result = 0;\n            \n            // Simple hash-like operations\n            for (let i = 0; i < 1000000; i++) {\n              let hash = i;\n              hash = ((hash << 5) - hash) + i;\n              hash = hash & hash; // Convert to 32-bit integer\n              result += hash;\n            }\n            \n            const executionTime = performance.now() - startTime;\n            \n            self.postMessage({ \n              success: true, \n              executionTime: executionTime,\n              operations: 1000000,\n              opsPerMs: Number((1000000 / executionTime).toPrecision(16))\n            });\n          } catch (error) {\n            self.postMessage({ success: false, error: error.message });\n          }\n        };\n      ");case 1:return e.a(2,e.v);case 2:return e.p=2,t=e.v,this._log.debug("CPUTimingService - Error in crypto benchmark:",t),e.a(2,{executionTime:0,operations:0,opsPerMs:0})}},e,this,[[0,2]])})),function(){return t.apply(this,arguments)})},{key:"runWorkerBenchmark",value:(e=SM(vM().m(function e(t){var n=this;return vM().w(function(e){for(;;)if(0===e.n)return e.a(2,new Promise(function(e){try{var r=new n._Blob([t],{type:"application/javascript"}),o=n._URL.createObjectURL(r),i=new n._Worker(o);i.onmessage=function(t){i.terminate(),n._URL.revokeObjectURL(o),t.data.success?e({executionTime:t.data.executionTime,opsPerMs:t.data.opsPerMs}):(n._log.debug("CPUTimingService - Worker benchmark failed:",t.data.error),e({executionTime:0,operations:0,opsPerMs:0}))},i.onerror=function(t){i.terminate(),n._URL.revokeObjectURL(o),n._log.debug("CPUTimingService - Worker error:",t),e({executionTime:0,operations:0,opsPerMs:0})},i.postMessage("start")}catch(t){n._log.debug("CPUTimingService - Error creating worker:",t),e({executionTime:0,operations:0,opsPerMs:0})}}))},e)})),function(t){return e.apply(this,arguments)})},{key:"getFallbackResult",value:function(){return{basicOpsPerMs:0,integerOpsPerMs:0,floatOpsPerMs:0,memoryOpsPerMs:0,cryptoOpsPerMs:0}}}]);var e,t,n,r,o,i,a}(),PM=TM;function OM(e){return OM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OM(e)}function CM(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||jM(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jM(e,t){if(e){if("string"==typeof e)return RM(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?RM(e,t):void 0}}function RM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function MM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,BM(r.key),r)}}function BM(e){var t=function(e,t){if("object"!=OM(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=OM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==OM(t)?t:t+""}var AM=function(){return function(e,t,n){return t&&MM(e.prototype,t),n&&MM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.log,r=t.date;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._log=n||yt,this._Date=r||Date,this._fontScanTimes=new Map,this._onNewRecordAvailableCallback=null},[{key:"setOnNewRecordAvailableCallback",value:function(e){this._onNewRecordAvailableCallback=e}},{key:"recordFontScan",value:function(e){try{var t=e.scanTime,n=e.totalFontsScanned,r=e.totalFontsFound,o=e.fontVersion,i=e.scannedAt;this._fontScanTimes.set(o||"default",{scanTime:t,totalFontsScanned:n,totalFontsFound:r,scannedAt:i||this._Date.now()}),this._log.debug("FontTimingService - Font scan recorded for ".concat(o,": ").concat(t,"ms, ").concat(r,"/").concat(n," fonts found")),this._onNewRecordAvailableCallback&&this._onNewRecordAvailableCallback()}catch(e){this._log.error("FontTimingService - Error recording font scan:",e)}}},{key:"collectFontTiming",value:function(){var e,t={},n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=jM(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}(this._fontScanTimes);try{for(n.s();!(e=n.n()).done;){var r=CM(e.value,2),o=r[0],i=r[1];t[o]=i}}catch(e){n.e(e)}finally{n.f()}return this._fontScanTimes.clear(),t}},{key:"hasFontTimingData",value:function(){return this._fontScanTimes.size>0}}])}(),xM=AM;function DM(e){return DM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DM(e)}function IM(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return LM(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(LM(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,LM(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,LM(f,"constructor",c),LM(c,"constructor",s),s.displayName="GeneratorFunction",LM(c,o,"GeneratorFunction"),LM(f),LM(f,o,"Generator"),LM(f,r,function(){return this}),LM(f,"toString",function(){return"[object Generator]"}),(IM=function(){return{w:i,m:p}})()}function LM(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}LM=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){LM(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},LM(e,t,n,r)}function FM(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function NM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,UM(r.key),r)}}function UM(e){var t=function(e,t){if("object"!=DM(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=DM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==DM(t)?t:t+""}var WM=function(){return function(e,t,n){return t&&NM(e.prototype,t),n&&NM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},[{key:"getFPS",value:(e=IM().m(function e(){var t,n,r,o;return IM().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,t=performance.now(),n=0,r=0,e.a(2,new Promise(function(e){requestAnimationFrame(function o(i){n++;var a=i-t;if(a>=1e3)return r=n/a*1e3,yt.debug("AnimationTimingService - FPS calculated: ".concat(r.toFixed(4))),void e(Math.round(1e4*r)/1e4);requestAnimationFrame(o)})}));case 1:return e.p=1,o=e.v,yt.debug("AnimationTimingService - Error collecting FPS:",o),e.a(2,0)}},e,null,[[0,1]])}),t=function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){FM(i,r,o,a,u,"next",e)}function u(e){FM(i,r,o,a,u,"throw",e)}a(void 0)})},function(){return t.apply(this,arguments)})}]);var e,t}(),GM=WM;function HM(e){return HM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HM(e)}function QM(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return zM(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(zM(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,zM(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,zM(f,"constructor",c),zM(c,"constructor",s),s.displayName="GeneratorFunction",zM(c,o,"GeneratorFunction"),zM(f),zM(f,o,"Generator"),zM(f,r,function(){return this}),zM(f,"toString",function(){return"[object Generator]"}),(QM=function(){return{w:i,m:p}})()}function zM(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}zM=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){zM(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},zM(e,t,n,r)}function VM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function KM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VM(Object(n),!0).forEach(function(t){qM(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VM(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function qM(e,t,n){return(t=XM(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JM(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function YM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,XM(r.key),r)}}function XM(e){var t=function(e,t){if("object"!=HM(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=HM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==HM(t)?t:t+""}var ZM=function(){return function(e,t,n){return t&&YM(e.prototype,t),n&&YM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._storageUtils=t,this._cacheKey="timingData",this._cacheExpiration=6048e5},[{key:"saveTimingData",value:(e=QM().m(function e(t){var n;return QM().w(function(e){for(;;)switch(e.n){case 0:return n=KM(KM({},t),{},{cachedAt:Date.now()}),yt.debug("[TIMING-COLLECTOR] Saving timing data to localStorage under key: ".concat(this._cacheKey)),e.n=1,this._storageUtils.saveToLocalStorage(this._cacheKey,n);case 1:return e.a(2)}},e,this)}),t=function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){JM(i,r,o,a,u,"next",e)}function u(e){JM(i,r,o,a,u,"throw",e)}a(void 0)})},function(e){return t.apply(this,arguments)})},{key:"getStoredTimingData",value:function(){var e=this._storageUtils.getFromLocalStorage(this._cacheKey);return e?Date.now()-e.cachedAt>this._cacheExpiration?(yt.debug("[TIMING-COLLECTOR] Cached timing data is expired"),null):e:(yt.debug("[TIMING-COLLECTOR] No cached timing data found"),null)}},{key:"clearCache",value:function(){this._storageUtils.removeFromLocalStorage(this._cacheKey),yt.debug("[TIMING-COLLECTOR] Cleared timing data cache")}}]);var e,t}();function $M(e){return $M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$M(e)}function eB(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return tB(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(tB(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,tB(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,tB(f,"constructor",c),tB(c,"constructor",s),s.displayName="GeneratorFunction",tB(c,o,"GeneratorFunction"),tB(f),tB(f,o,"Generator"),tB(f,r,function(){return this}),tB(f,"toString",function(){return"[object Generator]"}),(eB=function(){return{w:i,m:p}})()}function tB(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}tB=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){tB(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},tB(e,t,n,r)}function nB(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function rB(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){nB(i,r,o,a,u,"next",e)}function u(e){nB(i,r,o,a,u,"throw",e)}a(void 0)})}}function oB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,iB(r.key),r)}}function iB(e){var t=function(e,t){if("object"!=$M(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$M(t)?t:t+""}var aB=function(){return function(e,t,n){return t&&oB(e.prototype,t),n&&oB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.performance,r=t.log;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._performance=n||window.performance,this._log=r||yt},[{key:"measureMemoryBandwidth",value:(i=rB(eB().m(function e(){var t,n,r,o,i,a;return eB().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,this.measureSequentialReadBandwidth();case 1:return t=e.v,e.n=2,this.measureSequentialWriteBandwidth();case 2:return n=e.v,e.n=3,this.measureRandomAccessRate();case 3:return r=e.v,e.n=4,this.measureCacheThroughput();case 4:return o=e.v,e.n=5,this.measureMemoryLatency();case 5:return i=e.v,e.a(2,{sequentialReadBandwidth:Number(t.toPrecision(16)),sequentialWriteBandwidth:Number(n.toPrecision(16)),randomAccessRate:Number(r.toPrecision(16)),cacheThroughput:Number(o.toPrecision(16)),memoryLatency:Number((1e6*i).toPrecision(16))});case 6:return e.p=6,a=e.v,this._log.debug("MemoryTimingService - Error measuring memory bandwidth:",a),e.a(2,this.getFallbackResult())}},e,this,[[0,6]])})),function(){return i.apply(this,arguments)})},{key:"measureSequentialReadBandwidth",value:(o=rB(eB().m(function e(){var t,n,r,o,i,a,u,s;return eB().w(function(e){for(;;)switch(e.n){case 0:for(e.p=0,t=16777216,n=new Uint8Array(t),r=0;r<n.length;r++)n[r]=255&r;for(o=this._performance.now(),i=0;i<n.length;i++)n[i];return a=this._performance.now(),u=a-o,e.a(2,t/(u/1e3)/1048576);case 1:return e.p=1,s=e.v,this._log.debug("MemoryTimingService - Error in sequential read:",s),e.a(2,0)}},e,this,[[0,1]])})),function(){return o.apply(this,arguments)})},{key:"measureSequentialWriteBandwidth",value:(r=rB(eB().m(function e(){var t,n,r,o,i,a,u;return eB().w(function(e){for(;;)switch(e.n){case 0:for(e.p=0,t=16777216,n=new Uint8Array(t),r=this._performance.now(),o=0;o<n.length;o++)n[o]=255&o;return i=this._performance.now(),a=i-r,e.a(2,t/(a/1e3)/1048576);case 1:return e.p=1,u=e.v,this._log.debug("MemoryTimingService - Error in sequential write:",u),e.a(2,0)}},e,this,[[0,1]])})),function(){return r.apply(this,arguments)})},{key:"measureRandomAccessRate",value:(n=rB(eB().m(function e(){var t,n,r,o,i,a,u,s,c,l;return eB().w(function(e){for(;;)switch(e.n){case 0:for(e.p=0,t=1048576,n=new Uint8Array(t),r=new Uint32Array(1e5),o=0;o<n.length;o++)n[o]=255&o;for(i=0;i<r.length;i++)r[i]=Math.floor(Math.random()*t);for(a=this._performance.now(),u=0;u<r.length;u++)n[r[u]];return s=this._performance.now(),c=s-a,e.a(2,r.length/c);case 1:return e.p=1,l=e.v,this._log.debug("MemoryTimingService - Error in random access:",l),e.a(2,0)}},e,this,[[0,1]])})),function(){return n.apply(this,arguments)})},{key:"measureCacheThroughput",value:(t=rB(eB().m(function e(){var t,n,r,o,i,a,u,s;return eB().w(function(e){for(;;)switch(e.n){case 0:for(e.p=0,t=new Uint8Array(65536),n=0;n<t.length;n++)t[n]=255&n;for(r=this._performance.now(),o=0;o<10;o++)for(i=0;i<t.length;i++)t[i];return a=this._performance.now(),u=a-r,e.a(2,10*t.length/u);case 1:return e.p=1,s=e.v,this._log.debug("MemoryTimingService - Error in cache performance:",s),e.a(2,0)}},e,this,[[0,1]])})),function(){return t.apply(this,arguments)})},{key:"measureMemoryLatency",value:(e=rB(eB().m(function e(){var t,n,r,o,i,a,u,s,c;return eB().w(function(e){for(;;)switch(e.n){case 0:for(e.p=0,t=new Uint32Array(1048576),n=0;n<t.length-1;n++)t[n]=n+1;for(t[t.length-1]=0,r=this._performance.now(),o=0,i=0,a=0;a<1e5;a++)o=t[o],i++;return u=this._performance.now(),s=u-r,e.a(2,s/i);case 1:return e.p=1,c=e.v,this._log.debug("MemoryTimingService - Error in memory latency:",c),e.a(2,0)}},e,this,[[0,1]])})),function(){return e.apply(this,arguments)})},{key:"getFallbackResult",value:function(){return{sequentialReadBandwidth:0,sequentialWriteBandwidth:0,randomAccessRate:0,cacheThroughput:0,memoryLatency:0}}}]);var e,t,n,r,o,i}(),uB=aB;function sB(e){return sB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sB(e)}function cB(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return lB(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(lB(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,lB(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,lB(f,"constructor",c),lB(c,"constructor",s),s.displayName="GeneratorFunction",lB(c,o,"GeneratorFunction"),lB(f),lB(f,o,"Generator"),lB(f,r,function(){return this}),lB(f,"toString",function(){return"[object Generator]"}),(cB=function(){return{w:i,m:p}})()}function lB(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}lB=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){lB(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},lB(e,t,n,r)}function fB(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function pB(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){fB(i,r,o,a,u,"next",e)}function u(e){fB(i,r,o,a,u,"throw",e)}a(void 0)})}}function hB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,yB(r.key),r)}}function yB(e){var t=function(e,t){if("object"!=sB(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=sB(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sB(t)?t:t+""}var dB=function(){return function(e,t,n){return t&&hB(e.prototype,t),n&&hB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.performance,r=t.log,o=t.localStorage,i=t.sessionStorage,a=t.indexedDB,u=t.math;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._performance=n||window.performance,this._log=r||yt,this._localStorage=o||window.localStorage,this._sessionStorage=i||window.sessionStorage,this._indexedDB=a||window.indexedDB,this._Math=u||Math},[{key:"measureAll",value:(i=pB(cB().m(function e(){var t,n,r,o,i,a;return cB().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,this.measureLocalStorageTime();case 1:return t=e.v,e.n=2,this.measureSessionStorageTime();case 2:return n=e.v,e.n=3,this.measureIndexedDBTime();case 3:return r=e.v,e.n=4,this.measureBulkLocalStorageTime();case 4:return o=e.v,e.n=5,this.measureStorageStressTest();case 5:return i=e.v,e.a(2,{localStorageTime:Number(t.toPrecision(16)),sessionStorageTime:Number(n.toPrecision(16)),indexedDBTime:Number(r.toPrecision(16)),bulkLocalStorageTime:Number(o.toPrecision(16)),storageStressTest:Number(i.toPrecision(16))});case 6:return e.p=6,a=e.v,this._log.debug("StorageTimingService - Error measuring storage:",a),e.a(2,this.getFallbackResult())}},e,this,[[0,6]])})),function(){return i.apply(this,arguments)})},{key:"measureLocalStorageTime",value:(o=pB(cB().m(function e(){var t,n,r,o,i,a;return cB().w(function(e){for(;;)switch(e.n){case 0:for(e.p=0,t="storage_timing_test",n=this.generateTestData(1024),r=this._performance.now(),o=0;o<100;o++)this._localStorage.setItem(t+o,n),this._localStorage.getItem(t+o),this._localStorage.removeItem(t+o);return i=this._performance.now(),e.a(2,i-r);case 1:return e.p=1,a=e.v,this._log.debug("StorageTimingService - Error in localStorage:",a),e.a(2,0)}},e,this,[[0,1]])})),function(){return o.apply(this,arguments)})},{key:"measureSessionStorageTime",value:(r=pB(cB().m(function e(){var t,n,r,o,i,a;return cB().w(function(e){for(;;)switch(e.n){case 0:for(e.p=0,t="storage_timing_test",n=this.generateTestData(1024),r=this._performance.now(),o=0;o<100;o++)this._sessionStorage.setItem(t+o,n),this._sessionStorage.getItem(t+o),this._sessionStorage.removeItem(t+o);return i=this._performance.now(),e.a(2,i-r);case 1:return e.p=1,a=e.v,this._log.debug("StorageTimingService - Error in sessionStorage:",a),e.a(2,0)}},e,this,[[0,1]])})),function(){return r.apply(this,arguments)})},{key:"measureIndexedDBTime",value:(n=pB(cB().m(function e(){var t,n=this;return cB().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.a(2,new Promise(function(e){var t="storage_timing_test_db",r="testStore",o=n._indexedDB.open(t,1);o.onupgradeneeded=function(e){e.target.result.createObjectStore(r)},o.onsuccess=function(o){for(var i=o.target.result,a=i.transaction(r,"readwrite").objectStore(r),u="x".repeat(1024),s=n._performance.now(),c=0,l=function(r){a.add(u,"key"+r).onsuccess=function(){a.get("key"+r).onsuccess=function(){a.delete("key"+r).onsuccess=function(){if(50===++c){var r=n._performance.now();i.close(),n._indexedDB.deleteDatabase(t),e(r-s)}}}}},f=0;f<50;f++)l(f)},o.onerror=function(){e(0)}}));case 1:return e.p=1,t=e.v,this._log.debug("StorageTimingService - Error in IndexedDB:",t),e.a(2,0)}},e,this,[[0,1]])})),function(){return n.apply(this,arguments)})},{key:"measureBulkLocalStorageTime",value:(t=pB(cB().m(function e(){var t,n,r,o,i,a,u,s,c,l,f;return cB().w(function(e){for(;;)switch(e.n){case 0:for(e.p=0,t="bulk_storage_timing_test_",n=this.generateTestData(2048),r=200,o=this._performance.now(),i=0;i<r;i++)this._localStorage.setItem(t+i,n);for(a=0;a<r;a++)this._localStorage.getItem(t+a);for(u=0;u<r;u++)this._localStorage.setItem(t+u,n+"_updated");for(s=0;s<r;s++)this._localStorage.getItem(t+s);for(c=0;c<r;c++)this._localStorage.removeItem(t+c);return l=this._performance.now(),e.a(2,l-o);case 1:return e.p=1,f=e.v,this._log.debug("StorageTimingService - Error in bulk localStorage:",f),e.a(2,0)}},e,this,[[0,1]])})),function(){return t.apply(this,arguments)})},{key:"measureStorageStressTest",value:(e=pB(cB().m(function e(){var t,n,r,o,i,a,u,s,c,l,f,p,h,y;return cB().w(function(e){for(;;)switch(e.n){case 0:for(e.p=0,t="stress_test_",n=this.generateTestData(64),r=this.generateTestData(1024),o=this.generateTestData(8192),i=this._performance.now(),a=0;a<500;a++)this._localStorage.setItem(t+"small_"+a,n);for(u=0;u<100;u++)this._localStorage.setItem(t+"medium_"+u,r);for(s=0;s<20;s++)this._localStorage.setItem(t+"large_"+s,o);for(c=0;c<200;c++)this._localStorage.getItem(t+"small_"+c%500),this._localStorage.getItem(t+"medium_"+c%100),this._localStorage.getItem(t+"large_"+c%20);for(l=0;l<500;l++)this._localStorage.removeItem(t+"small_"+l);for(f=0;f<100;f++)this._localStorage.removeItem(t+"medium_"+f);for(p=0;p<20;p++)this._localStorage.removeItem(t+"large_"+p);return h=this._performance.now(),e.a(2,h-i);case 1:return e.p=1,y=e.v,this._log.debug("StorageTimingService - Error in storage stress test:",y),e.a(2,0)}},e,this,[[0,1]])})),function(){return e.apply(this,arguments)})},{key:"generateTestData",value:function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",r=0;r<e;r++)n+=t.charAt(Math.floor(62*this._Math.random()));return n}},{key:"getFallbackResult",value:function(){return{localStorageTime:0,sessionStorageTime:0,indexedDBTime:0,bulkLocalStorageTime:0,storageStressTest:0}}}]);var e,t,n,r,o,i}(),mB=dB;function vB(e){return vB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vB(e)}function bB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function gB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bB(Object(n),!0).forEach(function(t){_B(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bB(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _B(e,t,n){return(t=PB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wB(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return SB(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(SB(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,SB(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,SB(f,"constructor",c),SB(c,"constructor",s),s.displayName="GeneratorFunction",SB(c,o,"GeneratorFunction"),SB(f),SB(f,o,"Generator"),SB(f,r,function(){return this}),SB(f,"toString",function(){return"[object Generator]"}),(wB=function(){return{w:i,m:p}})()}function SB(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}SB=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){SB(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},SB(e,t,n,r)}function EB(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function kB(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){EB(i,r,o,a,u,"next",e)}function u(e){EB(i,r,o,a,u,"throw",e)}a(void 0)})}}function TB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,PB(r.key),r)}}function PB(e){var t=function(e,t){if("object"!=vB(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=vB(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vB(t)?t:t+""}function OB(e,t,n){return t=jB(t),function(e,t){if(t&&("object"==vB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,CB()?Reflect.construct(t,n||[],jB(e).constructor):t.apply(e,n))}function CB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(CB=function(){return!!e})()}function jB(e){return jB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jB(e)}function RB(e,t){return RB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},RB(e,t)}var MB={configKey:"isTimingFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},BB=function(e){function t(e,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=OB(this,t))._dataQ=e,r._fontTimingService=n,r._webglService=o.webglService||new lM,r._browserService=o.browserService||new dM,r._CPUTimingService=o.cpuTimingService||new PM,r._animationTimingService=o.animationTimingService||new GM,r._memoryBandwidthService=o.memoryTimingService||new uB,r._storageTimingService=o.storageTimingService||new mB;var i=o.storageUtils||nn.StorageUtils;return r._timingCache=o.timingCache||new ZM(i),r._logger=o.logger||yt,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RB(e,t)}(t,e),function(e,t,n){return t&&TB(e.prototype,t),n&&TB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:(l=kB(wB().m(function e(){var t,n=this;return wB().w(function(e){for(;;)switch(e.n){case 0:if(this._logger.info("[TimingCollector] Starting timing data collection"),!(t=this._timingCache.getStoredTimingData())){e.n=1;break}return this._logger.info("[TimingCollector] Using cached timing data"),this.sendData(t),e.a(2);case 1:this._fontTimingService.setOnNewRecordAvailableCallback(function(){n.collectFontTiming()}),this.collectWebGLTiming(),this.collectBrowserTiming(),this.collectCPUBenchmark(),this.collectAnimationFrameTiming(),this.collectMemoryBandwidthTiming(),this.collectStorageTiming();case 2:return e.a(2)}},e,this)})),function(){return l.apply(this,arguments)})},{key:"collectWebGLTiming",value:(c=kB(wB().m(function e(){var t,n;return wB().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,this._webglService.collectWebGLTiming();case 1:t=e.v,this._logger.debug("[TimingCollector] WebGL Timing Data collected: "+JSON.stringify(t)),this.sendData({graphicTiming:t}),this._updateCache({graphicTiming:t}),e.n=3;break;case 2:e.p=2,n=e.v,this._logger.error("[TimingCollector] Error during WebGL timing collection:",n);case 3:return e.a(2)}},e,this,[[0,2]])})),function(){return c.apply(this,arguments)})},{key:"collectBrowserTiming",value:(s=kB(wB().m(function e(){var t;return wB().w(function(e){for(;;)switch(e.n){case 0:try{t=this._browserService.collectBrowserTiming(),this._logger.debug("[TimingCollector] Browser Timing Data collected: "+JSON.stringify(t)),this.sendData({browserTiming:t}),this._updateCache({browserTiming:t})}catch(e){this._logger.error("[TimingCollector] Error during browser timing collection:",e)}case 1:return e.a(2)}},e,this)})),function(){return s.apply(this,arguments)})},{key:"collectCPUBenchmark",value:(u=kB(wB().m(function e(){var t,n;return wB().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,this._CPUTimingService.runBenchmarks();case 1:t=e.v,this._logger.debug("[TimingCollector] CPU Benchmark Data collected: "+JSON.stringify(t)),this.sendData({cpuTiming:t}),this._updateCache({cpuTiming:t}),e.n=3;break;case 2:e.p=2,n=e.v,this._logger.error("[TimingCollector] Error during CPU benchmark collection:",n);case 3:return e.a(2)}},e,this,[[0,2]])})),function(){return u.apply(this,arguments)})},{key:"collectAnimationFrameTiming",value:(a=kB(wB().m(function e(){var t,n,r;return wB().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,this._animationTimingService.getFPS();case 1:t=e.v,n={fps:t},this._logger.debug("[TimingCollector] FPS Data collected: "+JSON.stringify(n)),this.sendData({animationFrameTiming:n}),this._updateCache({animationFrameTiming:n}),e.n=3;break;case 2:e.p=2,r=e.v,this._logger.error("[TimingCollector] Error during FPS collection:",r);case 3:return e.a(2)}},e,this,[[0,2]])})),function(){return a.apply(this,arguments)})},{key:"collectMemoryBandwidthTiming",value:(i=kB(wB().m(function e(){var t,n;return wB().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,this._memoryBandwidthService.measureMemoryBandwidth();case 1:t=e.v,this._logger.debug("[TimingCollector] Memory Bandwidth Timing Data collected: "+JSON.stringify(t)),this.sendData({memoryBandwidthTiming:t}),this._updateCache({memoryBandwidthTiming:t}),e.n=3;break;case 2:e.p=2,n=e.v,this._logger.error("[TimingCollector] Error during memory bandwidth timing collection:",n);case 3:return e.a(2)}},e,this,[[0,2]])})),function(){return i.apply(this,arguments)})},{key:"collectStorageTiming",value:(o=kB(wB().m(function e(){var t,n;return wB().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,this._storageTimingService.measureAll();case 1:t=e.v,this._logger.debug("[TimingCollector] Storage Timing Data collected: "+JSON.stringify(t)),this.sendData({storageTiming:t}),this._updateCache({storageTiming:t}),e.n=3;break;case 2:e.p=2,n=e.v,this._logger.error("[TimingCollector] Error during storage timing collection:",n);case 3:return e.a(2)}},e,this,[[0,2]])})),function(){return o.apply(this,arguments)})},{key:"collectFontTiming",value:(r=kB(wB().m(function e(){var t;return wB().w(function(e){for(;;)switch(e.n){case 0:try{t=this._fontTimingService.collectFontTiming(),this._logger.debug("[TimingCollector] Font Timing Data collected: "+JSON.stringify(t)),this.sendData({fontTiming:t}),this._updateCache({fontTiming:t})}catch(e){this._logger.error("[TimingCollector] Error during font timing collection:",e)}case 1:return e.a(2)}},e,this)})),function(){return r.apply(this,arguments)})},{key:"_updateCache",value:(n=kB(wB().m(function e(t){var n,r,o;return wB().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,n=this._timingCache.getStoredTimingData()||{},r=gB(gB({},n),t),e.n=1,this._timingCache.saveTimingData(r);case 1:e.n=3;break;case 2:e.p=2,o=e.v,this._logger.error("[TimingCollector] Error updating cache:",o);case 3:return e.a(2)}},e,this,[[0,2]])})),function(e){return n.apply(this,arguments)})},{key:"stopFeature",value:function(){this._logger.info("[TimingCollector] Stopped timing data collection")}},{key:"sendData",value:function(e){this._dataQ.addToQueue("static_fields",["timing",e],!1)}}],[{key:"getDefaultSettings",value:function(){return MB}}]);var n,r,o,i,a,u,s,c,l}(Qo),AB=BB;function xB(e){return xB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xB(e)}function DB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,IB(r.key),r)}}function IB(e){var t=function(e,t){if("object"!=xB(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=xB(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xB(t)?t:t+""}function LB(e,t,n){return t=NB(t),function(e,t){if(t&&("object"==xB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,FB()?Reflect.construct(t,n||[],NB(e).constructor):t.apply(e,n))}function FB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(FB=function(){return!!e})()}function NB(e){return NB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},NB(e)}function UB(e,t){return UB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},UB(e,t)}var WB={configKey:"isContextPropsFeature",isDefault:!1,shouldRunPerContext:!0,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInUns:!0,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},GB=function(e){function t(e,n,r,o){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=LB(this,t))._dataQ=e,i._domUtils=n,i._perfMonitor=r,i._configurationRepository=o,i._observerCallback=i._observerCallback.bind(i),i.calcTime=i.calcTime.bind(i),i._getEntriesByType=i._getEntriesByType.bind(i),i.callMethod=i._configurationRepository.get(ge)?nn.asyncCall:nn.asyncTimeoutCall,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UB(e,t)}(t,e),function(e,t,n){return t&&DB(e.prototype,t),n&&DB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:function(){if(self.screen){var e=window.devicePixelRatio?window.devicePixelRatio:-1,t=window.devicePixelRatio?window.devicePixelRatio:-1;this._shouldCollectStaticFields()&&this._dataQ.addToQueue("static_fields",["display",[screen.colorDepth,screen.width,screen.height,screen.availHeight||-1,screen.availWidth||-1,e,t]],!1)}this.reportPageLoadTime()}},{key:"_shouldCollectStaticFields",value:function(){var e;return(null===(e=this._configurationRepository)||void 0===e?void 0:e.get(ce))!==rt.SECONDARY}},{key:"_observerCallback",value:function(e,t){var n=e.getEntries()[0];n.duration&&(this.calcTime(n),"disconnect"in t&&t.disconnect())}},{key:"_isEntrySupportedByBrowser",value:function(e){return!("supportedEntryTypes"in window.PerformanceObserver)||PerformanceObserver.supportedEntryTypes.includes(e)}},{key:"_getEntriesByType",value:function(){if(window.performance.timing&&window.performance.timing.loadEventEnd&&window.performance.timing.navigationStart){var e={duration:window.performance.timing.loadEventEnd-window.performance.timing.navigationStart};this.calcTime(e)}}},{key:"calcTime",value:function(e){nn.isUndefinedNull(e)?yt.warn("Context Props Feature: no entries of navigation timing were captured"):nn.isUndefinedNull(e)||!nn.isUndefinedNull(e.duration)?this._perfMonitor.reportMonitor("t.timeTillPageLoad",Math.round(e.duration)):yt.warn("Context Props Feature: page duration loading was not calculated")}},{key:"reportPageLoadTime",value:function(){if(window.performance&&"PerformanceNavigationTiming"in window){var e="navigation";if(!("PerformanceObserver"in window)||!this._isEntrySupportedByBrowser(e))return void this.reportPageLoadTimeFallback();var t=new PerformanceObserver(this._observerCallback);try{t.observe({type:e,buffered:!0})}catch(e){this.reportPageLoadTimeFallback()}}else this.reportPageLoadTimeFallback()}},{key:"reportPageLoadTimeFallback",value:function(){var e=this;Ic.isWindowDocumentReady(window)?this.callMethod.call(this._getEntriesByType):nn.addEventListener(self,"load",function(){e.callMethod.call(e._getEntriesByType)})}}],[{key:"getDefaultSettings",value:function(){return WB}}])}(Qo);function HB(e){return HB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HB(e)}function QB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zB(r.key),r)}}function zB(e){var t=function(e,t){if("object"!=HB(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=HB(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==HB(t)?t:t+""}function VB(e,t,n){return t=qB(t),function(e,t){if(t&&("object"==HB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,KB()?Reflect.construct(t,n||[],qB(e).constructor):t.apply(e,n))}function KB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(KB=function(){return!!e})()}function qB(e){return qB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qB(e)}function JB(e,t){return JB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},JB(e,t)}var YB={configKey:"isScriptsFeature",isDefault:!1,shouldRunPerContext:!0,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInUns:!0,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},XB=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=VB(this,t))._dataQ=e,r._timeoutValue=1e3,r._scriptsRepository=n,r._runDetectionLoopBinded=r._runDetectionLoop.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JB(e,t)}(t,e),function(e,t,n){return t&&QB(e.prototype,t),n&&QB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"_checkScriptsData",value:function(){for(var e=document.scripts,t=0;t<e.length;t++){var n={src:e[t].src,text:e[t].text};this._scriptsRepository.exists(n)||(this._scriptsRepository.add(n),this._dataQ.addToQueue("scripts",[null,n.src,n.textHash]))}}},{key:"_runDetectionLoop",value:function(){this._checkScriptsData(),this._timer=setTimeout(this._runDetectionLoopBinded,this._timeoutValue),this._timeoutValue<536870911&&(this._timeoutValue*=4)}},{key:"startFeature",value:function(){this._runDetectionLoop()}},{key:"stopFeature",value:function(){this._timer&&clearTimeout(this._timer)}}],[{key:"getDefaultSettings",value:function(){return YB}}])}(Qo);function ZB(e){return ZB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZB(e)}function $B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eA(r.key),r)}}function eA(e){var t=function(e,t){if("object"!=ZB(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ZB(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ZB(t)?t:t+""}function tA(e,t,n){return t=rA(t),function(e,t){if(t&&("object"==ZB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,nA()?Reflect.construct(t,n||[],rA(e).constructor):t.apply(e,n))}function nA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(nA=function(){return!!e})()}function rA(e){return rA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rA(e)}function oA(e,t){return oA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},oA(e,t)}var iA={configKey:"isFilesFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!0,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},aA=function(e){function t(e,n,r,o,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=tA(this,t))._utils=n,a._configurationRepository=e,a._sessionService=r,a._muidService=o,a._cidCache=i,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oA(e,t)}(t,e),function(e,t,n){return t&&$B(e.prototype,t),n&&$B(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"getFiles",value:function(){if(this._customerId&&this._muid&&this._sid&&this._addrList&&this._addrList.length>0)for(var e,t=0;t<this._addrList.length;t++)e=this._addrList[t]+"?cid="+this._customerId+"&snum="+this._sid+"&muid="+this._muid,this._utils.getPostUrl(e,"GET",null,null,null),this._isSent=!0}},{key:"startFeature",value:function(){var e;this._isSent=!1;try{this._addrList=JSON.parse(this._configurationRepository.get("getAddrList"))}catch(e){this._addrList=""}this._customerId=this._cidCache.get()||"",this._muid=(null===(e=this._muidService)||void 0===e?void 0:e.muid)||"",this._sid=this._sessionService.sessionId||"",this.getFiles()}},{key:"updateFeatureConfig",value:function(){var e;try{this._addrList=JSON.parse(this._configurationRepository.get("getAddrList"))}catch(e){this._addrList=""}this._customerId=this._cidCache.get()||"",this._muid=(null===(e=this._muidService)||void 0===e?void 0:e.muid)||"",this._sid=this._sessionService.sessionId||"",this._isSent||this.getFiles()}}],[{key:"getDefaultSettings",value:function(){return iA}}])}(Qo);function uA(e){return uA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uA(e)}function sA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cA(r.key),r)}}function cA(e){var t=function(e,t){if("object"!=uA(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=uA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==uA(t)?t:t+""}function lA(e,t,n){return t=pA(t),function(e,t){if(t&&("object"==uA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,fA()?Reflect.construct(t,n||[],pA(e).constructor):t.apply(e,n))}function fA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(fA=function(){return!!e})()}function pA(e){return pA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pA(e)}function hA(e,t){return hA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hA(e,t)}var yA={configKey:"isMetadataCollect",isDefault:!0,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInSlave:!0,runInLean:!0,runInUns:!1,isRunning:!1,instance:null},dA=function(e){function t(e,n,r,o){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=lA(this,t))._configurationRepository=e,i._dataQ=n,i._metaDataSiteMapper=r,i._utils=o,i._metaDataSiteMapper.updateObserver(i.onSiteMapperMatch.bind(i)),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hA(e,t)}(t,e),function(e,t,n){return t&&sA(e.prototype,t),n&&sA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"startFeature",value:function(){this._metaDataSiteMapper.initTracking()}},{key:"stopFeature",value:function(){this._metaDataSiteMapper.stopTracking()}},{key:"onSiteMapperMatch",value:function(e){yt.debug("Metadata Collector mapper match - ".concat(JSON.stringify(e))),e.metaVal&&this._dataQ.addToQueue("metadata_map",[null,e.metaVal,this._utils.dateNow()])}},{key:"updateFeatureConfig",value:function(){this._metaDataSiteMapper.onConfigUpdate(this._configurationRepository)}}],[{key:"getDefaultSettings",value:function(){return yA}}])}(Qo),mA=null,vA=null,bA=null,gA=null;function _A(e){mA.removeElementEvents(e),mA.addElementEvents(e,!0)}function wA(e){vA.removeElementEvents(e),vA.addElementEvents(e,!0)}function SA(e){bA.removeElementEvents(e),bA.addElementEvents(e,!0)}function EA(e){gA.removeElementEvents(e),gA.addElementEvents(e,!0)}function kA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function TA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kA(Object(n),!0).forEach(function(t){xA(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kA(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function PA(e){return PA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PA(e)}function OA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,DA(r.key),r)}}function jA(e,t,n){return t&&CA(e.prototype,t),n&&CA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function RA(e,t,n){return t=BA(t),function(e,t){if(t&&("object"==PA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,MA()?Reflect.construct(t,n||[],BA(e).constructor):t.apply(e,n))}function MA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(MA=function(){return!!e})()}function BA(e){return BA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},BA(e)}function AA(e,t){return AA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},AA(e,t)}function xA(e,t,n){return(t=DA(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DA(e){var t=function(e,t){if("object"!=PA(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=PA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==PA(t)?t:t+""}var IA={configKey:"isCrossdomain",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},LA={found:0,new:1},FA=/(?=(child\-src)|(frame\-src))([^;]+)/gi,NA=/http[s]?:\/\/([^\/]+)/gi,UA={resource:null,iframeElement:!1,blockedByCSP:!1,iframeLoaded:!1,ACKMessageSent:!1,ACKMessageRecieved:!1,unavailable:!1},WA=["eventSequence","timestamp","eventType","domainUrl","muid"],GA=function(e){function t(e){var n;return OA(this,t),xA(n=RA(this,t),"startFeature",function(e){n._domainsResources=n._configurationRepository.get(O),n._crossDomainsTimeout=n._configurationRepository.get(C),Array.isArray(n._domainsResources)&&n._domainsResources.length>0&&(n._windowMessageEmitter.startObserver(e),n._domainsResources.forEach(function(e){var t=e.match(NA);if(null!==t&&"string"==typeof t[0]){var r=t[0];if("object"===PA(n._domainsStates[r]))return;n._domainsStates[r]=TA({},UA),n._domainsStates[r].resource=e,n._domains.push(r)}}),Array.isArray(n._domains)&&n._domains.length>0&&(n.isBlockedByCSP(e,n._domains),n._domUtils.onDocumentBody(e.Context,function(){n.connectDomains(e)})))}),xA(n,"stopFeature",function(e){n._clearFeaturesObjects(e)}),xA(n,"_clearFeaturesObjects",function(e){n._windowMessageEmitter.stopObserver(e),Array.isArray(n._domains)&&n._domains.length>0&&(n._domains.forEach(function(t){n.clearDomElements(e,t)}),n._domains=[],n._domainsStates={})}),xA(n,"connectDomains",function(e){Array.isArray(n._domains)&&n._domains.length>0&&(n._domains.forEach(function(t){n._domainsStates[t].blockedByCSP||!1!==n._domainsStates[t].iframeElement||n.createIframe(e,t)}),n._domainsTimeoutFunc=setTimeout(function(){n._domains.forEach(function(t){"object"===PA(n._domainsStates[t])&&!1===n._domainsStates[t].ACKMessageRecieved&&!1===n._domainsStates[t].unavailable&&(yt.warn("Cross Domain feature - domain ".concat(t," is unavailable")),n._domainsStates[t].unavailable=!0,n.clearDomElements(e,t))})},n._crossDomainsTimeout))}),xA(n,"createIframe",function(e,r){var o=e.getDocument().createElement("iframe");o.onload=function(){n.postNextMessage(r)},o.id=ea+t.generateRandomID(),o.src=n._domainsStates[r].resource,o.style.display="none",o.style.opacity="0",o.style.width="1px",o.style.height="1px",e.getDocument().body.appendChild(o),n._domainsStates[r].iframeElement=o}),xA(n,"clearDomElements",function(e,t){var r=n._domainsStates[t].iframeElement;"object"===PA(r)&&(null!==e.getDocument().getElementById(n._domainsStates[t].iframeElement.id)&&e.getDocument().body.removeChild(r))}),xA(n,"postNextMessage",function(e){if(!n._domainsStates[e].ACKMessageRecieved&&n._domainsStates[e].iframeElement){var t={muid:n._generatedMUID};n._domainsStates[e].iframeElement.contentWindow.postMessage(JSON.stringify(t),e),n._domainsStates[e].ACKMessageSent=!0}}),xA(n,"isBlockedByCSP",function(e,t){if(!Array.isArray(t)||t.length<1)throw new Error("Domains are expected for content security policy assertion");var r=!1;[].slice.call(e.getDocument().getElementsByTagName("meta")).forEach(function(e){if("Content-Security-Policy"===e.getAttribute("http-equiv")){r=!0;var o=e.getAttribute("content").match(FA);t.forEach(function(e){o&&-1===o[0].indexOf(e)&&"object"===PA(n._domainsStates[e])&&(n._domainsStates[e].blockedByCSP=!0,yt.warn("Cross Domain feature - domain ".concat(e," is blocked by CSP")))})}if(r)return!1})}),xA(n,"windowMessageHandler",function(e){var t=e.message.origin;if(n._domainsStates.hasOwnProperty(t)){if(!0===n._domainsStates[t].ACKMessageRecieved)return;n._domainsStates[t].ACKMessageRecieved=!0,n.clearDomElements(new ba(e.message.currentTarget),t);var r=e.message.data;n.sendToQueue(t,r)}}),xA(n,"sendToQueue",function(e,t){var r=e.replace(/http[s]?:\/\//i,"");"object"===PA(t.found)&&Object.keys(t.found).forEach(function(e){var o=n._utils.StorageUtils.getAndUpdateEventSequenceNumber(),i=r,a=t.found[e].split("__"),u={eventType:n._eventType.found,eventSequence:o,domainUrl:i,muid:a[0],timestamp:a[1]};n._dataQ.addToQueue("crossmuid_event",n._utils.convertToArrayByMap(WA,u),!0)}),"object"===PA(t.new)&&Object.keys(t.new).forEach(function(e){var o=n._utils.StorageUtils.getAndUpdateEventSequenceNumber(),i=r,a=t.new[e].split("__"),u={eventType:n._eventType.new,eventSequence:o,domainUrl:i,muid:a[0],timestamp:a[1]};n._dataQ.addToQueue("crossmuid_event",n._utils.convertToArrayByMap(WA,u))}),"object"===PA(t.error_message)&&yt.warn("Cross Domain feature - domain ".concat(r," error. Error Message: \n                ").concat(t.error_message," Code: ").concat(t.error_code))}),xA(n,"updateFeatureConfig",function(e){n._domainsResources=n._configurationRepository.get(O),n._crossDomainsTimeout=n._configurationRepository.get(C),clearTimeout(n._domainsTimeoutFunc),n._domainsTimeoutFunc=null,n.updateDomainStates(e)}),xA(n,"updateDomainStates",function(e){Array.isArray(n._domainsResources)&&n._domainsResources.length>0&&(n._domains=[],n._domainsResources.forEach(function(e){var t=e.match(NA);if(null!==t&&"string"==typeof t[0]){var r=t[0];"object"!==PA(n._domainsStates[r])&&(n._domainsStates[r]=TA({},UA),n._domainsStates[r].resource=e),n._domains.push(r)}}),Array.isArray(n._domains)&&n._domains.length>0&&(n.isBlockedByCSP(e,n._domains),n._domUtils.onDocumentBody(e.Context,function(){n.connectDomains(e)})))}),n._configurationRepository=e.configurationRepository,n._dataQ=e.dataQ,n._utils=e.utils,n._domUtils=e.domUtils,n._eventType=e.eventType,n._messageBus=e.messageBus,n._windowMessageEmitter=e.windowMessageEventEmitter,n._messageBus.subscribe(Ro,n.windowMessageHandler),n._generatedMUID=n._utils.dateNow()+"-"+n._utils.generateUUID().toUpperCase(),n._domainsStates={},n._domainsResources=[],n._domains=[],n._domainsTimeoutFunc=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AA(e,t)}(t,e),jA(t,null,[{key:"getDefaultSettings",value:function(){return IA}},{key:"Builder",get:function(){return function(){return jA(function e(t,n,r,o,i){OA(this,e),this.configurationRepository=t,this.dataQ=n,this.utils=r,this.domUtils=o,this.eventType=i},[{key:"withMessageBus",value:function(e){return this.messageBus=e,this}},{key:"withWindowMessageEventEmitter",value:function(e){return this.windowMessageEventEmitter=e,this}},{key:"build",value:function(){return new t(this)}}])}()}},{key:"generateRandomID",value:function(){for(var e="abcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<16;n++)t+=e.charAt(Math.floor(36*Math.random()));return t}}])}(Qo),HA=GA;function QA(e){return QA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QA(e)}function zA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,VA(r.key),r)}}function VA(e){var t=function(e,t){if("object"!=QA(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=QA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==QA(t)?t:t+""}var KA=function(){return function(e,t,n){return t&&zA(e.prototype,t),n&&zA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},[{key:"getEventTimestamp",value:function(){return nn.dateNow()}},{key:"getTimestampFromEvent",value:function(e){return e.timeStamp?nn.cutDecimalPointDigits(e.timeStamp,3):0}},{key:"updateFeatureConfig",value:function(){}},{key:"processElements",value:function(e,t,n,r,o){e.forEach(function(e){var i=n.isListed(e);i&&!t?r.call(n,e):i||o.call(n,e,!1)})}}])}();function qA(e){return qA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qA(e)}function JA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tx(r.key),r)}}function YA(e,t,n){return t=ZA(t),function(e,t){if(t&&("object"==qA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,XA()?Reflect.construct(t,n||[],ZA(e).constructor):t.apply(e,n))}function XA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(XA=function(){return!!e})()}function ZA(e){return ZA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ZA(e)}function $A(e,t){return $A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$A(e,t)}function ex(e,t,n){return(t=tx(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tx(e){var t=function(e,t){if("object"!=qA(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qA(t)?t:t+""}var nx="input:not([type='color']):not([type='hidden']):not([type='file']):not([type='image']):not([type='button']):not([type='radio']):not([type='checkbox']), textarea",rx=function(e,t,n){return{applyAction:function(r,o,i){if(!["start","stop"].includes(o))return!1;r.collectAllElementsBySelectorAsync(nx,t,n).then(function(t){t.length>0&&e[o](t,r.Context,i)})}}},ox=function(e){function t(e,n,r,o,i,a,u,s,c,l){var f;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ex(f=YA(this,t),"handleInputEvents",function(e){"InputEvent"===e.constructor.name&&f._inputEventsPerElement.set(e.target,{});var t=e.target.value||"";""!==t&&(t=f._maskingService.maskText(t,e.target.id)),f._sendToQueue(e,{length:t?t.length:0,elementValues:t,selected:-1})}),ex(f,"handleFocusBlurEvents",function(e){f._sendToQueue(e,{length:0,selected:-1,elementValues:""})}),ex(f,"handleSyntheticInputEvents",function(e){if(!f._inputEventsPerElement.has(e.target)||void 0!==e.jQueryMask&&("autotab"===e.jQueryMask||"prasleyValidator"===e.jQueryMask)){var t=e.target.value||"";""!==t&&(t=f._maskingService.maskText(t,e.target.id)),f._sendToQueue(e,{length:t?t.length:0,elementValues:t,selected:-1})}}),f._elements=e,f._sendToQueue=n,f._messageBus=o,f._CDUtils=r,f._StandardInputEventsEmitter=i,f._SyntheticMaskInputEventsHandler=a,f._SyntheticAutotabInputEventsHandler=u,f._maskingService=s,f._inputEventsPerElement=new WeakMap,f._maxShadowDepth=c,f._iframeLoadingTimeout=l,f}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$A(e,t)}(t,e),function(e,t,n){return t&&JA(e.prototype,t),n&&JA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"bind",value:function(e){this._messageBus.subscribe(co,this.handleInputEvents),this._messageBus.subscribe(lo,this.handleFocusBlurEvents),this._messageBus.subscribe(fo,this.handleFocusBlurEvents),this._messageBus.subscribe(bo,this.handleSyntheticInputEvents),rx(this._StandardInputEventsEmitter,this._maxShadowDepth,this._iframeLoadingTimeout).applyAction(e,"start"),rx(this._SyntheticMaskInputEventsHandler,this._maxShadowDepth,this._iframeLoadingTimeout).applyAction(e,"start"),rx(this._SyntheticAutotabInputEventsHandler,this._maxShadowDepth,this._iframeLoadingTimeout).applyAction(e,"start")}},{key:"unbind",value:function(e){rx(this._StandardInputEventsEmitter,this._maxShadowDepth,this._iframeLoadingTimeout).applyAction(e,"stop"),rx(this._SyntheticMaskInputEventsHandler,this._maxShadowDepth,this._iframeLoadingTimeout).applyAction(e,"stop"),rx(this._SyntheticAutotabInputEventsHandler,this._maxShadowDepth,this._iframeLoadingTimeout).applyAction(e,"stop"),this._messageBus.unsubscribe(co,this.handleInputEvents),this._messageBus.unsubscribe(lo,this.handleFocusBlurEvents),this._messageBus.unsubscribe(fo,this.handleFocusBlurEvents),this._messageBus.unsubscribe(bo,this.handleSyntheticInputEvents)}},{key:"addOnLoadInputData",value:function(e,t){var n=this;e.collectAllElementsBySelectorAsync(nx,this._maxShadowDepth,this._iframeLoadingTimeout).then(function(e){n.processElements(e,t,n._elements,n._elements.resendElementPerContext,n._elements.getElement)})}}])}(KA),ix=ox;function ax(e){return ax="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ax(e)}function ux(e){return function(e){if(Array.isArray(e))return sx(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return sx(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sx(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function cx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,yx(r.key),r)}}function lx(e,t,n){return t=px(t),function(e,t){if(t&&("object"==ax(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,fx()?Reflect.construct(t,n||[],px(e).constructor):t.apply(e,n))}function fx(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(fx=function(){return!!e})()}function px(e){return px=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},px(e)}function hx(e,t){return hx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hx(e,t)}function yx(e){var t=function(e,t){if("object"!=ax(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ax(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ax(t)?t:t+""}var dx=function(e){function t(e,n,r,o,i,a,u){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){(t=yx(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(s=lx(this,t),"handleInputEvents",function(e){var t,n,r,o,i,a,u="",c=null==e||null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,null===(n=s._inputElementSettings)||void 0===n?void 0:n.elementDataAttribute);if(c)u=c;else if(null!=e&&null!==(r=e.target)&&void 0!==r&&r.ariaValueNow)u=e.target.ariaValueNow;else if(null!=e&&null!==(o=e.target)&&void 0!==o&&o.value){var l;u=null===(l=e.target)||void 0===l?void 0:l.value}else if(null!=e&&e[null===(i=s._inputElementSettings)||void 0===i?void 0:i.elementDataAttribute]){var f;u=e[null===(f=s._inputElementSettings)||void 0===f?void 0:f.elementDataAttribute]}""!==u&&(u=s._maskingService.maskText(u,e.id)),""!==u&&s._sendToQueue(e,{length:(null===(a=u)||void 0===a?void 0:a.length)||0,elementValues:u,selected:-1})}),s._elements=e,s._sendToQueue=n,s._CDUtils=r,s._messageBus=o,s._StandardCustomInputEmitter=i,s._maskingService=a,s._inputElementSettings=u,s._elementsFromDoc={mainElement:"",customButtons:[]},s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hx(e,t)}(t,e),function(e,t,n){return t&&cx(e.prototype,t),n&&cx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"bind",value:function(e){var t,n,r,o;if(null!==(t=this._inputElementSettings)&&void 0!==t&&t.parentElementSelector||null!==(n=this._inputElementSettings)&&void 0!==n&&n.childElementWithCustomAttribute){var i=e.getDocument();this._messageBus.subscribe(Do,this.handleInputEvents);var a=[null===(r=this._elementsFromDoc)||void 0===r?void 0:r.mainElement].concat(ux(this._elementsFromDoc.customButtons));""===(null===(o=this._elementsFromDoc)||void 0===o?void 0:o.mainElement)&&this.getSelectElementsFromDoc(i),this.addListenersBySelector(a)}}},{key:"unbind",value:function(e){var t,n,r,o;if(null!==(t=this._inputElementSettings)&&void 0!==t&&t.parentElementSelector||null!==(n=this._inputElementSettings)&&void 0!==n&&n.childElementWithCustomAttribute){var i=e.getDocument();this._messageBus.subscribe(Do,this.handleInputEvents);var a=[null===(r=this._elementsFromDoc)||void 0===r?void 0:r.mainElement].concat(ux(this._elementsFromDoc.customButtons));""===(null===(o=this._elementsFromDoc)||void 0===o?void 0:o.mainElement)&&this.getSelectElementsFromDoc(i),this.removeListenersBySelector(a)}}},{key:"getSelectElementsFromDoc",value:function(e){var t,n,r,o=this,i=e.querySelector("body"),a=e.querySelector(null===(t=this._inputElementSettings)||void 0===t?void 0:t.childElementWithCustomAttribute);i&&(a&&(this._elementsFromDoc.mainElement=a),null!==(n=this._inputElementSettings)&&void 0!==n&&n.customButtons&&(null===(r=this._inputElementSettings)||void 0===r||r.customButtons.forEach(function(t){var n=e.querySelector(t);n&&o._elementsFromDoc.customButtons.push(n)})));return this._elementsFromDoc}},{key:"addListenersBySelector",value:function(e){var t;null!==(t=this._elementsFromDoc)&&void 0!==t&&t.mainElement&&e.length>=1&&this._StandardCustomInputEmitter.start(e)}},{key:"removeListenersBySelector",value:function(e){var t;null!==(t=this._elementsFromDoc)&&void 0!==t&&t.mainElement&&e.length>=1&&this._StandardCustomInputEmitter.stop(e),this._elementsFromDoc={mainElement:"",customButtons:[]}}},{key:"addOnLoadInputData",value:function(e,t){var n,r,o,i,a,u=this;if(null!==(n=this._inputElementSettings)&&void 0!==n&&n.parentElementSelector||null!==(r=this._inputElementSettings)&&void 0!==r&&r.childElementWithCustomAttribute){var s=e.getDocument(),c=[null===(o=this._elementsFromDoc)||void 0===o?void 0:o.mainElement].concat(ux(this._elementsFromDoc.customButtons));""===(null===(i=this._elementsFromDoc)||void 0===i?void 0:i.mainElement)&&this.getSelectElementsFromDoc(s),null!==(a=this._elementsFromDoc)&&void 0!==a&&a.mainElement&&c.length>=1&&c.forEach(function(e){u._elements.isListed(e)?t||u._elements.resendElementPerContext(e):u._elements.getElement(e,!1)})}}}])}(KA),mx=dx;function vx(e){return vx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vx(e)}function bx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ex(r.key),r)}}function gx(e,t,n){return t=wx(t),function(e,t){if(t&&("object"==vx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_x()?Reflect.construct(t,n||[],wx(e).constructor):t.apply(e,n))}function _x(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_x=function(){return!!e})()}function wx(e){return wx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wx(e)}function Sx(e,t){return Sx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Sx(e,t)}function Ex(e){var t=function(e,t){if("object"!=vx(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=vx(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vx(t)?t:t+""}var kx="input[type='button'], input[type='radio'], input[type='checkbox'], button",Tx=function(e){function t(e,n,r,o,i,a,u,s,c){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){(t=Ex(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(l=gx(this,t),"handleOnClickEvents",function(e){var t=e.target,n=t.value||t.innerHTML||"";n=l._maskingService.maskText(n,e.target.id),l._sendToQueue(e,{length:n.length,elementValues:n,selected:void 0===t.checked?-1:t.checked?1:0})}),l._elements=u,l._sendToQueue=e,l._CDUtils=n,l._messageBus=r,l._StandardOnClickEventsEmitter=i,l._configurationRepository=o,l._enableElementHierarchy=o.get(ue),l._enableElementCategory=o.get(se),l._maskingService=a,l._maxShadowDepth=s,l._iframeLoadingTimeout=c,l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sx(e,t)}(t,e),function(e,t,n){return t&&bx(e.prototype,t),n&&bx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"bind",value:function(e){var t=this;this._messageBus.subscribe(po,this.handleOnClickEvents),e.collectAllElementsBySelectorAsync(kx,this._maxShadowDepth,this._iframeLoadingTimeout).then(function(e){t._StandardOnClickEventsEmitter.start(e)})}},{key:"unbind",value:function(e){var t=this;this._messageBus.unsubscribe(po,this.handleOnClickEvents),e.collectAllElementsBySelectorAsync(kx,this._maxShadowDepth,this._iframeLoadingTimeout).then(function(e){t._StandardOnClickEventsEmitter.stop(e)})}},{key:"addOnLoadInputData",value:function(e,t){var n=this;(this._enableElementHierarchy||this._enableElementCategory)&&e.collectAllElementsBySelectorAsync(kx,this._maxShadowDepth,this._iframeLoadingTimeout).then(function(e){n.processElements(e,t,n._elements,n._elements.resendElementPerContext,n._elements.getElement)})}}])}(KA),Px=Tx;function Ox(e){return Ox="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ox(e)}function Cx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xx(r.key),r)}}function jx(e,t,n){return t=Mx(t),function(e,t){if(t&&("object"==Ox(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Rx()?Reflect.construct(t,n||[],Mx(e).constructor):t.apply(e,n))}function Rx(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Rx=function(){return!!e})()}function Mx(e){return Mx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mx(e)}function Bx(e,t){return Bx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Bx(e,t)}function Ax(e,t,n){return(t=xx(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xx(e){var t=function(e,t){if("object"!=Ox(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ox(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ox(t)?t:t+""}var Dx="select",Ix=function(e){function t(e,n,r,o,i,a,u,s,c,l){var f;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ax(f=jx(this,t),"handleOnChangeEvents",function(e){var t=f._CDUtils.getDropDownListValues(e.target,f._maskingService).join(";");t=f._CDUtils.clearTextFromNumbers(t);var n=e.target.selectedIndex,r=e.target.value.length;f._sendToQueue(e,{length:r,selected:n,elementValues:t})}),Ax(f,"handleBlurEvent",function(e){f._sendToQueue(e,{length:0,selected:-1,elementValues:""})}),Ax(f,"handleFocusEvent",function(e){f._sendToQueue(e,{length:0,selected:-1,elementValues:""})}),f._sendToQueue=e,f._CDUtils=n,f._messageBus=r,f._StandardOnChangeEventsEmitter=o,f._elementFocusEventEmitter=i,f._elementBlurEventEmitter=a,f._configurationRepository=u,f._collectSelectElementBlurAndFocusEvents=f._configurationRepository.get(X),f._maskingService=s,f._maxShadowDepth=c,f._iframeLoadingTimeout=l,f}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bx(e,t)}(t,e),function(e,t,n){return t&&Cx(e.prototype,t),n&&Cx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"bind",value:function(e){var t=this;this._messageBus.subscribe(ho,this.handleOnChangeEvents),this._messageBus.subscribe(yo,this.handleFocusEvent),this._messageBus.subscribe(mo,this.handleBlurEvent),e.collectAllElementsBySelectorAsync(Dx,this._maxShadowDepth,this._iframeLoadingTimeout).then(function(e){t._StandardOnChangeEventsEmitter.start(e),t._collectSelectElementBlurAndFocusEvents&&(t._elementFocusEventEmitter.start(e),t._elementBlurEventEmitter.start(e))})}},{key:"unbind",value:function(e){var t=this;e.collectAllElementsBySelectorAsync(Dx,this._maxShadowDepth,this._iframeLoadingTimeout).then(function(e){t._StandardOnChangeEventsEmitter.stop(e),t._elementFocusEventEmitter.stop(e),t._elementBlurEventEmitter.stop(e)}),this._messageBus.unsubscribe(ho,this.handleOnChangeEvents),this._messageBus.unsubscribe(yo,this.handleFocusEvent),this._messageBus.unsubscribe(mo,this.handleBlurEvent)}},{key:"updateSettings",value:function(e){var t=this;this._collectSelectElementBlurAndFocusEvents=this._configurationRepository.get(X),this._collectSelectElementBlurAndFocusEvents||e.collectAllElementsBySelectorAsync(Dx,this._maxShadowDepth,this._iframeLoadingTimeout).then(function(e){t._elementFocusEventEmitter.stop(e),t._elementBlurEventEmitter.stop(e)})}}])}(KA),Lx=Ix;function Fx(e){return Fx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fx(e)}function Nx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qx(r.key),r)}}function Ux(e,t,n){return t=Gx(t),function(e,t){if(t&&("object"==Fx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Wx()?Reflect.construct(t,n||[],Gx(e).constructor):t.apply(e,n))}function Wx(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Wx=function(){return!!e})()}function Gx(e){return Gx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gx(e)}function Hx(e,t){return Hx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Hx(e,t)}function Qx(e){var t=function(e,t){if("object"!=Fx(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Fx(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fx(t)?t:t+""}var zx="form",Vx=function(e){function t(e,n,r,o,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){(t=Qx(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(a=Ux(this,t),"handleOnFormEvents",function(e){yt.trace("ElementEvents:_onFormSubmitEvent"),a._sendToQueue(e,{length:0,selected:-1,elementValues:""})}),a._sendToQueue=e,a._messageBus=n,a._StandardOnFormEventsEmitter=r,a._maxShadowDepth=o,a._iframeLoadingTimeout=i,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hx(e,t)}(t,e),function(e,t,n){return t&&Nx(e.prototype,t),n&&Nx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"bind",value:function(e){var t=this;e.getDocument();e.collectAllElementsBySelectorAsync(zx,this._maxShadowDepth,this._iframeLoadingTimeout).then(function(e){t._StandardOnFormEventsEmitter.start(e)}),this._messageBus.subscribe(vo,this.handleOnFormEvents)}},{key:"unbind",value:function(e){var t=this;e.collectAllElementsBySelectorAsync(zx,this._maxShadowDepth,this._iframeLoadingTimeout).then(function(e){t._StandardOnFormEventsEmitter.stop(e)}),this._messageBus.unsubscribe(vo,this.handleOnFormEvents)}}])}(KA),Kx=Vx;function qx(e){return qx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qx(e)}function Jx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yx(r.key),r)}}function Yx(e){var t=function(e,t){if("object"!=qx(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qx(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qx(t)?t:t+""}var Xx=function(){return function(e,t,n){return t&&Jx(e.prototype,t),n&&Jx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},[{key:"detectPrivateMode",value:function(e){this._isWebkitBrowser()?this._detectPrivateBrowsingOnWebkit(e):this._isMozillaBrowser()?this._detectPrivateBrowsingOnMozilla(e):this._isIE10OrLater(window.navigator.userAgent)?this._detectPrivateBrowsingOnIESinceVersion10(e):window.localStorage&&/Safari/.test(window.navigator.userAgent)?this._detectPrivateBrowsingOnSafari(e):e(null)}},{key:"_isWebkitBrowser",value:function(){return!!window.webkitRequestFileSystem}},{key:"_isMozillaBrowser",value:function(){return"MozAppearance"in document.documentElement.style}},{key:"_isIE10OrLater",value:function(e){var t=e.toLowerCase();if(0===t.indexOf("msie")&&0===t.indexOf("trident"))return!1;var n=/(?:msie|rv:)\s?([\d\.]+)/.exec(t);if(n&&parseInt(n[1],10)>=10)return!0;if((n="documentElement"in document&&("filters"in document.documentElement||"documentMode"in document))&&document.documentMode&&parseFloat((t.match(/.+(?:ie|rv)[\/: ]([\d.]+)/)||[])[1])>=10)return!0;n=/edge/.test(t);var r=!!t.match(/trident\/7\./);if((n||r)&&parseFloat((t.match(/.+(?:edge|rv)[\/: ]([\d.]+)/)||[])[1])>=10)return!0;return!1}},{key:"_detectPrivateBrowsingOnWebkit",value:function(e){void 0!==navigator.storage&&"function"==typeof navigator.storage.estimate?this._storageEstimateDetectionOnWebkit(e):this._fileSystemDetectionOnWebkit(e)}},{key:"_fileSystemDetectionOnWebkit",value:function(e){window.webkitRequestFileSystem(window.TEMPORARY,1,function(){e(!1)},function(){e(!0)})}},{key:"_storageEstimateDetectionOnWebkit",value:function(e){navigator.storage.estimate().then(function(t){var n=t.quota;e(n<12e7)}).catch(function(e){yt.error("failed to detect private browsing",e)})}},{key:"_detectPrivateBrowsingOnMozilla",value:function(e){try{var t=(indexedDB||window.indexedDB).open("test");t.onerror=function(){e(!0)},t.onsuccess=function(){e(!1)}}catch(t){e(!0)}}},{key:"_detectPrivateBrowsingOnIESinceVersion10",value:function(e){var t=!1;try{window.indexedDB||(t=!0)}catch(e){t=!0}e(t)}},{key:"_detectPrivateBrowsingOnSafari",value:function(e){var t;try{window.openDatabase(null,null,null,null)}catch(e){t=!0}try{window.localStorage.setItem("test",1)}catch(e){t=!0}t||(t=!1,window.localStorage.removeItem("test")),e(t)}}])}();function Zx(e){return Zx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zx(e)}function $x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eD(r.key),r)}}function eD(e){var t=function(e,t){if("object"!=Zx(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Zx(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zx(t)?t:t+""}var tD=1,nD=2,rD=3,oD=4,iD=5,aD=1,uD=2,sD=3,cD=4,lD=function(){return function(e,t,n){return t&&$x(e.prototype,t),n&&$x(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},null,[{key:"getPointerHover",value:function(){var e={pointer:iD,hover:iD};if(window.matchMedia){var t=window.matchMedia;t("( any-pointer: fine )").matches?e.pointer=tD:t("( any-pointer: coarse )").matches?e.pointer=nD:t("( any-pointer: none )").matches?e.pointer=rD:t("( any-pointer )").matches&&(e.pointer=oD),t("( any-hover: hover )").matches?e.hover=aD:t("( any-hover: on-demand )").matches?e.hover=uD:t("( any-hove: none )").matches?e.hover=sD:window.matchMedia("( any-hover )").matches&&(e.hover=cD)}return e}}])}();function fD(e){return fD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fD(e)}function pD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hD(r.key),r)}}function hD(e){var t=function(e,t){if("object"!=fD(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fD(t)?t:t+""}var yD=function(){return function(e,t,n){return t&&pD(e.prototype,t),n&&pD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._utils=t,this._scriptList=[]},[{key:"count",value:function(){return this._scriptList.length}},{key:"exists",value:function(e){/\d\d\d/.test(e.src)&&(e.src=this._utils.clearTextFromNumbers(e.src));for(var t=this._utils.getHash(e.text),n=0;n<this._scriptList.length;n++)if(e.src&&e.src===this._scriptList[n].src||t&&t===this._scriptList[n].textHash)return!0;return!1}},{key:"add",value:function(e){e.textHash=this._utils.getHash(e.text),/\d\d\d/.test(e.src)&&(e.src=this._utils.clearTextFromNumbers(e.src)),this._scriptList.push({src:e.src,textHash:e.textHash})}}])}();function dD(e){return dD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dD(e)}function mD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vD(r.key),r)}}function vD(e){var t=function(e,t){if("object"!=dD(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=dD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dD(t)?t:t+""}var bD=function(){return function(e,t,n){return t&&mD(e.prototype,t),n&&mD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){var n=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){(t=vD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"handleMutationEvent",function(e,t){e&&t&&n._messageBus.publish(ao,{mutation:e,browserContext:t})}),this._messageBus=t,"object"!==dD(this._messageBus))throw new Error("Bootstrap aborted! MessageBus missing for MutationEmitter");this._documentObservers=new WeakMap},[{key:"startObserver",value:function(e){var t=this,n=e.getDocument();if(!this._documentObservers.has(n)){var r=new window.MutationObserver(function(n){try{for(var r=0;r<n.length;r++){var o=n[r];if(o.addedNodes.length>0){t.handleMutationEvent(o,e);break}}}catch(e){yt.error("An error has occurred: ".concat(e.message))}});r.observe(n,{childList:!0,subtree:!0}),this._documentObservers.set(n,{instance:r})}}},{key:"stopObserver",value:function(e){var t,n=e.getDocument();this._documentObservers.has(n)&&(t=this._documentObservers.get(n))&&(t.instance&&t.instance.disconnect(),this._documentObservers.delete(n))}}])}();function gD(e){return gD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gD(e)}function _D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,SD(r.key),r)}}function wD(e,t,n){return(t=SD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SD(e){var t=function(e,t){if("object"!=gD(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=gD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gD(t)?t:t+""}var ED=function(){return function(e,t,n){return t&&_D(e.prototype,t),n&&_D(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),wD(this,"handleInputEvents",function(e){o._messageBus.publish(co,e)}),wD(this,"handleFocusEvents",function(e){o._messageBus.publish(lo,e)}),wD(this,"handleBlurEvents",function(e){o._messageBus.publish(fo,e)}),this._messageBus=t,this._eventAggregator=n,this._elementBindingWMap=new WeakMap,this._utils=r,this.defaultInputEventListener=[{event:"input",handler:this.handleInputEvents},{event:"focus",handler:this.handleFocusEvents},{event:"blur",handler:this.handleBlurEvents}]},[{key:"start",value:function(e,t,n){var r=this;e.forEach(function(e){if(!r._elementBindingWMap.has(e)){var o=[];void 0!==n?"function"==typeof n.func&&Array.isArray(n.allowedEvents)&&n.allowedEvents.length>0&&(n.func(t,e)?r.defaultInputEventListener.forEach(function(e){n.allowedEvents.includes(e.event)&&o.push(e)}):o=Array.from(r.defaultInputEventListener)):o=Array.from(r.defaultInputEventListener),o.forEach(function(t){r._eventAggregator.addEventListener(e,t.event,t.handler)}),r._elementBindingWMap.set(e,{isBinded:!0,listeners:[r.handleInputEvents,r.handleFocusEvents,r.handleBlurEvents],isUsingJQuery:!1})}})}},{key:"stop",value:function(e){var t=this;e.forEach(function(e){var n=t._elementBindingWMap.get(e);n&&n.isBinded&&(t.defaultInputEventListener.forEach(function(n){t._eventAggregator.removeEventListener(e,n.event,n.handler)}),t._elementBindingWMap.delete(e))})}},{key:"addElementEvents",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._elementBindingWMap.has(e)){if(n){if(!this._utils.JQueryUtils.isJQueryAvailable())return void yt.error("Unable to add event listeners for element using jQuery because jQuery is not available");this.defaultInputEventListener.forEach(function(n){t._utils.JQueryUtils.addEventListener(e,n.event,n.handler)})}else this.defaultInputEventListener.forEach(function(n){t._eventAggregator.addEventListener(e,n.event,n.handler)});this._elementBindingWMap.set(e,{isBinded:!0,listeners:[this.handleInputEvents,this.handleFocusEvents,this.handleBlurEvents],isUsingJQuery:n})}}},{key:"removeElementEvents",value:function(e){var t=this,n=this._elementBindingWMap.get(e);if(n&&n.isBinded){if(n.isUsingJQuery){if(!this._utils.JQueryUtils.isJQueryAvailable())return void yt.error("Unable to remove event listeners for element using jQuery because jQuery is not available");this.defaultInputEventListener.forEach(function(n){t._utils.JQueryUtils.removeEventListener(e,n.event,n.handler)})}else this.defaultInputEventListener.forEach(function(e){t._eventAggregator.removeEventListener(elements,e.event,e.handler)});this._elementBindingWMap.delete(e)}}}])}();function kD(e){return kD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kD(e)}function TD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,PD(r.key),r)}}function PD(e){var t=function(e,t){if("object"!=kD(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=kD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kD(t)?t:t+""}var OD=!1;!function(){try{var e=Object.defineProperty({},"passive",{get:function(){OD=!0}});window.addEventListener("test",null,e)}catch(e){}}();var CD=function(){return function(e,t,n){return t&&TD(e.prototype,t),n&&TD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},null,[{key:"addEventListener",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];OD?e.addEventListener(t,n,{capture:r,passive:o,once:i}):e.addEventListener?e.addEventListener(t,n,r):e.attachEvent("on"+t,n)}},{key:"removeEventListener",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent("on"+t,n)}}])}();function jD(e){return jD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jD(e)}function RD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,MD(r.key),r)}}function MD(e){var t=function(e,t){if("object"!=jD(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=jD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jD(t)?t:t+""}var BD=function(){return function(e,t,n){return t&&RD(e.prototype,t),n&&RD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){(t=MD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"handleOnClickEvents",function(e){o._messageBus.publish(po,e)}),this._messageBus=t,this._eventAggregator=n,this._elementBindingWMap=new WeakMap,this._utils=r,this.defaultOnClickEventListener=[{event:"click",handler:this.handleOnClickEvents}]},[{key:"start",value:function(e){var t=this;e.forEach(function(e){t._elementBindingWMap.has(e)||(t.defaultOnClickEventListener.forEach(function(n){t._eventAggregator.addEventListener(e,n.event,n.handler)}),t._elementBindingWMap.set(e,{isBinded:!0,listeners:[t.handleOnClickEvents],isUsingJQuery:!1}))})}},{key:"stop",value:function(e){var t=this;e.forEach(function(e){var n=t._elementBindingWMap.get(e);n&&n.isBinded&&(t.defaultOnClickEventListener.forEach(function(n){t._eventAggregator.removeEventListener(e,n.event,n.handler)}),t._elementBindingWMap.delete(e))})}},{key:"addElementEvents",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._elementBindingWMap.has(e)){if(n){if(!this._utils.JQueryUtils.isJQueryAvailable())return void yt.error("Unable to add event listeners for element using jQuery because jQuery is not available");this.defaultOnClickEventListener.forEach(function(n){t._utils.JQueryUtils.addEventListener(e,n.event,n.handler)})}else this.defaultOnClickEventListener.forEach(function(n){t._eventAggregator.addEventListener(e,n.event,n.handler)});this._elementBindingWMap.set(e,{isBinded:!0,listeners:[this.handleOnClickEvents],isUsingJQuery:n})}}},{key:"removeElementEvents",value:function(e){var t=this,n=this._elementBindingWMap.get(e);if(n&&n.isBinded){if(n.isUsingJQuery){if(!this._utils.JQueryUtils.isJQueryAvailable())return void yt.error("Unable to remove event listeners for element using jQuery because jQuery is not available");this.defaultOnClickEventListener.forEach(function(n){t._utils.JQueryUtils.removeEventListener(e,n.event,n.handler)})}else this.defaultOnClickEventListener.forEach(function(e){t._eventAggregator.removeEventListener(elements,e.event,e.handler)});this._elementBindingWMap.delete(e)}}}])}(),AD=BD;function xD(e){return xD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xD(e)}function DD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ID(r.key),r)}}function ID(e){var t=function(e,t){if("object"!=xD(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=xD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xD(t)?t:t+""}var LD=function(){return function(e,t,n){return t&&DD(e.prototype,t),n&&DD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){(t=ID(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"handleOnChangeEvents",function(e){o._messageBus.publish(ho,e)}),this._messageBus=t,this._eventAggregator=n,this._elementBindingWMap=new WeakMap,this._utils=r,this.defaultOnChangeEventListener=[{event:"change",handler:this.handleOnChangeEvents}]},[{key:"start",value:function(e){var t=this;e.forEach(function(e){t._elementBindingWMap.has(e)||(t.defaultOnChangeEventListener.forEach(function(n){t._eventAggregator.addEventListener(e,n.event,n.handler)}),t._elementBindingWMap.set(e,{isBinded:!0,listeners:[t.handleOnChangeEvents],isUsingJQuery:!1}))})}},{key:"stop",value:function(e){var t=this;e.forEach(function(e){var n=t._elementBindingWMap.get(e);n&&n.isBinded&&(t.defaultOnChangeEventListener.forEach(function(n){t._eventAggregator.removeEventListener(e,n.event,n.handler)}),t._elementBindingWMap.delete(e))})}},{key:"addElementEvents",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._elementBindingWMap.has(e)){if(n){if(!this._utils.JQueryUtils.isJQueryAvailable())return void yt.error("Unable to add event listeners for element using jQuery because jQuery is not available");this.defaultOnChangeEventListener.forEach(function(n){t._utils.JQueryUtils.addEventListener(e,n.event,n.handler)})}else this.defaultOnChangeEventListener.forEach(function(n){t._eventAggregator.addEventListener(e,n.event,n.handler)});this._elementBindingWMap.set(e,{isBinded:!0,listeners:[this.handleOnChangeEvents],isUsingJQuery:n})}}},{key:"removeElementEvents",value:function(e){var t=this,n=this._elementBindingWMap.get(e);if(n&&n.isBinded){if(n.isUsingJQuery){if(!this._utils.JQueryUtils.isJQueryAvailable())return void yt.error("Unable to remove event listeners for element using jQuery because jQuery is not available");this.defaultOnChangeEventListener.forEach(function(n){t._utils.JQueryUtils.removeEventListener(e,n.event,n.handler)})}else this.defaultOnChangeEventListener.forEach(function(e){t._eventAggregator.removeEventListener(elements,e.event,e.handler)});this._elementBindingWMap.delete(e)}}}])}(),FD=LD;function ND(e){return ND="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ND(e)}function UD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,WD(r.key),r)}}function WD(e){var t=function(e,t){if("object"!=ND(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ND(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ND(t)?t:t+""}var GD=function(){return function(e,t,n){return t&&UD(e.prototype,t),n&&UD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){(t=WD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"handleOnFormSubmitEvents",function(e){o._messageBus.publish(vo,e)}),this._messageBus=t,this._eventAggregator=n,this._elementBindingWMap=new WeakMap,this._utils=r,this.defaultOnFormEventListener=[{event:"submit",handler:this.handleOnFormSubmitEvents}]},[{key:"start",value:function(e){var t=this;e.forEach(function(e){t._elementBindingWMap.has(e)||(t.defaultOnFormEventListener.forEach(function(n){t._eventAggregator.addEventListener(e,n.event,n.handler)}),t._elementBindingWMap.set(e,{isBinded:!0,listeners:[t.handleOnFormSubmitEvents],isUsingJQuery:!1}))})}},{key:"stop",value:function(e){var t=this;e.forEach(function(e){var n=t._elementBindingWMap.get(e);n&&n.isBinded&&(t.defaultOnFormEventListener.forEach(function(n){t._eventAggregator.removeEventListener(e,n.event,n.handler)}),t._elementBindingWMap.delete(e))})}},{key:"addElementEvents",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._elementBindingWMap.has(e)){if(n){if(!this._utils.JQueryUtils.isJQueryAvailable())return void yt.error("Unable to add event listeners for element using jQuery because jQuery is not available");this.defaultOnFormEventListener.forEach(function(n){t._utils.JQueryUtils.addEventListener(e,n.event,n.handler)})}else this.defaultOnFormEventListener.forEach(function(n){t._eventAggregator.addEventListener(e,n.event,n.handler)});this._elementBindingWMap.set(e,{isBinded:!0,listeners:[this.handleOnFormSubmitEvents],isUsingJQuery:n})}}},{key:"removeElementEvents",value:function(e){var t=this,n=this._elementBindingWMap.get(e);if(n&&n.isBinded){if(n.isUsingJQuery){if(!this._utils.JQueryUtils.isJQueryAvailable())return void yt.error("Unable to remove event listeners for element using jQuery because jQuery is not available");this.defaultOnFormEventListener.forEach(function(n){t._utils.JQueryUtils.removeEventListener(e,n.event,n.handler)})}else this.defaultOnFormEventListener.forEach(function(e){t._eventAggregator.removeEventListener(elements,e.event,e.handler)});this._elementBindingWMap.delete(e)}}}])}(),HD=GD;function QD(e){return QD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QD(e)}function zD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,VD(r.key),r)}}function VD(e){var t=function(e,t){if("object"!=QD(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=QD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==QD(t)?t:t+""}var KD=function(){return function(e,t,n){return t&&zD(e.prototype,t),n&&zD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){(t=VD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"isJQueryDataSupported",function(e){return!(!e.jQuery||!e.jQuery._data)}),this._messageBus=t,this._eventAggregator=n,this._elementBindingWMap=new WeakMap,this._utils=r,this.defaultEventListener=[{event:"keypress",handler:this.handleKeypressEvents.bind(this)}]},[{key:"handleKeypressEvents",value:function(e,t){}},{key:"registerElement",value:function(e,t){var n=this;if(!this._elementBindingWMap.has(e)){var r={};this.defaultEventListener.forEach(function(o){var i=function(e){o.handler(e,t)};r[o.event]=i,n._eventAggregator.addEventListener(e,o.event,i)}),this._elementBindingWMap.set(e,{isBinded:!0,listeners:r})}}},{key:"unregisterElements",value:function(e){var t=this;e.forEach(function(e){var n=t._elementBindingWMap.get(e);n&&n.isBinded&&(t.defaultEventListener.forEach(function(r){t._eventAggregator.removeEventListener(e,r.event,n.listeners[r.event])}),t._elementBindingWMap.delete(e))})}},{key:"publishEvent",value:function(e,t,n,r){var o={bubbles:!0,cancelBubble:!1,cancelable:!1,composed:!0,currentTarget:null,data:r,dataTransfer:null,defaultPrevented:!1,detail:0,eventPhase:0,inputType:n,isComposing:!1,isTrusted:!0,jqueryMask:t,returnValue:!0,sourceCapabilities:null,srcElement:Object.assign(e.target||e.srcElement,{}),target:Object.assign(e.target,{}),timeStamp:e.timeStamp,type:"input",view:null,which:0};this._messageBus.publish(bo,o)}}])}();function qD(e){return qD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qD(e)}function JD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,YD(r.key),r)}}function YD(e){var t=function(e,t){if("object"!=qD(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qD(t)?t:t+""}function XD(e,t,n){return t=$D(t),function(e,t){if(t&&("object"==qD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ZD()?Reflect.construct(t,n||[],$D(e).constructor):t.apply(e,n))}function ZD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ZD=function(){return!!e})()}function $D(e){return $D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$D(e)}function eI(e,t){return eI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},eI(e,t)}var tI=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),XD(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eI(e,t)}(t,e),function(e,t,n){return t&&JD(e.prototype,t),n&&JD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"start",value:function(e,t){var n=this;t=t||window.self,e.forEach(function(e){n.isJQueryDataSupported(t)&&n.hasMaskEventSupported(e,t)&&n.registerElement(e,t)})}},{key:"stop",value:function(e){this.unregisterElements(e)}},{key:"hasMaskEventSupported",value:function(e,t){var n=t.jQuery._data(e,"events");if(void 0===n)return!1;for(var r=Object.keys(n),o=0;o<r.length;o++)if("unmask"===r[o])return!0;return!1}},{key:"handleKeypressEvents",value:function(e,t){if(this.isJQueryDataSupported(t)&&this.hasMaskEventSupported(e.target,t)){var n=e.key;this.publishEvent(e,"maskedInput","insertText",n)}}}])}(KD);function nI(e){return nI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nI(e)}function rI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oI(r.key),r)}}function oI(e){var t=function(e,t){if("object"!=nI(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nI(t)?t:t+""}function iI(e,t,n){return t=uI(t),function(e,t){if(t&&("object"==nI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,aI()?Reflect.construct(t,n||[],uI(e).constructor):t.apply(e,n))}function aI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(aI=function(){return!!e})()}function uI(e){return uI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},uI(e)}function sI(e,t){return sI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},sI(e,t)}var cI=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),iI(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sI(e,t)}(t,e),function(e,t,n){return t&&rI(e.prototype,t),n&&rI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"start",value:function(e,t){var n=this;e.forEach(function(e){n.isJQueryDataSupported(t)&&n.hasjQueryAutoTab(e,t)&&n.registerElement(e,t)})}},{key:"stop",value:function(e){this.unregisterElements(e)}},{key:"hasjQueryAutoTab",value:function(e,t){if(void 0===t.jQuery._data(e,"events"))return!1;for(var n=Object.keys(t.jQuery._data(e,"events")),r=0;r<n.length;r++)if(-1!==n[r].indexOf("autotab"))return!0;return!1}},{key:"handleKeypressEvents",value:function(e,t){if(this.isJQueryDataSupported(t)&&this.hasjQueryAutoTab(e.target,t)){var n=e.key;8!==e.keyCode&&this.publishEvent(e,"autotab","insertText",n)}}}])}(KD);function lI(e){return lI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lI(e)}function fI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pI(r.key),r)}}function pI(e){var t=function(e,t){if("object"!=lI(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=lI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lI(t)?t:t+""}var hI=function(){return function(e,t,n){return t&&fI(e.prototype,t),n&&fI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){(t=pI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"handleFocusEvent",function(e){r._messageBus.publish(ko,e)}),this._messageBus=t,this._eventAggregator=n},[{key:"start",value:function(e){if(!e)throw new Error("invalid window parameter");this._eventAggregator.addEventListener(e,"focus",this.handleFocusEvent,!1,!0)}},{key:"stop",value:function(e){if(!e)throw new Error("invalid window parameter");this._eventAggregator.removeEventListener(e,"focus",this.handleFocusEvent)}}])}(),yI=hI;function dI(e){return dI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dI(e)}function mI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vI(r.key),r)}}function vI(e){var t=function(e,t){if("object"!=dI(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=dI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dI(t)?t:t+""}var bI=function(){return function(e,t,n){return t&&mI(e.prototype,t),n&&mI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){(t=vI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"handleBlurEvent",function(e){r._messageBus.publish(To,e)}),this._messageBus=t,this._eventAggregator=n},[{key:"start",value:function(e){if(!e)throw new Error("invalid window parameter");this._eventAggregator.addEventListener(e,"blur",this.handleBlurEvent,!1,!0)}},{key:"stop",value:function(e){if(!e)throw new Error("invalid window parameter");this._eventAggregator.removeEventListener(e,"blur",this.handleBlurEvent)}}])}(),gI=bI;function _I(e){return _I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_I(e)}function wI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,SI(r.key),r)}}function SI(e){var t=function(e,t){if("object"!=_I(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_I(t)?t:t+""}var EI=function(){return function(e,t,n){return t&&wI(e.prototype,t),n&&wI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){(t=SI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"handleResizeEvent",function(e){r._messageBus.publish(Po,e)}),this._messageBus=t,this._eventAggregator=n},[{key:"start",value:function(e){if(!e)throw new Error("invalid window parameter");this._eventAggregator.addEventListener(e,"resize",this.handleResizeEvent,!1,!0)}},{key:"stop",value:function(e){if(!e)throw new Error("invalid window parameter");this._eventAggregator.removeEventListener(e,"resize",this.handleResizeEvent)}}])}(),kI=EI;function TI(e){return TI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TI(e)}function PI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,OI(r.key),r)}}function OI(e){var t=function(e,t){if("object"!=TI(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=TI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==TI(t)?t:t+""}var CI=function(){return function(e,t,n){return t&&PI(e.prototype,t),n&&PI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){(t=OI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"handleDOMContentLoadedEvent",function(e){r._messageBus.publish(Oo,e)}),this._messageBus=t,this._eventAggregator=n},[{key:"start",value:function(e){if(!e)throw new Error("invalid document parameter");this._eventAggregator.addEventListener(e,"DOMContentLoaded",this.handleDOMContentLoadedEvent)}},{key:"stop",value:function(e){if(!e)throw new Error("invalid document parameter");this._eventAggregator.removeEventListener(e,"DOMContentLoaded",this.handleDOMContentLoadedEvent)}}])}(),jI=CI;function RI(e){return RI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RI(e)}function MI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,BI(r.key),r)}}function BI(e){var t=function(e,t){if("object"!=RI(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=RI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==RI(t)?t:t+""}var AI=function(){return function(e,t,n){return t&&MI(e.prototype,t),n&&MI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){(t=BI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"handleVisibilityChangeEvent",function(e){r._messageBus.publish(Co,e)}),this._messageBus=t,this._eventAggregator=n},[{key:"start",value:function(e){if(!e)throw new Error("invalid document parameter");this._eventAggregator.addEventListener(e,"visibilitychange",this.handleVisibilityChangeEvent,!1,!0)}},{key:"stop",value:function(e){if(!e)throw new Error("invalid document parameter");this._eventAggregator.removeEventListener(e,"visibilitychange",this.handleVisibilityChangeEvent)}}])}(),xI=AI;function DI(e){return DI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DI(e)}function II(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,LI(r.key),r)}}function LI(e){var t=function(e,t){if("object"!=DI(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=DI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==DI(t)?t:t+""}var FI=function(){return function(e,t,n){return t&&II(e.prototype,t),n&&II(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){(t=LI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"handleScrollEvent",function(e){r._messageBus.publish(jo,e)}),this._messageBus=t,this._eventAggregator=n},[{key:"start",value:function(e){if(!e)throw new Error("invalid window parameter");this._eventAggregator.addEventListener(e,"scroll",this.handleScrollEvent,!1,!0)}},{key:"stop",value:function(e){if(!e)throw new Error("invalid window parameter");this._eventAggregator.removeEventListener(e,"scroll",this.handleScrollEvent)}}])}(),NI=FI;function UI(e){return UI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UI(e)}function WI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,GI(r.key),r)}}function GI(e){var t=function(e,t){if("object"!=UI(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=UI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==UI(t)?t:t+""}var HI=function(){return function(e,t,n){return t&&WI(e.prototype,t),n&&WI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){(t=GI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"handleWindowMessage",function(e){e&&r._messageBus.publish(Ro,{message:e})}),this._messageBus=t,this._EventAggregator=n,this._windowListeners=new WeakMap,this.defaultPostMessageEventListener=[{event:"message",handler:this.handleWindowMessage}]},[{key:"startObserver",value:function(e){var t=this;this._windowListeners.has(e.Context)||(this.defaultPostMessageEventListener.forEach(function(n){t._EventAggregator.addEventListener(e.Context,n.event,n.handler)}),this._windowListeners.set(e.Context,{isBinded:!0,listeners:[this.handleWindowMessage]}))}},{key:"stopObserver",value:function(e){var t=this,n=this._windowListeners.get(e.Context);n&&n.isBinded&&(this.defaultPostMessageEventListener.forEach(function(n){t._EventAggregator.removeEventListener(e.Context,n.event,n.handler)}),this._windowListeners.delete(e.Context))}}])}();function QI(e){return QI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QI(e)}function zI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,VI(r.key),r)}}function VI(e){var t=function(e,t){if("object"!=QI(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=QI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==QI(t)?t:t+""}var KI=function(){return function(e,t,n){return t&&zI(e.prototype,t),n&&zI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){(t=VI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"handleDeviceOrientationEvent",function(e){r._messageBus.publish(So,e)}),this._messageBus=t,this._eventAggregator=n},[{key:"start",value:function(){this._eventAggregator.addEventListener(window,"deviceorientation",this.handleDeviceOrientationEvent)}},{key:"stop",value:function(){this._eventAggregator.removeEventListener(window,"deviceorientation",this.handleDeviceOrientationEvent)}}])}(),qI=KI;function JI(e){return JI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JI(e)}function YI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,XI(r.key),r)}}function XI(e){var t=function(e,t){if("object"!=JI(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=JI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==JI(t)?t:t+""}var ZI=function(){return function(e,t,n){return t&&YI(e.prototype,t),n&&YI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){(t=XI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"handleBeforeInstallPrompt",function(e){r._messageBus.publish(Eo,e)}),this._messageBus=t,this._eventAggregator=n},[{key:"start",value:function(e){if(!e)throw new Error("invalid window parameter");this._eventAggregator.addEventListener(e,"beforeinstallprompt",this.handleBeforeInstallPrompt)}},{key:"stop",value:function(e){if(!e)throw new Error("invalid window parameter");this._eventAggregator.removeEventListener(e,"beforeinstallprompt",this.handleBeforeInstallPrompt)}}])}(),$I=ZI;function eL(e){return eL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eL(e)}function tL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nL(r.key),r)}}function nL(e){var t=function(e,t){if("object"!=eL(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=eL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eL(t)?t:t+""}var rL=function(){return function(e,t,n){return t&&tL(e.prototype,t),n&&tL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){(t=nL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"handleCutEvent",function(e){r._messageBus.publish(go,e)}),this._messageBus=t,this._eventAggregator=n},[{key:"start",value:function(e){if(!e)throw new Error("invalid document parameter");this._eventAggregator.addEventListener(e,"cut",this.handleCutEvent)}},{key:"stop",value:function(e){if(!e)throw new Error("invalid document parameter");this._eventAggregator.removeEventListener(e,"cut",this.handleCutEvent)}}])}(),oL=rL;function iL(e){return iL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iL(e)}function aL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,uL(r.key),r)}}function uL(e){var t=function(e,t){if("object"!=iL(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=iL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==iL(t)?t:t+""}var sL=function(){return function(e,t,n){return t&&aL(e.prototype,t),n&&aL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){(t=uL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"handleCopyEvent",function(e){r._messageBus.publish(_o,e)}),this._messageBus=t,this._eventAggregator=n},[{key:"start",value:function(e){if(!e)throw new Error("invalid document parameter");this._eventAggregator.addEventListener(e,"copy",this.handleCopyEvent)}},{key:"stop",value:function(e){if(!e)throw new Error("invalid document parameter");this._eventAggregator.removeEventListener(e,"copy",this.handleCopyEvent)}}])}(),cL=sL;function lL(e){return lL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lL(e)}function fL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pL(r.key),r)}}function pL(e){var t=function(e,t){if("object"!=lL(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=lL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lL(t)?t:t+""}var hL=function(){return function(e,t,n){return t&&fL(e.prototype,t),n&&fL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){(t=pL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"handlePasteEvent",function(e){r._messageBus.publish(wo,e)}),this._messageBus=t,this._eventAggregator=n},[{key:"start",value:function(e){if(!e)throw new Error("invalid document parameter");this._eventAggregator.addEventListener(e,"paste",this.handlePasteEvent)}},{key:"stop",value:function(e){if(!e)throw new Error("invalid document parameter");this._eventAggregator.removeEventListener(e,"paste",this.handlePasteEvent)}}])}(),yL=hL;function dL(e){return dL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dL(e)}function mL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vL(r.key),r)}}function vL(e){var t=function(e,t){if("object"!=dL(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=dL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dL(t)?t:t+""}var bL=function(){return function(e,t,n){return t&&mL(e.prototype,t),n&&mL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){(t=vL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"handleElementFocusEvents",function(e){r._messageBus.publish(yo,e)}),this._messageBus=t,this._eventAggregator=n},[{key:"start",value:function(e){var t=this;e.forEach(function(e){t._eventAggregator.addEventListener(e,"focus",t.handleElementFocusEvents)})}},{key:"stop",value:function(e){var t=this;e.forEach(function(e){t._eventAggregator.removeEventListener(e,"focus",t.handleElementFocusEvents)})}}])}(),gL=bL;function _L(e){return _L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_L(e)}function wL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,SL(r.key),r)}}function SL(e){var t=function(e,t){if("object"!=_L(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_L(t)?t:t+""}var EL=function(){return function(e,t,n){return t&&wL(e.prototype,t),n&&wL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){(t=SL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"handleElementBlurEvents",function(e){r._messageBus.publish(mo,e)}),this._messageBus=t,this._eventAggregator=n},[{key:"start",value:function(e){var t=this;e.forEach(function(e){t._eventAggregator.addEventListener(e,"blur",t.handleElementBlurEvents)})}},{key:"stop",value:function(e){var t=this;e.forEach(function(e){t._eventAggregator.removeEventListener(e,"blur",t.handleElementBlurEvents)})}}])}(),kL=EL;function TL(e){return TL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TL(e)}function PL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,CL(r.key),r)}}function OL(e,t,n){return(t=CL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CL(e){var t=function(e,t){if("object"!=TL(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=TL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==TL(t)?t:t+""}var jL=function(){return function(e,t,n){return t&&PL(e.prototype,t),n&&PL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),OL(this,"mousemove",function(e){o._messageBus.publish(Do,e)}),OL(this,"keydown",function(e){o._messageBus.publish(Do,e)}),OL(this,"mouseleave",function(e){o._eventAggregator.removeEventListener(e.target,"mousemove",o.mousemove),o._messageBus.publish(Do,e)}),OL(this,"mouseup",function(e){o._eventAggregator.removeEventListener(e.target,"mousemove",o.mousemove),o._eventAggregator.removeEventListener(e.target,"mouseleave",o.mouseleave)}),OL(this,"mousedown",function(e){o._eventAggregator.addEventListener(e.target,"mousemove",o.mousemove),o._eventAggregator.addEventListener(e.target,"mouseleave",o.mouseleave),o._eventAggregator.addEventListener(e.target,"mouseup",o.mouseup),o._eventAggregator.addEventListener(e.target,"keydown",o.keydown)}),OL(this,"handleFocus",function(e){o._messageBus.publish(Do,e)}),OL(this,"handleMouseEnter",function(e){o._eventAggregator.addEventListener(e.target,"mousedown",o.mousedown)}),OL(this,"handleOnClickEvents",function(){o._messageBus.publish(Do,o._mainElm)}),this._messageBus=t,this._eventAggregator=n,this._utils=r,this._elementsBindingWMap=new WeakMap,this.customInputEventListener=[{event:"mouseenter",handler:this.handleMouseEnter},{event:"focus",handler:this.handleFocus}],this.defaultOnClickEventListener=[{event:"click",handler:this.handleOnClickEvents}],this._mainElm="",this._mainTagName=["SPAN","DIV"],this._btnTagName="BUTTON",this._btnInnerText=["+","-"]},[{key:"start",value:function(e){var t=this;e&&e.forEach(function(e){t._elementsBindingWMap.has(e)||(null!=e&&e.tagName&&t._mainTagName.includes(e.tagName)&&(t._mainElm=e,t.customInputEventListener.forEach(function(n){t._eventAggregator.addEventListener(e,n.event,n.handler)}),t._elementsBindingWMap.set(e,{isBinded:!0,listeners:[t.handleMouseEnter,t.handleFocus],isUsingJQuery:!1})),(null!=e&&e.tagName&&e.tagName===t._btnTagName||null!=e&&e.innerText&&t._btnInnerText.includes(e.innerText))&&(t.defaultOnClickEventListener.forEach(function(n){t._eventAggregator.addEventListener(e,n.event,n.handler)}),t._elementsBindingWMap.set(e,{isBinded:!0,listeners:[t.handleOnClickEvents],isUsingJQuery:!1})))})}},{key:"stop",value:function(e){var t=this;e.forEach(function(e){var n=t._elementsBindingWMap.get(e);null!=n&&n.isBinded&&(null!=e&&e.tagName&&t._mainTagName.includes(e.tagName)&&t.customInputEventListener.forEach(function(n){t._eventAggregator.removeEventListener(e,n.event,n.handler)}),(null!=e&&e.tagName&&e.tagName===t._btnTagName||null!=e&&e.innerText&&t._btnInnerText.includes(e.innerText))&&t.defaultOnClickEventListener.forEach(function(n){t._eventAggregator.removeEventListener(e,n.event,n.handler)}),t._elementsBindingWMap.delete(e))})}}])}(),RL=jL;function ML(e){return ML="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ML(e)}function BL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function AL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,DL(r.key),r)}}function xL(e,t,n){return(t=DL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DL(e){var t=function(e,t){if("object"!=ML(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ML(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ML(t)?t:t+""}var IL=[{name:"MouseEvents",className:sd,init:function(){return function(){this._configurations.isFlutterApp()?this._features.list.MouseEvents.instance=new wm(this._msgBus,this._dataQ,this._utils,this._maskingService,Ic,this._configurations):this._features.list.MouseEvents.instance=new sd(this._utils,Ic,this._elements,this._dataQ,this._maskingService,this._configurations)}}},{name:"KeyEvents",className:Ci,init:function(){return function(){this._configurations.isFlutterApp()?this._features.list.KeyEvents.instance=new $d(this._msgBus,this._dataQ,this._utils,this._maskingService):this._features.list.KeyEvents.instance=new Ci(this._configurationRepository,this._utils,this._elements,this._dataQ,this._msgBus,this._sameCharService,this._maskingService,this._configurations)}}},{name:"TouchEvents",className:fi,init:function(){return function(){this._configurations.isFlutterApp()?this._features.list.TouchEvents.instance=new lm(this._msgBus,this._dataQ,this._utils,this._maskingService):this._features.list.TouchEvents.instance=new fi(this._utils,this._elements,this._dataQ,this._msgBus,this._maskingService,this._configurations)}}},{name:"ClipboardEvents",className:vp,init:function(){return function(){var e=new vp.Builder(this._utils,this._elements,this._dataQ,this._configurations),t=new oL(this._msgBus,CD),n=new cL(this._msgBus,CD),r=new yL(this._msgBus,CD);e.withMessageBus(this._msgBus).withCutEventEmitter(t).withCopyEventEmitter(n).withPasteEventEmitter(r),this._features.list.ClipboardEvents.instance=e.build()}}},{name:"ElementEvents",className:np,init:function(){return function(){if(this._configurations.isFlutterApp())this._features.list.ElementEvents.instance=new Hd(this._msgBus,this._dataQ,this._utils,this._contextMgr,this._maskingService);else{var e=new ED(this._msgBus,CD,this._utils),t=new AD(this._msgBus,CD,this._utils),n=new FD(this._msgBus,CD,this._utils),r=new gL(this._msgBus,CD,this._utils),o=new kL(this._msgBus,CD,this._utils),i=new HD(this._msgBus,CD,this._utils),a=new RL(this._msgBus,CD,this._utils),u=new ir(MutationObserver,this._utils,Ic,"jQueryElementListenerConfig",null,!1),s=(mA=e,vA=t,bA=n,gA=i,{bindInputEvents:_A,bindOnClickEvents:wA,bindOnChangeEvents:SA,bindOnFormsEvents:EA}),c=new np.Builder(this._configurationRepository,this._utils,Ic,this._elements,this._dataQ,this._configurations),l=new bD(this._msgBus),f=new tI(this._msgBus,CD,this._utils),p=new cI(this._msgBus,CD,this._utils);c.withjQueryElementListenerSiteMapper(u),c.withMessageBus(this._msgBus),c.withMutationEmitter(l),c.withjQueryElementsHandler(s),c.withInputEvents(ix,nx,this._maskingService),c.withStandardInputEventsEmitter(e),c.withSyntheticMaskInputEventsHandler(f),c.withSyntheticAutotabInputEventsHandler(p),c.withClickEvents(Px,kx),c.withStandardOnClickEventsEmitter(t),c.withSelectElementEvents(Lx,Dx),c.withElementFocusEventsEmitter(r),c.withElementBlurEventsEmitter(o),c.withStandardOnChangeEventsEmitter(n),c.withFormEvents(Kx,zx),c.withStandardOnFormEventsEmitter(i),c.withCustomInputEventEmitter(mx,a),this._features.list.ElementEvents.instance=c.build()}}}},{name:"WindowEvents",className:Zp,init:function(){return function(){var e=new Zp.Builder(this._configurationRepository,nn,this._dataQ),t=new yI(this._msgBus,CD),n=new gI(this._msgBus,CD),r=new kI(this._msgBus,CD),o=new jI(this._msgBus,CD),i=new xI(this._msgBus,CD),a=new NI(this._msgBus,CD);e.withMessageBus(this._msgBus),e.withFocusEventEmitter(t),e.withBlurEventEmitter(n),e.withResizeEventEmitter(r),e.withDOMContentLoadedEventEmitter(o),e.withVisibilityChangeEventEmitter(i),e.withScrollEventEmitter(a),this._features.list.WindowEvents.instance=e.build()}}},{name:"MetadataCollector",className:dA,init:function(){return function(){var e=new ir(MutationObserver,this._utils,Ic,"metadataConfig",null,!1);this._features.list.MetadataCollector.instance=new dA(this._configurationRepository,this._dataQ,e,this._utils)}}},{name:"TabsEvents",className:wd,init:function(){return function(){this._features.list.TabsEvents.instance=new wd(this._utils,this._dataQ)}}},{name:"DoNotTrack",className:y_,init:function(){return function(){this._features.list.DoNotTrack.instance=new y_(this._dataQ)}}},{name:"BrowserProps",className:Xg,init:function(){return function(){this._features.list.BrowserProps.instance=new Xg(this._dataQ,lD,this._utils,this._configurationRepository,this._configurations)}}},{name:"IsPrivateBrowsing",className:Vw,init:function(){return function(){var e=new Xx;this._features.list.IsPrivateBrowsing.instance=new Vw(this._dataQ,e)}}},{name:"FontsDetectionFeature",className:Tk,init:function(){return function(){this._features.list.FontsDetectionFeature.instance=new Tk(this._utils,Ic,this._dataQ,this._configurationRepository,null,null,this._fontTimingService)}}},{name:"GraphicDetectFeature",className:M_,init:function(){return function(){this._features.list.GraphicDetectFeature.instance=new M_(this._dataQ,this._configurations)}}},{name:"BrowserDetect",className:nv,init:function(){return function(){this._features.list.BrowserDetect.instance=new nv(this._dataQ)}}},{name:"FilesFeature",className:aA,init:function(){return function(){this._features.list.FilesFeature.instance=new aA(this._configurationRepository,this._utils,this._sessionService,this._muidService,this._cidCache)}}},{name:"UserPermissions",className:jw,init:function(){return function(){this._features.list.UserPermissions.instance=new jw(this._dataQ)}}},{name:"MediaDevicesFeature",className:Y_,init:function(){return function(){this._features.list.MediaDevicesFeature.instance=new Y_(this._dataQ)}}},{name:"ContextPropsFeature",className:GB,init:function(){return function(){this._features.list.ContextPropsFeature.instance=new GB(this._dataQ,Ic,this._perfMonitor,this._configurationRepository)}}},{name:"GfxRenderingFeature",className:Yk,init:function(){return function(){this._features.list.GfxRenderingFeature.instance=new Yk(this._dataQ,nn)}}},{name:"AudioDetectFeature",className:TT,init:function(){return function(){this._features.list.AudioDetectFeature.instance=new TT(this._dataQ,nn)}}},{name:"AudioDetectFeature2",className:VT,init:function(){return function(){this._features.list.AudioDetectFeature2.instance=new VT(this._devDebugDataQueue,nn)}}},{name:"EncryptedMuidFeature",className:oP,init:function(){return function(){this._features.list.EncryptedMuidFeature.instance=new oP(this._devDebugDataQueue,this._muidEncryptedService)}}},{name:"ScriptsFeature",className:XB,init:function(){return function(){var e=new yD(this._utils);this._features.list.ScriptsFeature.instance=new XB(this._dataQ,e)}}},{name:"AccelerometerEvents",className:yh,init:function(){return function(){this._features.list.AccelerometerEvents.instance=new yh(this._configurationRepository,this._utils,this._sensorDataQ)}}},{name:"PinchZoomEvents",className:Ch,init:function(){return function(){this._features.list.PinchZoomEvents.instance=new Ch(this._utils,this._elements,this._dataQ,this._msgBus,this._configurations)}}},{name:"ScriptEvents",className:Nh,init:function(){return function(){this._features.list.ScriptEvents.instance=new Nh(this._utils,this._dataQ)}}},{name:"NetInfoEvents",className:Jh,init:function(){return function(){this._features.list.NetInfoEvents.instance=new Jh(this._utils,this._dataQ)}}},{name:"DeviceOrientationCollector",className:ay,init:function(){return function(){this._features.list.DeviceOrientationCollector.instance=new ay(this._utils,this._dataQ)}}},{name:"TapEvents",className:vy,init:function(){return function(){this._features.list.TapEvents.instance=new vy(this._configurationRepository,this._utils,this._elements,this._dataQ,this._maskingService,this._configurations)}}},{name:"LocationEvents",className:Bd,init:function(){return function(){this._features.list.LocationEvents.instance=new Bd(this._dataQ,this._utils,this._configurationRepository)}}},{name:"StorageEvents",className:Cy,init:function(){return function(){this._features.list.StorageEvents.instance=new Cy(this._utils,this._elements,this._dataQ,this._msgBus)}}},{name:"PrintEvents",className:Uy,init:function(){return function(){this._features.list.PrintEvents.instance=new Uy(this._utils,this._dataQ)}}},{name:"LightSensorEvents",className:Yy,init:function(){return function(){this._features.list.LightSensorEvents.instance=new Yy(this._dataQ,this._utils,this._configurationRepository)}}},{name:"CrossDomain",className:HA,init:function(){return function(){var e=new HA.Builder(this._configurationRepository,this._dataQ,this._utils,Ic,LA),t=new HI(this._msgBus,CD);e.withMessageBus(this._msgBus),e.withWindowMessageEventEmitter(t),this._features.list.CrossDomain.instance=e.build()}}},{name:"OrientationEvents",className:Op,init:function(){return function(){var e=new qI(this._msgBus,CD);this._features.list.OrientationEvents.instance=new Op(this._configurationRepository,this._utils,this._sensorDataQ,this._msgBus,e)}}},{name:"BeforeInstallPromptEvents",className:Fp,init:function(){return function(){var e=new $I(this._msgBus,CD);this._features.list.BeforeInstallPromptEvents.instance=new Fp(this._dataQ,this._utils,this._msgBus,e)}}},{name:"Navigator",className:hP,init:function(){return function(){this._features.list.Navigator.instance=new hP(this._devDebugDataQueue)}}},{name:"KeyboardLayoutFeature",className:fj,init:function(){return function(){this._features.list.KeyboardLayoutFeature.instance=new fj(this._dataQ)}}},{name:"StorageFeature",className:QC,init:function(){return function(){this._features.list.StorageFeature.instance=new QC(this._dataQ,this._devDebugDataQueue)}}},{name:"BatteryStatusCollector",className:Dm,init:function(){return function(){this._features.list.BatteryStatusCollector.instance=new Dm(this._dataQ,this._utils)}}},{name:"FontEmojiFeature",className:Ej,init:function(){return function(){this._features.list.FontEmojiFeature.instance=new Ej(this._devDebugDataQueue)}}},{name:"FontMathFeature",className:Dj,init:function(){return function(){this._features.list.FontMathFeature.instance=new Dj(this._devDebugDataQueue)}}},{name:"FontWidthFeature",className:Jj,init:function(){return function(){this._features.list.FontWidthFeature.instance=new Jj(this._devDebugDataQueue)}}},{name:"ScreenHighResFeature",className:pR,init:function(){return function(){this._features.list.ScreenHighResFeature.instance=new pR(this._devDebugDataQueue)}}},{name:"BrowserExtensionEvents",className:tC,init:function(){return function(){this._features.list.BrowserExtensionEvents.instance=new tC(this._configurationRepository,this._utils,Ic,this._dataQ)}}},{name:"AdblockerListsCollector",className:BP,init:function(){return function(){this._features.list.AdblockerListsCollector.instance=new BP(this._devDebugDataQueue)}}},{name:"WebglCollector",className:sO,init:function(){return function(){this._features.list.WebglCollector.instance=new sO(this._devDebugDataQueue)}}},{name:"DRMDataCollector",className:dC,init:function(){return function(){this._features.list.DRMDataCollector.instance=new dC(this._devDebugDataQueue)}}},{name:"WebRTCDataCollector",className:wO,init:function(){return function(){this._features.list.WebRTCDataCollector.instance=new wO(this._dataQ)}}},{name:"SpeechVoiceCollector",className:MO,init:function(){return function(){this._features.list.SpeechVoiceCollector.instance=new MO(this._devDebugDataQueue)}}},{name:"CPUDataCollector",className:tM,init:function(){return function(){this._features.list.CPUDataCollector.instance=new tM(this._devDebugDataQueue)}}},{name:"HeapCollector",className:TR,init:function(){return function(){this._features.list.HeapCollector.instance=new TR(this._devDebugDataQueue)}}},{name:"TimingCollector",className:AB,init:function(){return function(){this._features.list.TimingCollector.instance=new AB(this._devDebugDataQueue,this._fontTimingService)}}}],LL=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){return t&&AL(e.prototype,t),n&&AL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(e,null,[{key:"register",value:function(){var t=this;e.list={},IL.forEach(function(e){t._addFeature(e)})}},{key:"registerLeanFeatures",value:function(){var t=this;e.list={},IL.forEach(function(e){e.className.getDefaultSettings().runInLean&&t._addFeature(e)})}},{key:"getDefaultFeatures",value:function(){return this.getFeaturesByCondition(function(e){return e.isDefault})}},{key:"getPerContextFeatures",value:function(){return this.getFeaturesByCondition(function(e){return e.shouldRunPerContext})}},{key:"getPerSessionFeatures",value:function(){return this.getFeaturesByCondition(function(e){return e.shouldRunPerSession})}},{key:"getNonDefaultFeatures",value:function(){return this.getFeaturesByCondition(function(e){return!e.isDefault&&!e.shouldRunPerContext&&!e.shouldRunPerSession})}},{key:"getFeaturesByCondition",value:function(t){var n={};return Object.keys(e.list).forEach(function(r){var o=e.list[r];t(o)&&(n[r]=o)}),n}},{key:"_addFeature",value:function(t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BL(Object(n),!0).forEach(function(t){xL(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BL(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t.className.getDefaultSettings()),r=t.name;n.init=t.init(),e.list[r]=n}}])}();function FL(e){return FL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},FL(e)}function NL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,UL(r.key),r)}}function UL(e){var t=function(e,t){if("object"!=FL(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=FL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==FL(t)?t:t+""}xL(LL,"list",void 0);var WL=function(){return function(e,t,n){return t&&NL(e.prototype,t),n&&NL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.messageBus=t},[{key:"collectElement",value:function(e,t,n,r,o,i,a,u,s){this.messageBus.publish(Io.ElementsEvent,{hashCode:e,elementId:t,widthElement:n,heightElement:r,dxPosition:o,dyPosition:i,widgetType:a,timeStamp:s})}},{key:"collectElementEvent",value:function(e,t,n,r,o){this.messageBus.publish(Io.ElementEventsEvent,{hashCode:e,elementId:t,eventType:n,elementValue:r,timeStamp:o})}},{key:"collectTouchEvent",value:function(e,t,n,r,o,i,a,u,s,c,l,f){this.messageBus.publish(Io.TouchEvent,{hashCode:e,touchState:t,x:n,y:r,pointer:o,radiusMajor:u,radiusMinor:s,pressure:c,timeStamp:f})}},{key:"collectKeyEvent",value:function(e,t,n,r){this.messageBus.publish(Io.KeyEvent,{hashCode:e,elementId:t,char:n,timeStamp:r})}},{key:"collectOnMouseEvent",value:function(e,t,n,r,o,i,a,u,s,c,l,f){this.messageBus.publish(Io.MouseEvent,{hashCode:e,type:t,screenX:n,screenY:r,pointer:o,radiusMajor:u,radiusMinor:s,pressure:c,timeStamp:f})}}])}();function GL(e){return GL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GL(e)}function HL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,QL(r.key),r)}}function QL(e){var t=function(e,t){if("object"!=GL(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=GL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==GL(t)?t:t+""}var zL=function(){return function(e,t,n){return t&&HL(e.prototype,t),n&&HL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._protocolType=t.includes(Ct)?4:3},[{key:"get",value:function(){return this._protocolType}}])}();function VL(e){return VL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VL(e)}function KL(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return qL(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qL(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function qL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function JL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,YL(r.key),r)}}function YL(e){var t=function(e,t){if("object"!=VL(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=VL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==VL(t)?t:t+""}var XL=function(){return function(e,t,n){return t&&JL(e.prototype,t),n&&JL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n,r=new URL(t),o=r.pathname,i=o,a=KL(Rt);try{for(a.s();!(n=a.n()).done;){var u=n.value,s=o.indexOf("/"+u);if(-1!==s){i=o.substring(0,s);break}}}catch(e){a.e(e)}finally{a.f()}i=i.replace(/\/+$/,""),this._baseServerAddress=r.origin+i},[{key:"get",value:function(){return this._baseServerAddress}}])}();function ZL(e){return ZL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZL(e)}function $L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eF(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eF(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function tF(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return nF(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(nF(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,nF(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,nF(f,"constructor",c),nF(c,"constructor",s),s.displayName="GeneratorFunction",nF(c,o,"GeneratorFunction"),nF(f),nF(f,o,"Generator"),nF(f,r,function(){return this}),nF(f,"toString",function(){return"[object Generator]"}),(tF=function(){return{w:i,m:p}})()}function nF(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}nF=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){nF(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},nF(e,t,n,r)}function rF(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function oF(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){rF(i,r,o,a,u,"next",e)}function u(e){rF(i,r,o,a,u,"throw",e)}a(void 0)})}}function iF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,uF(r.key),r)}}function aF(e,t,n){return(t=uF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uF(e){var t=function(e,t){if("object"!=ZL(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ZL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ZL(t)?t:t+""}var sF=function(){function e(t){var n=t.storeName;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!n)throw new Error("Store name must be provided.");if(e.instances.has(n))return e.instances.get(n);if(!e.DB_CONFIG.STORE_SCHEMAS[n])throw new Error('Store "'.concat(n,'" is not defined in the schema.'));this.storeName=n,this.db=null,this.initialized=!1,e.instances.set(n,this)}return function(e,t,n){return t&&iF(e.prototype,t),n&&iF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(e,[{key:"init",value:(u=oF(tF().m(function e(){return tF().w(function(e){for(;;)switch(e.n){case 0:if(!this.initialized){e.n=1;break}return e.a(2);case 1:return e.n=2,this._openDB();case 2:this.db=e.v,this.initialized=!0;case 3:return e.a(2)}},e,this)})),function(){return u.apply(this,arguments)})},{key:"_openDB",value:function(){return new Promise(function(t,n){var r=indexedDB.open(e.DB_CONFIG.NAME,e.DB_CONFIG.VERSION);r.onupgradeneeded=function(t){var n=t.target.result;yt.debug("Database upgrade: Version ".concat(t.oldVersion," -> ").concat(t.newVersion));for(var r=0,o=Object.entries(e.DB_CONFIG.STORE_SCHEMAS);r<o.length;r++){var i=$L(o[r],1)[0];n.objectStoreNames.contains(i)?yt.debug("Object store exists: ".concat(i)):(yt.debug("Creating object store: ".concat(i)),n.createObjectStore(i))}},r.onsuccess=function(n){yt.debug('Database "'.concat(e.DB_CONFIG.NAME,'" opened successfully.')),t(n.target.result)},r.onerror=function(t){yt.error('Error opening database "'.concat(e.DB_CONFIG.NAME,'":'),t.target.error),n(t.target.error)}})}},{key:"_openObjectStore",value:function(e){if(!this.db)throw new Error("Database is not initialized. Call init() first.");return this.db.transaction([this.storeName],e).objectStore(this.storeName)}},{key:"addRecord",value:(a=oF(tF().m(function e(t,n){var r=this;return tF().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.init();case 1:return e.a(2,new Promise(function(e,o){var i=r._openObjectStore("readwrite").put(n,t);i.onsuccess=function(){return e("Record added successfully.")},i.onerror=function(e){return o("Add record error: ".concat(e.target.error))}}))}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"getRecord",value:(i=oF(tF().m(function e(t){var n=this;return tF().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.init();case 1:return e.a(2,new Promise(function(e,r){var o=n._openObjectStore("readonly").get(t);o.onsuccess=function(t){return e(t.target.result||null)},o.onerror=function(e){return r("Get record error: ".concat(e.target.error))}}))}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"updateRecord",value:(o=oF(tF().m(function e(t,n){var r=this;return tF().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.init();case 1:return e.a(2,new Promise(function(e,o){var i=r._openObjectStore("readwrite").put(n,t);i.onsuccess=function(){return e("Record updated successfully.")},i.onerror=function(e){return o("Update record error: ".concat(e.target.error))}}))}},e,this)})),function(e,t){return o.apply(this,arguments)})},{key:"deleteRecord",value:(r=oF(tF().m(function e(t){var n=this;return tF().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.init();case 1:return e.a(2,new Promise(function(e,r){var o=n._openObjectStore("readwrite").delete(t);o.onsuccess=function(){return e("Record deleted successfully.")},o.onerror=function(e){return r("Delete record error: ".concat(e.target.error))}}))}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"getAllRecords",value:(n=oF(tF().m(function e(){var t=this;return tF().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.init();case 1:return e.a(2,new Promise(function(e,n){var r=t._openObjectStore("readonly").getAll();r.onsuccess=function(t){return e(t.target.result)},r.onerror=function(e){return n("Get all records error: ".concat(e.target.error))}}))}},e,this)})),function(){return n.apply(this,arguments)})},{key:"clearStore",value:(t=oF(tF().m(function e(){var t=this;return tF().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.init();case 1:return e.a(2,new Promise(function(e,n){var r=t._openObjectStore("readwrite").clear();r.onsuccess=function(){return e("All records cleared successfully.")},r.onerror=function(e){return n("Clear store error: ".concat(e.target.error))}}))}},e,this)})),function(){return t.apply(this,arguments)})},{key:"release",value:function(){this.db&&(this.db.close(),this.db=null,this.initialized=!1,e.instances.delete(this.storeName),yt.debug('Database "'.concat(e.DB_CONFIG.NAME,'" connection for store "').concat(this.storeName,'" closed.')))}}]);var t,n,r,o,i,a,u}();function cF(e){return cF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cF(e)}function lF(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return fF(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(fF(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,fF(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,fF(f,"constructor",c),fF(c,"constructor",s),s.displayName="GeneratorFunction",fF(c,o,"GeneratorFunction"),fF(f),fF(f,o,"Generator"),fF(f,r,function(){return this}),fF(f,"toString",function(){return"[object Generator]"}),(lF=function(){return{w:i,m:p}})()}function fF(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}fF=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){fF(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},fF(e,t,n,r)}function pF(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function hF(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){pF(i,r,o,a,u,"next",e)}function u(e){pF(i,r,o,a,u,"throw",e)}a(void 0)})}}function yF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dF(r.key),r)}}function dF(e){var t=function(e,t){if("object"!=cF(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=cF(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cF(t)?t:t+""}aF(sF,"instances",new Map),aF(sF,"DB_CONFIG",{NAME:"bio",VERSION:1,STORE_SCHEMAS:{emuid:{},keystore:{}}});var mF=function(){return function(e,t,n){return t&&yF(e.prototype,t),n&&yF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.storage=null!=t?t:new sF({storeName:"keystore"})},[{key:"init",value:(i=hF(lF().m(function e(){return lF().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.storage.init();case 1:return e.a(2)}},e,this)})),function(){return i.apply(this,arguments)})},{key:"getKey",value:(o=hF(lF().m(function e(t){var n,r,o;return lF().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,this.storage.getRecord(t);case 1:if(n=e.v){e.n=4;break}return e.n=2,this._generateKey();case 2:return r=e.v,e.n=3,this._saveKey(t,r);case 3:return e.a(2,r);case 4:return e.a(2,n);case 5:throw e.p=5,o=e.v,yt.error("Failed to import key:",o),new Error("Key retrieval failed.");case 6:return e.a(2)}},e,this,[[0,5]])})),function(e){return o.apply(this,arguments)})},{key:"deleteKey",value:(r=hF(lF().m(function e(t){return lF().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.storage.deleteRecord(t);case 1:return e.a(2)}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"_generateKey",value:(n=hF(lF().m(function e(){var t;return lF().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,window.crypto.subtle.generateKey({name:"AES-GCM",length:256},!1,["encrypt","decrypt"]);case 1:return e.a(2,e.v);case 2:throw e.p=2,t=e.v,yt.error("Failed to generate key:",t),new Error("Key generation failed.");case 3:return e.a(2)}},e,null,[[0,2]])})),function(){return n.apply(this,arguments)})},{key:"_saveKey",value:(t=hF(lF().m(function e(t,n){var r;return lF().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,this.storage.addRecord(t,n);case 1:e.n=3;break;case 2:throw e.p=2,r=e.v,yt.error("Failed to save key:",r),new Error("Key saving failed.");case 3:return e.a(2)}},e,this,[[0,2]])})),function(e,n){return t.apply(this,arguments)})},{key:"_clearKeys",value:(e=hF(lF().m(function e(){return lF().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.storage.clearStore();case 1:return e.a(2)}},e,this)})),function(){return e.apply(this,arguments)})},{key:"release",value:function(){this.storage.release()}}]);var e,t,n,r,o,i}();function vF(e){return vF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vF(e)}function bF(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return gF(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(gF(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,gF(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,gF(f,"constructor",c),gF(c,"constructor",s),s.displayName="GeneratorFunction",gF(c,o,"GeneratorFunction"),gF(f),gF(f,o,"Generator"),gF(f,r,function(){return this}),gF(f,"toString",function(){return"[object Generator]"}),(bF=function(){return{w:i,m:p}})()}function gF(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}gF=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){gF(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},gF(e,t,n,r)}function _F(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function wF(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){_F(i,r,o,a,u,"next",e)}function u(e){_F(i,r,o,a,u,"throw",e)}a(void 0)})}}function SF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,EF(r.key),r)}}function EF(e){var t=function(e,t){if("object"!=vF(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=vF(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vF(t)?t:t+""}var kF=function(){return function(e,t,n){return t&&SF(e.prototype,t),n&&SF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new Error("encryptionKeyName is required.");this.encryptionKeyName=t,this.keyStore=null!=n?n:new mF,this.isInitialized=!1},[{key:"init",value:(n=wF(bF().m(function e(){return bF().w(function(e){for(;;)switch(e.n){case 0:if(this.isInitialized){e.n=2;break}return e.n=1,this.keyStore.init();case 1:this.isInitialized=!0;case 2:return e.a(2)}},e,this)})),function(){return n.apply(this,arguments)})},{key:"encrypt",value:(t=wF(bF().m(function e(t){var n,r,o,i,a,u;return bF().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.init();case 1:return e.p=1,e.n=2,this.keyStore.getKey(this.encryptionKeyName);case 2:return n=e.v,r=window.crypto.getRandomValues(new Uint8Array(12)),o=(new TextEncoder).encode(t),e.n=3,window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},n,o);case 3:return i=e.v,a=new Uint8Array(i),e.a(2,{encryptedData:Array.from(a),iv:Array.from(r)});case 4:throw e.p=4,u=e.v,yt.error("Encryption failed:",u),new Error("Encryption error occurred.");case 5:return e.a(2)}},e,this,[[1,4]])})),function(e){return t.apply(this,arguments)})},{key:"decrypt",value:(e=wF(bF().m(function e(t,n){var r,o,i,a,u,s;return bF().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.init();case 1:return e.p=1,e.n=2,this.keyStore.getKey(this.encryptionKeyName);case 2:return r=e.v,o=new Uint8Array(t).buffer,i=new Uint8Array(n),e.n=3,window.crypto.subtle.decrypt({name:"AES-GCM",iv:i},r,o);case 3:return a=e.v,u=(new TextDecoder).decode(a),e.a(2,u);case 4:throw e.p=4,s=e.v,yt.error("Decryption failed:",s),new Error("Decryption error occurred.");case 5:return e.a(2)}},e,this,[[1,4]])})),function(t,n){return e.apply(this,arguments)})}]);var e,t,n}();function TF(e){return TF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TF(e)}function PF(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return OF(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(OF(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,OF(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,OF(f,"constructor",c),OF(c,"constructor",s),s.displayName="GeneratorFunction",OF(c,o,"GeneratorFunction"),OF(f),OF(f,o,"Generator"),OF(f,r,function(){return this}),OF(f,"toString",function(){return"[object Generator]"}),(PF=function(){return{w:i,m:p}})()}function OF(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}OF=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){OF(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},OF(e,t,n,r)}function CF(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function jF(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){CF(i,r,o,a,u,"next",e)}function u(e){CF(i,r,o,a,u,"throw",e)}a(void 0)})}}function RF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,MF(r.key),r)}}function MF(e){var t=function(e,t){if("object"!=TF(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=TF(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==TF(t)?t:t+""}var BF=function(){return function(e,t,n){return t&&RF(e.prototype,t),n&&RF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){var n=t.storeName,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.indexedDBStorage=new sF({storeName:n}),this.cryptoService=null!=r?r:new kF(n),this.initialized=!1},[{key:"init",value:(s=jF(PF().m(function e(){return PF().w(function(e){for(;;)switch(e.n){case 0:if(!this.initialized){e.n=1;break}return e.a(2);case 1:return e.n=2,this.indexedDBStorage.init();case 2:return e.n=3,this.cryptoService.init();case 3:this.initialized=!0;case 4:return e.a(2)}},e,this)})),function(){return s.apply(this,arguments)})},{key:"release",value:function(){this.indexedDBStorage.release(),this.encryptionKeyStorage.release(),this.initialized=!1}},{key:"addRecord",value:(u=jF(PF().m(function e(t,n){var r;return PF().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.init();case 1:return e.n=2,this._encryptRecord(n);case 2:return r=e.v,e.a(2,this.indexedDBStorage.addRecord(t,r))}},e,this)})),function(e,t){return u.apply(this,arguments)})},{key:"getRecord",value:(a=jF(PF().m(function e(t){var n;return PF().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.init();case 1:return e.n=2,this.indexedDBStorage.getRecord(t);case 2:if(n=e.v){e.n=3;break}return e.a(2,null);case 3:return e.a(2,this._decryptRecord(n))}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"updateRecord",value:(i=jF(PF().m(function e(t,n){var r;return PF().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.init();case 1:return e.n=2,this._encryptRecord(n);case 2:return r=e.v,e.a(2,this.indexedDBStorage.updateRecord(t,r))}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"deleteRecord",value:(o=jF(PF().m(function e(t){return PF().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.init();case 1:return e.a(2,this.indexedDBStorage.deleteRecord(t))}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"getAllRecords",value:(r=jF(PF().m(function e(){var t,n=this;return PF().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.init();case 1:return e.n=2,this.indexedDBStorage.getAllRecords();case 2:return t=e.v,e.a(2,Promise.all(t.map(function(e){return n._decryptRecord(e)})))}},e,this)})),function(){return r.apply(this,arguments)})},{key:"clearStore",value:(n=jF(PF().m(function e(){return PF().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.init();case 1:return e.a(2,this.indexedDBStorage.clearStore())}},e,this)})),function(){return n.apply(this,arguments)})},{key:"_encryptRecord",value:(t=jF(PF().m(function e(t){var n,r,o;return PF().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.cryptoService.encrypt(JSON.stringify(t));case 1:return n=e.v,r=n.encryptedData,o=n.iv,e.a(2,{encryptedData:r,iv:o})}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"_decryptRecord",value:(e=jF(PF().m(function e(t){var n,r,o;return PF().w(function(e){for(;;)switch(e.n){case 0:return n=t.encryptedData,r=t.iv,e.n=1,this.cryptoService.decrypt(n,r);case 1:return o=e.v,e.a(2,JSON.parse(o))}},e,this)})),function(t){return e.apply(this,arguments)})}]);var e,t,n,r,o,i,a,u,s}();function AF(e){return AF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AF(e)}function xF(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return DF(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,u=0,s=e,p.n=n,a}};function h(n,r){for(u=n,s=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],h=p.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(u=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),u=l,s=y;(t=u<2?e:s)||!f;){i||(u?u<3?(u>1&&(p.n=-1),h(u,s)):p.n=s:p.v=s);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==a)break}catch(t){i=e,u=1,s=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(DF(t={},r,function(){return this}),t),f=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,DF(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=c,DF(f,"constructor",c),DF(c,"constructor",s),s.displayName="GeneratorFunction",DF(c,o,"GeneratorFunction"),DF(f),DF(f,o,"Generator"),DF(f,r,function(){return this}),DF(f,"toString",function(){return"[object Generator]"}),(xF=function(){return{w:i,m:p}})()}function DF(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}DF=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){DF(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},DF(e,t,n,r)}function IF(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function LF(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){IF(i,r,o,a,u,"next",e)}function u(e){IF(i,r,o,a,u,"throw",e)}a(void 0)})}}function FF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,NF(r.key),r)}}function NF(e){var t=function(e,t){if("object"!=AF(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=AF(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==AF(t)?t:t+""}var UF=function(){return function(e,t,n){return t&&FF(e.prototype,t),n&&FF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){var n=t.domUtils,r=t.utils,o=t.configurationRepository,i=t.keys,a=void 0===i?{indexedDBKey:"emuid"}:i,u=t.encryptedIndexedDB,s=void 0===u?new BF({storeName:"emuid"}):u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._domUtils=n,this._utils=r,this._configurationRepository=o,this._encryptedStorage=s,this._keys=a},[{key:"getEncryptedMuid",value:(n=LF(xF().m(function e(){var t,n;return xF().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,yt.debug("Fetching existing Encrypted MUID from storage..."),e.n=1,this._fetchMuidFromStorage();case 1:if(t=e.v,this._isValidMuid(t)){e.n=3;break}return yt.warn("No valid Encrypted MUID found. Generating a new one..."),e.n=2,this._generateNewMuid();case 2:return t=e.v,e.n=3,this._saveMuidToStorage(t);case 3:return e.a(2,t);case 4:return e.p=4,n=e.v,yt.error("Failed to initialize MUID:",n),e.a(2,null)}},e,this,[[0,4]])})),function(){return n.apply(this,arguments)})},{key:"_fetchMuidFromStorage",value:(t=LF(xF().m(function e(){var t,n;return xF().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,this._encryptedStorage.getRecord(this._keys.indexedDBKey);case 1:return t=e.v,yt.debug("Fetched Encrypted MUID from storage."),e.a(2,(null==t?void 0:t.emuid)||null);case 2:return e.p=2,n=e.v,yt.error("Error retrieving Encrypted MUID from storage:",n),e.a(2,null)}},e,this,[[0,2]])})),function(){return t.apply(this,arguments)})},{key:"_saveMuidToStorage",value:(e=LF(xF().m(function e(t){var n;return xF().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,this._encryptedStorage.updateRecord(this._keys.indexedDBKey,{emuid:t});case 1:yt.debug("Encrypted MUID saved to storage."),e.n=3;break;case 2:e.p=2,n=e.v,yt.error("Error saving Encrypted MUID to storage:",n);case 3:return e.a(2)}},e,this,[[0,2]])})),function(t){return e.apply(this,arguments)})},{key:"_generateNewMuid",value:function(){return this._utils.dateNow()+"-"+this._utils.generateUUID().toUpperCase()}},{key:"_isValidMuid",value:function(e){return!!e&&/^([0-9]{13,}-)?[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)}}]);var e,t,n}();function WF(e){return WF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WF(e)}function GF(e){return function(e){if(Array.isArray(e))return HF(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return HF(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?HF(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function QF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zF(r.key),r)}}function zF(e){var t=function(e,t){if("object"!=WF(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=WF(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==WF(t)?t:t+""}var VF=function(){return function(e,t,n){return t&&QF(e.prototype,t),n&&QF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=n(542),a=n(727),u=r&&Object.keys(r).length?r:i,s=(null==o||null===(t=o.attributes)||void 0===t?void 0:t.length)>0?o:a;this.CATEGORY_RULES=new Map(Object.entries(u)),this.ATTRIBUTE_NAMES=s},[{key:"categoryField",value:function(e){var t,n,r=this;if(!(e instanceof HTMLElement)||"hidden"===e.type)return"0";var o=this.ATTRIBUTE_NAMES.attributes.map(function(t){var n;return null===(n=e.getAttribute(t))||void 0===n?void 0:n.toLowerCase()}).filter(Boolean),i=null===(t=document.querySelector('label[for="'.concat(e.id,'"]')))||void 0===t||null===(t=t.innerText)||void 0===t?void 0:t.toLowerCase();i&&o.push(i);var a=new Map;return o.flatMap(function(e){return e.split(/\s+/)}).forEach(function(e){var t=r.CATEGORY_RULES.get(e);t&&a.set(t,(a.get(t)||0)+1)}),a.size?null===(n=GF(a.entries()).reduce(function(e,t){return t[1]>e[1]?t:e},["0",0])[0])||void 0===n?void 0:n.toString():"0"}}])}();function KF(e){return KF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KF(e)}function qF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,JF(r.key),r)}}function JF(e){var t=function(e,t){if("object"!=KF(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=KF(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==KF(t)?t:t+""}var YF=function(){return function(e,t,n){return t&&qF(e.prototype,t),n&&qF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._configurationRepository=t,this._dataQ=n,this._aggregatedDebugInfoData={},this._changeId=-1,this._flushId=-1,this._dataQ.registerOnPreSendToWorker(this._onPreSendToWorker.bind(this)),this.defaultCollectionLevels={emuid:"debug",storage_directory:"debug",screen_high_res:"debug",adblock_lists:"debug",webgl:"debug",drm:"debug",speech_voices:"debug",cpu:"debug",font_emoji_info:"debug",font_math_info:"debug",font_width_info:"debug",navigator_pdfViewerEnabled:"debug",navigator_webdriver:"debug",navigator_userAgentData:"debug",navigator_appVersion:"debug",navigator_platform:"debug",navigator_vendor:"debug",navigator_productSub:"debug",navigator_vendorSub:"debug",navigator_onLine:"debug",navigator_getHighEntropyValues:"debug",navigator_prototype:"debug",heap:"debug",audio_detect_feature2:"debug",cpuTiming:"debug",graphicTiming:"debug",browserTiming:"debug",fontTiming:"debug"},this._fixedDebugFeatures=["emuid"]},[{key:"addToQueue",value:function(e,t,n,r){var o=this._resolveDebugInfoCollectionLevels(),i=t[0],a=this._fixedDebugFeatures.includes(i)?"debug":o[i];"debug"===a?(this._aggregatedDebugInfoData[i]=t.slice(1),this._changeId++):"prod"===a?this._dataQ.addToQueue(e,t,n,r):yt.warn("Received collectionLevel = ".concat(a," for ").concat(i))}},{key:"_onPreSendToWorker",value:function(){this._changeId!==this._flushId&&0!==Object.keys(this._aggregatedDebugInfoData).length&&(this._appendAggregatedDebugInfoDataToQueue(),this._flushId=this._changeId)}},{key:"_appendAggregatedDebugInfoDataToQueue",value:function(){var e=JSON.parse(JSON.stringify(this._aggregatedDebugInfoData));this._dataQ.appendData("static_fields",["client_debug_info",e])}},{key:"_resolveDebugInfoCollectionLevels",value:function(){var e=this._configurationRepository.get("debugInfoCollectionLevels");if(!e)return this.defaultCollectionLevels;try{return JSON.parse(e)}catch(e){return yt.error("Invalid debugInfoCollectionLevels config, falling back to defaults",e),this.defaultCollectionLevels}}}])}();function XF(e){return XF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XF(e)}function ZF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$F(r.key),r)}}function $F(e){var t=function(e,t){if("object"!=XF(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=XF(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==XF(t)?t:t+""}var eN=function(){return function(e,t,n){return t&&ZF(e.prototype,t),n&&ZF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._serverWorker=null,this._serverWorkerCommunicator=null,this._configurationService=null,this._featureBuilder=null,this._featureService=null,this._dataQ=null,this._frameHandler=null,this._eventHandlers=[],this._contextMgr=null,this._runWorker=function(e){return new An(e.getUseUrlWorker(),e.getWorkerUrl()).create()}},[{key:"start",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._loadSystem(e,t,n)}},{key:"stop",value:function(){this._serverWorker&&this._serverWorker.close(),this.heartBeatService&&this.heartBeatService.stop()}},{key:"registerPostLoadEvents",value:function(){this._slaveListener.onResetSessionTrigger.subscribe(this._sessionService.resetSession.bind(this._sessionService))}},{key:"flushAllMessages",value:function(){this._dataQ.flushAllMessages()}},{key:"handleCoordinatesMaskingConfigurationUpdate",value:function(e){this._coordinatesMaskingConfigurationUpdater.updateConfig(e)}},{key:"getServerWorkerCommunicator",value:function(){return this._serverWorkerCommunicator}},{key:"getFeatureBuilder",value:function(){return this._featureBuilder}},{key:"getFeatureService",value:function(){return this._featureService}},{key:"getConfigurationService",value:function(){return this._configurationService}},{key:"getConfigurationRepository",value:function(){return this._configurationRepository}},{key:"getSessionService",value:function(){return this._sessionService}},{key:"getContextMgr",value:function(){return this._contextMgr}},{key:"getMuidService",value:function(){return this._muidService}},{key:"getEncryptedMuidService",value:function(){return this._muidEncryptedService}},{key:"getApiBridge",value:function(){return this._customerApiBridge}},{key:"getPerfMonitor",value:function(){return this._perfMonitor}},{key:"getServerStateMgr",value:function(){return this._serverStateMgr}},{key:"getMessageBus",value:function(){return this._msgBus}},{key:"getAgentIdService",value:function(){return this._agentIdService}},{key:"_loadSystem",value:function(e,t,n){var r,o;this._runServerWorker(t),this._serverWorkerCommunicator=new Kn,this._serverWorkerCommunicator.setMessagingPort(this._serverWorker.port);var i=new lf(Ic,this._serverWorkerCommunicator,null,"logPerfQPassWorkerInterval",fn);this._perfMonitor=new tr(i),this._configurationRepository=new Vr,new Ql(this._configurationRepository,t).loadStartUpConfigurations();var a=null===(r=this._configurationRepository)||void 0===r?void 0:r.get(fe);this._shouldEnableWorkerWupMessagesHashing(a,this._serverWorkerCommunicator);var u=new yf(nn,this._configurationRepository),s=new ir(self.MutationObserver,nn,Ic,"contextConfiguration",null,!0,400);this._contextMgr=new hr(nn,s,this._serverWorkerCommunicator,u);var c=new tf(i,this._contextMgr.url),l=new dt(c);yt.setLogger(l);var f=null===(o=this._configurationRepository)||void 0===o?void 0:o.get(le);this._registerFeatures(f),this._currScriptName=document.currentScript?document.currentScript.src:"",this._globalexceptionHandler=new vr(nn,this._currScriptName),this._msgBus=new Sr,this._dataQ=new Xn(Ic,this._serverWorkerCommunicator,this._contextMgr,"dataQPassWorkerInterval",ln),this._devDebugDataQueue=new YF(this._configurationRepository,this._dataQ),this._agentIdCache=new Df(u),this._agentIdService=new Nf(this._agentIdCache,this._serverWorkerCommunicator),this._cidCache=new Pr(t.getWupServerURL()),this._serverStateMgr=new Ir(this._serverWorkerCommunicator,nn,this._agentIdService),this._sessionInfoService=new Yc,this._sensorGateKeeper=new el(this._sessionInfoService,this._configurationRepository),this._configurationService=new Uo(nn,this._configurationRepository,this._msgBus,this._cidCache,this._serverWorkerCommunicator),this._sensorDataQ=new Bi(this._configurationRepository,this._dataQ,this._msgBus,nn,this._sensorGateKeeper),this._maskingService=new $o(this._configurationRepository);var p=t.getElementCategories(),h=t.getElementAttributes();this._categoryService=new VF(p,h),this._elementsUtils=new Xi(this._configurationRepository,nn,this._dataQ,this._contextMgr,this._maskingService,this._categoryService);var y=new Va,d=new mu(this._configurationRepository,Ic,nn);this._frameHandler=d.create(),this._featureService=new _u(LL,this._frameHandler,this._configurationRepository,Ic,nn,y);var m=new Il(nn,this._msgBus,this._configurationRepository);this._stateService=new Ds(this._msgBus),this._pauseResumeMgr=new Pu(this._featureService,this._configurationRepository,this._dataQ,this._stateService,this._serverWorkerCommunicator),this._customerApiBridge=new Lu(this._pauseResumeMgr,this._msgBus,e,nn),this._configurationRepository.get(ce)!==rt.SECONDARY&&(this._muidService=new Wu(nn,this._dataQ,u,this._configurationRepository),this._muidEncryptedService=new UF({domUtils:Ic,utils:nn,storage:u,configurationRepository:this._configurationRepository})),this._psidCache=new zu;var v=new Ju(this._psidCache,this._serverWorkerCommunicator),b=new ir(self.MutationObserver,nn,Ic,"resetSessionConfig"),g=new $u(nn,u,this._configurationRepository);this._csidCache=new rs,n&&this._csidCache.set(n);var _=new us(this._customerApiBridge,this._csidCache,this._serverWorkerCommunicator),w=new Sf(nn,u);this._brandService=new bf(this._serverWorkerCommunicator,w),this._coordinatesMaskingConfigurationUpdater=new Rf(this._configurationRepository);var S=new XL(t.getWupServerURL()),E=new zL(t.getWupServerURL()),k=t.isMinifiedWupUriEnabled();this._sessionService=new ps(this._msgBus,this._configurationService,this._configurationRepository,nn,Ic,this._serverWorkerCommunicator,this._contextMgr,this._muidService,this._serverStateMgr,b,g,S,this._cidCache,E,k,_,this._csidCache,this._psidCache,this._brandService,this._agentIdService),this._metadataService=new ms(this._configurationRepository,this._dataQ),this._slaveListener=new Es(this._dataQ,this._configurationRepository,nn,i,this._contextMgr),this._slaveListener.listen(),this._sameChar=new mi,this._fontTimingService=new xM,this._featureBuilder=new Os(LL,this._configurationRepository,nn,this._elementsUtils,self.MutationObserver,this._dataQ,this._devDebugDataQueue,t,this._sessionService,this._muidService,this._muidEncryptedService,this._perfMonitor,this._sensorDataQ,this._msgBus,this._cidCache,this._sameChar,this._maskingService,this._contextMgr,this._fontTimingService),this._contextApiHandler=new Ms(this._contextMgr,this._dataQ),this._contextMgr.onContextChange.subscribe(this._featureService.runPerContextFeatures.bind(this._featureService));var T=new Hs;this.heartBeatService=new Uc(this._serverWorkerCommunicator,new Vc,this._configurationRepository.get(F)),this.heartBeatService.start(),this._eventHandlers.push(new Pf(this._msgBus,this._muidService,T,this._serverWorkerCommunicator)),this._eventHandlers.push(new Ks(this._msgBus,this._contextMgr)),this._eventHandlers.push(new Xs(this._msgBus,this._sessionService)),this._eventHandlers.push(new tc(this._msgBus,this._metadataService)),this._eventHandlers.push(new ic(this._msgBus,this._pauseResumeMgr,this._slaveListener)),this._eventHandlers.push(new cc(this._msgBus,_)),this._eventHandlers.push(new hc(this._msgBus,v)),this._eventHandlers.push(new jc(this._msgBus,this._brandService)),this._eventHandlers.push(new Tc(this._msgBus,T)),this._eventHandlers.push(new wc(this._msgBus,this._featureService,this._dataQ,this._pauseResumeMgr,this._metadataService,l,this._contextMgr,this._sessionService,this._sensorDataQ,this._slaveListener,this._stateService,this._perfMonitor,this.heartBeatService,this._sensorGateKeeper,g,this._coordinatesMaskingConfigurationUpdater)),this._eventHandlers.push(new vc(this._msgBus,this._featureService,this._customerApiBridge,this._contextMgr,T,this._sessionInfoService)),this._configurationRepository.get(J)&&(m.start(new ba(window.self)),this._eventHandlers.push(new Ul(y,this._featureService,this._msgBus))),t.getLogServerURL()&&this._configurationService.updateLogUrlToWorker(this._sessionService.sessionId,this._csidCache.get(),this._serverWorkerCommunicator),t.isFlutterApp()&&(window.bcClient?window.bcClient.flutterBridge=new WL(this._msgBus):yt.error("Cannot initiate FlutterSdkBridge: bcClient object not found.")),this._stateService.updateState(bn.starting)}},{key:"_runServerWorker",value:function(e){this._serverWorker=this._runWorker(e)}},{key:"_registerFeatures",value:function(e){if(e!==ot.LEAN)return yt.info("Build features per collection mode: FULL"),void LL.register();yt.info("Build features per collection mode: LEAN"),LL.registerLeanFeatures()}},{key:"_shouldEnableWorkerWupMessagesHashing",value:function(e,t){e&&t.sendAsync(mn,{enableWupMessagesHashing:e})}}])}(),tN="getConfigurations",nN="client";function rN(e){return rN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rN(e)}function oN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,iN(r.key),r)}}function iN(e){var t=function(e,t){if("object"!=rN(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=rN(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rN(t)?t:t+""}var aN=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){return t&&oN(e.prototype,t),n&&oN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(e,null,[{key:"extract",value:function(e){if(!e)throw new Error("Invalid wupServerURL. Parameter is empty");var t={};if(t.cid=this.getCID(e),t.serverURL=this.getServerURL(e),!t.serverURL)throw new Error("Invalid field. Failed extracting the address parameter: ".concat(e));if(!t.cid)throw new Error("Invalid field. Failed extracting the cid parameter: ".concat(e));return t}},{key:"getCID",value:function(t){var n=e.extractCid(t);return n||null}},{key:"extractCid",value:function(e){var t=e.indexOf("cid=");if(-1===t)return null;t+=4;var n=e.indexOf("&",t);return n=-1===n?void 0:n,e.substring(t,n)}},{key:"getServerURL",value:function(e){var t=e.indexOf("/client/v",e);return(t=-1===t?null:t)?e.substring(0,t):null}}])}();function uN(e){return uN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uN(e)}function sN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cN(r.key),r)}}function cN(e){var t=function(e,t){if("object"!=uN(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=uN(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==uN(t)?t:t+""}var lN=function(){return function(e,t,n){return t&&sN(e.prototype,t),n&&sN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},null,[{key:"build",value:function(e,t){var n="/client/v3.1/web/wup";if(!e)throw new Error("Invalid server URL. Parameter is empty");return nn.hasProtocol(e)?e.toString().concat(n,"?cid=",t):"https".concat("://",e,n,"?cid=",t)}},{key:"buildCustomServerUrl",value:function(e){if(!e)throw new Error("Invalid server URL. Parameter is empty");return nn.hasProtocol(e)?e:"https".concat("://",e)}}])}();function fN(e){return fN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fN(e)}function pN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hN(r.key),r)}}function hN(e){var t=function(e,t){if("object"!=fN(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fN(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fN(t)?t:t+""}function yN(e,t,n){return t=bN(t),function(e,t){if(t&&("object"==fN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,mN()?Reflect.construct(t,n||[],bN(e).constructor):t.apply(e,n))}function dN(e){var t="function"==typeof Map?new Map:void 0;return dN=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(mN())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&vN(o,n.prototype),o}(e,arguments,bN(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),vN(n,e)},dN(e)}function mN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(mN=function(){return!!e})()}function vN(e,t){return vN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vN(e,t)}function bN(e){return bN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bN(e)}var gN=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),yN(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vN(e,t)}(t,e),function(e,t,n){return t&&pN(e.prototype,t),n&&pN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(dN(Error)),_N="enableRestart",wN="enableFlush",SN="enableCustomElements";function EN(e){return EN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EN(e)}function kN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,TN(r.key),r)}}function TN(e){var t=function(e,t){if("object"!=EN(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=EN(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==EN(t)?t:t+""}var PN=function(){return function(e,t,n){return t&&kN(e.prototype,t),n&&kN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cdApi=n,this._utils=t},[{key:"cdApi",value:function(){return this._cdApi||window.cdApi}},{key:"getCustomerSessionID",value:function(e){this._getFromApiOrEmpty("getCustomerSessionID",function(t){e(t)})}},{key:"getLogServerAddress",value:function(e){this._getFromApiOrEmpty("getLogServerAddress",function(t){e(t)})}},{key:"getServerAddress",value:function(e){this._getFromApiOrEmpty("getCustomerConfigLocation",function(t){e(t)})}},{key:"getConfigurations",value:function(e){var t=this,n=null;this.isApiAvailable(tN)?this._getFromApiOrEmpty(tN,function(t){var r=null;if(t){if(t.isWupServerURLProxy)n=t.wupServerURL;else if(t[Ce])n=lN.buildCustomServerUrl(t[Ce]);else{if(!t[De]||!t[xe])throw new Error("Invalid serverURL or cid. Parameter is empty");n=lN.build(t[xe],t[De])}r=(new Ot).mapStartupConfigurations(n,t)}e(r)}):this.getLogServerAddress(function(r){t.getServerAddress(function(t){var o=aN.extract(t);n=lN.build(o.serverURL,o.cid),e(new Et(n,r,null,!1,"",null))})})}},{key:"createClientInterface",value:function(e,t){if(!this.isCDAPIAvailable())throw yt.error("Failed setting client facade. cdApi is unavailable."),new gN("Failed setting client facade. cdApi is unavailable.");var n={setCoordinatesMasking:function(t){e.setCoordinatesMasking(t)}};t&&t[_N]&&(n.restart=function(){e.restart()}),t&&t[wN]&&(n.flush=function(){e.flush()}),t&&t[SN]&&(n.submitCustomElement=function(t){e.submitCustomElement(t)}),this.cdApi()[nN]=n}},{key:"isCDAPIAvailable",value:function(){return!!this.cdApi()}},{key:"isApiAvailable",value:function(e){return!!this.cdApi()&&!!this.cdApi()[e]}},{key:"_getFromApiOrEmpty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!this.cdApi())return n>=20?void yt.error("Failed getting cdApi after all retries."):(0===n&&yt.warn("cdApi not found in retry ".concat(n)),n++,void setTimeout(this._getFromApiOrEmpty.bind(this,e,t,n),100));if(!this.cdApi()[e])return yt.warn("User did not implement cdApi method: ".concat(e)),void t("");try{this.cdApi()[e](t)}catch(t){throw yt.error("An error has occurred while calling cdApi ".concat(e," function. Exception was thrown from client implementation."),t),t}}}])}();function ON(e){return ON="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ON(e)}function CN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jN(r.key),r)}}function jN(e){var t=function(e,t){if("object"!=ON(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ON(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ON(t)?t:t+""}var RN=function(){return function(e,t,n){return t&&CN(e.prototype,t),n&&CN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},[{key:"autoStart",value:function(e){var t=this,n=new PN;n.getConfigurations(function(r){r?r.getWupServerURL()?r.getUseUrlWorker()&&""===r.getWorkerUrl()?yt.error("Failed starting the JS SDK. Received invalid WorkerUrl configuration"):t.start(n,r,e):yt.error("Missing server URL. Unable to start the library."):yt.error("Failed starting the JS SDK. Received invalid start configurations")})}},{key:"manualStart",value:function(e,t,n,r,o){var i=new PN(void 0,r);this.start(i,e,n,o)}},{key:"start",value:function(e,t,n,r){var o;this._cdApiFacade=e,this._startupConfigurations=t,this._configurationLoadedCallback=n,this.systemBootstrapper=new eN,e.createClientInterface(this,t.getClientSettings()),this.systemBootstrapper.start(e,t,r),yt.info("Got server address: ".concat(t.getWupServerURL()));var i=this.systemBootstrapper.getPerfMonitor();i.startMonitor("t.timeTillServerConfig"),i.startMonitor("t.timeTillDataCollect"),this.configurationService=this.systemBootstrapper.getConfigurationService(),this.sessionService=this.systemBootstrapper.getSessionService(),this.configurationService.setConfigurationLoadedCallback(n),this.systemBootstrapper.getFeatureService().buildFrameRelatedLists(),this.systemBootstrapper.getFeatureBuilder().buildFeatures(),yt.info("Started default features collection"),this.systemBootstrapper.getFeatureService().runDefault(),this.systemBootstrapper.getApiBridge().enableApi(),this.systemBootstrapper.getContextMgr().initContextHandling(),this.systemBootstrapper.registerPostLoadEvents(),null===(o=this.systemBootstrapper.getMuidService())||void 0===o||o.initMuid(),this.systemBootstrapper.getConfigurationRepository().get(pe)?this.sessionService.startNewSession():this.sessionService.resumeOrStartSession()}},{key:"stop",value:function(){this.systemBootstrapper.stop()}},{key:"pause",value:function(){window.postMessage({type:"cdChangeState",toState:"pause"},window.location.href)}},{key:"resume",value:function(){window.postMessage({type:"cdChangeState",toState:"run"},window.location.href)}},{key:"updateCustomerSessionID",value:function(e){window.postMessage({type:"cdSetCsid",csid:e},window.location.href)}},{key:"changeContext",value:function(e){window.postMessage({type:"ContextChange",context:e},window.location.href)}},{key:"startNewSession",value:function(e){window.postMessage({type:"ResetSession",resetReason:"customerApi",csid:e},window.location.href)}},{key:"setCustomerBrand",value:function(e){window.postMessage({type:"cdSetCustomerBrand",brand:e},window.location.href)}},{key:"restart",value:function(){this.stop(),this.start(this._cdApiFacade,this._startupConfigurations,this._configurationLoadedCallback)}},{key:"flush",value:function(){this.systemBootstrapper.flushAllMessages()}},{key:"setCoordinatesMasking",value:function(e){this.systemBootstrapper.handleCoordinatesMaskingConfigurationUpdate(e)}},{key:"submitCustomElement",value:function(e){this.systemBootstrapper.getMessageBus().publish(Ao,e)}}])}();function MN(){return new m(new RN,new _,new Ot,new It)}MN()}(),cdwpb=r}();